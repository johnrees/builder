!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/builder/",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,i){r.apply(this,[e,t,i].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){n(206),e.exports=n(216)},function(e,t,n){var r,i,o={REVISION:"79"};r=o,i="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==i&&(e.exports=i)),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(e){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}}(),Object.assign(o,{MOUSE:{LEFT:0,MIDDLE:1,RIGHT:2},CullFaceNone:0,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,FrontFaceDirectionCW:0,FrontFaceDirectionCCW:1,BasicShadowMap:0,PCFShadowMap:1,PCFSoftShadowMap:2,FrontSide:0,BackSide:1,DoubleSide:2,FlatShading:1,SmoothShading:2,NoColors:0,FaceColors:1,VertexColors:2,NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5,AddEquation:100,SubtractEquation:101,ReverseSubtractEquation:102,MinEquation:103,MaxEquation:104,ZeroFactor:200,OneFactor:201,SrcColorFactor:202,OneMinusSrcColorFactor:203,SrcAlphaFactor:204,OneMinusSrcAlphaFactor:205,DstAlphaFactor:206,OneMinusDstAlphaFactor:207,DstColorFactor:208,OneMinusDstColorFactor:209,SrcAlphaSaturateFactor:210,NeverDepth:0,AlwaysDepth:1,LessDepth:2,LessEqualDepth:3,EqualDepth:4,GreaterEqualDepth:5,GreaterDepth:6,NotEqualDepth:7,MultiplyOperation:0,MixOperation:1,AddOperation:2,NoToneMapping:0,LinearToneMapping:1,ReinhardToneMapping:2,Uncharted2ToneMapping:3,CineonToneMapping:4,UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307,RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002,NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008,UnsignedByteType:1009,ByteType:1010,ShortType:1011,UnsignedShortType:1012,IntType:1013,UnsignedIntType:1014,FloatType:1015,HalfFloatType:1025,UnsignedShort4444Type:1016,UnsignedShort5551Type:1017,UnsignedShort565Type:1018,AlphaFormat:1019,RGBFormat:1020,RGBAFormat:1021,LuminanceFormat:1022,LuminanceAlphaFormat:1023,RGBEFormat:o.RGBAFormat,DepthFormat:1026,RGB_S3TC_DXT1_Format:2001,RGBA_S3TC_DXT1_Format:2002,RGBA_S3TC_DXT3_Format:2003,RGBA_S3TC_DXT5_Format:2004,RGB_PVRTC_4BPPV1_Format:2100,RGB_PVRTC_2BPPV1_Format:2101,RGBA_PVRTC_4BPPV1_Format:2102,RGBA_PVRTC_2BPPV1_Format:2103,RGB_ETC1_Format:2151,LoopOnce:2200,LoopRepeat:2201,LoopPingPong:2202,InterpolateDiscrete:2300,InterpolateLinear:2301,InterpolateSmooth:2302,ZeroCurvatureEnding:2400,ZeroSlopeEnding:2401,WrapAroundEnding:2402,TrianglesDrawMode:0,TriangleStripDrawMode:1,TriangleFanDrawMode:2,LinearEncoding:3e3,sRGBEncoding:3001,GammaEncoding:3007,RGBEEncoding:3002,LogLuvEncoding:3003,RGBM7Encoding:3004,RGBM16Encoding:3005,RGBDEncoding:3006,BasicDepthPacking:3200,RGBADepthPacking:3201}),o.Color=function(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)},o.Color.prototype={constructor:o.Color,r:1,g:1,b:1,set:function(e){return e instanceof o.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){this.r=e,this.g=e,this.b=e},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=o.Math.euclideanModulo(t,1),n=o.Math.clamp(n,0,1),r=o.Math.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,a=2*r-i;this.r=e(a,i,t+1/3),this.g=e(a,i,t),this.b=e(a,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var s=parseFloat(r[1])/360,u=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(s,u,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c=n[1],h=c.length;if(3===h)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}if(e&&e.length>0){var c=o.ColorKeywords[e];void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,n,r=e||{h:0,s:0,l:0},i=this.r,o=this.g,a=this.b,s=Math.max(i,o,a),u=Math.min(i,o,a),l=(u+s)/2;if(u===s)t=0,n=0;else{var c=s-u;switch(n=l<=.5?c/(s+u):c/(2-s-u),s){case i:t=(o-a)/c+(o<a?6:0);break;case o:t=(a-i)/c+2;break;case a:t=(i-o)/c+4}t/=6}return r.h=t,r.s=n,r.l=l,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},o.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},o.Quaternion=function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1},o.Quaternion.prototype={constructor:o.Quaternion,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(e instanceof o.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(e._x/2),r=Math.cos(e._y/2),i=Math.cos(e._z/2),a=Math.sin(e._x/2),s=Math.sin(e._y/2),u=Math.sin(e._z/2),l=e.order;return"XYZ"===l?(this._x=a*r*i+n*s*u,this._y=n*s*i-a*r*u,this._z=n*r*u+a*s*i,this._w=n*r*i-a*s*u):"YXZ"===l?(this._x=a*r*i+n*s*u,this._y=n*s*i-a*r*u,this._z=n*r*u-a*s*i,this._w=n*r*i+a*s*u):"ZXY"===l?(this._x=a*r*i-n*s*u,this._y=n*s*i+a*r*u,this._z=n*r*u+a*s*i,this._w=n*r*i-a*s*u):"ZYX"===l?(this._x=a*r*i-n*s*u,this._y=n*s*i+a*r*u,this._z=n*r*u-a*s*i,this._w=n*r*i+a*s*u):"YZX"===l?(this._x=a*r*i+n*s*u,this._y=n*s*i+a*r*u,this._z=n*r*u-a*s*i,this._w=n*r*i-a*s*u):"XZY"===l&&(this._x=a*r*i-n*s*u,this._y=n*s*i-a*r*u,this._z=n*r*u+a*s*i,this._w=n*r*i+a*s*u),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],l=n[2],c=n[6],h=n[10],f=r+s+h;return f>0?(t=.5/Math.sqrt(f+1),this._w=.25/t,this._x=(c-u)*t,this._y=(o-l)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(c-u)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+l)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-l)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(u+c)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+l)/t,this._y=(u+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t,n=1e-6;return function(r,i){return void 0===e&&(e=new o.Vector3),t=r.dot(i)+1,t<n?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,i),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var u=Math.atan2(s,a),l=Math.sin((1-t)*u)/s,c=Math.sin(t*u)/s;return this._w=o*l+this._w*c,this._x=n*l+this._x*c,this._y=r*l+this._y*c,this._z=i*l+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},Object.assign(o.Quaternion,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[o+0],f=i[o+1],p=i[o+2],d=i[o+3];if(c!==d||s!==h||u!==f||l!==p){var m=1-a,v=s*h+u*f+l*p+c*d,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,v*g);m=Math.sin(m*b)/_,a=Math.sin(a*b)/_}var w=a*g;if(s=s*m+h*w,u=u*m+f*w,l=l*m+p*w,c=c*m+d*w,m===1-a){var x=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=x,u*=x,l*=x,c*=x}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}}),o.Vector2=function(e,t){this.x=e||0,this.y=t||0},o.Vector2.prototype={constructor:o.Vector2,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new o.Vector2,t=new o.Vector2),e.set(n,n),t.set(r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}},o.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},o.Vector3.prototype={constructor:o.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return t instanceof o.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new o.Quaternion),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e;return function(t,n){return void 0===e&&(e=new o.Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12],this.y=i[1]*t+i[5]*n+i[9]*r+i[13],this.z=i[2]*t+i[6]*n+i[10]*r+i[14],this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,l=s*n+a*t-i*r,c=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this},project:function(){var e;return function(t){return void 0===e&&(e=new o.Matrix4),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyProjection(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new o.Matrix4),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new o.Vector3,t=new o.Vector3),e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,r=this.y,i=this.z;return this.x=r*e.z-i*e.y,this.y=i*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new o.Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new o.Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(o.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){if("number"==typeof e){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=e;e=t,t=n}return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this}},o.Vector4=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1},o.Vector4.prototype={constructor:o.Vector4,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=.01,a=.1,s=e.elements,u=s[0],l=s[4],c=s[8],h=s[1],f=s[5],p=s[9],d=s[2],m=s[6],v=s[10];if(Math.abs(l-h)<o&&Math.abs(c-d)<o&&Math.abs(p-m)<o){if(Math.abs(l+h)<a&&Math.abs(c+d)<a&&Math.abs(p+m)<a&&Math.abs(u+f+v-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var g=(u+1)/2,y=(f+1)/2,_=(v+1)/2,b=(l+h)/4,w=(c+d)/4,x=(p+m)/4;return g>y&&g>_?g<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(g),r=b/n,i=w/n):y>_?y<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=b/r,i=x/r):_<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(_),n=w/i,r=x/i),this.set(n,r,i,t),this}var E=Math.sqrt((m-p)*(m-p)+(c-d)*(c-d)+(h-l)*(h-l));return Math.abs(E)<.001&&(E=1),this.x=(m-p)/E,this.y=(c-d)/E,this.z=(h-l)/E,this.w=Math.acos((u+f+v-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new o.Vector4,t=new o.Vector4),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),
this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromAttribute:function(e,t,n){return void 0===n&&(n=0),t=t*e.itemSize+n,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this.w=e.array[t+3],this}},o.Euler=function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||o.Euler.DefaultOrder},o.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],o.Euler.DefaultOrder="XYZ",o.Euler.prototype={constructor:o.Euler,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=o.Math.clamp,i=e.elements,a=i[0],s=i[4],u=i[8],l=i[1],c=i[5],h=i[9],f=i[2],p=i[6],d=i[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(p,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(u,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===t?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,c))):"YZX"===t?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(u,d))):"XZY"===t?(this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(p,c),this._y=Math.atan2(u,a)):(this._x=Math.atan2(-h,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,n,r){return void 0===e&&(e=new o.Matrix4),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new o.Quaternion;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new o.Vector3(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},o.Line3=function(e,t){this.start=void 0!==e?e:new o.Vector3,this.end=void 0!==t?t:new o.Vector3},o.Line3.prototype={constructor:o.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){var t=e||new o.Vector3;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new o.Vector3;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new o.Vector3;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new o.Vector3,t=new o.Vector3;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),a=t.dot(e),s=a/i;return r&&(s=o.Math.clamp(s,0,1)),s}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t),i=n||new o.Vector3;return this.delta(i).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},o.Box2=function(e,t){this.min=void 0!==e?e:new o.Vector2((+(1/0)),(+(1/0))),this.max=void 0!==t?t:new o.Vector2((-(1/0)),(-(1/0)))},o.Box2.prototype={constructor:o.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new o.Vector2;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){var t=e||new o.Vector2;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new o.Vector2;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var n=t||new o.Vector2;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){var n=t||new o.Vector2;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new o.Vector2;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},o.Box3=function(e,t){this.min=void 0!==e?e:new o.Vector3((+(1/0)),(+(1/0)),(+(1/0))),this.max=void 0!==t?t:new o.Vector3((-(1/0)),(-(1/0)),(-(1/0)))},o.Box3.prototype={constructor:o.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=+(1/0),n=+(1/0),r=+(1/0),i=-(1/0),o=-(1/0),a=-(1/0),s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],h=e[s+2];l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}this.min.set(t,n,r),this.max.set(i,o,a)},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new o.Vector3;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(){var e=new o.Vector3;return function(t){var n=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var r=t.geometry;if(void 0!==r)if(r instanceof o.Geometry)for(var i=r.vertices,a=0,s=i.length;a<s;a++)e.copy(i[a]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e);else if(r instanceof o.BufferGeometry){var u=r.attributes.position;if(void 0!==u){var l,c,h;u instanceof o.InterleavedBufferAttribute?(l=u.data.array,c=u.offset,h=u.data.stride):(l=u.array,c=0,h=3);for(var a=c,s=l.length;a<s;a+=h)e.fromArray(l,a),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){var t=e||new o.Vector3;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new o.Vector3;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var n=t||new o.Vector3;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e;return function(t){return void 0===e&&(e=new o.Vector3),this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,t){var n=t||new o.Vector3;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new o.Vector3;return function(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),getBoundingSphere:function(){var e=new o.Vector3;return function(t){var n=t||new o.Sphere;return n.center=this.center(),n.radius=.5*this.size(e).length(),n}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},o.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},o.Matrix3.prototype={constructor:o.Matrix3,set:function(e,t,n,r,i,o,a,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToVector3Array:function(){var e;return function(t,n,r){void 0===e&&(e=new o.Vector3),void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0,a=n;i<r;i+=3,a+=3)e.fromArray(t,a),e.applyMatrix3(this),e.toArray(t,a);return t}}(),applyToBuffer:function(){var e;return function(t,n,r){void 0===e&&(e=new o.Vector3),void 0===n&&(n=0),void 0===r&&(r=t.length/t.itemSize);for(var i=0,a=n;i<r;i++,a++)e.x=t.getX(a),e.y=t.getY(a),e.z=t.getZ(a),e.applyMatrix3(this),t.setXYZ(e.x,e.y,e.z);return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return t*o*l-t*a*u-n*i*l+n*a*s+r*i*u-r*o*s},getInverse:function(e,t){e instanceof o.Matrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],a=n[1],s=n[2],u=n[3],l=n[4],c=n[5],h=n[6],f=n[7],p=n[8],d=p*l-c*f,m=c*h-p*u,v=f*u-l*h,g=i*d+a*m+s*v;if(0===g){var y="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(y);return console.warn(y),this.identity()}var _=1/g;return r[0]=d*_,r[1]=(s*f-p*a)*_,r[2]=(c*a-s*l)*_,r[3]=m*_,r[4]=(p*i-s*h)*_,r[5]=(s*u-c*i)*_,r[6]=v*_,r[7]=(a*h-f*i)*_,r[8]=(l*i-a*u)*_,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(e,t)},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},o.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},o.Matrix4.prototype={constructor:o.Matrix4,set:function(e,t,n,r,i,o,a,s,u,l,c,h,f,p,d,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=f,v[7]=p,v[11]=d,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new o.Matrix4).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e;return function(t){void 0===e&&(e=new o.Vector3);var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),a=1/e.setFromMatrixColumn(t,1).length(),s=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,this}}(),makeRotationFromEuler:function(e){e instanceof o.Euler==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),s=Math.sin(n),u=Math.cos(r),l=Math.sin(r),c=Math.cos(i),h=Math.sin(i);if("XYZ"===e.order){var f=a*c,p=a*h,d=s*c,m=s*h;t[0]=u*c,t[4]=-u*h,t[8]=l,t[1]=p+d*l,t[5]=f-m*l,t[9]=-s*u,t[2]=m-f*l,t[6]=d+p*l,t[10]=a*u}else if("YXZ"===e.order){var v=u*c,g=u*h,y=l*c,_=l*h;t[0]=v+_*s,t[4]=y*s-g,t[8]=a*l,t[1]=a*h,t[5]=a*c,t[9]=-s,t[2]=g*s-y,t[6]=_+v*s,t[10]=a*u}else if("ZXY"===e.order){var v=u*c,g=u*h,y=l*c,_=l*h;t[0]=v-_*s,t[4]=-a*h,t[8]=y+g*s,t[1]=g+y*s,t[5]=a*c,t[9]=_-v*s,t[2]=-a*l,t[6]=s,t[10]=a*u}else if("ZYX"===e.order){var f=a*c,p=a*h,d=s*c,m=s*h;t[0]=u*c,t[4]=d*l-p,t[8]=f*l+m,t[1]=u*h,t[5]=m*l+f,t[9]=p*l-d,t[2]=-l,t[6]=s*u,t[10]=a*u}else if("YZX"===e.order){var b=a*u,w=a*l,x=s*u,E=s*l;t[0]=u*c,t[4]=E-b*h,t[8]=x*h+w,t[1]=h,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=w*h+x,t[10]=b-E*h}else if("XZY"===e.order){var b=a*u,w=a*l,x=s*u,E=s*l;t[0]=u*c,t[4]=-h,t[8]=l*c,t[1]=b*h+E,t[5]=a*c,t[9]=w*h-x,t[2]=x*h-w,t[6]=s*c,t[10]=E*h+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,o=e.w,a=n+n,s=r+r,u=i+i,l=n*a,c=n*s,h=n*u,f=r*s,p=r*u,d=i*u,m=o*a,v=o*s,g=o*u;return t[0]=1-(f+d),t[4]=c-g,t[8]=h+v,t[1]=c+g,t[5]=1-(l+d),t[9]=p-m,t[2]=h-v,t[6]=p+m,t[10]=1-(l+f),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e,t,n;return function(r,i,a){void 0===e&&(e=new o.Vector3,t=new o.Vector3,n=new o.Vector3);var s=this.elements;return n.subVectors(r,i).normalize(),0===n.lengthSq()&&(n.z=1),e.crossVectors(a,n).normalize(),0===e.lengthSq()&&(n.z+=1e-4,e.crossVectors(a,n).normalize()),t.crossVectors(n,e),s[0]=e.x,s[4]=t.x,s[8]=n.x,s[1]=e.y,s[5]=t.y,s[9]=n.y,s[2]=e.z,s[6]=t.z,s[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],p=n[2],d=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],b=n[15],w=r[0],x=r[4],E=r[8],M=r[12],C=r[1],S=r[5],T=r[9],P=r[13],O=r[2],A=r[6],R=r[10],k=r[14],L=r[3],D=r[7],I=r[11],j=r[15];return i[0]=o*w+a*C+s*O+u*L,i[4]=o*x+a*S+s*A+u*D,i[8]=o*E+a*T+s*R+u*I,i[12]=o*M+a*P+s*k+u*j,i[1]=l*w+c*C+h*O+f*L,i[5]=l*x+c*S+h*A+f*D,i[9]=l*E+c*T+h*R+f*I,i[13]=l*M+c*P+h*k+f*j,i[2]=p*w+d*C+m*O+v*L,i[6]=p*x+d*S+m*A+v*D,i[10]=p*E+d*T+m*R+v*I,i[14]=p*M+d*P+m*k+v*j,i[3]=g*w+y*C+_*O+b*L,i[7]=g*x+y*S+_*A+b*D,i[11]=g*E+y*T+_*R+b*I,i[15]=g*M+y*P+_*k+b*j,this},multiplyToArray:function(e,t,n){var r=this.elements;return this.multiplyMatrices(e,t),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToVector3Array:function(){var e;return function(t,n,r){void 0===e&&(e=new o.Vector3),void 0===n&&(n=0),void 0===r&&(r=t.length);for(var i=0,a=n;i<r;i+=3,a+=3)e.fromArray(t,a),e.applyMatrix4(this),e.toArray(t,a);return t}}(),applyToBuffer:function(){var e;return function(t,n,r){void 0===e&&(e=new o.Vector3),void 0===n&&(n=0),void 0===r&&(r=t.length/t.itemSize);for(var i=0,a=n;i<r;i++,a++)e.x=t.getX(a),e.y=t.getY(a),e.z=t.getZ(a),e.applyMatrix4(this),t.setXYZ(e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],f=e[14],p=e[3],d=e[7],m=e[11],v=e[15];return p*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*f-n*s*f)+d*(+t*s*f-t*u*h+i*o*h-r*o*f+r*u*l-i*s*l)+m*(+t*u*c-t*a*f-i*o*c+n*o*f+i*a*l-n*u*l)+v*(-r*a*l-t*s*c+t*a*h+r*o*c-n*o*h+n*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new o.Vector3),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],f=r[8],p=r[9],d=r[10],m=r[11],v=r[12],g=r[13],y=r[14],_=r[15],b=p*y*h-g*d*h+g*c*m-l*y*m-p*c*_+l*d*_,w=v*d*h-f*y*h-v*c*m+u*y*m+f*c*_-u*d*_,x=f*g*h-v*p*h+v*l*m-u*g*m-f*l*_+u*p*_,E=v*p*c-f*g*c-v*l*d+u*g*d+f*l*y-u*p*y,M=i*b+o*w+a*x+s*E;if(0===M){var C="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(C);return console.warn(C),this.identity()}var S=1/M;return n[0]=b*S,n[1]=(g*d*s-p*y*s-g*a*m+o*y*m+p*a*_-o*d*_)*S,n[2]=(l*y*s-g*c*s+g*a*h-o*y*h-l*a*_+o*c*_)*S,n[3]=(p*c*s-l*d*s-p*a*h+o*d*h+l*a*m-o*c*m)*S,n[4]=w*S,n[5]=(f*y*s-v*d*s+v*a*m-i*y*m-f*a*_+i*d*_)*S,n[6]=(v*c*s-u*y*s-v*a*h+i*y*h+u*a*_-i*c*_)*S,n[7]=(u*d*s-f*c*s+f*a*h-i*d*h-u*a*m+i*c*m)*S,n[8]=x*S,n[9]=(v*p*s-f*g*s-v*o*m+i*g*m+f*o*_-i*p*_)*S,n[10]=(u*g*s-v*l*s+v*o*h-i*g*h-u*o*_+i*l*_)*S,n[11]=(f*l*s-u*p*s-f*o*h+i*p*h+u*o*m-i*l*m)*S,n[12]=E*S,n[13]=(f*g*a-v*p*a+v*o*d-i*g*d-f*o*y+i*p*y)*S,n[14]=(v*l*a-u*g*a-v*o*c+i*g*c+u*o*y-i*l*y)*S,n[15]=(u*p*a-f*l*a+f*o*c-i*p*c-u*o*d+i*l*d)*S,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e,t;return function(n,r,i){void 0===e&&(e=new o.Vector3,t=new o.Matrix4);var a=this.elements,s=e.set(a[0],a[1],a[2]).length(),u=e.set(a[4],a[5],a[6]).length(),l=e.set(a[8],a[9],a[10]).length(),c=this.determinant();c<0&&(s=-s),n.x=a[12],n.y=a[13],n.z=a[14],t.elements.set(this.elements);var h=1/s,f=1/u,p=1/l;return t.elements[0]*=h,t.elements[1]*=h,t.elements[2]*=h,t.elements[4]*=f,t.elements[5]*=f,t.elements[6]*=f,t.elements[8]*=p,t.elements[9]*=p,t.elements[10]*=p,r.setFromRotationMatrix(t),i.x=s,i.y=u,i.z=l,this}}(),makeFrustum:function(e,t,n,r,i,o){var a=this.elements,s=2*i/(t-e),u=2*i/(r-n),l=(t+e)/(t-e),c=(r+n)/(r-n),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(e,t,n,r){var i=n*Math.tan(o.Math.DEG2RAD*e*.5),a=-i,s=a*t,u=i*t;return this.makeFrustum(s,u,a,i,n,r)},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),u=1/(n-r),l=1/(o-i),c=(t+e)*s,h=(n+r)*u,f=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e){return this.elements.set(e),this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},o.Ray=function(e,t){this.origin=void 0!==e?e:new o.Vector3,this.direction=void 0!==t?t:new o.Vector3},o.Ray.prototype={constructor:o.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var n=t||new o.Vector3;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new o.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new o.Vector3;n.subVectors(e,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new o.Vector3;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new o.Vector3,t=new o.Vector3,n=new o.Vector3;return function(r,i,o,a){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var s,u,l,c,h=.5*r.distanceTo(i),f=-this.direction.dot(t),p=n.dot(this.direction),d=-n.dot(t),m=n.lengthSq(),v=Math.abs(1-f*f);if(v>0)if(s=f*d-p,u=f*p-d,c=h*v,s>=0)if(u>=-c)if(u<=c){var g=1/v;s*=g,u*=g,l=s*(s+f*u+2*p)+u*(f*s+u+2*d)+m}else u=h,s=Math.max(0,-(f*u+p)),l=-s*s+u*(u+2*d)+m;else u=-h,s=Math.max(0,-(f*u+p)),l=-s*s+u*(u+2*d)+m;else u<=-c?(s=Math.max(0,-(-f*h+p)),u=s>0?-h:Math.min(Math.max(-h,-d),h),l=-s*s+u*(u+2*d)+m):u<=c?(s=0,u=Math.min(Math.max(-h,-d),h),l=u*(u+2*d)+m):(s=Math.max(0,-(f*h+p)),u=s>0?h:Math.min(Math.max(-h,-d),h),l=-s*s+u*(u+2*d)+m);else u=f>0?-h:h,s=Math.max(0,-(f*u+p)),l=-s*s+u*(u+2*d)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(u).add(e),l}}(),intersectSphere:function(){var e=new o.Vector3;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,u=r+a;return s<0&&u<0?null:s<0?this.at(u,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return n*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),c>=0?(a=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(){var e=new o.Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new o.Vector3,t=new o.Vector3,n=new o.Vector3,r=new o.Vector3;return function(i,o,a,s,u){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var l,c=this.direction.dot(r);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}e.subVectors(this.origin,i);var h=l*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var f=l*this.direction.dot(t.cross(e));if(f<0)return null;if(h+f>c)return null;var p=-l*e.dot(r);return p<0?null:this.at(p/c,u)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},o.Sphere=function(e,t){this.center=void 0!==e?e:new o.Vector3,this.radius=void 0!==t?t:0},o.Sphere.prototype={constructor:o.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new o.Box3;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).center(r);for(var i=0,o=0,a=t.length;o<a;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new o.Vector3;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new o.Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},o.Frustum=function(e,t,n,r,i,a){this.planes=[void 0!==e?e:new o.Plane,void 0!==t?t:new o.Plane,void 0!==n?n:new o.Plane,void 0!==r?r:new o.Plane,void 0!==i?i:new o.Plane,void 0!==a?a:new o.Plane];
},o.Frustum.prototype={constructor:o.Frustum,set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],p=n[10],d=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,c-s,d-h,y-m).normalize(),t[1].setComponents(a+r,c+s,d+h,y+m).normalize(),t[2].setComponents(a+i,c+u,d+f,y+v).normalize(),t[3].setComponents(a-i,c-u,d-f,y-v).normalize(),t[4].setComponents(a-o,c-l,d-p,y-g).normalize(),t[5].setComponents(a+o,c+l,d+p,y+g).normalize(),this},intersectsObject:function(){var e=new o.Sphere;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new o.Sphere;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){var o=t[i].distanceToPoint(n);if(o<r)return!1}return!0},intersectsBox:function(){var e=new o.Vector3,t=new o.Vector3;return function(n){for(var r=this.planes,i=0;i<6;i++){var o=r[i];e.x=o.normal.x>0?n.min.x:n.max.x,t.x=o.normal.x>0?n.max.x:n.min.x,e.y=o.normal.y>0?n.min.y:n.max.y,t.y=o.normal.y>0?n.max.y:n.min.y,e.z=o.normal.z>0?n.min.z:n.max.z,t.z=o.normal.z>0?n.max.z:n.min.z;var a=o.distanceToPoint(e),s=o.distanceToPoint(t);if(a<0&&s<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},o.Plane=function(e,t){this.normal=void 0!==e?e:new o.Vector3(1,0,0),this.constant=void 0!==t?t:0},o.Plane.prototype={constructor:o.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new o.Vector3,t=new o.Vector3;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e),r=t||new o.Vector3;return r.copy(this.normal).multiplyScalar(n)},intersectLine:function(){var e=new o.Vector3;return function(t,n){var r=n||new o.Vector3,i=t.delta(e),a=this.normal.dot(i);if(0!==a){var s=-(t.start.dot(this.normal)+this.constant)/a;if(!(s<0||s>1))return r.copy(i).multiplyScalar(s).add(t.start)}else if(0===this.distanceToPoint(t.start))return r.copy(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new o.Vector3;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new o.Vector3,t=new o.Matrix3;return function(n,r){var i=this.coplanarPoint(e).applyMatrix4(n),o=r||t.getNormalMatrix(n),a=this.normal.applyMatrix3(o).normalize();return this.constant=-i.dot(a),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},o.Spherical=function(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this},o.Spherical.prototype={constructor:o.Spherical,set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius.copy(e.radius),this.phi.copy(e.phi),this.theta.copy(e.theta),this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(o.Math.clamp(e.y/this.radius,-1,1))),this}},o.Math={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),r=0;return function(){for(var i=0;i<36;i++)8===i||13===i||18===i||23===i?n[i]="-":14===i?n[i]="4":(r<=2&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,n[i]=t[19===i?3&e|8:e]);return n.join("")}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*o.Math.DEG2RAD},radToDeg:function(e){return e*o.Math.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}},o.Spline=function(e){function t(e,t,n,r,i,o,a){var s=.5*(n-e),u=.5*(r-t);return(2*(t-n)+s+u)*a+(-3*(t-n)-2*s-u)*o+s*i+t}this.points=e;var n,r,i,a,s,u,l,c,h,f=[],p={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return n=(this.points.length-1)*e,r=Math.floor(n),i=n-r,f[0]=0===r?r:r-1,f[1]=r,f[2]=r>this.points.length-2?this.points.length-1:r+1,f[3]=r>this.points.length-3?this.points.length-1:r+2,u=this.points[f[0]],l=this.points[f[1]],c=this.points[f[2]],h=this.points[f[3]],a=i*i,s=i*a,p.x=t(u.x,l.x,c.x,h.x,i,a,s),p.y=t(u.y,l.y,c.y,h.y,i,a,s),p.z=t(u.z,l.z,c.z,h.z,i,a,s),p},this.getControlPointsArray=function(){var e,t,n=this.points.length,r=[];for(e=0;e<n;e++)t=this.points[e],r[e]=[t.x,t.y,t.z];return r},this.getLength=function(e){var t,n,r,i,a=0,s=0,u=0,l=new o.Vector3,c=new o.Vector3,h=[],f=0;for(h[0]=0,e||(e=100),r=this.points.length*e,l.copy(this.points[0]),t=1;t<r;t++)n=t/r,i=this.getPoint(n),c.copy(i),f+=c.distanceTo(l),l.copy(i),a=(this.points.length-1)*n,s=Math.floor(a),s!==u&&(h[s]=f,u=s);return h[h.length]=f,{chunks:h,total:f}},this.reparametrizeByArcLength=function(e){var t,n,r,i,a,s,u,l,c=[],h=new o.Vector3,f=this.getLength();for(c.push(h.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(s=f.chunks[t]-f.chunks[t-1],u=Math.ceil(e*s/f.total),i=(t-1)/(this.points.length-1),a=t/(this.points.length-1),n=1;n<u-1;n++)r=i+n*(1/u)*(a-i),l=this.getPoint(r),c.push(h.copy(l).clone());c.push(h.copy(this.points[t]).clone())}this.points=c}},o.Triangle=function(e,t,n){this.a=void 0!==e?e:new o.Vector3,this.b=void 0!==t?t:new o.Vector3,this.c=void 0!==n?n:new o.Vector3},o.Triangle.normal=function(){var e=new o.Vector3;return function(t,n,r,i){var a=i||new o.Vector3;a.subVectors(r,n),e.subVectors(t,n),a.cross(e);var s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}}(),o.Triangle.barycoordFromPoint=function(){var e=new o.Vector3,t=new o.Vector3,n=new o.Vector3;return function(r,i,a,s,u){e.subVectors(s,i),t.subVectors(a,i),n.subVectors(r,i);var l=e.dot(e),c=e.dot(t),h=e.dot(n),f=t.dot(t),p=t.dot(n),d=l*f-c*c,m=u||new o.Vector3;if(0===d)return m.set(-2,-1,-1);var v=1/d,g=(f*h-c*p)*v,y=(l*p-c*h)*v;return m.set(1-g-y,y,g)}}(),o.Triangle.containsPoint=function(){var e=new o.Vector3;return function(t,n,r,i){var a=o.Triangle.barycoordFromPoint(t,n,r,i,e);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),o.Triangle.prototype={constructor:o.Triangle,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new o.Vector3,t=new o.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new o.Vector3;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return o.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new o.Plane;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return o.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return o.Triangle.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e,t,n,r;return function(i,a){void 0===e&&(e=new o.Plane,t=[new o.Line3,new o.Line3,new o.Line3],n=new o.Vector3,r=new o.Vector3);var s=a||new o.Vector3,u=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(i,n),this.containsPoint(n)===!0)s.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var l=0;l<t.length;l++){t[l].closestPointToPoint(n,!0,r);var c=n.distanceToSquared(r);c<u&&(u=c,s.copy(r))}}return s}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},o.Interpolant=function(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n},o.Interpolant.prototype={constructor:o.Interpolant,evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}{if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){var u=n+o>>>1;e<t[u]?o=u:n=u+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(e,t,n,r){throw new Error("call to abstract method")},intervalChanged_:function(e,t,n){}},Object.assign(o.Interpolant.prototype,{beforeStart_:o.Interpolant.prototype.copySampleValue_,afterEnd_:o.Interpolant.prototype.copySampleValue_}),o.CubicInterpolant=function(e,t,n,r){o.Interpolant.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0},o.CubicInterpolant.prototype=Object.assign(Object.create(o.Interpolant.prototype),{constructor:o.CubicInterpolant,DefaultSettings_:{endingStart:o.ZeroCurvatureEnding,endingEnd:o.ZeroCurvatureEnding},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,s=r[i],u=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case o.ZeroSlopeEnding:i=e,s=2*t-n;break;case o.WrapAroundEnding:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(void 0===u)switch(this.getSettings_().endingEnd){case o.ZeroSlopeEnding:a=e,u=2*n-t;break;case o.WrapAroundEnding:a=1,u=n+r[1]-r[0];break;default:a=e-1,u=t}var l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(u-n),this._offsetPrev=i*c,this._offsetNext=a*c},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(n-t)/(r-t),d=p*p,m=d*p,v=-h*m+2*h*d-h*p,g=(1+h)*m+(-1.5-2*h)*d+(-.5+h)*p+1,y=(-1-f)*m+(1.5+f)*d+.5*p,_=f*m-f*d,b=0;b!==a;++b)i[b]=v*o[l+b]+g*o[u+b]+y*o[s+b]+_*o[c+b];return i}}),o.DiscreteInterpolant=function(e,t,n,r){o.Interpolant.call(this,e,t,n,r)},o.DiscreteInterpolant.prototype=Object.assign(Object.create(o.Interpolant.prototype),{constructor:o.DiscreteInterpolant,interpolate_:function(e,t,n,r){return this.copySampleValue_(e-1)}}),o.LinearInterpolant=function(e,t,n,r){o.Interpolant.call(this,e,t,n,r)},o.LinearInterpolant.prototype=Object.assign(Object.create(o.Interpolant.prototype),{constructor:o.LinearInterpolant,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,l=(n-t)/(r-t),c=1-l,h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}),o.QuaternionLinearInterpolant=function(e,t,n,r){o.Interpolant.call(this,e,t,n,r)},o.QuaternionLinearInterpolant.prototype=Object.assign(Object.create(o.Interpolant.prototype),{constructor:o.QuaternionLinearInterpolant,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,u=e*s,l=(n-t)/(r-t),c=u+s;u!==c;u+=4)o.Quaternion.slerpFlat(i,0,a,u-s,a,u,l);return i}}),o.Clock=function(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},o.Clock.prototype={constructor:o.Clock,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=(performance||Date).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}},o.EventDispatcher=function(){},Object.assign(o.EventDispatcher.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,r=n[e];if(void 0!==r){var i=r.indexOf(t);i!==-1&&r.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;var r=[],i=0,o=n.length;for(i=0;i<o;i++)r[i]=n[i];for(i=0;i<o;i++)r[i].call(this,e)}}}}),o.Layers=function(){this.mask=1},o.Layers.prototype={constructor:o.Layers,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return 0!==(this.mask&e.mask)}},function(e){function t(e,t){return e.distance-t.distance}function n(e,t,r,i){if(e.visible!==!1&&(e.raycast(t,r),i===!0))for(var o=e.children,a=0,s=o.length;a<s;a++)n(o[a],t,r,!0)}e.Raycaster=function(t,n,r,i){this.ray=new e.Ray(t,n),this.near=r||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})},e.Raycaster.prototype={constructor:e.Raycaster,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(t,n){n instanceof e.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(n).sub(this.ray.origin).normalize()):n instanceof e.OrthographicCamera?(this.ray.origin.set(t.x,t.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,r){var i=[];return n(e,this,i,r),i.sort(t),i},intersectObjects:function(e,r){var i=[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var o=0,a=e.length;o<a;o++)n(e[o],this,i,r);return i.sort(t),i}}}(o),o.Object3D=function(){function e(){i.setFromEuler(r,!1)}function t(){r.setFromQuaternion(i,void 0,!1)}Object.defineProperty(this,"id",{value:o.Object3DIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=o.Object3D.DefaultUp.clone();var n=new o.Vector3,r=new o.Euler,i=new o.Quaternion,a=new o.Vector3(1,1,1);r.onChange(e),i.onChange(t),Object.defineProperties(this,{position:{enumerable:!0,value:n},rotation:{enumerable:!0,value:r},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:a},modelViewMatrix:{value:new o.Matrix4},normalMatrix:{value:new o.Matrix3}}),this.matrix=new o.Matrix4,this.matrixWorld=new o.Matrix4,this.matrixAutoUpdate=o.Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new o.Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},o.Object3D.DefaultUp=new o.Vector3(0,1,0),o.Object3D.DefaultMatrixAutoUpdate=!0,Object.assign(o.Object3D.prototype,o.EventDispatcher.prototype,{applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new o.Quaternion;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new o.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new o.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new o.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new o.Vector3;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new o.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new o.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new o.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new o.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new o.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e instanceof o.Object3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var n=this.children.indexOf(e);n!==-1&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(e,t);if(void 0!==o)return o}},getWorldPosition:function(e){var t=e||new o.Vector3;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new o.Vector3,t=new o.Vector3;return function(n){var r=n||new o.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,r,t),r}}(),getWorldRotation:function(){var e=new o.Quaternion;return function(t){var n=t||new o.Euler;return this.getWorldQuaternion(e),n.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new o.Vector3,t=new o.Quaternion;return function(n){var r=n||new o.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,r),r}}(),getWorldDirection:function(){var e=new o.Quaternion;return function(t){var n=t||new o.Vector3;return this.getWorldQuaternion(e),n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&e!==!0||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,n=this.children.length;t<n;t++)this.children[t].updateMatrixWorld(e)},toJSON:function(e){function t(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var n=void 0===e||""===e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{}},r.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===e.geometries[this.geometry.uuid]&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),i.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===e.materials[this.material.uuid]&&(e.materials[this.material.uuid]=this.material.toJSON(e)),i.material=this.material.uuid),this.children.length>0){i.children=[];for(var o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(n){var a=t(e.geometries),s=t(e.materials),u=t(e.textures),l=t(e.images);a.length>0&&(r.geometries=a),s.length>0&&(r.materials=s),u.length>0&&(r.textures=u),l.length>0&&(r.images=l)}return r.object=i,r},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),o.Object3DIdCount=0,o.Face3=function(e,t,n,r,i,a){this.a=e,this.b=t,this.c=n,this.normal=r instanceof o.Vector3?r:new o.Vector3,this.vertexNormals=Array.isArray(r)?r:[],this.color=i instanceof o.Color?i:new o.Color,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0},o.Face3.prototype={constructor:o.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},o.BufferAttribute=function(e,t,n){this.uuid=o.Math.generateUUID(),this.array=e,this.itemSize=t,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0,this.normalized=n===!0},o.BufferAttribute.prototype={constructor:o.BufferAttribute,get count(){return this.array.length/this.itemSize},set needsUpdate(e){e===!0&&this.version++},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new o.Color),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyIndicesArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];t[n++]=o.a,t[n++]=o.b,t[n++]=o.c}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new o.Vector2),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new o.Vector3),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new o.Vector4),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},clone:function(){return(new this.constructor).copy(this)}},o.Int8Attribute=function(e,t){return new o.BufferAttribute(new Int8Array(e),t)},o.Uint8Attribute=function(e,t){return new o.BufferAttribute(new Uint8Array(e),t)},o.Uint8ClampedAttribute=function(e,t){return new o.BufferAttribute(new Uint8ClampedArray(e),t)},o.Int16Attribute=function(e,t){return new o.BufferAttribute(new Int16Array(e),t)},o.Uint16Attribute=function(e,t){return new o.BufferAttribute(new Uint16Array(e),t)},o.Int32Attribute=function(e,t){return new o.BufferAttribute(new Int32Array(e),t)},o.Uint32Attribute=function(e,t){return new o.BufferAttribute(new Uint32Array(e),t)},o.Float32Attribute=function(e,t){return new o.BufferAttribute(new Float32Array(e),t)},o.Float64Attribute=function(e,t){return new o.BufferAttribute(new Float64Array(e),t)},o.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new o.BufferAttribute(e,t).setDynamic(!0)},o.InstancedBufferAttribute=function(e,t,n){o.BufferAttribute.call(this,e,t),this.meshPerAttribute=n||1},o.InstancedBufferAttribute.prototype=Object.create(o.BufferAttribute.prototype),o.InstancedBufferAttribute.prototype.constructor=o.InstancedBufferAttribute,o.InstancedBufferAttribute.prototype.copy=function(e){return o.BufferAttribute.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},o.InterleavedBuffer=function(e,t){this.uuid=o.Math.generateUUID(),this.array=e,this.stride=t,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},o.InterleavedBuffer.prototype={constructor:o.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(e){e===!0&&this.version++},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)}},o.InstancedInterleavedBuffer=function(e,t,n){o.InterleavedBuffer.call(this,e,t),this.meshPerAttribute=n||1},o.InstancedInterleavedBuffer.prototype=Object.create(o.InterleavedBuffer.prototype),o.InstancedInterleavedBuffer.prototype.constructor=o.InstancedInterleavedBuffer,o.InstancedInterleavedBuffer.prototype.copy=function(e){return o.InterleavedBuffer.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},o.InterleavedBufferAttribute=function(e,t,n,r){this.uuid=o.Math.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=r===!0},o.InterleavedBufferAttribute.prototype={constructor:o.InterleavedBufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.data.count},get array(){return this.data.array},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},o.Geometry=function(){Object.defineProperty(this,"id",{value:o.GeometryIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,
this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},Object.assign(o.Geometry.prototype,o.EventDispatcher.prototype,{applyMatrix:function(e){for(var t=(new o.Matrix3).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(e)}for(var n=0,r=this.faces.length;n<r;n++){var a=this.faces[n];a.normal.applyMatrix3(t).normalize();for(var s=0,u=a.vertexNormals.length;s<u;s++)a.vertexNormals[s].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new o.Matrix4),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new o.Matrix4),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new o.Matrix4),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,r){return void 0===e&&(e=new o.Matrix4),e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,r){return void 0===e&&(e=new o.Matrix4),e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new o.Object3D),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,r,i){var a=void 0!==s?[h[e].clone(),h[t].clone(),h[r].clone()]:[],d=void 0!==u?[n.colors[e].clone(),n.colors[t].clone(),n.colors[r].clone()]:[],m=new o.Face3(e,t,r,a,d,i);n.faces.push(m),void 0!==l&&n.faceVertexUvs[0].push([f[e].clone(),f[t].clone(),f[r].clone()]),void 0!==c&&n.faceVertexUvs[1].push([p[e].clone(),p[t].clone(),p[r].clone()])}var n=this,r=null!==e.index?e.index.array:void 0,i=e.attributes,a=i.position.array,s=void 0!==i.normal?i.normal.array:void 0,u=void 0!==i.color?i.color.array:void 0,l=void 0!==i.uv?i.uv.array:void 0,c=void 0!==i.uv2?i.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var h=[],f=[],p=[],d=0,m=0;d<a.length;d+=3,m+=2)n.vertices.push(new o.Vector3(a[d],a[d+1],a[d+2])),void 0!==s&&h.push(new o.Vector3(s[d],s[d+1],s[d+2])),void 0!==u&&n.colors.push(new o.Color(u[d],u[d+1],u[d+2])),void 0!==l&&f.push(new o.Vector2(l[m],l[m+1])),void 0!==c&&p.push(new o.Vector2(c[m],c[m+1]));if(void 0!==r){var v=e.groups;if(v.length>0)for(var d=0;d<v.length;d++)for(var g=v[d],y=g.start,_=g.count,m=y,b=y+_;m<b;m+=3)t(r[m],r[m+1],r[m+2],g.materialIndex);else for(var d=0;d<r.length;d+=3)t(r[d],r[d+1],r[d+2])}else for(var d=0;d<a.length/3;d+=3)t(d,d+1,d+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new o.Matrix4;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new o.Vector3,t=new o.Vector3,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],s=this.vertices[i.b],u=this.vertices[i.c];e.subVectors(u,s),t.subVectors(a,s),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,n,r,i,a,s;for(s=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)s[t]=new o.Vector3;if(e){var u,l,c,h=new o.Vector3,f=new o.Vector3;for(r=0,i=this.faces.length;r<i;r++)a=this.faces[r],u=this.vertices[a.a],l=this.vertices[a.b],c=this.vertices[a.c],h.subVectors(c,l),f.subVectors(u,l),h.cross(f),s[a.a].add(h),s[a.b].add(h),s[a.c].add(h)}else for(r=0,i=this.faces.length;r<i;r++)a=this.faces[r],s[a.a].add(a.normal),s[a.b].add(a.normal),s[a.c].add(a.normal);for(t=0,n=this.vertices.length;t<n;t++)s[t].normalize();for(r=0,i=this.faces.length;r<i;r++){a=this.faces[r];var p=a.vertexNormals;3===p.length?(p[0].copy(s[a.a]),p[1].copy(s[a.b]),p[2].copy(s[a.c])):(p[0]=s[a.a].clone(),p[1]=s[a.b].clone(),p[2]=s[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var a=new o.Geometry;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var s,u,l=this.morphNormals[e].faceNormals,c=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)s=new o.Vector3,u={a:new o.Vector3,b:new o.Vector3,c:new o.Vector3},l.push(s),c.push(u)}var h=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals();var s,u;for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],s=h.faceNormals[n],u=h.vertexNormals[n],s.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;n<r;n++)n>0&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new o.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new o.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e instanceof o.Geometry==!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var r,i=this.vertices.length,a=this.vertices,s=e.vertices,u=this.faces,l=e.faces,c=this.faceVertexUvs[0],h=e.faceVertexUvs[0];void 0===n&&(n=0),void 0!==t&&(r=(new o.Matrix3).getNormalMatrix(t));for(var f=0,p=s.length;f<p;f++){var d=s[f],m=d.clone();void 0!==t&&m.applyMatrix4(t),a.push(m)}for(f=0,p=l.length;f<p;f++){var v,g,y,_=l[f],b=_.vertexNormals,w=_.vertexColors;v=new o.Face3(_.a+i,_.b+i,_.c+i),v.normal.copy(_.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var x=0,E=b.length;x<E;x++)g=b[x].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),v.vertexNormals.push(g);v.color.copy(_.color);for(var x=0,E=w.length;x<E;x++)y=w[x],v.vertexColors.push(y.clone());v.materialIndex=_.materialIndex+n,u.push(v)}for(f=0,p=h.length;f<p;f++){var M=h[f],C=[];if(void 0!==M){for(var x=0,E=M.length;x<E;x++)C.push(M[x].clone());c.push(C)}}},mergeMesh:function(e){return e instanceof o.Mesh==!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e):(e.matrixAutoUpdate&&e.updateMatrix(),void this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,t,n,r,i,o,a,s,u={},l=[],c=[],h=4,f=Math.pow(10,h);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],t=Math.round(e.x*f)+"_"+Math.round(e.y*f)+"_"+Math.round(e.z*f),void 0===u[t]?(u[t]=n,l.push(this.vertices[n]),c[n]=l.length-1):c[n]=c[u[t]];var p=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=c[i.a],i.b=c[i.b],i.c=c[i.c],o=[i.a,i.b,i.c];for(var d=-1,m=0;m<3;m++)if(o[m]===o[(m+1)%3]){d=m,p.push(n);break}}for(n=p.length-1;n>=0;n--){var v=p[n];for(this.faces.splice(v,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(v,1)}var g=this.vertices.length-l.length;return this.vertices=l,g},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,n=t.length,r=0;r<n;r++)t[r]._id=r;t.sort(e);var i,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===n&&(i=[]),s&&s.length===n&&(o=[]);for(var r=0;r<n;r++){var u=t[r]._id;i&&i.push(a[u]),o&&o.push(s[u])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function e(e,t,n){return n?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==f[t]?f[t]:(f[t]=h.length/3,h.push(e.x,e.y,e.z),f[t])}function n(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==d[t]?d[t]:(d[t]=p.length,p.push(e.getHex()),d[t])}function r(e){var t=e.x.toString()+e.y.toString();return void 0!==v[t]?v[t]:(v[t]=m.length/2,m.push(e.x,e.y),v[t])}var i={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o)void 0!==o[a]&&(i[a]=o[a]);return i}for(var s=[],u=0;u<this.vertices.length;u++){var l=this.vertices[u];s.push(l.x,l.y,l.z)}for(var c=[],h=[],f={},p=[],d={},m=[],v={},u=0;u<this.faces.length;u++){var g=this.faces[u],y=!0,_=!1,b=void 0!==this.faceVertexUvs[0][u],w=g.normal.length()>0,x=g.vertexNormals.length>0,E=1!==g.color.r||1!==g.color.g||1!==g.color.b,M=g.vertexColors.length>0,C=0;if(C=e(C,0,0),C=e(C,1,y),C=e(C,2,_),C=e(C,3,b),C=e(C,4,w),C=e(C,5,x),C=e(C,6,E),C=e(C,7,M),c.push(C),c.push(g.a,g.b,g.c),c.push(g.materialIndex),b){var S=this.faceVertexUvs[0][u];c.push(r(S[0]),r(S[1]),r(S[2]))}if(w&&c.push(t(g.normal)),x){var T=g.vertexNormals;c.push(t(T[0]),t(T[1]),t(T[2]))}if(E&&c.push(n(g.color)),M){var P=g.vertexColors;c.push(n(P[0]),n(P[1]),n(P[2]))}}return i.data={},i.data.vertices=s,i.data.normals=h,p.length>0&&(i.data.colors=p),m.length>0&&(i.data.uvs=[m]),i.data.faces=c,i},clone:function(){return(new o.Geometry).copy(this)},copy:function(e){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]];for(var t=e.vertices,n=0,r=t.length;n<r;n++)this.vertices.push(t[n].clone());for(var i=e.faces,n=0,r=i.length;n<r;n++)this.faces.push(i[n].clone());for(var n=0,r=e.faceVertexUvs.length;n<r;n++){var o=e.faceVertexUvs[n];void 0===this.faceVertexUvs[n]&&(this.faceVertexUvs[n]=[]);for(var a=0,s=o.length;a<s;a++){for(var u=o[a],l=[],c=0,h=u.length;c<h;c++){var f=u[c];l.push(f.clone())}this.faceVertexUvs[n].push(l)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),o.GeometryIdCount=0,o.DirectGeometry=function(){Object.defineProperty(this,"id",{value:o.GeometryIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1},Object.assign(o.DirectGeometry.prototype,o.EventDispatcher.prototype,{computeBoundingBox:o.Geometry.prototype.computeBoundingBox,computeBoundingSphere:o.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(e){for(var t,n,r=[],i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==n&&(n=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,r.push(t)),t={start:3*o,materialIndex:n})}void 0!==t&&(t.count=3*o-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,a=i[0]&&i[0].length>0,s=i[1]&&i[1].length>0,u=e.morphTargets,l=u.length;if(l>0){t=[];for(var c=0;c<l;c++)t[c]=[];this.morphTargets.position=t}var h,f=e.morphNormals,p=f.length;if(p>0){h=[];for(var c=0;c<p;c++)h[c]=[];this.morphTargets.normal=h}for(var d=e.skinIndices,m=e.skinWeights,v=d.length===r.length,g=m.length===r.length,c=0;c<n.length;c++){var y=n[c];this.vertices.push(r[y.a],r[y.b],r[y.c]);var _=y.vertexNormals;if(3===_.length)this.normals.push(_[0],_[1],_[2]);else{var b=y.normal;this.normals.push(b,b,b)}var w=y.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var x=y.color;this.colors.push(x,x,x)}if(a===!0){var E=i[0][c];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new o.Vector2,new o.Vector2,new o.Vector2))}if(s===!0){var E=i[1][c];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new o.Vector2,new o.Vector2,new o.Vector2))}for(var M=0;M<l;M++){var C=u[M].vertices;t[M].push(C[y.a],C[y.b],C[y.c])}for(var M=0;M<p;M++){var S=f[M].vertexNormals[c];h[M].push(S.a,S.b,S.c)}v&&this.skinIndices.push(d[y.a],d[y.b],d[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),o.BufferGeometry=function(){Object.defineProperty(this,"id",{value:o.GeometryIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}},Object.assign(o.BufferGeometry.prototype,o.EventDispatcher.prototype,{getIndex:function(){return this.index},setIndex:function(e){this.index=e},addAttribute:function(e,t){return t instanceof o.BufferAttribute==!1&&t instanceof o.InterleavedBufferAttribute==!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new o.BufferAttribute(arguments[1],arguments[2]))):"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this)},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new o.Matrix3).getNormalMatrix(e);r.applyToVector3Array(n.array),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new o.Matrix4),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new o.Matrix4),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new o.Matrix4),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,r){return void 0===e&&(e=new o.Matrix4),e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,r){return void 0===e&&(e=new o.Matrix4),e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new o.Object3D),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.center().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e instanceof o.Points||e instanceof o.Line){var n=new o.Float32Attribute(3*t.vertices.length,3),r=new o.Float32Attribute(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new o.Float32Attribute(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e instanceof o.Mesh&&t instanceof o.Geometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e instanceof o.Mesh){var n=t.__directGeometry;if(void 0===n||t.elementsNeedUpdate===!0)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate||t.elementsNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate||t.elementsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate||t.elementsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate||t.elementsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate||t.elementsNeedUpdate,t.elementsNeedUpdate=!1,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var r;return t.verticesNeedUpdate===!0&&(r=this.attributes.position,void 0!==r&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1),t.normalsNeedUpdate===!0&&(r=this.attributes.normal,void 0!==r&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1),t.colorsNeedUpdate===!0&&(r=this.attributes.color,void 0!==r&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(r=this.attributes.uv,void 0!==r&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,void 0!==r&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new o.DirectGeometry).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new o.BufferAttribute(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new o.BufferAttribute(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new o.BufferAttribute(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new o.BufferAttribute(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new o.BufferAttribute(a,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var s=e.vertices.length>65535?Uint32Array:Uint16Array,u=new s(3*e.indices.length);this.setIndex(new o.BufferAttribute(u,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var l in e.morphTargets){for(var c=[],h=e.morphTargets[l],f=0,p=h.length;f<p;f++){var d=h[f],m=new o.Float32Attribute(3*d.length,3);c.push(m.copyVector3sArray(d))}this.morphAttributes[l]=c}if(e.skinIndices.length>0){var v=new o.Float32Attribute(4*e.skinIndices.length,4);this.addAttribute("skinIndex",v.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var g=new o.Float32Attribute(4*e.skinWeights.length,4);this.addAttribute("skinWeight",g.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new o.Box3);var e=this.attributes.position.array;void 0!==e?this.boundingBox.setFromArray(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new o.Box3,t=new o.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new o.Sphere);var n=this.attributes.position;if(n){var r=n.array,i=this.boundingSphere.center;e.setFromArray(r),e.center(i);for(var a=0,s=0,u=r.length;s<u;s+=3)t.fromArray(r,s),a=Math.max(a,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new o.BufferAttribute(new Float32Array(r.length),3));else for(var i=t.normal.array,a=0,s=i.length;a<s;a++)i[a]=0;var u,l,c,h=t.normal.array,f=new o.Vector3,p=new o.Vector3,d=new o.Vector3,m=new o.Vector3,v=new o.Vector3;if(e){var g=e.array;0===n.length&&this.addGroup(0,g.length);for(var y=0,_=n.length;y<_;++y)for(var b=n[y],w=b.start,x=b.count,a=w,s=w+x;a<s;a+=3)u=3*g[a+0],l=3*g[a+1],c=3*g[a+2],f.fromArray(r,u),p.fromArray(r,l),d.fromArray(r,c),m.subVectors(d,p),v.subVectors(f,p),m.cross(v),h[u]+=m.x,h[u+1]+=m.y,h[u+2]+=m.z,h[l]+=m.x,h[l+1]+=m.y,h[l+2]+=m.z,h[c]+=m.x,h[c+1]+=m.y,h[c+2]+=m.z}else for(var a=0,s=r.length;a<s;a+=9)f.fromArray(r,a),p.fromArray(r,a+3),d.fromArray(r,a+6),m.subVectors(d,p),v.subVectors(f,p),m.cross(v),h[a]=m.x,h[a+1]=m.y,h[a+2]=m.z,h[a+3]=m.x,h[a+4]=m.y,h[a+5]=m.z,h[a+6]=m.x,h[a+7]=m.y,h[a+8]=m.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e instanceof o.BufferGeometry==!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0);var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r],a=i.array,s=e.attributes[r],u=s.array,l=s.itemSize,c=0,h=l*t;c<u.length;c++,h++)a[h]=u[c];return this},normalizeNormals:function(){for(var e,t,n,r,i=this.attributes.normal.array,o=0,a=i.length;o<a;o+=3)e=i[o],t=i[o+1],n=i[o+2],r=1/Math.sqrt(e*e+t*t+n*n),i[o]*=r,i[o+1]*=r,i[o+2]*=r},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new o.BufferGeometry,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],a=i.array,s=i.itemSize,u=new a.constructor(t.length*s),l=0,c=0,h=0,f=t.length;h<f;h++){l=t[h]*s;for(var p=0;p<s;p++)u[c++]=a[l++]}e.addAttribute(r,new o.BufferAttribute(u,s))}return e},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n],i=Array.prototype.slice.call(a.array);e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e},clone:function(){return(new o.BufferGeometry).copy(this)},copy:function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n=e.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var o=e.groups,a=0,s=o.length;a<s;a++){var u=o[a];this.addGroup(u.start,u.count,u.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),o.BufferGeometry.MaxIndex=65535,o.InstancedBufferGeometry=function(){o.BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0},o.InstancedBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.InstancedBufferGeometry.prototype.constructor=o.InstancedBufferGeometry,o.InstancedBufferGeometry.prototype.addGroup=function(e,t,n){this.groups.push({start:e,count:t,instances:n})},o.InstancedBufferGeometry.prototype.copy=function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n=e.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var o=e.groups,a=0,s=o.length;a<s;a++){var u=o[a];this.addGroup(u.start,u.count,u.instances)}return this},o.Uniform=function(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e,this.dynamic=!1},o.Uniform.prototype={constructor:o.Uniform,onUpdate:function(e){return this.dynamic=!0,this.onUpdateCallback=e,this}},o.AnimationAction=function(){throw new Error("THREE.AnimationAction: Use mixer.clipAction for construction.")},o.AnimationAction._new=function(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,a=new Array(i),s={endingStart:o.ZeroCurvatureEnding,endingEnd:o.ZeroCurvatureEnding},u=0;u!==i;++u){var l=r[u].createInterpolant(null);a[u]=l,l.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=o.LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0},o.AnimationAction._new.prototype={constructor:o.AnimationAction._new,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){this._startTime;return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){this._mixer;if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var u=this._interpolants,l=this._propertyBindings,c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulate(r,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(r===o.LoopOnce){i===-1&&(this.loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=r===o.LoopPingPong;if(i===-1&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=n||t<0){var s=Math.floor(t/n);t-=n*s,i+=Math.abs(s);var u=this.repetitions-i;if(u<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===u){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(a&&1===(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=o.ZeroSlopeEnding,r.endingEnd=o.ZeroSlopeEnding):(e?r.endingStart=this.zeroSlopeAtStart?o.ZeroSlopeEnding:o.ZeroCurvatureEnding:r.endingStart=o.WrapAroundEnding,t?r.endingEnd=this.zeroSlopeAtEnd?o.ZeroSlopeEnding:o.ZeroCurvatureEnding:r.endingEnd=o.WrapAroundEnding)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}},o.AnimationClip=function(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=o.Math.generateUUID(),this.duration<0&&this.resetDuration(),this.trim(),this.optimize()},o.AnimationClip.prototype={constructor:o.AnimationClip,resetDuration:function(){for(var e=this.tracks,t=0,n=0,r=e.length;n!==r;++n){var i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},Object.assign(o.AnimationClip,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(o.KeyframeTrack.parse(n[i]).scale(r));return new o.AnimationClip(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t},i=0,a=n.length;i!==a;++i)t.push(o.KeyframeTrack.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,a=[],s=0;s<i;s++){var u=[],l=[];u.push((s+i-1)%i,s,(s+1)%i),l.push(0,1,0);var c=o.AnimationUtils.getKeyframeOrder(u);u=o.AnimationUtils.sortedArray(u,1,c),l=o.AnimationUtils.sortedArray(l,1,c),r||0!==u[0]||(u.push(i),l.push(l[0])),a.push(new o.NumberKeyframeTrack(".morphTargetInfluences["+t[s].name+"]",u,l).scale(1/n));
}return new o.AnimationClip(e,(-1),a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,s=e.length;a<s;a++){var u=e[a],l=u.name.match(i);if(l&&l.length>1){var c=l[1],h=r[c];h||(r[c]=h=[]),h.push(u)}}var f=[];for(var c in r)f.push(o.AnimationClip.CreateFromMorphTargetSequence(c,r[c],t,n));return f},parseAnimation:function(e,t,n){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var r=function(e,t,n,r,i){if(0!==n.length){var a=[],s=[];o.AnimationUtils.flattenJSON(n,a,s,r),0!==a.length&&i.push(new e(t,a,s))}},i=[],a=e.name||"default",s=e.length||-1,u=e.fps||30,l=e.hierarchy||[],c=0;c<l.length;c++){var h=l[c].keys;if(h&&0!==h.length)if(h[0].morphTargets){for(var f={},p=0;p<h.length;p++)if(h[p].morphTargets)for(var d=0;d<h[p].morphTargets.length;d++)f[h[p].morphTargets[d]]=-1;for(var m in f){for(var v=[],g=[],d=0;d!==h[p].morphTargets.length;++d){var y=h[p];v.push(y.time),g.push(y.morphTarget===m?1:0)}i.push(new o.NumberKeyframeTrack(".morphTargetInfluence["+m+"]",v,g))}s=f.length*(u||1)}else{var _=".bones["+t[c].name+"]";r(o.VectorKeyframeTrack,_+".position",h,"pos",i),r(o.QuaternionKeyframeTrack,_+".quaternion",h,"rot",i),r(o.VectorKeyframeTrack,_+".scale",h,"scl",i)}}if(0===i.length)return null;var b=new o.AnimationClip(a,s,i);return b}}),o.AnimationMixer=function(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1},Object.assign(o.AnimationMixer.prototype,o.EventDispatcher.prototype,{clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?o.AnimationClip.findByName(n,e):e,a=null!==i?i.uuid:e,s=this._actionsByClip[a],u=null;if(void 0!==s){var l=s.actionByRoot[r];if(void 0!==l)return l;u=s.knownActions[0],null===i&&(i=u._clip)}if(null===i)return null;var c=new o.AnimationMixer._Action(this,i,t);return this._bindAction(c,u),this._addInactiveAction(c,a,r),c},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?o.AnimationClip.findByName(n,e):e,a=i?i.uuid:e,s=this._actionsByClip[a];return void 0!==s?s.actionByRoot[r]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){var s=t[a];s.enabled&&s._update(r,e,i,o)}for(var u=this._bindings,l=this._nActiveBindings,a=0;a!==l;++a)u[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[t];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[t];if(void 0!==s)for(var u in s){var l=s[u];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),o.AnimationMixer._Action=o.AnimationAction._new,Object.assign(o.AnimationMixer.prototype,{_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,s=e._interpolants,u=n.uuid,l=this._bindingsByRootAndName,c=l[u];void 0===c&&(c={},l[u]=c);for(var h=0;h!==i;++h){var f=r[h],p=f.name,d=c[p];if(void 0!==d)a[h]=d;else{if(d=a[h],void 0!==d){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,u,p));continue}var m=t&&t._propertyBindings[h].binding.parsedPath;d=new o.PropertyMixer(o.PropertyBinding.create(n,p,m),f.ValueTypeName,f.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,u,p),a[h]=d}s[h].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null;var c=a.actionByRoot,h=(t._localRoot||this._root).uuid;delete c[h],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i];e:{for(var l in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new o.LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1)}),o.AnimationObjectGroup=function(e){this.uuid=o.Math.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}},o.AnimationObjectGroup.prototype={constructor:o.AnimationObjectGroup,add:function(e){for(var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,a=this._paths,s=this._parsedPaths,u=this._bindings,l=u.length,c=0,h=arguments.length;c!==h;++c){var f=arguments[c],p=f.uuid,d=i[p];if(void 0===d){d=n++,i[p]=d,t.push(f);for(var m=0,v=l;m!==v;++m)u[m].push(new o.PropertyBinding(f,a[m],s[m]))}else if(d<r){var g=t[d],y=--r,_=t[y];i[_.uuid]=d,t[d]=_,i[p]=y,t[y]=f;for(var m=0,v=l;m!==v;++m){var b=u[m],w=b[y],x=b[d];b[d]=w,void 0===x&&(x=new o.PropertyBinding(f,a[m],s[m])),b[y]=x}}else t[d]!==g&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=r},remove:function(e){for(var t=this._objects,n=(t.length,this.nCachedObjects_),r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],l=u.uuid,c=r[l];if(void 0!==c&&c>=n){var h=n++,f=t[h];r[f.uuid]=c,t[c]=f,r[l]=h,t[h]=u;for(var p=0,d=o;p!==d;++p){var m=i[p],v=m[h],g=m[c];m[c]=v,m[h]=g}}}this.nCachedObjects_=n},uncache:function(e){for(var t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._bindings,a=o.length,s=0,u=arguments.length;s!==u;++s){var l=arguments[s],c=l.uuid,h=i[c];if(void 0!==h)if(delete i[c],h<r){var f=--r,p=t[f],d=--n,m=t[d];i[p.uuid]=h,t[h]=p,i[m.uuid]=f,t[f]=m,t.pop();for(var v=0,g=a;v!==g;++v){var y=o[v],_=y[f],b=y[d];y[h]=_,y[f]=b,y.pop()}}else{var d=--n,m=t[d];i[m.uuid]=h,t[h]=m,t.pop();for(var v=0,g=a;v!==g;++v){var y=o[v];y[h]=y[d],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,s=this._parsedPaths,u=this._objects,l=u.length,c=this.nCachedObjects_,h=new Array(l);r=i.length,n[e]=r,a.push(e),s.push(t),i.push(h);for(var f=c,p=u.length;f!==p;++f){var d=u[f];h[f]=new o.PropertyBinding(d,e,t)}return h},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a],u=e[a];t[u]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}},o.AnimationUtils={arraySlice:function(e,t,n){return o.AnimationUtils.isTypedArray(e)?new e.constructor(e.subarray(t,n)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,n){return e[t]-e[n]}for(var n=e.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,u=0;u!==t;++u)i[a++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++];while(void 0!==o);else if(void 0!==a.toArray)do a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++];while(void 0!==o);else do a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++];while(void 0!==o)}}},o.KeyframeTrack=function(e,t,n,r){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=o.AnimationUtils.convertArray(t,this.TimeBufferType),this.values=o.AnimationUtils.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()},o.KeyframeTrack.prototype={constructor:o.KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:o.InterpolateLinear,InterpolantFactoryMethodDiscrete:function(e){return new o.DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new o.LinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new o.CubicInterpolant(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case o.InterpolateDiscrete:t=this.InterpolantFactoryMethodDiscrete;break;case o.InterpolateLinear:t=this.InterpolantFactoryMethodLinear;break;case o.InterpolateSmooth:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(n)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return o.InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return o.InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return o.InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;a!==-1&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);var s=this.getValueSize();this.times=o.AnimationUtils.arraySlice(n,i,a),this.values=o.AnimationUtils.arraySlice(this.values,i*s,a*s)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("invalid value size in track",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("track is empty",this),e=!1);for(var a=null,s=0;s!==i;s++){var u=n[s];if("number"==typeof u&&isNaN(u)){console.error("time is not a valid number",this,s,u),e=!1;break}if(null!==a&&a>u){console.error("out of order keys",this,s,u,a),e=!1;break}a=u}if(void 0!==r&&o.AnimationUtils.isTypedArray(r))for(var s=0,l=r.length;s!==l;++s){var c=r[s];if(isNaN(c)){console.error("value is not a valid number",this,s,c),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=1,i=1,a=e.length-1;i<=a;++i){var s=!1,u=e[i],l=e[i+1];if(u!==l&&(1!==i||u!==u[0]))for(var c=i*n,h=c-n,f=c+n,p=0;p!==n;++p){var d=t[c+p];if(d!==t[h+p]||d!==t[f+p]){s=!0;break}}if(s){if(i!==r){e[r]=e[i];for(var m=i*n,v=r*n,p=0;p!==n;++p)t[v+p]=t[m+p]}++r}}return r!==e.length&&(this.times=o.AnimationUtils.arraySlice(e,0,r),this.values=o.AnimationUtils.arraySlice(t,0,r*n)),this}},Object.assign(o.KeyframeTrack,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=o.KeyframeTrack._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],r=[];o.AnimationUtils.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:o.AnimationUtils.convertArray(e.times,Array),values:o.AnimationUtils.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return o.NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return o.VectorKeyframeTrack;case"color":return o.ColorKeyframeTrack;case"quaternion":return o.QuaternionKeyframeTrack;case"bool":case"boolean":return o.BooleanKeyframeTrack;case"string":return o.StringKeyframeTrack}throw new Error("Unsupported typeName: "+e)}}),o.PropertyBinding=function(e,t,n){this.path=t,this.parsedPath=n||o.PropertyBinding.parseTrackName(t),this.node=o.PropertyBinding.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e},o.PropertyBinding.prototype={constructor:o.PropertyBinding,getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=o.PropertyBinding.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===a){a=s;break}break;default:if(void 0===e[n])return void console.error("  can not bind to objectName of node, undefined",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[a]}}var u=e[r];if(void 0===u){var l=t.nodeName;return void console.error("  trying to update property for track: "+l+"."+r+" but it wasn't found.",e)}var c=this.Versioning.None;void 0!==e.needsUpdate?(c=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var h=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!e.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var s=0;s<this.node.geometry.morphTargets.length;s++)if(e.geometry.morphTargets[s].name===i){i=s;break}}h=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=i}else void 0!==u.fromArray&&void 0!==u.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=u):void 0!==u.length?(h=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=r;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][c]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(o.PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:o.PropertyBinding.prototype.getValue,_setValue_unbound:o.PropertyBinding.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),o.PropertyBinding.Composite=function(e,t,n){var r=n||o.PropertyBinding.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)},o.PropertyBinding.Composite.prototype={constructor:o.PropertyBinding.Composite,getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},o.PropertyBinding.create=function(e,t,n){return e instanceof o.AnimationObjectGroup?new o.PropertyBinding.Composite(e,t,n):new o.PropertyBinding(e,t,n)},o.PropertyBinding.parseTrackName=function(e){var t=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_.:\- ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,n=t.exec(e);if(!n)throw new Error("cannot parse trackName at all: "+e);n.index===t.lastIndex&&t.lastIndex++;var r={nodeName:n[3],objectName:n[5],objectIndex:n[7],propertyName:n[9],propertyIndex:n[11]};if(null===r.propertyName||0===r.propertyName.length)throw new Error("can not parse propertyName from trackName: "+e);return r},o.PropertyBinding.findNode=function(e,t){if(!t||""===t||"root"===t||"."===t||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=function(e){for(var n=0;n<e.bones.length;n++){var r=e.bones[n];if(r.name===t)return r}return null},r=n(e.skeleton);if(r)return r}if(e.children){var i=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t||r.uuid===t)return r;var o=i(r.children);if(o)return o}return null},o=i(e.children);if(o)return o}return null},o.PropertyMixer=function(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0},o.PropertyMixer.prototype={constructor:o.PropertyMixer,accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{o+=t;var s=t/o;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,u=t+t;s!==u;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r,i){o.Quaternion.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}},o.BooleanKeyframeTrack=function(e,t,n){o.KeyframeTrack.call(this,e,t,n)},o.BooleanKeyframeTrack.prototype=Object.assign(Object.create(o.KeyframeTrack.prototype),{constructor:o.BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:o.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),o.ColorKeyframeTrack=function(e,t,n,r){o.KeyframeTrack.call(this,e,t,n,r)},o.ColorKeyframeTrack.prototype=Object.assign(Object.create(o.KeyframeTrack.prototype),{constructor:o.ColorKeyframeTrack,ValueTypeName:"color"}),o.NumberKeyframeTrack=function(e,t,n,r){o.KeyframeTrack.call(this,e,t,n,r)},o.NumberKeyframeTrack.prototype=Object.assign(Object.create(o.KeyframeTrack.prototype),{constructor:o.NumberKeyframeTrack,ValueTypeName:"number"}),o.QuaternionKeyframeTrack=function(e,t,n,r){o.KeyframeTrack.call(this,e,t,n,r)},o.QuaternionKeyframeTrack.prototype=Object.assign(Object.create(o.KeyframeTrack.prototype),{constructor:o.QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:o.InterpolateLinear,InterpolantFactoryMethodLinear:function(e){return new o.QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),o.StringKeyframeTrack=function(e,t,n,r){o.KeyframeTrack.call(this,e,t,n,r)},o.StringKeyframeTrack.prototype=Object.assign(Object.create(o.KeyframeTrack.prototype),{constructor:o.StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:o.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),o.VectorKeyframeTrack=function(e,t,n,r){o.KeyframeTrack.call(this,e,t,n,r)},o.VectorKeyframeTrack.prototype=Object.assign(Object.create(o.KeyframeTrack.prototype),{constructor:o.VectorKeyframeTrack,ValueTypeName:"vector"}),o.Audio=function(e){o.Object3D.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]},o.Audio.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.Audio,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.source.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var e=this.context.createBufferSource();return e.buffer=this.source.buffer,e.loop=this.source.loop,e.onended=this.source.onended,e.start(0,this.startTime),e.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=e,this.connect()},pause:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,this.isPlaying===!0&&(this.source.playbackRate.value=this.playbackRate),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},setLoop:function(e){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):void(this.source.loop=e)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),o.AudioAnalyser=function(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)},Object.assign(o.AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.defineProperty(o,"AudioContext",{get:function(){var e;return function(){return void 0===e&&(e=new(window.AudioContext||window.webkitAudioContext)),e}}()}),o.PositionalAudio=function(e){o.Audio.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)},o.PositionalAudio.prototype=Object.assign(Object.create(o.Audio.prototype),{constructor:o.PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new o.Vector3;return function(t){o.Object3D.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),o.AudioListener=function(){o.Object3D.call(this),this.type="AudioListener",this.context=o.AudioContext,this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null},o.AudioListener.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.AudioListener,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new o.Vector3,t=new o.Quaternion,n=new o.Vector3,r=new o.Vector3;return function(i){o.Object3D.prototype.updateMatrixWorld.call(this,i);var a=this.context.listener,s=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),a.setPosition(e.x,e.y,e.z),a.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z)}}()}),o.Camera=function(){o.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new o.Matrix4,this.projectionMatrix=new o.Matrix4},o.Camera.prototype=Object.create(o.Object3D.prototype),o.Camera.prototype.constructor=o.Camera,
o.Camera.prototype.getWorldDirection=function(){var e=new o.Quaternion;return function(t){var n=t||new o.Vector3;return this.getWorldQuaternion(e),n.set(0,0,-1).applyQuaternion(e)}}(),o.Camera.prototype.lookAt=function(){var e=new o.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),o.Camera.prototype.clone=function(){return(new this.constructor).copy(this)},o.Camera.prototype.copy=function(e){return o.Object3D.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},o.CubeCamera=function(e,t,n){o.Object3D.call(this),this.type="CubeCamera";var r=90,i=1,a=new o.PerspectiveCamera(r,i,e,t);a.up.set(0,-1,0),a.lookAt(new o.Vector3(1,0,0)),this.add(a);var s=new o.PerspectiveCamera(r,i,e,t);s.up.set(0,-1,0),s.lookAt(new o.Vector3((-1),0,0)),this.add(s);var u=new o.PerspectiveCamera(r,i,e,t);u.up.set(0,0,1),u.lookAt(new o.Vector3(0,1,0)),this.add(u);var l=new o.PerspectiveCamera(r,i,e,t);l.up.set(0,0,-1),l.lookAt(new o.Vector3(0,(-1),0)),this.add(l);var c=new o.PerspectiveCamera(r,i,e,t);c.up.set(0,-1,0),c.lookAt(new o.Vector3(0,0,1)),this.add(c);var h=new o.PerspectiveCamera(r,i,e,t);h.up.set(0,-1,0),h.lookAt(new o.Vector3(0,0,(-1))),this.add(h);var f={format:o.RGBFormat,magFilter:o.LinearFilter,minFilter:o.LinearFilter};this.renderTarget=new o.WebGLRenderTargetCube(n,n,f),this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,a,n),n.activeCubeFace=1,e.render(t,s,n),n.activeCubeFace=2,e.render(t,u,n),n.activeCubeFace=3,e.render(t,l,n),n.activeCubeFace=4,e.render(t,c,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,e.render(t,h,n),e.setRenderTarget(null)}},o.CubeCamera.prototype=Object.create(o.Object3D.prototype),o.CubeCamera.prototype.constructor=o.CubeCamera,o.OrthographicCamera=function(e,t,n,r,i,a){o.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()},o.OrthographicCamera.prototype=Object.assign(Object.create(o.Camera.prototype),{constructor:o.OrthographicCamera,copy:function(e){return o.Camera.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:i,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;i+=c*(this.view.offsetX/u),o=i+c*(this.view.width/u),a-=h*(this.view.offsetY/l),s=a-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far)},toJSON:function(e){var t=o.Object3D.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),o.PerspectiveCamera=function(e,t,n,r){o.Camera.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()},o.PerspectiveCamera.prototype=Object.assign(Object.create(o.Camera.prototype),{constructor:o.PerspectiveCamera,copy:function(e){return o.Camera.prototype.copy.call(this,e),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*o.Math.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*o.Math.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*o.Math.RAD2DEG*Math.atan(Math.tan(.5*o.Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:i,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*o.Math.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==a){var s=a.fullWidth,u=a.fullHeight;i+=a.offsetX*r/s,t-=a.offsetY*n/u,r*=a.width/s,n*=a.height/u}var l=this.filmOffset;0!==l&&(i+=e*l/this.getFilmWidth()),this.projectionMatrix.makeFrustum(i,i+r,t-n,t,e,this.far)},toJSON:function(e){var t=o.Object3D.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),o.StereoCamera=function(){this.type="StereoCamera",this.aspect=1,this.cameraL=new o.PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new o.PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1},Object.assign(o.StereoCamera.prototype,{update:function(){var e,t,n,r,i,a=new o.Matrix4,s=new o.Matrix4;return function(u){var l=e!==u.focus||t!==u.fov||n!==u.aspect*this.aspect||r!==u.near||i!==u.far;if(l){e=u.focus,t=u.fov,n=u.aspect*this.aspect,r=u.near,i=u.far;var c,h,f=u.projectionMatrix.clone(),p=.032,d=p*r/e,m=r*Math.tan(o.Math.DEG2RAD*t*.5);s.elements[12]=-p,a.elements[12]=p,c=-m*n+d,h=m*n+d,f.elements[0]=2*r/(h-c),f.elements[8]=(h+c)/(h-c),this.cameraL.projectionMatrix.copy(f),c=-m*n-d,h=m*n-d,f.elements[0]=2*r/(h-c),f.elements[8]=(h+c)/(h-c),this.cameraR.projectionMatrix.copy(f)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(s),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(a)}}()}),o.Light=function(e,t){o.Object3D.call(this),this.type="Light",this.color=new o.Color(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0},o.Light.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.Light,copy:function(e){return o.Object3D.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=o.Object3D.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),t}}),o.LightShadow=function(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new o.Vector2(512,512),this.map=null,this.matrix=new o.Matrix4},Object.assign(o.LightShadow.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)}}),o.AmbientLight=function(e,t){o.Light.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0},o.AmbientLight.prototype=Object.assign(Object.create(o.Light.prototype),{constructor:o.AmbientLight}),o.DirectionalLight=function(e,t){o.Light.call(this,e,t),this.type="DirectionalLight",this.position.copy(o.Object3D.DefaultUp),this.updateMatrix(),this.target=new o.Object3D,this.shadow=new o.DirectionalLightShadow},o.DirectionalLight.prototype=Object.assign(Object.create(o.Light.prototype),{constructor:o.DirectionalLight,copy:function(e){return o.Light.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),o.DirectionalLightShadow=function(e){o.LightShadow.call(this,new o.OrthographicCamera((-5),5,5,(-5),.5,500))},o.DirectionalLightShadow.prototype=Object.assign(Object.create(o.LightShadow.prototype),{constructor:o.DirectionalLightShadow}),o.HemisphereLight=function(e,t,n){o.Light.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(o.Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new o.Color(t)},o.HemisphereLight.prototype=Object.assign(Object.create(o.Light.prototype),{constructor:o.HemisphereLight,copy:function(e){return o.Light.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),o.PointLight=function(e,t,n,r){o.Light.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new o.LightShadow(new o.PerspectiveCamera(90,1,.5,500))},o.PointLight.prototype=Object.assign(Object.create(o.Light.prototype),{constructor:o.PointLight,copy:function(e){return o.Light.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),o.SpotLight=function(e,t,n,r,i,a){o.Light.call(this,e,t),this.type="SpotLight",this.position.copy(o.Object3D.DefaultUp),this.updateMatrix(),this.target=new o.Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new o.SpotLightShadow},o.SpotLight.prototype=Object.assign(Object.create(o.Light.prototype),{constructor:o.SpotLight,copy:function(e){return o.Light.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),o.SpotLightShadow=function(){o.LightShadow.call(this,new o.PerspectiveCamera(50,1,.5,500))},o.SpotLightShadow.prototype=Object.assign(Object.create(o.LightShadow.prototype),{constructor:o.SpotLightShadow,update:function(e){var t=2*o.Math.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,r=e.distance||500,i=this.camera;t===i.fov&&n===i.aspect&&r===i.far||(i.fov=t,i.aspect=n,i.far=r,i.updateProjectionMatrix())}}),o.AudioLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager},Object.assign(o.AudioLoader.prototype,{load:function(e,t,n,r){var i=new o.XHRLoader(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){var n=o.AudioContext;n.decodeAudioData(e,function(e){t(e)})},n,r)}}),o.Cache={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},o.Loader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},o.Loader.prototype={constructor:o.Loader,crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e,t,n;return function(r,i,a){function s(e,n,r,s,l){var c,h=i+e,f=o.Loader.Handlers.get(h);null!==f?c=f.load(h):(t.setCrossOrigin(a),c=t.load(h)),void 0!==n&&(c.repeat.fromArray(n),1!==n[0]&&(c.wrapS=o.RepeatWrapping),1!==n[1]&&(c.wrapT=o.RepeatWrapping)),void 0!==r&&c.offset.fromArray(r),void 0!==s&&("repeat"===s[0]&&(c.wrapS=o.RepeatWrapping),"mirror"===s[0]&&(c.wrapS=o.MirroredRepeatWrapping),"repeat"===s[1]&&(c.wrapT=o.RepeatWrapping),"mirror"===s[1]&&(c.wrapT=o.MirroredRepeatWrapping)),void 0!==l&&(c.anisotropy=l);var p=o.Math.generateUUID();return u[p]=c,p}void 0===e&&(e=new o.Color),void 0===t&&(t=new o.TextureLoader),void 0===n&&(n=new o.MaterialLoader);var u={},l={uuid:o.Math.generateUUID(),type:"MeshLambertMaterial"};for(var c in r){var h=r[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=h;break;case"blending":l.blending=o[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":l.color=e.fromArray(h).getHex();break;case"colorSpecular":l.specular=e.fromArray(h).getHex();break;case"colorEmissive":l.emissive=e.fromArray(h).getHex();break;case"specularCoef":l.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=s(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=s(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=s(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=s(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=s(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=s(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=s(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=s(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=s(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=s(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=o.BackSide;break;case"doubleSided":l.side=o.DoubleSide;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[c]=h;break;case"vertexColors":h===!0&&(l.vertexColors=o.VertexColors),"face"===h&&(l.vertexColors=o.FaceColors);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,h)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),n.setTextures(u),n.parse(l)}}()},o.Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];if(i.test(e))return o}return null}},o.XHRLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager},Object.assign(o.XHRLoader.prototype,{load:function(e,t,n,r){void 0!==this.path&&(e=this.path+e);var i=this,a=o.Cache.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var s=new XMLHttpRequest;return s.overrideMimeType("text/plain"),s.open("GET",e,!0),s.addEventListener("load",function(n){var a=n.target.response;o.Cache.add(e,a),200===this.status?(t&&t(a),i.manager.itemEnd(e)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),t&&t(a),i.manager.itemEnd(e)):(r&&r(n),i.manager.itemError(e))},!1),void 0!==n&&s.addEventListener("progress",function(e){n(e)},!1),s.addEventListener("error",function(t){r&&r(t),i.manager.itemError(e)},!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.send(null),i.manager.itemStart(e),s},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this}}),o.FontLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager},Object.assign(o.FontLoader.prototype,{load:function(e,t,n,r){var i=this,a=new o.XHRLoader(this.manager);a.load(e,function(e){var n;try{n=JSON.parse(e)}catch(r){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var o=i.parse(n);t&&t(o)},n,r)},parse:function(e){return new o.Font(e)}}),o.ImageLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager},Object.assign(o.ImageLoader.prototype,{load:function(e,t,n,r){var i=this,a=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(a.onload=function(){URL.revokeObjectURL(a.src),t&&t(a),i.manager.itemEnd(e)},0===e.indexOf("data:"))a.src=e;else{var s=new o.XHRLoader;s.setPath(this.path),s.setResponseType("blob"),s.load(e,function(e){a.src=URL.createObjectURL(e)},n,r)}return i.manager.itemStart(e),a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),o.JSONLoader=function(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:o.DefaultLoadingManager,this.withCredentials=!1},Object.assign(o.JSONLoader.prototype,{load:function(e,t,n,r){var i=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:o.Loader.prototype.extractUrlBase(e),s=new o.XHRLoader(this.manager);s.setWithCredentials(this.withCredentials),s.load(e,function(n){var r=JSON.parse(n),o=r.metadata;if(void 0!==o){var s=o.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var u=i.parse(r,a);t(u.geometry,u.materials)},n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){function n(t){function n(e,t){return e&1<<t}var r,i,a,u,l,c,h,f,p,d,m,v,g,y,_,b,w,x,E,M,C,S,T,P,O,A,R,k=e.faces,L=e.vertices,D=e.normals,I=e.colors,j=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&j++;for(r=0;r<j;r++)s.faceVertexUvs[r]=[]}for(u=0,l=L.length;u<l;)x=new o.Vector3,x.x=L[u++]*t,x.y=L[u++]*t,x.z=L[u++]*t,s.vertices.push(x);for(u=0,l=k.length;u<l;)if(d=k[u++],m=n(d,0),v=n(d,1),g=n(d,3),y=n(d,4),_=n(d,5),b=n(d,6),w=n(d,7),m){if(M=new o.Face3,M.a=k[u],M.b=k[u+1],M.c=k[u+3],C=new o.Face3,C.a=k[u+1],C.b=k[u+2],C.c=k[u+3],u+=4,v&&(p=k[u++],M.materialIndex=p,C.materialIndex=p),a=s.faces.length,g)for(r=0;r<j;r++)for(P=e.uvs[r],s.faceVertexUvs[r][a]=[],s.faceVertexUvs[r][a+1]=[],i=0;i<4;i++)f=k[u++],A=P[2*f],R=P[2*f+1],O=new o.Vector2(A,R),2!==i&&s.faceVertexUvs[r][a].push(O),0!==i&&s.faceVertexUvs[r][a+1].push(O);if(y&&(h=3*k[u++],M.normal.set(D[h++],D[h++],D[h]),C.normal.copy(M.normal)),_)for(r=0;r<4;r++)h=3*k[u++],T=new o.Vector3(D[h++],D[h++],D[h]),2!==r&&M.vertexNormals.push(T),0!==r&&C.vertexNormals.push(T);if(b&&(c=k[u++],S=I[c],M.color.setHex(S),C.color.setHex(S)),w)for(r=0;r<4;r++)c=k[u++],S=I[c],2!==r&&M.vertexColors.push(new o.Color(S)),0!==r&&C.vertexColors.push(new o.Color(S));s.faces.push(M),s.faces.push(C)}else{if(E=new o.Face3,E.a=k[u++],E.b=k[u++],E.c=k[u++],v&&(p=k[u++],E.materialIndex=p),a=s.faces.length,g)for(r=0;r<j;r++)for(P=e.uvs[r],s.faceVertexUvs[r][a]=[],i=0;i<3;i++)f=k[u++],A=P[2*f],R=P[2*f+1],O=new o.Vector2(A,R),s.faceVertexUvs[r][a].push(O);if(y&&(h=3*k[u++],E.normal.set(D[h++],D[h++],D[h])),_)for(r=0;r<3;r++)h=3*k[u++],T=new o.Vector3(D[h++],D[h++],D[h]),E.vertexNormals.push(T);if(b&&(c=k[u++],E.color.setHex(I[c])),w)for(r=0;r<3;r++)c=k[u++],E.vertexColors.push(new o.Color(I[c]));s.faces.push(E)}}function r(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var n=0,r=e.skinWeights.length;n<r;n+=t){var i=e.skinWeights[n],a=t>1?e.skinWeights[n+1]:0,u=t>2?e.skinWeights[n+2]:0,l=t>3?e.skinWeights[n+3]:0;s.skinWeights.push(new o.Vector4(i,a,u,l))}if(e.skinIndices)for(var n=0,r=e.skinIndices.length;n<r;n+=t){var c=e.skinIndices[n],h=t>1?e.skinIndices[n+1]:0,f=t>2?e.skinIndices[n+2]:0,p=t>3?e.skinIndices[n+3]:0;s.skinIndices.push(new o.Vector4(c,h,f,p))}s.bones=e.bones,s.bones&&s.bones.length>0&&(s.skinWeights.length!==s.skinIndices.length||s.skinIndices.length!==s.vertices.length)&&console.warn("When skinning, number of vertices ("+s.vertices.length+"), skinIndices ("+s.skinIndices.length+"), and skinWeights ("+s.skinWeights.length+") should match.")}function i(t){if(void 0!==e.morphTargets)for(var n=0,r=e.morphTargets.length;n<r;n++){s.morphTargets[n]={},s.morphTargets[n].name=e.morphTargets[n].name,s.morphTargets[n].vertices=[];for(var i=s.morphTargets[n].vertices,a=e.morphTargets[n].vertices,u=0,l=a.length;u<l;u+=3){var c=new o.Vector3;c.x=a[u]*t,c.y=a[u+1]*t,c.z=a[u+2]*t,i.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=s.faces,f=e.morphColors[0].colors,n=0,r=h.length;n<r;n++)h[n].color.fromArray(f,3*n)}}function a(){var t=[],n=[];void 0!==e.animation&&n.push(e.animation),void 0!==e.animations&&(e.animations.length?n=n.concat(e.animations):n.push(e.animations));for(var r=0;r<n.length;r++){var i=o.AnimationClip.parseAnimation(n[r],s.bones);i&&t.push(i)}if(s.morphTargets){var a=o.AnimationClip.CreateClipsFromMorphTargetSequences(s.morphTargets,10);t=t.concat(a)}t.length>0&&(s.animations=t)}var s=new o.Geometry,u=void 0!==e.scale?1/e.scale:1;if(n(u),r(),i(u),a(),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:s};var l=o.Loader.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:s,materials:l}}}),o.LoadingManager=function(e,t,n){var r=this,i=!1,o=0,a=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,i===!1&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)}},o.DefaultLoadingManager=new o.LoadingManager,o.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager},Object.assign(o.BufferGeometryLoader.prototype,{load:function(e,t,n,r){var i=this,a=new o.XHRLoader(i.manager);a.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new o.BufferGeometry,n=e.data.index,r={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==n){var i=new r[n.type](n.array);t.setIndex(new o.BufferAttribute(i,1))}var a=e.data.attributes;for(var s in a){var u=a[s],i=new r[u.type](u.array);t.addAttribute(s,new o.BufferAttribute(i,u.itemSize,u.normalized))}var l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(var c=0,h=l.length;c!==h;++c){var f=l[c];t.addGroup(f.start,f.count,f.materialIndex)}var p=e.data.boundingSphere;if(void 0!==p){var d=new o.Vector3;void 0!==p.center&&d.fromArray(p.center),t.boundingSphere=new o.Sphere(d,p.radius)}return t}}),o.MaterialLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager,this.textures={}},Object.assign(o.MaterialLoader.prototype,{load:function(e,t,n,r){var i=this,a=new o.XHRLoader(i.manager);a.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},getTexture:function(e){var t=this.textures;return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]},parse:function(e){var t=new o[e.type];if(void 0!==e.uuid&&(t.uuid=e.uuid),void 0!==e.name&&(t.name=e.name),void 0!==e.color&&t.color.setHex(e.color),void 0!==e.roughness&&(t.roughness=e.roughness),void 0!==e.metalness&&(t.metalness=e.metalness),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.uniforms&&(t.uniforms=e.uniforms),void 0!==e.vertexShader&&(t.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(t.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.shading&&(t.shading=e.shading),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.alphaTest&&(t.alphaTest=e.alphaTest),void 0!==e.depthTest&&(t.depthTest=e.depthTest),void 0!==e.depthWrite&&(t.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(t.colorWrite=e.colorWrite),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(t.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.size&&(t.size=e.size),void 0!==e.sizeAttenuation&&(t.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(t.map=this.getTexture(e.map)),void 0!==e.alphaMap&&(t.alphaMap=this.getTexture(e.alphaMap),t.transparent=!0),void 0!==e.bumpMap&&(t.bumpMap=this.getTexture(e.bumpMap)),void 0!==e.bumpScale&&(t.bumpScale=e.bumpScale),void 0!==e.normalMap&&(t.normalMap=this.getTexture(e.normalMap)),void 0!==e.normalScale){var n=e.normalScale;Array.isArray(n)===!1&&(n=[n,n]),t.normalScale=(new o.Vector2).fromArray(n)}if(void 0!==e.displacementMap&&(t.displacementMap=this.getTexture(e.displacementMap)),void 0!==e.displacementScale&&(t.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(t.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(t.roughnessMap=this.getTexture(e.roughnessMap)),void 0!==e.metalnessMap&&(t.metalnessMap=this.getTexture(e.metalnessMap)),void 0!==e.emissiveMap&&(t.emissiveMap=this.getTexture(e.emissiveMap)),void 0!==e.emissiveIntensity&&(t.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(t.specularMap=this.getTexture(e.specularMap)),void 0!==e.envMap&&(t.envMap=this.getTexture(e.envMap),t.combine=o.MultiplyOperation),void 0!==e.reflectivity&&(t.reflectivity=e.reflectivity),void 0!==e.lightMap&&(t.lightMap=this.getTexture(e.lightMap)),void 0!==e.lightMapIntensity&&(t.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(t.aoMap=this.getTexture(e.aoMap)),void 0!==e.aoMapIntensity&&(t.aoMapIntensity=e.aoMapIntensity),void 0!==e.materials)for(var r=0,i=e.materials.length;r<i;r++)t.materials.push(this.parse(e.materials[r]));return t}}),o.ObjectLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager,this.texturePath=""},Object.assign(o.ObjectLoader.prototype,{load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this,a=new o.XHRLoader(i.manager);a.load(e,function(e){i.parse(JSON.parse(e),t)},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),r=this.parseImages(e.images,function(){void 0!==t&&t(a)}),i=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,i),a=this.parseObject(e.object,n,o);return e.animations&&(a.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(a),a},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new o.JSONLoader,r=new o.BufferGeometryLoader,i=0,a=e.length;i<a;i++){var s,u=e[i];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new o[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new o[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new o[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new o[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new o[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new o[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":s=new o[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new o[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new o[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new o[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new o[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"BufferGeometry":s=r.parse(u);break;case"Geometry":s=n.parse(u.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),t[u.uuid]=s}return t},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new o.MaterialLoader;r.setTextures(t);for(var i=0,a=e.length;i<a;i++){var s=r.parse(e[i]);n[s.uuid]=s}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=o.AnimationClip.parse(e[n]);t.push(r)}return t},parseImages:function(e,t){function n(e){return r.manager.itemStart(e),s.load(e,function(){r.manager.itemEnd(e)})}var r=this,i={};if(void 0!==e&&e.length>0){var a=new o.LoadingManager(t),s=new o.ImageLoader(a);s.setCrossOrigin(this.crossOrigin);for(var u=0,l=e.length;u<l;u++){var c=e[u],h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.texturePath+c.url;i[c.uuid]=n(h)}}return i},parseTextures:function(e,t){function n(e){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),o[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var u=new o.Texture(t[s.image]);
u.needsUpdate=!0,u.uuid=s.uuid,void 0!==s.name&&(u.name=s.name),void 0!==s.mapping&&(u.mapping=n(s.mapping)),void 0!==s.offset&&u.offset.fromArray(s.offset),void 0!==s.repeat&&u.repeat.fromArray(s.repeat),void 0!==s.wrap&&(u.wrapS=n(s.wrap[0]),u.wrapT=n(s.wrap[1])),void 0!==s.minFilter&&(u.minFilter=n(s.minFilter)),void 0!==s.magFilter&&(u.magFilter=n(s.magFilter)),void 0!==s.anisotropy&&(u.anisotropy=s.anisotropy),void 0!==s.flipY&&(u.flipY=s.flipY),r[s.uuid]=u}return r},parseObject:function(){var e=new o.Matrix4;return function(t,n,r){function i(e){return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),n[e]}function a(e){if(void 0!==e)return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}var s;switch(t.type){case"Scene":s=new o.Scene;break;case"PerspectiveCamera":s=new o.PerspectiveCamera(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(s.focus=t.focus),void 0!==t.zoom&&(s.zoom=t.zoom),void 0!==t.filmGauge&&(s.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(s.filmOffset=t.filmOffset),void 0!==t.view&&(s.view=Object.assign({},t.view));break;case"OrthographicCamera":s=new o.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":s=new o.AmbientLight(t.color,t.intensity);break;case"DirectionalLight":s=new o.DirectionalLight(t.color,t.intensity);break;case"PointLight":s=new o.PointLight(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":s=new o.SpotLight(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":s=new o.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":var u=i(t.geometry),l=a(t.material);s=u.bones&&u.bones.length>0?new o.SkinnedMesh(u,l):new o.Mesh(u,l);break;case"LOD":s=new o.LOD;break;case"Line":s=new o.Line(i(t.geometry),a(t.material),t.mode);break;case"PointCloud":case"Points":s=new o.Points(i(t.geometry),a(t.material));break;case"Sprite":s=new o.Sprite(a(t.material));break;case"Group":s=new o.Group;break;default:s=new o.Object3D}if(s.uuid=t.uuid,void 0!==t.name&&(s.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(s.position,s.quaternion,s.scale)):(void 0!==t.position&&s.position.fromArray(t.position),void 0!==t.rotation&&s.rotation.fromArray(t.rotation),void 0!==t.scale&&s.scale.fromArray(t.scale)),void 0!==t.castShadow&&(s.castShadow=t.castShadow),void 0!==t.receiveShadow&&(s.receiveShadow=t.receiveShadow),void 0!==t.visible&&(s.visible=t.visible),void 0!==t.userData&&(s.userData=t.userData),void 0!==t.children)for(var c in t.children)s.add(this.parseObject(t.children[c],n,r));if("LOD"===t.type)for(var h=t.levels,f=0;f<h.length;f++){var p=h[f],c=s.getObjectByProperty("uuid",p.object);void 0!==c&&s.addLevel(c,p.distance)}return s}}()}),o.TextureLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager},Object.assign(o.TextureLoader.prototype,{load:function(e,t,n,r){var i=new o.Texture,a=new o.ImageLoader(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(n){var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?o.RGBFormat:o.RGBAFormat,i.image=n,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),o.CubeTextureLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager},Object.assign(o.CubeTextureLoader.prototype,{load:function(e,t,n,r){function i(n){s.load(e[n],function(e){a.images[n]=e,u++,6===u&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}var a=new o.CubeTexture,s=new o.ImageLoader(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);for(var u=0,l=0;l<e.length;++l)i(l);return a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),o.DataTextureLoader=o.BinaryTextureLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager,this._parser=null},Object.assign(o.BinaryTextureLoader.prototype,{load:function(e,t,n,r){var i=this,a=new o.DataTexture,s=new o.XHRLoader(this.manager);return s.setResponseType("arraybuffer"),s.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:o.ClampToEdgeWrapping,a.wrapT=void 0!==n.wrapT?n.wrapT:o.ClampToEdgeWrapping,a.magFilter=void 0!==n.magFilter?n.magFilter:o.LinearFilter,a.minFilter=void 0!==n.minFilter?n.minFilter:o.LinearMipMapLinearFilter,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps),1===n.mipmapCount&&(a.minFilter=o.LinearFilter),a.needsUpdate=!0,t&&t(a,n))},n,r),a}}),o.CompressedTextureLoader=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager,this._parser=null},Object.assign(o.CompressedTextureLoader.prototype,{load:function(e,t,n,r){function i(i){l.load(e[i],function(e){var n=a._parser(e,!0);s[i]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(u.minFilter=o.LinearFilter),u.format=n.format,u.needsUpdate=!0,t&&t(u))},n,r)}var a=this,s=[],u=new o.CompressedTexture;u.image=s;var l=new o.XHRLoader(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,h=0,f=e.length;h<f;++h)i(h);else l.load(e,function(e){var n=a._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,i=0;i<r;i++){s[i]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)s[i].mipmaps.push(n.mipmaps[i*n.mipmapCount+l]),s[i].format=n.format,s[i].width=n.width,s[i].height=n.height}else u.image.width=n.width,u.image.height=n.height,u.mipmaps=n.mipmaps;1===n.mipmapCount&&(u.minFilter=o.LinearFilter),u.format=n.format,u.needsUpdate=!0,t&&t(u)},n,r);return u},setPath:function(e){return this.path=e,this}}),o.Material=function(){Object.defineProperty(this,"id",{value:o.MaterialIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=o.NormalBlending,this.side=o.FrontSide,this.shading=o.SmoothShading,this.vertexColors=o.NoColors,this.opacity=1,this.transparent=!1,this.blendSrc=o.SrcAlphaFactor,this.blendDst=o.OneMinusSrcAlphaFactor,this.blendEquation=o.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=o.LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0},o.Material.prototype={constructor:o.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){e===!0&&this.update(),this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r instanceof o.Color?r.set(n):r instanceof o.Vector3&&n instanceof o.Vector3?r.copy(n):"overdraw"===t?this[t]=Number(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){function t(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var n=void 0===e;n&&(e={textures:{},images:{}});var r={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color instanceof o.Color&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive instanceof o.Color&&(r.emissive=this.emissive.getHex()),this.specular instanceof o.Color&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),this.map instanceof o.Texture&&(r.map=this.map.toJSON(e).uuid),this.alphaMap instanceof o.Texture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap instanceof o.Texture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap instanceof o.Texture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap instanceof o.Texture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap instanceof o.Texture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap instanceof o.Texture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap instanceof o.Texture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap instanceof o.Texture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap instanceof o.Texture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap instanceof o.Texture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==o.NormalBlending&&(r.blending=this.blending),this.shading!==o.SmoothShading&&(r.shading=this.shading),this.side!==o.FrontSide&&(r.side=this.side),this.vertexColors!==o.NoColors&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),n){var i=t(e.textures),a=t(e.images);i.length>0&&(r.textures=i),a.length>0&&(r.images=a)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(o.Material.prototype,o.EventDispatcher.prototype),o.MaterialIdCount=0,o.LineBasicMaterial=function(e){o.Material.call(this),this.type="LineBasicMaterial",this.color=new o.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)},o.LineBasicMaterial.prototype=Object.create(o.Material.prototype),o.LineBasicMaterial.prototype.constructor=o.LineBasicMaterial,o.LineBasicMaterial.prototype.copy=function(e){return o.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},o.LineDashedMaterial=function(e){o.Material.call(this),this.type="LineDashedMaterial",this.color=new o.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)},o.LineDashedMaterial.prototype=Object.create(o.Material.prototype),o.LineDashedMaterial.prototype.constructor=o.LineDashedMaterial,o.LineDashedMaterial.prototype.copy=function(e){return o.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this},o.MeshBasicMaterial=function(e){o.Material.call(this),this.type="MeshBasicMaterial",this.color=new o.Color(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)},o.MeshBasicMaterial.prototype=Object.create(o.Material.prototype),o.MeshBasicMaterial.prototype.constructor=o.MeshBasicMaterial,o.MeshBasicMaterial.prototype.copy=function(e){return o.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},o.MeshDepthMaterial=function(e){o.Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=o.BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)},o.MeshDepthMaterial.prototype=Object.create(o.Material.prototype),o.MeshDepthMaterial.prototype.constructor=o.MeshDepthMaterial,o.MeshDepthMaterial.prototype.copy=function(e){return o.Material.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},o.MeshLambertMaterial=function(e){o.Material.call(this),this.type="MeshLambertMaterial",this.color=new o.Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new o.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},o.MeshLambertMaterial.prototype=Object.create(o.Material.prototype),o.MeshLambertMaterial.prototype.constructor=o.MeshLambertMaterial,o.MeshLambertMaterial.prototype.copy=function(e){return o.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},o.MeshNormalMaterial=function(e){o.Material.call(this,e),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.morphTargets=!1,this.setValues(e)},o.MeshNormalMaterial.prototype=Object.create(o.Material.prototype),o.MeshNormalMaterial.prototype.constructor=o.MeshNormalMaterial,o.MeshNormalMaterial.prototype.copy=function(e){return o.Material.prototype.copy.call(this,e),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},o.MeshPhongMaterial=function(e){o.Material.call(this),this.type="MeshPhongMaterial",this.color=new o.Color(16777215),this.specular=new o.Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new o.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new o.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},o.MeshPhongMaterial.prototype=Object.create(o.Material.prototype),o.MeshPhongMaterial.prototype.constructor=o.MeshPhongMaterial,o.MeshPhongMaterial.prototype.copy=function(e){return o.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},o.MeshStandardMaterial=function(e){o.Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new o.Color(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new o.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new o.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},o.MeshStandardMaterial.prototype=Object.create(o.Material.prototype),o.MeshStandardMaterial.prototype.constructor=o.MeshStandardMaterial,o.MeshStandardMaterial.prototype.copy=function(e){return o.Material.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},o.MeshPhysicalMaterial=function(e){o.MeshStandardMaterial.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)},o.MeshPhysicalMaterial.prototype=Object.create(o.MeshStandardMaterial.prototype),o.MeshPhysicalMaterial.prototype.constructor=o.MeshPhysicalMaterial,o.MeshPhysicalMaterial.prototype.copy=function(e){return o.MeshStandardMaterial.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},o.MultiMaterial=function(e){this.uuid=o.Math.generateUUID(),this.type="MultiMaterial",this.materials=e instanceof Array?e:[],this.visible=!0},o.MultiMaterial.prototype={constructor:o.MultiMaterial,toJSON:function(e){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials,r=0,i=n.length;r<i;r++){var o=n[r].toJSON(e);delete o.metadata,t.materials.push(o)}return t.visible=this.visible,t},clone:function(){for(var e=new this.constructor,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e.visible=this.visible,e}},o.PointsMaterial=function(e){o.Material.call(this),this.type="PointsMaterial",this.color=new o.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)},o.PointsMaterial.prototype=Object.create(o.Material.prototype),o.PointsMaterial.prototype.constructor=o.PointsMaterial,o.PointsMaterial.prototype.copy=function(e){return o.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},o.ShaderMaterial=function(e){o.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))},o.ShaderMaterial.prototype=Object.create(o.Material.prototype),o.ShaderMaterial.prototype.constructor=o.ShaderMaterial,o.ShaderMaterial.prototype.copy=function(e){return o.Material.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=o.UniformsUtils.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},o.ShaderMaterial.prototype.toJSON=function(e){var t=o.Material.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},o.RawShaderMaterial=function(e){o.ShaderMaterial.call(this,e),this.type="RawShaderMaterial"},o.RawShaderMaterial.prototype=Object.create(o.ShaderMaterial.prototype),o.RawShaderMaterial.prototype.constructor=o.RawShaderMaterial,o.SpriteMaterial=function(e){o.Material.call(this),this.type="SpriteMaterial",this.color=new o.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)},o.SpriteMaterial.prototype=Object.create(o.Material.prototype),o.SpriteMaterial.prototype.constructor=o.SpriteMaterial,o.SpriteMaterial.prototype.copy=function(e){return o.Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},o.ShadowMaterial=function(){o.ShaderMaterial.call(this,{uniforms:o.UniformsUtils.merge([o.UniformsLib.lights,{opacity:{value:1}}]),vertexShader:o.ShaderChunk.shadow_vert,fragmentShader:o.ShaderChunk.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}})},o.ShadowMaterial.prototype=Object.create(o.ShaderMaterial.prototype),o.ShadowMaterial.prototype.constructor=o.ShadowMaterial,o.Texture=function(e,t,n,r,i,a,s,u,l,c){Object.defineProperty(this,"id",{value:o.TextureIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==e?e:o.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:o.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:o.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:o.ClampToEdgeWrapping,this.magFilter=void 0!==i?i:o.LinearFilter,this.minFilter=void 0!==a?a:o.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:o.RGBAFormat,this.type=void 0!==u?u:o.UnsignedByteType,this.offset=new o.Vector2(0,0),this.repeat=new o.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:o.LinearEncoding,this.version=0,this.onUpdate=null},o.Texture.DEFAULT_IMAGE=void 0,o.Texture.DEFAULT_MAPPING=o.UVMapping,o.Texture.prototype={constructor:o.Texture,set needsUpdate(e){e===!0&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){function t(e){var t;return void 0!==e.toDataURL?t=e:(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=o.Math.generateUUID()),void 0===e.images[r.uuid]&&(e.images[r.uuid]={uuid:r.uuid,url:t(r)}),n.image=r.uuid}return e.textures[this.uuid]=n,n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===o.UVMapping){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case o.RepeatWrapping:e.x=e.x-Math.floor(e.x);break;case o.ClampToEdgeWrapping:e.x=e.x<0?0:1;break;case o.MirroredRepeatWrapping:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case o.RepeatWrapping:e.y=e.y-Math.floor(e.y);break;case o.ClampToEdgeWrapping:e.y=e.y<0?0:1;break;case o.MirroredRepeatWrapping:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}},Object.assign(o.Texture.prototype,o.EventDispatcher.prototype),o.TextureIdCount=0,o.DepthTexture=function(e,t,n,r,i,a,s,u,l){o.Texture.call(this,null,r,i,a,s,u,o.DepthFormat,n,l),this.image={width:e,height:t},this.type=void 0!==n?n:o.UnsignedShortType,this.magFilter=void 0!==s?s:o.NearestFilter,this.minFilter=void 0!==u?u:o.NearestFilter,this.flipY=!1,this.generateMipmaps=!1},o.DepthTexture.prototype=Object.create(o.Texture.prototype),o.DepthTexture.prototype.constructor=o.DepthTexture,o.CanvasTexture=function(e,t,n,r,i,a,s,u,l){o.Texture.call(this,e,t,n,r,i,a,s,u,l),this.needsUpdate=!0},o.CanvasTexture.prototype=Object.create(o.Texture.prototype),o.CanvasTexture.prototype.constructor=o.CanvasTexture,o.CubeTexture=function(e,t,n,r,i,a,s,u,l,c){e=void 0!==e?e:[],t=void 0!==t?t:o.CubeReflectionMapping,o.Texture.call(this,e,t,n,r,i,a,s,u,l,c),this.flipY=!1},o.CubeTexture.prototype=Object.create(o.Texture.prototype),o.CubeTexture.prototype.constructor=o.CubeTexture,Object.defineProperty(o.CubeTexture.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),o.CompressedTexture=function(e,t,n,r,i,a,s,u,l,c,h,f){o.Texture.call(this,null,a,s,u,l,c,r,i,h,f),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1},o.CompressedTexture.prototype=Object.create(o.Texture.prototype),o.CompressedTexture.prototype.constructor=o.CompressedTexture,o.DataTexture=function(e,t,n,r,i,a,s,u,l,c,h,f){o.Texture.call(this,null,a,s,u,l,c,r,i,h,f),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:o.NearestFilter,this.minFilter=void 0!==c?c:o.NearestFilter,this.flipY=!1,this.generateMipmaps=!1},o.DataTexture.prototype=Object.create(o.Texture.prototype),o.DataTexture.prototype.constructor=o.DataTexture,o.VideoTexture=function(e,t,n,r,i,a,s,u,l){function c(){requestAnimationFrame(c),e.readyState>=e.HAVE_CURRENT_DATA&&(h.needsUpdate=!0)}o.Texture.call(this,e,t,n,r,i,a,s,u,l),this.generateMipmaps=!1;var h=this;c()},o.VideoTexture.prototype=Object.create(o.Texture.prototype),o.VideoTexture.prototype.constructor=o.VideoTexture,o.Group=function(){o.Object3D.call(this),this.type="Group"},o.Group.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.Group}),o.Points=function(e,t){o.Object3D.call(this),this.type="Points",this.geometry=void 0!==e?e:new o.BufferGeometry,this.material=void 0!==t?t:new o.PointsMaterial({color:16777215*Math.random()})},o.Points.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.Points,raycast:function(){var e=new o.Matrix4,t=new o.Ray,n=new o.Sphere;return function(r,i){function a(e,n){var o=t.distanceSqToPoint(e);if(o<f){var a=t.closestPointToPoint(e);a.applyMatrix4(l);var u=r.ray.origin.distanceTo(a);if(u<r.near||u>r.far)return;i.push({distance:u,distanceToRay:Math.sqrt(o),point:a.clone(),index:n,face:null,object:s})}}var s=this,u=this.geometry,l=this.matrixWorld,c=r.params.Points.threshold;if(null===u.boundingSphere&&u.computeBoundingSphere(),n.copy(u.boundingSphere),n.applyMatrix4(l),r.ray.intersectsSphere(n)!==!1){e.getInverse(l),t.copy(r.ray).applyMatrix4(e);var h=c/((this.scale.x+this.scale.y+this.scale.z)/3),f=h*h,p=new o.Vector3;if(u instanceof o.BufferGeometry){var d=u.index,m=u.attributes,v=m.position.array;if(null!==d)for(var g=d.array,y=0,_=g.length;y<_;y++){var b=g[y];p.fromArray(v,3*b),a(p,b)}else for(var y=0,w=v.length/3;y<w;y++)p.fromArray(v,3*y),a(p,y)}else for(var x=u.vertices,y=0,w=x.length;y<w;y++)a(x[y],y)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),o.Line=function(e,t,n){return 1===n?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new o.LineSegments(e,t)):(o.Object3D.call(this),this.type="Line",this.geometry=void 0!==e?e:new o.BufferGeometry,void(this.material=void 0!==t?t:new o.LineBasicMaterial({color:16777215*Math.random()})))},o.Line.prototype=Object.assign(Object.create(o.Object3D.prototype),{
constructor:o.Line,raycast:function(){var e=new o.Matrix4,t=new o.Ray,n=new o.Sphere;return function(r,i){var a=r.linePrecision,s=a*a,u=this.geometry,l=this.matrixWorld;if(null===u.boundingSphere&&u.computeBoundingSphere(),n.copy(u.boundingSphere),n.applyMatrix4(l),r.ray.intersectsSphere(n)!==!1){e.getInverse(l),t.copy(r.ray).applyMatrix4(e);var c=new o.Vector3,h=new o.Vector3,f=new o.Vector3,p=new o.Vector3,d=this instanceof o.LineSegments?2:1;if(u instanceof o.BufferGeometry){var m=u.index,v=u.attributes,g=v.position.array;if(null!==m)for(var y=m.array,_=0,b=y.length-1;_<b;_+=d){var w=y[_],x=y[_+1];c.fromArray(g,3*w),h.fromArray(g,3*x);var E=t.distanceSqToSegment(c,h,p,f);if(!(E>s)){p.applyMatrix4(this.matrixWorld);var M=r.ray.origin.distanceTo(p);M<r.near||M>r.far||i.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else for(var _=0,b=g.length/3-1;_<b;_+=d){c.fromArray(g,3*_),h.fromArray(g,3*_+3);var E=t.distanceSqToSegment(c,h,p,f);if(!(E>s)){p.applyMatrix4(this.matrixWorld);var M=r.ray.origin.distanceTo(p);M<r.near||M>r.far||i.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else if(u instanceof o.Geometry)for(var C=u.vertices,S=C.length,_=0;_<S-1;_+=d){var E=t.distanceSqToSegment(C[_],C[_+1],p,f);if(!(E>s)){p.applyMatrix4(this.matrixWorld);var M=r.ray.origin.distanceTo(p);M<r.near||M>r.far||i.push({distance:M,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),o.LineSegments=function(e,t){o.Line.call(this,e,t),this.type="LineSegments"},o.LineSegments.prototype=Object.assign(Object.create(o.Line.prototype),{constructor:o.LineSegments}),o.Mesh=function(e,t){o.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new o.BufferGeometry,this.material=void 0!==t?t:new o.MeshBasicMaterial({color:16777215*Math.random()}),this.drawMode=o.TrianglesDrawMode,this.updateMorphTargets()},o.Mesh.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.Mesh,setDrawMode:function(e){this.drawMode=e},copy:function(e){return o.Object3D.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;e<t;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},getMorphTargetIndexByName:function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},raycast:function(){function e(e,t,n,r,i,a,s){return o.Triangle.barycoordFromPoint(e,t,n,r,v),i.multiplyScalar(v.x),a.multiplyScalar(v.y),s.multiplyScalar(v.z),i.add(a).add(s),i.clone()}function t(e,t,n,r,i,a,s){var u,l=e.material;if(u=l.side===o.BackSide?n.intersectTriangle(a,i,r,!0,s):n.intersectTriangle(r,i,a,l.side!==o.DoubleSide,s),null===u)return null;y.copy(s),y.applyMatrix4(e.matrixWorld);var c=t.ray.origin.distanceTo(y);return c<t.near||c>t.far?null:{distance:c,point:y.clone(),object:e}}function n(n,r,i,a,c,h,f,v){s.fromArray(a,3*h),u.fromArray(a,3*f),l.fromArray(a,3*v);var y=t(n,r,i,s,u,l,g);return y&&(c&&(p.fromArray(c,2*h),d.fromArray(c,2*f),m.fromArray(c,2*v),y.uv=e(g,s,u,l,p,d,m)),y.face=new o.Face3(h,f,v,o.Triangle.normal(s,u,l)),y.faceIndex=h),y}var r=new o.Matrix4,i=new o.Ray,a=new o.Sphere,s=new o.Vector3,u=new o.Vector3,l=new o.Vector3,c=new o.Vector3,h=new o.Vector3,f=new o.Vector3,p=new o.Vector2,d=new o.Vector2,m=new o.Vector2,v=new o.Vector3,g=new o.Vector3,y=new o.Vector3;return function(v,y){var _=this.geometry,b=this.material,w=this.matrixWorld;if(void 0!==b&&(null===_.boundingSphere&&_.computeBoundingSphere(),a.copy(_.boundingSphere),a.applyMatrix4(w),v.ray.intersectsSphere(a)!==!1&&(r.getInverse(w),i.copy(v.ray).applyMatrix4(r),null===_.boundingBox||i.intersectsBox(_.boundingBox)!==!1))){var x,E;if(_ instanceof o.BufferGeometry){var M,C,S,T=_.index,P=_.attributes,O=P.position.array;if(void 0!==P.uv&&(x=P.uv.array),null!==T)for(var A=T.array,R=0,k=A.length;R<k;R+=3)M=A[R],C=A[R+1],S=A[R+2],E=n(this,v,i,O,x,M,C,S),E&&(E.faceIndex=Math.floor(R/3),y.push(E));else for(var R=0,k=O.length;R<k;R+=9)M=R/3,C=M+1,S=M+2,E=n(this,v,i,O,x,M,C,S),E&&(E.index=M,y.push(E))}else if(_ instanceof o.Geometry){var L,D,I,j=b instanceof o.MultiMaterial,N=j===!0?b.materials:null,B=_.vertices,U=_.faces,F=_.faceVertexUvs[0];F.length>0&&(x=F);for(var V=0,z=U.length;V<z;V++){var G=U[V],H=j===!0?N[G.materialIndex]:b;if(void 0!==H){if(L=B[G.a],D=B[G.b],I=B[G.c],H.morphTargets===!0){var W=_.morphTargets,q=this.morphTargetInfluences;s.set(0,0,0),u.set(0,0,0),l.set(0,0,0);for(var X=0,Y=W.length;X<Y;X++){var K=q[X];if(0!==K){var Z=W[X].vertices;s.addScaledVector(c.subVectors(Z[G.a],L),K),u.addScaledVector(h.subVectors(Z[G.b],D),K),l.addScaledVector(f.subVectors(Z[G.c],I),K)}}s.add(L),u.add(D),l.add(I),L=s,D=u,I=l}if(E=t(this,v,i,L,D,I,g)){if(x){var Q=x[V];p.copy(Q[0]),d.copy(Q[1]),m.copy(Q[2]),E.uv=e(g,L,D,I,p,d,m)}E.face=G,E.faceIndex=V,y.push(E)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),o.Bone=function(e){o.Object3D.call(this),this.type="Bone",this.skin=e},o.Bone.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.Bone,copy:function(e){return o.Object3D.prototype.copy.call(this,e),this.skin=e.skin,this}}),o.Skeleton=function(e,t,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new o.Matrix4,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var r=Math.sqrt(4*this.bones.length);r=o.Math.nextPowerOfTwo(Math.ceil(r)),r=Math.max(r,4),this.boneTextureWidth=r,this.boneTextureHeight=r,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new o.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,o.RGBAFormat,o.FloatType)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var i=0,a=this.bones.length;i<a;i++)this.boneInverses.push(new o.Matrix4)}},Object.assign(o.Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new o.Matrix4;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var e,t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(var t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&(e.parent instanceof o.Bone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new o.Matrix4;return function(){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix;e.multiplyMatrices(r,this.boneInverses[t]),e.toArray(this.boneMatrices,16*t)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new o.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)}}),o.SkinnedMesh=function(e,t,n){o.Mesh.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new o.Matrix4,this.bindMatrixInverse=new o.Matrix4;var r=[];if(this.geometry&&void 0!==this.geometry.bones){for(var i,a,s=0,u=this.geometry.bones.length;s<u;++s)a=this.geometry.bones[s],i=new o.Bone(this),r.push(i),i.name=a.name,i.position.fromArray(a.pos),i.quaternion.fromArray(a.rotq),void 0!==a.scl&&i.scale.fromArray(a.scl);for(var s=0,u=this.geometry.bones.length;s<u;++s)a=this.geometry.bones[s],a.parent!==-1&&null!==a.parent&&void 0!==r[a.parent]?r[a.parent].add(r[s]):this.add(r[s])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new o.Skeleton(r,(void 0),n),this.matrixWorld)},o.SkinnedMesh.prototype=Object.assign(Object.create(o.Mesh.prototype),{constructor:o.SkinnedMesh,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry instanceof o.Geometry)for(var e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e],n=1/t.lengthManhattan();n!==1/0?t.multiplyScalar(n):t.set(1,0,0,0)}else if(this.geometry instanceof o.BufferGeometry)for(var r=new o.Vector4,i=this.geometry.attributes.skinWeight,e=0;e<i.count;e++){r.x=i.getX(e),r.y=i.getY(e),r.z=i.getZ(e),r.w=i.getW(e);var n=1/r.lengthManhattan();n!==1/0?r.multiplyScalar(n):r.set(1,0,0,0),i.setXYZW(e,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){o.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),o.LOD=function(){o.Object3D.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})},o.LOD.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.LOD,copy:function(e){o.Object3D.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new o.Vector3;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new o.Vector3,t=new o.Vector3;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=o.Object3D.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),o.Sprite=function(e){o.Object3D.call(this),this.type="Sprite",this.material=void 0!==e?e:new o.SpriteMaterial},o.Sprite.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.Sprite,raycast:function(){var e=new o.Vector3;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.distanceSqToPoint(e),i=this.scale.x*this.scale.y/4;r>i||n.push({distance:Math.sqrt(r),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),o.LensFlare=function(e,t,n,r,i){o.Object3D.call(this),this.lensFlares=[],this.positionScreen=new o.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,r,i)},o.LensFlare.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.LensFlare,copy:function(e){o.Object3D.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,n,r,i,a){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===a&&(a=1),void 0===i&&(i=new o.Color(16777215)),void 0===r&&(r=o.NormalBlending),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:i,blending:r})},updateLensFlares:function(){var e,t,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;e<n;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}}),o.Scene=function(){o.Object3D.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},o.Scene.prototype=Object.create(o.Object3D.prototype),o.Scene.prototype.constructor=o.Scene,o.Scene.prototype.copy=function(e,t){return o.Object3D.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},o.Fog=function(e,t,n){this.name="",this.color=new o.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3},o.Fog.prototype.clone=function(){return new o.Fog(this.color.getHex(),this.near,this.far)},o.FogExp2=function(e,t){this.name="",this.color=new o.Color(e),this.density=void 0!==t?t:25e-5},o.FogExp2.prototype.clone=function(){return new o.FogExp2(this.color.getHex(),this.density)},o.ShaderChunk={},o.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",o.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",o.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",o.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",o.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",o.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n",o.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n",o.ShaderChunk.bsdfs="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",o.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",o.ShaderChunk.clipping_planes_fragment="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n#endif\n",o.ShaderChunk.clipping_planes_pars_fragment="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",o.ShaderChunk.clipping_planes_pars_vertex="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",o.ShaderChunk.clipping_planes_vertex="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",o.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",o.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",o.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",o.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",o.ShaderChunk.common="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n",o.ShaderChunk.cube_uv_reflection_fragment="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",o.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",o.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",o.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",o.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",o.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",o.ShaderChunk.encodings_pars_fragment="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",o.ShaderChunk.encodings_fragment="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",o.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",
o.ShaderChunk.envmap_pars_fragment="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",o.ShaderChunk.envmap_pars_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",o.ShaderChunk.envmap_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",o.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",o.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",o.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",o.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",o.ShaderChunk.lights_lambert_vertex="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",o.ShaderChunk.lights_pars="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#include <normal_flip>\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#include <normal_flip>\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",o.ShaderChunk.lights_phong_fragment="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",o.ShaderChunk.lights_phong_pars_fragment="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",o.ShaderChunk.lights_physical_fragment="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",o.ShaderChunk.lights_physical_pars_fragment="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",o.ShaderChunk.lights_template="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",o.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",o.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",o.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",o.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",o.ShaderChunk.map_fragment="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",o.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",o.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",o.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",o.ShaderChunk.metalnessmap_fragment="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",o.ShaderChunk.metalnessmap_pars_fragment="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",o.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",o.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",o.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",o.ShaderChunk.normal_flip="#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",o.ShaderChunk.normal_fragment="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",o.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",o.ShaderChunk.packing="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",o.ShaderChunk.premultiplied_alpha_fragment="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",o.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",o.ShaderChunk.roughnessmap_fragment="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",o.ShaderChunk.roughnessmap_pars_fragment="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",o.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",
o.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",o.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",o.ShaderChunk.shadowmask_pars_fragment="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",o.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",o.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",o.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",o.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",o.ShaderChunk.specularmap_fragment="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",o.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",o.ShaderChunk.tonemapping_fragment="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",o.ShaderChunk.tonemapping_pars_fragment="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",o.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",o.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",o.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",o.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",o.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",o.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",o.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",o.UniformsUtils={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e){t[n]={};for(var r in e[n]){var i=e[n][r];i instanceof o.Color||i instanceof o.Vector2||i instanceof o.Vector3||i instanceof o.Vector4||i instanceof o.Matrix3||i instanceof o.Matrix4||i instanceof o.Texture?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}},o.UniformsLib={common:{diffuse:{value:new o.Color(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new o.Vector4(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new o.Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new o.Color(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}}},points:{diffuse:{value:new o.Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new o.Vector4(0,0,1,1)}}},o.ShaderChunk.cube_frag="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",o.ShaderChunk.cube_vert="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",o.ShaderChunk.depth_frag="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",o.ShaderChunk.depth_vert="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",o.ShaderChunk.distanceRGBA_frag="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",o.ShaderChunk.distanceRGBA_vert="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",o.ShaderChunk.equirect_frag="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",o.ShaderChunk.equirect_vert="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",o.ShaderChunk.linedashed_frag="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",o.ShaderChunk.linedashed_vert="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",o.ShaderChunk.meshbasic_frag="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",o.ShaderChunk.meshbasic_vert="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",o.ShaderChunk.meshlambert_frag="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",o.ShaderChunk.meshlambert_vert="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",o.ShaderChunk.meshphong_frag="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",o.ShaderChunk.meshphong_vert="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",o.ShaderChunk.meshphysical_frag="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",o.ShaderChunk.meshphysical_vert="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",o.ShaderChunk.normal_frag="uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n",o.ShaderChunk.normal_vert="varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",o.ShaderChunk.points_frag="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",o.ShaderChunk.points_vert="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",o.ShaderChunk.shadow_frag="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",o.ShaderChunk.shadow_vert="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",o.ShaderLib={basic:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.aomap,o.UniformsLib.fog]),vertexShader:o.ShaderChunk.meshbasic_vert,fragmentShader:o.ShaderChunk.meshbasic_frag},lambert:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.aomap,o.UniformsLib.lightmap,o.UniformsLib.emissivemap,o.UniformsLib.fog,o.UniformsLib.lights,{emissive:{value:new o.Color(0)}}]),vertexShader:o.ShaderChunk.meshlambert_vert,fragmentShader:o.ShaderChunk.meshlambert_frag},phong:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.aomap,o.UniformsLib.lightmap,o.UniformsLib.emissivemap,o.UniformsLib.bumpmap,o.UniformsLib.normalmap,o.UniformsLib.displacementmap,o.UniformsLib.fog,o.UniformsLib.lights,{emissive:{value:new o.Color(0)},specular:{value:new o.Color(1118481)},shininess:{value:30}}]),vertexShader:o.ShaderChunk.meshphong_vert,fragmentShader:o.ShaderChunk.meshphong_frag},standard:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.aomap,o.UniformsLib.lightmap,o.UniformsLib.emissivemap,o.UniformsLib.bumpmap,o.UniformsLib.normalmap,o.UniformsLib.displacementmap,o.UniformsLib.roughnessmap,o.UniformsLib.metalnessmap,o.UniformsLib.fog,o.UniformsLib.lights,{emissive:{value:new o.Color(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:o.ShaderChunk.meshphysical_vert,fragmentShader:o.ShaderChunk.meshphysical_frag},points:{uniforms:o.UniformsUtils.merge([o.UniformsLib.points,o.UniformsLib.fog]),vertexShader:o.ShaderChunk.points_vert,fragmentShader:o.ShaderChunk.points_frag},dashed:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:o.ShaderChunk.linedashed_vert,fragmentShader:o.ShaderChunk.linedashed_frag},depth:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.displacementmap]),vertexShader:o.ShaderChunk.depth_vert,fragmentShader:o.ShaderChunk.depth_frag},normal:{uniforms:{opacity:{value:1}},vertexShader:o.ShaderChunk.normal_vert,fragmentShader:o.ShaderChunk.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:o.ShaderChunk.cube_vert,fragmentShader:o.ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:o.ShaderChunk.equirect_vert,fragmentShader:o.ShaderChunk.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new o.Vector3}},vertexShader:o.ShaderChunk.distanceRGBA_vert,fragmentShader:o.ShaderChunk.distanceRGBA_frag}},o.ShaderLib.physical={uniforms:o.UniformsUtils.merge([o.ShaderLib.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:o.ShaderChunk.meshphysical_vert,fragmentShader:o.ShaderChunk.meshphysical_frag},o.WebGLRenderer=function(e){function t(){return null===te?de:1}function n(e,t,n,r){G===!0&&(e*=r,t*=r,n*=r),ke.clearColor(e,t,n,r)}function r(){ke.init(),ke.scissor(ae.copy(me).multiplyScalar(de)),ke.viewport(ue.copy(ge).multiplyScalar(de)),n(ce.r,ce.g,ce.b,he)}function i(){ee=null,oe=null,ie="",re=-1,ke.reset()}function a(e){e.preventDefault(),i(),r(),Le.clear()}function s(e){var t=e.target;t.removeEventListener("dispose",s),u(t)}function u(e){l(e),Le.delete(e)}function l(e){var t=Le.get(e).program;e.program=void 0,
void 0!==t&&je.releaseProgram(t)}function c(e,t,n,r){var i;if(n instanceof o.InstancedBufferGeometry&&(i=Ae.get("ANGLE_instanced_arrays"),null===i))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===r&&(r=0),ke.initAttributes();var a=n.attributes,s=t.getAttributes(),u=e.defaultAttributeValues;for(var l in s){var c=s[l];if(c>=0){var h=a[l];if(void 0!==h){var f=Te.FLOAT,p=h.array,d=h.normalized;p instanceof Float32Array?f=Te.FLOAT:p instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):p instanceof Uint16Array?f=Te.UNSIGNED_SHORT:p instanceof Int16Array?f=Te.SHORT:p instanceof Uint32Array?f=Te.UNSIGNED_INT:p instanceof Int32Array?f=Te.INT:p instanceof Int8Array?f=Te.BYTE:p instanceof Uint8Array&&(f=Te.UNSIGNED_BYTE);var m=h.itemSize,v=Ie.getAttributeBuffer(h);if(h instanceof o.InterleavedBufferAttribute){var g=h.data,y=g.stride,_=h.offset;g instanceof o.InstancedInterleavedBuffer?(ke.enableAttributeAndDivisor(c,g.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=g.meshPerAttribute*g.count)):ke.enableAttribute(c),Te.bindBuffer(Te.ARRAY_BUFFER,v),Te.vertexAttribPointer(c,m,f,d,y*g.array.BYTES_PER_ELEMENT,(r*y+_)*g.array.BYTES_PER_ELEMENT)}else h instanceof o.InstancedBufferAttribute?(ke.enableAttributeAndDivisor(c,h.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=h.meshPerAttribute*h.count)):ke.enableAttribute(c),Te.bindBuffer(Te.ARRAY_BUFFER,v),Te.vertexAttribPointer(c,m,f,d,0,r*m*h.array.BYTES_PER_ELEMENT)}else if(void 0!==u){var b=u[l];if(void 0!==b)switch(b.length){case 2:Te.vertexAttrib2fv(c,b);break;case 3:Te.vertexAttrib3fv(c,b);break;case 4:Te.vertexAttrib4fv(c,b);break;default:Te.vertexAttrib1fv(c,b)}}}}ke.disableUnusedAttributes()}function h(e,t){return Math.abs(t[0])-Math.abs(e[0])}function f(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.program&&t.material.program&&e.material.program!==t.material.program?e.material.program.id-t.material.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function p(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function d(e,t,n,r,i){var o,a;n.transparent?(o=Y,a=++K):(o=q,a=++X);var s=o[a];void 0!==s?(s.id=e.id,s.object=e,s.geometry=t,s.material=n,s.z=Me.z,s.group=i):(s={id:e.id,object:e,geometry:t,material:n,z:Me.z,group:i},o.push(s))}function m(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),xe.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),g(xe)}function v(e){return xe.center.set(0,0,0),xe.radius=.7071067811865476,xe.applyMatrix4(e.matrixWorld),g(xe)}function g(e){if(!ye.intersectsSphere(e))return!1;var t=_e.numPlanes;if(0===t)return!0;var n=$.clippingPlanes,r=e.center,i=-e.radius,o=0;do if(n[o].distanceToPoint(r)<i)return!1;while(++o!==t);return!0}function y(e,t){if(e.visible!==!1){if(e.layers.test(t.layers))if(e instanceof o.Light)W.push(e);else if(e instanceof o.Sprite)e.frustumCulled!==!1&&v(e)!==!0||Q.push(e);else if(e instanceof o.LensFlare)J.push(e);else if(e instanceof o.ImmediateRenderObject)$.sortObjects===!0&&(Me.setFromMatrixPosition(e.matrixWorld),Me.applyProjection(Ee)),d(e,null,e.material,Me.z,null);else if((e instanceof o.Mesh||e instanceof o.Line||e instanceof o.Points)&&(e instanceof o.SkinnedMesh&&e.skeleton.update(),e.frustumCulled===!1||m(e)===!0)){var n=e.material;if(n.visible===!0){$.sortObjects===!0&&(Me.setFromMatrixPosition(e.matrixWorld),Me.applyProjection(Ee));var r=Ie.update(e);if(n instanceof o.MultiMaterial)for(var i=r.groups,a=n.materials,s=0,u=i.length;s<u;s++){var l=i[s],c=a[l.materialIndex];c.visible===!0&&d(e,r,c,Me.z,l)}else d(e,r,n,Me.z,null)}}for(var h=e.children,s=0,u=h.length;s<u;s++)y(h[s],t)}}function _(e,t,n,r){for(var i=0,a=e.length;i<a;i++){var s=e[i],u=s.object,l=s.geometry,c=void 0===r?s.material:r,h=s.group;if(u.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,u.matrixWorld),u.normalMatrix.getNormalMatrix(u.modelViewMatrix),u instanceof o.ImmediateRenderObject){w(c);var f=x(t,n,c,u);ie="",u.render(function(e){$.renderBufferImmediate(e,f,c)})}else $.renderBufferDirect(t,n,l,c,u,h)}}function b(e,t,n){var r=Le.get(e),i=je.getParameters(e,Ce,t,_e.numPlanes,n),a=je.getProgramCode(e,i),u=r.program,c=!0;if(void 0===u)e.addEventListener("dispose",s);else if(u.code!==a)l(e);else{if(void 0!==i.shaderID)return;c=!1}if(c){if(i.shaderID){var h=o.ShaderLib[i.shaderID];r.__webglShader={name:e.type,uniforms:o.UniformsUtils.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else r.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=r.__webglShader,u=je.acquireProgram(e,i,a),r.program=u,e.program=u}var f=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<$.maxMorphTargets;p++)f["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var p=0;p<$.maxMorphNormals;p++)f["morphNormal"+p]>=0&&e.numSupportedMorphNormals++}var d=r.__webglShader.uniforms;(e instanceof o.ShaderMaterial||e instanceof o.RawShaderMaterial)&&e.clipping!==!0||(r.numClippingPlanes=_e.numPlanes,d.clippingPlanes=_e.uniform),e.lights&&(r.lightsHash=Ce.hash,d.ambientLightColor.value=Ce.ambient,d.directionalLights.value=Ce.directional,d.spotLights.value=Ce.spot,d.pointLights.value=Ce.point,d.hemisphereLights.value=Ce.hemi,d.directionalShadowMap.value=Ce.directionalShadowMap,d.directionalShadowMatrix.value=Ce.directionalShadowMatrix,d.spotShadowMap.value=Ce.spotShadowMap,d.spotShadowMatrix.value=Ce.spotShadowMatrix,d.pointShadowMap.value=Ce.pointShadowMap,d.pointShadowMatrix.value=Ce.pointShadowMatrix);var m=r.program.getUniforms(),v=o.WebGLUniforms.seqWithValue(m.seq,d);r.uniformsList=v,r.dynamicUniforms=o.WebGLUniforms.splitDynamic(v,d)}function w(e){e.side!==o.DoubleSide?ke.enable(Te.CULL_FACE):ke.disable(Te.CULL_FACE),ke.setFlipSided(e.side===o.BackSide),e.transparent===!0?ke.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):ke.setBlending(o.NoBlending),ke.setDepthFunc(e.depthFunc),ke.setDepthTest(e.depthTest),ke.setDepthWrite(e.depthWrite),ke.setColorWrite(e.colorWrite),ke.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function x(e,t,n,r){le=0;var i=Le.get(n);if(be){if(we||e!==oe){var a=e===oe&&n.id===re;_e.setState(n.clippingPlanes,n.clipShadows,e,i,a)}void 0!==i.numClippingPlanes&&i.numClippingPlanes!==_e.numPlanes&&(n.needsUpdate=!0)}void 0===i.program&&(n.needsUpdate=!0),void 0!==i.lightsHash&&i.lightsHash!==Ce.hash&&(n.needsUpdate=!0),n.needsUpdate&&(b(n,t,r),n.needsUpdate=!1);var s=!1,u=!1,l=!1,c=i.program,h=c.getUniforms(),f=i.__webglShader.uniforms;if(c.id!==ee&&(Te.useProgram(c.program),ee=c.id,s=!0,u=!0,l=!0),n.id!==re&&(re=n.id,u=!0),s||e!==oe){if(h.set(Te,e,"projectionMatrix"),Re.logarithmicDepthBuffer&&h.setValue(Te,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),e!==oe&&(oe=e,u=!0,l=!0),n instanceof o.ShaderMaterial||n instanceof o.MeshPhongMaterial||n instanceof o.MeshStandardMaterial||n.envMap){var p=h.map.cameraPosition;void 0!==p&&p.setValue(Te,Me.setFromMatrixPosition(e.matrixWorld))}(n instanceof o.MeshPhongMaterial||n instanceof o.MeshLambertMaterial||n instanceof o.MeshBasicMaterial||n instanceof o.MeshStandardMaterial||n instanceof o.ShaderMaterial||n.skinning)&&h.setValue(Te,"viewMatrix",e.matrixWorldInverse),h.set(Te,$,"toneMappingExposure"),h.set(Te,$,"toneMappingWhitePoint")}if(n.skinning){h.setOptional(Te,r,"bindMatrix"),h.setOptional(Te,r,"bindMatrixInverse");var d=r.skeleton;d&&(Re.floatVertexTextures&&d.useVertexTexture?(h.set(Te,d,"boneTexture"),h.set(Te,d,"boneTextureWidth"),h.set(Te,d,"boneTextureHeight")):h.setOptional(Te,d,"boneMatrices"))}u&&(n.lights&&k(f,l),t&&n.fog&&T(f,t),(n instanceof o.MeshBasicMaterial||n instanceof o.MeshLambertMaterial||n instanceof o.MeshPhongMaterial||n instanceof o.MeshStandardMaterial||n instanceof o.MeshDepthMaterial)&&E(f,n),n instanceof o.LineBasicMaterial?M(f,n):n instanceof o.LineDashedMaterial?(M(f,n),C(f,n)):n instanceof o.PointsMaterial?S(f,n):n instanceof o.MeshLambertMaterial?P(f,n):n instanceof o.MeshPhongMaterial?O(f,n):n instanceof o.MeshPhysicalMaterial?R(f,n):n instanceof o.MeshStandardMaterial?A(f,n):n instanceof o.MeshDepthMaterial?n.displacementMap&&(f.displacementMap.value=n.displacementMap,f.displacementScale.value=n.displacementScale,f.displacementBias.value=n.displacementBias):n instanceof o.MeshNormalMaterial&&(f.opacity.value=n.opacity),o.WebGLUniforms.upload(Te,i.uniformsList,f,$)),h.set(Te,r,"modelViewMatrix"),h.set(Te,r,"normalMatrix"),h.setValue(Te,"modelMatrix",r.matrixWorld);var m=i.dynamicUniforms;return null!==m&&(o.WebGLUniforms.evalDynamic(m,f,r,e),o.WebGLUniforms.upload(Te,m,f,$)),c}function E(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;if(t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n){n instanceof o.WebGLRenderTarget&&(n=n.texture);var r=n.offset,i=n.repeat;e.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap instanceof o.CubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}function M(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function C(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function S(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*de,e.scale.value=.5*N.clientHeight,e.map.value=t.map,null!==t.map){var n=t.map.offset,r=t.map.repeat;e.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}}function T(e,t){e.fogColor.value=t.color,t instanceof o.Fog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t instanceof o.FogExp2&&(e.fogDensity.value=t.density)}function P(e,t){t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function O(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function A(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function R(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,A(e,t)}function k(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function L(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];i.castShadow&&(Ce.shadows[t++]=i)}Ce.shadows.length=t}function D(e,t){var n,r,i,a,s,u,l,c=0,h=0,f=0,p=t.matrixWorldInverse,d=0,m=0,v=0,g=0;for(n=0,r=e.length;n<r;n++)if(i=e[n],a=i.color,s=i.intensity,u=i.distance,l=i.shadow&&i.shadow.map?i.shadow.map.texture:null,i instanceof o.AmbientLight)c+=a.r*s,h+=a.g*s,f+=a.b*s;else if(i instanceof o.DirectionalLight){var y=Ne.get(i);y.color.copy(i.color).multiplyScalar(i.intensity),y.direction.setFromMatrixPosition(i.matrixWorld),Me.setFromMatrixPosition(i.target.matrixWorld),y.direction.sub(Me),y.direction.transformDirection(p),y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),Ce.directionalShadowMap[d]=l,Ce.directionalShadowMatrix[d]=i.shadow.matrix,Ce.directional[d++]=y}else if(i instanceof o.SpotLight){var y=Ne.get(i);y.position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(p),y.color.copy(a).multiplyScalar(s),y.distance=u,y.direction.setFromMatrixPosition(i.matrixWorld),Me.setFromMatrixPosition(i.target.matrixWorld),y.direction.sub(Me),y.direction.transformDirection(p),y.coneCos=Math.cos(i.angle),y.penumbraCos=Math.cos(i.angle*(1-i.penumbra)),y.decay=0===i.distance?0:i.decay,y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),Ce.spotShadowMap[v]=l,Ce.spotShadowMatrix[v]=i.shadow.matrix,Ce.spot[v++]=y}else if(i instanceof o.PointLight){var y=Ne.get(i);y.position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(p),y.color.copy(i.color).multiplyScalar(i.intensity),y.distance=i.distance,y.decay=0===i.distance?0:i.decay,y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),Ce.pointShadowMap[m]=l,void 0===Ce.pointShadowMatrix[m]&&(Ce.pointShadowMatrix[m]=new o.Matrix4),Me.setFromMatrixPosition(i.matrixWorld).negate(),Ce.pointShadowMatrix[m].identity().setPosition(Me),Ce.point[m++]=y}else if(i instanceof o.HemisphereLight){var y=Ne.get(i);y.direction.setFromMatrixPosition(i.matrixWorld),y.direction.transformDirection(p),y.direction.normalize(),y.skyColor.copy(i.color).multiplyScalar(s),y.groundColor.copy(i.groundColor).multiplyScalar(s),Ce.hemi[g++]=y}Ce.ambient[0]=c,Ce.ambient[1]=h,Ce.ambient[2]=f,Ce.directional.length=d,Ce.spot.length=v,Ce.point.length=m,Ce.hemi.length=g,Ce.hash=d+","+m+","+v+","+g+","+Ce.shadows.length}function I(){var e=le;return e>=Re.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Re.maxTextures),le+=1,e}function j(e){var t;if(e===o.RepeatWrapping)return Te.REPEAT;if(e===o.ClampToEdgeWrapping)return Te.CLAMP_TO_EDGE;if(e===o.MirroredRepeatWrapping)return Te.MIRRORED_REPEAT;if(e===o.NearestFilter)return Te.NEAREST;if(e===o.NearestMipMapNearestFilter)return Te.NEAREST_MIPMAP_NEAREST;if(e===o.NearestMipMapLinearFilter)return Te.NEAREST_MIPMAP_LINEAR;if(e===o.LinearFilter)return Te.LINEAR;if(e===o.LinearMipMapNearestFilter)return Te.LINEAR_MIPMAP_NEAREST;if(e===o.LinearMipMapLinearFilter)return Te.LINEAR_MIPMAP_LINEAR;if(e===o.UnsignedByteType)return Te.UNSIGNED_BYTE;if(e===o.UnsignedShort4444Type)return Te.UNSIGNED_SHORT_4_4_4_4;if(e===o.UnsignedShort5551Type)return Te.UNSIGNED_SHORT_5_5_5_1;if(e===o.UnsignedShort565Type)return Te.UNSIGNED_SHORT_5_6_5;if(e===o.ByteType)return Te.BYTE;if(e===o.ShortType)return Te.SHORT;if(e===o.UnsignedShortType)return Te.UNSIGNED_SHORT;if(e===o.IntType)return Te.INT;if(e===o.UnsignedIntType)return Te.UNSIGNED_INT;if(e===o.FloatType)return Te.FLOAT;if(t=Ae.get("OES_texture_half_float"),null!==t&&e===o.HalfFloatType)return t.HALF_FLOAT_OES;if(e===o.AlphaFormat)return Te.ALPHA;if(e===o.RGBFormat)return Te.RGB;if(e===o.RGBAFormat)return Te.RGBA;if(e===o.LuminanceFormat)return Te.LUMINANCE;if(e===o.LuminanceAlphaFormat)return Te.LUMINANCE_ALPHA;if(e===o.DepthFormat)return Te.DEPTH_COMPONENT;if(e===o.AddEquation)return Te.FUNC_ADD;if(e===o.SubtractEquation)return Te.FUNC_SUBTRACT;if(e===o.ReverseSubtractEquation)return Te.FUNC_REVERSE_SUBTRACT;if(e===o.ZeroFactor)return Te.ZERO;if(e===o.OneFactor)return Te.ONE;if(e===o.SrcColorFactor)return Te.SRC_COLOR;if(e===o.OneMinusSrcColorFactor)return Te.ONE_MINUS_SRC_COLOR;if(e===o.SrcAlphaFactor)return Te.SRC_ALPHA;if(e===o.OneMinusSrcAlphaFactor)return Te.ONE_MINUS_SRC_ALPHA;if(e===o.DstAlphaFactor)return Te.DST_ALPHA;if(e===o.OneMinusDstAlphaFactor)return Te.ONE_MINUS_DST_ALPHA;if(e===o.DstColorFactor)return Te.DST_COLOR;if(e===o.OneMinusDstColorFactor)return Te.ONE_MINUS_DST_COLOR;if(e===o.SrcAlphaSaturateFactor)return Te.SRC_ALPHA_SATURATE;if(t=Ae.get("WEBGL_compressed_texture_s3tc"),null!==t){if(e===o.RGB_S3TC_DXT1_Format)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===o.RGBA_S3TC_DXT1_Format)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===o.RGBA_S3TC_DXT3_Format)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===o.RGBA_S3TC_DXT5_Format)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t=Ae.get("WEBGL_compressed_texture_pvrtc"),null!==t){if(e===o.RGB_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===o.RGB_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===o.RGBA_PVRTC_4BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===o.RGBA_PVRTC_2BPPV1_Format)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t=Ae.get("WEBGL_compressed_texture_etc1"),null!==t&&e===o.RGB_ETC1_Format)return t.COMPRESSED_RGB_ETC1_WEBGL;if(t=Ae.get("EXT_blend_minmax"),null!==t){if(e===o.MinEquation)return t.MIN_EXT;if(e===o.MaxEquation)return t.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",o.REVISION),e=e||{};var N=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),B=void 0!==e.context?e.context:null,U=void 0!==e.alpha&&e.alpha,F=void 0===e.depth||e.depth,V=void 0===e.stencil||e.stencil,z=void 0!==e.antialias&&e.antialias,G=void 0===e.premultipliedAlpha||e.premultipliedAlpha,H=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,W=[],q=[],X=-1,Y=[],K=-1,Z=new Float32Array(8),Q=[],J=[];this.domElement=N,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=o.LinearToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var $=this,ee=null,te=null,ne=null,re=-1,ie="",oe=null,ae=new o.Vector4,se=null,ue=new o.Vector4,le=0,ce=new o.Color(0),he=0,fe=N.width,pe=N.height,de=1,me=new o.Vector4(0,0,fe,pe),ve=!1,ge=new o.Vector4(0,0,fe,pe),ye=new o.Frustum,_e=new o.WebGLClipping,be=!1,we=!1,xe=new o.Sphere,Ee=new o.Matrix4,Me=new o.Vector3,Ce={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Se={calls:0,vertices:0,faces:0,points:0};this.info={render:Se,memory:{geometries:0,textures:0},programs:null};var Te;try{var Pe={alpha:U,depth:F,stencil:V,antialias:z,premultipliedAlpha:G,preserveDrawingBuffer:H};if(Te=B||N.getContext("webgl",Pe)||N.getContext("experimental-webgl",Pe),null===Te)throw null!==N.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===Te.getShaderPrecisionFormat&&(Te.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),N.addEventListener("webglcontextlost",a,!1)}catch(Oe){console.error("THREE.WebGLRenderer: "+Oe)}var Ae=new o.WebGLExtensions(Te);Ae.get("WEBGL_depth_texture"),Ae.get("OES_texture_float"),Ae.get("OES_texture_float_linear"),Ae.get("OES_texture_half_float"),Ae.get("OES_texture_half_float_linear"),Ae.get("OES_standard_derivatives"),Ae.get("ANGLE_instanced_arrays"),Ae.get("OES_element_index_uint")&&(o.BufferGeometry.MaxIndex=4294967296);var Re=new o.WebGLCapabilities(Te,Ae,e),ke=new o.WebGLState(Te,Ae,j),Le=new o.WebGLProperties,De=new o.WebGLTextures(Te,Ae,ke,Le,Re,j,this.info),Ie=new o.WebGLObjects(Te,Le,this.info),je=new o.WebGLPrograms(this,Re),Ne=new o.WebGLLights;this.info.programs=je.programs;var Be=new o.WebGLBufferRenderer(Te,Ae,Se),Ue=new o.WebGLIndexedBufferRenderer(Te,Ae,Se),Fe=new o.OrthographicCamera((-1),1,1,(-1),0,1),Ve=new o.PerspectiveCamera,ze=new o.Mesh(new o.PlaneBufferGeometry(2,2),new o.MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1})),Ge=o.ShaderLib.cube,He=new o.Mesh(new o.BoxBufferGeometry(5,5,5),new o.ShaderMaterial({uniforms:Ge.uniforms,vertexShader:Ge.vertexShader,fragmentShader:Ge.fragmentShader,side:o.BackSide,depthTest:!1,depthWrite:!1,fog:!1}));r(),this.context=Te,this.capabilities=Re,this.extensions=Ae,this.properties=Le,this.state=ke;var We=new o.WebGLShadowMap(this,Ce,Ie,Re);this.shadowMap=We;var qe=new o.SpritePlugin(this,Q),Xe=new o.LensFlarePlugin(this,J);this.getContext=function(){return Te},this.getContextAttributes=function(){return Te.getContextAttributes()},this.forceContextLoss=function(){Ae.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return Re.getMaxAnisotropy()},this.getPrecision=function(){return Re.precision},this.getPixelRatio=function(){return de},this.setPixelRatio=function(e){void 0!==e&&(de=e,this.setSize(ge.z,ge.w,!1))},this.getSize=function(){return{width:fe,height:pe}},this.setSize=function(e,t,n){fe=e,pe=t,N.width=e*de,N.height=t*de,n!==!1&&(N.style.width=e+"px",N.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,r){ke.viewport(ge.set(e,t,n,r))},this.setScissor=function(e,t,n,r){ke.scissor(me.set(e,t,n,r))},this.setScissorTest=function(e){ke.setScissorTest(ve=e)},this.getClearColor=function(){return ce},this.setClearColor=function(e,t){ce.set(e),he=void 0!==t?t:1,n(ce.r,ce.g,ce.b,he)},this.getClearAlpha=function(){return he},this.setClearAlpha=function(e){he=e,n(ce.r,ce.g,ce.b,he)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=Te.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=Te.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=Te.STENCIL_BUFFER_BIT),Te.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.resetGLState=i,this.dispose=function(){Y=[],K=-1,q=[],X=-1,N.removeEventListener("webglcontextlost",a,!1)},this.renderBufferImmediate=function(e,t,n){ke.initAttributes();var r=Le.get(e);e.hasPositions&&!r.position&&(r.position=Te.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=Te.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=Te.createBuffer()),e.hasColors&&!r.color&&(r.color=Te.createBuffer());var i=t.getAttributes();if(e.hasPositions&&(Te.bindBuffer(Te.ARRAY_BUFFER,r.position),Te.bufferData(Te.ARRAY_BUFFER,e.positionArray,Te.DYNAMIC_DRAW),ke.enableAttribute(i.position),Te.vertexAttribPointer(i.position,3,Te.FLOAT,!1,0,0)),e.hasNormals){if(Te.bindBuffer(Te.ARRAY_BUFFER,r.normal),"MeshPhongMaterial"!==n.type&&"MeshStandardMaterial"!==n.type&&"MeshPhysicalMaterial"!==n.type&&n.shading===o.FlatShading)for(var a=0,s=3*e.count;a<s;a+=9){var u=e.normalArray,l=(u[a+0]+u[a+3]+u[a+6])/3,c=(u[a+1]+u[a+4]+u[a+7])/3,h=(u[a+2]+u[a+5]+u[a+8])/3;u[a+0]=l,u[a+1]=c,u[a+2]=h,u[a+3]=l,u[a+4]=c,u[a+5]=h,u[a+6]=l,u[a+7]=c,u[a+8]=h}Te.bufferData(Te.ARRAY_BUFFER,e.normalArray,Te.DYNAMIC_DRAW),ke.enableAttribute(i.normal),Te.vertexAttribPointer(i.normal,3,Te.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(Te.bindBuffer(Te.ARRAY_BUFFER,r.uv),Te.bufferData(Te.ARRAY_BUFFER,e.uvArray,Te.DYNAMIC_DRAW),ke.enableAttribute(i.uv),Te.vertexAttribPointer(i.uv,2,Te.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==o.NoColors&&(Te.bindBuffer(Te.ARRAY_BUFFER,r.color),Te.bufferData(Te.ARRAY_BUFFER,e.colorArray,Te.DYNAMIC_DRAW),ke.enableAttribute(i.color),Te.vertexAttribPointer(i.color,3,Te.FLOAT,!1,0,0)),ke.disableUnusedAttributes(),Te.drawArrays(Te.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,n,r,i,a,s){w(i);var u=x(e,n,i,a),l=!1,f=r.id+"_"+u.id+"_"+i.wireframe;f!==ie&&(ie=f,l=!0);var p=a.morphTargetInfluences;if(void 0!==p){for(var d=[],m=0,v=p.length;m<v;m++){var g=p[m];d.push([g,m])}d.sort(h),d.length>8&&(d.length=8);for(var y=r.morphAttributes,m=0,v=d.length;m<v;m++){var g=d[m];if(Z[m]=g[0],0!==g[0]){var _=g[1];i.morphTargets===!0&&y.position&&r.addAttribute("morphTarget"+m,y.position[_]),i.morphNormals===!0&&y.normal&&r.addAttribute("morphNormal"+m,y.normal[_])}else i.morphTargets===!0&&r.removeAttribute("morphTarget"+m),i.morphNormals===!0&&r.removeAttribute("morphNormal"+m)}u.getUniforms().setValue(Te,"morphTargetInfluences",Z),l=!0}var _=r.index,b=r.attributes.position;i.wireframe===!0&&(_=Ie.getWireframeAttribute(r));var E;null!==_?(E=Ue,E.setIndex(_)):E=Be,l&&(c(i,u,r),null!==_&&Te.bindBuffer(Te.ELEMENT_ARRAY_BUFFER,Ie.getAttributeBuffer(_)));var M=0,C=1/0;null!==_?C=_.count:void 0!==b&&(C=b.count);var S=r.drawRange.start,T=r.drawRange.count,P=null!==s?s.start:0,O=null!==s?s.count:1/0,A=Math.max(M,S,P),R=Math.min(M+C,S+T,P+O)-1,k=Math.max(0,R-A+1);if(a instanceof o.Mesh)if(i.wireframe===!0)ke.setLineWidth(i.wireframeLinewidth*t()),E.setMode(Te.LINES);else switch(a.drawMode){case o.TrianglesDrawMode:E.setMode(Te.TRIANGLES);break;case o.TriangleStripDrawMode:E.setMode(Te.TRIANGLE_STRIP);break;case o.TriangleFanDrawMode:E.setMode(Te.TRIANGLE_FAN)}else if(a instanceof o.Line){var L=i.linewidth;void 0===L&&(L=1),ke.setLineWidth(L*t()),a instanceof o.LineSegments?E.setMode(Te.LINES):E.setMode(Te.LINE_STRIP)}else a instanceof o.Points&&E.setMode(Te.POINTS);r instanceof o.InstancedBufferGeometry?r.maxInstancedCount>0&&E.renderInstances(r,A,k):E.render(A,k)},this.render=function(e,t,r,i){if(t instanceof o.Camera==!1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var a=e.fog;ie="",re=-1,oe=null,e.autoUpdate===!0&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),Ee.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ye.setFromMatrix(Ee),W.length=0,X=-1,K=-1,Q.length=0,J.length=0,we=this.localClippingEnabled,be=_e.init(this.clippingPlanes,we,t),y(e,t),q.length=X+1,Y.length=K+1,$.sortObjects===!0&&(q.sort(f),Y.sort(p)),be&&_e.beginShadows(),L(W),We.render(e,t),D(W,t),be&&_e.endShadows(),Se.calls=0,Se.vertices=0,Se.faces=0,Se.points=0,void 0===r&&(r=null),this.setRenderTarget(r);var s=e.background;if(null===s?n(ce.r,ce.g,ce.b,he):s instanceof o.Color&&n(s.r,s.g,s.b,1),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),s instanceof o.CubeTexture?(Ve.projectionMatrix.copy(t.projectionMatrix),Ve.matrixWorld.extractRotation(t.matrixWorld),Ve.matrixWorldInverse.getInverse(Ve.matrixWorld),He.material.uniforms.tCube.value=s,He.modelViewMatrix.multiplyMatrices(Ve.matrixWorldInverse,He.matrixWorld),Ie.update(He),$.renderBufferDirect(Ve,null,He.geometry,He.material,He,null)):s instanceof o.Texture&&(ze.material.map=s,Ie.update(ze),$.renderBufferDirect(Fe,null,ze.geometry,ze.material,ze,null)),e.overrideMaterial){var u=e.overrideMaterial;_(q,t,a,u),_(Y,t,a,u)}else ke.setBlending(o.NoBlending),_(q,t,a),_(Y,t,a);qe.render(e,t),Xe.render(e,t,ue),r&&De.updateRenderTargetMipmap(r),ke.setDepthTest(!0),ke.setDepthWrite(!0),ke.setColorWrite(!0)},this.setFaceCulling=function(e,t){ke.setCullFace(e),ke.setFlipSided(t===o.FrontFaceDirectionCW)},this.allocTextureUnit=I,this.setTexture2D=function(){var e=!1;return function(t,n){t instanceof o.WebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),De.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),De.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t instanceof o.WebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t instanceof o.CubeTexture||Array.isArray(t.image)&&6===t.image.length?De.setTextureCube(t,n):De.setTextureCubeDynamic(t,n)}}(),this.getCurrentRenderTarget=function(){return te},this.setRenderTarget=function(e){te=e,e&&void 0===Le.get(e).__webglFramebuffer&&De.setupRenderTarget(e);var t,n=e instanceof o.WebGLRenderTargetCube;if(e){var r=Le.get(e);t=n?r.__webglFramebuffer[e.activeCubeFace]:r.__webglFramebuffer,ae.copy(e.scissor),se=e.scissorTest,ue.copy(e.viewport)}else t=null,ae.copy(me).multiplyScalar(de),se=ve,ue.copy(ge).multiplyScalar(de);if(ne!==t&&(Te.bindFramebuffer(Te.FRAMEBUFFER,t),ne=t),ke.scissor(ae),ke.setScissorTest(se),ke.viewport(ue),n){var i=Le.get(e.texture);Te.framebufferTexture2D(Te.FRAMEBUFFER,Te.COLOR_ATTACHMENT0,Te.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,a){if(e instanceof o.WebGLRenderTarget==!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=Le.get(e).__webglFramebuffer;if(s){var u=!1;s!==ne&&(Te.bindFramebuffer(Te.FRAMEBUFFER,s),u=!0);try{var l=e.texture;if(l.format!==o.RGBAFormat&&j(l.format)!==Te.getParameter(Te.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l.type===o.UnsignedByteType||j(l.type)===Te.getParameter(Te.IMPLEMENTATION_COLOR_READ_TYPE)||l.type===o.FloatType&&Ae.get("WEBGL_color_buffer_float")||l.type===o.HalfFloatType&&Ae.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Te.checkFramebufferStatus(Te.FRAMEBUFFER)===Te.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&Te.readPixels(t,n,r,i,j(l.format),j(l.type),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&Te.bindFramebuffer(Te.FRAMEBUFFER,ne)}}}},o.WebGLRenderTarget=function(e,t,n){this.uuid=o.Math.generateUUID(),this.width=e,this.height=t,this.scissor=new o.Vector4(0,0,e,t),this.scissorTest=!1,this.viewport=new o.Vector4(0,0,e,t),n=n||{},void 0===n.minFilter&&(n.minFilter=o.LinearFilter),this.texture=new o.Texture((void 0),(void 0),n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=null},Object.assign(o.WebGLRenderTarget.prototype,o.EventDispatcher.prototype,{setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),o.WebGLRenderTargetCube=function(e,t,n){o.WebGLRenderTarget.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0},o.WebGLRenderTargetCube.prototype=Object.create(o.WebGLRenderTarget.prototype),o.WebGLRenderTargetCube.prototype.constructor=o.WebGLRenderTargetCube,o.WebGLBufferRenderer=function(e,t,n){
function r(e){s=e}function i(t,r){e.drawArrays(s,t,r),n.calls++,n.vertices+=r,s===e.TRIANGLES&&(n.faces+=r/3)}function a(r){var i=t.get("ANGLE_instanced_arrays");if(null===i)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var a=r.attributes.position,u=0;a instanceof o.InterleavedBufferAttribute?(u=a.data.count,i.drawArraysInstancedANGLE(s,0,u,r.maxInstancedCount)):(u=a.count,i.drawArraysInstancedANGLE(s,0,u,r.maxInstancedCount)),n.calls++,n.vertices+=u*r.maxInstancedCount,s===e.TRIANGLES&&(n.faces+=r.maxInstancedCount*u/3)}var s;this.setMode=r,this.render=i,this.renderInstances=a},o.WebGLClipping=function(){function e(){c.value!==r&&(c.value=r,c.needsUpdate=i>0),n.numPlanes=i}function t(e,t,r,i){var o=null!==e?e.length:0,a=null;if(0!==o){if(a=c.value,i!==!0||null===a){var s=r+4*o,h=t.matrixWorldInverse;l.getNormalMatrix(h),(null===a||a.length<s)&&(a=new Float32Array(s));for(var f=0,p=r;f!==o;++f,p+=4)u.copy(e[f]).applyMatrix4(h,l),u.normal.toArray(a,p),a[p+3]=u.constant}c.value=a,c.needsUpdate=!0}return n.numPlanes=o,a}var n=this,r=null,i=0,a=!1,s=!1,u=new o.Plane,l=new o.Matrix3,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.init=function(e,n,o){var s=0!==e.length||n||0!==i||a;return a=n,r=t(e,o,0),i=e.length,s},this.beginShadows=function(){s=!0,t(null)},this.endShadows=function(){s=!1,e()},this.setState=function(n,o,u,l,h){if(!a||null===n||0===n.length||s&&!o)s?t(null):e();else{var f=s?0:i,p=4*f,d=l.clippingState||null;c.value=d,d=t(n,u,p,h);for(var m=0;m!==p;++m)d[m]=r[m];l.clippingState=d,this.numPlanes+=f}}},o.WebGLIndexedBufferRenderer=function(e,t,n){function r(e){s=e}function i(n){n.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(u=e.UNSIGNED_INT,l=4):(u=e.UNSIGNED_SHORT,l=2)}function o(t,r){e.drawElements(s,r,u,t*l),n.calls++,n.vertices+=r,s===e.TRIANGLES&&(n.faces+=r/3)}function a(r,i,o){var a=t.get("ANGLE_instanced_arrays");return null===a?void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(a.drawElementsInstancedANGLE(s,o,u,i*l,r.maxInstancedCount),n.calls++,n.vertices+=o*r.maxInstancedCount,void(s===e.TRIANGLES&&(n.faces+=r.maxInstancedCount*o/3)))}var s,u,l;this.setMode=r,this.setIndex=i,this.render=o,this.renderInstances=a},o.WebGLExtensions=function(e){var t={};this.get=function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=e.getExtension("WEBGL_compressed_texture_etc1");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}},o.WebGLCapabilities=function(e,t,n){function r(){if(void 0!==o)return o;var n=t.get("EXT_texture_filter_anisotropic");return o=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o;this.getMaxAnisotropy=r,this.getMaxPrecision=i,this.precision=void 0!==n.precision?n.precision:"highp",this.logarithmicDepthBuffer=void 0!==n.logarithmicDepthBuffer&&n.logarithmicDepthBuffer,this.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.maxVertexTextures=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxCubemapSize=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),this.maxAttributes=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.maxVertexUniforms=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),this.maxVaryings=e.getParameter(e.MAX_VARYING_VECTORS),this.maxFragmentUniforms=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),this.vertexTextures=this.maxVertexTextures>0,this.floatFragmentTextures=!!t.get("OES_texture_float"),this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;var a=i(this.precision);a!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",a,"instead."),this.precision=a),this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!t.get("EXT_frag_depth"))},o.WebGLGeometries=function(e,t,n){function r(e){var t=e.geometry;if(void 0!==c[t.id])return c[t.id];t.addEventListener("dispose",i);var r;return t instanceof o.BufferGeometry?r=t:t instanceof o.Geometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new o.BufferGeometry).setFromObject(e)),r=t._bufferGeometry),c[t.id]=r,n.memory.geometries++,r}function i(e){var r=e.target,o=c[r.id];null!==o.index&&s(o.index),u(o.attributes),r.removeEventListener("dispose",i),delete c[r.id];var a=t.get(r);a.wireframe&&s(a.wireframe),t.delete(r);var l=t.get(o);l.wireframe&&s(l.wireframe),t.delete(o),n.memory.geometries--}function a(e){return e instanceof o.InterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function s(t){var n=a(t);void 0!==n&&(e.deleteBuffer(n),l(t))}function u(e){for(var t in e)s(e[t])}function l(e){e instanceof o.InterleavedBufferAttribute?t.delete(e.data):t.delete(e)}var c={};this.get=r},o.WebGLLights=function(){var e={};this.get=function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new o.Vector3,color:new o.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o.Vector2};break;case"SpotLight":n={position:new o.Vector3,direction:new o.Vector3,color:new o.Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o.Vector2};break;case"PointLight":n={position:new o.Vector3,color:new o.Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o.Vector2};break;case"HemisphereLight":n={direction:new o.Vector3,skyColor:new o.Color,groundColor:new o.Color}}return e[t.id]=n,n}},o.WebGLObjects=function(e,t,n){function r(t){var n=h.get(t);t.geometry instanceof o.Geometry&&n.updateFromObject(t);var r=n.index,a=n.attributes;null!==r&&i(r,e.ELEMENT_ARRAY_BUFFER);for(var s in a)i(a[s],e.ARRAY_BUFFER);var u=n.morphAttributes;for(var s in u)for(var l=u[s],c=0,f=l.length;c<f;c++)i(l[c],e.ARRAY_BUFFER);return n}function i(e,n){var r=e instanceof o.InterleavedBufferAttribute?e.data:e,i=t.get(r);void 0===i.__webglBuffer?a(i,r,n):i.version!==r.version&&s(i,r,n)}function a(t,n,r){t.__webglBuffer=e.createBuffer(),e.bindBuffer(r,t.__webglBuffer);var i=n.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;e.bufferData(r,n.array,i),t.version=n.version}function s(t,n,r){e.bindBuffer(r,t.__webglBuffer),n.dynamic===!1||n.updateRange.count===-1?e.bufferSubData(r,0,n.array):0===n.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,n.updateRange.offset*n.array.BYTES_PER_ELEMENT,n.array.subarray(n.updateRange.offset,n.updateRange.offset+n.updateRange.count)),n.updateRange.count=0),t.version=n.version}function u(e){return e instanceof o.InterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function l(n){var r=t.get(n);if(void 0!==r.wireframe)return r.wireframe;var a=[],s=n.index,u=n.attributes,l=u.position;if(null!==s)for(var h={},f=s.array,p=0,d=f.length;p<d;p+=3){var m=f[p+0],v=f[p+1],g=f[p+2];c(h,m,v)&&a.push(m,v),c(h,v,g)&&a.push(v,g),c(h,g,m)&&a.push(g,m)}else for(var f=u.position.array,p=0,d=f.length/3-1;p<d;p+=3){var m=p+0,v=p+1,g=p+2;a.push(m,v,v,g,g,m)}var y=l.count>65535?Uint32Array:Uint16Array,_=new o.BufferAttribute(new y(a),1);return i(_,e.ELEMENT_ARRAY_BUFFER),r.wireframe=_,_}function c(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];return void 0===i?(e[t]=[n],!0):i.indexOf(n)===-1&&(i.push(n),!0)}var h=new o.WebGLGeometries(e,t,n);this.getAttributeBuffer=u,this.getWireframeAttribute=l,this.update=r},o.WebGLProgram=function(){function e(e){switch(e){case o.LinearEncoding:return["Linear","( value )"];case o.sRGBEncoding:return["sRGB","( value )"];case o.RGBEEncoding:return["RGBE","( value )"];case o.RGBM7Encoding:return["RGBM","( value, 7.0 )"];case o.RGBM16Encoding:return["RGBM","( value, 16.0 )"];case o.RGBDEncoding:return["RGBD","( value, 256.0 )"];case o.GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function t(t,n){var r=e(n);return"vec4 "+t+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function n(t,n){var r=e(n);return"vec4 "+t+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function r(e,t){var n;switch(t){case o.LinearToneMapping:n="Linear";break;case o.ReinhardToneMapping:n="Reinhard";break;case o.Uncharted2ToneMapping:n="Uncharted2";break;case o.CineonToneMapping:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function i(e,t,n){e=e||{};var r=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(u).join("\n")}function a(e){var t=[];for(var n in e){var r=e[n];r!==!1&&t.push("#define "+n+" "+r)}return t.join("\n")}function s(e,t,n){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<i;o++){var a=e.getActiveAttrib(t,o),s=a.name;r[s]=e.getAttribLocation(t,s)}return r}function u(e){return""!==e}function l(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function c(e){function t(e,t){var n=o.ShaderChunk[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return c(n)}var n=/#include +<([\w\d.]+)>/g;return e.replace(n,t)}function h(e){function t(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}var n=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(n,t)}var f=0;return function(e,p,d,m){var v=e.context,g=d.extensions,y=d.defines,_=d.__webglShader.vertexShader,b=d.__webglShader.fragmentShader,w="SHADOWMAP_TYPE_BASIC";m.shadowMapType===o.PCFShadowMap?w="SHADOWMAP_TYPE_PCF":m.shadowMapType===o.PCFSoftShadowMap&&(w="SHADOWMAP_TYPE_PCF_SOFT");var x="ENVMAP_TYPE_CUBE",E="ENVMAP_MODE_REFLECTION",M="ENVMAP_BLENDING_MULTIPLY";if(m.envMap){switch(d.envMap.mapping){case o.CubeReflectionMapping:case o.CubeRefractionMapping:x="ENVMAP_TYPE_CUBE";break;case o.CubeUVReflectionMapping:case o.CubeUVRefractionMapping:x="ENVMAP_TYPE_CUBE_UV";break;case o.EquirectangularReflectionMapping:case o.EquirectangularRefractionMapping:x="ENVMAP_TYPE_EQUIREC";break;case o.SphericalReflectionMapping:x="ENVMAP_TYPE_SPHERE"}switch(d.envMap.mapping){case o.CubeRefractionMapping:case o.EquirectangularRefractionMapping:E="ENVMAP_MODE_REFRACTION"}switch(d.combine){case o.MultiplyOperation:M="ENVMAP_BLENDING_MULTIPLY";break;case o.MixOperation:M="ENVMAP_BLENDING_MIX";break;case o.AddOperation:M="ENVMAP_BLENDING_ADD"}}var C,S,T=e.gammaFactor>0?e.gammaFactor:1,P=i(g,m,e.extensions),O=a(y),A=v.createProgram();d instanceof o.RawShaderMaterial?(C=[O].filter(u).join("\n"),S=[O].filter(u).join("\n")):(C=["precision "+m.precision+" float;","precision "+m.precision+" int;","#define SHADER_NAME "+d.__webglShader.name,O,m.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+T,"#define MAX_BONES "+m.maxBones,m.map?"#define USE_MAP":"",m.envMap?"#define USE_ENVMAP":"",m.envMap?"#define "+E:"",m.lightMap?"#define USE_LIGHTMAP":"",m.aoMap?"#define USE_AOMAP":"",m.emissiveMap?"#define USE_EMISSIVEMAP":"",m.bumpMap?"#define USE_BUMPMAP":"",m.normalMap?"#define USE_NORMALMAP":"",m.displacementMap&&m.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",m.specularMap?"#define USE_SPECULARMAP":"",m.roughnessMap?"#define USE_ROUGHNESSMAP":"",m.metalnessMap?"#define USE_METALNESSMAP":"",m.alphaMap?"#define USE_ALPHAMAP":"",m.vertexColors?"#define USE_COLOR":"",m.flatShading?"#define FLAT_SHADED":"",m.skinning?"#define USE_SKINNING":"",m.useVertexTexture?"#define BONE_TEXTURE":"",m.morphTargets?"#define USE_MORPHTARGETS":"",m.morphNormals&&m.flatShading===!1?"#define USE_MORPHNORMALS":"",m.doubleSided?"#define DOUBLE_SIDED":"",m.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+m.numClippingPlanes,m.shadowMapEnabled?"#define USE_SHADOWMAP":"",m.shadowMapEnabled?"#define "+w:"",m.sizeAttenuation?"#define USE_SIZEATTENUATION":"",m.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",m.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(u).join("\n"),S=[P,"precision "+m.precision+" float;","precision "+m.precision+" int;","#define SHADER_NAME "+d.__webglShader.name,O,m.alphaTest?"#define ALPHATEST "+m.alphaTest:"","#define GAMMA_FACTOR "+T,m.useFog&&m.fog?"#define USE_FOG":"",m.useFog&&m.fogExp?"#define FOG_EXP2":"",m.map?"#define USE_MAP":"",m.envMap?"#define USE_ENVMAP":"",m.envMap?"#define "+x:"",m.envMap?"#define "+E:"",m.envMap?"#define "+M:"",m.lightMap?"#define USE_LIGHTMAP":"",m.aoMap?"#define USE_AOMAP":"",m.emissiveMap?"#define USE_EMISSIVEMAP":"",m.bumpMap?"#define USE_BUMPMAP":"",m.normalMap?"#define USE_NORMALMAP":"",m.specularMap?"#define USE_SPECULARMAP":"",m.roughnessMap?"#define USE_ROUGHNESSMAP":"",m.metalnessMap?"#define USE_METALNESSMAP":"",m.alphaMap?"#define USE_ALPHAMAP":"",m.vertexColors?"#define USE_COLOR":"",m.flatShading?"#define FLAT_SHADED":"",m.doubleSided?"#define DOUBLE_SIDED":"",m.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+m.numClippingPlanes,m.shadowMapEnabled?"#define USE_SHADOWMAP":"",m.shadowMapEnabled?"#define "+w:"",m.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",m.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",m.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",m.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",m.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",m.toneMapping!==o.NoToneMapping?"#define TONE_MAPPING":"",m.toneMapping!==o.NoToneMapping?o.ShaderChunk.tonemapping_pars_fragment:"",m.toneMapping!==o.NoToneMapping?r("toneMapping",m.toneMapping):"",m.outputEncoding||m.mapEncoding||m.envMapEncoding||m.emissiveMapEncoding?o.ShaderChunk.encodings_pars_fragment:"",m.mapEncoding?t("mapTexelToLinear",m.mapEncoding):"",m.envMapEncoding?t("envMapTexelToLinear",m.envMapEncoding):"",m.emissiveMapEncoding?t("emissiveMapTexelToLinear",m.emissiveMapEncoding):"",m.outputEncoding?n("linearToOutputTexel",m.outputEncoding):"",m.depthPacking?"#define DEPTH_PACKING "+d.depthPacking:"","\n"].filter(u).join("\n")),_=c(_,m),_=l(_,m),b=c(b,m),b=l(b,m),d instanceof o.ShaderMaterial==!1&&(_=h(_),b=h(b));var R=C+_,k=S+b,L=o.WebGLShader(v,v.VERTEX_SHADER,R),D=o.WebGLShader(v,v.FRAGMENT_SHADER,k);v.attachShader(A,L),v.attachShader(A,D),void 0!==d.index0AttributeName?v.bindAttribLocation(A,0,d.index0AttributeName):m.morphTargets===!0&&v.bindAttribLocation(A,0,"position"),v.linkProgram(A);var I=v.getProgramInfoLog(A),j=v.getShaderInfoLog(L),N=v.getShaderInfoLog(D),B=!0,U=!0;v.getProgramParameter(A,v.LINK_STATUS)===!1?(B=!1,console.error("THREE.WebGLProgram: shader error: ",v.getError(),"gl.VALIDATE_STATUS",v.getProgramParameter(A,v.VALIDATE_STATUS),"gl.getProgramInfoLog",I,j,N)):""!==I?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",I):""!==j&&""!==N||(U=!1),U&&(this.diagnostics={runnable:B,material:d,programLog:I,vertexShader:{log:j,prefix:C},fragmentShader:{log:N,prefix:S}}),v.deleteShader(L),v.deleteShader(D);var F;this.getUniforms=function(){return void 0===F&&(F=new o.WebGLUniforms(v,A,e)),F};var V;return this.getAttributes=function(){return void 0===V&&(V=s(v,A)),V},this.destroy=function(){v.deleteProgram(A),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=f++,this.code=p,this.usedTimes=1,this.program=A,this.vertexShader=L,this.fragmentShader=D,this}}(),o.WebGLPrograms=function(e,t){function n(e){if(t.floatVertexTextures&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var n=t.maxVertexUniforms,r=Math.floor((n-20)/4),i=r;return void 0!==e&&e instanceof o.SkinnedMesh&&(i=Math.min(e.skeleton.bones.length,i),i<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+i+" (try OpenGL instead of ANGLE)")),i}function r(e,t){var n;return e?e instanceof o.Texture?n=e.encoding:e instanceof o.WebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=o.LinearEncoding,n===o.LinearEncoding&&t&&(n=o.GammaEncoding),n}var i=[],a={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},s=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","depthPacking"];this.getParameters=function(i,s,u,l,c){var h=a[i.type],f=n(c),p=e.getPrecision();null!==i.precision&&(p=t.getMaxPrecision(i.precision),p!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",p,"instead."));var d=e.getCurrentRenderTarget(),m={shaderID:h,precision:p,supportsVertexTextures:t.vertexTextures,outputEncoding:r(d?d.texture:null,e.gammaOutput),map:!!i.map,mapEncoding:r(i.map,e.gammaInput),envMap:!!i.envMap,envMapMode:i.envMap&&i.envMap.mapping,envMapEncoding:r(i.envMap,e.gammaInput),envMapCubeUV:!!i.envMap&&(i.envMap.mapping===o.CubeUVReflectionMapping||i.envMap.mapping===o.CubeUVRefractionMapping),lightMap:!!i.lightMap,aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:r(i.emissiveMap,e.gammaInput),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,combine:i.combine,vertexColors:i.vertexColors,fog:!!u,useFog:i.fog,fogExp:u instanceof o.FogExp2,flatShading:i.shading===o.FlatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:i.skinning,maxBones:f,useVertexTexture:t.floatVertexTextures&&c&&c.skeleton&&c.skeleton.useVertexTexture,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numHemiLights:s.hemi.length,numClippingPlanes:l,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&s.shadows.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===o.DoubleSide,flipSided:i.side===o.BackSide,depthPacking:void 0!==i.depthPacking&&i.depthPacking};return m},this.getProgramCode=function(e,t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);for(var i=0;i<s.length;i++)n.push(t[s[i]]);return n.join()},this.acquireProgram=function(t,n,r){for(var a,s=0,u=i.length;s<u;s++){var l=i[s];if(l.code===r){a=l,++a.usedTimes;break}}return void 0===a&&(a=new o.WebGLProgram(e,r,t,n),i.push(a)),a},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i},o.WebGLProperties=function(){var e={};this.get=function(t){var n=t.uuid,r=e[n];return void 0===r&&(r={},e[n]=r),r},this.delete=function(t){delete e[t.uuid]},this.clear=function(){e={}}},o.WebGLShader=function(){function e(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}return function(t,n,r){var i=t.createShader(n);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",n===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(i),e(r)),i}}(),o.WebGLShadowMap=function(e,t,n,r){function i(t,n,r,i){var a=t.geometry,s=null,u=b,l=t.customDepthMaterial;if(r&&(u=w,l=t.customDistanceMaterial),l)s=l;else{var c=!1;n.morphTargets&&(a instanceof o.BufferGeometry?c=a.morphAttributes&&a.morphAttributes.position&&a.morphAttributes.position.length>0:a instanceof o.Geometry&&(c=a.morphTargets&&a.morphTargets.length>0));var h=t instanceof o.SkinnedMesh&&n.skinning,f=0;c&&(f|=g),h&&(f|=y),s=u[f]}if(e.localClippingEnabled&&n.clipShadows===!0&&0!==n.clippingPlanes.length){var p=s.uuid,d=n.uuid,m=x[p];void 0===m&&(m={},x[p]=m);var v=m[d];void 0===v&&(v=s.clone(),m[d]=v),s=v}s.visible=n.visible,s.wireframe=n.wireframe;var _=n.side;return D.renderSingleSided&&_==o.DoubleSide&&(_=o.FrontSide),D.renderReverseSided&&(_===o.FrontSide?_=o.BackSide:_===o.BackSide&&(_=o.FrontSide)),s.side=_,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,r&&void 0!==s.uniforms.lightPos&&s.uniforms.lightPos.value.copy(i),s}function a(e,t,n){if(e.visible!==!1){if(e.layers.test(t.layers)&&(e instanceof o.Mesh||e instanceof o.Line||e instanceof o.Points)&&e.castShadow&&(e.frustumCulled===!1||l.intersectsObject(e)===!0)){var r=e.material;r.visible===!0&&(e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),v.push(e))}for(var i=e.children,s=0,u=i.length;s<u;s++)a(i[s],t,n)}}var s=e.context,u=e.state,l=new o.Frustum,c=new o.Matrix4,h=t.shadows,f=new o.Vector2,p=new o.Vector2(r.maxTextureSize,r.maxTextureSize),d=new o.Vector3,m=new o.Vector3,v=[],g=1,y=2,_=(g|y)+1,b=new Array(_),w=new Array(_),x={},E=[new o.Vector3(1,0,0),new o.Vector3((-1),0,0),new o.Vector3(0,0,1),new o.Vector3(0,0,(-1)),new o.Vector3(0,1,0),new o.Vector3(0,(-1),0)],M=[new o.Vector3(0,1,0),new o.Vector3(0,1,0),new o.Vector3(0,1,0),new o.Vector3(0,1,0),new o.Vector3(0,0,1),new o.Vector3(0,0,(-1))],C=[new o.Vector4,new o.Vector4,new o.Vector4,new o.Vector4,new o.Vector4,new o.Vector4],S=new o.MeshDepthMaterial;S.depthPacking=o.RGBADepthPacking,S.clipping=!0;for(var T=o.ShaderLib.distanceRGBA,P=o.UniformsUtils.clone(T.uniforms),O=0;O!==_;++O){var A=0!==(O&g),R=0!==(O&y),k=S.clone();k.morphTargets=A,k.skinning=R,b[O]=k;var L=new o.ShaderMaterial({defines:{USE_SHADOWMAP:""},uniforms:P,vertexShader:T.vertexShader,fragmentShader:T.fragmentShader,morphTargets:A,skinning:R,clipping:!0});w[O]=L}var D=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=o.PCFShadowMap,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,r){if(D.enabled!==!1&&(D.autoUpdate!==!1||D.needsUpdate!==!1)&&0!==h.length){u.clearColor(1,1,1,1),u.disable(s.BLEND),u.setDepthTest(!0),u.setScissorTest(!1);for(var g,y,_=0,b=h.length;_<b;_++){var w=h[_],x=w.shadow;if(void 0!==x){var S=x.camera;if(f.copy(x.mapSize),f.min(p),w instanceof o.PointLight){g=6,y=!0;var T=f.x,P=f.y;C[0].set(2*T,P,T,P),C[1].set(0,P,T,P),C[2].set(3*T,P,T,P),C[3].set(T,P,T,P),C[4].set(3*T,0,T,P),C[5].set(T,0,T,P),f.x*=4,f.y*=2}else g=1,y=!1;if(null===x.map){var O={minFilter:o.NearestFilter,magFilter:o.NearestFilter,format:o.RGBAFormat};x.map=new o.WebGLRenderTarget(f.x,f.y,O),S.updateProjectionMatrix()}x instanceof o.SpotLightShadow&&x.update(w);var A=x.map,R=x.matrix;m.setFromMatrixPosition(w.matrixWorld),S.position.copy(m),e.setRenderTarget(A),e.clear();for(var k=0;k<g;k++){if(y){d.copy(S.position),d.add(E[k]),S.up.copy(M[k]),S.lookAt(d);var L=C[k];u.viewport(L)}else d.setFromMatrixPosition(w.target.matrixWorld),S.lookAt(d);S.updateMatrixWorld(),S.matrixWorldInverse.getInverse(S.matrixWorld),R.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),R.multiply(S.projectionMatrix),R.multiply(S.matrixWorldInverse),c.multiplyMatrices(S.projectionMatrix,S.matrixWorldInverse),l.setFromMatrix(c),v.length=0,a(t,r,S);for(var I=0,j=v.length;I<j;I++){var N=v[I],B=n.update(N),U=N.material;if(U instanceof o.MultiMaterial)for(var F=B.groups,V=U.materials,z=0,G=F.length;z<G;z++){var H=F[z],W=V[H.materialIndex];if(W.visible===!0){var q=i(N,W,y,m);e.renderBufferDirect(S,null,B,q,N,H)}}else{var q=i(N,U,y,m);e.renderBufferDirect(S,null,B,q,N,null)}}}}else console.warn("THREE.WebGLShadowMap:",w,"has no shadow.")}var X=e.getClearColor(),Y=e.getClearAlpha();e.setClearColor(X,Y),D.needsUpdate=!1}}},o.WebGLState=function(e,t,n){function r(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}var i=this;this.buffers={color:new o.WebGLColorBuffer(e,this),depth:new o.WebGLDepthBuffer(e,this),stencil:new o.WebGLStencilBuffer(e,this)};var a=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=new Uint8Array(a),u=new Uint8Array(a),l=new Uint8Array(a),c={},h=null,f=null,p=null,d=null,m=null,v=null,g=null,y=null,_=!1,b=null,w=null,x=null,E=null,M=null,C=null,S=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),T=null,P={},O=new o.Vector4,A=new o.Vector4,R={};R[e.TEXTURE_2D]=r(e.TEXTURE_2D,e.TEXTURE_2D,1),R[e.TEXTURE_CUBE_MAP]=r(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),this.init=function(){this.clearColor(0,0,0,1),this.clearDepth(1),this.clearStencil(0),this.enable(e.DEPTH_TEST),this.setDepthFunc(o.LessEqualDepth),this.setFlipSided(!1),this.setCullFace(o.CullFaceBack),this.enable(e.CULL_FACE),this.enable(e.BLEND),this.setBlending(o.NormalBlending)},this.initAttributes=function(){for(var e=0,t=s.length;e<t;e++)s[e]=0},this.enableAttribute=function(n){if(s[n]=1,0===u[n]&&(e.enableVertexAttribArray(n),u[n]=1),0!==l[n]){var r=t.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(n,0),l[n]=0}},this.enableAttributeAndDivisor=function(t,n,r){s[t]=1,0===u[t]&&(e.enableVertexAttribArray(t),u[t]=1),l[t]!==n&&(r.vertexAttribDivisorANGLE(t,n),l[t]=n)},this.disableUnusedAttributes=function(){for(var t=0,n=u.length;t!==n;++t)u[t]!==s[t]&&(e.disableVertexAttribArray(t),u[t]=0)},this.enable=function(t){c[t]!==!0&&(e.enable(t),c[t]=!0)},this.disable=function(t){c[t]!==!1&&(e.disable(t),c[t]=!1)},this.getCompressedTextureFormats=function(){if(null===h&&(h=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)h.push(n[r]);return h},this.setBlending=function(t,r,i,a,s,u,l,c){return t===o.NoBlending?(this.disable(e.BLEND),void(f=t)):(this.enable(e.BLEND),t===f&&c===_||(t===o.AdditiveBlending?c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===o.SubtractiveBlending?c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===o.MultiplyBlending?c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),f=t,_=c),void(t===o.CustomBlending?(s=s||r,u=u||i,l=l||a,r===p&&s===v||(e.blendEquationSeparate(n(r),n(s)),p=r,v=s),i===d&&a===m&&u===g&&l===y||(e.blendFuncSeparate(n(i),n(a),n(u),n(l)),d=i,m=a,g=u,y=l)):(p=null,d=null,m=null,v=null,g=null,y=null)))},this.setColorWrite=function(e){this.buffers.color.setMask(e)},this.setDepthTest=function(e){this.buffers.depth.setTest(e)},this.setDepthWrite=function(e){this.buffers.depth.setMask(e)},this.setDepthFunc=function(e){this.buffers.depth.setFunc(e)},this.setStencilTest=function(e){this.buffers.stencil.setTest(e)},this.setStencilWrite=function(e){this.buffers.stencil.setMask(e)},this.setStencilFunc=function(e,t,n){this.buffers.stencil.setFunc(e,t,n)},this.setStencilOp=function(e,t,n){this.buffers.stencil.setOp(e,t,n)},this.setFlipSided=function(t){b!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),b=t)},this.setCullFace=function(t){t!==o.CullFaceNone?(this.enable(e.CULL_FACE),t!==w&&(t===o.CullFaceBack?e.cullFace(e.BACK):t===o.CullFaceFront?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):this.disable(e.CULL_FACE),w=t},this.setLineWidth=function(t){t!==x&&(e.lineWidth(t),x=t)},this.setPolygonOffset=function(t,n,r){t?(this.enable(e.POLYGON_OFFSET_FILL),E===n&&M===r||(e.polygonOffset(n,r),E=n,M=r)):this.disable(e.POLYGON_OFFSET_FILL);
},this.getScissorTest=function(){return C},this.setScissorTest=function(t){C=t,t?this.enable(e.SCISSOR_TEST):this.disable(e.SCISSOR_TEST)},this.activeTexture=function(t){void 0===t&&(t=e.TEXTURE0+S-1),T!==t&&(e.activeTexture(t),T=t)},this.bindTexture=function(t,n){null===T&&i.activeTexture();var r=P[T];void 0===r&&(r={type:void 0,texture:void 0},P[T]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||R[t]),r.type=t,r.texture=n)},this.compressedTexImage2D=function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error(t)}},this.texImage2D=function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error(t)}},this.clearColor=function(e,t,n,r){this.buffers.color.setClear(e,t,n,r)},this.clearDepth=function(e){this.buffers.depth.setClear(e)},this.clearStencil=function(e){this.buffers.stencil.setClear(e)},this.scissor=function(t){O.equals(t)===!1&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},this.viewport=function(t){A.equals(t)===!1&&(e.viewport(t.x,t.y,t.z,t.w),A.copy(t))},this.reset=function(){for(var t=0;t<u.length;t++)1===u[t]&&(e.disableVertexAttribArray(t),u[t]=0);c={},h=null,T=null,P={},f=null,b=null,w=null,this.buffers.color.reset(),this.buffers.depth.reset(),this.buffers.stencil.reset()}},o.WebGLColorBuffer=function(e,t){var n=!1,r=new o.Vector4,i=null,a=new o.Vector4;this.setMask=function(t){i===t||n||(e.colorMask(t,t,t,t),i=t)},this.setLocked=function(e){n=e},this.setClear=function(t,n,i,o){r.set(t,n,i,o),a.equals(r)===!1&&(e.clearColor(t,n,i,o),a.copy(r))},this.reset=function(){n=!1,i=null,a=new o.Vector4}},o.WebGLDepthBuffer=function(e,t){var n=!1,r=null,i=null,a=null;this.setTest=function(n){n?t.enable(e.DEPTH_TEST):t.disable(e.DEPTH_TEST)},this.setMask=function(t){r===t||n||(e.depthMask(t),r=t)},this.setFunc=function(t){if(i!==t){if(t)switch(t){case o.NeverDepth:e.depthFunc(e.NEVER);break;case o.AlwaysDepth:e.depthFunc(e.ALWAYS);break;case o.LessDepth:e.depthFunc(e.LESS);break;case o.LessEqualDepth:e.depthFunc(e.LEQUAL);break;case o.EqualDepth:e.depthFunc(e.EQUAL);break;case o.GreaterEqualDepth:e.depthFunc(e.GEQUAL);break;case o.GreaterDepth:e.depthFunc(e.GREATER);break;case o.NotEqualDepth:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);i=t}},this.setLocked=function(e){n=e},this.setClear=function(t){a!==t&&(e.clearDepth(t),a=t)},this.reset=function(){n=!1,r=null,i=null,a=null}},o.WebGLStencilBuffer=function(e,t){var n=!1,r=null,i=null,o=null,a=null,s=null,u=null,l=null,c=null;this.setTest=function(n){n?t.enable(e.STENCIL_TEST):t.disable(e.STENCIL_TEST)},this.setMask=function(t){r===t||n||(e.stencilMask(t),r=t)},this.setFunc=function(t,n,r){i===t&&o===n&&a===r||(e.stencilFunc(t,n,r),i=t,o=n,a=r)},this.setOp=function(t,n,r){s===t&&u===n&&l===r||(e.stencilOp(t,n,r),s=t,u=n,l=r)},this.setLocked=function(e){n=e},this.setClear=function(t){c!==t&&(e.clearStencil(t),c=t)},this.reset=function(){n=!1,r=null,i=null,o=null,a=null,s=null,u=null,l=null,c=null}},o.WebGLTextures=function(e,t,n,r,i,a,s){function u(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n);var i=r.getContext("2d");return i.drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function l(e){return o.Math.isPowerOfTwo(e.width)&&o.Math.isPowerOfTwo(e.height)}function c(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=o.Math.nearestPowerOfTwo(e.width),t.height=o.Math.nearestPowerOfTwo(e.height);var n=t.getContext("2d");return n.drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}function h(e){return e.wrapS!==o.ClampToEdgeWrapping||e.wrapT!==o.ClampToEdgeWrapping||e.minFilter!==o.NearestFilter&&e.minFilter!==o.LinearFilter}function f(t){return t===o.NearestFilter||t===o.NearestMipMapNearestFilter||t===o.NearestMipMapLinearFilter?e.NEAREST:e.LINEAR}function p(e){var t=e.target;t.removeEventListener("dispose",p),m(t),P.textures--}function d(e){var t=e.target;t.removeEventListener("dispose",d),v(t),P.textures--}function m(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.delete(t)}function v(t){var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t instanceof o.WebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[a]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.delete(t.texture),r.delete(t)}}function g(t,i){var o=r.get(t);if(t.version>0&&o.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(a.complete!==!1)return void w(o,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function y(t,s){var c=r.get(t);if(6===t.image.length)if(t.version>0&&c.__version!==t.version){c.__image__webglTextureCube||(t.addEventListener("dispose",p),c.__image__webglTextureCube=e.createTexture(),P.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var h=t instanceof o.CompressedTexture,f=t.image[0]instanceof o.DataTexture,d=[],m=0;m<6;m++)h||f?d[m]=f?t.image[m].image:t.image[m]:d[m]=u(t.image[m],i.maxCubemapSize);var v=d[0],g=l(v),y=a(t.format),_=a(t.type);b(e.TEXTURE_CUBE_MAP,t,g);for(var m=0;m<6;m++)if(h)for(var w,x=d[m].mipmaps,E=0,M=x.length;E<M;E++)w=x[E],t.format!==o.RGBAFormat&&t.format!==o.RGBFormat?n.getCompressedTextureFormats().indexOf(y)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,E,y,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,E,y,w.width,w.height,0,y,_,w.data);else f?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,d[m].width,d[m].height,0,y,_,d[m].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,y,_,d[m]);t.generateMipmaps&&g&&e.generateMipmap(e.TEXTURE_CUBE_MAP),c.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)}function _(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)}function b(n,s,u){var l;if(u?(e.texParameteri(n,e.TEXTURE_WRAP_S,a(s.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,a(s.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,a(s.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,a(s.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),s.wrapS===o.ClampToEdgeWrapping&&s.wrapT===o.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",s),e.texParameteri(n,e.TEXTURE_MAG_FILTER,f(s.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,f(s.minFilter)),s.minFilter!==o.NearestFilter&&s.minFilter!==o.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",s)),l=t.get("EXT_texture_filter_anisotropic")){if(s.type===o.FloatType&&null===t.get("OES_texture_float_linear"))return;if(s.type===o.HalfFloatType&&null===t.get("OES_texture_half_float_linear"))return;(s.anisotropy>1||r.get(s).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy)}}function w(t,r,s){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",p),t.__webglTexture=e.createTexture(),P.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var f=u(r.image,i.maxTextureSize);h(r)&&l(f)===!1&&(f=c(f));var d=l(f),m=a(r.format),v=a(r.type);b(e.TEXTURE_2D,r,d);var g,y=r.mipmaps;if(r instanceof o.DepthTexture){var _=e.DEPTH_COMPONENT;if(r.type===o.FloatType){if(!O)throw new Error("Float Depth Texture only supported in WebGL2.0");_=e.DEPTH_COMPONENT32F}else O&&(_=e.DEPTH_COMPONENT16);n.texImage2D(e.TEXTURE_2D,0,_,f.width,f.height,0,m,v,null)}else if(r instanceof o.DataTexture)if(y.length>0&&d){for(var w=0,x=y.length;w<x;w++)g=y[w],n.texImage2D(e.TEXTURE_2D,w,m,g.width,g.height,0,m,v,g.data);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,m,f.width,f.height,0,m,v,f.data);else if(r instanceof o.CompressedTexture)for(var w=0,x=y.length;w<x;w++)g=y[w],r.format!==o.RGBAFormat&&r.format!==o.RGBFormat?n.getCompressedTextureFormats().indexOf(m)>-1?n.compressedTexImage2D(e.TEXTURE_2D,w,m,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,w,m,g.width,g.height,0,m,v,g.data);else if(y.length>0&&d){for(var w=0,x=y.length;w<x;w++)g=y[w],n.texImage2D(e.TEXTURE_2D,w,m,m,v,g);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,m,m,v,f);r.generateMipmaps&&d&&e.generateMipmap(e.TEXTURE_2D),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function x(t,i,o,s){var u=a(i.texture.format),l=a(i.texture.type);n.texImage2D(s,0,u,i.width,i.height,0,u,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,o,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function E(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function M(t,n){var i=n instanceof o.WebGLRenderTargetCube;if(i)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!(n.depthTexture instanceof o.DepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),g(n.depthTexture,0);var a=r.get(n.depthTexture).__webglTexture;e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0)}function C(t){var n=r.get(t),i=t instanceof o.WebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");M(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=e.createRenderbuffer(),E(n.__webglDepthbuffer[a],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),E(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function S(t){var i=r.get(t),a=r.get(t.texture);t.addEventListener("dispose",d),a.__webglTexture=e.createTexture(),P.textures++;var s=t instanceof o.WebGLRenderTargetCube,u=l(t);if(s){i.__webglFramebuffer=[];for(var c=0;c<6;c++)i.__webglFramebuffer[c]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){n.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture),b(e.TEXTURE_CUBE_MAP,t.texture,u);for(var c=0;c<6;c++)x(i.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);t.texture.generateMipmaps&&u&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,a.__webglTexture),b(e.TEXTURE_2D,t.texture,u),x(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&u&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&C(t)}function T(t){var i=t.texture;if(i.generateMipmaps&&l(t)&&i.minFilter!==o.NearestFilter&&i.minFilter!==o.LinearFilter){var a=t instanceof o.WebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=r.get(i).__webglTexture;n.bindTexture(a,s),e.generateMipmap(a),n.bindTexture(a,null)}}var P=s.memory,O="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;this.setTexture2D=g,this.setTextureCube=y,this.setTextureCubeDynamic=_,this.setupRenderTarget=S,this.updateRenderTargetMipmap=T},o.WebGLUniforms=function(){var e=new o.Texture,t=new o.CubeTexture,n=function(){this.seq=[],this.map={}},r=[],i=[],a=function(e,t,n){var i=e[0];if(i<=0||i>0)return e;var o=t*n,a=r[o];if(void 0===a&&(a=new Float32Array(o),r[o]=a),0!==t){i.toArray(a,0);for(var s=1,u=0;s!==t;++s)u+=n,e[s].toArray(a,u)}return a},s=function(e,t){var n=i[t];void 0===n&&(n=new Int32Array(t),i[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n},u=function(e,t){e.uniform1f(this.addr,t)},l=function(e,t){e.uniform1i(this.addr,t)},c=function(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)},h=function(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)},f=function(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)},p=function(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)},d=function(e,t){e.uniformMatrix3fv(this.addr,!1,t.elements||t)},m=function(e,t){e.uniformMatrix4fv(this.addr,!1,t.elements||t)},v=function(t,n,r){var i=r.allocTextureUnit();t.uniform1i(this.addr,i),r.setTexture2D(n||e,i)},g=function(e,n,r){var i=r.allocTextureUnit();e.uniform1i(this.addr,i),r.setTextureCube(n||t,i)},y=function(e,t){e.uniform2iv(this.addr,t)},_=function(e,t){e.uniform3iv(this.addr,t)},b=function(e,t){e.uniform4iv(this.addr,t)},w=function(e){switch(e){case 5126:return u;case 35664:return c;case 35665:return h;case 35666:return f;case 35674:return p;case 35675:return d;case 35676:return m;case 35678:return v;case 35680:return g;case 5124:case 35670:return l;case 35667:case 35671:return y;case 35668:case 35672:return _;case 35669:case 35673:return b}},x=function(e,t){e.uniform1fv(this.addr,t)},E=function(e,t){e.uniform1iv(this.addr,t)},M=function(e,t){e.uniform2fv(this.addr,a(t,this.size,2))},C=function(e,t){e.uniform3fv(this.addr,a(t,this.size,3))},S=function(e,t){e.uniform4fv(this.addr,a(t,this.size,4))},T=function(e,t){e.uniformMatrix2fv(this.addr,!1,a(t,this.size,4))},P=function(e,t){e.uniformMatrix3fv(this.addr,!1,a(t,this.size,9))},O=function(e,t){e.uniformMatrix4fv(this.addr,!1,a(t,this.size,16))},A=function(t,n,r){var i=n.length,o=s(r,i);t.uniform1iv(this.addr,o);for(var a=0;a!==i;++a)r.setTexture2D(n[a]||e,o[a])},R=function(e,n,r){var i=n.length,o=s(r,i);e.uniform1iv(this.addr,o);for(var a=0;a!==i;++a)r.setTextureCube(n[a]||t,o[a])},k=function(e){switch(e){case 5126:return x;case 35664:return M;case 35665:return C;case 35666:return S;case 35674:return T;case 35675:return P;case 35676:return O;case 35678:return A;case 35680:return R;case 5124:case 35670:return E;case 35667:case 35671:return y;case 35668:case 35672:return _;case 35669:case 35673:return b}},L=function(e,t,n){this.id=e,this.addr=n,this.setValue=w(t.type)},D=function(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=k(t.type)},I=function(e){this.id=e,n.call(this)};I.prototype.setValue=function(e,t){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var o=n[r];o.setValue(e,t[o.id])}};var j=/([\w\d_]+)(\])?(\[|\.)?/g,N=function(e,t){e.seq.push(t),e.map[t.id]=t},B=function(e,t,n){var r=e.name,i=r.length;for(j.lastIndex=0;;){var o=j.exec(r),a=j.lastIndex,s=o[1],u="]"===o[2],l=o[3];if(u&&(s=0|s),void 0===l||"["===l&&a+2===i){N(n,void 0===l?new L(s,e,t):new D(s,e,t));break}var c=n.map,h=c[s];void 0===h&&(h=new I(s),N(n,h)),n=h}},U=function(e,t,r){n.call(this),this.renderer=r;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),o=0;o!==i;++o){var a=e.getActiveUniform(t,o),s=a.name,u=e.getUniformLocation(t,s);B(a,u,this)}};return U.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},U.prototype.set=function(e,t,n){var r=this.map[n];void 0!==r&&r.setValue(e,t[n],this.renderer)},U.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},U.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];s.needsUpdate!==!1&&a.setValue(e,s.value,r)}},U.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n},U.splitDynamic=function(e,t){for(var n=null,r=e.length,i=0,o=0;o!==r;++o){var a=e[o],s=t[a.id];s&&s.dynamic===!0?(null===n&&(n=[]),n.push(a)):(i<o&&(e[i]=a),++i)}return i<r&&(e.length=i),n},U.evalDynamic=function(e,t,n,r){for(var i=0,o=e.length;i!==o;++i){var a=t[e[i].id],s=a.onUpdateCallback;void 0!==s&&s.call(a,n,r)}},U}(),o.LensFlarePlugin=function(e,t){function n(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);i=p.createBuffer(),a=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,i),p.bufferData(p.ARRAY_BUFFER,e,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,a),p.bufferData(p.ELEMENT_ARRAY_BUFFER,t,p.STATIC_DRAW),h=p.createTexture(),f=p.createTexture(),d.bindTexture(p.TEXTURE_2D,h),p.texImage2D(p.TEXTURE_2D,0,p.RGB,16,16,0,p.RGB,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),d.bindTexture(p.TEXTURE_2D,f),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,16,16,0,p.RGBA,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},u=r(s),l={vertex:p.getAttribLocation(u,"position"),uv:p.getAttribLocation(u,"uv")},c={renderType:p.getUniformLocation(u,"renderType"),map:p.getUniformLocation(u,"map"),occlusionMap:p.getUniformLocation(u,"occlusionMap"),opacity:p.getUniformLocation(u,"opacity"),color:p.getUniformLocation(u,"color"),scale:p.getUniformLocation(u,"scale"),rotation:p.getUniformLocation(u,"rotation"),screenPosition:p.getUniformLocation(u,"screenPosition")}}function r(t){var n=p.createProgram(),r=p.createShader(p.FRAGMENT_SHADER),i=p.createShader(p.VERTEX_SHADER),o="precision "+e.getPrecision()+" float;\n";return p.shaderSource(r,o+t.fragmentShader),p.shaderSource(i,o+t.vertexShader),p.compileShader(r),p.compileShader(i),p.attachShader(n,r),p.attachShader(n,i),p.linkProgram(n),n}var i,a,s,u,l,c,h,f,p=e.context,d=e.state;this.render=function(r,s,m){if(0!==t.length){var v=new o.Vector3,g=m.w/m.z,y=.5*m.z,_=.5*m.w,b=16/m.w,w=new o.Vector2(b*g,b),x=new o.Vector3(1,1,0),E=new o.Vector2(1,1),M=new o.Box2;M.min.set(0,0),M.max.set(m.z-16,m.w-16),void 0===u&&n(),p.useProgram(u),d.initAttributes(),d.enableAttribute(l.vertex),d.enableAttribute(l.uv),d.disableUnusedAttributes(),p.uniform1i(c.occlusionMap,0),p.uniform1i(c.map,1),p.bindBuffer(p.ARRAY_BUFFER,i),p.vertexAttribPointer(l.vertex,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(l.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,a),d.disable(p.CULL_FACE),d.setDepthWrite(!1);for(var C=0,S=t.length;C<S;C++){b=16/m.w,w.set(b*g,b);var T=t[C];if(v.set(T.matrixWorld.elements[12],T.matrixWorld.elements[13],T.matrixWorld.elements[14]),v.applyMatrix4(s.matrixWorldInverse),v.applyProjection(s.projectionMatrix),x.copy(v),E.x=m.x+x.x*y+y-8,E.y=m.y+x.y*_+_-8,M.containsPoint(E)===!0){d.activeTexture(p.TEXTURE0),d.bindTexture(p.TEXTURE_2D,null),d.activeTexture(p.TEXTURE1),d.bindTexture(p.TEXTURE_2D,h),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGB,E.x,E.y,16,16,0),p.uniform1i(c.renderType,0),p.uniform2f(c.scale,w.x,w.y),p.uniform3f(c.screenPosition,x.x,x.y,x.z),d.disable(p.BLEND),d.enable(p.DEPTH_TEST),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),d.activeTexture(p.TEXTURE0),d.bindTexture(p.TEXTURE_2D,f),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGBA,E.x,E.y,16,16,0),p.uniform1i(c.renderType,1),d.disable(p.DEPTH_TEST),d.activeTexture(p.TEXTURE1),d.bindTexture(p.TEXTURE_2D,h),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),T.positionScreen.copy(x),T.customUpdateCallback?T.customUpdateCallback(T):T.updateLensFlares(),p.uniform1i(c.renderType,2),d.enable(p.BLEND);for(var P=0,O=T.lensFlares.length;P<O;P++){var A=T.lensFlares[P];A.opacity>.001&&A.scale>.001&&(x.x=A.x,x.y=A.y,x.z=A.z,b=A.size*A.scale/m.w,w.x=b*g,w.y=b,p.uniform3f(c.screenPosition,x.x,x.y,x.z),p.uniform2f(c.scale,w.x,w.y),p.uniform1f(c.rotation,A.rotation),p.uniform1f(c.opacity,A.opacity),p.uniform3f(c.color,A.color.r,A.color.g,A.color.b),d.setBlending(A.blending,A.blendEquation,A.blendSrc,A.blendDst),e.setTexture2D(A.texture,1),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0))}}}d.enable(p.CULL_FACE),d.enable(p.DEPTH_TEST),d.setDepthWrite(!0),e.resetGLState()}}},o.SpritePlugin=function(e,t){function n(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);a=f.createBuffer(),s=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,a),f.bufferData(f.ARRAY_BUFFER,e,f.STATIC_DRAW),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),f.bufferData(f.ELEMENT_ARRAY_BUFFER,t,f.STATIC_DRAW),u=r(),l={position:f.getAttribLocation(u,"position"),uv:f.getAttribLocation(u,"uv")},c={uvOffset:f.getUniformLocation(u,"uvOffset"),uvScale:f.getUniformLocation(u,"uvScale"),rotation:f.getUniformLocation(u,"rotation"),scale:f.getUniformLocation(u,"scale"),color:f.getUniformLocation(u,"color"),map:f.getUniformLocation(u,"map"),opacity:f.getUniformLocation(u,"opacity"),modelViewMatrix:f.getUniformLocation(u,"modelViewMatrix"),projectionMatrix:f.getUniformLocation(u,"projectionMatrix"),fogType:f.getUniformLocation(u,"fogType"),fogDensity:f.getUniformLocation(u,"fogDensity"),fogNear:f.getUniformLocation(u,"fogNear"),fogFar:f.getUniformLocation(u,"fogFar"),fogColor:f.getUniformLocation(u,"fogColor"),alphaTest:f.getUniformLocation(u,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8,n.height=8;var i=n.getContext("2d");i.fillStyle="white",i.fillRect(0,0,8,8),h=new o.Texture(n),h.needsUpdate=!0}function r(){var t=f.createProgram(),n=f.createShader(f.VERTEX_SHADER),r=f.createShader(f.FRAGMENT_SHADER);return f.shaderSource(n,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),f.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),f.compileShader(n),f.compileShader(r),f.attachShader(t,n),f.attachShader(t,r),f.linkProgram(t),t}function i(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var a,s,u,l,c,h,f=e.context,p=e.state,d=new o.Vector3,m=new o.Quaternion,v=new o.Vector3;this.render=function(r,g){if(0!==t.length){void 0===u&&n(),f.useProgram(u),p.initAttributes(),p.enableAttribute(l.position),p.enableAttribute(l.uv),p.disableUnusedAttributes(),p.disable(f.CULL_FACE),p.enable(f.BLEND),f.bindBuffer(f.ARRAY_BUFFER,a),f.vertexAttribPointer(l.position,2,f.FLOAT,!1,16,0),f.vertexAttribPointer(l.uv,2,f.FLOAT,!1,16,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),f.uniformMatrix4fv(c.projectionMatrix,!1,g.projectionMatrix.elements),p.activeTexture(f.TEXTURE0),f.uniform1i(c.map,0);var y=0,_=0,b=r.fog;b?(f.uniform3f(c.fogColor,b.color.r,b.color.g,b.color.b),b instanceof o.Fog?(f.uniform1f(c.fogNear,b.near),f.uniform1f(c.fogFar,b.far),f.uniform1i(c.fogType,1),y=1,_=1):b instanceof o.FogExp2&&(f.uniform1f(c.fogDensity,b.density),f.uniform1i(c.fogType,2),y=2,_=2)):(f.uniform1i(c.fogType,0),y=0,_=0);for(var w=0,x=t.length;w<x;w++){var E=t[w];E.modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}t.sort(i);for(var M=[],w=0,x=t.length;w<x;w++){var E=t[w],C=E.material;if(C.visible!==!1){f.uniform1f(c.alphaTest,C.alphaTest),f.uniformMatrix4fv(c.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(d,m,v),M[0]=v.x,M[1]=v.y;var S=0;r.fog&&C.fog&&(S=_),y!==S&&(f.uniform1i(c.fogType,S),y=S),null!==C.map?(f.uniform2f(c.uvOffset,C.map.offset.x,C.map.offset.y),f.uniform2f(c.uvScale,C.map.repeat.x,C.map.repeat.y)):(f.uniform2f(c.uvOffset,0,0),f.uniform2f(c.uvScale,1,1)),f.uniform1f(c.opacity,C.opacity),f.uniform3f(c.color,C.color.r,C.color.g,C.color.b),f.uniform1f(c.rotation,C.rotation),f.uniform2fv(c.scale,M),p.setBlending(C.blending,C.blendEquation,C.blendSrc,C.blendDst),p.setDepthTest(C.depthTest),p.setDepthWrite(C.depthWrite),C.map?e.setTexture2D(C.map,0):e.setTexture2D(h,0),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0)}}p.enable(f.CULL_FACE),e.resetGLState()}}},Object.assign(o,{Face4:function(e,t,n,r,i,a,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new o.Face3(e,t,n,i,a,s)},LineStrip:0,LinePieces:1,MeshFaceMaterial:o.MultiMaterial,PointCloud:function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new o.Points(e,t)},Particle:o.Sprite,ParticleSystem:function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new o.Points(e,t)},PointCloudMaterial:function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new o.PointsMaterial(e)},ParticleBasicMaterial:function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new o.PointsMaterial(e)},ParticleSystemMaterial:function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new o.PointsMaterial(e)},Vertex:function(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new o.Vector3(e,t,n)}}),Object.assign(o.Box2.prototype,{empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)}}),Object.assign(o.Box3.prototype,{empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(o.Matrix3.prototype,{multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)}}),Object.assign(o.Matrix4.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),
this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(e){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(e){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(e){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(e){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(e,t){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}}),Object.assign(o.Plane.prototype,{isIntersectionLine:function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)}}),Object.assign(o.Quaternion.prototype,{multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)}}),Object.assign(o.Ray.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(o.Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)}}),Object.assign(o.Object3D.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(e){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(o.Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(e){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(o.LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),o.PerspectiveCamera.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(o.Light.prototype,{onlyShadow:{set:function(e){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(e){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(e){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(o.BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length}}}),Object.assign(o.BufferGeometry.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(o.BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(o.Material.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(e){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new o.Color}}}),Object.defineProperties(o.MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(e){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(o.ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),o.EventDispatcher.prototype=Object.assign(Object.create({constructor:o.EventDispatcher,apply:function(e){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(e,this)}}),o.EventDispatcher.prototype),Object.assign(o.WebGLRenderer.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(o.WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(o.WebGLShadowMap.prototype,{cullFace:{get:function(){return this.renderReverseSided?o.CullFaceFront:o.CullFaceBack},set:function(e){var t=e!==o.CullFaceBack;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(o.WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.assign(o.Audio.prototype,{load:function(e){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var t=this,n=new o.AudioLoader;return n.load(e,function(e){t.setBuffer(e)}),this}}),Object.assign(o.AudioAnalyser.prototype,{getData:function(e){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()}}),o.GeometryUtils={merge:function(e,t,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;t instanceof o.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},o.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new o.TextureLoader;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},loadTextureCube:function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new o.CubeTextureLoader;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},o.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},o.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},o.CurveUtils={tangentQuadraticBezier:function(e,t,n,r){return 2*(1-e)*(n-t)+2*e*(r-n)},tangentCubicBezier:function(e,t,n,r,i){return-3*t*(1-e)*(1-e)+3*n*(1-e)*(1-e)-6*e*n*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*i},tangentSpline:function(e,t,n,r,i){var o=6*e*e-6*e,a=3*e*e-4*e+1,s=-6*e*e+6*e,u=3*e*e-2*e;return o+a+s+u},interpolate:function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i,u=i*s;return(2*t-2*n+o+a)*u+(-3*t+3*n-2*o-a)*s+o*i+t}},o.SceneUtils={createMultiMaterialObject:function(e,t){for(var n=new o.Group,r=0,i=t.length;r<i;r++)n.add(new o.Mesh(e,t[r]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var r=new o.Matrix4;r.getInverse(n.matrixWorld),e.applyMatrix(r),t.remove(e),n.add(e)}},o.ShapeUtils={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},triangulate:function(){function e(e,t,n,r,i,o){var a,s,u,l,c,h,f,p,d;if(s=e[o[t]].x,u=e[o[t]].y,l=e[o[n]].x,c=e[o[n]].y,h=e[o[r]].x,f=e[o[r]].y,Number.EPSILON>(l-s)*(f-u)-(c-u)*(h-s))return!1;var m,v,g,y,_,b,w,x,E,M,C,S,T,P,O;for(m=h-l,v=f-c,g=s-h,y=u-f,_=l-s,b=c-u,a=0;a<i;a++)if(p=e[o[a]].x,d=e[o[a]].y,!(p===s&&d===u||p===l&&d===c||p===h&&d===f)&&(w=p-s,x=d-u,E=p-l,M=d-c,C=p-h,S=d-f,O=m*M-v*E,T=_*x-b*w,P=g*S-y*C,O>=-Number.EPSILON&&P>=-Number.EPSILON&&T>=-Number.EPSILON))return!1;return!0}return function(t,n){var r=t.length;if(r<3)return null;var i,a,s,u=[],l=[],c=[];if(o.ShapeUtils.area(t)>0)for(a=0;a<r;a++)l[a]=a;else for(a=0;a<r;a++)l[a]=r-1-a;var h=r,f=2*h;for(a=h-1;h>2;){if(f--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),n?c:u;if(i=a,h<=i&&(i=0),a=i+1,h<=a&&(a=0),s=a+1,h<=s&&(s=0),e(t,i,a,s,h,l)){var p,d,m,v,g;for(p=l[i],d=l[a],m=l[s],u.push([t[p],t[d],t[m]]),c.push([l[i],l[a],l[s]]),v=a,g=a+1;g<h;v++,g++)l[v]=l[g];h--,f=2*h}}return n?c:u}}(),triangulateShape:function(e,t){function n(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function r(e,t,n){return e.x!==t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function i(e,t,n,i,o){var a=t.x-e.x,s=t.y-e.y,u=i.x-n.x,l=i.y-n.y,c=e.x-n.x,h=e.y-n.y,f=s*u-a*l,p=s*c-a*h;if(Math.abs(f)>Number.EPSILON){var d;if(f>0){if(p<0||p>f)return[];if(d=l*c-u*h,d<0||d>f)return[]}else{if(p>0||p<f)return[];if(d=l*c-u*h,d>0||d<f)return[]}if(0===d)return!o||0!==p&&p!==f?[e]:[];if(d===f)return!o||0!==p&&p!==f?[t]:[];if(0===p)return[n];if(p===f)return[i];var m=d/f;return[{x:e.x+m*a,y:e.y+m*s}]}if(0!==p||l*c!==u*h)return[];var v=0===a&&0===s,g=0===u&&0===l;if(v&&g)return e.x!==n.x||e.y!==n.y?[]:[e];if(v)return r(n,i,e)?[e]:[];if(g)return r(e,t,n)?[n]:[];var y,_,b,w,x,E,M,C;return 0!==a?(e.x<t.x?(y=e,b=e.x,_=t,w=t.x):(y=t,b=t.x,_=e,w=e.x),n.x<i.x?(x=n,M=n.x,E=i,C=i.x):(x=i,M=i.x,E=n,C=n.x)):(e.y<t.y?(y=e,b=e.y,_=t,w=t.y):(y=t,b=t.y,_=e,w=e.y),n.y<i.y?(x=n,M=n.y,E=i,C=i.y):(x=i,M=i.y,E=n,C=n.y)),b<=M?w<M?[]:w===M?o?[]:[x]:w<=C?[x,_]:[x,E]:b>C?[]:b===C?o?[]:[y]:w<=C?[y,_]:[y,E]}function a(e,t,n,r){var i=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,u=r.x-e.x,l=r.y-e.y,c=i*s-o*a,h=i*l-o*u;if(Math.abs(c)>Number.EPSILON){var f=u*s-l*a;return c>0?h>=0&&f>=0:h>=0||f>=0}return h>0}function s(e,t){function n(e,t){var n=y.length-1,r=e-1;r<0&&(r=n);var i=e+1;i>n&&(i=0);var o=a(y[e],y[r],y[i],s[t]);if(!o)return!1;var u=s.length-1,l=t-1;l<0&&(l=u);var c=t+1;return c>u&&(c=0),o=a(s[t],s[l],s[c],y[e]),!!o}function r(e,t){var n,r,o;for(n=0;n<y.length;n++)if(r=n+1,r%=y.length,o=i(e,t,y[n],y[r],!0),o.length>0)return!0;return!1}function o(e,n){var r,o,a,s,u;for(r=0;r<_.length;r++)for(o=t[_[r]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,u=i(e,n,o[a],o[s],!0),u.length>0)return!0;return!1}for(var s,u,l,c,h,f,p,d,m,v,g,y=e.concat(),_=[],b=[],w=0,x=t.length;w<x;w++)_.push(w);for(var E=0,M=2*_.length;_.length>0;){if(M--,M<0){console.log("Infinite Loop! Holes left:"+_.length+", Probably Hole outside Shape!");break}for(l=E;l<y.length;l++){c=y[l],u=-1;for(var w=0;w<_.length;w++)if(f=_[w],p=c.x+":"+c.y+":"+f,void 0===b[p]){s=t[f];for(var C=0;C<s.length;C++)if(h=s[C],n(l,C)&&!r(c,h)&&!o(c,h)){u=C,_.splice(w,1),d=y.slice(0,l+1),m=y.slice(l),v=s.slice(u),g=s.slice(0,u+1),y=d.concat(v).concat(g).concat(m),E=l;break}if(u>=0)break;b[p]=!0}if(u>=0)break}}return y}n(e),t.forEach(n);for(var u,l,c,h,f,p,d={},m=e.concat(),v=0,g=t.length;v<g;v++)Array.prototype.push.apply(m,t[v]);for(u=0,l=m.length;u<l;u++)f=m[u].x+":"+m[u].y,void 0!==d[f]&&console.warn("THREE.ShapeUtils: Duplicate point",f,u),d[f]=u;var y=s(e,t),_=o.ShapeUtils.triangulate(y,!1);for(u=0,l=_.length;u<l;u++)for(h=_[u],c=0;c<3;c++)f=h[c].x+":"+h[c].y,p=d[f],void 0!==p&&(h[c]=p);return _.concat()},isClockWise:function(e){return o.ShapeUtils.area(e)<0},b2:function(){function e(e,t){var n=1-e;return n*n*t}function t(e,t){return 2*(1-e)*e*t}function n(e,t){return e*e*t}return function(r,i,o,a){return e(r,i)+t(r,o)+n(r,a)}}(),b3:function(){function e(e,t){var n=1-e;return n*n*n*t}function t(e,t){var n=1-e;return 3*n*n*e*t}function n(e,t){var n=1-e;return 3*n*e*e*t}function r(e,t){return e*e*e*t}return function(i,o,a,s,u){return e(i,o)+t(i,a)+n(i,s)+r(i,u)}}()},o.Curve=function(){},o.Curve.prototype={constructor:o.Curve,getPoint:function(e){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){e||(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){e||(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)t=this.getPoint(n/e),o+=t.distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t?t:e*r[o-1];for(var a,s=0,u=o-1;s<=u;)if(i=Math.floor(s+(u-s)/2),a=r[i]-n,a<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(i=u,r[i]===n){var l=i/(o-1);return l}var c=r[i],h=r[i+1],f=h-c,p=(n-c)/f,l=(i+p)/(o-1);return l},getTangent:function(e){var t=1e-4,n=e-t,r=e+t;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),a=o.clone().sub(i);return a.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)}},o.Curve.create=function(e,t){return e.prototype=Object.create(o.Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},o.CurvePath=function(){this.curves=[],this.autoClose=!1},o.CurvePath.prototype=Object.assign(Object.create(o.Curve.prototype),{constructor:o.CurvePath,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new o.LineCurve(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e||(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],s=a instanceof o.EllipseCurve?2*e:a instanceof o.LineCurve?1:a instanceof o.SplineCurve?e*a.points.length:e,u=a.getPoints(s),l=0;l<u.length;l++){var c=u[l];t&&t.equals(c)||(n.push(c),t=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new o.Geometry,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new o.Vector3(i.x,i.y,i.z||0))}return t}}),o.Font=function(e){this.data=e},Object.assign(o.Font.prototype,{generateShapes:function(e,t,n){function r(e){for(var n=String(e).split(""),r=t/a.resolution,o=0,s=[],u=0;u<n.length;u++){var l=i(n[u],r,o);o+=l.offset,s.push(l.path)}return s}function i(e,t,r){var i=a.glyphs[e]||a.glyphs["?"];if(i){var s,u,l,c,h,f,p,d,m,v,g,y=new o.ShapePath,_=[],b=o.ShapeUtils.b2,w=o.ShapeUtils.b3;if(i.o)for(var x=i._cachedOutline||(i._cachedOutline=i.o.split(" ")),E=0,M=x.length;E<M;){var C=x[E++];switch(C){case"m":s=x[E++]*t+r,u=x[E++]*t,y.moveTo(s,u);break;case"l":s=x[E++]*t+r,u=x[E++]*t,y.lineTo(s,u);break;case"q":if(l=x[E++]*t+r,c=x[E++]*t,p=x[E++]*t+r,d=x[E++]*t,y.quadraticCurveTo(p,d,l,c),g=_[_.length-1]){h=g.x,f=g.y;for(var S=1;S<=n;S++){var T=S/n;b(T,h,p,l),b(T,f,d,c)}}break;case"b":if(l=x[E++]*t+r,c=x[E++]*t,p=x[E++]*t+r,d=x[E++]*t,m=x[E++]*t+r,v=x[E++]*t,y.bezierCurveTo(p,d,m,v,l,c),g=_[_.length-1]){h=g.x,f=g.y;for(var S=1;S<=n;S++){var T=S/n;w(T,h,p,m,l),w(T,f,d,v,c)}}}}return{offset:i.ha*t,path:y}}}void 0===t&&(t=100),void 0===n&&(n=4);for(var a=this.data,s=r(e),u=[],l=0,c=s.length;l<c;l++)Array.prototype.push.apply(u,s[l].toShapes());return u}}),o.Path=function(e){o.CurvePath.call(this),this.currentPoint=new o.Vector2,e&&this.fromPoints(e)},o.Path.prototype=Object.assign(Object.create(o.CurvePath.prototype),{constructor:o.Path,fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new o.LineCurve(this.currentPoint.clone(),new o.Vector2(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new o.QuadraticBezierCurve(this.currentPoint.clone(),new o.Vector2(e,t),new o.Vector2(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,a){var s=new o.CubicBezierCurve(this.currentPoint.clone(),new o.Vector2(e,t),new o.Vector2(n,r),new o.Vector2(i,a));this.curves.push(s),this.currentPoint.set(i,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new o.SplineCurve(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){var u=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(e+u,t+l,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,a,s,u){var l=new o.EllipseCurve(e,t,n,r,i,a,s,u);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var h=l.getPoint(1);this.currentPoint.copy(h)}}),o.ShapePath=function(){this.subPaths=[],this.currentPath=null},o.ShapePath.prototype={moveTo:function(e,t){this.currentPath=new o.Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new o.Shape;a.curves=i.curves,t.push(a)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=t[o],u=-u,s=t[i],l=-l),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var c=l*(e.x-a.x)-u*(e.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=o.ShapeUtils.isClockWise,a=this.subPaths;if(0===a.length)return[];if(t===!0)return n(a);var s,u,l,c=[];if(1===a.length)return u=a[0],l=new o.Shape,l.curves=u.curves,c.push(l),c;var h=!i(a[0].getPoints());h=e?!h:h;var f,p=[],d=[],m=[],v=0;d[v]=void 0,m[v]=[];for(var g=0,y=a.length;g<y;g++)u=a[g],f=u.getPoints(),s=i(f),s=e?!s:s,s?(!h&&d[v]&&v++,d[v]={s:new o.Shape,p:f},d[v].s.curves=u.curves,h&&v++,m[v]=[]):m[v].push({h:u,p:f[0]});if(!d[0])return n(a);if(d.length>1){for(var _=!1,b=[],w=0,x=d.length;w<x;w++)p[w]=[];for(var w=0,x=d.length;w<x;w++)for(var E=m[w],M=0;M<E.length;M++){for(var C=E[M],S=!0,T=0;T<d.length;T++)r(C.p,d[T].p)&&(w!==T&&b.push({froms:w,tos:T,hole:M}),S?(S=!1,p[T].push(C)):_=!0);S&&p[w].push(C)}b.length>0&&(_||(m=p))}for(var P,g=0,O=d.length;g<O;g++){l=d[g].s,c.push(l),P=m[g];for(var A=0,R=P.length;A<R;A++)l.holes.push(P[A].h)}return c}},o.Shape=function(){o.Path.apply(this,arguments),this.holes=[]},o.Shape.prototype=Object.assign(Object.create(o.Path.prototype),{constructor:o.Shape,extrude:function(e){return new o.ExtrudeGeometry(this,e)},makeGeometry:function(e){return new o.ShapeGeometry(this,e)},getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),o.LineCurve=function(e,t){this.v1=e,this.v2=t},o.LineCurve.prototype=Object.create(o.Curve.prototype),o.LineCurve.prototype.constructor=o.LineCurve,o.LineCurve.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},o.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},o.LineCurve.prototype.getTangent=function(e){var t=this.v2.clone().sub(this.v1);return t.normalize()},o.QuadraticBezierCurve=function(e,t,n){this.v0=e,this.v1=t,this.v2=n},o.QuadraticBezierCurve.prototype=Object.create(o.Curve.prototype),o.QuadraticBezierCurve.prototype.constructor=o.QuadraticBezierCurve,o.QuadraticBezierCurve.prototype.getPoint=function(e){var t=o.ShapeUtils.b2;return new o.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y))},o.QuadraticBezierCurve.prototype.getTangent=function(e){var t=o.CurveUtils.tangentQuadraticBezier;return new o.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y)).normalize()},o.CubicBezierCurve=function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},o.CubicBezierCurve.prototype=Object.create(o.Curve.prototype),o.CubicBezierCurve.prototype.constructor=o.CubicBezierCurve,o.CubicBezierCurve.prototype.getPoint=function(e){var t=o.ShapeUtils.b3;return new o.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},o.CubicBezierCurve.prototype.getTangent=function(e){var t=o.CurveUtils.tangentCubicBezier;return new o.Vector2(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},o.SplineCurve=function(e){this.points=void 0==e?[]:e},o.SplineCurve.prototype=Object.create(o.Curve.prototype),o.SplineCurve.prototype.constructor=o.SplineCurve,o.SplineCurve.prototype.getPoint=function(e){var t=this.points,n=(t.length-1)*e,r=Math.floor(n),i=n-r,a=t[0===r?r:r-1],s=t[r],u=t[r>t.length-2?t.length-1:r+1],l=t[r>t.length-3?t.length-1:r+2],c=o.CurveUtils.interpolate;return new o.Vector2(c(a.x,s.x,u.x,l.x,i),c(a.y,s.y,u.y,l.y,i))},o.EllipseCurve=function(e,t,n,r,i,o,a,s){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,
this.aEndAngle=o,this.aClockwise=a,this.aRotation=s||0},o.EllipseCurve.prototype=Object.create(o.Curve.prototype),o.EllipseCurve.prototype.constructor=o.EllipseCurve,o.EllipseCurve.prototype.getPoint=function(e){for(var t=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=t;for(;n>t;)n-=t;n<Number.EPSILON&&(n=r?0:t),this.aClockwise!==!0||r||(n===t?n=-t:n-=t);var i=this.aStartAngle+e*n,a=this.aX+this.xRadius*Math.cos(i),s=this.aY+this.yRadius*Math.sin(i);if(0!==this.aRotation){var u=Math.cos(this.aRotation),l=Math.sin(this.aRotation),c=a-this.aX,h=s-this.aY;a=c*u-h*l+this.aX,s=c*l+h*u+this.aY}return new o.Vector2(a,s)},o.ArcCurve=function(e,t,n,r,i,a){o.EllipseCurve.call(this,e,t,n,n,r,i,a)},o.ArcCurve.prototype=Object.create(o.EllipseCurve.prototype),o.ArcCurve.prototype.constructor=o.ArcCurve,o.LineCurve3=o.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){if(1===e)return this.v2.clone();var t=new o.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),o.QuadraticBezierCurve3=o.Curve.create(function(e,t,n){this.v0=e,this.v1=t,this.v2=n},function(e){var t=o.ShapeUtils.b2;return new o.Vector3(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y),t(e,this.v0.z,this.v1.z,this.v2.z))}),o.CubicBezierCurve3=o.Curve.create(function(e,t,n,r){this.v0=e,this.v1=t,this.v2=n,this.v3=r},function(e){var t=o.ShapeUtils.b3;return new o.Vector3(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),o.SplineCurve3=o.Curve.create(function(e){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0==e?[]:e},function(e){var t=this.points,n=(t.length-1)*e,r=Math.floor(n),i=n-r,a=t[0==r?r:r-1],s=t[r],u=t[r>t.length-2?t.length-1:r+1],l=t[r>t.length-3?t.length-1:r+2],c=o.CurveUtils.interpolate;return new o.Vector3(c(a.x,s.x,u.x,l.x,i),c(a.y,s.y,u.y,l.y,i),c(a.z,s.z,u.z,l.z,i))}),o.CatmullRomCurve3=function(){function e(){}var t=new o.Vector3,n=new e,r=new e,i=new e;return e.prototype.init=function(e,t,n,r){this.c0=e,this.c1=n,this.c2=-3*e+3*t-2*n-r,this.c3=2*e-2*t+n+r},e.prototype.initNonuniformCatmullRom=function(e,t,n,r,i,o,a){var s=(t-e)/i-(n-e)/(i+o)+(n-t)/o,u=(n-t)/o-(r-t)/(o+a)+(r-n)/a;s*=o,u*=o,this.init(t,n,s,u)},e.prototype.initCatmullRom=function(e,t,n,r,i){this.init(t,n,i*(n-e),i*(r-t))},e.prototype.calc=function(e){var t=e*e,n=t*e;return this.c0+this.c1*e+this.c2*t+this.c3*n},o.Curve.create(function(e){this.points=e||[],this.closed=!1},function(e){var a,s,u,l,c=this.points;l=c.length,l<2&&console.log("duh, you need at least 2 points"),a=(l-(this.closed?0:1))*e,s=Math.floor(a),u=a-s,this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/c.length)+1)*c.length:0===u&&s===l-1&&(s=l-2,u=1);var h,f,p,d;if(this.closed||s>0?h=c[(s-1)%l]:(t.subVectors(c[0],c[1]).add(c[0]),h=t),f=c[s%l],p=c[(s+1)%l],this.closed||s+2<l?d=c[(s+2)%l]:(t.subVectors(c[l-1],c[l-2]).add(c[l-1]),d=t),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var m="chordal"===this.type?.5:.25,v=Math.pow(h.distanceToSquared(f),m),g=Math.pow(f.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(d),m);g<1e-4&&(g=1),v<1e-4&&(v=g),y<1e-4&&(y=g),n.initNonuniformCatmullRom(h.x,f.x,p.x,d.x,v,g,y),r.initNonuniformCatmullRom(h.y,f.y,p.y,d.y,v,g,y),i.initNonuniformCatmullRom(h.z,f.z,p.z,d.z,v,g,y)}else if("catmullrom"===this.type){var _=void 0!==this.tension?this.tension:.5;n.initCatmullRom(h.x,f.x,p.x,d.x,_),r.initCatmullRom(h.y,f.y,p.y,d.y,_),i.initCatmullRom(h.z,f.z,p.z,d.z,_)}var b=new o.Vector3(n.calc(u),r.calc(u),i.calc(u));return b})}(),o.ClosedSplineCurve3=function(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3."),o.CatmullRomCurve3.call(this,e),this.type="catmullrom",this.closed=!0},o.ClosedSplineCurve3.prototype=Object.create(o.CatmullRomCurve3.prototype),o.BoxGeometry=function(e,t,n,r,i,a){o.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new o.BoxBufferGeometry(e,t,n,r,i,a)),this.mergeVertices()},o.BoxGeometry.prototype=Object.create(o.Geometry.prototype),o.BoxGeometry.prototype.constructor=o.BoxGeometry,o.CubeGeometry=o.BoxGeometry,o.BoxBufferGeometry=function(e,t,n,r,i,a){function s(e,t,n){var r=0;return r+=(e+1)*(t+1)*2,r+=(e+1)*(n+1)*2,r+=(n+1)*(t+1)*2}function u(e,t,n){var r=0;return r+=e*t*2,r+=e*n*2,r+=n*t*2,6*r}function l(e,t,n,r,i,a,s,u,l,h,f){for(var x=a/l,E=s/h,M=a/2,C=s/2,S=u/2,T=l+1,P=h+1,O=0,A=0,R=new o.Vector3,k=0;k<P;k++)for(var L=k*E-C,D=0;D<T;D++){var I=D*x-M;R[e]=I*r,R[t]=L*i,R[n]=S,d[g]=R.x,d[g+1]=R.y,d[g+2]=R.z,R[e]=0,R[t]=0,R[n]=u>0?1:-1,m[g]=R.x,m[g+1]=R.y,m[g+2]=R.z,v[y]=D/l,v[y+1]=1-k/h,g+=3,y+=2,O+=1}for(k=0;k<h;k++)for(D=0;D<l;D++){var j=b+D+T*k,N=b+D+T*(k+1),B=b+(D+1)+T*(k+1),U=b+(D+1)+T*k;p[_]=j,p[_+1]=N,p[_+2]=U,p[_+3]=N,p[_+4]=B,p[_+5]=U,_+=6,A+=6}c.addGroup(w,A,f),w+=A,b+=O}o.BufferGeometry.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};var c=this;r=Math.floor(r)||1,i=Math.floor(i)||1,a=Math.floor(a)||1;var h=s(r,i,a),f=u(r,i,a),p=new(f>65535?Uint32Array:Uint16Array)(f),d=new Float32Array(3*h),m=new Float32Array(3*h),v=new Float32Array(2*h),g=0,y=0,_=0,b=0,w=0;l("z","y","x",-1,-1,n,t,e,a,i,0),l("z","y","x",1,-1,n,t,-e,a,i,1),l("x","z","y",1,1,e,n,t,r,a,2),l("x","z","y",1,-1,e,n,-t,r,a,3),l("x","y","z",1,-1,e,t,n,r,i,4),l("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(new o.BufferAttribute(p,1)),this.addAttribute("position",new o.BufferAttribute(d,3)),this.addAttribute("normal",new o.BufferAttribute(m,3)),this.addAttribute("uv",new o.BufferAttribute(v,2))},o.BoxBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.BoxBufferGeometry.prototype.constructor=o.BoxBufferGeometry,o.CircleGeometry=function(e,t,n,r){o.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new o.CircleBufferGeometry(e,t,n,r))},o.CircleGeometry.prototype=Object.create(o.Geometry.prototype),o.CircleGeometry.prototype.constructor=o.CircleGeometry,o.CircleBufferGeometry=function(e,t,n,r){o.BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||50,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i=t+2,a=new Float32Array(3*i),s=new Float32Array(3*i),u=new Float32Array(2*i);s[2]=1,u[0]=.5,u[1]=.5;for(var l=0,c=3,h=2;l<=t;l++,c+=3,h+=2){var f=n+l/t*r;a[c]=e*Math.cos(f),a[c+1]=e*Math.sin(f),s[c+2]=1,u[h]=(a[c]/e+1)/2,u[h+1]=(a[c+1]/e+1)/2}for(var p=[],c=1;c<=t;c++)p.push(c,c+1,0);this.setIndex(new o.BufferAttribute(new Uint16Array(p),1)),this.addAttribute("position",new o.BufferAttribute(a,3)),this.addAttribute("normal",new o.BufferAttribute(s,3)),this.addAttribute("uv",new o.BufferAttribute(u,2)),this.boundingSphere=new o.Sphere(new o.Vector3,e)},o.CircleBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.CircleBufferGeometry.prototype.constructor=o.CircleBufferGeometry,o.CylinderBufferGeometry=function(e,t,n,r,i,a,s,u){function l(){var e=(r+1)*(i+1);return a===!1&&(e+=(r+1)*d+r*d),e}function c(){var e=r*i*2*3;return a===!1&&(e+=r*d*3),e}function h(){var a,l,c=new o.Vector3,h=new o.Vector3,f=0,d=(t-e)/n;for(l=0;l<=i;l++){var m=[],v=l/i,S=v*(t-e)+e;for(a=0;a<=r;a++){var T=a/r;h.x=S*Math.sin(T*u+s),h.y=-v*n+M,h.z=S*Math.cos(T*u+s),y.setXYZ(w,h.x,h.y,h.z),c.copy(h),(0===e&&0===l||0===t&&l===i)&&(c.x=Math.sin(T*u+s),c.z=Math.cos(T*u+s)),c.setY(Math.sqrt(c.x*c.x+c.z*c.z)*d).normalize(),_.setXYZ(w,c.x,c.y,c.z),b.setXY(w,T,1-v),m.push(w),w++}E.push(m)}for(a=0;a<r;a++)for(l=0;l<i;l++){var P=E[l][a],O=E[l+1][a],A=E[l+1][a+1],R=E[l][a+1];g.setX(x,P),x++,g.setX(x,O),x++,g.setX(x,R),x++,g.setX(x,O),x++,g.setX(x,A),x++,g.setX(x,R),x++,f+=6}p.addGroup(C,f,0),C+=f}function f(n){var i,a,l,c=new o.Vector2,h=new o.Vector3,f=0,d=n===!0?e:t,m=n===!0?1:-1;for(a=w,i=1;i<=r;i++)y.setXYZ(w,0,M*m,0),_.setXYZ(w,0,m,0),c.x=.5,c.y=.5,b.setXY(w,c.x,c.y),w++;for(l=w,i=0;i<=r;i++){var v=i/r,E=v*u+s,S=Math.cos(E),T=Math.sin(E);h.x=d*T,h.y=M*m,h.z=d*S,y.setXYZ(w,h.x,h.y,h.z),_.setXYZ(w,0,m,0),c.x=.5*S+.5,c.y=.5*T*m+.5,b.setXY(w,c.x,c.y),w++}for(i=0;i<r;i++){var P=a+i,O=l+i;n===!0?(g.setX(x,O),x++,g.setX(x,O+1),x++,g.setX(x,P),x++):(g.setX(x,O+1),x++,g.setX(x,O),x++,g.setX(x,P),x++),f+=3}p.addGroup(C,f,n===!0?1:2),C+=f}o.BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:u};var p=this;e=void 0!==e?e:20,t=void 0!==t?t:20,n=void 0!==n?n:100,r=Math.floor(r)||8,i=Math.floor(i)||1,a=void 0!==a&&a,s=void 0!==s?s:0,u=void 0!==u?u:2*Math.PI;var d=0;a===!1&&(e>0&&d++,t>0&&d++);var m=l(),v=c(),g=new o.BufferAttribute(new(v>65535?Uint32Array:Uint16Array)(v),1),y=new o.BufferAttribute(new Float32Array(3*m),3),_=new o.BufferAttribute(new Float32Array(3*m),3),b=new o.BufferAttribute(new Float32Array(2*m),2),w=0,x=0,E=[],M=n/2,C=0;h(),a===!1&&(e>0&&f(!0),t>0&&f(!1)),this.setIndex(g),this.addAttribute("position",y),this.addAttribute("normal",_),this.addAttribute("uv",b)},o.CylinderBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.CylinderBufferGeometry.prototype.constructor=o.CylinderBufferGeometry,o.CylinderGeometry=function(e,t,n,r,i,a,s,u){o.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:u},this.fromBufferGeometry(new o.CylinderBufferGeometry(e,t,n,r,i,a,s,u)),this.mergeVertices()},o.CylinderGeometry.prototype=Object.create(o.Geometry.prototype),o.CylinderGeometry.prototype.constructor=o.CylinderGeometry,o.ConeBufferGeometry=function(e,t,n,r,i,a,s){o.CylinderBufferGeometry.call(this,0,e,t,n,r,i,a,s),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,thetaStart:a,thetaLength:s}},o.ConeBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.ConeBufferGeometry.prototype.constructor=o.ConeBufferGeometry,o.ConeGeometry=function(e,t,n,r,i,a,s){o.CylinderGeometry.call(this,0,e,t,n,r,i,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:s}},o.ConeGeometry.prototype=Object.create(o.CylinderGeometry.prototype),o.ConeGeometry.prototype.constructor=o.ConeGeometry,o.EdgesGeometry=function(e,t){function n(e,t){return e-t}o.BufferGeometry.call(this),t=void 0!==t?t:1;var r,i=Math.cos(o.Math.DEG2RAD*t),a=[0,0],s={},u=["a","b","c"];e instanceof o.BufferGeometry?(r=new o.Geometry,r.fromBufferGeometry(e)):r=e.clone(),r.mergeVertices(),r.computeFaceNormals();for(var l=r.vertices,c=r.faces,h=0,f=c.length;h<f;h++)for(var p=c[h],d=0;d<3;d++){a[0]=p[u[d]],a[1]=p[u[(d+1)%3]],a.sort(n);var m=a.toString();void 0===s[m]?s[m]={vert1:a[0],vert2:a[1],face1:h,face2:void 0}:s[m].face2=h}var v=[];for(var m in s){var g=s[m];if(void 0===g.face2||c[g.face1].normal.dot(c[g.face2].normal)<=i){var y=l[g.vert1];v.push(y.x),v.push(y.y),v.push(y.z),y=l[g.vert2],v.push(y.x),v.push(y.y),v.push(y.z)}}this.addAttribute("position",new o.BufferAttribute(new Float32Array(v),3))},o.EdgesGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.EdgesGeometry.prototype.constructor=o.EdgesGeometry,o.ExtrudeGeometry=function(e,t){return"undefined"==typeof e?void(e=[]):(o.Geometry.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),void this.computeFaceNormals())},o.ExtrudeGeometry.prototype=Object.create(o.Geometry.prototype),o.ExtrudeGeometry.prototype.constructor=o.ExtrudeGeometry,o.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];this.addShape(i,t)}},o.ExtrudeGeometry.prototype.addShape=function(e,t){function n(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}function r(e,t,n){var r,i,a=1,s=e.x-t.x,u=e.y-t.y,l=n.x-e.x,c=n.y-e.y,h=s*s+u*u,f=s*c-u*l;if(Math.abs(f)>Number.EPSILON){var p=Math.sqrt(h),d=Math.sqrt(l*l+c*c),m=t.x-u/p,v=t.y+s/p,g=n.x-c/d,y=n.y+l/d,_=((g-m)*c-(y-v)*l)/(s*c-u*l);r=m+s*_-e.x,i=v+u*_-e.y;var b=r*r+i*i;if(b<=2)return new o.Vector2(r,i);a=Math.sqrt(b/2)}else{var w=!1;s>Number.EPSILON?l>Number.EPSILON&&(w=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(w=!0):Math.sign(u)===Math.sign(c)&&(w=!0),w?(r=-u,i=s,a=Math.sqrt(h)):(r=s,i=u,a=Math.sqrt(h/2))}return new o.Vector2(r/a,i/a)}function i(){if(b){var e=0,t=G*e;for(q=0;q<H;q++)z=I[q],l(z[2]+t,z[1]+t,z[0]+t);for(e=x+2*_,t=G*e,q=0;q<H;q++)z=I[q],l(z[0]+t,z[1]+t,z[2]+t)}else{for(q=0;q<H;q++)z=I[q],l(z[2],z[1],z[0]);for(q=0;q<H;q++)z=I[q],l(z[0]+G*x,z[1]+G*x,z[2]+G*x)}}function a(){var e=0;for(s(j,e),e+=j.length,T=0,P=L.length;T<P;T++)S=L[T],s(S,e),e+=S.length}function s(e,t){var n,r;for(q=e.length;--q>=0;){n=q,r=q-1,r<0&&(r=e.length-1);var i=0,o=x+2*_;for(i=0;i<o;i++){var a=G*i,s=G*(i+1),u=t+n+a,l=t+r+a,h=t+r+s,f=t+n+s;c(u,l,h,f,e,i,o,n,r)}}}function u(e,t,n){O.vertices.push(new o.Vector3(e,t,n))}function l(e,t,n){e+=A,t+=A,n+=A,O.faces.push(new o.Face3(e,t,n,null,null,0));var r=C.generateTopUV(O,e,t,n);O.faceVertexUvs[0].push(r)}function c(e,t,n,r,i,a,s,u,l){e+=A,t+=A,n+=A,r+=A,O.faces.push(new o.Face3(e,t,r,null,null,1)),O.faces.push(new o.Face3(t,n,r,null,null,1));var c=C.generateSideWallUV(O,e,t,n,r);O.faceVertexUvs[0].push([c[0],c[1],c[3]]),O.faceVertexUvs[0].push([c[1],c[2],c[3]])}var h,f,p,d,m,v=void 0!==t.amount?t.amount:100,g=void 0!==t.bevelThickness?t.bevelThickness:6,y=void 0!==t.bevelSize?t.bevelSize:g-2,_=void 0!==t.bevelSegments?t.bevelSegments:3,b=void 0===t.bevelEnabled||t.bevelEnabled,w=void 0!==t.curveSegments?t.curveSegments:12,x=void 0!==t.steps?t.steps:1,E=t.extrudePath,M=!1,C=void 0!==t.UVGenerator?t.UVGenerator:o.ExtrudeGeometry.WorldUVGenerator;E&&(h=E.getSpacedPoints(x),M=!0,b=!1,f=void 0!==t.frames?t.frames:new o.TubeGeometry.FrenetFrames(E,x,(!1)),p=new o.Vector3,d=new o.Vector3,m=new o.Vector3),b||(_=0,g=0,y=0);var S,T,P,O=this,A=this.vertices.length,R=e.extractPoints(w),k=R.shape,L=R.holes,D=!o.ShapeUtils.isClockWise(k);if(D){for(k=k.reverse(),T=0,P=L.length;T<P;T++)S=L[T],o.ShapeUtils.isClockWise(S)&&(L[T]=S.reverse());D=!1}var I=o.ShapeUtils.triangulateShape(k,L),j=k;for(T=0,P=L.length;T<P;T++)S=L[T],k=k.concat(S);for(var N,B,U,F,V,z,G=k.length,H=I.length,W=[],q=0,X=j.length,Y=X-1,K=q+1;q<X;q++,Y++,K++)Y===X&&(Y=0),K===X&&(K=0),W[q]=r(j[q],j[Y],j[K]);var Z,Q=[],J=W.concat();for(T=0,P=L.length;T<P;T++){for(S=L[T],Z=[],q=0,X=S.length,Y=X-1,K=q+1;q<X;q++,Y++,K++)Y===X&&(Y=0),K===X&&(K=0),Z[q]=r(S[q],S[Y],S[K]);Q.push(Z),J=J.concat(Z)}for(N=0;N<_;N++){for(U=N/_,F=g*(1-U),B=y*Math.sin(U*Math.PI/2),q=0,X=j.length;q<X;q++)V=n(j[q],W[q],B),u(V.x,V.y,-F);for(T=0,P=L.length;T<P;T++)for(S=L[T],Z=Q[T],q=0,X=S.length;q<X;q++)V=n(S[q],Z[q],B),u(V.x,V.y,-F)}for(B=y,q=0;q<G;q++)V=b?n(k[q],J[q],B):k[q],M?(d.copy(f.normals[0]).multiplyScalar(V.x),p.copy(f.binormals[0]).multiplyScalar(V.y),m.copy(h[0]).add(d).add(p),u(m.x,m.y,m.z)):u(V.x,V.y,0);var $;for($=1;$<=x;$++)for(q=0;q<G;q++)V=b?n(k[q],J[q],B):k[q],M?(d.copy(f.normals[$]).multiplyScalar(V.x),p.copy(f.binormals[$]).multiplyScalar(V.y),m.copy(h[$]).add(d).add(p),u(m.x,m.y,m.z)):u(V.x,V.y,v/x*$);for(N=_-1;N>=0;N--){for(U=N/_,F=g*(1-U),B=y*Math.sin(U*Math.PI/2),q=0,X=j.length;q<X;q++)V=n(j[q],W[q],B),u(V.x,V.y,v+F);for(T=0,P=L.length;T<P;T++)for(S=L[T],Z=Q[T],q=0,X=S.length;q<X;q++)V=n(S[q],Z[q],B),M?u(V.x,V.y+h[x-1].y,h[x-1].x+F):u(V.x,V.y,v+F)}i(),a()},o.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,n,r){var i=e.vertices,a=i[t],s=i[n],u=i[r];return[new o.Vector2(a.x,a.y),new o.Vector2(s.x,s.y),new o.Vector2(u.x,u.y)]},generateSideWallUV:function(e,t,n,r,i){var a=e.vertices,s=a[t],u=a[n],l=a[r],c=a[i];return Math.abs(s.y-u.y)<.01?[new o.Vector2(s.x,1-s.z),new o.Vector2(u.x,1-u.z),new o.Vector2(l.x,1-l.z),new o.Vector2(c.x,1-c.z)]:[new o.Vector2(s.y,1-s.z),new o.Vector2(u.y,1-u.z),new o.Vector2(l.y,1-l.z),new o.Vector2(c.y,1-c.z)]}},o.ShapeGeometry=function(e,t){o.Geometry.call(this),this.type="ShapeGeometry",Array.isArray(e)===!1&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()},o.ShapeGeometry.prototype=Object.create(o.Geometry.prototype),o.ShapeGeometry.prototype.constructor=o.ShapeGeometry,o.ShapeGeometry.prototype.addShapeList=function(e,t){for(var n=0,r=e.length;n<r;n++)this.addShape(e[n],t);return this},o.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var n,r,i,a=void 0!==t.curveSegments?t.curveSegments:12,s=t.material,u=void 0===t.UVGenerator?o.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,l=this.vertices.length,c=e.extractPoints(a),h=c.shape,f=c.holes,p=!o.ShapeUtils.isClockWise(h);if(p){for(h=h.reverse(),n=0,r=f.length;n<r;n++)i=f[n],o.ShapeUtils.isClockWise(i)&&(f[n]=i.reverse());p=!1}var d=o.ShapeUtils.triangulateShape(h,f);for(n=0,r=f.length;n<r;n++)i=f[n],h=h.concat(i);var m,v,g=h.length,y=d.length;for(n=0;n<g;n++)m=h[n],this.vertices.push(new o.Vector3(m.x,m.y,0));for(n=0;n<y;n++){v=d[n];var _=v[0]+l,b=v[1]+l,w=v[2]+l;this.faces.push(new o.Face3(_,b,w,null,null,s)),this.faceVertexUvs[0].push(u.generateTopUV(this,_,b,w))}},o.LatheBufferGeometry=function(e,t,n,r){o.BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=o.Math.clamp(r,0,2*Math.PI);var i,a,s,u=(t+1)*e.length,l=t*e.length*2*3,c=new o.BufferAttribute(new(l>65535?Uint32Array:Uint16Array)(l),1),h=new o.BufferAttribute(new Float32Array(3*u),3),f=new o.BufferAttribute(new Float32Array(2*u),2),p=0,d=0,m=(1/(e.length-1),1/t),v=new o.Vector3,g=new o.Vector2;for(a=0;a<=t;a++){var y=n+a*m*r,_=Math.sin(y),b=Math.cos(y);for(s=0;s<=e.length-1;s++)v.x=e[s].x*_,v.y=e[s].y,v.z=e[s].x*b,h.setXYZ(p,v.x,v.y,v.z),g.x=a/t,g.y=s/(e.length-1),f.setXY(p,g.x,g.y),p++}for(a=0;a<t;a++)for(s=0;s<e.length-1;s++){i=s+a*e.length;var w=i,x=i+e.length,E=i+e.length+1,M=i+1;c.setX(d,w),d++,c.setX(d,x),d++,c.setX(d,M),d++,c.setX(d,x),d++,c.setX(d,E),d++,c.setX(d,M),d++}if(this.setIndex(c),this.addAttribute("position",h),this.addAttribute("uv",f),this.computeVertexNormals(),r===2*Math.PI){var C=this.attributes.normal.array,S=new o.Vector3,T=new o.Vector3,P=new o.Vector3;for(i=t*e.length*3,a=0,s=0;a<e.length;a++,s+=3)S.x=C[s+0],S.y=C[s+1],S.z=C[s+2],T.x=C[i+s+0],T.y=C[i+s+1],T.z=C[i+s+2],P.addVectors(S,T).normalize(),C[s+0]=C[i+s+0]=P.x,C[s+1]=C[i+s+1]=P.y,C[s+2]=C[i+s+2]=P.z}},o.LatheBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.LatheBufferGeometry.prototype.constructor=o.LatheBufferGeometry,o.LatheGeometry=function(e,t,n,r){o.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new o.LatheBufferGeometry(e,t,n,r)),this.mergeVertices()},o.LatheGeometry.prototype=Object.create(o.Geometry.prototype),o.LatheGeometry.prototype.constructor=o.LatheGeometry,o.PlaneGeometry=function(e,t,n,r){o.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new o.PlaneBufferGeometry(e,t,n,r))},o.PlaneGeometry.prototype=Object.create(o.Geometry.prototype),o.PlaneGeometry.prototype.constructor=o.PlaneGeometry,o.PlaneBufferGeometry=function(e,t,n,r){o.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};for(var i=e/2,a=t/2,s=Math.floor(n)||1,u=Math.floor(r)||1,l=s+1,c=u+1,h=e/s,f=t/u,p=new Float32Array(l*c*3),d=new Float32Array(l*c*3),m=new Float32Array(l*c*2),v=0,g=0,y=0;y<c;y++)for(var _=y*f-a,b=0;b<l;b++){var w=b*h-i;p[v]=w,p[v+1]=-_,d[v+2]=1,m[g]=b/s,m[g+1]=1-y/u,v+=3,g+=2}v=0;for(var x=new(p.length/3>65535?Uint32Array:Uint16Array)(s*u*6),y=0;y<u;y++)for(var b=0;b<s;b++){var E=b+l*y,M=b+l*(y+1),C=b+1+l*(y+1),S=b+1+l*y;x[v]=E,x[v+1]=M,x[v+2]=S,x[v+3]=M,x[v+4]=C,x[v+5]=S,v+=6}this.setIndex(new o.BufferAttribute(x,1)),this.addAttribute("position",new o.BufferAttribute(p,3)),this.addAttribute("normal",new o.BufferAttribute(d,3)),this.addAttribute("uv",new o.BufferAttribute(m,2))},o.PlaneBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.PlaneBufferGeometry.prototype.constructor=o.PlaneBufferGeometry,o.RingBufferGeometry=function(e,t,n,r,i,a){o.BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},e=e||20,t=t||50,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):1;var s,u,l,c=(n+1)*(r+1),h=n*r*2*3,f=new o.BufferAttribute(new(h>65535?Uint32Array:Uint16Array)(h),1),p=new o.BufferAttribute(new Float32Array(3*c),3),d=new o.BufferAttribute(new Float32Array(3*c),3),m=new o.BufferAttribute(new Float32Array(2*c),2),v=0,g=0,y=e,_=(t-e)/r,b=new o.Vector3,w=new o.Vector2;for(u=0;u<=r;u++){for(l=0;l<=n;l++)s=i+l/n*a,b.x=y*Math.cos(s),b.y=y*Math.sin(s),p.setXYZ(v,b.x,b.y,b.z),d.setXYZ(v,0,0,1),w.x=(b.x/t+1)/2,w.y=(b.y/t+1)/2,m.setXY(v,w.x,w.y),v++;y+=_}for(u=0;u<r;u++){var x=u*(n+1);for(l=0;l<n;l++){s=l+x;var E=s,M=s+n+1,C=s+n+2,S=s+1;f.setX(g,E),g++,f.setX(g,M),g++,f.setX(g,C),g++,f.setX(g,E),g++,f.setX(g,C),g++,f.setX(g,S),g++}}this.setIndex(f),this.addAttribute("position",p),this.addAttribute("normal",d),this.addAttribute("uv",m)},o.RingBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.RingBufferGeometry.prototype.constructor=o.RingBufferGeometry,o.RingGeometry=function(e,t,n,r,i,a){o.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new o.RingBufferGeometry(e,t,n,r,i,a))},o.RingGeometry.prototype=Object.create(o.Geometry.prototype),o.RingGeometry.prototype.constructor=o.RingGeometry,o.SphereGeometry=function(e,t,n,r,i,a,s){o.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new o.SphereBufferGeometry(e,t,n,r,i,a,s))},o.SphereGeometry.prototype=Object.create(o.Geometry.prototype),o.SphereGeometry.prototype.constructor=o.SphereGeometry,o.SphereBufferGeometry=function(e,t,n,r,i,a,s){o.BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,a=void 0!==a?a:0,s=void 0!==s?s:Math.PI;for(var u=a+s,l=(t+1)*(n+1),c=new o.BufferAttribute(new Float32Array(3*l),3),h=new o.BufferAttribute(new Float32Array(3*l),3),f=new o.BufferAttribute(new Float32Array(2*l),2),p=0,d=[],m=new o.Vector3,v=0;v<=n;v++){for(var g=[],y=v/n,_=0;_<=t;_++){var b=_/t,w=-e*Math.cos(r+b*i)*Math.sin(a+y*s),x=e*Math.cos(a+y*s),E=e*Math.sin(r+b*i)*Math.sin(a+y*s);m.set(w,x,E).normalize(),c.setXYZ(p,w,x,E),h.setXYZ(p,m.x,m.y,m.z),f.setXY(p,b,1-y),g.push(p),p++}d.push(g)}for(var M=[],v=0;v<n;v++)for(var _=0;_<t;_++){var C=d[v][_+1],S=d[v][_],T=d[v+1][_],P=d[v+1][_+1];(0!==v||a>0)&&M.push(C,S,P),(v!==n-1||u<Math.PI)&&M.push(S,T,P)}this.setIndex(new(c.count>65535?o.Uint32Attribute:o.Uint16Attribute)(M,1)),this.addAttribute("position",c),this.addAttribute("normal",h),this.addAttribute("uv",f),this.boundingSphere=new o.Sphere(new o.Vector3,e)},o.SphereBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.SphereBufferGeometry.prototype.constructor=o.SphereBufferGeometry,o.TextGeometry=function(e,t){t=t||{};var n=t.font;if(n instanceof o.Font==!1)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new o.Geometry;var r=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),o.ExtrudeGeometry.call(this,r,t),this.type="TextGeometry"},o.TextGeometry.prototype=Object.create(o.ExtrudeGeometry.prototype),o.TextGeometry.prototype.constructor=o.TextGeometry,o.TorusBufferGeometry=function(e,t,n,r,i){o.BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||100,t=t||40,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var a,s,u=(n+1)*(r+1),l=n*r*2*3,c=new(l>65535?Uint32Array:Uint16Array)(l),h=new Float32Array(3*u),f=new Float32Array(3*u),p=new Float32Array(2*u),d=0,m=0,v=0,g=new o.Vector3,y=new o.Vector3,_=new o.Vector3;for(a=0;a<=n;a++)for(s=0;s<=r;s++){var b=s/r*i,w=a/n*Math.PI*2;y.x=(e+t*Math.cos(w))*Math.cos(b),y.y=(e+t*Math.cos(w))*Math.sin(b),y.z=t*Math.sin(w),h[d]=y.x,h[d+1]=y.y,h[d+2]=y.z,g.x=e*Math.cos(b),g.y=e*Math.sin(b),_.subVectors(y,g).normalize(),f[d]=_.x,f[d+1]=_.y,f[d+2]=_.z,p[m]=s/r,p[m+1]=a/n,d+=3,m+=2}for(a=1;a<=n;a++)for(s=1;s<=r;s++){var x=(r+1)*a+s-1,E=(r+1)*(a-1)+s-1,M=(r+1)*(a-1)+s,C=(r+1)*a+s;c[v]=x,c[v+1]=E,c[v+2]=C,c[v+3]=E,c[v+4]=M,c[v+5]=C,v+=6}this.setIndex(new o.BufferAttribute(c,1)),this.addAttribute("position",new o.BufferAttribute(h,3)),this.addAttribute("normal",new o.BufferAttribute(f,3)),this.addAttribute("uv",new o.BufferAttribute(p,2))},o.TorusBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.TorusBufferGeometry.prototype.constructor=o.TorusBufferGeometry,o.TorusGeometry=function(e,t,n,r,i){o.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new o.TorusBufferGeometry(e,t,n,r,i))},o.TorusGeometry.prototype=Object.create(o.Geometry.prototype),o.TorusGeometry.prototype.constructor=o.TorusGeometry,o.TorusKnotBufferGeometry=function(e,t,n,r,i,a){function s(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}o.BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},e=e||100,t=t||40,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,a=a||3;var u,l,c=(r+1)*(n+1),h=r*n*2*3,f=new o.BufferAttribute(new(h>65535?Uint32Array:Uint16Array)(h),1),p=new o.BufferAttribute(new Float32Array(3*c),3),d=new o.BufferAttribute(new Float32Array(3*c),3),m=new o.BufferAttribute(new Float32Array(2*c),2),v=0,g=0,y=new o.Vector3,_=new o.Vector3,b=new o.Vector2,w=new o.Vector3,x=new o.Vector3,E=new o.Vector3,M=new o.Vector3,C=new o.Vector3;for(u=0;u<=n;++u){var S=u/n*i*Math.PI*2;for(s(S,i,a,e,w),s(S+.01,i,a,e,x),M.subVectors(x,w),C.addVectors(x,w),E.crossVectors(M,C),C.crossVectors(E,M),E.normalize(),C.normalize(),l=0;l<=r;++l){var T=l/r*Math.PI*2,P=-t*Math.cos(T),O=t*Math.sin(T);y.x=w.x+(P*C.x+O*E.x),y.y=w.y+(P*C.y+O*E.y),y.z=w.z+(P*C.z+O*E.z),p.setXYZ(v,y.x,y.y,y.z),_.subVectors(y,w).normalize(),d.setXYZ(v,_.x,_.y,_.z),b.x=u/n,b.y=l/r,m.setXY(v,b.x,b.y),v++}}for(l=1;l<=n;l++)for(u=1;u<=r;u++){var A=(r+1)*(l-1)+(u-1),R=(r+1)*l+(u-1),k=(r+1)*l+u,L=(r+1)*(l-1)+u;f.setX(g,A),g++,f.setX(g,R),g++,f.setX(g,L),g++,f.setX(g,R),g++,f.setX(g,k),g++,f.setX(g,L),g++}this.setIndex(f),this.addAttribute("position",p),this.addAttribute("normal",d),this.addAttribute("uv",m)},o.TorusKnotBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.TorusKnotBufferGeometry.prototype.constructor=o.TorusKnotBufferGeometry,o.TorusKnotGeometry=function(e,t,n,r,i,a,s){o.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new o.TorusKnotBufferGeometry(e,t,n,r,i,a)),this.mergeVertices()},o.TorusKnotGeometry.prototype=Object.create(o.Geometry.prototype),o.TorusKnotGeometry.prototype.constructor=o.TorusKnotGeometry,o.TubeGeometry=function(e,t,n,r,i,a){function s(e,t,n){return A.vertices.push(new o.Vector3(e,t,n))-1}o.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:e,segments:t,radius:n,radialSegments:r,closed:i,taper:a},t=t||64,n=n||1,r=r||8,i=i||!1,a=a||o.TubeGeometry.NoTaper;var u,l,c,h,f,p,d,m,v,g,y,_,b,w,x,E,M,C,S,T,P,O=[],A=this,R=t+1,k=new o.Vector3,L=new o.TubeGeometry.FrenetFrames(e,t,i),D=L.tangents,I=L.normals,j=L.binormals;for(this.tangents=D,this.normals=I,this.binormals=j,g=0;g<R;g++)for(O[g]=[],h=g/(R-1),v=e.getPointAt(h),u=D[g],l=I[g],c=j[g],p=n*a(h),y=0;y<r;y++)f=y/r*2*Math.PI,d=-p*Math.cos(f),m=p*Math.sin(f),k.copy(v),k.x+=d*l.x+m*c.x,k.y+=d*l.y+m*c.y,k.z+=d*l.z+m*c.z,O[g][y]=s(k.x,k.y,k.z);for(g=0;g<t;g++)for(y=0;y<r;y++)_=i?(g+1)%t:g+1,b=(y+1)%r,w=O[g][y],x=O[_][y],E=O[_][b],M=O[g][b],C=new o.Vector2(g/t,y/r),S=new o.Vector2((g+1)/t,y/r),T=new o.Vector2((g+1)/t,(y+1)/r),P=new o.Vector2(g/t,(y+1)/r),this.faces.push(new o.Face3(w,x,M)),this.faceVertexUvs[0].push([C,S,P]),this.faces.push(new o.Face3(x,E,M)),this.faceVertexUvs[0].push([S.clone(),T,P.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},o.TubeGeometry.prototype=Object.create(o.Geometry.prototype),o.TubeGeometry.prototype.constructor=o.TubeGeometry,o.TubeGeometry.NoTaper=function(e){return 1},o.TubeGeometry.SinusoidalTaper=function(e){return Math.sin(Math.PI*e)},o.TubeGeometry.FrenetFrames=function(e,t,n){function r(){d[0]=new o.Vector3,m[0]=new o.Vector3,a=Number.MAX_VALUE,s=Math.abs(p[0].x),u=Math.abs(p[0].y),l=Math.abs(p[0].z),s<=a&&(a=s,f.set(1,0,0)),u<=a&&(a=u,f.set(0,1,0)),l<=a&&f.set(0,0,1),v.crossVectors(p[0],f).normalize(),d[0].crossVectors(p[0],v),m[0].crossVectors(p[0],d[0])}var i,a,s,u,l,c,h,f=new o.Vector3,p=[],d=[],m=[],v=new o.Vector3,g=new o.Matrix4,y=t+1;for(this.tangents=p,this.normals=d,this.binormals=m,c=0;c<y;c++)h=c/(y-1),p[c]=e.getTangentAt(h),p[c].normalize();for(r(),c=1;c<y;c++)d[c]=d[c-1].clone(),m[c]=m[c-1].clone(),v.crossVectors(p[c-1],p[c]),v.length()>Number.EPSILON&&(v.normalize(),i=Math.acos(o.Math.clamp(p[c-1].dot(p[c]),-1,1)),d[c].applyMatrix4(g.makeRotationAxis(v,i))),m[c].crossVectors(p[c],d[c]);if(n)for(i=Math.acos(o.Math.clamp(d[0].dot(d[y-1]),-1,1)),i/=y-1,p[0].dot(v.crossVectors(d[0],d[y-1]))>0&&(i=-i),c=1;c<y;c++)d[c].applyMatrix4(g.makeRotationAxis(p[c],i*c)),m[c].crossVectors(p[c],d[c])},o.PolyhedronGeometry=function(e,t,n,r){function i(e){var t=e.normalize().clone();t.index=h.vertices.push(t)-1;var n=u(e)/2/Math.PI+.5,r=l(e)/Math.PI+.5;return t.uv=new o.Vector2(n,1-r),t}function a(e,t,n){var r=new o.Face3(e.index,t.index,n.index,[e.clone(),t.clone(),n.clone()]);h.faces.push(r),b.copy(e).add(t).add(n).divideScalar(3);var i=u(b);h.faceVertexUvs[0].push([c(e.uv,e,i),c(t.uv,t,i),c(n.uv,n,i)])}function s(e,t){for(var n=Math.pow(2,t),r=i(h.vertices[e.a]),o=i(h.vertices[e.b]),s=i(h.vertices[e.c]),u=[],l=0;l<=n;l++){u[l]=[];for(var c=i(r.clone().lerp(s,l/n)),f=i(o.clone().lerp(s,l/n)),p=n-l,d=0;d<=p;d++)0===d&&l===n?u[l][d]=c:u[l][d]=i(c.clone().lerp(f,d/p))}for(var l=0;l<n;l++)for(var d=0;d<2*(n-l)-1;d++){var m=Math.floor(d/2);d%2===0?a(u[l][m+1],u[l+1][m],u[l][m]):a(u[l][m+1],u[l+1][m+1],u[l+1][m])}}function u(e){return Math.atan2(e.z,-e.x)}function l(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}function c(e,t,n){return n<0&&1===e.x&&(e=new o.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new o.Vector2(n/2/Math.PI+.5,e.y)),e.clone()}o.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;for(var h=this,f=0,p=e.length;f<p;f+=3)i(new o.Vector3(e[f],e[f+1],e[f+2]));for(var d=this.vertices,m=[],f=0,v=0,p=t.length;f<p;f+=3,v++){var g=d[t[f]],y=d[t[f+1]],_=d[t[f+2]];m[v]=new o.Face3(g.index,y.index,_.index,[g.clone(),y.clone(),_.clone()]);
}for(var b=new o.Vector3,f=0,p=m.length;f<p;f++)s(m[f],r);for(var f=0,p=this.faceVertexUvs[0].length;f<p;f++){var w=this.faceVertexUvs[0][f],x=w[0].x,E=w[1].x,M=w[2].x,C=Math.max(x,E,M),S=Math.min(x,E,M);C>.9&&S<.1&&(x<.2&&(w[0].x+=1),E<.2&&(w[1].x+=1),M<.2&&(w[2].x+=1))}for(var f=0,p=this.vertices.length;f<p;f++)this.vertices[f].multiplyScalar(n);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new o.Sphere(new o.Vector3,n)},o.PolyhedronGeometry.prototype=Object.create(o.Geometry.prototype),o.PolyhedronGeometry.prototype.constructor=o.PolyhedronGeometry,o.DodecahedronGeometry=function(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];o.PolyhedronGeometry.call(this,i,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}},o.DodecahedronGeometry.prototype=Object.create(o.PolyhedronGeometry.prototype),o.DodecahedronGeometry.prototype.constructor=o.DodecahedronGeometry,o.IcosahedronGeometry=function(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];o.PolyhedronGeometry.call(this,r,i,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}},o.IcosahedronGeometry.prototype=Object.create(o.PolyhedronGeometry.prototype),o.IcosahedronGeometry.prototype.constructor=o.IcosahedronGeometry,o.OctahedronGeometry=function(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];o.PolyhedronGeometry.call(this,n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}},o.OctahedronGeometry.prototype=Object.create(o.PolyhedronGeometry.prototype),o.OctahedronGeometry.prototype.constructor=o.OctahedronGeometry,o.TetrahedronGeometry=function(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];o.PolyhedronGeometry.call(this,n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}},o.TetrahedronGeometry.prototype=Object.create(o.PolyhedronGeometry.prototype),o.TetrahedronGeometry.prototype.constructor=o.TetrahedronGeometry,o.ParametricGeometry=function(e,t,n){o.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,a,s,u,l=this.vertices,c=this.faces,h=this.faceVertexUvs[0],f=t+1;for(r=0;r<=n;r++)for(u=r/n,i=0;i<=t;i++)s=i/t,a=e(s,u),l.push(a);var p,d,m,v,g,y,_,b;for(r=0;r<n;r++)for(i=0;i<t;i++)p=r*f+i,d=r*f+i+1,m=(r+1)*f+i+1,v=(r+1)*f+i,g=new o.Vector2(i/t,r/n),y=new o.Vector2((i+1)/t,r/n),_=new o.Vector2((i+1)/t,(r+1)/n),b=new o.Vector2(i/t,(r+1)/n),c.push(new o.Face3(p,d,v)),h.push([g,y,b]),c.push(new o.Face3(d,m,v)),h.push([y.clone(),_,b.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},o.ParametricGeometry.prototype=Object.create(o.Geometry.prototype),o.ParametricGeometry.prototype.constructor=o.ParametricGeometry,o.WireframeGeometry=function(e){function t(e,t){return e-t}o.BufferGeometry.call(this);var n=[0,0],r={},i=["a","b","c"];if(e instanceof o.Geometry){for(var a=e.vertices,s=e.faces,u=0,l=new Uint32Array(6*s.length),c=0,h=s.length;c<h;c++)for(var f=s[c],p=0;p<3;p++){n[0]=f[i[p]],n[1]=f[i[(p+1)%3]],n.sort(t);var d=n.toString();void 0===r[d]&&(l[2*u]=n[0],l[2*u+1]=n[1],r[d]=!0,u++)}for(var m=new Float32Array(2*u*3),c=0,h=u;c<h;c++)for(var p=0;p<2;p++){var v=a[l[2*c+p]],g=6*c+3*p;m[g+0]=v.x,m[g+1]=v.y,m[g+2]=v.z}this.addAttribute("position",new o.BufferAttribute(m,3))}else if(e instanceof o.BufferGeometry)if(null!==e.index){var y=e.index.array,a=e.attributes.position,_=e.groups,u=0;0===_.length&&e.addGroup(0,y.length);for(var l=new Uint32Array(2*y.length),b=0,w=_.length;b<w;++b)for(var x=_[b],E=x.start,M=x.count,c=E,C=E+M;c<C;c+=3)for(var p=0;p<3;p++){n[0]=y[c+p],n[1]=y[c+(p+1)%3],n.sort(t);var d=n.toString();void 0===r[d]&&(l[2*u]=n[0],l[2*u+1]=n[1],r[d]=!0,u++)}for(var m=new Float32Array(2*u*3),c=0,h=u;c<h;c++)for(var p=0;p<2;p++){var g=6*c+3*p,S=l[2*c+p];m[g+0]=a.getX(S),m[g+1]=a.getY(S),m[g+2]=a.getZ(S)}this.addAttribute("position",new o.BufferAttribute(m,3))}else{for(var a=e.attributes.position.array,u=a.length/3,T=u/3,m=new Float32Array(2*u*3),c=0,h=T;c<h;c++)for(var p=0;p<3;p++){var g=18*c+6*p,P=9*c+3*p;m[g+0]=a[P],m[g+1]=a[P+1],m[g+2]=a[P+2];var S=9*c+3*((p+1)%3);m[g+3]=a[S],m[g+4]=a[S+1],m[g+5]=a[S+2]}this.addAttribute("position",new o.BufferAttribute(m,3))}},o.WireframeGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.WireframeGeometry.prototype.constructor=o.WireframeGeometry,o.AxisHelper=function(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),r=new o.BufferGeometry;r.addAttribute("position",new o.BufferAttribute(t,3)),r.addAttribute("color",new o.BufferAttribute(n,3));var i=new o.LineBasicMaterial({vertexColors:o.VertexColors});o.LineSegments.call(this,r,i)},o.AxisHelper.prototype=Object.create(o.LineSegments.prototype),o.AxisHelper.prototype.constructor=o.AxisHelper,o.ArrowHelper=function(){var e=new o.BufferGeometry;e.addAttribute("position",new o.Float32Attribute([0,0,0,0,1,0],3));var t=new o.CylinderBufferGeometry(0,.5,1,5,1);return t.translate(0,-.5,0),function(n,r,i,a,s,u){o.Object3D.call(this),void 0===a&&(a=16776960),void 0===i&&(i=1),void 0===s&&(s=.2*i),void 0===u&&(u=.2*s),this.position.copy(r),this.line=new o.Line(e,new o.LineBasicMaterial({color:a})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new o.Mesh(t,new o.MeshBasicMaterial({color:a})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(i,s,u)}}(),o.ArrowHelper.prototype=Object.create(o.Object3D.prototype),o.ArrowHelper.prototype.constructor=o.ArrowHelper,o.ArrowHelper.prototype.setDirection=function(){var e,t=new o.Vector3;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),o.ArrowHelper.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},o.ArrowHelper.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},o.BoxHelper=function(e,t){void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new o.BufferGeometry;i.setIndex(new o.BufferAttribute(n,1)),i.addAttribute("position",new o.BufferAttribute(r,3)),o.LineSegments.call(this,i,new o.LineBasicMaterial({color:t})),void 0!==e&&this.update(e)},o.BoxHelper.prototype=Object.create(o.LineSegments.prototype),o.BoxHelper.prototype.constructor=o.BoxHelper,o.BoxHelper.prototype.update=function(){var e=new o.Box3;return function(t){if(t instanceof o.Box3?e.copy(t):e.setFromObject(t),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,a=i.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=n.x,a[4]=r.y,a[5]=r.z,a[6]=n.x,a[7]=n.y,a[8]=r.z,a[9]=r.x,a[10]=n.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=n.z,a[15]=n.x,a[16]=r.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=r.x,a[22]=n.y,a[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),o.BoundingBoxHelper=function(e,t){var n=void 0!==t?t:8947848;this.object=e,this.box=new o.Box3,o.Mesh.call(this,new o.BoxGeometry(1,1,1),new o.MeshBasicMaterial({color:n,wireframe:!0}))},o.BoundingBoxHelper.prototype=Object.create(o.Mesh.prototype),o.BoundingBoxHelper.prototype.constructor=o.BoundingBoxHelper,o.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},o.CameraHelper=function(e){function t(e,t,r){n(e,r),n(t,r)}function n(e,t){r.vertices.push(new o.Vector3),r.colors.push(new o.Color(t)),void 0===a[e]&&(a[e]=[]),a[e].push(r.vertices.length-1)}var r=new o.Geometry,i=new o.LineBasicMaterial({color:16777215,vertexColors:o.FaceColors}),a={},s=16755200,u=16711680,l=43775,c=16777215,h=3355443;t("n1","n2",s),t("n2","n4",s),t("n4","n3",s),t("n3","n1",s),t("f1","f2",s),t("f2","f4",s),t("f4","f3",s),t("f3","f1",s),t("n1","f1",s),t("n2","f2",s),t("n3","f3",s),t("n4","f4",s),t("p","n1",u),t("p","n2",u),t("p","n3",u),t("p","n4",u),t("u1","u2",l),t("u2","u3",l),t("u3","u1",l),t("c","t",c),t("p","c",h),t("cn1","cn2",h),t("cn3","cn4",h),t("cf1","cf2",h),t("cf3","cf4",h),o.LineSegments.call(this,r,i),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()},o.CameraHelper.prototype=Object.create(o.LineSegments.prototype),o.CameraHelper.prototype.constructor=o.CameraHelper,o.CameraHelper.prototype.update=function(){function e(e,o,a,s){r.set(o,a,s).unproject(i);var u=n[e];if(void 0!==u)for(var l=0,c=u.length;l<c;l++)t.vertices[u[l]].copy(r)}var t,n,r=new o.Vector3,i=new o.Camera;return function(){t=this.geometry,n=this.pointMap;var r=1,o=1;i.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-r,-o,-1),e("n2",r,-o,-1),e("n3",-r,o,-1),e("n4",r,o,-1),e("f1",-r,-o,1),e("f2",r,-o,1),e("f3",-r,o,1),e("f4",r,o,1),e("u1",.7*r,1.1*o,-1),e("u2",.7*-r,1.1*o,-1),e("u3",0,2*o,-1),e("cf1",-r,0,1),e("cf2",r,0,1),e("cf3",0,-o,1),e("cf4",0,o,1),e("cn1",-r,0,-1),e("cn2",r,0,-1),e("cn3",0,-o,-1),e("cn4",0,o,-1),t.verticesNeedUpdate=!0}}(),o.DirectionalLightHelper=function(e,t){o.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var n=new o.BufferGeometry;n.addAttribute("position",new o.Float32Attribute([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new o.LineBasicMaterial({fog:!1});this.add(new o.Line(n,r)),n=new o.BufferGeometry,n.addAttribute("position",new o.Float32Attribute([0,0,0,0,0,1],3)),this.add(new o.Line(n,r)),this.update()},o.DirectionalLightHelper.prototype=Object.create(o.Object3D.prototype),o.DirectionalLightHelper.prototype.constructor=o.DirectionalLightHelper,o.DirectionalLightHelper.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()},o.DirectionalLightHelper.prototype.update=function(){var e=new o.Vector3,t=new o.Vector3,n=new o.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e);var r=this.children[0],i=this.children[1];r.lookAt(n),r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.lookAt(n),i.scale.z=n.length()}}(),o.EdgesHelper=function(e,t,n){var r=void 0!==t?t:16777215;o.LineSegments.call(this,new o.EdgesGeometry(e.geometry,n),new o.LineBasicMaterial({color:r})),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},o.EdgesHelper.prototype=Object.create(o.LineSegments.prototype),o.EdgesHelper.prototype.constructor=o.EdgesHelper,o.FaceNormalsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,a=void 0!==r?r:1,s=0,u=this.object.geometry;u instanceof o.Geometry?s=u.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new o.BufferGeometry,c=new o.Float32Attribute(2*s*3,3);l.addAttribute("position",c),o.LineSegments.call(this,l,new o.LineBasicMaterial({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()},o.FaceNormalsHelper.prototype=Object.create(o.LineSegments.prototype),o.FaceNormalsHelper.prototype.constructor=o.FaceNormalsHelper,o.FaceNormalsHelper.prototype.update=function(){var e=new o.Vector3,t=new o.Vector3,n=new o.Matrix3;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,l=0,c=s.length;l<c;l++){var h=s[l],f=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),t.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(u,e.x,e.y,e.z),u+=1,i.setXYZ(u,t.x,t.y,t.z),u+=1}return i.needsUpdate=!0,this}}(),o.GridHelper=function(e,t,n,r){t=t||1,n=new o.Color(void 0!==n?n:4473924),r=new o.Color(void 0!==r?r:8947848);for(var i=t/2,a=2*e/t,s=[],u=[],l=0,c=0,h=-e;l<=t;l++,h+=a){s.push(-e,0,h,e,0,h),s.push(h,0,-e,h,0,e);var f=l===i?n:r;f.toArray(u,c),c+=3,f.toArray(u,c),c+=3,f.toArray(u,c),c+=3,f.toArray(u,c),c+=3}var p=new o.BufferGeometry;p.addAttribute("position",new o.Float32Attribute(s,3)),p.addAttribute("color",new o.Float32Attribute(u,3));var d=new o.LineBasicMaterial({vertexColors:o.VertexColors});o.LineSegments.call(this,p,d)},o.GridHelper.prototype=Object.create(o.LineSegments.prototype),o.GridHelper.prototype.constructor=o.GridHelper,o.GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},o.HemisphereLightHelper=function(e,t){o.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new o.Color,new o.Color];var n=new o.SphereGeometry(t,4,2);n.rotateX(-Math.PI/2);for(var r=0,i=8;r<i;r++)n.faces[r].color=this.colors[r<4?0:1];var a=new o.MeshBasicMaterial({vertexColors:o.FaceColors,wireframe:!0});this.lightSphere=new o.Mesh(n,a),this.add(this.lightSphere),this.update()},o.HemisphereLightHelper.prototype=Object.create(o.Object3D.prototype),o.HemisphereLightHelper.prototype.constructor=o.HemisphereLightHelper,o.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},o.HemisphereLightHelper.prototype.update=function(){var e=new o.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),o.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var n=new o.SphereBufferGeometry(t,4,2),r=new o.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),o.Mesh.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},o.PointLightHelper.prototype=Object.create(o.Mesh.prototype),o.PointLightHelper.prototype.constructor=o.PointLightHelper,o.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},o.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},o.SkeletonHelper=function(e){this.bones=this.getBoneList(e);for(var t=new o.Geometry,n=0;n<this.bones.length;n++){var r=this.bones[n];r.parent instanceof o.Bone&&(t.vertices.push(new o.Vector3),t.vertices.push(new o.Vector3),t.colors.push(new o.Color(0,0,1)),t.colors.push(new o.Color(0,1,0)))}t.dynamic=!0;var i=new o.LineBasicMaterial({vertexColors:o.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});o.LineSegments.call(this,t,i),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()},o.SkeletonHelper.prototype=Object.create(o.LineSegments.prototype),o.SkeletonHelper.prototype.constructor=o.SkeletonHelper,o.SkeletonHelper.prototype.getBoneList=function(e){var t=[];e instanceof o.Bone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,this.getBoneList(e.children[n]));return t},o.SkeletonHelper.prototype.update=function(){for(var e=this.geometry,t=(new o.Matrix4).getInverse(this.root.matrixWorld),n=new o.Matrix4,r=0,i=0;i<this.bones.length;i++){var a=this.bones[i];a.parent instanceof o.Bone&&(n.multiplyMatrices(t,a.matrixWorld),e.vertices[r].setFromMatrixPosition(n),n.multiplyMatrices(t,a.parent.matrixWorld),e.vertices[r+1].setFromMatrixPosition(n),r+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},o.SpotLightHelper=function(e){o.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new o.BufferGeometry,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,i=1,a=32;r<a;r++,i++){var s=r/a*Math.PI*2,u=i/a*Math.PI*2;n.push(Math.cos(s),Math.sin(s),1,Math.cos(u),Math.sin(u),1)}t.addAttribute("position",new o.Float32Attribute(n,3));var l=new o.LineBasicMaterial({fog:!1});this.cone=new o.LineSegments(t,l),this.add(this.cone),this.update()},o.SpotLightHelper.prototype=Object.create(o.Object3D.prototype),o.SpotLightHelper.prototype.constructor=o.SpotLightHelper,o.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},o.SpotLightHelper.prototype.update=function(){var e=new o.Vector3,t=new o.Vector3;return function(){var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),o.VertexNormalsHelper=function(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,a=void 0!==r?r:1,s=0,u=this.object.geometry;u instanceof o.Geometry?s=3*u.faces.length:u instanceof o.BufferGeometry&&(s=u.attributes.normal.count);var l=new o.BufferGeometry,c=new o.Float32Attribute(2*s*3,3);l.addAttribute("position",c),o.LineSegments.call(this,l,new o.LineBasicMaterial({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()},o.VertexNormalsHelper.prototype=Object.create(o.LineSegments.prototype),o.VertexNormalsHelper.prototype.constructor=o.VertexNormalsHelper,o.VertexNormalsHelper.prototype.update=function(){var e=new o.Vector3,t=new o.Vector3,n=new o.Matrix3;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,a=this.geometry.attributes.position,s=this.object.geometry;if(s instanceof o.Geometry)for(var u=s.vertices,l=s.faces,c=0,h=0,f=l.length;h<f;h++)for(var p=l[h],d=0,m=p.vertexNormals.length;d<m;d++){var v=u[p[r[d]]],g=p.vertexNormals[d];e.copy(v).applyMatrix4(i),t.copy(g).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(c,e.x,e.y,e.z),c+=1,a.setXYZ(c,t.x,t.y,t.z),c+=1}else if(s instanceof o.BufferGeometry)for(var y=s.attributes.position,_=s.attributes.normal,c=0,d=0,m=y.count;d<m;d++)e.set(y.getX(d),y.getY(d),y.getZ(d)).applyMatrix4(i),t.set(_.getX(d),_.getY(d),_.getZ(d)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(c,e.x,e.y,e.z),c+=1,a.setXYZ(c,t.x,t.y,t.z),c+=1;return a.needsUpdate=!0,this}}(),o.WireframeHelper=function(e,t){var n=void 0!==t?t:16777215;o.LineSegments.call(this,new o.WireframeGeometry(e.geometry),new o.LineBasicMaterial({color:n})),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1},o.WireframeHelper.prototype=Object.create(o.LineSegments.prototype),o.WireframeHelper.prototype.constructor=o.WireframeHelper,o.ImmediateRenderObject=function(e){o.Object3D.call(this),this.material=e,this.render=function(e){}},o.ImmediateRenderObject.prototype=Object.create(o.Object3D.prototype),o.ImmediateRenderObject.prototype.constructor=o.ImmediateRenderObject,o.MorphBlendMesh=function(e,t){o.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,r="__default",i=0,a=n-1,s=n/1;this.createAnimation(r,i,a,s),this.setAnimationWeight(r,1)},o.MorphBlendMesh.prototype=Object.create(o.Mesh.prototype),o.MorphBlendMesh.prototype.constructor=o.MorphBlendMesh,o.MorphBlendMesh.prototype.createAnimation=function(e,t,n,r){var i={start:t,end:n,length:n-t+1,fps:r,duration:(n-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=i,this.animationsList.push(i)},o.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,n=/([a-z]+)_?(\d+)/i,r={},i=this.geometry,o=0,a=i.morphTargets.length;o<a;o++){var s=i.morphTargets[o],u=s.name.match(n);if(u&&u.length>1){var l=u[1];r[l]||(r[l]={start:1/0,end:-(1/0)});var c=r[l];o<c.start&&(c.start=o),o>c.end&&(c.end=o),t||(t=l)}}for(var l in r){var c=r[l];this.createAnimation(l,c.start,c.end,e)}this.firstAnimation=t},o.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},o.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},o.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},o.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},o.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},o.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},o.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,n=this.animationsMap[e];return n&&(t=n.time),t},o.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,n=this.animationsMap[e];return n&&(t=n.duration),t},o.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},o.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},o.MorphBlendMesh.prototype.update=function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var r=this.animationsList[t];if(r.active){var i=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var a=r.start+o.Math.clamp(Math.floor(r.time/i),0,r.length-1),s=r.weight;a!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*s,this.morphTargetInfluences[a]=0,r.lastFrame=r.currentFrame,r.currentFrame=a);var u=r.time%i/i;r.directionBackwards&&(u=1-u),r.currentFrame!==r.lastFrame?(this.morphTargetInfluences[r.currentFrame]=u*s,this.morphTargetInfluences[r.lastFrame]=(1-u)*s):this.morphTargetInfluences[r.currentFrame]=s}}}},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function i(e){this.message=e,this.stack=""}function o(e){function t(t,n,r,o,a,s,u){o=o||S,s=s||r;if(null==n[r]){var l=x[a];return t?new i("Required "+l+" `"+s+"` was not specified in "+("`"+o+"`.")):null}return e(n,r,o,a,s)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function a(e){function t(t,n,r,o,a,s){var u=t[n],l=y(u);if(l!==e){var c=x[o],h=_(u);return new i("Invalid "+c+" `"+a+"` of type "+("`"+h+"` supplied to `"+r+"`, expected ")+("`"+e+"`."))}return null}return o(t)}function s(){return o(M.thatReturns(null))}function u(e){function t(t,n,r,o,a){if("function"!=typeof e)return new i("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){var u=x[o],l=y(s);return new i("Invalid "+u+" `"+a+"` of type "+("`"+l+"` supplied to `"+r+"`, expected an array."))}for(var c=0;c<s.length;c++){var h=e(s,c,r,o,a+"["+c+"]",E);if(h instanceof Error)return h}return null}return o(t)}function l(){function e(e,t,n,r,o){var a=e[t];if(!w.isValidElement(a)){var s=x[r],u=y(a);return new i("Invalid "+s+" `"+o+"` of type "+("`"+u+"` supplied to `"+n+"`, expected a single ReactElement."))}return null}return o(e)}function c(e){function t(t,n,r,o,a){if(!(t[n]instanceof e)){var s=x[o],u=e.name||S,l=b(t[n]);return new i("Invalid "+s+" `"+a+"` of type "+("`"+l+"` supplied to `"+r+"`, expected ")+("instance of `"+u+"`."))}return null}return o(t)}function h(e){function t(t,n,o,a,s){for(var u=t[n],l=0;l<e.length;l++)if(r(u,e[l]))return null;var c=x[a],h=JSON.stringify(e);return new i("Invalid "+c+" `"+s+"` of value `"+u+"` "+("supplied to `"+o+"`, expected one of "+h+"."))}return Array.isArray(e)?o(t):M.thatReturnsNull}function f(e){function t(t,n,r,o,a){if("function"!=typeof e)return new i("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],u=y(s);if("object"!==u){var l=x[o];return new i("Invalid "+l+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an object."))}for(var c in s)if(s.hasOwnProperty(c)){var h=e(s,c,r,o,a+"."+c,E);if(h instanceof Error)return h}return null}return o(t)}function p(e){function t(t,n,r,o,a){for(var s=0;s<e.length;s++){var u=e[s];if(null==u(t,n,r,o,a,E))return null}var l=x[o];return new i("Invalid "+l+" `"+a+"` supplied to "+("`"+r+"`."))}return Array.isArray(e)?o(t):M.thatReturnsNull}function d(){function e(e,t,n,r,o){if(!v(e[t])){var a=x[r];return new i("Invalid "+a+" `"+o+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return o(e)}function m(e){function t(t,n,r,o,a){var s=t[n],u=y(s);if("object"!==u){var l=x[o];return new i("Invalid "+l+" `"+a+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `object`."))}for(var c in e){var h=e[c];if(h){var f=h(s,c,r,o,a+"."+c,E);if(f)return f}}return null}return o(t)}function v(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(v);if(null===e||w.isValidElement(e))return!0;var t=C(e);if(!t)return!1;var n,r=t.call(e);if(t!==e.entries){for(;!(n=r.next()).done;)if(!v(n.value))return!1}else for(;!(n=r.next()).done;){var i=n.value;if(i&&!v(i[1]))return!1}return!0;default:return!1}}function g(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function y(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":g(t,e)?"symbol":t}function _(e){var t=y(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function b(e){return e.constructor&&e.constructor.name?e.constructor.name:S}var w=n(14),x=n(39),E=n(78),M=n(17),C=n(148),S=(n(5),"<<anonymous>>"),T={array:a("array"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),symbol:a("symbol"),any:s(),arrayOf:u,element:l(),instanceOf:c,node:d(),objectOf:f,oneOf:h,oneOfType:p,shape:m};i.prototype=Error.prototype,e.exports=T},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;u=new Error(t.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}e.exports=r},function(e,t){"use strict";function n(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var i=new Error(n);throw i.name="Invariant Violation",i.framesToPop=1,i}e.exports=n},[384,17],3,function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}var i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,a,s=n(e),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var l in r)i.call(r,l)&&(s[l]=r[l]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(r);for(var c=0;c<a.length;c++)o.call(r,a[c])&&(s[a[c]]=r[a[c]])}}return s}},function(e,t,n){"use strict";function r(e){for(var t;t=e._renderedComponent;)e=t;return e}function i(e,t){var n=r(e);n._hostNode=t,t[m]=n}function o(e){var t=e._hostNode;t&&(delete t[m],e._hostNode=null)}function a(e,t){if(!(e._flags&d.hasCachedChildNodes)){var n=e._renderedChildren,o=t.firstChild;e:for(var a in n)if(n.hasOwnProperty(a)){var s=n[a],u=r(s)._domID;if(0!==u){for(;null!==o;o=o.nextSibling)if(1===o.nodeType&&o.getAttribute(p)===String(u)||8===o.nodeType&&o.nodeValue===" react-text: "+u+" "||8===o.nodeType&&o.nodeValue===" react-empty: "+u+" "){i(s,o);continue e}c("32",u)}}e._flags|=d.hasCachedChildNodes}}function s(e){if(e[m])return e[m];for(var t=[];!e[m];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,r;e&&(r=e[m]);e=t.pop())n=r,t.length&&a(r,e);return n}function u(e){var t=s(e);return null!=t&&t._hostNode===e?t:null}function l(e){if(void 0===e._hostNode?c("33"):void 0,e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent?void 0:c("34"),e=e._hostParent;for(;t.length;e=t.pop())a(e,e._hostNode);return e._hostNode}var c=n(4),h=n(30),f=n(127),p=(n(3),h.ID_ATTRIBUTE_NAME),d=f,m="__reactInternalInstance$"+Math.random().toString(36).slice(2),v={getClosestInstanceFromNode:s,getInstanceFromNode:u,getNodeFromInstance:l,precacheChildNodes:a,precacheNode:i,uncacheNode:o};e.exports=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.constructor&&(e.constructor.name||e.constructor.displayName)?e.constructor.name||e.constructor.displayName:p}function o(e){function t(t,n,r,i,o,a){var s=i||p,u=a||r;if(void 0===n[r]){var l=c.default[o];return t?new f.default("Required "+l+" `"+u+"`"+(" was not specified in `"+s+"`.")):null}for(var h=arguments.length,d=Array(h>6?h-6:0),m=6;m<h;m++)d[m-6]=arguments[m];return e.apply(void 0,[n,r,s,o,u].concat(d))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function a(e){function t(t,r,o,a,s){for(var u=arguments.length,l=Array(u>5?u-5:0),h=5;h<u;h++)l[h-5]=arguments[h];var d=n.apply(void 0,[t,r,o,a,s].concat(l));if(null!==d){var m=c.default[a],v=e.name||e.displayName||p,g=i(t[r]);return new f.default("Invalid "+m+" `"+s+"` of type "+("`"+g+"` supplied to `"+o+"`, expected ")+("instance of `"+v+"`."))}return d}var n=u.default.instanceOf(e),r=o(t),a=""+(e.displayName||e.name||e._type||e);return r.toString=function(){return"``` "+a+" ```"},r.isRequired.toString=function(){return r.toString()+" *``` required ```*"},r.displayName=a,r.isRequired.displayName=a,r}var s=n(2),u=r(s),l=n(39),c=r(l),h=n(118),f=r(h),p="<<anonymous>>";e.exports=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=n(1),f=r(h),p=n(6),d=r(p),m=n(2),v=r(m),g=n(13),y=r(g),_=n(51),b=r(_),w=n(9),x=r(w),E=(0,b.default)(s=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasName(),n.hasProp("vertices",{type:v.default.arrayOf((0,x.default)(f.default.Vector3)),update:function(e,t,n){n&&e.vertices!==t&&(e.vertices=t,e.verticesNeedUpdate=!0)},updateInitial:!0,default:[]}),n.hasProp("colors",{type:v.default.arrayOf((0,x.default)(f.default.Color)),update:function(e,t,n){n&&e.colors!==t&&(e.colors=t,e.colorsNeedUpdate=!0)},updateInitial:!0,default:[]}),n.hasProp("faceVertexUvs",{type:v.default.arrayOf(v.default.arrayOf(v.default.arrayOf(f.default.Vector2))),update:function(e,t,n){n&&e.faceVertexUvs!==t&&(e.faceVertexUvs=t,e.uvsNeedUpdate=!0)},updateInitial:!0,default:[]}),n.hasProp("faces",{type:v.default.arrayOf((0,x.default)(f.default.Face3)),update:function(e,t,n){n&&e.faces!==t&&(e.faces=t,e.verticesNeedUpdate=!0,e.elementsNeedUpdate=!0)},updateInitial:!0,default:[]}),n.hasProp("dynamic",{type:v.default.bool,update:function(e,t){e.dynamic=!!t},default:!1}),n}return a(t,e),l(t,[{key:"setParent",value:function(e,n){(0,d.default)(n instanceof f.default.Mesh||n instanceof f.default.Points||n instanceof f.default.Line,"Parent is not a mesh"),(0,d.default)(void 0===n.geometry,"Parent already has a geometry"),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n),n.geometry=e}},{key:"applyInitialProps",value:function(e,n){e.userData=u({},e.userData),n.hasOwnProperty("dynamic")&&(e.dynamic=!!n.dynamic),e.userData._remountAfterPropsUpdate=!1,c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n)}},{key:"unmount",value:function(e){var n=e.userData.markup.parentMarkup.threeObject;(n instanceof f.default.Mesh||n instanceof f.default.Points)&&n.geometry===e&&(n.geometry=void 0),e.dispose(),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}},{key:"highlight",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;e.userData.events.emit("highlight",{uuid:e.uuid,boundingBoxFunc:function(){var e=new f.default.Box3;return e.setFromObject(t),[e]}})}},{key:"getBoundingBoxes",value:function(e){var t=e.userData.markup.parentMarkup.threeObject,n=new f.default.Box3;return n.setFromObject(t),[n]}},{key:"hideHighlight",value:function(e){e.userData.events.emit("hideHighlight")}}]),t}(y.default))||s;e.exports=E},function(e,t,n){"use strict";var r=null;e.exports={debugTool:r}},function(e,t){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(6),u=r(s),l=n(57),c=(r(l),n(29)),h=r(c),f=n(177),p=r(f),d=n(2),m=r(d),v=n(145),g=(r(v),n(108)),y=(r(g),p.default.EventEmitter),_=function(){function e(t){i(this,e),this.react3RendererInstance=t,this.propUpdates={},this.propDeletes={},this.propDefaults={},this._initialOnly={},this._updateInitial=[],this._simpleProperties=[],this.propTypes={},this._hasName=!1}return a(e,[{key:"hasEvent",value:function(e){this._hasEvents=!0,this.hasProp(e,{type:m.default.func,updateInitial:!0,update:function(t,n){t.userData._eventCallbacks[e]=n},default:null})}},{key:"removeProp",value:function(e){(0,u.default)(this.propTypes.hasOwnProperty(e),"The property %s has not been defined",e);var t=this._simpleProperties.indexOf(e);t!==-1&&this._simpleProperties.splice(t,1),delete this.propTypes[e],delete this.propDeletes[e],delete this.propUpdates[e],delete this.propDefaults[e];var n=this._updateInitial.indexOf(e);n!==-1&&this._updateInitial.splice(n,1),delete this._initialOnly[e]}},{key:"hasProp",value:function(e,t){var n=this;if((0,u.default)(t.hasOwnProperty("type"),"The information should include a `type` property"),(0,u.default)(!this.propTypes.hasOwnProperty(e)||t.override,"The property %s has already been defined",e),t.override){var r=this._simpleProperties.indexOf(e);r!==-1&&this._simpleProperties.splice(r,1)}this.propTypes[e]=t.type,t.hasOwnProperty("simple")?(this.registerSimpleProperties([e]),t.hasOwnProperty("default")&&(this.propDeletes[e]=function(r){n.propUpdates[e](r,t.default,!0)},this.propDefaults[e]=t.default)):(t.hasOwnProperty("update")&&(this.propUpdates[e]=t.update),t.hasOwnProperty("default")?((0,u.default)(t.hasOwnProperty("update"),"The information should include a `update` property if it has a `default` property"),this.propDeletes[e]=function(e){t.update(e,t.default,!0)},this.propDefaults[e]=t.default):(0,u.default)(t.update===this.triggerRemount,"The type information for "+this.constructor.name+"."+e+" should include a `default` property if it's not going to trigger remount"),t.hasOwnProperty("remove")&&(0,u.default)(!1,"Bad 'remove' info for "+this.constructor.name+"."+e),t.hasOwnProperty("updateInitial")&&((0,u.default)(t.hasOwnProperty("update"),"The information should include a `update` property if it has a`updateInitial` property"),this._updateInitial.indexOf(e)===-1&&this._updateInitial.push(e)),t.initialOnly&&(0,u.default)(t.hasOwnProperty("updateInitial"),"The information should include a `updateInitial` property if it has an `initialOnly` property"),this._initialOnly[e]=t.initialOnly)}},{key:"hasName",value:function(){var e=this;this._hasName=!0,this.hasProp("name",{type:m.default.string,update:function(t,n){e._updateName(t,n)},default:""})}},{key:"_updateName",value:function(e,t){var n=e.name;e.name=t,e.userData.events.emit("rename",{oldName:n,nextName:t});var r=e.userData.markup;r._rootInstance&&r._rootInstance.objectRenamed(e,n,t)}},{key:"placeRemountTrigger",value:function(e,t){e.userData._triggerRemount=t}},{key:"applyInitialProps",value:function(e,t){var n=this,r=new y;this._hasName&&t.name&&(e.name=t.name),this._hasEvents&&(e.userData._eventCallbacks={}),r.on("resource.added",function(t){var n=e.userData.markup.childrenMarkup,r=o({},t,{distance:t.distance+1});n.forEach(function(e){return e.threeObject.userData.events.emit("resource.added",r)})}),r.on("resource.removed",function(t){var n=e.userData.markup.childrenMarkup,r=o({},t,{distance:t.distance+1});n.forEach(function(e){return e.threeObject.userData.events.emit("resource.removed",r)})}),e.userData.events=r,e.userData._descriptor=this,this._updateInitial.forEach(function(r){if(t.hasOwnProperty(r))n.propUpdates[r](e,t[r],!0);else{var i=void 0;n.propDefaults.hasOwnProperty(r)&&(i=n.propDefaults[r]),n.propUpdates[r](e,i,!1)}}),this._simpleProperties.forEach(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])})}},{key:"construct",value:function(e){(0,u.default)(!1,"Missing constructor!")}},{key:"addChildren",value:function(e,t){(0,u.default)(!1,"Cannot add children to "+this.constructor.name+"!")}},{key:"addChild",value:function(e,t,n){(0,u.default)(!1,"Cannot add child to "+this.constructor.name+"!")}},{key:"moveChild",value:function(){(0,u.default)(!1,"Cannot move children in "+this.constructor.name+"!")}},{key:"removeChild",value:function(e,t){(0,u.default)(!1,"Cannot remove children in "+this.constructor.name+"!")}},{key:"setParent",value:function(e,t){var n=t.userData.markup;n&&n._rootInstance&&n._rootInstance.objectMounted(e)}},{key:"componentWillUnmount",value:function(e){}},{key:"unmount",value:function(e){var t=e.userData.markup;t._rootInstance&&t._rootInstance.objectRemoved(e),this._hasEvents&&delete e.userData._eventCallbacks,e.userData.events.emit("dispose",{object:e}),e.userData.events.removeAllListeners()}},{key:"removedFromParent",value:function(e){delete e.userData.events}},{key:"deleteProperty",value:function(e,t){this.propDeletes[t]&&this.propDeletes[t](e)}},{key:"updateProperty",value:function(e,t,n){this._initialOnly[t]?this.triggerRemount(e):this.propUpdates[t]?this.propUpdates[t](e,n,!0):((0,h.default)(!1,"updating prop "+t+" ( "+n+" ) for "+this.constructor.name),this.triggerRemount(e))}},{key:"highlight",value:function(e){}},{key:"hideHighlight",value:function(e){}},{key:"useSimpleUpdates",value:function(e){for(var t=0;t<e.length;++t){var n=e[t];this.propUpdates[n]=this._updateSimple.bind(this,n)}}},{key:"_updateSimple",value:function(e,t,n){t[e]=n}},{key:"registerSimpleProperties",value:function(e){var t=this;e.forEach(function(e){t._simpleProperties.indexOf(e)===-1&&t._simpleProperties.push(e)}),this.useSimpleUpdates(e)}},{key:"getBoundingBoxes",value:function(e){return[]}},{key:"triggerRemount",value:function(e){e.userData._triggerRemount&&(e.userData._triggerRemount(),delete e.userData._triggerRemount)}},{key:"beginPropertyUpdates",value:function(e){}},{key:"completePropertyUpdates",value:function(e){}},{key:"beginChildUpdates",value:function(e){}},{key:"completeChildUpdates",value:function(e){}}]),e}();e.exports=_},function(e,t,n){"use strict";function r(e){return void 0!==e.ref}function i(e){return void 0!==e.key}var o=n(7),a=n(20),s=(n(5),n(144),Object.prototype.hasOwnProperty),u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,l={key:!0,ref:!0,__self:!0,__source:!0},c=function(e,t,n,r,i,o,a){var s={$$typeof:u,type:e,key:t,ref:n,props:a,_owner:o};return s};c.createElement=function(e,t,n){var o,u={},h=null,f=null,p=null,d=null;if(null!=t){r(t)&&(f=t.ref),i(t)&&(h=""+t.key),p=void 0===t.__self?null:t.__self,d=void 0===t.__source?null:t.__source;for(o in t)s.call(t,o)&&!l.hasOwnProperty(o)&&(u[o]=t[o])}var m=arguments.length-2;if(1===m)u.children=n;else if(m>1){for(var v=Array(m),g=0;g<m;g++)v[g]=arguments[g+2];u.children=v}if(e&&e.defaultProps){var y=e.defaultProps;for(o in y)void 0===u[o]&&(u[o]=y[o])}return c(e,h,f,p,d,a.current,u)},c.createFactory=function(e){var t=c.createElement.bind(null,e);return t.type=e,t},c.cloneAndReplaceKey=function(e,t){var n=c(e.type,t,e.ref,e._self,e._source,e._owner,e.props);return n},c.cloneElement=function(e,t,n){var u,h=o({},e.props),f=e.key,p=e.ref,d=e._self,m=e._source,v=e._owner;if(null!=t){r(t)&&(p=t.ref,v=a.current),i(t)&&(f=""+t.key);var g;e.type&&e.type.defaultProps&&(g=e.type.defaultProps);for(u in t)s.call(t,u)&&!l.hasOwnProperty(u)&&(void 0===t[u]&&void 0!==g?h[u]=g[u]:h[u]=t[u])}var y=arguments.length-2;if(1===y)h.children=n;else if(y>1){for(var _=Array(y),b=0;b<y;b++)_[b]=arguments[b+2];h.children=_}return c(e.type,f,p,d,m,v,h)},c.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===u},c.REACT_ELEMENT_TYPE=u,e.exports=c},function(e,t,n){"use strict";e.exports=n(318)},function(e,t,n){"use strict";function r(e){return"[object Array]"===E.call(e)}function i(e){return"[object ArrayBuffer]"===E.call(e)}function o(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function l(e){return"undefined"==typeof e}function c(e){return null!==e&&"object"==typeof e}function h(e){return"[object Date]"===E.call(e)}function f(e){return"[object File]"===E.call(e)}function p(e){return"[object Blob]"===E.call(e)}function d(e){return"[object Function]"===E.call(e)}function m(e){return c(e)&&d(e.pipe)}function v(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function g(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function y(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function _(e,t){if(null!==e&&"undefined"!=typeof e)if("object"==typeof e||r(e)||(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function b(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=b(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)_(arguments[n],e);return t}function w(e,t,n){return _(t,function(t,r){n&&"function"==typeof t?e[r]=x(t,n):e[r]=t}),e}var x=n(92),E=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:i,isFormData:o,isArrayBufferView:a,isString:s,isNumber:u,isObject:c,isUndefined:l,isDate:h,isFile:f,isBlob:p,isFunction:d,isStream:m,isURLSearchParams:v,isStandardBrowserEnv:y,forEach:_,merge:b,extend:w,trim:g}},function(e,t){"use strict";function n(e){return function(){return e}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){e.splice(n,0,e.splice(t,1)[0])}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(1),h=r(c),f=n(6),p=(r(f),n(2)),d=r(p),m=n(13),v=r(m),g=n(9),y=r(g),_=function(e){function t(e){function n(e){return function(t,n){t[e].copy(n)}}i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.hasName(),r.hasProp("position",{type:(0,y.default)(h.default.Vector3),update:function(e,t){e.position.copy(t),e.userData._lookAt&&e.lookAt(e.userData._lookAt)},default:new h.default.Vector3}),r.hasProp("rotation",{type:(0,y.default)(h.default.Euler),update:function(e,t){e.rotation.copy(t)},default:new h.default.Euler}),r.hasProp("quaternion",{type:(0,y.default)(h.default.Quaternion),update:n("quaternion"),default:new h.default.Quaternion}),r.hasProp("scale",{type:(0,y.default)(h.default.Vector3),update:n("scale"),default:new h.default.Vector3(1,1,1)}),r.hasProp("lookAt",{type:(0,y.default)(h.default.Vector3),update:function(e,t){e.userData._lookAt=t,t&&e.lookAt(t)},default:void 0}),["frustumCulled","visible"].forEach(function(e){r.hasProp(e,{type:d.default.bool,simple:!0,default:!0})}),r.hasProp("renderOrder",{type:d.default.number,simple:!0}),r.hasProp("castShadow",{type:d.default.bool,simple:!0,default:!1}),r.hasProp("receiveShadow",{type:d.default.bool,updateInitial:!0,update:function(e,t){e.receiveShadow=t,e.material&&(e.material.needsUpdate=!0)},default:!1}),r}return a(t,e),u(t,[{key:"construct",value:function(){return new h.default.Object3D}},{key:"applyInitialProps",value:function(e,n){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),n.position&&e.position.copy(n.position),n.scale&&e.scale.copy(n.scale),n.rotation&&e.rotation.copy(n.rotation),n.quaternion&&e.quaternion.copy(n.quaternion),n.lookAt&&(e.userData._lookAt=n.lookAt,e.lookAt(n.lookAt))}},{key:"addChildren",value:function(e,t){t.forEach(function(t){e.add(t)})}},{key:"addChild",value:function(e,t,n){e.add(t),this.moveChild(e,t,n,e.children.length-1)}},{key:"removeChild",value:function(e,t){e.remove(t)}},{key:"moveChild",value:function(e,t,n,r){s(e.children,e.children.indexOf(t),n)}},{key:"highlight",value:function(e){var t=this;e.userData.events.emit("highlight",{uuid:e.uuid,boundingBoxFunc:function(){return t.getBoundingBoxes(e)}})}},{key:"getBoundingBoxes",value:function(e){var t=new h.default.Box3;return t.setFromObject(e),[t]}},{key:"hideHighlight",value:function(e){e.userData.events.emit("hideHighlight")}}]),t}(v.default);e.exports=_},function(e,t,n){"use strict";function r(){T.ReactReconcileTransaction&&w?void 0:c("123")}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=f.getPooled(),this.reconcileTransaction=T.ReactReconcileTransaction.getPooled(!0)}function o(e,t,n,i,o,a){r(),w.batchedUpdates(e,t,n,i,o,a)}function a(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;t!==g.length?c("124",t,g.length):void 0,g.sort(a),y++;for(var n=0;n<t;n++){var r=g[n],i=r._pendingCallbacks;r._pendingCallbacks=null;var o;if(d.logTopLevelRenders){var s=r;r._currentElement.props===r._renderedComponent._currentElement&&(s=r._renderedComponent),o="React update: "+s.getName(),console.time(o)}if(m.performUpdateIfNecessary(r,e.reconcileTransaction,y),o&&console.timeEnd(o),i)for(var u=0;u<i.length;u++)e.callbackQueue.enqueue(i[u],r.getPublicInstance())}}function u(e){return r(),w.isBatchingUpdates?(g.push(e),void(null==e._updateBatchNumber&&(e._updateBatchNumber=y+1))):void w.batchedUpdates(u,e)}function l(e,t){w.isBatchingUpdates?void 0:c("125"),_.enqueue(e,t),b=!0}var c=n(4),h=n(7),f=n(123),p=n(26),d=n(131),m=n(27),v=n(41),g=(n(3),[]),y=0,_=f.getPooled(),b=!1,w=null,x={initialize:function(){this.dirtyComponentsLength=g.length},close:function(){this.dirtyComponentsLength!==g.length?(g.splice(0,this.dirtyComponentsLength),C()):g.length=0}},E={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},M=[x,E];h(i.prototype,v.Mixin,{getTransactionWrappers:function(){return M},destructor:function(){this.dirtyComponentsLength=null,f.release(this.callbackQueue),this.callbackQueue=null,T.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return v.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),p.addPoolingTo(i);var C=function(){for(;g.length||b;){if(g.length){var e=i.getPooled();e.perform(s,null,e),i.release(e)}if(b){b=!1;var t=_;_=f.getPooled(),t.notifyAll(),f.release(t)}}},S={injectReconcileTransaction:function(e){e?void 0:c("126"),T.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e?void 0:c("127"),"function"!=typeof e.batchedUpdates?c("128"):void 0,"boolean"!=typeof e.isBatchingUpdates?c("129"):void 0,w=e}},T={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:u,flushBatchedUpdates:C,injection:S,asap:l};e.exports=T},function(e,t){"use strict";var n={current:null};e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=n(1),f=r(h),p=n(6),d=r(p),m=n(2),v=r(m),g=n(13),y=r(g),_=n(51),b=r(_),w=n(32),x=r(w),E=n(9),M=r(E),C=(0,b.default)(s=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._invalidChild=function(e){return n.invalidChildInternal(e)},n.hasProp("slot",{type:v.default.string,updateInitial:!0,update:function(e,t,n){n?e.userData._materialSlot=t:e.userData._materialSlot="material"},default:"material"}),n.hasProp("transparent",{type:v.default.bool,simple:!0}),n.hasProp("alphaTest",{type:v.default.number,updateInitial:!0,update:function(e,t){e.alphaTest=t,e.needsUpdate=!0},default:0}),n.hasProp("side",{type:v.default.oneOf([f.default.FrontSide,f.default.BackSide,f.default.DoubleSide]),updateInitial:!0,update:function(e,t){e.side=t},default:f.default.FrontSide}),n.hasProp("opacity",{type:v.default.number,simple:!0}),n.hasProp("visible",{type:v.default.bool,simple:!0,default:!0}),n._colors=[],n}return a(t,e),l(t,[{key:"getMaterialDescription",value:function(e){var t={};return this._colors.forEach(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),e.hasOwnProperty("side")&&(t.side=e.side),t}},{key:"hasColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"color",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777215;this._colors.push(e),this.hasProp(e,{type:v.default.oneOfType([(0,M.default)(f.default.Color),v.default.number,v.default.string]),update:function(t,n){t[e].set(n)},default:t})}},{key:"hasWireframe",value:function(){this.hasProp("wireframe",{type:v.default.bool,simple:!0,default:!1}),this.hasProp("wireframeLinewidth",{type:v.default.number,simple:!0,default:1})}},{key:"construct",value:function(){return new f.default.Material({})}},{key:"applyInitialProps",value:function(e,n){e.userData=u({},e.userData),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n)}},{key:"setParent",value:function(e,n){(0,d.default)(n instanceof f.default.Mesh||n instanceof f.default.Points||n instanceof f.default.Sprite||n instanceof f.default.Line,"Parent is not a mesh"),(0,d.default)(void 0===n[e.userData._materialSlot]||null===n[e.userData._materialSlot],"Parent already has a "+e.userData._materialSlot+" defined"),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n),n[e.userData._materialSlot]=e}},{key:"unmount",value:function(e){var n=e.userData.markup.parentMarkup.threeObject;if(n instanceof f.default.Mesh||n instanceof f.default.Sprite||n instanceof f.default.Line||n instanceof f.default.Points){var r=e.userData._materialSlot;n[r]===e&&(n[r]=void 0)}e.dispose(),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}},{key:"highlight",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;e.userData.events.emit("highlight",{uuid:e.uuid,boundingBoxFunc:function(){var e=new f.default.Box3;return t&&t.geometry&&t.geometry.computeBoundingBox&&t.geometry.computeBoundingBox(),e.setFromObject(t),[e]}})}},{key:"getBoundingBoxes",value:function(e){var t=new f.default.Box3,n=e.userData.markup.parentMarkup.threeObject;return n&&n.geometry&&n.geometry.computeBoundingBox&&n.geometry.computeBoundingBox(),t.setFromObject(n),[t]}},{key:"hideHighlight",value:function(e){e.userData.events.emit("hideHighlight")}},{key:"addChildren",value:function(e,t){(0,d.default)(0===t.filter(this._invalidChild).length,"Material children can only be textures or texture resource references!")}},{key:"addChild",value:function(e,t){this.addChildren(e,[t])}},{key:"moveChild",value:function(){}},{key:"removeChild",value:function(){}},{key:"invalidChildInternal",value:function(e){var t=!(e instanceof f.default.Texture||e instanceof x.default);return t}}]),t}(y.default))||s;e.exports=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=r(a),u=function(){function e(){i(this,e),this.uuid=s.default.Math.generateUUID(),this.userData={}}return o(e,[{key:"performAction",value:function(e){}}]),e}();e.exports=u},function(e,t,n){"use strict";var r=n(42),i=r({bubbled:null,captured:null}),o=r({topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null}),a={topLevelTypes:o,PropagationPhases:i};e.exports=a},function(e,t,n){"use strict";function r(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var i=this.constructor.Interface;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s?this[o]=s(n):"target"===o?this.target=r:this[o]=n[o]}var u=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;return u?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}var i=n(7),o=n(26),a=n(17),s=(n(5),"function"==typeof Proxy,["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),u={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),r.Interface=u,r.augmentClass=function(e,t){var n=this,r=function(){};r.prototype=n.prototype;var a=new r;i(a,e.prototype),e.prototype=a,e.prototype.constructor=e,e.Interface=i({},n.Interface,t),e.augmentClass=n.augmentClass,o.addPoolingTo(e,o.fourArgumentPooler)},o.addPoolingTo(r,o.fourArgumentPooler),e.exports=r},function(e,t){"use strict";var n=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=n},function(e,t,n){"use strict";var r=n(4),i=(n(3),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),o=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},a=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},s=function(e,t,n,r){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,e,t,n,r),o}return new i(e,t,n,r)},u=function(e,t,n,r,i){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,e,t,n,r,i),a}return new o(e,t,n,r,i)},l=function(e){var t=this;e instanceof t?void 0:r("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},c=10,h=i,f=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||h,n.poolSize||(n.poolSize=c),n.release=l,n},p={addPoolingTo:f,oneArgumentPooler:i,twoArgumentPooler:o,threeArgumentPooler:a,fourArgumentPooler:s,fiveArgumentPooler:u};e.exports=p},function(e,t,n){"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=n(140),o=(n(11),n(5),{mountComponent:function(e,t,n,i,o,a){var s=e.mountComponent(t,n,i,o,a);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(r,e),s},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){i.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,n,o){var a=e._currentElement;if(t!==a||o!==e._context){var s=i.shouldUpdateRefs(a,t);s&&i.detachRefs(e,a),e.receiveComponent(t,n,o),s&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t,n){e._updateBatchNumber===n&&e.performUpdateIfNecessary(t)}});e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){
var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(13),d=r(p),m=n(110),v=r(m),g=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"setParent",value:function(e,n){(0,f.default)(n instanceof c.default.Path||n instanceof v.default,"Shape action commands (%s) can only be added to shapes, paths or holes.",this.constructor.name),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n)}},{key:"highlight",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;t.userData._descriptor.highlight(t)}},{key:"getBoundingBoxes",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;return t.userData._descriptor.getBoundingBoxes(t)}}]),t}(d.default);e.exports=g},[384,120],function(e,t,n){"use strict";function r(e,t){return(e&t)===t}var i=n(4),o=(n(3),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=o,n=e.Properties||{},a=e.DOMAttributeNamespaces||{},u=e.DOMAttributeNames||{},l=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var h in n){s.properties.hasOwnProperty(h)?i("48",h):void 0;var f=h.toLowerCase(),p=n[h],d={attributeName:f,attributeNamespace:null,propertyName:h,mutationMethod:null,mustUseProperty:r(p,t.MUST_USE_PROPERTY),hasBooleanValue:r(p,t.HAS_BOOLEAN_VALUE),hasNumericValue:r(p,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(p,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(p,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(d.hasBooleanValue+d.hasNumericValue+d.hasOverloadedBooleanValue<=1?void 0:i("50",h),u.hasOwnProperty(h)){var m=u[h];d.attributeName=m}a.hasOwnProperty(h)&&(d.attributeNamespace=a[h]),l.hasOwnProperty(h)&&(d.propertyName=l[h]),c.hasOwnProperty(h)&&(d.mutationMethod=c[h]),s.properties[h]=d}}}),a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},injection:o};e.exports=s},function(e,t){"use strict";var n={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(1),a=r(o),s=function e(t){i(this,e),this.uuid=a.default.Math.generateUUID(),this.resourceId=t,this.userData={}};e.exports=s},function(e,t,n){"use strict";function r(e){if(v){var t=e.node,n=e.children;if(n.length)for(var r=0;r<n.length;r++)g(t,n[r],null);else null!=e.html?h(t,e.html):null!=e.text&&p(t,e.text)}}function i(e,t){e.parentNode.replaceChild(t.node,e),r(t)}function o(e,t){v?e.children.push(t):e.node.appendChild(t.node)}function a(e,t){v?e.html=t:h(e.node,t)}function s(e,t){v?e.text=t:p(e.node,t)}function u(){return this.node.nodeName}function l(e){return{node:e,children:[],html:null,text:null,toString:u}}var c=n(71),h=n(61),f=n(79),p=n(152),d=1,m=11,v="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),g=f(function(e,t,n){t.node.nodeType===m||t.node.nodeType===d&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===c.html)?(r(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),r(t))});l.insertTreeBefore=g,l.replaceChildWithTree=i,l.queueChild=o,l.queueHTML=a,l.queueText=s,e.exports=l},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){m&&p&&(m=!1,p.length?d=p.concat(d):v=-1,d.length&&s())}function s(){if(!m){var e=i(a);m=!0;for(var t=d.length;t;){for(p=d,d=[];++v<t;)p&&p[v].run();v=-1,t=d.length}p=null,m=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,h,f=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var p,d=[],m=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new u(e,t)),1!==d.length||m||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(4),i=n(53),o=n(72),a=n(76),s=n(143),u=n(147),l=(n(3),{}),c=null,h=function(e,t){e&&(o.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},f=function(e){return h(e,!0)},p=function(e){return h(e,!1)},d=function(e){return"."+e._rootNodeID},m={injection:{injectEventPluginOrder:i.injectEventPluginOrder,injectEventPluginsByName:i.injectEventPluginsByName},putListener:function(e,t,n){"function"!=typeof n?r("94",t,typeof n):void 0;var o=d(e),a=l[t]||(l[t]={});a[o]=n;var s=i.registrationNameModules[t];s&&s.didPutListener&&s.didPutListener(e,t,n)},getListener:function(e,t){var n=l[t],r=d(e);return n&&n[r]},deleteListener:function(e,t){var n=i.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var r=l[t];if(r){var o=d(e);delete r[o]}},deleteAllListeners:function(e){var t=d(e);for(var n in l)if(l.hasOwnProperty(n)&&l[n][t]){var r=i.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(e,n),delete l[n][t]}},extractEvents:function(e,t,n,r){for(var o,a=i.plugins,u=0;u<a.length;u++){var l=a[u];if(l){var c=l.extractEvents(e,t,n,r);c&&(o=s(o,c))}}return o},enqueueEvents:function(e){e&&(c=s(c,e))},processEventQueue:function(e){var t=c;c=null,e?u(t,f):u(t,p),c?r("95"):void 0,a.rethrowCaughtError()},__purge:function(){l={}},__getListenerBank:function(){return l}};e.exports=m},function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return _(e,r)}function i(e,t,n){var i=t?y.bubbled:y.captured,o=r(e,n,i);o&&(n._dispatchListeners=v(n._dispatchListeners,o),n._dispatchInstances=v(n._dispatchInstances,e))}function o(e){e&&e.dispatchConfig.phasedRegistrationNames&&m.traverseTwoPhase(e._targetInst,i,e)}function a(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?m.getParentInstance(t):null;m.traverseTwoPhase(n,i,e)}}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=_(e,r);i&&(n._dispatchListeners=v(n._dispatchListeners,i),n._dispatchInstances=v(n._dispatchInstances,e))}}function u(e){e&&e.dispatchConfig.registrationName&&s(e._targetInst,null,e)}function l(e){g(e,o)}function c(e){g(e,a)}function h(e,t,n,r){m.traverseEnterLeave(n,r,s,e,t)}function f(e){g(e,u)}var p=n(23),d=n(36),m=n(72),v=n(143),g=n(147),y=(n(5),p.PropagationPhases),_=d.getListener,b={accumulateTwoPhaseDispatches:l,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:f,accumulateEnterLeaveDispatches:h};e.exports=b},function(e,t,n){"use strict";function r(e){var t=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+t.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var i=t.call(e);return r.test(i)}catch(o){return!1}}function i(e){return"."+e}function o(e){return parseInt(e.substr(1),10)}function a(e){if(E)return g.get(e);var t=i(e);return _[t]}function s(e){if(E)g.delete(e);else{var t=i(e);delete _[t]}}function u(e,t,n){var r={element:t,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0};if(E)g.set(e,r);else{var o=i(e);_[o]=r}}function l(e){if(E)y.add(e);else{var t=i(e);b[t]=!0}}function c(e){if(E)y.delete(e);else{var t=i(e);delete b[t]}}function h(){return E?Array.from(g.keys()):Object.keys(_).map(o)}function f(){return E?Array.from(y.keys()):Object.keys(b).map(o)}function p(e){var t=a(e);if(t){var n=t.childIDs;s(e),n.forEach(p)}}function d(e,t,n){return"\n    in "+e+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")}function m(e){return null==e?"#empty":"string"==typeof e||"number"==typeof e?"#text":"string"==typeof e.type?e.type:e.type.displayName||e.type.name||"Unknown"}function v(e){var t,n=C.getDisplayName(e),r=C.getElement(e),i=C.getOwnerID(e);return i&&(t=C.getDisplayName(i)),d(n,r&&r._source,t)}var g,y,_,b,w=n(4),x=n(20),E=(n(3),n(5),"function"==typeof Array.from&&"function"==typeof Map&&r(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&r(Map.prototype.keys)&&"function"==typeof Set&&r(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&r(Set.prototype.keys));E?(g=new Map,y=new Set):(_={},b={});var M=[],C={onSetChildren:function(e,t){var n=a(e);n.childIDs=t;for(var r=0;r<t.length;r++){var i=t[r],o=a(i);o?void 0:w("140"),null==o.childIDs&&"object"==typeof o.element&&null!=o.element?w("141"):void 0,o.isMounted?void 0:w("71"),null==o.parentID&&(o.parentID=e),o.parentID!==e?w("142",i,o.parentID,e):void 0}},onBeforeMountComponent:function(e,t,n){u(e,t,n)},onBeforeUpdateComponent:function(e,t){var n=a(e);n&&n.isMounted&&(n.element=t)},onMountComponent:function(e){var t=a(e);t.isMounted=!0;var n=0===t.parentID;n&&l(e)},onUpdateComponent:function(e){var t=a(e);t&&t.isMounted&&t.updateCount++},onUnmountComponent:function(e){var t=a(e);if(t){t.isMounted=!1;var n=0===t.parentID;n&&c(e)}M.push(e)},purgeUnmountedComponents:function(){if(!C._preventPurging){for(var e=0;e<M.length;e++){var t=M[e];p(t)}M.length=0}},isMounted:function(e){var t=a(e);return!!t&&t.isMounted},getCurrentStackAddendum:function(e){var t="";if(e){var n=e.type,r="function"==typeof n?n.displayName||n.name:n,i=e._owner;t+=d(r||"Unknown",e._source,i&&i.getName())}var o=x.current,a=o&&o._debugID;return t+=C.getStackAddendumByID(a)},getStackAddendumByID:function(e){for(var t="";e;)t+=v(e),e=C.getParentID(e);return t},getChildIDs:function(e){var t=a(e);return t?t.childIDs:[]},getDisplayName:function(e){var t=C.getElement(e);return t?m(t):null},getElement:function(e){var t=a(e);return t?t.element:null},getOwnerID:function(e){var t=C.getElement(e);return t&&t._owner?t._owner._debugID:null},getParentID:function(e){var t=a(e);return t?t.parentID:null},getSource:function(e){var t=a(e),n=t?t.element:null,r=null!=n?n._source:null;return r},getText:function(e){var t=C.getElement(e);return"string"==typeof t?t:"number"==typeof t?""+t:null},getUpdateCount:function(e){var t=a(e);return t?t.updateCount:0},getRegisteredIDs:h,getRootIDs:f};e.exports=C},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(24),o=n(82),a={view:function(e){if(e.view)return e.view;var t=o(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};i.augmentClass(r,a),e.exports=r},function(e,t,n){"use strict";var r=n(4),i=(n(3),{reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,i,o,a,s,u){this.isInTransaction()?r("27"):void 0;var l,c;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),c=e.call(t,n,i,o,a,s,u),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(h){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=o.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(i){}}}},closeAll:function(e){this.isInTransaction()?void 0:r("28");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i,a=t[n],s=this.wrapperInitData[n];try{i=!0,s!==o.OBSERVED_ERROR&&a.close&&a.close.call(this,s),i=!1}finally{if(i)try{this.closeAll(n+1)}catch(u){}}}this.wrapperInitData.length=0}}),o={Mixin:i,OBSERVED_ERROR:{}};e.exports=o},function(e,t,n){"use strict";var r=n(3),i=function(e){var t,n={};e instanceof Object&&!Array.isArray(e)?void 0:r(!1);for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};e.exports=i},function(e,t){"use strict";function n(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function r(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(!i.call(t,r[a])||!n(e[r[a]],t[r[a]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.connect=t.Provider=void 0;var i=n(202),o=r(i),a=n(203),s=r(a);t.Provider=o.default,t.connect=s.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){S.default.unmountComponent(e,n)}function u(e){return e&&e[pe.default]||""}function l(e){return e?e.userData&&e.userData.markup&&e.userData.markup.childrenMarkup[0]||null:null}function c(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}var h,f,p,d,m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=n(1),y=r(g),_=n(14),b=r(_),w=n(31),x=r(w),E=n(342),M=r(E),C=n(27),S=r(C),T=n(19),P=r(T),O=n(20),A=r(O),R=n(58),k=r(R),L=n(56),D=r(L),I=n(133),j=r(I),N=n(139),B=r(N),U=n(129),F=r(U),V=n(54),z=(r(V),n(63)),G=r(z),H=n(83),W=r(H),q=n(62),X=r(q),Y=n(11),K=(r(Y),n(121)),Z=r(K),Q=n(6),J=r(Q),$=n(29),ee=(r($),n(229)),te=r(ee),ne=n(307),re=r(ne),ie=n(227),oe=r(ie),ae=n(106),se=r(ae),ue=n(226),le=r(ue),ce=n(107),he=r(ce),fe=n(69),pe=r(fe),de=n(119),me=(r(de),void 0),ve=(f=h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),v(t,[{key:"render",value:function(){return this.props}}]),t}(D.default),h.isReactComponent={},f),ge=(d=p=function(){function e(){var t=this;if(i(this,e),this.instantiateChild=function(e,n,r,i){var o=void 0===e[r];null!==n&&o&&(e[r]=t.instantiateReactComponent(n,!0))},this.findNodeHandle=function(e){var n=se.default.getRenderedHostOrTextFromComponent(e);if(!n||!n._threeObject)return null;var r=se.default.getMarkupFromInstance(n);return t._highlightCache=r,t._highlightElement},this.nativeTagToRootNodeID=function(){return 0},this.hostTagToRootNodeID=function(){return 0},this.batchedMountComponentIntoNode=function(e,n,r,i){var o=P.default.ReactReconcileTransaction.getPooled(!r);o.perform(t.mountComponentIntoNode,null,e,n,o,r,i),P.default.ReactReconcileTransaction.release(o)},this.mountComponentIntoNode=function(e,n,r,i,o){var a=S.default.mountComponent(e,r,null,(0,te.default)(e,n),o,0);e._renderedComponent._topLevelWrapper=e,t._mountImageIntoNode(a,n,e,i,r)},this._instancesByReactRootID={},this.nextMountID=1,this.globalIdCounter=1,this.nextReactRootIndex=0,this.threeElementDescriptors=new le.default(this).descriptors,this._highlightElement=document.createElement("div"),this._highlightCache=null,"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"http://localhost:3001",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&(this._agent=null,this._onHideHighlightFromInspector=function(){if(t._highlightCache&&t._highlightCache.threeObject.userData.react3internalComponent){var e=t._highlightCache.threeObject.userData.react3internalComponent;e.hideHighlight(),t._highlightCache=null}},this._onHighlightFromInspector=function(e){if(e.node===t._highlightElement&&t._highlightCache&&t._highlightCache.threeObject.userData.react3internalComponent){var n=t._highlightCache.threeObject.userData.react3internalComponent;n.highlightComponent()}},this._hookAgent=function(e){t._agent=e,e.on("highlight",t._onHighlightFromInspector),e.on("hideHighlight",t._onHideHighlightFromInspector)},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject)){this._devToolsRendererDefinition={CurrentOwner:A.default,InstanceHandles:M.default,Mount:this,Reconciler:S.default,TextComponent:oe.default};var n=function(e){t._reactDevtoolsRendererId=e.id,t._rendererListenerCleanup(),delete t._rendererListenerCleanup};if(this._rendererListenerCleanup=__REACT_DEVTOOLS_GLOBAL_HOOK__.sub("renderer",n),__REACT_DEVTOOLS_GLOBAL_HOOK__.inject(this._devToolsRendererDefinition),"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.reactDevtoolsAgent&&__REACT_DEVTOOLS_GLOBAL_HOOK__.reactDevtoolsAgent){var r=__REACT_DEVTOOLS_GLOBAL_HOOK__.reactDevtoolsAgent;this._hookAgent(r)}else this._devtoolsCallbackCleanup=__REACT_DEVTOOLS_GLOBAL_HOOK__.sub("react-devtools",function(e){t._devtoolsCallbackCleanup(),t._hookAgent(e)})}}return v(e,[{key:"updateChildren",value:function(e,t,n,r,i,o,a,s,u){if(!t&&!e)return null;if(t)for(var l=Object.keys(t),c=0;c<l.length;++c){var h=l[c],f=e&&e[h],p=f&&f._currentElement,d=t[h];if(null!==f&&void 0!==f&&(0,X.default)(p,d))if(S.default.receiveComponent(f,d,i,s),f._forceRemountOfComponent){r[h]=f.getHostMarkup(),S.default.unmountComponent(f,!1);var m=this.instantiateReactComponent(d,!0);t[h]=m;var v=S.default.mountComponent(m,i,o,a,s,u);n.push(v)}else t[h]=f;else{f&&(r[h]=f.getHostMarkup(),S.default.unmountComponent(f,!1));var g=this.instantiateReactComponent(d,!0);t[h]=g;var y=S.default.mountComponent(g,i,o,a,s,u);n.push(y)}}if(e)for(var _=Object.keys(e),b=0;b<_.length;++b){var w=_[b];if(!t||!t.hasOwnProperty(w)){var x=e[w];r[w]=x.getHostMarkup(),S.default.unmountComponent(x,!1)}}return t}},{key:"getElementDescriptor",value:function(e){return this.threeElementDescriptors[e]}}],[{key:"findTHREEObject",value:function(e){if(null===e)return null;if(e instanceof y.default.Object3D||e instanceof HTMLCanvasElement)return e;if(x.default.has(e)){var t=x.default.get(e);return t=(0,W.default)(t),t?se.default.getMarkupFromInstance(t).threeObject:null}return null!==e.render&&"function"==typeof e.render&&(0,J.default)(!1),(0,J.default)(!1),null}}]),v(e,[{key:"instantiateChildren",value:function(e,t,n,r){if(null===e)return null;var i={};return(0,G.default)(e,this.instantiateChild,i),i}},{key:"containsChild",value:function(e,t){for(var n=e.userData.markup.childrenMarkup,r=0;r<n.length;r++)if(n[r]===t)return!0;return!1}},{key:"_mountImageIntoNode",value:function(e,t,n,r,i){t.userData||((0,J.default)(t instanceof HTMLCanvasElement,"The root container can only be a THREE.js object (with an userData property) or HTMLCanvasElement."),t.userData={_createdByReact3:!0});var o=e,a={threeObject:t,parentMarkup:null,childrenMarkup:[o],toJSON:function(){return"---MARKUP---"}};Object.assign(t.userData,{object3D:t,toJSON:function(){return"---USERDATA---"},markup:a}),o.parentMarkup=a;var s=this.threeElementDescriptors[o.elementType];s.setParent(o.threeObject,a.threeObject),o.threeObject.mountedIntoRoot();var u=t.userData.markup.childrenMarkup[0];se.default.precacheMarkup(n,u)}},{key:"render",value:function(e,t,n){return this._renderSubtreeIntoContainer(null,e,t,n)}},{key:"getHostRootInstanceInContainer",value:function(e){var t=l(e),n=t&&se.default.getInstanceFromMarkup(t);return n&&!n._hostParent?n:null}},{key:"getTopLevelWrapperInContainer",value:function(e){var t=this.getHostRootInstanceInContainer(e);return t&&(0,J.default)(!!t._hostContainerInfo,"Root should have native container info %s"," but it does not"),t?t._hostContainerInfo._topLevelWrapper:null}},{key:"_renderSubtreeIntoContainer",value:function(e,t,n,r){var i=this;b.default.isValidElement(t)||(0,J.default)(!1);var o=(0,b.default)(ve,null,null,null,null,null,t),a=void 0;if(e){var s=x.default.get(e);a=s._processChildContext(s._context)}else a=Z.default;var c=this.getTopLevelWrapperInContainer(n);if(c){var h=c._currentElement,f=h.props;if((0,X.default)(f,t)){var p=function(){var e=c._renderedComponent.getPublicInstance(),t=r&&function(){r.call(e)};return i._updateRootComponent(c,o,a,n,t),{v:e}}();if("object"===("undefined"==typeof p?"undefined":m(p)))return p.v}this.unmountComponentAtNode(n)}var d=l(n),v=d&&!!u(d),g=v&&!c,y=this._renderNewRootComponent(o,n,g,a)._renderedComponent.getPublicInstance();return r&&r.call(y),y}},{key:"dispose",value:function(){for(var e=Object.keys(this._instancesByReactRootID),t=0;t<e.length;++t)this.unmountComponentAtNode(this._instancesByReactRootID[e[t]].getHostMarkup().parentMarkup.threeObject);delete this._instancesByReactRootID,delete this._highlightElement,this.nextMountID=1,this.nextReactRootIndex=0,"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"http://localhost:3001",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&(this._devtoolsCallbackCleanup&&(this._devtoolsCallbackCleanup(),delete this._devtoolsCallbackCleanup),this._rendererListenerCleanup&&(this._rendererListenerCleanup(),delete this._rendererListenerCleanup),this._devToolsRendererDefinition&&(this._agent&&(this._agent.onUnmounted(this._devToolsRendererDefinition),this._agent.removeListener("highlight",this._onHighlightFromInspector),this._agent.removeListener("hideHighlight",this._onHideHighlightFromInspector)),this._reactDevtoolsRendererId&&(delete __REACT_DEVTOOLS_GLOBAL_HOOK__._renderers[this._reactDevtoolsRendererId],delete this._reactDevtoolsRendererId),delete this._devToolsRendererDefinition,delete this._agent),delete this._onHighlightFromInspector,delete this._onHideHighlightFromInspector,delete this._hookAgent)}},{key:"_updateRootComponent",value:function(e,t,n,r,i){return k.default.enqueueElementInternal(e,t,n),i&&k.default.enqueueCallbackInternal(e,i),e}},{key:"hasNonRootReactChild",value:function(e){var t=l(e);if(t){var n=se.default.getInstanceFromMarkup(t);return!(!n||!n._hostParent)}return!1}},{key:"unmountComponentAtNode",value:function(e){var t=this.getTopLevelWrapperInContainer(e);if(!t){this.hasNonRootReactChild(e),!!(e&&e.userData&&e.userData.markup&&e.userData.markup[pe.default]);return!1}return delete this._instancesByReactRootID[t._instance.rootID],P.default.batchedUpdates(s,t,e,!1),e&&e.userData&&e.userData._createdByReact3&&delete e.userData,!0}},{key:"getReactRootID",value:function(e){var t=l(e);return t&&this.getID(t)}},{key:"instantiateReactComponent",value:function(e,t){var n=void 0,r=e,i=null===r||r===!1;if(i)n=new oe.default(b.default.createElement("object3D",{visible:!1}),this);else if("object"===("undefined"==typeof r?"undefined":m(r))){var o=r;if((!o||"function"!=typeof o.type&&"string"!=typeof o.type)&&(null==o.type?(0,J.default)(o.type,me(o._owner)):(0,J.default)(m(o.type),me(o._owner))),"string"==typeof o.type)n=new oe.default(o,this);else if(c(o.type)){var a=o.type;n=new a(o),n.getHostNode||(n.getHostNode=n.getNativeNode)}else n=new he.default(o,this)}else"string"==typeof r||"number"==typeof r?(0,J.default)(!1):(0,J.default)(!1);n._mountIndex=0,n._mountImage=null;return n}},{key:"_renderNewRootComponent",value:function(e,t,n,r){var i=this.instantiateReactComponent(e,!1);P.default.ReactReconcileTransaction||(j.default.Updates.injectReconcileTransaction(B.default),j.default.Updates.injectBatchingStrategy(F.default));P.default.batchedUpdates(this.batchedMountComponentIntoNode,i,t,n,r);var o=i._instance.rootID;return this._instancesByReactRootID[o]=i,i}},{key:"createReactRootID",value:function(){return this.nextReactRootIndex++}},{key:"getID",value:function(e){return u(e)}}]),e}(),p.eventDispatcher=new re.default,d);e.exports=ge},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=r(a),u=function(){function e(){i(this,e),this.userData={},this.name=null,this.value=null,this.type=null,this.uuid=s.default.Math.generateUUID()}return o(e,[{key:"setValue",value:function(e){this.value=e,this.userData.events.emit("valueChanged",e)}}]),e}();e.exports=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(2),u=r(s),l=n(10),c=r(l),h=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["radius","detail"].forEach(function(e){n.hasProp(e,{type:u.default.number.isRequired,update:n.triggerRemount,default:void 0})}),n}return a(t,e),t}(c.default);e.exports=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=n(1),f=r(h),p=n(2),d=r(p),m=n(29),v=(r(m),n(18)),g=r(v),y=n(9),_=r(y),b=function(){var e=new f.default.Vector3,t=new f.default.Vector3;return function(n){n.updateMatrixWorld(),e.setFromMatrixPosition(n.matrixWorld),n.target.position.copy(t.set(0,0,1).applyQuaternion(n.quaternion).add(e)),n.target.updateMatrixWorld()}}(),w=(u=s=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.removeProp("receiveShadow"),n._hasColor=!1,n._hasDirection=!1,n.hasProp("updatesRefreshAllMaterials",{type:d.default.bool,updateInitial:!0,update:function(e,t){e.userData._updatesRefreshAllMaterials=t},default:!1}),n.hasProp("shadowBias",{type:d.default.number,updateInitial:!0,update:function(e,t,n){n&&(e.shadow.bias=t)},default:t.defaultShadowBias}),n.hasProp("shadowDarkness",{type:d.default.number,simple:!0,default:.5}),n.hasProp("shadowMapWidth",{type:d.default.number,updateInitial:!0,update:function(e,t,n){n&&(e.shadow.mapSize.x=t)},default:512}),n.hasProp("shadowMapHeight",{type:d.default.number,updateInitial:!0,update:function(e,t,n){n&&(e.shadow.mapSize.y=t)},default:512}),n.hasProp("shadowCameraNear",{type:d.default.number,updateInitial:!0,update:function(e,t,n){n&&(e.shadow.camera.near=t)},default:t.defaultShadowCameraNear}),n.hasProp("shadowCameraFar",{type:d.default.number,updateInitial:!0,update:function(e,t,n){n&&(e.shadow.camera.far=t)},default:t.defaultShadowCameraFar}),n.hasProp("castShadow",{override:!0,type:d.default.bool,update:n.triggerRemount,default:!1}),n}return a(t,e),l(t,[{key:"hasDirection",value:function(){this._hasDirection=!0,this.removeProp("position"),this.removeProp("rotation"),this.removeProp("quaternion"),this.removeProp("lookAt"),this.hasProp("position",{type:(0,_.default)(f.default.Vector3),update:function(e,t){e.position.copy(t),e.userData._lookAt&&e.lookAt(e.userData._lookAt),e.userData._needsDirectionUpdate=!0},default:new f.default.Vector3}),this.hasProp("rotation",{type:(0,_.default)(f.default.Euler),update:function(e,t){e.rotation.copy(t),e.userData._needsDirectionUpdate=!0},default:new f.default.Euler}),this.hasProp("quaternion",{type:(0,_.default)(f.default.Quaternion),update:function(e,t){e.quaternion.copy(t),e.userData._needsDirectionUpdate=!0},default:new f.default.Quaternion}),this.hasProp("lookAt",{type:(0,_.default)(f.default.Vector3),update:function(e,t){e.userData._lookAt=t,t&&(e.lookAt(t),e.userData._needsDirectionUpdate=!0)},default:void 0})}},{key:"completePropertyUpdates",value:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"completePropertyUpdates",this).call(this,e),e.userData._needsDirectionUpdate&&(e.userData._needsDirectionUpdate=!1,b(e))}},{key:"hasColor",value:function(){this._hasColor=!0,
this.hasProp("color",{type:d.default.oneOfType([(0,_.default)(f.default.Color),d.default.number,d.default.string]),update:function(e,t){e.color.set(t)},default:16777215})}},{key:"applyInitialProps",value:function(e,n){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),n.hasOwnProperty("castShadow")&&(e.castShadow=n.castShadow),this._hasDirection&&(e.userData._needsDirectionUpdate=!1,(n.position||n.lookAt||n.rotation||n.quaternion)&&b(e))}},{key:"unmount",value:function(e){this.updateAllMaterials(e),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}},{key:"setParent",value:function(e,n){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n),this.updateAllMaterials(e)}},{key:"updateAllMaterials",value:function(e){var t=e.userData.markup._rootInstance;if(t&&!t._willUnmount){t.allMaterialsNeedUpdate()}}}]),t}(g.default),s.defaultShadowCameraNear=.5,s.defaultShadowCameraFar=500,s.defaultShadowBias=0,u);e.exports=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(32),d=r(p),m=n(18),v=r(m),g=function(e){function t(){var e,n,r,a;i(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r._invalidChild=function(e){var t=!(e instanceof c.default.Material||e instanceof d.default||e instanceof c.default.Geometry||e instanceof c.default.BufferGeometry);return t},a=n,o(r,a)}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.hasOwnProperty("geometry")?e.geometry:void 0,n=e.hasOwnProperty("material")?e.material:void 0,r=new c.default.Mesh(t,n);return t||(r.geometry.dispose(),r.geometry=void 0),n||(r.material.dispose(),r.material=void 0),r}},{key:"addChildren",value:function(e,t){(0,f.default)(0===t.filter(this._invalidChild).length,!1)}},{key:"addChild",value:function(e,t){this.addChildren(e,[t])}},{key:"moveChild",value:function(){}},{key:"getBoundingBoxes",value:function(e){return e.geometry&&e.geometry.computeBoundingBox&&e.geometry.computeBoundingBox(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBoundingBoxes",this).call(this,e)}}]),t}(v.default);e.exports=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(6),c=r(l),h=n(2),f=r(h),p=n(13),d=r(p),m=n(32),v=r(m),g=n(45),y=(r(g),function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._addedIntoRoot=function(e){for(var t=e.userData.markup.parentMarkup,r=0;t;){var i=t.threeObject.userData._resources;if(i){var o=e.resourceId,a=i.resourceMap[o];a&&n._addResource(e,{id:o,distance:r,resource:a})}r++,t=t.threeObject.userData.markup.parentMarkup}n._updateResource(e)},n.hasProp("resourceId",{type:f.default.string.isRequired,update:n.triggerRemount,default:""}),n}return a(t,e),s(t,[{key:"construct",value:function(e){return(0,c.default)(e.hasOwnProperty("resourceId"),'A resource type must have a property named "resourceId"!'),new v.default(e.resourceId)}},{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),e.userData.resourceMap=[],e.userData._eventCleanupQueue=[],e.userData._chosenResource=void 0,e.userData._debug=n.debug||!1,e.userData.events.once("addedIntoRoot",this._addedIntoRoot)}},{key:"unmount",value:function(e){e.userData._eventCleanupQueue.forEach(function(e){e()}),delete e.userData._eventCleanupQueue,delete e.userData.resourceMap,this.updateChosenResource(e,null),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}},{key:"updateChosenResource",value:function(e,t){var n=e.userData._chosenResource;n!==t&&(e.userData._chosenResource=t,this.resourceUpdated(e,t,n))}},{key:"setParent",value:function(e,n){var r=n[e.userData._propertySlot];(0,c.default)(void 0===r||null===r,"Parent already has a "+e.userData._propertySlot+" defined"),(0,c.default)(0===e.userData._eventCleanupQueue.length,"Changing parents?"),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n);var i=n.userData.markup,o=this._onResourceAdded.bind(this,e),a=this._onResourceRemoved.bind(this,e),s=i.threeObject.userData.events;s.on("resource.added",o),s.on("resource.removed",a),e.userData._eventCleanupQueue.push(function(){s.removeListener("resource.added",o),s.removeListener("resource.removed",a)})}},{key:"_onResourceAdded",value:function(e,t){e.resourceId===t.id&&(this._addResource(e,t),this._updateResource(e))}},{key:"_addResource",value:function(e,t){var n=e.userData.resourceMap,r=void 0;for(r=0;r<n.length;++r){if(n[r].distance===t.distance)return void(n[r].resource!==t.resource&&(n[r].resource=t.resource));if(n[r].distance>t.distance)break}n.splice(r,0,{distance:t.distance,resource:t.resource})}},{key:"_onResourceRemoved",value:function(e,t){if(e.resourceId===t.id){for(var n=e.userData.resourceMap,r=0;r<n.length;++r)if(n[r].distance===t.distance)return void(n[r].resource===t.resource&&(n.splice(r,1),this._updateResource(e)));(0,c.default)(!1,"This resource was not in this map?")}}},{key:"applyToSlot",value:function(e,t,n){var r=e.userData._propertySlot;t[r]=n}},{key:"resourceUpdated",value:function(e,t,n){var r=e.userData.markup.parentMarkup&&e.userData.markup.parentMarkup.threeObject||void 0;if(r&&(this.applyToSlot(e,r,t),null===t||t.userData._references.push(r),n)){var i=n.userData._references.indexOf(r);(0,c.default)(i!==-1,"Bad reference count for resource"),n.userData._references.splice(i,1)}}},{key:"_updateResource",value:function(e){var t=e.userData.resourceMap,n=null;t.length>0&&(n=t[0].resource),this.updateChosenResource(e,n)}},{key:"highlight",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;t.userData._descriptor.highlight(t)}},{key:"hideHighlight",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;t.userData._descriptor.hideHighlight(t)}}]),t}(d.default));e.exports=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t,n,r=(n=t=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isResource=!0,n.hasProp("resourceId",{type:d.default.string,updateInitial:!0,initialOnly:!0,update:function(e,t,n){n&&(e.userData._resourceId=t,e.userData._hasReferences||(e.userData._hasReferences=!0,e.userData._references=[]))},default:""}),n}return a(t,e),u(t,[{key:"applyInitialProps",value:function(e,n){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n)}},{key:"setParent",value:function(e,n){n instanceof v.default?((0,h.default)(!!e.userData._resourceId),y.default.prototype.setParent.call(this,e,n)):l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n)}},{key:"highlight",value:function(e){var n=void 0;return e.userData._resourceId?e.userData.events.emit("highlight",{uuid:e.uuid,boundingBoxFunc:function(){return e.userData._references.reduce(function(e,t){var n=t.userData._descriptor.getBoundingBoxes(t);return(0,h.default)(n.length>0),e.concat(n)},[])}}):n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"highlight",this).call(this,e),n}},{key:"hideHighlight",value:function(e){var n=void 0;return e.userData._resourceId?e.userData.events.emit("hideHighlight"):n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hideHighlight",this).call(this,e),n}}]),t}(e),t.displayName=""+(e.displayName||e.name),n);return r}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(6),h=r(c),f=n(29),p=(r(f),n(2)),d=r(p),m=n(66),v=r(m),g=n(13),y=r(g);e.exports=s},function(e,t){"use strict";var n={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},r={getHostProps:function(e,t){if(!t.disabled)return t;var r={};for(var i in t)!n[i]&&t.hasOwnProperty(i)&&(r[i]=t[i]);return r}};e.exports=r},function(e,t,n){"use strict";function r(){if(s)for(var e in u){var t=u[e],n=s.indexOf(e);if(n>-1?void 0:a("96",e),!l.plugins[n]){t.extractEvents?void 0:a("97",e),l.plugins[n]=t;var r=t.eventTypes;for(var o in r)i(r[o],t,o)?void 0:a("98",o,e)}}}function i(e,t,n){l.eventNameDispatchConfigs.hasOwnProperty(n)?a("99",n):void 0,l.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];o(s,t,n)}return!0}return!!e.registrationName&&(o(e.registrationName,t,n),!0)}function o(e,t,n){l.registrationNameModules[e]?a("100",e):void 0,l.registrationNameModules[e]=t,l.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var a=n(4),s=(n(3),null),u={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){s?a("101"):void 0,s=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];u.hasOwnProperty(n)&&u[n]===i||(u[n]?a("102",n):void 0,u[n]=i,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return l.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var r=l.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){s=null;for(var e in u)u.hasOwnProperty(e)&&delete u[e];l.plugins.length=0;var t=l.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=l.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};e.exports=l},function(e,t){"use strict";function n(e){var t=/[=:]/g,n={"=":"=0",":":"=2"},r=(""+e).replace(t,function(e){return n[e]});return"$"+r}function r(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"},r="."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1);return(""+r).replace(t,function(e){return n[e]})}var i={escape:n,unescape:r};e.exports=i},function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,v)||(e[v]=d++,f[e[v]]={}),f[e[v]]}var i,o=n(7),a=n(23),s=n(53),u=n(339),l=n(142),c=n(366),h=n(84),f={},p=!1,d=0,m={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},v="_reactListenersID"+String(Math.random()).slice(2),g=o({},u,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=e}},setEnabled:function(e){g.ReactEventListener&&g.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,i=r(n),o=s.registrationNameDependencies[e],u=a.topLevelTypes,l=0;l<o.length;l++){var c=o[l];i.hasOwnProperty(c)&&i[c]||(c===u.topWheel?h("wheel")?g.ReactEventListener.trapBubbledEvent(u.topWheel,"wheel",n):h("mousewheel")?g.ReactEventListener.trapBubbledEvent(u.topWheel,"mousewheel",n):g.ReactEventListener.trapBubbledEvent(u.topWheel,"DOMMouseScroll",n):c===u.topScroll?h("scroll",!0)?g.ReactEventListener.trapCapturedEvent(u.topScroll,"scroll",n):g.ReactEventListener.trapBubbledEvent(u.topScroll,"scroll",g.ReactEventListener.WINDOW_HANDLE):c===u.topFocus||c===u.topBlur?(h("focus",!0)?(g.ReactEventListener.trapCapturedEvent(u.topFocus,"focus",n),g.ReactEventListener.trapCapturedEvent(u.topBlur,"blur",n)):h("focusin")&&(g.ReactEventListener.trapBubbledEvent(u.topFocus,"focusin",n),g.ReactEventListener.trapBubbledEvent(u.topBlur,"focusout",n)),i[u.topBlur]=!0,i[u.topFocus]=!0):m.hasOwnProperty(c)&&g.ReactEventListener.trapBubbledEvent(c,m[c],n),i[c]=!0)}},trapBubbledEvent:function(e,t,n){return g.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return g.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(void 0===i&&(i=document.createEvent&&"pageX"in document.createEvent("MouseEvent")),!i&&!p){var e=l.refreshScrollValues;g.ReactEventListener.monitorScrollValue(e),p=!0}}});e.exports=g},function(e,t,n){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=a,this.updater=n||o}var i=n(4),o=n(77),a=(n(144),n(34));n(3),n(5);r.prototype.isReactComponent={},r.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e?i("85"):void 0,this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")};e.exports=r},function(e,t,n){"use strict";var r=n(42),i=r({prop:null,context:null,childContext:null});e.exports=i},function(e,t,n){"use strict";function r(e){u.enqueueUpdate(e)}function i(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,r=Object.keys(e);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function o(e,t){var n=s.get(e);if(!n){return null}return n}var a=n(4),s=(n(20),n(31)),u=(n(11),n(19)),l=(n(3),n(5),{isMounted:function(e){var t=s.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,n){l.validateCallback(t,n);var i=o(e);return i?(i._pendingCallbacks?i._pendingCallbacks.push(t):i._pendingCallbacks=[t],void r(i)):null},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=o(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t){var n=o(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(e,t){var n=o(e,"setState");if(n){var i=n._pendingStateQueue||(n._pendingStateQueue=[]);i.push(t),r(n)}},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,r(e)},validateCallback:function(e,t){e&&"function"!=typeof e?a("122",t,i(e)):void 0}});e.exports=l},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(40),o=n(142),a=n(81),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+o.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+o.currentScrollTop}};i.augmentClass(r,s),e.exports=r},function(e,t){"use strict";function n(e){var t=""+e,n=i.exec(t);if(!n)return t;var r,o="",a=0,s=0;for(a=n.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==a&&(o+=t.substring(s,a)),s=a+1,o+=r}return s!==a?o+t.substring(s,a):o}function r(e){return"boolean"==typeof e||"number"==typeof e?""+e:n(e)}var i=/["'&<>]/;e.exports=r},function(e,t,n){"use strict";var r,i=n(12),o=n(71),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,u=n(79),l=u(function(e,t){if(e.namespaceURI!==o.svg||"innerHTML"in e)e.innerHTML=t;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+t+"</svg>";for(var n=r.firstChild.childNodes,i=0;i<n.length;i++)e.appendChild(n[i])}});if(i.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(l=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),a.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),c=null}e.exports=l},function(e,t){"use strict";function n(e,t){var n=null===e||e===!1,r=null===t||t===!1;if(n||r)return n===r;var i=typeof e,o=typeof t;return"string"===i||"number"===i?"string"===o||"number"===o:"object"===o&&e.type===t.type&&e.key===t.key}e.exports=n},function(e,t,n){"use strict";function r(e,t){return e&&"object"==typeof e&&null!=e.key?l.escape(e.key):t.toString(36)}function i(e,t,n,o){var f=typeof e;if("undefined"!==f&&"boolean"!==f||(e=null),null===e||"string"===f||"number"===f||s.isValidElement(e))return n(o,e,""===t?c+r(e,0):t),1;var p,d,m=0,v=""===t?c:t+h;if(Array.isArray(e))for(var g=0;g<e.length;g++)p=e[g],d=v+r(p,g),m+=i(p,d,n,o);else{var y=u(e);if(y){var _,b=y.call(e);if(y!==e.entries)for(var w=0;!(_=b.next()).done;)p=_.value,d=v+r(p,w++),m+=i(p,d,n,o);else for(;!(_=b.next()).done;){var x=_.value;x&&(p=x[1],d=v+l.escape(x[0])+h+r(p,0),m+=i(p,d,n,o))}}else if("object"===f){var E="",M=String(e);a("31","[object Object]"===M?"object with keys {"+Object.keys(e).join(", ")+"}":M,E)}}return m}function o(e,t,n){return null==e?0:i(e,"",t,n)}var a=n(4),s=(n(20),n(14)),u=n(148),l=(n(3),n(54)),c=(n(5),"."),h=":";e.exports=o},function(e,t,n){function r(e){if(!a(e)||i(e)!=s)return!1;var t=o(e);if(null===t)return!0;var n=h.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}var i=n(192),o=n(194),a=n(199),s="[object Object]",u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=c.call(Object);e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SCALE=t.DEGS_TO_RADS=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(15),s=r(a),u=n(1),l=r(u),c=t.DEGS_TO_RADS=Math.PI/180,h=t.SCALE=.005,f=function(){function e(){i(this,e)}return o(e,[{key:"createShape",value:function(e,t,n,r,i,o,a,s,u){var c=new l.default.ShapeGeometry(e),h=new l.default.MeshBasicMaterial({color:t,side:l.default.DoubleSide,overdraw:!0}),f=new l.default.Mesh(c,h);return f.position.set(n,r,i),f.rotation.set(o,a,s),f.scale.set(u,u,u),f}},{key:"transformSVGPath",value:function(e){function t(){for(var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,o=!1;b<w&&(n=e.charCodeAt(b),n===m||n===v);)b++;for(t=n===y?b++:b;b<w;)if(n=e.charCodeAt(b),p<=n&&n<=d)b++;else{if(n!==g)return r=e.substring(t,b),(o?parseFloat(r):parseInt(r))*i;b++,o=!0}return r=e.substring(t),(o?parseFloat(r):parseInt(r))*i}function n(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function r(){for(var t;b<w&&(t=e.charCodeAt(b),t===m||t===v);)b++;return t=e.charCodeAt(b),t===y||p<=t&&t<=d}var i,o,a,u,f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],p=48,d=57,m=44,v=32,g=46,y=45,_=f?[]:new l.default.Shape,b=1,w=e.length,x=0,E=0,M=0,C=0,S=null,T=null,P=0,O=0,A=0,R=0,k=0,L=0,D=0,I=0,j=0;for(i=e[0];b<=w;){switch(u=!0,i){case"M":x=t(),E=t(),f?_.push(s.default.createElement("moveTo",{x:x,y:E,key:n()})):_.moveTo(x,E),i="L";break;case"m":x+=t(),E+=t(),f?_.push(s.default.createElement("moveTo",{x:x,y:E})):_.moveTo(x,E),i="l";break;case"Z":case"z":u=!1,x===S&&E===T||(f?_.push(s.default.createElement("lineTo",{x:S,y:T,key:n()})):_.lineTo(S,T));break;case"L":case"H":case"V":M="V"===i?x:t(),C="H"===i?E:t(),f?_.push(s.default.createElement("lineTo",{x:M,y:C,key:n()})):_.lineTo(M,C),x=M,E=C;break;case"l":case"h":case"v":M="v"===i?x:x+t(),C="h"===i?E:E+t(),f?_.push(s.default.createElement("lineTo",{x:M,y:C,key:n()})):_.lineTo(M,C),x=M,E=C;break;case"C":P=t(),A=t();case"S":"S"===i&&(P=2*x-O,A=2*E-R),O=t(),R=t(),M=t(),C=t(),f?_.push(s.default.createElement("bezierCurveTo",{cp1X:P,cp1Y:A,cp2X:O,cp2Y:R,x:M,y:C,key:n()})):_.bezierCurveTo(P,A,O,R,M,C),x=M,E=C;break;case"c":P=x+t(),A=E+t();case"s":"s"===i&&(P=2*x-O,A=2*E-R),O=x+t(),R=E+t(),M=x+t(),C=E+t(),f?_.push(s.default.createElement("bezierCurveTo",{cp1X:P,cp1Y:A,cp2X:O,cp2Y:R,x:M,y:C,key:n()})):_.bezierCurveTo(P,A,O,R,M,C),x=M,E=C;break;case"Q":P=t(),A=t();case"T":"T"===i&&(P=2*x-P,A=2*E-A),M=t(),C=t(),f?_.push(s.default.createElement("quadraticCurveTo",{cpX:P,cpY:A,x:M,y:C,key:n()})):_.quadraticCurveTo(P,A,M,C),x=M,E=C;break;case"q":P=x+t(),A=E+t();case"t":"t"===i&&(P=2*x-P,A=2*E-A),M=x+t(),C=E+t(),f?_.push(s.default.createElement("quadraticCurveTo",{cpX:P,cpY:A,x:M,y:C,key:n()})):_.quadraticCurveTo(P,A,M,C),x=M,E=C;break;case"A":k=t(),L=t(),D=t()*c,I=t(),j=t(),M=t(),C=t(),k!==L&&console.warn("Forcing elliptical arc to be a circular one :(",k,L),P=Math.cos(D)*(x-M)/2+Math.sin(D)*(E-C)/2,A=-Math.sin(D)*(x-M)/2+Math.cos(D)*(E-C)/2;var N=Math.sqrt((k*k*L*L-k*k*A*A-L*L*P*P)/(k*k*A*A+L*L*P*P));I===j&&(N=-N),O=N*k*A/L,R=N*-L*P/k,o=Math.cos(D)*O-Math.sin(D)*R+(x+M)/2,a=Math.sin(D)*O+Math.cos(D)*R+(E+C)/2;var B=new l.default.Vector2(1,0),U=new l.default.Vector2((P-O)/k,(A-R)/L),F=Math.acos(B.dot(U)/B.length()/U.length());B.x*U.y-B.y*U.x<0&&(F=-F),B.x=(-P-O)/k,B.y=(-A-R)/L;var V=Math.acos(U.dot(B)/U.length()/B.length());U.x*B.y-U.y*B.x<0&&(V=-V),!j&&V>0&&(V-=2*Math.PI),j&&V<0&&(V+=2*Math.PI),f?_.push(s.default.createElement("absArc",{x:o,y:a,radius:k,startAngle:F,endAngle:F+V,clockwise:j,key:n()})):_.absarc(o,a,k,F,F+V,j),x=M,E=C;break;default:throw new Error("weird path command: "+i)}null===S&&(S=x,T=E),u&&r()||(i=e[b++])}return _}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(1),u=r(s),l=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.visible=!1,e.resourceMap={},e.resourceIds=[],e}return a(t,e),t}(u.default.Object3D);e.exports=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(1),a=r(o),s=function e(){i(this,e),this.userData={},this.uniforms={},this.uuid=a.default.Math.generateUUID()};e.exports=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(10),h=r(c),f=function(e){function t(){var e,n,r,a;i(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.updateCacheAndReplace=function(e,t,n){t.userData._propsCache[e]=n,t.userData._wantPropertyOverwrite=!0},a=n,o(r,a)}return a(t,e),u(t,[{key:"beginPropertyUpdates",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"beginPropertyUpdates",this).call(this,e),e.userData._wantPropertyOverwrite=!1}},{key:"completePropertyUpdates",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"completePropertyUpdates",this).call(this,e),e.userData._wantPropertyOverwrite&&(e.userData._wantPropertyOverwrite=!1,e.copy(this.construct(e.userData._propsCache)))}},{key:"applyInitialProps",value:function(e,n){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),e.userData._propsCache=s({},n)}}]),t}(h.default);e.exports=f},function(e,t){"use strict";e.exports="data-reactid"},function(e,t,n){"use strict";function r(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function i(e,t,n){c.insertTreeBefore(e,t,n)}function o(e,t,n){Array.isArray(t)?s(e,t[0],t[1],n):v(e,t,n)}function a(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],u(e,t,n),e.removeChild(n)}e.removeChild(t)}function s(e,t,n,r){for(var i=t;;){var o=i.nextSibling;if(v(e,i,r),i===n)break;i=o}}function u(e,t,n){for(;;){var r=t.nextSibling;if(r===n)break;e.removeChild(r)}}function l(e,t,n){var r=e.parentNode,i=e.nextSibling;i===t?n&&v(r,document.createTextNode(n),i):n?(m(i,n),u(r,i,t)):u(r,e,t)}var c=n(33),h=n(313),f=n(137),p=(n(8),n(11),n(79)),d=n(61),m=n(152),v=p(function(e,t,n){e.insertBefore(t,n)}),g=h.dangerouslyReplaceNodeWithMarkup,y={dangerouslyReplaceNodeWithMarkup:g,replaceDelimitedText:l,processUpdates:function(e,t){for(var n=0;n<t.length;n++){var s=t[n];switch(s.type){case f.INSERT_MARKUP:i(e,s.content,r(e,s.afterNode));break;case f.MOVE_EXISTING:o(e,s.fromNode,r(e,s.afterNode));break;case f.SET_MARKUP:d(e,s.content);break;case f.TEXT_CONTENT:m(e,s.content);break;case f.REMOVE_NODE:a(e,s.fromNode)}}}};e.exports=y},function(e,t){"use strict";var n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};e.exports=n},function(e,t,n){"use strict";function r(e){return e===y.topMouseUp||e===y.topTouchEnd||e===y.topTouchCancel}function i(e){return e===y.topMouseMove||e===y.topTouchMove}function o(e){return e===y.topMouseDown||e===y.topTouchStart}function a(e,t,n,r){var i=e.type||"unknown-event";e.currentTarget=_.getNodeFromInstance(r),t?v.invokeGuardedCallbackWithCatch(i,n,e):v.invokeGuardedCallback(i,n,e),e.currentTarget=null}function s(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)a(e,t,n[i],r[i]);else n&&a(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null}function u(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function l(e){var t=u(e);return e._dispatchInstances=null,e._dispatchListeners=null,
t}function c(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)?d("103"):void 0,e.currentTarget=t?_.getNodeFromInstance(n):null;var r=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,r}function h(e){return!!e._dispatchListeners}var f,p,d=n(4),m=n(23),v=n(76),g=(n(3),n(5),{injectComponentTree:function(e){f=e},injectTreeTraversal:function(e){p=e}}),y=m.topLevelTypes,_={isEndish:r,isMoveish:i,isStartish:o,executeDirectDispatch:c,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:l,hasDispatches:h,getInstanceFromNode:function(e){return f.getInstanceFromNode(e)},getNodeFromInstance:function(e){return f.getNodeFromInstance(e)},isAncestor:function(e,t){return p.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return p.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return p.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return p.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,r,i){return p.traverseEnterLeave(e,t,n,r,i)},injection:g};e.exports=_},function(e,t,n){"use strict";function r(e){null!=e.checkedLink&&null!=e.valueLink?s("87"):void 0}function i(e){r(e),null!=e.value||null!=e.onChange?s("88"):void 0}function o(e){r(e),null!=e.checked||null!=e.onChange?s("89"):void 0}function a(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=n(4),u=n(2),l=n(57),c=n(78),h=(n(3),n(5),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),f={value:function(e,t,n){return!e[t]||h[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:u.func},p={},d={checkPropTypes:function(e,t,n){for(var r in f){if(f.hasOwnProperty(r))var i=f[r](t,r,e,l.prop,null,c);if(i instanceof Error&&!(i.message in p)){p[i.message]=!0;a(n)}}},getValue:function(e){return e.valueLink?(i(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(o(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(i(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(o(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};e.exports=d},function(e,t,n){"use strict";function r(e){return(""+e).replace(b,"$&/")}function i(e,t){this.func=e,this.context=t,this.count=0}function o(e,t,n){var r=e.func,i=e.context;r.call(i,t,e.count++)}function a(e,t,n){if(null==e)return e;var r=i.getPooled(t,n);g(e,o,r),i.release(r)}function s(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function u(e,t,n){var i=e.result,o=e.keyPrefix,a=e.func,s=e.context,u=a.call(s,t,e.count++);Array.isArray(u)?l(u,i,n,v.thatReturnsArgument):null!=u&&(m.isValidElement(u)&&(u=m.cloneAndReplaceKey(u,o+(!u.key||t&&t.key===u.key?"":r(u.key)+"/")+n)),i.push(u))}function l(e,t,n,i,o){var a="";null!=n&&(a=r(n)+"/");var l=s.getPooled(t,a,i,o);g(e,u,l),s.release(l)}function c(e,t,n){if(null==e)return e;var r=[];return l(e,r,null,t,n),r}function h(e,t,n){return null}function f(e,t){return g(e,h,null)}function p(e){var t=[];return l(e,t,null,v.thatReturnsArgument),t}var d=n(26),m=n(14),v=n(17),g=n(63),y=d.twoArgumentPooler,_=d.fourArgumentPooler,b=/\/+/g;i.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},d.addPoolingTo(i,y),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},d.addPoolingTo(s,_);var w={forEach:a,map:c,mapIntoWithKeyPrefixInternal:l,count:f,toArray:p};e.exports=w},function(e,t,n){"use strict";var r=n(4),i=(n(3),!1),o={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){i?r("104"):void 0,o.replaceNodeWithMarkup=e.replaceNodeWithMarkup,o.processChildrenUpdates=e.processChildrenUpdates,i=!0}}};e.exports=o},function(e,t,n){"use strict";function r(e,t,n,r){try{return t(n,r)}catch(o){return void(null===i&&(i=o))}}var i=null,o={invokeGuardedCallback:r,invokeGuardedCallbackWithCatch:r,rethrowCaughtError:function(){if(i){var e=i;throw i=null,e}}};e.exports=o},function(e,t,n){"use strict";function r(e,t){}var i=(n(5),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){r(e,"forceUpdate")},enqueueReplaceState:function(e,t){r(e,"replaceState")},enqueueSetState:function(e,t){r(e,"setState")}});e.exports=i},function(e,t){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t){"use strict";var n=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e};e.exports=n},function(e,t){"use strict";function n(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}e.exports=n},function(e,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=i[e];return!!r&&!!n[r]}function r(e){return n}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=r},function(e,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}e.exports=n},function(e,t,n){"use strict";function r(e){for(var t;(t=e._renderedNodeType)===i.COMPOSITE;)e=e._renderedComponent;return t===i.HOST?e._renderedComponent:t===i.EMPTY?null:void 0}var i=n(138);e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&i&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,o=n(12);o.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=r},function(e,t,n){"use strict";var r=(n(7),n(17)),i=(n(5),r);e.exports=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var i=n(154),o=r(i),a=n(374),s=r(a),u=n(373),l=r(u),c=n(372),h=r(c),f=n(153),p=r(f),d=n(155);r(d);t.createStore=o.default,t.combineReducers=s.default,t.bindActionCreators=l.default,t.applyMiddleware=h.default,t.compose=p.default},function(e,t,n){"use strict";var r=n(16),i=n(163),o=n(166),a=n(172),s=n(170),u=n(90),l="undefined"!=typeof window&&window.btoa||n(165);e.exports=function(e){return new Promise(function(t,c){var h=e.data,f=e.headers;r.isFormData(h)&&delete f["Content-Type"];var p=new XMLHttpRequest,d="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||s(e.url)||(p=new window.XDomainRequest,d="onload",m=!0,p.onprogress=function(){},p.ontimeout=function(){}),e.auth){var v=e.auth.username||"",g=e.auth.password||"";f.Authorization="Basic "+l(v+":"+g)}if(p.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p[d]=function(){if(p&&(4===p.readyState||m)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?p.response:p.responseText,o={data:r,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:n,config:e,request:p};i(t,c,o),p=null}},p.onerror=function(){c(u("Network Error",e)),p=null},p.ontimeout=function(){c(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED")),p=null},r.isStandardBrowserEnv()){var y=n(168),_=(e.withCredentials||s(e.url))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;_&&(f[e.xsrfHeaderName]=_)}if("setRequestHeader"in p&&r.forEach(f,function(e,t){"undefined"==typeof h&&"content-type"===t.toLowerCase()?delete f[t]:p.setRequestHeader(t,e)}),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(b){if("json"!==p.responseType)throw b}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),c(e),p=null)}),void 0===h&&(h=null),p.send(h)})}},function(e,t){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(162);e.exports=function(e,t,n,i){var o=new Error(e);return r(o,t,n,i)}},function(e,t,n){(function(t){"use strict";function r(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function i(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(87):"undefined"!=typeof t&&(e=n(87)),e}var o=n(16),a=n(171),s=/^\)\]\}',?\n/,u={"Content-Type":"application/x-www-form-urlencoded"};e.exports={adapter:i(),transformRequest:[function(e,t){return a(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(s,"");try{e=JSON.parse(e)}catch(t){}}return e}],headers:{common:{Accept:"application/json, text/plain, */*"},patch:o.merge(u),post:o.merge(u),put:o.merge(u)},timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}}}).call(t,n(35))},function(e,t){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(17),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=i},function(e,t){"use strict";function n(e){try{e.focus()}catch(t){}}e.exports=n},function(e,t){"use strict";function n(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}e.exports=n},function(e,t,n){var r=n(198),i=r.Symbol;e.exports=i},function(e,t,n){var r,i,o=function(a,s){var u=a?a.window:n(383),l=u&&u.document;a=a||u;var c=new function(){function e(e,t,n,i,o){function a(r,a){a=a||(a=u(t,r))&&(a.get?a:a.value),"string"==typeof a&&"#"===a[0]&&(a=e[a.substring(1)]||a);var l,f="function"==typeof a,p=a,d=o||f&&!a.base?a&&a.get?r in e:e[r]:null;o&&d||(f&&d&&(a.base=d),f&&i!==!1&&(l=r.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(s[l[3].toLowerCase()+l[4]]=l[2]),p&&!f&&p.get&&"function"==typeof p.get&&c.isPlainObject(p)||(p={value:p,writable:!0}),(u(e,r)||{configurable:!0}).configurable&&(p.configurable=!0,p.enumerable=n),h(e,r,p))}var s={};if(t){for(var l in t)t.hasOwnProperty(l)&&!r.test(l)&&a(l);for(var l in s){var f=s[l],p=e["set"+f],d=e["get"+f]||p&&e["is"+f];!d||i!==!0&&0!==d.length||a(l,{get:d,set:p})}}return e}function t(e,t,n){return e&&("length"in e&&!e.getLength&&"number"==typeof e.length?i:o).call(e,t,n=n||e),n}function n(e,t,n){for(var r=n,i=t.length;r<i;r++){var o=t[r];for(var a in o)o.hasOwnProperty(a)&&(e[a]=o[a])}return e}var r=/^(statics|enumerable|beans|preserve)$/,i=[].forEach||function(e,t){for(var n=0,r=this.length;n<r;n++)e.call(t,this[n],n,this)},o=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)},a=Object.create||function(e){return{__proto__:e}},u=Object.getOwnPropertyDescriptor||function(e,t){var n=e.__lookupGetter__&&e.__lookupGetter__(t);return n?{get:n,set:e.__lookupSetter__(t),enumerable:!0,configurable:!0}:e.hasOwnProperty(t)?{value:e[t],enumerable:!0,configurable:!0,writable:!0}:null},l=Object.defineProperty||function(e,t,n){return(n.get||n.set)&&e.__defineGetter__?(n.get&&e.__defineGetter__(t,n.get),n.set&&e.__defineSetter__(t,n.set)):e[t]=n.value,e},h=function(e,t,n){return delete e[t],l(e,t,n)};return e(function(){n(this,arguments,0)},{inject:function(t){if(t){var n=t.statics===!0?t:t.statics,r=t.beans,i=t.preserve;n!==t&&e(this.prototype,t,t.enumerable,r,i),e(this,n,!0,r,i)}for(var o=1,a=arguments.length;o<a;o++)this.inject(arguments[o]);return this},extend:function(){for(var t,n,r,i=this,o=0,s=arguments.length;o<s&&(!t||!n);o++)r=arguments[o],t=t||r.initialize,n=n||r.prototype;return t=t||function(){i.apply(this,arguments)},n=t.prototype=n||a(this.prototype),h(n,"constructor",{value:t,writable:!0,configurable:!0}),e(t,this,!0),arguments.length&&this.inject.apply(t,arguments),t.base=i,t}},!0).inject({inject:function(){for(var t=0,n=arguments.length;t<n;t++){var r=arguments[t];r&&e(this,r,r.enumerable,r.beans,r.preserve)}return this},extend:function(){var e=a(this);return e.inject.apply(e,arguments)},each:function(e,n){return t(this,e,n)},set:function(){return n(this,arguments,0)},clone:function(){return new this.constructor(this)},statics:{each:t,create:a,define:h,describe:u,set:function(e){return n(e,arguments,1)},clone:function(e){return n(new e.constructor,arguments,0)},isPlainObject:function(e){var t=null!=e&&e.constructor;return t&&(t===Object||t===c||"Object"===t.name)},pick:function(e,t){return e!==s?e:t}}})};e.exports=c,c.inject({toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+c.each(this,function(e,t){if(!/^_/.test(t)){var n=typeof e;this.push(t+": "+("number"===n?d.instance.number(e):"string"===n?"'"+e+"'":e))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return c.importJSON(e,this)},exportJSON:function(e){return c.exportJSON(this,e)},toJSON:function(){return c.serialize(this)},_set:function(e){if(e&&c.isPlainObject(e))return c.filter(this,e)},statics:{exports:{enumerable:!0},extend:function e(){var t=e.base.apply(this,arguments),n=t.prototype._class;return n&&!c.exports[n]&&(c.exports[n]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)&&Array.isArray(t)){var n=e.length;if(n!==t.length)return!1;for(;n--;)if(!c.equals(e[n],t[n]))return!1}else{var r=Object.keys(e),n=r.length;if(n!==Object.keys(t).length)return!1;for(;n--;){var i=r[n];if(!t.hasOwnProperty(i)||!c.equals(e[i],t[i]))return!1}}return!0}return!1},read:function(e,t,n,r){if(this===c){var i=this.peek(e,t);return e.__index++,i}var o=this.prototype,a=o._readIndex,u=t||a&&e.__index||0;r||(r=e.length-u);var l=e[u];return l instanceof this||n&&n.readNull&&null==l&&r<=1?(a&&(e.__index=u+1),l&&n&&n.clone?l.clone():l):(l=c.create(this.prototype),a&&(l.__read=!0),l=l.initialize.apply(l,u>0||r<e.length?Array.prototype.slice.call(e,u,u+r):e)||l,a&&(e.__index=u+l.__read,l.__read=s),l)},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readAll:function(e,t,n){for(var r,i=[],o=t||0,a=e.length;o<a;o++)i.push(Array.isArray(r=e[o])?this.read(r,0,n):this.read(e,o,n,1));return i},readNamed:function(e,t,n,r,i){var o=this.getNamed(e,t),a=o!==s;if(a){var u=e._filtered;u||(u=e._filtered=c.create(e[0]),u._filtering=e[0]),u[t]=s}return this.read(a?[o]:e,n,r,i)},getNamed:function(e,t){var n=e[0];if(e._hasObject===s&&(e._hasObject=1===e.length&&c.isPlainObject(n)),e._hasObject)return t?n[t]:e._filtered||n},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,n){for(var r=Object.keys(t._filtering||t),i=0,o=r.length;i<o;i++){var a=r[i];if(!n||!n[a]){var u=t[a];u!==s&&(e[a]=u)}}return e},isPlainValue:function(e,t){return this.isPlainObject(e)||Array.isArray(e)||t&&"string"==typeof e},serialize:function(e,t,n,r){t=t||{};var i,o=!r;if(o&&(t.formatter=new d(t.precision),r={length:0,definitions:{},references:{},add:function(e,t){var n="#"+e._id,r=this.references[n];if(!r){this.length++;var i=t.call(e),o=e._class;o&&i[0]!==o&&i.unshift(o),this.definitions[n]=i,r=this.references[n]=[n]}return r}}),e&&e._serialize){i=e._serialize(t,r);var a=e._class;!a||e._compactSerialize||!o&&n||i[0]===a||i.unshift(a)}else if(Array.isArray(e)){i=[];for(var s=0,u=e.length;s<u;s++)i[s]=c.serialize(e[s],t,n,r)}else if(c.isPlainObject(e)){i={};for(var l=Object.keys(e),s=0,u=l.length;s<u;s++){var h=l[s];i[h]=c.serialize(e[h],t,n,r)}}else i="number"==typeof e?t.formatter.number(e,t.precision):e;return o&&r.length>0?[["dictionary",r.definitions],i]:i},deserialize:function(e,t,n,r,i){var o=e,a=!n,s=a&&e&&e.length&&"dictionary"===e[0][0];if(n=n||{},Array.isArray(e)){var u=e[0],l="dictionary"===u;if(1==e.length&&/^#/.test(u))return n.dictionary[u];u=c.exports[u],o=[];for(var h=u?1:0,f=e.length;h<f;h++)o.push(c.deserialize(e[h],t,n,l,s));if(u){var p=o;t?o=t(u,p,a||i):(o=c.create(u.prototype),u.apply(o,p))}}else if(c.isPlainObject(e)){o={},r&&(n.dictionary=o);for(var d in e)o[d]=c.deserialize(e[d],t,n)}return s?o[1]:o},exportJSON:function(e,t){var n=c.serialize(e,t);return t&&t.asString===!1?n:JSON.stringify(n)},importJSON:function(e,t){return c.deserialize("string"==typeof e?JSON.parse(e):e,function(e,n,r){var i=r&&t&&t.constructor===e,o=i?t:c.create(e.prototype);if(1===n.length&&o instanceof S&&(i||!(o instanceof P))){var a=n[0];c.isPlainObject(a)&&(a.insert=!1)}return(i?o._set:e).apply(o,n),i&&(t=null),o})},splice:function(e,t,n,r){var i=t&&t.length,o=n===s;n=o?e.length:n,n>e.length&&(n=e.length);for(var a=0;a<i;a++)t[a]._index=n+a;if(o)return e.push.apply(e,t),[];var u=[n,r];t&&u.push.apply(u,t);for(var l=e.splice.apply(e,u),a=0,c=l.length;a<c;a++)l[a]._index=s;for(var a=n+i,c=e.length;a<c;a++)e[a]._index=a;return l},capitalize:function(e){return e.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var h={on:function(e,t){if("string"!=typeof e)c.each(e,function(e,t){this.on(t,e)},this);else{var n=this._eventTypes,r=n&&n[e],i=this._callbacks=this._callbacks||{};i=i[e]=i[e]||[],i.indexOf(t)===-1&&(i.push(t),r&&r.install&&1===i.length&&r.install.call(this,e))}return this},off:function(e,t){if("string"!=typeof e)return void c.each(e,function(e,t){this.off(t,e)},this);var n,r=this._eventTypes,i=r&&r[e],o=this._callbacks&&this._callbacks[e];return o&&(!t||(n=o.indexOf(t))!==-1&&1===o.length?(i&&i.uninstall&&i.uninstall.call(this,e),delete this._callbacks[e]):n!==-1&&o.splice(n,1)),this},once:function(e,t){return this.on(e,function(){t.apply(this,arguments),this.off(e,t)})},emit:function(e,t){var n=this._callbacks&&this._callbacks[e];if(!n)return!1;var r=[].slice.call(arguments,1),i=t&&t.target&&!t.currentTarget;n=n.slice(),i&&(t.currentTarget=this);for(var o=0,a=n.length;o<a;o++)if(n[o].apply(this,r)===!1){t&&t.stop&&t.stop();break}return i&&delete t.currentTarget,!0},responds:function(e){return!(!this._callbacks||!this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,n=this._callbacks,r=e?"install":"uninstall";if(t)for(var i in n)if(n[i].length>0){var o=t[i],a=o&&o[r];a&&a.call(this,i)}},statics:{inject:function e(t){var n=t._events;if(n){var r={};c.each(n,function(e,n){var i="string"==typeof e,o=i?e:n,a=c.capitalize(o),s=o.substring(2).toLowerCase();r[s]=i?{}:e,o="_"+o,t["get"+a]=function(){return this[o]},t["set"+a]=function(e){var t=this[o];t&&this.off(s,t),e&&this.on(s,e),this[o]=e}}),t._eventTypes=r}return e.base.apply(this,arguments)}}},f=c.extend({_class:"PaperScope",initialize:function e(){o=this,this.settings=new c({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var n=ae.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:se.nativeModes},ae.release(n)}if(!this.agent){var r=a.navigator.userAgent.toLowerCase(),i=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],s="darwin"===i?"mac":i,u=t.agent=t.browser={platform:s};s&&(u[s]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(e,t,n,r,i){if(!u.chrome){var o="opera"===t?r:/^(node|trident)$/.test(t)?i:n;u.version=o,u.versionNumber=parseFloat(o),t="trident"===t?"msie":t,u.name=t,u[t]=!0}}),u.chrome&&delete u.webkit,u.atom&&delete u.chrome}},version:"0.10.2",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){o.PaperScript.execute(e,this,t),Q.updateFocus()},install:function(e){var t=this;c.each(["project","view","tool"],function(n){c.define(e,n,{configurable:!0,get:function(){return t[n]}})});for(var n in this)!/^_/.test(n)&&this[n]&&(e[n]=this[n])},setup:function(e){return o=this,this.project=new C(e),this},createCanvas:function(e,t){return ae.getCanvas(e,t)},activate:function(){o=this},clear:function(){for(var e=this.projects,t=this.tools,n=this.palettes,r=e.length-1;r>=0;r--)e[r].remove();for(var r=t.length-1;r>=0;r--)t[r].remove();for(var r=n.length-1;r>=0;r--)n[r].remove()},remove:function(){this.clear(),delete f._scopes[this._id]},statics:new function(){function e(e){return e+="Attribute",function(t,n){return t[e](n)||t[e]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(e){return this._scopes[e]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),p=c.extend(h,{initialize:function(e){this._scope=o,this._index=this._scope[this._list].push(this)-1,!e&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(c.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),d=c.extend({initialize:function(e){this.precision=c.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,n){return this.number(e)+(n||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});d.instance=new d;var m=new function(){function e(e,t,n){return e<t?t:e>n?n:e}function t(e,t,n){function r(e){var t=134217729*e,n=e-t,r=n+t,i=e-r;return[r,i]}var i=t*t-e*n,a=t*t+e*n;if(3*o(i)<a){var s=r(e),u=r(t),l=r(n),c=t*t,h=u[0]*u[0]-c+2*u[0]*u[1]+u[1]*u[1],f=e*n,p=s[0]*l[0]-f+s[0]*l[1]+s[1]*l[0]+s[1]*l[1];i=c-f+(h-p)}return i}function n(){var e=Math.max.apply(Math,arguments);return e&&(e<1e-8||e>1e8)?s(2,-Math.round(u(e))):0}var r=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],i=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],o=Math.abs,a=Math.sqrt,s=Math.pow,u=Math.log2||function(e){return Math.log(e)*Math.LOG2E},l=1e-12,c=1.12e-16;return{TOLERANCE:1e-6,EPSILON:l,MACHINE_EPSILON:c,CURVETIME_EPSILON:4e-7,GEOMETRIC_EPSILON:2e-7,WINDING_EPSILON:2e-7,TRIGONOMETRIC_EPSILON:1e-7,CLIPPING_EPSILON:1e-9,KAPPA:4*(a(2)-1)/3,isZero:function(e){return e>=-l&&e<=l},clamp:e,integrate:function(e,t,n,o){for(var a=r[o-2],s=i[o-2],u=.5*(n-t),l=u+t,c=0,h=o+1>>1,f=1&o?s[c++]*e(l):0;c<h;){var p=u*a[c];f+=s[c++]*(e(l+p)+e(l-p))}return u*f},findRoot:function(e,t,n,r,i,a,s){for(var u=0;u<a;u++){var l=e(n),c=l/t(n),h=n-c;if(o(c)<s)return h;l>0?(i=n,n=h<=r?.5*(r+i):h):(r=n,n=h>=i?.5*(r+i):h)}return n},solveQuadratic:function(r,i,s,u,h,f){var p,d=1/0;if(o(r)<l){if(o(i)<l)return o(s)<l?-1:0;p=-s/i}else{i*=-.5;var m=t(r,i,s);if(m&&o(m)<c){var v=n(o(r),o(i),o(s));v&&(r*=v,i*=v,s*=v,m=t(r,i,s))}if(m>=-c){var g=m<0?0:a(m),y=i+(i<0?-g:g);0===y?(p=s/r,d=-p):(p=y/r,d=s/y)}}var _=0,b=null==h,w=h-l,x=f+l;return isFinite(p)&&(b||p>w&&p<x)&&(u[_++]=b?p:e(p,h,f)),d!==p&&isFinite(d)&&(b||d>w&&d<x)&&(u[_++]=b?d:e(d,h,f)),_},solveCubic:function(t,r,i,u,h,f,p){function d(e){v=e;var n=t*v;g=n+r,y=g*v+i,_=(n+g)*v+y,b=y*v+u}var v,g,y,_,b,w=n(o(t),o(r),o(i),o(u));if(w&&(t*=w,r*=w,i*=w,u*=w),o(t)<l)t=r,g=i,y=u,v=1/0;else if(o(u)<l)g=r,y=i,v=0;else{d(-(r/t)/3);var x=b/t,E=s(o(x),1/3),M=x<0?-1:1,C=-_/t,S=C>0?1.324717957244746*Math.max(E,a(C)):E,T=v-M*S;if(T!==v){do d(T),T=0===_?v:v-b/_/(1+c);while(M*T>M*v);o(t)*v*v>o(u/v)&&(y=-u/v,g=(y-i)/v)}}var P=m.solveQuadratic(t,g,y,h,f,p),O=null==f;return isFinite(v)&&(0===P||P>0&&v!==h[0]&&v!==h[1])&&(O||v>f-l&&v<p+l)&&(h[P++]=O?v:e(v,f,p)),P}}},v={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}return this._id++}},g=c.extend({_class:"Point",_readIndex:!0,initialize:function(e,t){var n=typeof e;if("number"===n){var r="number"==typeof t;this.x=e,this.y=r?t:e,this.__read&&(this.__read=r?2:1)}else if("undefined"===n||null===e)this.x=this.y=0,this.__read&&(this.__read=null===e?1:0);else{var i="string"===n?e.split(/[\s,]+/)||[]:e;Array.isArray(i)?(this.x=i[0],this.y=i.length>1?i[1]:i[0]):"x"in i?(this.x=i.x,this.y=i.y):"width"in i?(this.x=i.width,this.y=i.height):"angle"in i?(this.x=i.length,this.y=0,this.setAngle(i.angle)):(this.x=this.y=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1)}},set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new g(this.x,this.y)},toString:function(){var e=d.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this.set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();m.isZero(n)&&this.getAngle(),this.set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=g.read(arguments),t=this.getLength()*e.getLength();if(m.isZero(t))return NaN;var n=this.dot(e)/t;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this.set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=g.read(arguments);return 180*Math.atan2(this.cross(e),this.dot(e))/Math.PI},getDistance:function(){var e=g.read(arguments),t=e.x-this.x,n=e.y-this.y,r=t*t+n*n,i=c.read(arguments);return i?r:Math.sqrt(r)},normalize:function(e){e===s&&(e=1);var t=this.getLength(),n=0!==t?e/t:0,r=new g(this.x*n,this.y*n);return n>=0&&(r._angle=this._angle),r},rotate:function(e,t){if(0===e)return this.clone();e=e*Math.PI/180;var n=t?this.subtract(t):this,r=Math.sin(e),i=Math.cos(e);return n=new g(n.x*i-n.y*r,n.x*r+n.y*i),t?n.add(t):n},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=g.read(arguments);return new g(this.x+e.x,this.y+e.y)},subtract:function(){var e=g.read(arguments);return new g(this.x-e.x,this.y-e.y)},multiply:function(){var e=g.read(arguments);return new g(this.x*e.x,this.y*e.y)},divide:function(){var e=g.read(arguments);return new g(this.x/e.x,this.y/e.y)},modulo:function(){var e=g.read(arguments);return new g(this.x%e.x,this.y%e.y)},negate:function(){return new g((-this.x),(-this.y))},isInside:function(){return w.read(arguments).contains(this)},isClose:function(){var e=g.read(arguments),t=c.read(arguments);return this.getDistance(e)<=t},isCollinear:function(){var e=g.read(arguments);return g.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=g.read(arguments);return g.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){return m.isZero(this.x)&&m.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(){var e=g.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=g.read(arguments);return this.x*e.y-this.y*e.x;
},project:function(){var e=g.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new g(e.x*t,e.y*t)},statics:{min:function(){var e=g.read(arguments),t=g.read(arguments);return new g(Math.min(e.x,t.x),Math.min(e.y,t.y))},max:function(){var e=g.read(arguments),t=g.read(arguments);return new g(Math.max(e.x,t.x),Math.max(e.y,t.y))},random:function(){return new g(Math.random(),Math.random())},isCollinear:function(e,t,n,r){return Math.abs(e*r-t*n)<=1e-7*Math.sqrt((e*e+t*t)*(n*n+r*r))},isOrthogonal:function(e,t,n,r){return Math.abs(e*n+t*r)<=1e-7*Math.sqrt((e*e+t*t)*(n*n+r*r))}}},c.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new g(t(this.x),t(this.y))}},{})),y=g.extend({initialize:function(e,t,n,r){this._x=e,this._y=t,this._owner=n,this._setter=r},set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner.changeSelection(this._getSelection(),e)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),_=c.extend({_class:"Size",_readIndex:!0,initialize:function(e,t){var n=typeof e;if("number"===n){var r="number"==typeof t;this.width=e,this.height=r?t:e,this.__read&&(this.__read=r?2:1)}else if("undefined"===n||null===e)this.width=this.height=0,this.__read&&(this.__read=null===e?1:0);else{var i="string"===n?e.split(/[\s,]+/)||[]:e;Array.isArray(i)?(this.width=i[0],this.height=i.length>1?i[1]:i[0]):"width"in i?(this.width=i.width,this.height=i.height):"x"in i?(this.width=i.x,this.height=i.y):(this.width=this.height=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1)}},set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new _(this.width,this.height)},toString:function(){var e=d.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=_.read(arguments);return new _(this.width+e.width,this.height+e.height)},subtract:function(){var e=_.read(arguments);return new _(this.width-e.width,this.height-e.height)},multiply:function(){var e=_.read(arguments);return new _(this.width*e.width,this.height*e.height)},divide:function(){var e=_.read(arguments);return new _(this.width/e.width,this.height/e.height)},modulo:function(){var e=_.read(arguments);return new _(this.width%e.width,this.height%e.height)},negate:function(){return new _((-this.width),(-this.height))},isZero:function(){return m.isZero(this.width)&&m.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new _(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new _(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new _(Math.random(),Math.random())}}},c.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new _(t(this.width),t(this.height))}},{})),b=_.extend({initialize:function(e,t,n,r){this._width=e,this._height=t,this._owner=n,this._setter=r},set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),w=c.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(e,t,n,r){var i=typeof e,o=0;if("number"===i?(this.x=e,this.y=t,this.width=n,this.height=r,o=4):"undefined"===i||null===e?(this.x=this.y=this.width=this.height=0,o=null===e?1:0):1===arguments.length&&(Array.isArray(e)?(this.x=e[0],this.y=e[1],this.width=e[2],this.height=e[3],o=1):e.x!==s||e.width!==s?(this.x=e.x||0,this.y=e.y||0,this.width=e.width||0,this.height=e.height||0,o=1):e.from===s&&e.to===s&&(this.x=this.y=this.width=this.height=0,this._set(e),o=1)),!o){var a=g.readNamed(arguments,"from"),u=c.peek(arguments);if(this.x=a.x,this.y=a.y,u&&u.x!==s||c.hasNamed(arguments,"to")){var l=g.readNamed(arguments,"to");this.width=l.x-a.x,this.height=l.y-a.y,this.width<0&&(this.x=l.x,this.width=-this.width),this.height<0&&(this.y=l.y,this.height=-this.height)}else{var h=_.read(arguments);this.width=h.width,this.height=h.height}o=arguments.__index}this.__read&&(this.__read=o)},set:function(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this},clone:function(){return new w(this.x,this.y,this.width,this.height)},equals:function(e){var t=c.isPlainValue(e)?w.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=d.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){var t=e?g:y;return new t(this.x,this.y,this,"setPoint")},setPoint:function(){var e=g.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){var t=e?_:b;return new t(this.width,this.height,this,"setSize")},setSize:function(){var e=_.read(arguments);this._fixX&&(this.x+=(this.width-e.width)*this._fixX),this._fixY&&(this.y+=(this.height-e.height)*this._fixY),this.width=e.width,this.height=e.height,this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(e){this._fixW||(this.width-=e-this.x),this.x=e,this._fixX=0},getTop:function(){return this.y},setTop:function(e){this._fixH||(this.height-=e-this.y),this.y=e,this._fixY=0},getRight:function(){return this.x+this.width},setRight:function(e){this._fixX!==s&&1!==this._fixX&&(this._fixW=0),this._fixW?this.x=e-this.width:this.width=e-this.x,this._fixX=1},getBottom:function(){return this.y+this.height},setBottom:function(e){this._fixY!==s&&1!==this._fixY&&(this._fixH=0),this._fixH?this.y=e-this.height:this.height=e-this.y,this._fixY=1},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(e){this.x=e-.5*this.width,this._fixX=.5},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(e){this.y=e-.5*this.height,this._fixY=.5},getCenter:function(e){var t=e?g:y;return new t(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=g.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(e){return e&&e.width!==s||4===(Array.isArray(e)?e:arguments).length?this._containsRectangle(w.read(arguments)):this._containsPoint(g.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(){var e=w.read(arguments);return e.x+e.width>this.x&&e.y+e.height>this.y&&e.x<this.x+this.width&&e.y<this.y+this.height},touches:function(){var e=w.read(arguments);return e.x+e.width>=this.x&&e.y+e.height>=this.y&&e.x<=this.x+this.width&&e.y<=this.y+this.height},intersect:function(){var e=w.read(arguments),t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),i=Math.min(this.y+this.height,e.y+e.height);return new w(t,n,r-t,i-n)},unite:function(){var e=w.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),i=Math.max(this.y+this.height,e.y+e.height);return new w(t,n,r-t,i-n)},include:function(){var e=g.read(arguments),t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x),i=Math.max(this.y+this.height,e.y);return new w(t,n,r-t,i-n)},expand:function(){var e=_.read(arguments),t=e.width,n=e.height;return new w(this.x-t/2,this.y-n/2,this.width+t,this.height+n)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===s?e:t)-this.height)}},c.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var n=e.join(""),r=/^[RL]/.test(n);t>=4&&(e[1]+=r?"Y":"X");var i=e[r?0:1],o=e[r?1:0],a="get"+i,s="get"+o,u="set"+i,l="set"+o,c="get"+n,h="set"+n;this[c]=function(e){var t=e?g:y;return new t(this[a](),this[s](),this,h)},this[h]=function(){var e=g.read(arguments);this[u](e.x),this[l](e.y)}},{beans:!0})),x=w.extend({initialize:function(e,t,n,r,i,o){this.set(e,t,n,r,!0),this._owner=i,this._setter=o},set:function(e,t,n,r,i){return this._x=e,this._y=t,this._width=n,this._height=r,i||this._owner[this._setter](this),this}},new function(){var e=w.prototype;return c.each(["x","y","width","height"],function(e){var t=c.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._dontNotify||this._owner[this._setter](this)}},c.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(e){var t=this._owner;t.changeSelection&&t.changeSelection(2,e)}}))}),E=c.extend({_class:"Matrix",initialize:function e(t){var n=arguments.length,r=!0;if(6===n?this.set.apply(this,arguments):1===n?t instanceof e?this.set(t._a,t._b,t._c,t._d,t._tx,t._ty):Array.isArray(t)?this.set.apply(this,t):r=!1:0===n?this.reset():r=!1,!r)throw new Error("Unsupported matrix parameters")},set:function(e,t,n,r,i,o,a){return this._a=e,this._b=t,this._c=n,this._d=r,this._tx=i,this._ty=o,a||this._changed(),this},_serialize:function(e,t){return c.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(9))},clone:function(){return new E(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=d.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var n=this._owner;return!!n&&(n.transform(null,!0,c.pick(e,!0),t),this.isIdentity())},translate:function(){var e=g.read(arguments),t=e.x,n=e.y;return this._tx+=t*this._a+n*this._c,this._ty+=t*this._b+n*this._d,this._changed(),this},scale:function(){var e=g.read(arguments),t=g.read(arguments,0,{readNull:!0});return t&&this.translate(t),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,t&&this.translate(t.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=g.read(arguments,1),n=t.x,r=t.y,i=Math.cos(e),o=Math.sin(e),a=n-n*i+r*o,s=r-n*o-r*i,u=this._a,l=this._b,c=this._c,h=this._d;return this._a=i*u+o*c,this._b=i*l+o*h,this._c=-o*u+i*c,this._d=-o*l+i*h,this._tx+=a*u+s*c,this._ty+=a*l+s*h,this._changed(),this},shear:function(){var e=g.read(arguments),t=g.read(arguments,0,{readNull:!0});t&&this.translate(t);var n=this._a,r=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*n,this._d+=e.x*r,t&&this.translate(t.negate()),this._changed(),this},skew:function(){var e=g.read(arguments),t=g.read(arguments,0,{readNull:!0}),n=Math.PI/180,r=new g(Math.tan(e.x*n),Math.tan(e.y*n));return this.shear(r,t)},append:function(e){if(e){var t=this._a,n=this._b,r=this._c,i=this._d,o=e._a,a=e._c,s=e._b,u=e._d,l=e._tx,c=e._ty;this._a=o*t+s*r,this._c=a*t+u*r,this._b=o*n+s*i,this._d=a*n+u*i,this._tx+=l*t+c*r,this._ty+=l*n+c*i,this._changed()}return this},prepend:function(e){if(e){var t=this._a,n=this._b,r=this._c,i=this._d,o=this._tx,a=this._ty,s=e._a,u=e._c,l=e._b,c=e._d,h=e._tx,f=e._ty;this._a=s*t+u*n,this._c=s*r+u*i,this._b=l*t+c*n,this._d=l*r+c*i,this._tx=s*o+u*a+h,this._ty=l*o+c*a+f,this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,n=this._c,r=this._d,i=this._tx,o=this._ty,a=e*r-t*n,s=null;return a&&!isNaN(a)&&isFinite(i)&&isFinite(o)&&(this._a=r/a,this._b=-t/a,this._c=-n/a,this._d=e/a,this._tx=(n*o-r*i)/a,this._ty=(t*i-e*o)/a,s=this),s},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new E(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,n){return arguments.length<3?this._transformPoint(g.read(arguments)):this._transformCoordinates(e,t,n)},_transformPoint:function(e,t,n){var r=e.x,i=e.y;return t||(t=new g),t.set(r*this._a+i*this._c+this._tx,r*this._b+i*this._d+this._ty,n)},_transformCoordinates:function(e,t,n){for(var r=0,i=2*n;r<i;r+=2){var o=e[r],a=e[r+1];t[r]=o*this._a+a*this._c+this._tx,t[r+1]=o*this._b+a*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,n=e.y,r=t+e.width,i=n+e.height,o=[t,n,r,n,r,i,t,i];return this._transformCoordinates(o,o,4)},_transformBounds:function(e,t,n){for(var r=this._transformCorners(e),i=r.slice(0,2),o=i.slice(),a=2;a<8;a++){var s=r[a],u=1&a;s<i[u]?i[u]=s:s>o[u]&&(o[u]=s)}return t||(t=new w),t.set(i[0],i[1],o[0]-i[0],o[1]-i[1],n)},inverseTransform:function(){return this._inverseTransform(g.read(arguments))},_inverseTransform:function(e,t,n){var r=this._a,i=this._b,o=this._c,a=this._d,s=this._tx,u=this._ty,l=r*a-i*o,c=null;if(l&&!isNaN(l)&&isFinite(s)&&isFinite(u)){var h=e.x-this._tx,f=e.y-this._ty;t||(t=new g),c=t.set((h*a-f*o)/l,(f*r-h*i)/l,n)}return c},decompose:function(){var e,t,n,r=this._a,i=this._b,o=this._c,a=this._d,s=r*a-i*o,u=Math.sqrt,l=Math.atan2,c=180/Math.PI;if(0!==r||0!==i){var h=u(r*r+i*i);e=Math.acos(r/h)*(i>0?1:-1),t=[h,s/h],n=[l(r*o+i*a,h*h),0]}else if(0!==o||0!==a){var f=u(o*o+a*a);e=Math.asin(o/f)*(a>0?1:-1),t=[s/f,f],n=[0,l(r*o+i*a,f*f)]}else e=0,n=t=[0,0];return{translation:this.getTranslation(),rotation:e*c,scaling:new g(t),skewing:new g(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new g(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},c.each(["a","b","c","d","tx","ty"],function(e){var t=c.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._changed()}},{})),M=c.extend({_class:"Line",initialize:function(e,t,n,r,i){var o=!1;arguments.length>=4?(this._px=e,this._py=t,this._vx=n,this._vy=r,o=i):(this._px=e.x,this._py=e.y,this._vx=t.x,this._vy=t.y,o=n),o||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new g(this._px,this._py)},getVector:function(){return new g(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return M.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return M.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(M.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0))},isCollinear:function(e){return g.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return g.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,n,r,i,o,a,s,u,l){u||(n-=e,r-=t,a-=i,s-=o);var c=n*s-r*a;if(!m.isZero(c)){var h=e-i,f=t-o,p=(a*f-s*h)/c,d=(n*f-r*h)/c,v=1e-12,y=-v,_=1+v;if(l||y<p&&p<_&&y<d&&d<_)return l||(p=p<=0?0:p>=1?1:p),new g(e+p*n,t+p*r)}},getSide:function(e,t,n,r,i,o,a,s){a||(n-=e,r-=t);var u=i-e,l=o-t,c=u*r-l*n;return 0!==c||s||(c=(u*n+u*n)/(n*n+r*r),c>=0&&c<=1&&(c=0)),c<0?-1:c>0?1:0},getSignedDistance:function(e,t,n,r,i,o,a){return a||(n-=e,r-=t),0===n?r>0?i-e:e-i:0===r?n<0?o-t:t-o:((i-e)*r-(o-t)*n)/Math.sqrt(n*n+r*r)}}}),C=p.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(e){p.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Y(null,null,this),this._view=Q.create(this,e||ae.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return c.serialize(this._children,e,!0,t)},_changed:function(e,t){if(1&e){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var r=this._changes;if(r&&t){var i=this._changesById,o=t._id,a=i[o];a?a.flags|=e:r.push(i[o]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return 0===this._children.length},remove:function e(){return!!e.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.initialize(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new P({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:R,match:function(n){var r=n._definition,i=r._id;return t[i]||(t[i]=!0,e.push(r)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var n in e){var r=e[n],i=r._selection;1&i&&r.isInserted()?t.push(r):i||this._updateSelection(r)}return t},_updateSelection:function(e){var t=e._id,n=this._selectionItems;e._selection?n[t]!==e&&(this._selectionCount++,n[t]=e):n[t]===e&&(this._selectionCount--,delete n[t])},selectAll:function(){for(var e=this._children,t=0,n=e.length;t<n;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(s,e)},insertLayer:function(e,t){if(t instanceof P){t._remove(!1,!0),c.splice(this._children,[t],e,0),t._setProject(this,!0);var n=t._name;n&&t.setName(n),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,n,r){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(s,new P(S.NO_INSERT),!0,!0)).insertChild(e,t,n),r&&t.activate&&t.activate(),t},getItems:function(e){return S._getItems(this,e)},getItem:function(e){return S._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return c.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){"mouseup"===e&&(t.mousedrag=null);var n=t[e];if(n){for(var r in n){var i=n[r];for(var o in t){var a=t[o];a&&a!=n&&delete a[i._id]}i.remove()}t[e]=null}}},draw:function(e,t,n){this._updateVersion++,e.save(),t.applyToContext(e);for(var r=this._children,i=new c({offset:new g(0,0),pixelRatio:n,viewMatrix:t.isIdentity()?null:t,matrices:[new E],updateMatrix:!0}),o=0,a=r.length;o<a;o++)r[o].draw(e,i);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var s=this._selectionItems,u=this._scope.settings.handleSize,l=this._updateVersion;for(var h in s)s[h]._drawSelection(e,t,u,s,l);e.restore()}}}),S=c.extend(h,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=c.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new E,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}}},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return c.each(e,function(e){this._events[e]={install:function(e){this.getView()._countItemEvent(e,1)},uninstall:function(e){this.getView()._countItemEvent(e,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var n=e&&c.isPlainObject(e),r=n&&e.internal===!0,i=this._matrix=new E,a=n&&e.project||o.project,u=o.settings;return this._id=r?null:v.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&u.applyMatrix,t&&i.translate(t),i._owner=this,this._style=new Y(a._currentStyle,this,a),r||n&&e.insert===!1||!u.insertItems&&(!n||e.insert!==!0)?this._setProject(a):(n&&e.parent||a)._insertItem(s,this,!0,!0),n&&e!==S.NO_INSERT&&c.filter(this,e,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(e,t){function n(n){for(var o in n){var a=i[o];c.equals(a,"leading"===o?1.2*n.fontSize:n[o])||(r[o]=c.serialize(a,e,"data"!==o,t))}}var r={},i=this;return n(this._serializeFields),this instanceof T||n(this._style._defaults),[this._class,r]},_changed:function(e){var t=this._symbol,n=this._parent||t,r=this._project;8&e&&(this._bounds=this._position=this._decomposed=this._globalMatrix=s),n&&40&e&&S._clearBoundsCache(n),2&e&&S._clearBoundsCache(this),r&&r._changed(e,this),t&&t._changed(e)},set:function(e){return e&&this._set(e),this},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var n=t._children,r=t._namedChildren;(r[e]=r[e]||[]).push(this),e in n||(n[e]=this)}this._name=e||s,this._changed(128)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},c.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=c.capitalize(e),e="_"+e;this["get"+t]=function(){return this[e]},this["set"+t]=function(t){t!=this[e]&&(this[e]=t,this._changed("_locked"===e?128:129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(129))}},changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){if(this._selectChildren)for(var e=this._children,t=0,n=e.length;t<n;t++)if(e[t].isSelected())return!0;return!!(1&this._selection)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].setSelected(e);this.changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(1&this._selection);if(e&&t){for(var n=0,r=e.length;n<r;n++)if(!e[n].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var n=0,r=t.length;n<r;n++)t[n].setFullySelected(e);this.changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=this._position,n=e?g:y;if(!t){var r=this._pivot;t=this._position=r?this._matrix._transformPoint(r):this.getBounds().getCenter(!0)}return new n(t.x,t.y,this,"setPosition")},setPosition:function(){this.translate(g.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(e){var t=this._pivot;if(t){var n=e?g:y;t=new n(t.x,t.y,this,"setPivot")}return t},setPivot:function(){this._pivot=g.read(arguments,0,{clone:!0,readNull:!0}),this._position=s}},c.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(t){return this.getBounds(t,e)}},{beans:!0,getBounds:function(e,t){var n=t||e instanceof E,r=c.set({},n?t:e,this._boundsOptions);r.stroke&&!this.getStrokeScaling()||(r.cacheItem=this);var i=this._getCachedBounds(n&&e,r);return 0===arguments.length?new x(i.x,i.y,i.width,i.height,this,"setBounds"):i},setBounds:function(){var e=w.read(arguments),t=this.getBounds(),n=this._matrix,r=new E,i=e.getCenter();r.translate(i),e.width==t.width&&e.height==t.height||(n.isInvertible()||(n.initialize(n._backup||(new E).translate(n.getTranslation())),t=this.getBounds()),r.scale(0!==t.width?e.width/t.width:0,0!==t.height?e.height/t.height:0)),i=t.getCenter(),r.translate(-i.x,-i.y),this.transform(r)},_getBounds:function(e,t){var n=this._children;return n&&0!==n.length?(S._updateBoundsCache(this,t.cacheItem),S._getBounds(n,e,t)):new w},_getCachedBounds:function(e,t){e=e&&e._orNullIfIdentity();var n=t.internal,r=t.cacheItem,i=n?null:this._matrix._orNullIfIdentity(),o=r&&(!e||e.equals(i))&&[t.stroke?1:0,t.handle?1:0,n?1:0].join("");if(S._updateBoundsCache(this._parent||this._symbol,r),o&&this._bounds&&o in this._bounds)return this._bounds[o].rect.clone();var a=this._getBounds(e||i,t);if(o){this._bounds||(this._bounds={});this._bounds[o]={rect:a.clone(),internal:t.internal}}return a},_getStrokeMatrix:function(e,t){var n=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,r=n?n.getViewMatrix().invert():e;return r&&r._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var n=t._id,r=e._boundsCache=e._boundsCache||{ids:{},list:[]};r.ids[n]||(r.list.push(t),r.ids[n]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=s;for(var n=0,r=t.list,i=r.length;n<i;n++){var o=r[n];o!==e&&(o._bounds=o._position=s,o._boundsCache&&S._clearBoundsCache(o))}}},_getBounds:function(e,t,n){var r=1/0,i=-r,o=r,a=i;n=n||{};for(var s=0,u=e.length;s<u;s++){var l=e[s];if(l._visible&&!l.isEmpty()){var c=l._getCachedBounds(t&&t.appended(l._matrix),n);r=Math.min(c.x,r),o=Math.min(c.y,o),i=Math.max(c.x+c.width,i),a=Math.max(c.y+c.height,a)}}return isFinite(r)?new w(r,o,i-r,a-o):new w}}}),{beans:!0,_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e&&e.rotation},setRotation:function(e){var t=this.getRotation();null!=t&&null!=e&&this.rotate(e-t)},getScaling:function(e){var t=this._decompose(),n=t&&t.scaling,r=e?g:y;return n&&new r(n.x,n.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=g.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.initialize.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix,n=this._project._updateVersion;if(t&&t._updateVersion!==n&&(t=null),!t){t=this._globalMatrix=this._matrix.clone();var r=this._parent;r&&t.prepend(r.getGlobalMatrix(!0)),t._updateVersion=n}return e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof P)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e,t){this.removeChildren(),this.addChildren(e,t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return c.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(S.NO_INSERT),n=this._children,r=c.pick(e?e.insert:s,e===s||e===!0),i=c.pick(e?e.deep:s,!0);n&&t.copyAttributes(this),n&&!i||t.copyContent(this),n||t.copyAttributes(this),r&&t.insertAbove(this);var o=this._name,a=this._parent;if(o&&a){for(var n=a._children,u=o,l=1;n[o];)o=u+" "+l++;o!==u&&t.setName(o)}return t},copyContent:function(e){for(var t=e._children,n=0,r=t&&t.length;n<r;n++)this.addChild(t[n].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,i=n.length;r<i;r++){var o=n[r];e.hasOwnProperty(o)&&(this[o]=e[o])}t||this._matrix.initialize(e._matrix),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var a=e._data,s=e._name;this._data=a?c.clone(a):null,s&&this.setName(s)},rasterize:function(e,t){var n=this.getStrokeBounds(),r=(e||this.getView().getResolution())/72,i=n.getTopLeft().floor(),o=n.getBottomRight().ceil(),a=new _(o.subtract(i)),u=new A(S.NO_INSERT);if(!a.isZero()){var l=ae.getCanvas(a.multiply(r)),h=l.getContext("2d"),f=(new E).scale(r).translate(i.negate());h.save(),f.applyToContext(h),this.draw(h,new c({matrices:[f]})),h.restore(),u.setCanvas(l)}return u.transform((new E).translate(i.add(a.divide(2))).scale(1/r)),(t===s||t)&&u.insertAbove(this),u},contains:function(){return!!this._contains(this._matrix._inverseTransform(g.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var n=t.length-1;n>=0;n--)if(t[n].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return w.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new U.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof S&&this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0}},new function(){function e(){return this._hitTest(g.read(arguments),L.getOptions(arguments))}function t(){var e=g.read(arguments),t=L.getOptions(arguments),n=t.match,r=[];
return t=c.set({},t,{match:function(e){n&&!n(e)||r.push(e)}}),this._hitTest(e,t),r}function n(e,t,n,r){var i=this._children;if(i)for(var o=i.length-1;o>=0;o--){var a=i[o],s=a!==r&&a._hitTest(e,t,n);if(s)return s}return null}return C.inject({hitTest:e,hitTestAll:t,_hitTest:n}),{hitTest:e,hitTestAll:t,_hitTestChildren:n}},{_hitTest:function(e,t,n){function r(e){return!d||e&&d(e)?e:null}function i(t,n){var r=h["get"+n]();if(e.subtract(r).divide(l).length<=1)return new L(t,m,{name:c.hyphenate(n),point:r})}if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var o=this._matrix,a=n?n.appended(o):this.getGlobalMatrix().prepend(this.getView()._matrix),s=this.getStrokeScaling()?null:a.inverted()._shiftless(),u=Math.max(t.tolerance,1e-6),l=t._tolerancePadding=new _(U._getStrokePadding(u,s));if(e=o._inverseTransform(e),!e||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(l.multiply(2))._containsPoint(e))return null;var h,f,p=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==c.hyphenate(this._class)||t.class&&!(this instanceof t.class)),d=t.match,m=this;if(p&&(t.center||t.bounds)&&this._parent){if(h=this.getInternalBounds(),t.center&&(f=i("center","Center")),!f&&t.bounds)for(var v=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],g=0;g<8&&!f;g++)f=i("bounds",v[g]);f=r(f)}return f||(f=this._hitTestChildren(e,t,a)||p&&r(this._hitTestSelf(e,t,a,s))||null),f&&f.point&&(f.point=o.transform(f.point)),f},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new L("fill",this)},matches:function(e,t){function n(e,t){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],o=t[r];if(c.isPlainObject(i)&&c.isPlainObject(o)){if(!n(i,o))return!1}else if(!c.equals(i,o))return!1}return!0}var r=typeof e;if("object"===r){for(var i in e)if(e.hasOwnProperty(i)&&!this.matches(i,e[i]))return!1;return!0}if("function"===r)return e(this);if("match"===e)return t(this);var o=/^(empty|editable)$/.test(e)?this["is"+c.capitalize(e)]():"type"===e?c.hyphenate(this._class):this[e];if("class"===e){if("function"==typeof t)return this instanceof t;o=this._class}if("function"==typeof t)return!!t(o);if(t){if(t.test)return t.test(o);if(c.isPlainObject(t))return n(t,o)}return c.equals(o,t)},getItems:function(e){return S._getItems(this,e,this._matrix)},getItem:function(e){return S._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,n,r,i,o){if(!i){var a="object"==typeof n&&n,s=a&&a.overlapping,u=a&&a.inside,l=s||u,h=l&&w.read([l]);i={items:[],recursive:a&&a.recursive!==!1,inside:!!u,overlapping:!!s,rect:h,path:s&&new U.Rectangle({rectangle:h,insert:!1})},a&&(n=c.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var f=t._children,p=i.items,h=i.rect;r=h&&(r||new E);for(var d=0,m=f&&f.length;d<m;d++){var v=f[d],g=r&&r.appended(v._matrix),y=!0;if(h){var l=v.getBounds(g);if(!h.intersects(l))continue;h.contains(l)||i.overlapping&&(l.contains(h)||i.path.intersects(v,g))||(y=!1)}if(y&&v.matches(n)&&(p.push(v),o))break;if(i.recursive!==!1&&e(v,n,g,i,o),o&&p.length>0)break}return p}}},{importJSON:function(e){var t=c.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e,t){return this.insertChild(s,e,t)},insertChild:function(e,t,n){var r=t?this.insertChildren(e,[t],n):null;return r&&r[0]},addChildren:function(e,t){return this.insertChildren(this._children.length,e,t)},insertChildren:function(e,t,n,r){var i=this._children;if(i&&t&&t.length>0){t=Array.prototype.slice.apply(t);for(var o=t.length-1;o>=0;o--){var a=t[o];a&&(!r||a instanceof r)?a._remove(!1,!0):t.splice(o,1)}c.splice(i,t,e,0);for(var s=this._project,u=s._changes,o=0,l=t.length;o<l;o++){var a=t[o],h=a._name;a._parent=this,a._setProject(s,!0),h&&a.setName(h),u&&this._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t,n){var r=this;if(r!==e){var i=e&&e._getOwner();i?(r._remove(!1,!0),i._insertItem(e._index+t,r,n)):r=null}return r},insertAbove:function(e,t){return this._insertAt(e,1,t)},insertBelow:function(e,t){return this._insertAt(e,0,t)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(s,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",copyTo:function(e){return e._insertItem(s,this.clone(!1))},reduce:function(e){var t=this._children;if(t&&1===t.length){var n=t[0].reduce(e);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,n=e._namedChildren,r=this._name,i=n[r],o=i?i.indexOf(this):-1;o!==-1&&(t[r]==this&&delete t[r],i.splice(o,1),i.length?t[r]=i[0]:delete n[r])}},_remove:function(e,t){var n=this._getOwner(),r=this._project,i=this._index;return!!n&&(null!=i&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),c.splice(n._children,null,i,1)),this._name&&this._removeNamed(),this._installEvents(!1),e&&r._changes&&this._changed(5),t&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=c.pick(t,this._children.length);for(var n=c.splice(this._children,null,e,t-e),r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(){return!this._children||0===this._children.length},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(e){var t=[];do t.unshift(e);while(e=e._parent);return t}for(var n=t(this),r=t(e),i=0,o=Math.min(n.length,r.length);i<o;i++)if(n[i]!=r[i])return n[i]._index<r[i]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(e){return this._getOrder(e)===-1},isBelow:function(e){return 1===this._getOrder(e)},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return!!e&&e.isDescendant(this)},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},c.each(["rotate","scale","shear","skew"],function(e){var t="rotate"===e;this[e]=function(){var n=(t?c:g).read(arguments),r=g.read(arguments,0,{readNull:!0});return this.transform((new E)[e](n,r||this.getPosition(!0)))}},{translate:function(){var e=new E;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,n,r){e&&e.isIdentity()&&(e=null);var i=this._matrix,o=(t||this._applyMatrix)&&(!i.isIdentity()||e||t&&n&&this._children);if(!e&&!o)return this;if(e&&(!e.isInvertible()&&i.isInvertible()&&(i._backup=i.getValues()),i.prepend(e)),o=o&&this._transformContent(i,n,r)){var a=this._pivot,s=this._style,u=s.getFillColor(!0),l=s.getStrokeColor(!0);a&&i._transformPoint(a,a,!0),u&&u.transform(i),l&&l.transform(i),i.reset(!0),r&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,h=this._position;this._changed(9);var f=c&&e&&e.decompose();if(f&&!f.shearing&&f.rotation%90===0){for(var p in c){var d=c[p];if(o||!d.internal){var m=d.rect;e._transformBounds(m,m)}}var v=this._boundsGetter,m=c[v&&v.getBounds||v||"getBounds"];m&&(this._position=m.getCenter(!0)),this._bounds=c}else e&&h&&(this._position=e._transformPoint(h,h));return this},_transformContent:function(e,t,n){var r=this._children;if(r){for(var i=0,o=r.length;i<o;i++)r[i].transform(e,!0,t,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(g.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(g.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(g.read(arguments))},localToParent:function(){return this._matrix._transformPoint(g.read(arguments))},fitBounds:function(e,t){e=w.read(arguments);var n=this.getBounds(),r=n.height/n.width,i=e.height/e.width,o=(t?r>i:r<i)?e.width/n.width:e.height/n.height,a=new w(new g,new _(n.width*o,n.height*o));a.setCenter(e.getCenter()),this.setBounds(a)}}),{_setStyles:function(e,t,n){var r=this._style;if(r.hasFill()&&(e.fillStyle=r.getFillColor().toCanvasStyle(e)),r.hasStroke()){e.strokeStyle=r.getStrokeColor().toCanvasStyle(e),e.lineWidth=r.getStrokeWidth();var i=r.getStrokeJoin(),a=r.getStrokeCap(),s=r.getMiterLimit();if(i&&(e.lineJoin=i),a&&(e.lineCap=a),s&&(e.miterLimit=s),o.support.nativeDash){var u=r.getDashArray(),l=r.getDashOffset();u&&u.length&&("setLineDash"in e?(e.setLineDash(u),e.lineDashOffset=l):(e.mozDash=u,e.mozDashOffset=l))}}if(r.hasShadow()){var c=t.pixelRatio||1,h=n._shiftless().prepend((new E).scale(c,c)),f=h.transform(new g(r.getShadowBlur(),0)),p=h.transform(this.getShadowOffset());e.shadowColor=r.getShadowColor().toCanvasStyle(e),e.shadowBlur=f.getLength(),e.shadowOffsetX=p.x,e.shadowOffsetY=p.y}},draw:function(e,t,n){var r=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var i=t.matrices,o=t.viewMatrix,a=this._matrix,s=i[i.length-1].appended(a);if(s.isInvertible()){o=o?o.appended(s):s,i.push(s),t.updateMatrix&&(s._updateVersion=r,this._globalMatrix=s);var u,l,c,h=this._blendMode,f=this._opacity,p="normal"===h,d=se.nativeModes[h],m=p&&1===f||t.dontStart||t.clip||(d||p&&f<1)&&this._canComposite(),v=t.pixelRatio||1;if(!m){var g=this.getStrokeBounds(o);if(!g.width||!g.height)return;c=t.offset,l=t.offset=g.getTopLeft().floor(),u=e,e=ae.getContext(g.getSize().ceil().add(1).multiply(v)),1!==v&&e.scale(v,v)}e.save();var y=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&o,_=!m&&t.clipItem,b=!y||_;if(m?(e.globalAlpha=f,d&&(e.globalCompositeOperation=h)):b&&e.translate(-l.x,-l.y),b&&(m?a:o).applyToContext(e),_&&t.clipItem.draw(e,t.extend({clip:!0})),y){e.setTransform(v,0,0,v,0,0);var w=t.offset;w&&e.translate(-w.x,-w.y)}this._draw(e,t,o,y),e.restore(),i.pop(),t.clip&&!t.dontFinish&&e.clip(),m||(se.process(h,e,u,f,l.subtract(c).multiply(v)),ae.release(e),t.offset=c)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof F)return t._isUpdated(e);var n=this._updateVersion===e;return!n&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,n=!0),n},_drawSelection:function(e,t,n,r,i){var o=this._selection,a=1&o,s=2&o||a&&this._selectBounds,u=4&o;if(this._drawSelected||(a=!1),(a||s||u)&&this._isUpdated(i)){var l,c=this.getSelectedColor(!0)||(l=this.getLayer())&&l.getSelectedColor(!0),h=t.appended(this.getGlobalMatrix(!0)),f=n/2;if(e.strokeStyle=e.fillStyle=c?c.toCanvasStyle(e):"#009dec",a&&this._drawSelected(e,h,r),u){var p=this.getPosition(!0),d=p.x,m=p.y;e.beginPath(),e.arc(d,m,f,0,2*Math.PI,!0),e.stroke();for(var v=[[0,-1],[1,0],[0,1],[-1,0]],g=f,y=n+1,_=0;_<4;_++){var b=v[_],w=b[0],x=b[1];e.moveTo(d+w*g,m+x*g),e.lineTo(d+w*y,m+x*y),e.stroke()}}if(s){var E=h._transformCorners(this.getInternalBounds());e.beginPath();for(var _=0;_<8;_++)e[0===_?"moveTo":"lineTo"](E[_],E[++_]);e.closePath(),e.stroke();for(var _=0;_<8;_++)e.fillRect(E[_]-f,E[++_]-f,n,n)}}},_canComposite:function(){return!1}},c.each(["down","drag","up","move"],function(e){this["removeOn"+c.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var n="mouse"+t,r=this._project,i=r._removeSets=r._removeSets||{};i[n]=i[n]||{},i[n][this._id]=this}return this}})),T=S.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||this.addChildren(Array.isArray(e)?e:arguments)},_changed:function e(t){e.base.call(this,t),1026&t&&(this._clipItem=s)},_getClipItem:function(){var e=this._clipItem;if(e===s){e=null;for(var t=this._children,n=0,r=t.length;n<r;n++)if(t[n]._clipMask){e=t[n];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,n){var r=this._getClipItem();return r?r._getCachedBounds(t&&t.appended(r._matrix),c.set({},n,{stroke:!1})):e.base.call(this,t,n)},_hitTestChildren:function e(t,n,r){var i=this._getClipItem();return(!i||i.contains(t))&&e.base.call(this,t,n,r,i)},_draw:function(e,t){var n=t.clip,r=!n&&this._getClipItem();t=t.extend({clipItem:r,clip:!1}),n?(e.beginPath(),t.dontStart=t.dontFinish=!0):r&&r.draw(e,t.extend({clip:!0}));for(var i=this._children,o=0,a=i.length;o<a;o++){var s=i[o];s!==r&&s.draw(e,t)}}}),P=T.extend({_class:"Layer",initialize:function(){T.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function e(){return this._parent?e.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),O=S.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(e){this._initialize(e)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&c.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new b(e.width,e.height,this,"setSize")},setSize:function(){var e=_.read(arguments);if(this._size){if(!this._size.equals(e)){var t=this._type,n=e.width,r=e.height;if("rectangle"===t){var i=_.min(this._radius,e.divide(2));this._radius.set(i.width,i.height)}else"circle"===t?(n=r=(n+r)/2,this._radius=n/2):"ellipse"===t&&this._radius.set(n/2,r/2);this._size.set(n,r),this._changed(9)}}else this._size=e.clone()},getRadius:function(){var e=this._radius;return"circle"===this._type?e:new b(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if("circle"===t){if(e===this._radius)return;var n=2*e;this._radius=e,this._size.set(n,n)}else if(e=_.read(arguments),this._radius){if(this._radius.equals(e))return;if(this._radius.set(e.width,e.height),"rectangle"===t){var n=_.max(this._size,e.multiply(2));this._size.set(n.width,n.height)}else"ellipse"===t&&this._size.set(2*e.width,2*e.height)}else this._radius=e.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new(U[c.capitalize(this._type)])({center:new g,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),o.settings.applyMatrix&&t.setApplyMatrix(!0),(e===s||e)&&t.insertAbove(this),t},toShape:"#clone",_draw:function(e,t,n,r){var i=this._style,o=i.hasFill(),a=i.hasStroke(),s=t.dontFinish||t.clip,u=!r;if(o||a||s){var l=this._type,c=this._radius,h="circle"===l;if(t.dontStart||e.beginPath(),u&&h)e.arc(0,0,c,0,2*Math.PI,!0);else{var f=h?c:c.width,p=h?c:c.height,d=this._size,m=d.width,v=d.height;if(u&&"rectangle"===l&&0===f&&0===p)e.rect(-m/2,-v/2,m,v);else{var g=m/2,y=v/2,_=.44771525016920644,b=f*_,w=p*_,x=[-g,-y+p,-g,-y+w,-g+b,-y,-g+f,-y,g-f,-y,g-b,-y,g,-y+w,g,-y+p,g,y-p,g,y-w,g-b,y,g-f,y,-g+f,y,-g+b,y,-g,y-w,-g,y-p];r&&r.transform(x,x,32),e.moveTo(x[0],x[1]),e.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]),g!==f&&e.lineTo(x[8],x[9]),e.bezierCurveTo(x[10],x[11],x[12],x[13],x[14],x[15]),y!==p&&e.lineTo(x[16],x[17]),e.bezierCurveTo(x[18],x[19],x[20],x[21],x[22],x[23]),g!==f&&e.lineTo(x[24],x[25]),e.bezierCurveTo(x[26],x[27],x[28],x[29],x[30],x[31])}}e.closePath()}s||!o&&!a||(this._setStyles(e,t,n),o&&(e.fill(i.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),a&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var n=new w(this._size).setCenter(0,0),r=this._style,i=t.stroke&&r.hasStroke()&&r.getStrokeWidth();return e&&(n=e._transformBounds(n)),i?n.expand(U._getStrokePadding(i,this._getStrokeMatrix(e,t))):n}},new function(){function e(e,t,n){var r=e._radius;if(!r.isZero())for(var i=e._size.divide(2),o=0;o<4;o++){var a=new g(1&o?1:-1,o>1?1:-1),s=a.multiply(i),u=s.subtract(a.multiply(r)),l=new w(s,u);if((n?l.expand(n):l).contains(t))return u}}function t(e,t,n,r){var i=e.divide(t);return(!r||i.quadrant===r)&&i.subtract(i.normalize()).multiply(t).divide(n).length<=1}return{_contains:function t(n){if("rectangle"===this._type){var r=e(this,n);return r?n.subtract(r).divide(this._radius).getLength()<=1:t.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(r,i,o,a){var s=!1,u=this._style,l=i.stroke&&u.hasStroke(),c=i.fill&&u.hasFill();if(l||c){var h=this._type,f=this._radius,p=l?u.getStrokeWidth()/2:0,d=i._tolerancePadding.add(U._getStrokePadding(p,!u.getStrokeScaling()&&a));if("rectangle"===h){var m=d.multiply(2),v=e(this,r,m);if(v)s=t(r.subtract(v),f,d,v.getQuadrant());else{var g=new w(this._size).setCenter(0,0),y=g.expand(m),_=g.expand(m.negate());s=y._containsPoint(r)&&!_._containsPoint(r)}}else s=t(r,f,d)}return s?new L(l?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function e(e,t,n,r,i){var o=new O(c.getNamed(i));return o._type=e,o._size=n,o._radius=r,o.translate(t)}return{Circle:function(){var t=g.readNamed(arguments,"center"),n=c.readNamed(arguments,"radius");return e("circle",t,new _(2*n),n,arguments)},Rectangle:function(){var t=w.readNamed(arguments,"rectangle"),n=_.min(_.readNamed(arguments,"radius"),t.getSize(!0).divide(2));return e("rectangle",t.getCenter(!0),t.getSize(!0),n,arguments)},Ellipse:function(){var t=O._readEllipse(arguments),n=t.radius;return e("ellipse",t.center,n.multiply(2),n,arguments)},_readEllipse:function(e){var t,n;if(c.hasNamed(e,"radius"))t=g.readNamed(e,"center"),n=_.readNamed(e,"radius");else{var r=w.readNamed(e,"rectangle");t=r.getCenter(!0),n=r.getSize(!0).divide(2)}return{center:t,radius:n}}}}}),A=S.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},initialize:function(e,t){if(!this._initialize(e,t!==s&&g.read(arguments,1))){var n="string"==typeof e?l.getElementById(e):e;n?this.setImage(n):this.setSource(e)}this._size||(this._size=new _,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,n=e._canvas;if(t)this._setImage(t);else if(n){var r=ae.getCanvas(e._size);r.getContext("2d").drawImage(n,0,0),this._setImage(r)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new b(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(){var e=_.read(arguments);if(!e.equals(this._size))if(e.width>0&&e.height>0){var t=this.getElement();this._setImage(ae.getCanvas(e)),t&&this.getContext(!0).drawImage(t,0,0,e.width,e.height)}else this._canvas&&ae.release(this._canvas),this._size=e.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||0===e.width&&0===e.height},getResolution:function(){var e=this._matrix,t=new g(0,0).transform(e),n=new g(1,0).transform(e).subtract(t),r=new g(0,1).transform(e).subtract(t);return new _(72/n.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){function t(e){var t=n.getView(),r=e&&e.type||"load";t&&n.responds(r)&&(o=t._scope,n.emit(r,new $(e)))}var n=this;this._setImage(e),this._loaded?setTimeout(t,0):e&&Z.add(e,{load:function(r){n._setImage(e),t(r)},error:t})},_setImage:function(e){this._canvas&&ae.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new _(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var e=ae.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){ae.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(513)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new u.Image,n=this._crossOrigin;n&&(t.crossOrigin=n),t.src=e,this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=w.read(arguments),t=ae.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=w.read(arguments),t=new A(S.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(e){var t=g.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,n;if(e?e instanceof B?(n=e,t=e.getBounds()):"object"==typeof e&&("width"in e?t=new w(e):"x"in e&&(t=new w(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var r=32,i=Math.min(t.width,r),o=Math.min(t.height,r),a=A._sampleContext;a?a.clearRect(0,0,r+1,r+1):a=A._sampleContext=ae.getContext(new _(r)),a.save();var s=(new E).scale(i/t.width,o/t.height).translate(-t.x,-t.y);s.applyToContext(a),n&&n.draw(a,new c({clip:!0,matrices:[s]})),this._matrix.applyToContext(a);var u=this.getElement(),l=this._size;u&&a.drawImage(u,-l.width/2,-l.height/2),a.restore();for(var h=a.getImageData(.5,.5,Math.ceil(i),Math.ceil(o)).data,f=[0,0,0],p=0,d=0,m=h.length;d<m;d+=4){var v=h[d+3];p+=v,v/=255,f[0]+=h[d]*v,f[1]+=h[d+1]*v,f[2]+=h[d+2]*v}for(var d=0;d<3;d++)f[d]/=p;return p?W.read(f):null},getPixel:function(){var e=g.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new W("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=g.read(arguments),t=W.read(arguments),n=t._convert("rgb"),r=t._alpha,i=this.getContext(!0),o=i.createImageData(1,1),a=o.data;a[0]=255*n[0],a[1]=255*n[1],a[2]=255*n[2],a[3]=null!=r?255*r:255,i.putImageData(o,e.x,e.y)},createImageData:function(){var e=_.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=w.read(arguments);return e.isEmpty()&&(e=new w(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},setImageData:function(e){var t=g.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},_getBounds:function(e,t){var n=new w(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new L("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e){var t=this.getElement();t&&(e.globalAlpha=this._opacity,e.drawImage(t,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),R=S.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(e,t){this._initialize(e,t!==s&&g.read(arguments,1))||this.setDefinition(e instanceof k?e:new k(e))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(e),t)},_hitTestSelf:function(e,t,n,r){var i=this._definition._item._hitTest(e,t,n);return i&&(i.item=this),i},_draw:function(e,t){this._definition._item.draw(e,t)}}),k=c.extend({_class:"SymbolDefinition",initialize:function(e,t){this._id=v.get(),this.project=o.project,e&&this.setItem(e,t)},_serialize:function(e,t){return t.add(this,function(){return c.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){8&e&&S._clearBoundsCache(this),1&e&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new g),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new R(this,e)},clone:function(){return new k(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),L=c.extend({_class:"HitResult",initialize:function(e,t,n){this.type=e,this.item=t,n&&(n.enumerable=!0,this.inject(n))},statics:{getOptions:function(e){var t=e&&c.read(e);return c.set({type:null,tolerance:o.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),D=c.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(e,t,n,r,i,o){var a,u,l,c,h=arguments.length;0===h||(1===h?e&&"point"in e?(a=e.point,u=e.handleIn,l=e.handleOut,c=e.selection):a=e:null==e||"object"==typeof e?(a=e,u=t,l=n,c=r):(a=e!==s?[e,t]:null,u=n!==s?[n,r]:null,l=i!==s?[i,o]:null)),new I(a,this,"_point"),new I(u,this,"_handleIn"),new I(l,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(e,t){var n=this._point,r=this._selection,i=r||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return r&&i.push(r),c.serialize(i,e,!0,t)},_changed:function(e){var t=this._path;if(t){var n,r=t._curves,i=this._index;r&&(e&&e!==this._point&&e!==this._handleIn||!(n=i>0?r[i-1]:t._closed?r[r.length-1]:null)||n._changed(),e&&e!==this._point&&e!==this._handleOut||!(n=r[i])||n._changed()),t._changed(25)}},getPoint:function(){return this._point},setPoint:function(){var e=g.read(arguments);this._point.set(e.x,e.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(){var e=g.read(arguments);this._handleIn.set(e.x,e.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(){var e=g.read(arguments);this._handleOut.set(e.x,e.y)},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},clearHandles:function(){this._handleIn.set(0,0),this._handleOut.set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,n=this._path;this._selection=e=e||0,n&&e!==t&&(n._updateSelection(this,t,e),n._changed(129))},changeSelection:function(e,t){var n=this._selection;this.setSelection(t?n|e:n&~e)},isSelected:function(){return!!(7&this._selection)},setSelected:function(e){this.changeSelection(7,e)},getIndex:function(){return this._index!==s?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new N(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,n){var r=e||{},i=r.type,o=r.factor,a=this.getPrevious(),u=this.getNext(),l=(a||this)._point,c=this._point,h=(u||this)._point,f=l.getDistance(c),p=c.getDistance(h);if(i&&"catmull-rom"!==i){if("geometric"!==i)throw new Error("Smoothing method '"+i+"' not supported.");if(a&&u){var d=l.subtract(h),m=o===s?.4:o,v=m*f/(f+p);t||this.setHandleIn(d.multiply(v)),n||this.setHandleOut(d.multiply(v-m))}}else{var y=o===s?.5:o,_=Math.pow(f,y),b=_*_,w=Math.pow(p,y),x=w*w;if(!t&&a){var E=2*x+3*w*_+b,M=3*w*(w+_);this.setHandleIn(0!==M?new g((x*l._x+E*c._x-b*h._x)/M-c._x,(x*l._y+E*c._y-b*h._y)/M-c._y):new g)}if(!n&&u){var E=2*b+3*_*w+x,M=3*_*(_+w);this.setHandleOut(0!==M?new g((b*h._x+E*c._x-x*l._x)/M-c._x,(b*h._y+E*c._y-x*l._y)/M-c._y):new g)}}},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return 0===this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,n=e._x,r=e._y;e.set(t._x,t._y),t.set(n,r)},reversed:function(){return new D(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new D(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,n){var r=1-n,i=n,o=e._point,a=t._point,s=e._handleIn,u=t._handleIn,l=t._handleOut,c=e._handleOut;this._point.set(r*o._x+i*a._x,r*o._y+i*a._y,!0),this._handleIn.set(r*s._x+i*u._x,r*s._y+i*u._y,!0),this._handleOut.set(r*c._x+i*l._x,r*c._y+i*l._y,!0),this._changed()},_transformCoordinates:function(e,t,n){var r=this._point,i=n&&this._handleIn.isZero()?null:this._handleIn,o=n&&this._handleOut.isZero()?null:this._handleOut,a=r._x,s=r._y,u=2;return t[0]=a,t[1]=s,i&&(t[u++]=i._x+a,t[u++]=i._y+s),o&&(t[u++]=o._x+a,t[u++]=o._y+s),e&&(e._transformCoordinates(t,t,u/2),a=t[0],s=t[1],n?(r._x=a,r._y=s,u=2,i&&(i._x=t[u++]-a,i._y=t[u++]-s),o&&(o._x=t[u++]-a,o._y=t[u++]-s)):(i||(t[u++]=a,t[u++]=s),o||(t[u++]=a,t[u++]=s))),t}}),I=g.extend({initialize:function(e,t,n){var r,i,o;if(e)if((r=e[0])!==s)i=e[1];else{var a=e;(r=a.x)===s&&(a=g.read(arguments),r=a.x),i=a.y,o=a.selected}else r=i=0;this._x=r,this._y=i,this._owner=t,t[n]=this,o&&this.setSelected(!0)},set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){return m.isZero(this._x)&&m.isZero(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner.changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),j=c.extend({_class:"Curve",initialize:function(e,t,n,r,i,o,a,s){var u,l,c,h,f,p,d=arguments.length;3===d?(this._path=e,u=t,l=n):0===d?(u=new D,l=new D):1===d?"segment1"in e?(u=new D(e.segment1),l=new D(e.segment2)):"point1"in e?(c=e.point1,f=e.handle1,p=e.handle2,h=e.point2):Array.isArray(e)&&(c=[e[0],e[1]],h=[e[6],e[7]],
f=[e[2]-e[0],e[3]-e[1]],p=[e[4]-e[6],e[5]-e[7]]):2===d?(u=new D(e),l=new D(t)):4===d?(c=e,f=t,p=n,h=r):8===d&&(c=[e,t],h=[a,s],f=[n-e,r-t],p=[i-a,o-s]),this._segment1=u||new D(c,null,f),this._segment2=l||new D(h,p,null)},_serialize:function(e,t){return c.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=s},clone:function(){return new j(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},remove:function(){var e=!1;if(this._path){var t=this._segment2,n=t._handleOut;e=t.remove(),e&&this._segment1._handleOut.set(n.x,n.y)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){var e=g.read(arguments);this._segment1._point.set(e.x,e.y)},getPoint2:function(){return this._segment2._point},setPoint2:function(){var e=g.read(arguments);this._segment2._point.set(e.x,e.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){var e=g.read(arguments);this._segment1._handleOut.set(e.x,e.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){var e=g.read(arguments);this._segment2._handleIn.set(e.x,e.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return 0===this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return j.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],n=0;n<8;n+=2)t.push(new g(e[n],e[n+1]));return t},getLength:function(){return null==this._length&&(this._length=j.getLength(this.getValues(),0,1)),this._length},getArea:function(){return j.getArea(this.getValues())},getLine:function(){return new M(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new j(j.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return j.getLength(this.getValues(),e,t)},getIntersections:function(e){return j._getIntersections(this.getValues(),e&&e!==this?e.getValues():null,this,e,[],{})},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:e)},divideAtTime:function(e,t){var n=4e-7,r=1-n,i=null;if(e>=n&&e<=r){var o=j.subdivide(this.getValues(),e),a=o[0],s=o[1],u=t||this.hasHandles(),l=this._segment1,c=this._segment2,h=this._path;u&&(l._handleOut.set(a[2]-a[0],a[3]-a[1]),c._handleIn.set(s[4]-s[6],s[5]-s[7]));var f=a[6],p=a[7],d=new D(new g(f,p),u&&new g(a[4]-f,a[5]-p),u&&new g(s[2]-f,s[3]-p));h?(h.insert(l._index+1,d),i=this.getNext()):(this._segment2=d,this._changed(),i=new j(d,c))}return i},splitAt:function(e){return this._path?this._path.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===s?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===s?.5:t?e:this.getTimeAt(e))},reversed:function(){return new j(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut.set(0,0),this._segment2._handleIn.set(0,0)},statics:{getValues:function(e,t,n){var r=e._point,i=e._handleOut,o=t._handleIn,a=t._point,s=[r._x,r._y,r._x+i._x,r._y+i._y,a._x+o._x,a._y+o._y,a._x,a._y];return n&&n._transformCoordinates(s,s,4),s},subdivide:function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],l=e[6],c=e[7];t===s&&(t=.5);var h=1-t,f=h*n+t*i,p=h*r+t*o,d=h*i+t*a,m=h*o+t*u,v=h*a+t*l,g=h*u+t*c,y=h*f+t*d,_=h*p+t*m,b=h*d+t*v,w=h*m+t*g,x=h*y+t*b,E=h*_+t*w;return[[n,r,f,p,y,_,x,E],[x,E,b,w,v,g,l,c]]},solveCubic:function(e,t,n,r,i,o){var a=e[t],s=e[t+2],u=e[t+4],l=e[t+6],c=0;if(!(a<n&&l<n&&s<n&&u<n||a>n&&l>n&&s>n&&u>n)){var h=3*(s-a),f=3*(u-s)-h,p=l-a-h-f;c=m.solveCubic(p,f,h,a-n,r,i,o)}return c},getTimeOf:function(e,t){var n=new g(e[0],e[1]),r=new g(e[6],e[7]),i=1e-12,o=t.isClose(n,i)?0:t.isClose(r,i)?1:null;if(null!==o)return o;for(var a=[t.x,t.y],s=[],u=2e-7,l=0;l<2;l++)for(var c=j.solveCubic(e,l,a[l],s,0,1),h=0;h<c;h++)if(o=s[h],t.isClose(j.getPoint(e,o),u))return o;return t.isClose(n,u)?0:t.isClose(r,u)?1:null},getNearestTime:function(e,t){function n(n){if(n>=0&&n<=1){var r=t.getDistance(j.getPoint(e,n),!0);if(r<f)return f=r,p=n,!0}}if(j.isStraight(e)){var r=e[0],i=e[1],o=e[6],a=e[7],s=o-r,u=a-i,l=s*s+u*u;if(0===l)return 0;var c=((t.x-r)*s+(t.y-i)*u)/l;return c<1e-12?0:c>.999999999999?1:j.getTimeOf(e,new g(r+c*s,i+c*u))}for(var h=100,f=1/0,p=0,d=0;d<=h;d++)n(d/h);for(var m=1/(2*h);m>4e-7;)n(p-m)||n(p+m)||(m/=2);return p},getPart:function(e,t,n){var r=t>n;if(r){var i=t;t=n,n=i}return t>0&&(e=j.subdivide(e,t)[1]),n<1&&(e=j.subdivide(e,(n-t)/(1-t))[0]),r?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=3*i-2*n-u,h=3*o-2*r-l,f=3*a-2*u-n,p=3*s-2*l-r;return Math.max(c*c,f*f)+Math.max(h*h,p*p)<=16*t*t},getArea:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7];return 3*((u-n)*(r+o)-(s-t)*(i+a)+i*(t-o)-r*(n-a)+u*(o+t/3)-s*(a+n/3))/20},getBounds:function(e){for(var t=e.slice(0,2),n=t.slice(),r=[0,0],i=0;i<2;i++)j._addBounds(e[i],e[i+2],e[i+4],e[i+6],i,0,t,n,r);return new w(t[0],t[1],n[0]-t[0],n[1]-t[1])},_addBounds:function(e,t,n,r,i,o,a,s,u){function l(e,t){var n=e-t,r=e+t;n<a[i]&&(a[i]=n),r>s[i]&&(s[i]=r)}o/=2;var c=a[i]-o,h=s[i]+o;if(e<c||t<c||n<c||r<c||e>h||t>h||n>h||r>h)if(t<e!=t<r&&n<e!=n<r)l(e,o),l(r,o);else{var f=3*(t-n)-e+r,p=2*(e+n)-4*t,d=t-e,v=m.solveQuadratic(f,p,d,u),g=4e-7,y=1-g;l(r,0);for(var _=0;_<v;_++){var b=u[_],w=1-b;g<b&&b<y&&l(w*w*w*e+3*w*w*b*t+3*w*b*b*n+b*b*b*r,o)}}}}},c.each(["getBounds","getStrokeBounds","getHandleBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=U[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),c.each({isStraight:function(e,t,n){if(t.isZero()&&n.isZero())return!0;var r=e.getVector(),i=2e-7;if(r.isZero())return!1;if(e.getDistance(t)<i&&e.getDistance(n)<i){var o=r.dot(r),a=r.dot(t)/o,s=r.dot(n)/o;return a>=0&&a<=1&&s<=0&&s>=-1}return!1},isLinear:function(e,t,n){var r=e.getVector().divide(3);return t.equals(r)&&n.negate().equals(r)}},function(e,t){this[t]=function(){var t=this._segment1,n=this._segment2;return e(new M(t._point,n._point),t._handleOut,n._handleIn)},this.statics[t]=function(t){var n=t[0],r=t[1],i=t[6],o=t[7];return e(new M(n,r,i,o),new g(t[2]-n,t[3]-r),new g(t[4]-i,t[5]-o))}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-7},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-7}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return null!=e&&e>=0&&e<=1?new N(this,e):null},getTimeAt:function(e,t){return j.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(g.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return j.getTimeOf(this.getValues(),g.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=g.read(arguments),t=this.getValues(),n=j.getNearestTime(t,e),r=j.getPoint(t,n);return new N(this,n,r,null,e.getDistance(r))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e?e.getPoint():e}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return c.each(e,function(e){this[e+"At"]=function(t,n){var r=this.getValues();return j[e](r,n?t:j.getTimeAt(r,t))},this[e+"AtTime"]=function(t){return j[e](this.getValues(),t)}},{statics:{_evaluateMethods:e}})},new function(){function e(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=9*(r-o)+3*(s-t),c=6*(t+o)-12*r,h=3*(r-t),f=9*(i-a)+3*(u-n),p=6*(n+a)-12*i,d=3*(i-n);return function(e){var t=(l*e+c)*e+h,n=(f*e+p)*e+d;return Math.sqrt(t*t+n*n)}}function t(e,t){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(t-e))))}function n(e,t,n,r){if(null==t||t<0||t>1)return null;var i=e[0],o=e[1],a=e[2],s=e[3],u=e[4],l=e[5],c=e[6],h=e[7],f=m.isZero;f(a-i)&&f(s-o)&&(a=i,s=o),f(u-c)&&f(l-h)&&(u=c,l=h);var p,d,v=3*(a-i),y=3*(u-a)-v,_=c-i-v-y,b=3*(s-o),w=3*(l-s)-b,x=h-o-b-w;if(0===n)p=0===t?i:1===t?c:((_*t+y)*t+v)*t+i,d=0===t?o:1===t?h:((x*t+w)*t+b)*t+o;else{var E=4e-7,M=1-E;if(t<E?(p=v,d=b):t>M?(p=3*(c-u),d=3*(h-l)):(p=(3*_*t+2*y)*t+v,d=(3*x*t+2*w)*t+b),r){0===p&&0===d&&(t<E||t>M)&&(p=u-a,d=l-s);var C=Math.sqrt(p*p+d*d);C&&(p/=C,d/=C)}if(3===n){var S=6*_*t+2*y,T=6*x*t+2*w,P=Math.pow(p*p+d*d,1.5);p=0!==P?(p*T-d*S)/P:0,d=0}}return 2===n?new g(d,(-p)):new g(p,d)}return{statics:{getLength:function(n,r,i,o){if(r===s&&(r=0),i===s&&(i=1),j.isStraight(n)){var a=n;i<1&&(a=j.subdivide(a,i)[0],r/=i),r>0&&(a=j.subdivide(a,r)[1]);var u=a[6]-a[0],l=a[7]-a[1];return Math.sqrt(u*u+l*l)}return m.integrate(o||e(n),r,i,t(r,i))},getTimeAt:function(n,r,i){function o(e){return g+=m.integrate(f,i,e,t(i,e)),i=e,g-r}if(i===s&&(i=r<0?1:0),0===r)return i;var a=Math.abs,u=1e-12,l=r>0,c=l?i:0,h=l?1:i,f=e(n),p=j.getLength(n,c,h,f),d=a(r)-p;if(a(d)<u)return l?h:c;if(d>u)return null;var v=r/p,g=0;return m.findRoot(o,f,i+v,c,h,32,1e-12)},getPoint:function(e,t){return n(e,t,0,!1)},getTangent:function(e,t){return n(e,t,1,!0)},getWeightedTangent:function(e,t){return n(e,t,1,!1)},getNormal:function(e,t){return n(e,t,2,!0)},getWeightedNormal:function(e,t){return n(e,t,2,!1)},getCurvature:function(e,t){return n(e,t,3,!1).x}}}},new function(){function e(e,t,n,r,i,o,a,s,u,l,c){var h=!c&&t.excludeStart,f=!c&&t.excludeEnd,p=4e-7,d=1-p;if(null==i&&(i=j.getTimeOf(n,o)),null!==i&&i>=(h?p:0)&&i<=(f?d:1)&&(null==u&&(u=j.getTimeOf(a,l)),null!==u&&u>=(f?p:0)&&u<=(h?d:1))){var m=t.renormalize;if(m){var v=m(i,u);i=v[0],u=v[1]}var g=new N(r,i,o||j.getPoint(n,i),c),y=new N(s,u,l||j.getPoint(a,u),c),_=g.getPath()===y.getPath()&&g.getIndex()>y.getIndex(),b=_?y:g,w=t.include;g._intersection=y,y._intersection=g,w&&!w(b)||N.insert(e,b,!0)}}function t(i,o,a,s,u,l,c,h,f,p,d,m,v){if(++m>=48||++v>4096)return v;var g,y,_=o[0],b=o[1],w=o[6],x=o[7],E=M.getSignedDistance,C=E(_,b,w,x,o[2],o[3]),S=E(_,b,w,x,o[4],o[5]),T=C*S>0?.75:4/9,P=T*Math.min(0,C,S),O=T*Math.max(0,C,S),A=E(_,b,w,x,i[0],i[1]),R=E(_,b,w,x,i[2],i[3]),k=E(_,b,w,x,i[4],i[5]),L=E(_,b,w,x,i[6],i[7]),D=n(A,R,k,L),I=D[0],N=D[1];if(0===C&&0===S&&0===A&&0===R&&0===k&&0===L||null==(g=r(I,N,P,O))||null==(y=r(I.reverse(),N.reverse(),P,O)))return v;var B=c+(h-c)*g,U=c+(h-c)*y;if(Math.max(p-f,U-B)<1e-9){var F=(B+U)/2,V=(f+p)/2;i=a.getValues(),o=s.getValues(),e(u,l,d?o:i,d?s:a,d?V:F,null,d?i:o,d?a:s,d?F:V,null)}else if(i=j.getPart(i,g,y),y-g>.8)if(U-B>p-f){var z=j.subdivide(i,.5),F=(B+U)/2;v=t(o,z[0],s,a,u,l,f,p,B,F,!d,m,v),v=t(o,z[1],s,a,u,l,f,p,F,U,!d,m,v)}else{var z=j.subdivide(o,.5),V=(f+p)/2;v=t(z[0],i,s,a,u,l,f,V,B,U,!d,m,v),v=t(z[1],i,s,a,u,l,V,p,B,U,!d,m,v)}else v=t(o,i,s,a,u,l,f,p,B,U,!d,m,v);return v}function n(e,t,n,r){var i,o=[0,e],a=[1/3,t],s=[2/3,n],u=[1,r],l=t-(2*e+r)/3,c=n-(e+2*r)/3;if(l*c<0)i=[[o,a,u],[o,s,u]];else{var h=l/c;i=[h>=2?[o,a,u]:h<=.5?[o,s,u]:[o,a,s,u],[o,u]]}return(l||c)<0?i.reverse():i}function r(e,t,n,r){return e[0][1]<n?i(e,!0,n):t[0][1]>r?i(t,!1,r):e[0][0]}function i(e,t,n){for(var r=e[0][0],i=e[0][1],o=1,a=e.length;o<a;o++){var s=e[o][0],u=e[o][1];if(t?u>=n:u<=n)return u===n?s:r+(n-i)*(s-r)/(u-i);r=s,i=u}return null}function o(t,n,r,i,o,a){for(var s=j.isStraight(t),u=s?n:t,l=s?t:n,c=l[0],h=l[1],f=l[6],p=l[7],d=f-c,v=p-h,g=Math.atan2(-v,d),y=Math.sin(g),_=Math.cos(g),b=[],w=0;w<8;w+=2){var x=u[w]-c,E=u[w+1]-h;b.push(x*_-E*y,x*y+E*_)}for(var M=[],C=j.solveCubic(b,1,0,M,0,1),w=0;w<C;w++){var S=M[w],T=j.getPoint(u,S),P=j.getTimeOf(l,T);if(null!==P){var O=j.getPoint(l,P),A=s?P:S,R=s?S:P;(!a.excludeEnd||R>m.CURVETIME_EPSILON)&&e(o,a,t,r,A,s?O:T,n,i,R,s?T:O)}}}function a(t,n,r,i,o,a){var s=M.intersect(t[0],t[1],t[6],t[7],n[0],n[1],n[6],n[7]);s&&e(o,a,t,r,null,s,n,i,null,s)}return{statics:{_getIntersections:function(n,r,i,s,u,l){if(!r)return j._getSelfIntersection(n,i,u,l);var c=2e-7,h=n[0],f=n[1],p=n[6],d=n[7],m=r[0],v=r[1],y=r[6],_=r[7],b=(3*n[2]+h)/4,w=(3*n[3]+f)/4,x=(3*n[4]+p)/4,E=(3*n[5]+d)/4,M=(3*r[2]+m)/4,C=(3*r[3]+v)/4,S=(3*r[4]+y)/4,T=(3*r[5]+_)/4,P=Math.min,O=Math.max;if(!(O(h,b,x,p)+c>P(m,M,S,y)&&P(h,b,x,p)-c<O(m,M,S,y)&&O(f,w,E,d)+c>P(v,C,T,_)&&P(f,w,E,d)-c<O(v,C,T,_)))return u;var A=j.getOverlaps(n,r);if(A){for(var R=0;R<2;R++){var k=A[R];e(u,l,n,i,k[0],null,r,s,k[1],null,!0)}return u}var L=j.isStraight(n),D=j.isStraight(r),I=L&&D,N=u.length;if((I?a:L||D?o:t)(n,r,i,s,u,l,0,1,0,1,0,0,0),I&&u.length>N)return u;var B=new g(h,f),U=new g(p,d),F=new g(m,v),V=new g(y,_);return B.isClose(F,c)&&e(u,l,n,i,0,B,r,s,0,F),!l.excludeStart&&B.isClose(V,c)&&e(u,l,n,i,0,B,r,s,1,V),!l.excludeEnd&&U.isClose(F,c)&&e(u,l,n,i,1,U,r,s,0,F),U.isClose(V,c)&&e(u,l,n,i,1,U,r,s,1,V),u},_getSelfIntersection:function(e,t,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=e[4],l=e[5],c=e[6],h=e[7],f=new M(i,o,c,h,(!1)),p=f.getSide(new g(a,s),!0),d=f.getSide(new g(u,l),!0);if(p===d){var v=(i-u)*(s-h)+(a-c)*(l-o);if(v*p>0)return n}var y=c-3*u+3*a-i,_=u-2*a+i,b=a-i,w=h-3*l+3*s-o,x=l-2*s+o,E=s-o,C=w*b-y*E,S=w*_-y*x,T=x*b-_*E;if(C*C-4*S*T<0){var P,O=[],A=m.solveCubic(y*y+w*w,3*(y*_+w*x),2*(_*_+x*x)+y*b+w*E,_*b+x*E,O,0,1);if(A>0){for(var R=0,k=0;R<A;R++){var L=Math.abs(t.getCurvatureAtTime(O[R]));L>k&&(k=L,P=O[R])}var D=j.subdivide(e,P);r.excludeEnd=!0,r.renormalize=function(e,t){return[e*P,t*(1-P)+P]},j._getIntersections(D[0],D[1],t,t,n,r)}}return n},getOverlaps:function(e,t){function n(e){var t=e[6]-e[0],n=e[7]-e[1];return t*t+n*n}var r=Math.abs,i=4e-7,o=2e-7,a=j.isStraight(e),s=j.isStraight(t),u=a&&s,l=n(e)<n(t),c=l?t:e,h=l?e:t,f=new M(c[0],c[1],c[6],c[7]);if(f.getDistance(new g(h[0],h[1]))<o&&f.getDistance(new g(h[6],h[7]))<o)!u&&f.getDistance(new g(c[2],c[3]))<o&&f.getDistance(new g(c[4],c[5]))<o&&f.getDistance(new g(h[2],h[3]))<o&&f.getDistance(new g(h[4],h[5]))<o&&(a=s=u=!0);else if(u)return null;if(a^s)return null;for(var p=[e,t],d=[],m=0,v=0;m<2&&d.length<2;m+=0===v?0:1,v=1^v){var y=j.getTimeOf(p[1^m],new g(p[m][0===v?0:6],p[m][0===v?1:7]));if(null!=y){var _=0===m?[v,y]:[y,v];(0===d.length||r(_[0]-d[0][0])>i&&r(_[1]-d[0][1])>i)&&d.push(_)}if(1===m&&0===d.length)break}if(2!==d.length)d=null;else if(!u){var b=j.getPart(e,d[0][0],d[1][0]),w=j.getPart(t,d[0][1],d[1][1]);(r(w[2]-b[2])>o||r(w[3]-b[3])>o||r(w[4]-b[4])>o||r(w[5]-b[5])>o)&&(d=null)}return d}}}}),N=c.extend({_class:"CurveLocation",beans:!0,initialize:function(e,t,n,r,i){if(t>.9999996){var o=e.getNext();o&&(t=0,e=o)}this._setCurve(e),this._time=t,this._point=n||e.getPointAtTime(t),this._overlap=r,this._distance=i,this._intersection=this._next=this._previous=null},_setCurve:function(e){var t=e._path;this._path=t,this._version=t?t._version:0,this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){this._setCurve(e.getCurve()),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this.getCurve(),t=this._segment;if(!t){var n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){function e(e){var t=e&&e.getCurve();if(t&&null!=(n._time=t.getTimeOf(n._point)))return n._setCurve(t),n._segment=e,t}var t=this._path,n=this;return t&&t._version!==this._version&&(this._time=this._curve=this._offset=null),this._curve||e(this._segment)||e(this._segment1)||e(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&null==t?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(null==e){e=0;var t=this.getPath(),n=this.getIndex();if(t&&null!=n)for(var r=t.getCurves(),i=0;i<n;i++)e+=r[i].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this.getCurve(),t=this.getTime();return null!=t&&e&&e.getPartLength(0,t)},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=null;return e&&(t=e.divideAtTime(this.getTime()),t&&this._setSegment(t._segment1)),t},split:function(){var e=this.getCurve();return e?e.splitAtTime(this.getTime()):null},equals:function(e,t){var n=this===e,r=2e-7;if(!n&&e instanceof N&&this.getPath()===e.getPath()&&this.getPoint().isClose(e.getPoint(),r)){var i=this.getCurve(),o=e.getCurve(),a=Math.abs,s=a((i.isLast()&&o.isFirst()?-1:i.getIndex())+this.getTime()-((o.isLast()&&i.isFirst()?-1:o.getIndex())+e.getTime()));n=(s<4e-7||(s=a(this.getOffset()-e.getOffset()))<r||a(this.getPath().getLength()-s)<r)&&(t||!this._intersection&&!e._intersection||this._intersection&&this._intersection.equals(e._intersection,!0))}return n},toString:function(){var e=[],t=this.getPoint(),n=d.instance;t&&e.push("point: "+t);var r=this.getIndex();null!=r&&e.push("index: "+r);var i=this.getTime();return null!=i&&e.push("time: "+n.number(i)),null!=this._distance&&e.push("distance: "+n.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),n=e.getCurve();return!(t.isStraight()&&n.isStraight()&&t.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){function e(e,t,n){return t<n?e>t&&e<n:e>t||e<n}var t=this._intersection;if(!t)return!1;var n=this.getTime(),r=t.getTime(),i=4e-7,o=1-i,a=n>i&&n<o,s=r>i&&r<o;if(a&&s)return!this.isTouching();var u=this.getCurve(),l=n<=i?u.getPrevious():u,c=t.getCurve(),h=r<=i?c.getPrevious():c;if(n>=o&&(u=u.getNext()),r>=o&&(c=c.getNext()),!(l&&u&&h&&c))return!1;var f=[];a||f.push(l.getLength(),u.getLength()),s||f.push(h.getLength(),c.getLength());var p=this.getPoint(),d=Math.min.apply(Math,f)/64,m=a?u.getTangentAtTime(n):u.getPointAt(d).subtract(p),v=a?m.negate():l.getPointAt(-d).subtract(p),g=s?c.getTangentAtTime(r):c.getPointAt(d).subtract(p),y=s?g.negate():h.getPointAt(-d).subtract(p),_=v.getAngle(),b=m.getAngle(),w=y.getAngle(),x=g.getAngle();return!!(a?e(_,w,x)^e(b,w,x)&&e(_,x,w)^e(b,x,w):e(w,_,b)^e(x,_,b)&&e(w,b,_)^e(x,b,_))},hasOverlap:function(){return!!this._overlap}},c.each(j._evaluateMethods,function(e){var t=e+"At";this[e]=function(){var e=this.getCurve(),n=this.getTime();return null!=n&&e&&e[t](n,!0)}},{preserve:!0}),new function(){function e(e,t,n){function r(n,r){for(var o=n+r;o>=-1&&o<=i;o+=r){var a=e[(o%i+i)%i];if(!t.getPoint().isClose(a.getPoint(),2e-7))break;if(t.equals(a))return a}return null}for(var i=e.length,o=0,a=i-1;o<=a;){var s,u=o+a>>>1,l=e[u];if(n&&(s=t.equals(l)?l:r(u,-1)||r(u,1)))return t._overlap&&(s._overlap=s._intersection._overlap=!0),s;var c=t.getPath(),h=l.getPath(),f=c===h?t.getIndex()+t.getTime()-(l.getIndex()+l.getTime()):c._id-h._id;f<0?a=u-1:o=u+1}return e.splice(o,0,t),t}return{statics:{insert:e,expand:function(t){for(var n=t.slice(),r=t.length-1;r>=0;r--)e(n,t[r]._intersection,!1);return n}}}}),B=S.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,initialize:function(){},statics:{create:function(e){var t=(e&&e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e)?F:U;return new t(e)}},_asPathItem:function(){return this},setPathData:function(e){function t(e,t){var n=+r[e];return s&&(n+=u[t]),n}function n(e){return new g(t(e,"x"),t(e+1,"y"))}var r,i,o,a=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),s=!1,u=new g,l=new g;this.clear();for(var c=0,h=a&&a.length;c<h;c++){var f=a[c],p=f[0],d=p.toLowerCase();r=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var m=r&&r.length;switch(s=p===d,"z"!==i||/[mz]/.test(d)||this.moveTo(u=l),d){case"m":case"l":for(var v="m"===d,y=0;y<m;y+=2)this[0===y&&v?"moveTo":"lineTo"](u=n(y));o=u,v&&(l=u);break;case"h":case"v":for(var b="h"===d?"x":"y",y=0;y<m;y++)u[b]=t(y,b),this.lineTo(u);o=u;break;case"c":for(var y=0;y<m;y+=6)this.cubicCurveTo(n(y),o=n(y+2),u=n(y+4));break;case"s":for(var y=0;y<m;y+=4)this.cubicCurveTo(/[cs]/.test(i)?u.multiply(2).subtract(o):u,o=n(y),u=n(y+2)),i=d;break;case"q":for(var y=0;y<m;y+=4)this.quadraticCurveTo(o=n(y),u=n(y+2));break;case"t":for(var y=0;y<m;y+=2)this.quadraticCurveTo(o=/[qt]/.test(i)?u.multiply(2).subtract(o):u,u=n(y)),i=d;break;case"a":for(var y=0;y<m;y+=7)this.arcTo(u=n(y+5),new _((+r[y]),(+r[y+1])),+r[y+2],+r[y+4],+r[y+3]);break;case"z":this.closePath(1e-12)}i=d}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))&&this._getWinding(e);return!!("evenodd"===this.getFillRule()?1&t:t)},getIntersections:function(e,t,n,r){var i=this===e||!e,o=this._matrix._orNullIfIdentity(),a=i?o:(n||e._matrix)._orNullIfIdentity();if(!i&&!this.getBounds(o).touches(e.getBounds(a)))return[];for(var s,e,u=this.getCurves(),l=i?u:e.getCurves(),c=u.length,h=i?c:l.length,f=[],p=[],d=0;d<h;d++)f[d]=l[d].getValues(a);for(var d=0;d<c;d++){var m=u[d],v=i?f[d]:m.getValues(o),g=m.getPath();g!==e&&(e=g,s=[],p.push(s)),i&&j._getSelfIntersection(v,m,s,{include:t,excludeStart:1===c&&m.getPoint1().equals(m.getPoint2())});for(var y=i?d+1:0;y<h;y++){if(r&&s.length)return s;var _=l[y];j._getIntersections(v,f[y],m,_,s,{include:t,excludeStart:i&&m.getPrevious()===_,excludeEnd:i&&m.getNext()===_})}}s=[];for(var d=0,b=p.length;d<b;d++)s.push.apply(s,p[d]);return s},getCrossings:function(e){return this.getIntersections(e,function(e){return e._overlap||e.isCrossing()})},getNearestLocation:function(){for(var e=g.read(arguments),t=this.getCurves(),n=1/0,r=null,i=0,o=t.length;i<o;i++){var a=t[i].getNearestLocation(e);a._distance<n&&(n=a._distance,r=a)}return r},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e?e.getPoint():e},interpolate:function(e,t,n){var r=!this._children,i=r?"_segments":"_children",o=e[i],a=t[i],s=this[i];if(!o||!a||o.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var u=s.length,l=a.length;if(u<l)for(var c=r?D:U,h=u;h<l;h++)this.add(new c);else u>l&&this[r?"removeSegments":"removeChildren"](l,u);for(var h=0;h<l;h++)s[h].interpolate(o[h],a[h],n);r&&(this.setClosed(e._closed),this._changed(9))}}),U=B.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var t=Array.isArray(e)?"object"==typeof e[0]?e:arguments:!e||e.size!==s||e.x===s&&e.point===s?null:arguments;t&&t.length>0?this.setSegments(t):(this._curves=s,this._segmentSelection=0,t||"string"!=typeof e||(this.setPathData(e),e=null)),this._initialize(!t&&e)},_equals:function(e){return this._closed===e._closed&&c.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed;var t=e._clockwise;t!==s&&(this._clockwise=t)},_changed:function e(t){if(e.base.call(this,t),8&t){if(this._length=this._area=this._clockwise=this._monoCurves=s,16&t)this._version++;else if(this._curves)for(var n=0,r=this._curves.length;n<r;n++)this._curves[n]._changed()}else 32&t&&(this._bounds=s)},getStyle:function(){var e=this._parent;return(e instanceof F?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected();this._segments.length=0,this._segmentSelection=0,this._curves=s,e&&e.length>0&&this._add(D.readAll(e)),t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var n=this._countCurves();e=this._curves=new Array(n);for(var r=0;r<n;r++)e[r]=new j(this,t[r],t[r+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new j(this,this._segments[t-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(e,t){function n(t,n){t._transformCoordinates(e,m),r=m[0],i=m[1],v?(g.push("M"+p.pair(r,i)),v=!1):(s=m[2],u=m[3],s===r&&u===i&&l===o&&c===a?n||g.push("l"+p.pair(r-o,i-a)):g.push("c"+p.pair(l-o,c-a)+" "+p.pair(s-o,u-a)+" "+p.pair(r-o,i-a))),o=r,a=i,l=m[4],c=m[5]}var r,i,o,a,s,u,l,c,h=this._segments,f=h.length,p=new d(t),m=new Array(6),v=!0,g=[];if(0===f)return"";for(var y=0;y<f;y++)n(h[y]);return this._closed&&f>0&&(n(h[0],!0),g.push("z")),g.join("")},isEmpty:function(){return 0===this._segments.length},_transformContent:function(e){for(var t=this._segments,n=new Array(6),r=0,i=t.length;r<i;r++)t[r]._transformCoordinates(e,n,!0);return!0},_add:function(e,t){for(var n=this._segments,r=this._curves,i=e.length,o=null==t,t=o?n.length:t,a=0;a<i;a++){var s=e[a];s._path&&(s=e[a]=s.clone()),s._path=this,s._index=t+a,s._selection&&this._updateSelection(s,0,s._selection)}if(o)n.push.apply(n,e);else{n.splice.apply(n,[t,0].concat(e));for(var a=t+i,u=n.length;a<u;a++)n[a]._index=a}if(r){var l=this._countCurves(),c=t>0&&t+i-1===l?t-1:t,h=c,f=Math.min(c+i,l);e._curves&&(r.splice.apply(r,[c,0].concat(e._curves)),h+=e._curves.length);for(var a=h;a<f;a++)r.splice(a,0,new j(this,null,null));this._adjustCurves(c,f)}return this._changed(25),e},_adjustCurves:function(e,t){for(var n,r=this._segments,i=this._curves,o=e;o<t;o++)n=i[o],n._path=this,n._segment1=r[o],n._segment2=r[o+1]||r[0],n._changed();(n=i[this._closed&&0===e?r.length-1:e-1])&&(n._segment2=r[e]||r[0],n._changed()),(n=i[t])&&(n._segment1=r[t],n._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){return arguments.length>1&&"number"!=typeof e?this._add(D.readAll(arguments)):this._add([D.read(arguments)])[0]},insert:function(e,t){return arguments.length>2&&"number"!=typeof t?this._add(D.readAll(arguments,1),e):this._add([D.read(arguments,1)],e)[0]},addSegment:function(){return this._add([D.read(arguments)])[0]},insertSegment:function(e){return this._add([D.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(D.readAll(e))},insertSegments:function(e,t){return this._add(D.readAll(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,n){e=e||0,t=c.pick(t,this._segments.length);var r=this._segments,i=this._curves,o=r.length,a=r.splice(e,t-e),s=a.length;if(!s)return a;for(var u=0;u<s;u++){var l=a[u];l._selection&&this._updateSelection(l,l._selection,0),l._index=l._path=null}for(var u=e,h=r.length;u<h;u++)r[u]._index=u;if(i){for(var f=e>0&&t===o+(this._closed?1:0)?e-1:e,i=i.splice(f,s),u=i.length-1;u>=0;u--)i[u]._path=null;n&&(a._curves=i.slice(1)),this._adjustCurves(f,f)}return this._changed(25),a},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,n=e.length;t<n;t++)e[t].clearHandles()},getLength:function(){if(null==this._length){for(var e=this.getCurves(),t=0,n=0,r=e.length;n<r;n++)t+=e[n].getLength();this._length=t}return this._length},getArea:function(e){var t=e===s,n=this._area;if(!t||null==n){var r=this._segments,i=r.length,o=t?this._closed:e,a=i-1;n=0;for(var u=0,l=o?i:a;u<l;u++)n+=j.getArea(j.getValues(r[u],r[u<a?u+1:0]));t&&(this._area=n)}return n},isClockwise:function(){return this._clockwise!==s?this._clockwise:this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse(),this._clockwise=e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===7*e},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){1&t||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,n=t.length,r=e?7:0;this._segmentSelection=r*n;for(var i=0;i<n;i++)t[i]._selection=r},_updateSelection:function(e,t,n){e._selection=n;var r=this._segmentSelection+=n-t;r>0&&this.setSelected(!0)},splitAt:function(e){var t="number"==typeof e?this.getLocationAt(e):e,n=t&&t.index,r=t&&t.time,i=4e-7,o=1-i;r>=o&&(n++,r=0);var a=this.getCurves();if(n>=0&&n<a.length){r>=i&&a[n++].divideAtTime(r);var s,u=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):(s=new U(S.NO_INSERT),s.insertAbove(this,!0),s.copyAttributes(this)),s._add(u,0),this.addSegment(u[0]),s}return null},split:function(e,t){var n,r=t===s?e:(n=this.getCurves()[e])&&n.getLocationAtTime(t);return null!=r?this.splitAt(r):null},join:function(e,t){var n=t||0;if(e&&e!==this){var r=e._segments,i=this.getLastSegment(),o=e.getLastSegment();if(!o)return this;i&&i._point.isClose(o._point,n)&&e.reverse();var a=e.getFirstSegment();if(i&&i._point.isClose(a._point,n))i.setHandleOut(a._handleOut),this._add(r.slice(1));else{var s=this.getFirstSegment();s&&s._point.isClose(a._point,n)&&e.reverse(),o=e.getLastSegment(),s&&s._point.isClose(o._point,n)?(s.setHandleIn(o._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}e._closed&&this._add([r[0]]),e.remove()}var u=this.getFirstSegment(),l=this.getLastSegment();return u!==l&&u._point.isClose(l._point,n)&&(u.setHandleIn(l._handleIn),l.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),n=e&&e.simplify,r=n?2e-7:0,i=t.length-1;i>=0;i--){var o=t[i];!o.hasHandles()&&(o.getLength()<r||n&&o.isCollinear(o.getNext()))&&o.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=e}this._curves=null,this._clockwise!==s&&(this._clockwise=!this._clockwise),this._changed(9)},flatten:function(e){for(var t=new V(this,e||.25,256,(!0)),n=t.parts,r=n.length,i=[],o=0;o<r;o++)i.push(new D(n[o].curve.slice(0,2)));!this._closed&&r>0&&i.push(new D(n[r-1].curve.slice(6))),this.setSegments(i)},simplify:function(e){var t=new z(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){function t(e,t){var r=e&&e.index;if(null!=r){var i=e.path;if(i&&i!==n)throw new Error(e._class+" "+r+" of "+i+" is not part of "+n);t&&e instanceof j&&r++}else r="number"==typeof e?e:t;return Math.min(r<0&&u?r%a:r<0?r+a:r,a-1)}var n=this,r=e||{},i=r.type||"asymmetric",o=this._segments,a=o.length,u=this._closed,l=u&&r.from===s&&r.to===s,c=t(r.from,0),h=t(r.to,a-1);
if(c>h)if(u)c-=a;else{var f=c;c=h,h=f}if(/^(?:asymmetric|continuous)$/.test(i)){var p="asymmetric"===i,d=Math.min,m=h-c+1,v=m-1,g=l?d(m,4):1,y=g,_=g,b=[];if(u||(y=d(1,c),_=d(1,a-h-1)),v+=y+_,v<=1)return;for(var w=0,x=c-y;w<=v;w++,x++)b[w]=o[(x<0?x+a:x)%a]._point;for(var E=b[0]._x+2*b[1]._x,M=b[0]._y+2*b[1]._y,C=2,S=v-1,T=[E],P=[M],O=[C],A=[],R=[],w=1;w<v;w++){var k=w<S,L=k?1:p?1:2,D=k?4:p?2:7,I=k?4:p?3:8,N=k?2:p?0:1,B=L/C;C=O[w]=D-B,E=T[w]=I*b[w]._x+N*b[w+1]._x-B*E,M=P[w]=I*b[w]._y+N*b[w+1]._y-B*M}A[S]=T[S]/O[S],R[S]=P[S]/O[S];for(var w=v-2;w>=0;w--)A[w]=(T[w]-A[w+1])/O[w],R[w]=(P[w]-R[w+1])/O[w];A[v]=(3*b[v]._x-A[S])/2,R[v]=(3*b[v]._y-R[S])/2;for(var w=y,U=v-_,x=c;w<=U;w++,x++){var F=o[x<0?x+a:x],V=F._point,z=A[w]-V._x,G=R[w]-V._y;(l||w<U)&&F.setHandleOut(z,G),(l||w>y)&&F.setHandleIn(-z,-G)}}else for(var w=c;w<=h;w++)o[w<0?w+a:w].smooth(r,!l&&w===c,!l&&w===h)},toShape:function(e){function t(e,t){var n=c[e],r=n.getNext(),i=c[t],o=i.getNext();return n._handleOut.isZero()&&r._handleIn.isZero()&&i._handleOut.isZero()&&o._handleIn.isZero()&&r._point.subtract(n._point).isCollinear(o._point.subtract(i._point))}function n(e){var t=c[e],n=t.getPrevious(),r=t.getNext();return n._handleOut.isZero()&&t._handleIn.isZero()&&t._handleOut.isZero()&&r._handleIn.isZero()&&t._point.subtract(n._point).isOrthogonal(r._point.subtract(t._point))}function r(e){var t=c[e],n=t.getNext(),r=t._handleOut,i=n._handleIn,o=.5522847498307936;if(r.isOrthogonal(i)){var a=t._point,s=n._point,u=new M(a,r,(!0)).intersect(new M(s,i,(!0)),!0);return u&&m.isZero(r.getLength()/u.subtract(a).getLength()-o)&&m.isZero(i.getLength()/u.subtract(s).getLength()-o)}return!1}function i(e,t){return c[e]._point.getDistance(c[t]._point)}if(!this._closed)return null;var o,a,u,l,c=this._segments;if(!this.hasHandles()&&4===c.length&&t(0,2)&&t(1,3)&&n(1)?(o=O.Rectangle,a=new _(i(0,3),i(0,1)),l=c[1]._point.add(c[2]._point).divide(2)):8===c.length&&r(0)&&r(2)&&r(4)&&r(6)&&t(1,5)&&t(3,7)?(o=O.Rectangle,a=new _(i(1,6),i(0,3)),u=a.subtract(new _(i(0,7),i(1,2))).divide(2),l=c[3]._point.add(c[4]._point).divide(2)):4===c.length&&r(0)&&r(1)&&r(2)&&r(3)&&(m.isZero(i(0,2)-i(1,3))?(o=O.Circle,u=i(0,2)/2):(o=O.Ellipse,u=new _(i(2,0)/2,i(3,1)/2)),l=c[1]._point),o){var h=this.getPosition(!0),f=new o({center:h,size:a,radius:u,insert:!1});return f.copyAttributes(this,!0),f._matrix.prepend(this._matrix),f.rotate(l.subtract(h).getAngle()+90),(e===s||e)&&f.insertAbove(this),f}return null},toPath:"#clone",_hitTestSelf:function(e,t,n,r){function i(t,n){return e.subtract(t).divide(n).length<=1}function o(e,n,r){if(!t.selected||n.isSelected()){var o=e._point;if(n!==o&&(n=n.add(o)),i(n,w))return new L(r,m,{segment:e,point:n})}}function a(e,n){return(n||t.segments)&&o(e,e._point,"segment")||!n&&t.handles&&(o(e,e._handleIn,"handle-in")||o(e,e._handleOut,"handle-out"))}function s(e){f.add(e)}function u(t){if(("round"!==l||"round"!==c)&&(f=new U({internal:!0,closed:!0}),_||t._index>0&&t._index<y-1?"round"!==l&&(t._handleIn.isZero()||t._handleOut.isZero())&&U._addBevelJoin(t,l,C,h,null,r,s,!0):"round"!==c&&U._addSquareCap(t,c,C,null,r,s,!0),!f.isEmpty())){var n;return f.contains(e)||(n=f.getNearestLocation(e))&&i(n.getPoint(),b)}return i(t._point,w)}var l,c,h,f,p,d,m=this,v=this.getStyle(),g=this._segments,y=g.length,_=this._closed,b=t._tolerancePadding,w=b,x=t.stroke&&v.hasStroke(),E=t.fill&&v.hasFill(),M=t.curves,C=x?v.getStrokeWidth()/2:E&&t.tolerance>0||M?0:null;if(null!==C&&(C>0?(l=v.getStrokeJoin(),c=v.getStrokeCap(),h=C*v.getMiterLimit(),w=w.add(U._getStrokePadding(C,r))):l=c="round"),!t.ends||t.segments||_){if(t.segments||t.handles)for(var S=0;S<y;S++)if(d=a(g[S]))return d}else if(d=a(g[0],!0)||a(g[y-1],!0))return d;if(null!==C){if(p=this.getNearestLocation(e)){var T=p.getTime();0===T||1===T&&y>1?u(p.getSegment())||(p=null):i(p.getPoint(),w)||(p=null)}if(!p&&"miter"===l&&y>1)for(var S=0;S<y;S++){var P=g[S];if(e.getDistance(P._point)<=h&&u(P)){p=P.getLocation();break}}}return!p&&E&&this._contains(e)||p&&!x&&!M?new L("fill",this):p?new L(x?"stroke":"curve",this,{location:p,point:p.getPoint()}):null}},c.each(j._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this.getLocationAt(t);return n&&n[e]()}},{beans:!1,getLocationOf:function(){for(var e=g.read(arguments),t=this.getCurves(),n=0,r=t.length;n<r;n++){var i=t[n].getLocationOf(e);if(i)return i}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){for(var t=this.getCurves(),n=0,r=0,i=t.length;r<i;r++){var o=n,a=t[r];if(n+=a.getLength(),n>e)return a.getLocationAt(e-o)}return t.length>0&&e<=this.getLength()?new N(t[t.length-1],1):null}}),new function(){function e(e,t,n,r){function i(t){var n=u[t],r=u[t+1];o==n&&a==r||(e.beginPath(),e.moveTo(o,a),e.lineTo(n,r),e.stroke(),e.beginPath(),e.arc(n,r,s,0,2*Math.PI,!0),e.fill())}for(var o,a,s=r/2,u=new Array(6),l=0,c=t.length;l<c;l++){var h=t[l],f=h._selection;if(h._transformCoordinates(n,u),o=u[0],a=u[1],2&f&&i(2),4&f&&i(4),e.fillRect(o-s,a-s,r,r),!(1&f)){var p=e.fillStyle;e.fillStyle="#ffffff",e.fillRect(o-s+1,a-s+1,r-2,r-2),e.fillStyle=p}}}function t(e,t,n){function r(t){if(n)t._transformCoordinates(n,d),i=d[0],o=d[1];else{var r=t._point;i=r._x,o=r._y}if(m)e.moveTo(i,o),m=!1;else{if(n)u=d[2],l=d[3];else{var f=t._handleIn;u=i+f._x,l=o+f._y}u===i&&l===o&&c===a&&h===s?e.lineTo(i,o):e.bezierCurveTo(c,h,u,l,i,o)}if(a=i,s=o,n)c=d[4],h=d[5];else{var f=t._handleOut;c=a+f._x,h=s+f._y}}for(var i,o,a,s,u,l,c,h,f=t._segments,p=f.length,d=new Array(6),m=!0,v=0;v<p;v++)r(f[v]);t._closed&&p>0&&r(f[0])}return{_draw:function(e,n,r,i){function a(e){return f[(e%p+p)%p]}var s=n.dontStart,u=n.dontFinish||n.clip,l=this.getStyle(),c=l.hasFill(),h=l.hasStroke(),f=l.getDashArray(),p=!o.support.nativeDash&&h&&f&&f.length;if(s||e.beginPath(),(c||h&&!p||u)&&(t(e,this,i),this._closed&&e.closePath()),!u&&(c||h)&&(this._setStyles(e,n,r),c&&(e.fill(l.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),h)){if(p){s||e.beginPath();var d,m=new V(this,.25,32,(!1),i),v=m.length,g=-l.getDashOffset(),y=0;for(g%=v;g>0;)g-=a(y--)+a(y--);for(;g<v;)d=g+a(y++),(g>0||d>0)&&m.drawPart(e,Math.max(g,0),Math.max(d,0)),g=d+a(y++)}e.stroke()}},_drawSelected:function(n,r){n.beginPath(),t(n,this,r),n.stroke(),e(n,this._segments,r,o.settings.handleSize)}}},new function(){function e(e){var t=e._segments;if(0===t.length)throw new Error("Use a moveTo() command first");return t[t.length-1]}return{moveTo:function(){var e=this._segments;1===e.length&&this.removeSegment(0),e.length||this._add([new D(g.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new D(g.read(arguments))])},cubicCurveTo:function(){var t=g.read(arguments),n=g.read(arguments),r=g.read(arguments),i=e(this);i.setHandleOut(t.subtract(i._point)),this._add([new D(r,n.subtract(r))])},quadraticCurveTo:function(){var t=g.read(arguments),n=g.read(arguments),r=e(this)._point;this.cubicCurveTo(t.add(r.subtract(t).multiply(1/3)),t.add(n.subtract(t).multiply(1/3)),n)},curveTo:function(){var t=g.read(arguments),n=g.read(arguments),r=c.pick(c.read(arguments),.5),i=1-r,o=e(this)._point,a=t.subtract(o.multiply(i*i)).subtract(n.multiply(r*r)).divide(2*r*i);if(a.isNaN())throw new Error("Cannot put a curve through points with parameter = "+r);this.quadraticCurveTo(a,n)},arcTo:function(){var t,n,r,i,o,a=e(this),s=a._point,u=g.read(arguments),l=c.peek(arguments),h=c.pick(l,!0);if("boolean"==typeof h)var f=s.add(u).divide(2),t=f.add(f.subtract(s).rotate(h?-90:90));else if(c.remain(arguments)<=2)t=u,u=g.read(arguments);else{var p=_.read(arguments),d=m.isZero;if(d(p.width)||d(p.height))return this.lineTo(u);var v=c.read(arguments),h=!!c.read(arguments),y=!!c.read(arguments),f=s.add(u).divide(2),b=s.subtract(f).rotate(-v),w=b.x,x=b.y,C=Math.abs,S=C(p.width),T=C(p.height),P=S*S,O=T*T,A=w*w,R=x*x,k=Math.sqrt(A/P+R/O);if(k>1&&(S*=k,T*=k,P=S*S,O=T*T),k=(P*O-P*R-O*A)/(P*R+O*A),C(k)<1e-12&&(k=0),k<0)throw new Error("Cannot create an arc with the given arguments");n=new g(S*x/T,-T*w/S).multiply((y===h?-1:1)*Math.sqrt(k)).rotate(v).add(f),o=(new E).translate(n).rotate(v).scale(S,T),i=o._inverseTransform(s),r=i.getDirectedAngle(o._inverseTransform(u)),!h&&r>0?r-=360:h&&r<0&&(r+=360)}if(t){var L=new M(s.add(t).divide(2),t.subtract(s).rotate(90),(!0)),I=new M(t.add(u).divide(2),u.subtract(t).rotate(90),(!0)),j=new M(s,u),N=j.getSide(t);if(n=L.intersect(I,!0),!n){if(!N)return this.lineTo(u);throw new Error("Cannot create an arc with the given arguments")}i=s.subtract(n),r=i.getDirectedAngle(u.subtract(n));var B=j.getSide(n);0===B?r=N*Math.abs(r):N===B&&(r+=r<0?360:-360)}for(var U=Math.abs(r),F=U>=360?4:Math.ceil(U/90),V=r/F,z=V*Math.PI/360,G=4/3*Math.sin(z)/(1+Math.cos(z)),H=[],W=0;W<=F;W++){var b=u,q=null;if(W<F&&(q=i.rotate(90).multiply(G),o?(b=o._transformPoint(i),q=o._transformPoint(i.add(q)).subtract(b)):b=n.add(i)),0===W)a.setHandleOut(q);else{var X=i.rotate(-90).multiply(G);o&&(X=o._transformPoint(i.add(X)).subtract(b)),H.push(new D(b,X,q))}i=i.rotate(V)}this._add(H)},lineBy:function(){var t=g.read(arguments),n=e(this)._point;this.lineTo(n.add(t))},curveBy:function(){var t=g.read(arguments),n=g.read(arguments),r=c.read(arguments),i=e(this)._point;this.curveTo(i.add(t),i.add(n),r)},cubicCurveBy:function(){var t=g.read(arguments),n=g.read(arguments),r=g.read(arguments),i=e(this)._point;this.cubicCurveTo(i.add(t),i.add(n),i.add(r))},quadraticCurveBy:function(){var t=g.read(arguments),n=g.read(arguments),r=e(this)._point;this.quadraticCurveTo(r.add(t),r.add(n))},arcBy:function(){var t=e(this)._point,n=t.add(g.read(arguments)),r=c.pick(c.peek(arguments),!0);"boolean"==typeof r?this.arcTo(n,r):this.arcTo(n,t.add(g.read(arguments)))},closePath:function(e){this.setClosed(!0),this.join(this,e)}}},{_getBounds:function(e,t){var n=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return U[n](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,n,r,i,o){function a(e){e._transformCoordinates(r,u);for(var t=0;t<2;t++)j._addBounds(l[t],l[t+4],u[t+2],u[t],t,o?o[t]:0,c,h,f);var n=l;l=u,u=n}var s=e[0];if(!s)return new w;for(var u=new Array(6),l=s._transformCoordinates(r,new Array(6)),c=l.slice(0,2),h=c.slice(),f=new Array(2),p=1,d=e.length;p<d;p++)a(e[p]);return t&&a(s),new w(c[0],c[1],h[0]-c[0],h[1]-c[1])},getStrokeBounds:function(e,t,n,r,i){function o(e){d=d.include(e)}function a(e){d=d.unite(b.setCenter(e._point.transform(r)))}function s(e,t){var n=e._handleIn,i=e._handleOut;"round"===t||!n.isZero()&&!i.isZero()&&n.isCollinear(i)?a(e):U._addBevelJoin(e,t,m,y,r,f,o)}function u(e,t){"round"===t?a(e):U._addSquareCap(e,t,m,r,f,o)}var l=n.getStyle(),c=l.hasStroke(),h=l.getStrokeWidth(),f=c&&n._getStrokeMatrix(r,i),p=c&&U._getStrokePadding(h,f),d=U.getBounds(e,t,n,r,i,p);if(!c)return d;for(var m=h/2,v=l.getStrokeJoin(),g=l.getStrokeCap(),y=m*l.getMiterLimit(),b=new w(new _(p)),x=e.length-(t?0:1),E=1;E<x;E++)s(e[E],v);return t?s(e[0],v):x>0&&(u(e[0],g),u(e[e.length-1],g)),d},_getStrokePadding:function(e,t){if(!t)return[e,e];var n=new g(e,0).transform(t),r=new g(0,e).transform(t),i=n.getAngleInRadians(),o=n.getLength(),a=r.getLength(),s=Math.sin(i),u=Math.cos(i),l=Math.tan(i),c=Math.atan2(a*l,o),h=Math.atan2(a,l*o);return[Math.abs(o*Math.cos(c)*u+a*Math.sin(c)*s),Math.abs(a*Math.sin(h)*u+o*Math.cos(h)*s)]},_addBevelJoin:function(e,t,n,r,i,o,a,s){var u=e.getCurve(),l=u.getPrevious(),c=u.getPointAtTime(0),h=l.getNormalAtTime(1),f=u.getNormalAtTime(0),p=h.getDirectedAngle(f)<0?-n:n;if(h.setLength(p),f.setLength(p),i&&i._transformPoint(c,c),o&&(o._transformPoint(h,h),o._transformPoint(f,f)),s&&(a(c),a(c.add(h))),"miter"===t){var d=new M(c.add(h),new g((-h.y),h.x),(!0)).intersect(new M(c.add(f),new g((-f.y),f.x),(!0)),!0);if(d&&c.getDistance(d)<=r&&(a(d),!s))return}s||a(c.add(h)),a(c.add(f))},_addSquareCap:function(e,t,n,r,i,o,a){var s=e._point,u=e.getLocation(),l=u.getNormal().multiply(n);r&&r._transformPoint(s,s),i&&i._transformPoint(l,l),a&&(o(s.subtract(l)),o(s.add(l))),"square"===t&&(s=s.add(l.rotate(0===u.getTime()?-90:90))),o(s.add(l)),o(s.subtract(l))},getHandleBounds:function(e,t,n,r,i){var o,a,s=n.getStyle(),u=i.stroke&&s.hasStroke();if(u){var l=n._getStrokeMatrix(r,i),c=s.getStrokeWidth()/2,h=c;"miter"===s.getStrokeJoin()&&(h=c*s.getMiterLimit()),"square"===s.getStrokeCap()&&(h=Math.max(h,c*Math.sqrt(2))),o=U._getStrokePadding(c,l),a=U._getStrokePadding(h,l)}for(var f=new Array(6),p=1/0,d=-p,m=p,v=d,g=0,y=e.length;g<y;g++){var _=e[g];_._transformCoordinates(r,f);for(var b=0;b<6;b+=2){var x=0===b?a:o,E=x?x[0]:0,M=x?x[1]:0,C=f[b],S=f[b+1],T=C-E,P=C+E,O=S-M,A=S+M;T<p&&(p=T),P>d&&(d=P),O<m&&(m=O),A>v&&(v=A)}}return new w(p,m,d-p,v-m)}}});U.inject({statics:new function(){function e(e,t,n){var r=c.getNamed(n),i=new U(r&&r.insert===!1&&S.NO_INSERT);return i._add(e),i._closed=t,i.set(r)}function t(t,n,i){for(var o=new Array(4),a=0;a<4;a++){var s=r[a];o[a]=new D(s._point.multiply(n).add(t),s._handleIn.multiply(n),s._handleOut.multiply(n))}return e(o,!0,i)}var n=.5522847498307936,r=[new D([-1,0],[0,n],[0,-n]),new D([0,-1],[-n,0],[n,0]),new D([1,0],[0,-n],[0,n]),new D([0,1],[n,0],[-n,0])];return{Line:function(){return e([new D(g.readNamed(arguments,"from")),new D(g.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var e=g.readNamed(arguments,"center"),n=c.readNamed(arguments,"radius");return t(e,new _(n),arguments)},Rectangle:function(){var t,r=w.readNamed(arguments,"rectangle"),i=_.readNamed(arguments,"radius",0,{readNull:!0}),o=r.getBottomLeft(!0),a=r.getTopLeft(!0),s=r.getTopRight(!0),u=r.getBottomRight(!0);if(!i||i.isZero())t=[new D(o),new D(a),new D(s),new D(u)];else{i=_.min(i,r.getSize(!0).divide(2));var l=i.width,c=i.height,h=l*n,f=c*n;t=[new D(o.add(l,0),null,[-h,0]),new D(o.subtract(0,c),[0,f]),new D(a.add(0,c),null,[0,-f]),new D(a.add(l,0),[-h,0],null),new D(s.subtract(l,0),null,[h,0]),new D(s.add(0,c),[0,-f],null),new D(u.subtract(0,c),null,[0,f]),new D(u.subtract(l,0),[h,0])]}return e(t,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var e=O._readEllipse(arguments);return t(e.center,e.radius,arguments)},Oval:"#Ellipse",Arc:function(){var e=g.readNamed(arguments,"from"),t=g.readNamed(arguments,"through"),n=g.readNamed(arguments,"to"),r=c.getNamed(arguments),i=new U(r&&r.insert===!1&&S.NO_INSERT);return i.moveTo(e),i.arcTo(t,n),i.set(r)},RegularPolygon:function(){for(var t=g.readNamed(arguments,"center"),n=c.readNamed(arguments,"sides"),r=c.readNamed(arguments,"radius"),i=360/n,o=n%3===0,a=new g(0,o?-r:r),s=o?-1:.5,u=new Array(n),l=0;l<n;l++)u[l]=new D(t.add(a.rotate((l+s)*i)));return e(u,!0,arguments)},Star:function(){for(var t=g.readNamed(arguments,"center"),n=2*c.readNamed(arguments,"points"),r=c.readNamed(arguments,"radius1"),i=c.readNamed(arguments,"radius2"),o=360/n,a=new g(0,(-1)),s=new Array(n),u=0;u<n;u++)s[u]=new D(t.add(a.rotate(o*u).multiply(u%2?i:r)));return e(s,!0,arguments)}}}});var F=B.extend({_class:"CompoundPath",_serializeFields:{children:[]},initialize:function(e){this._children=[],this._namedChildren={},this._initialize(e)||("string"==typeof e?this.setPathData(e):this.addChildren(Array.isArray(e)?e:arguments))},insertChildren:function e(t,n,r){for(var i=n.length-1;i>=0;i--){var o=n[i];o instanceof F&&(n=n.slice(),n.splice.apply(n,[i,1].concat(o.removeChildren())),o.remove())}n=e.base.call(this,t,n,r,U);for(var i=0,a=!r&&n&&n.length;i<a;i++){var o=n[i];o._clockwise===s&&o.setClockwise(0===o._index)}return n},reduce:function e(t){for(var n=this._children,r=n.length-1;r>=0;r--){var i=n[r].reduce(t);i.isEmpty()&&i.remove()}if(0===n.length){var i=new U(S.NO_INSERT);return i.copyAttributes(this),i.insertAbove(this),this.remove(),i}return e.base.call(this)},isClockwise:function(){var e=this.getFirstChild();return e&&e.isClockwise()},setClockwise:function(e){this.isClockwise()^!!e&&this.reverse()},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],n=0,r=e.length;n<r;n++)t.push.apply(t,e[n].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getFirstCurve()},getArea:function(){for(var e=this._children,t=0,n=0,r=e.length;n<r;n++)t+=e[n].getArea();return t}},{beans:!0,getPathData:function(e,t){for(var n=this._children,r=[],i=0,o=n.length;i<o;i++){var a=n[i],s=a._matrix;r.push(a.getPathData(e&&!s.isIdentity()?e.appended(s):e,t))}return r.join(" ")}},{_hitTestChildren:function e(t,n,r){return e.base.call(this,t,n.class===U||"path"===n.type?n:c.set({},n,{fill:!1}),r)},_draw:function(e,t,n,r){var i=this._children;if(0!==i.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var o=0,a=i.length;o<a;o++)i[o].draw(e,t,r);if(!t.clip){this._setStyles(e,t,n);var s=this._style;s.hasFill()&&(e.fill(s.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),s.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,n){for(var r=this._children,i=0,o=r.length;i<o;i++){var a=r[i],s=a._matrix;n[a._id]||a._drawSelected(e,s.isIdentity()?t:t.appended(s))}}},new function(){function e(e,t){var n=e._children;if(t&&0===n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return c.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var n=e(this,!0);n[t].apply(n,arguments)}},{moveTo:function(){var t=e(this),n=t&&t.isEmpty()?t:new U(S.NO_INSERT);n!==t&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var t=e(this,!0),n=t&&t.getLastSegment(),r=g.read(arguments);this.moveTo(n?r.add(n._point):r)},closePath:function(t){e(this,!0).closePath(t)}})},c.each(["reverse","flatten","simplify","smooth"],function(e){this[e]=function(t){for(var n,r=this._children,i=0,o=r.length;i<o;i++)n=r[i][e](t)||n;return n}},{}));B.inject(new function(){function e(e,t){var n=e.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return t?n.resolveCrossings():n}function t(e,t,n,r,i){var o=new e(S.NO_INSERT);return o.addChildren(t,!0),n&&(o=o.reduce({simplify:!0})),o.insertAbove(i&&r.isSibling(i)&&r.getIndex()<i.getIndex()?i:r),o.copyAttributes(r,!0),o}function n(n,i,a){function c(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];m.push.apply(m,r._segments),v.push.apply(v,r._getMonoCurves()),r._overlapsOnly=r._validOverlapsOnly=!0}}var h=l[a];if(h[a]=!0,!n._children&&!n._closed)return r(n,i,h);var f=e(n,!0),p=i&&n!==i&&e(i,!0);p&&(h.subtract||h.exclude)^(p.isClockwise()^f.isClockwise())&&p.reverse();var d=o(N.expand(f.getCrossings(p))),m=[],v=[];c(f._children||[f]),p&&c(p._children||[p]);for(var g=0,y=d.length;g<y;g++)s(d[g]._segment,f,p,v,h);for(var g=0,y=m.length;g<y;g++){var _=m[g],b=_._intersection;if(null==_._winding&&s(_,f,p,v,h),!b||!b._overlap){var w=_._path;w._overlapsOnly=!1,h[_._winding]&&(w._validOverlapsOnly=!1)}}return t(F,u(m,h),!0,n,i)}function r(n,r,i){function o(e){if(s.contains(e.getPointAt(e.getLength()/2))^l)return c.unshift(e),!0}if(!r||!r._children&&!r._closed||!i.subtract&&!i.intersect)return null;for(var a=e(n,!1),s=e(r,!1),u=a.getCrossings(s),l=i.subtract,c=[],h=u.length-1;h>=0;h--){var f=u[h].split();f&&(o(f)&&f.getFirstSegment().setHandleIn(0,0),a.getLastSegment().setHandleOut(0,0))}return o(a),t(T,c,!1,n,r)}function i(e,t){for(var n=e;n;){if(n===t)return;n=n._previous}for(;e._next&&e._next!==t;)e=e._next;if(!e._next){for(;t._previous;)t=t._previous;e._next=t,t._previous=e}}function o(e,t){for(var n,r,o=t&&[],a=4e-7,s=1-a,u=!1,l=[],c=e.length-1;c>=0;c--){var h=e[c];if(t){if(!t(h))continue;o.unshift(h)}var f,p=h._curve,d=h._time,m=d;if(p!==n?u=!p.hasHandles():r>=a&&r<=s&&(d/=r),d<a)f=p._segment1;else if(d>s)f=p._segment2;else{var v=p.divideAtTime(d,!0);u&&l.push(p,v),f=v._segment1}h._setSegment(f);var g=f._intersection,y=h._intersection;if(g){i(g,y);for(var _=g;_;)i(_._intersection,g),_=_._next}else f._intersection=y;n=p,r=m}for(var c=0,b=l.length;c<b;c++)l[c].clearHandles();return o||e}function a(e,t,n){var r=2e-7,i=e.x,o=e.y,s=0,u=0,l=t.length,c=[],h=Math.abs;if(n){for(var f=-(1/0),p=1/0,d=o-r,m=o+r,v=0;v<l;v++)for(var y=t[v].values,_=j.solveCubic(y,0,i,c,0,1),b=_-1;b>=0;b--){var w=j.getPoint(y,c[b]).y;w<d&&w>f?f=w:w>m&&w<p&&(p=w)}f=(f+o)/2,p=(p+o)/2,f>-(1/0)&&(s=a(new g(i,f),t).winding),p<1/0&&(u=a(new g(i,p),t).winding)}else{for(var x,E,M=i-r,C=i+r,S=0,T=0,P=!1,v=0;v<l;v++){var O=t[v],A=O.winding,y=O.values,R=y[1],k=y[7];if(O.last&&(x=O.last.winding,E=O.last.values[6],P=!1),o>=R&&o<=k||o>=k&&o<=R)if(A){var L=o===R?y[0]:o===k?y[6]:1===j.solveCubic(y,1,o,c,0,1)?j.getPoint(y,c[0]).x:null;null!=L&&(L>=M&&L<=C?P=!0:o===R&&A===x||o===R&&(i-L)*(i-E)<0||(L<M?s+=A:L>C&&(u+=A))),x=A,E=y[6]}else(i-y[0])*(i-y[6])<=0&&(P=!0);P&&(v>=l-1||t[v+1].last)&&(S+=1,T-=1)}0===s&&0===u&&(s=S,u=T)}return{winding:Math.max(h(s),h(u)),contour:!s^!u}}function s(e,t,n,r,i){var o,s=[],u=e,l=0;do{var c=e.getCurve(),h=c.getLength();s.push({segment:e,curve:c,length:h}),l+=h,e=e.getNext()}while(e&&!e._intersection&&e!==u);for(var h=l/2,f=0,p=s.length;f<p;f++){var d=s[f],m=d.length;if(h<=m){var c=d.curve,v=c._path,g=v._parent,y=c.getTimeAt(h),_=c.getPointAtTime(y),b=Math.abs(c.getTangentAtTime(y).y)<1e-7;g instanceof F&&(v=g),o=i.subtract&&n&&(v===t&&n._getWinding(_,b)||v===n&&!t._getWinding(_,b))?{winding:0}:a(_,r,b);break}h-=m}for(var f=s.length-1;f>=0;f--){var w=s[f].segment;w._winding=o.winding,w._contour=o.contour}}function u(e,t){function n(e,n){return!(!e||e._visited||!(!t||t[e._winding]||!n&&t.unite&&e._contour))}function r(e){return e===o||e===a}function i(e,i){if(!e._next)return e;for(;e;){var o=e._segment,a=o.getNext(),s=a&&a._intersection;if(o!==i&&(r(o)||r(a)||!o._visited&&!a._visited&&(!t||n(o)&&(n(a)||s&&n(s._segment)))))return e;e=e._next}return null}for(var o,a,s=[],u=0,l=e.length;u<l;u++){var h,f=null,p=!1,d=e[u],v=d._intersection;if(!d._visited&&d._path._overlapsOnly){var g=d._path,y=v._segment._path,_=g._segments,b=y._segments;if(c.equals(_,b)){(t.unite||t.intersect)&&g.getArea()&&s.push(g.clone(!1));for(var w=0,x=_.length;w<x;w++)_[w]._visited=b[w]._visited=!0}}if(n(d,!0)&&(d._path._validOverlapsOnly||!v||!v._overlap)){for(o=a=null;;){v=v&&i(v,d)||v;var E=v&&v._segment;if(r(d)?p=!0:E&&(r(E)?(p=!0,d=E):n(E,n(d,!0))&&(t&&(t.intersect||t.subtract)&&(d._visited=!0),d=E)),p||d._visited){d._visited=!0;break}if(d._path._validOverlapsOnly&&!n(d))break;f||(f=new U(S.NO_INSERT),o=d,a=E);var M=d.getNext();f.add(new D(d._point,h,M&&d._handleOut)),d._visited=!0,d=M||d._path.getFirstSegment(),h=M&&M._handleIn,v=d._intersection}if(p)f.firstSegment.setHandleIn(h),f.setClosed(!0);else if(f){var C=f.getArea(!0);Math.abs(C)>=2e-7&&console.error("Boolean operation resulted in open path","segments =",f._segments.length,"length =",f.getLength(),"area=",C),f=null}f&&(f._segments.length>8||!m.isZero(f.getArea()))&&(s.push(f),f=null)}}return s}var l={unite:{1:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0}};return{_getWinding:function(e,t){return a(e,this._getMonoCurves(),t).winding},unite:function(e){return n(this,e,"unite")},intersect:function(e){return n(this,e,"intersect")},subtract:function(e){return n(this,e,"subtract")},exclude:function(e){return n(this,e,"exclude")},divide:function(e){return t(T,[this.subtract(e),this.intersect(e)],!0,this,e)},resolveCrossings:function(){function e(e){var t=e&&e._intersection;return t&&t._overlap}var t=this._children,n=t||[this],r=!1,i=!1,a=this.getIntersections(null,function(e){return e._overlap&&(r=!0)||e.isCrossing()&&(i=!0)});if(a=N.expand(a),r)for(var s=o(a,function(e){return e._overlap}),l=s.length-1;l>=0;l--){var h=s[l]._segment,f=h.getPrevious(),p=h.getNext();if(h._path&&e(f)&&e(p)){h.remove(),f._handleOut.set(0,0),p._handleIn.set(0,0);var d=f.getCurve();d.isStraight()&&0===d.getLength()&&f.remove()}}i&&(o(a,r&&function(e){var t=e.getCurve(),n=e._intersection._curve,r=e._segment;return!!(t&&n&&t._path&&n._path)||void(r&&(r._intersection=null))}),n=u(c.each(n,function(e){this.push.apply(this,e._segments)},[])));var m,v=n.length;if(v>1){n=n.slice().sort(function(e,t){return t.getBounds().getArea()-e.getBounds().getArea()});for(var g=n[0],y=[g],_={},b="nonzero"===this.getFillRule(),w=b&&c.each(n,function(e){this.push(e.isClockwise()?1:-1)},[]),l=1;l<v;l++){for(var x=n[l],E=x.getInteriorPoint(),M=!1,C=null,T=!1,P=l-1;P>=0&&!C;P--)if(n[P].contains(E)){if(b&&!M&&(w[l]+=w[P],w[l]&&w[P])){T=_[l]=!0;break}M=!0,C=!_[P]&&n[P]}T||(x.setClockwise(C?!C.isClockwise():g.isClockwise()),y.push(x))}n=y,v=y.length}return v>1&&t?(n!==t&&this.setChildren(n,!0),m=this):1!==v||t||(n[0]!==this&&this.setSegments(n[0].removeSegments()),m=this),m||(m=new F(S.NO_INSERT),m.addChildren(n,!0),m=m.reduce(),m.copyAttributes(this),this.replaceWith(m)),m}}}),U.inject({_getMonoCurves:function(){function e(e){var t=e[1],i=e[7],o=Math.abs((t-i)/(e[0]-e[6]))<2e-7?0:t>i?-1:1,a={values:e,winding:o};r.push(a),o&&(n=a)}function t(t){if(0!==j.getLength(t)){var n=t[1],r=t[3],i=t[5],o=t[7];if(j.isStraight(t)||n>=r==r>=i&&r>=i==i>=o)e(t);else{var a=3*(r-i)-n+o,s=2*(n+i)-4*r,u=r-n,l=4e-7,c=1-l,h=[],f=m.solveQuadratic(a,s,u,h,l,c);if(f<1)e(t);else{h.sort();var p=h[0],d=j.subdivide(t,p);e(d[0]),f>1&&(p=(h[1]-p)/(1-p),d=j.subdivide(d[1],p),e(d[0])),e(d[1])}}}}var n,r=this._monoCurves;if(!r){r=this._monoCurves=[];for(var i=this.getCurves(),o=this._segments,a=0,s=i.length;a<s;a++)t(i[a].getValues());if(!this._closed&&o.length>1){var u=o[o.length-1]._point,l=o[0]._point,c=u._x,h=u._y,f=l._x,p=l._y;t([c,h,c,h,f,p,f,p])}r.length>0&&(r[0].last=n)}return r},getInteriorPoint:function(){var e=this.getBounds(),t=e.getCenter(!0);if(!this.contains(t)){for(var n=this._getMonoCurves(),r=[],i=t.y,o=[],a=0,s=n.length;a<s;a++){var u=n[a].values;if(1===n[a].winding&&i>u[1]&&i<=u[7]||i>=u[7]&&i<u[1])for(var l=j.solveCubic(u,1,i,r,0,1),c=l-1;c>=0;c--)o.push(j.getPoint(u,r[c]).x)}o.sort(function(e,t){return e-t}),t.x=(o[0]+o[1])/2}return t}}),F.inject({_getMonoCurves:function(){for(var e=this._children,t=[],n=0,r=e.length;n<r;n++)t.push.apply(t,e[n]._getMonoCurves());return t}});var V=c.extend({_class:"PathIterator",initialize:function(e,t,n,r,i){function o(e,t){var n=j.getValues(e,t,i);u.push(n),a(n,e._index,0,1)}function a(e,n,i,o){if(!(o-i>h)||r&&j.isStraight(e)||j.isFlatEnough(e,t||.25)){var s=e[6]-e[0],u=e[7]-e[1],f=Math.sqrt(s*s+u*u);f>0&&(c+=f,l.push({offset:c,curve:e,index:n,time:o}))}else{var p=j.subdivide(e,.5),d=(i+o)/2;a(p[0],n,i,d),a(p[1],n,d,o)}}for(var s,u=[],l=[],c=0,h=1/(n||32),f=e._segments,p=f[0],d=1,m=f.length;d<m;d++)s=f[d],o(p,s),p=s;e._closed&&o(s,f[0]),this.curves=u,this.parts=l,this.length=c,this.index=0},_get:function(e){for(var t,n=this.index;t=n,!(0===n||this.parts[--n].offset<e););for(var r=this.parts.length;t<r;t++){var i=this.parts[t];if(i.offset>=e){this.index=t;var o=this.parts[t-1],a=o&&o.index===i.index?o.time:0,s=o?o.offset:0;return{index:i.index,time:a+(i.time-a)*(e-s)/(i.offset-s)}}}var i=this.parts[this.parts.length-1];return{index:i.index,time:1}},drawPart:function(e,t,n){for(var r=this._get(t),i=this._get(n),o=r.index,a=i.index;o<=a;o++){var s=j.getPart(this.curves[o],o===r.index?r.time:0,o===i.index?i.time:1);o===r.index&&e.moveTo(s[0],s[1]),e.bezierCurveTo.apply(e,s.slice(2))}}},c.each(j._evaluateMethods,function(e){this[e+"At"]=function(t){var n=this._get(t);return j[e](this.curves[n.index],n.time)}},{})),z=c.extend({initialize:function(e){for(var t,n=this.points=[],r=e._segments,i=e._closed,o=0,a=r.length;o<a;o++){var s=r[o].point;t&&t.equals(s)||n.push(t=s.clone())}i&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=i},fit:function(e){var t=this.points,n=t.length,r=null;return n>0&&(r=[new D(t[0])],n>1&&(this.fitCubic(r,e,0,n-1,t[1].subtract(t[0]),t[n-2].subtract(t[n-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(e,t,n,r,i,o){var a=this.points;if(r-n===1){var s=a[n],u=a[r],l=s.getDistance(u)/3;return void this.addCurve(e,[s,s.add(i.normalize(l)),u.add(o.normalize(l)),u])}for(var c,h=this.chordLengthParameterize(n,r),f=Math.max(t,t*t),p=!0,d=0;d<=4;d++){var m=this.generateBezier(n,r,h,i,o),v=this.findMaxError(n,r,m,h);if(v.error<t&&p)return void this.addCurve(e,m);if(c=v.index,v.error>=f)break;p=this.reparameterize(n,r,h,m),f=v.error}var g=a[c-1].subtract(a[c+1]);this.fitCubic(e,t,n,c,i,g),this.fitCubic(e,t,c,r,g.negate(),o)},addCurve:function(e,t){var n=e[e.length-1];n.setHandleOut(t[1].subtract(t[0])),e.push(new D(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,n,r,i){for(var o=1e-12,a=Math.abs,s=this.points,u=s[e],l=s[t],c=[[0,0],[0,0]],h=[0,0],f=0,p=t-e+1;f<p;f++){var d=n[f],m=1-d,v=3*d*m,g=m*m*m,y=v*m,_=v*d,b=d*d*d,w=r.normalize(y),x=i.normalize(_),E=s[e+f].subtract(u.multiply(g+y)).subtract(l.multiply(_+b));c[0][0]+=w.dot(w),c[0][1]+=w.dot(x),c[1][0]=c[0][1],c[1][1]+=x.dot(x),h[0]+=w.dot(E),h[1]+=x.dot(E)}var M,C,S=c[0][0]*c[1][1]-c[1][0]*c[0][1];if(a(S)>o){var T=c[0][0]*h[1]-c[1][0]*h[0],P=h[0]*c[1][1]-h[1]*c[0][1];M=P/S,C=T/S}else{var O=c[0][0]+c[0][1],A=c[1][0]+c[1][1];M=C=a(O)>o?h[0]/O:a(A)>o?h[1]/A:0}var R,k,L=l.getDistance(u),D=o*L;if(M<D||C<D)M=C=L/3;else{var I=l.subtract(u);R=r.normalize(M),k=i.normalize(C),R.dot(I)-k.dot(I)>L*L&&(M=C=L/3,R=k=null)}return[u,u.add(R||r.normalize(M)),l.add(k||i.normalize(C)),l]},reparameterize:function(e,t,n,r){for(var i=e;i<=t;i++)n[i-e]=this.findRoot(r,this.points[i],n[i-e]);for(var i=1,o=n.length;i<o;i++)if(n[i]<=n[i-1])return!1;return!0},findRoot:function(e,t,n){for(var r=[],i=[],o=0;o<=2;o++)r[o]=e[o+1].subtract(e[o]).multiply(3);for(var o=0;o<=1;o++)i[o]=r[o+1].subtract(r[o]).multiply(2);var a=this.evaluate(3,e,n),s=this.evaluate(2,r,n),u=this.evaluate(1,i,n),l=a.subtract(t),c=s.dot(s)+l.dot(u);return Math.abs(c)<1e-6?n:n-l.dot(s)/c},evaluate:function(e,t,n){for(var r=t.slice(),i=1;i<=e;i++)for(var o=0;o<=e-i;o++)r[o]=r[o].multiply(1-n).add(r[o+1].multiply(n));return r[0]},chordLengthParameterize:function(e,t){for(var n=[0],r=e+1;r<=t;r++)n[r-e]=n[r-e-1]+this.points[r].getDistance(this.points[r-1]);for(var r=1,i=t-e;r<=i;r++)n[r]/=n[i];return n},findMaxError:function(e,t,n,r){for(var i=Math.floor((t-e+1)/2),o=0,a=e+1;a<t;a++){var s=this.evaluate(3,n,r[a-e]),u=s.subtract(this.points[a]),l=u.x*u.x+u.y*u.y;l>=o&&(o=l,i=a)}return{error:o,index:i}}}),G=S.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(e){this._content="",this._lines=[];var t=e&&c.isPlainObject(e)&&e.x===s&&e.y===s;this._initialize(t&&e,!t&&g.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),H=G.extend({_class:"PointText",initialize:function(){G.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new y(e.x,e.y,this,"setPoint")},setPoint:function(){var e=g.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,n){if(this._content){this._setStyles(e,t,n);var r=this._lines,i=this._style,o=i.hasFill(),a=i.hasStroke(),s=i.getLeading(),u=e.shadowColor;e.font=i.getFontStyle(),e.textAlign=i.getJustification();for(var l=0,c=r.length;l<c;l++){e.shadowColor=u;var h=r[l];o&&(e.fillText(h,0,0),e.shadowColor="rgba(0,0,0,0)"),a&&e.strokeText(h,0,0),e.translate(0,s)}}},_getBounds:function(e,t){var n=this._style,r=this._lines,i=r.length,o=n.getJustification(),a=n.getLeading(),s=this.getView().getTextWidth(n.getFontStyle(),r),u=0;"left"!==o&&(u-=s/("center"===o?2:1));var l=new w(u,i?-.75*a:0,s,i*a);return e?e._transformBounds(l,l):l;
}}),W=c.extend(new function(){function e(e){var n,r=e.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(r){n=[0,0,0];for(var o=0;o<3;o++){var a=r[o+1];n[o]=parseInt(1==a.length?a+a:a,16)/255}}else if(r=e.match(/^rgba?\((.*)\)$/)){n=r[1].split(",");for(var o=0,s=n.length;o<s;o++){var a=+n[o];n[o]=o<3?a/255:a}}else if(u){var l=i[e];if(!l){t||(t=ae.getContext(1,1),t.globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var c=t.getImageData(0,0,1,1).data;l=i[e]=[c[0]/255,c[1]/255,c[2]/255]}n=l.slice()}else n=[0,0,0];return n}var t,n={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},r={},i={},o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],a={"rgb-hsb":function(e,t,n){var r=Math.max(e,t,n),i=Math.min(e,t,n),o=r-i,a=0===o?0:60*(r==e?(t-n)/o+(t<n?6:0):r==t?(n-e)/o+2:(e-t)/o+4);return[a,0===r?0:o/r,r]},"hsb-rgb":function(e,t,n){e=(e/60%6+6)%6;var r=Math.floor(e),i=e-r,r=o[r],a=[n,n*(1-t),n*(1-t*i),n*(1-t*(1-i))];return[a[r[0]],a[r[1]],a[r[2]]]},"rgb-hsl":function(e,t,n){var r=Math.max(e,t,n),i=Math.min(e,t,n),o=r-i,a=0===o,s=a?0:60*(r==e?(t-n)/o+(t<n?6:0):r==t?(n-e)/o+2:(e-t)/o+4),u=(r+i)/2,l=a?0:u<.5?o/(r+i):o/(2-r-i);return[s,l,u]},"hsl-rgb":function(e,t,n){if(e=(e/360%1+1)%1,0===t)return[n,n,n];for(var r=[e+1/3,e,e-1/3],i=n<.5?n*(1+t):n+t-n*t,o=2*n-i,a=[],s=0;s<3;s++){var u=r[s];u<0&&(u+=1),u>1&&(u-=1),a[s]=6*u<1?o+6*(i-o)*u:2*u<1?i:3*u<2?o+(i-o)*(2/3-u)*6:o}return a},"rgb-gray":function(e,t,n){return[.2989*e+.587*t+.114*n]},"gray-rgb":function(e){return[e,e,e]},"gray-hsb":function(e){return[0,0,e]},"gray-hsl":function(e){return[0,0,e]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return c.each(n,function(e,t){r[t]=[],c.each(e,function(e,i){var o=c.capitalize(e),a=/^(hue|saturation)$/.test(e),s=r[t][i]="gradient"===e?function(e){var t=this._components[0];return e=q.read(Array.isArray(e)?e:arguments,0,{readNull:!0}),t!==e&&(t&&t._removeOwner(this),e&&e._addOwner(this)),e}:"gradient"===t?function(){return g.read(arguments,0,{readNull:"highlight"===e,clone:!0})}:function(e){return null==e||isNaN(e)?0:e};this["get"+o]=function(){return this._type===t||a&&/^hs[bl]$/.test(this._type)?this._components[i]:this._convert(t)[i]},this["set"+o]=function(e){this._type===t||a&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(t),this._properties=n[t],this._type=t),this._components[i]=s.call(this,e),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function t(i){var o,a,s,u,l=Array.prototype.slice,c=arguments,h=this.__read,f=0;Array.isArray(i)&&(c=i,i=c[0]);var p=null!=i&&typeof i;if("string"===p&&i in n&&(o=i,i=c[1],Array.isArray(i)?(a=i,s=c[2]):(h&&(f=1),c=l.call(c,1),p=typeof i)),!a){if(u="number"===p?c:"object"===p&&null!=i.length?i:null){o||(o=u.length>=3?"rgb":"gray");var d=n[o].length;s=u[d],h&&(f+=u===arguments?d+(null!=s?1:0):1),u.length>d&&(u=l.call(u,0,d))}else if("string"===p)o="rgb",a=e(i),4===a.length&&(s=a[3],a.length--);else if("object"===p)if(i.constructor===t){if(o=i._type,a=i._components.slice(),s=i._alpha,"gradient"===o)for(var m=1,v=a.length;m<v;m++){var g=a[m];g&&(a[m]=g.clone())}}else if(i.constructor===q)o="gradient",u=c;else{o="hue"in i?"lightness"in i?"hsl":"hsb":"gradient"in i||"stops"in i||"radial"in i?"gradient":"gray"in i?"gray":"rgb";var y=n[o],_=r[o];this._components=a=[];for(var m=0,v=y.length;m<v;m++){var b=i[y[m]];null==b&&0===m&&"gradient"===o&&"stops"in i&&(b={stops:i.stops,radial:i.radial}),b=_[m].call(this,b),null!=b&&(a[m]=b)}s=i.alpha}h&&o&&(f=1)}if(this._type=o||"rgb",!a){this._components=a=[];for(var _=r[this._type],m=0,v=_.length;m<v;m++){var b=_[m].call(this,u&&u[m]);null!=b&&(a[m]=b)}}this._components=a,this._properties=n[this._type],this._alpha=s,h&&(this.__read=f)},_set:"#initialize",_serialize:function(e,t){var n=this.getComponents();return c.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),e,!0,t)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(e){var t;return this._type===e?this._components.slice():(t=a[this._type+"-"+e])?t.apply(this,this._components):a["rgb-"+e].apply(this,a[this._type+"-rgb"].apply(this,this._components))},convert:function(e){return new W(e,this._convert(e),this._alpha)},getType:function(){return this._type},setType:function(e){this._components=this._convert(e),this._properties=n[e],this._type=e},getComponents:function(){var e=this._components.slice();return null!=this._alpha&&e.push(this._alpha),e},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(e){this._alpha=null==e?null:Math.min(Math.max(e,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(e){var t=c.isPlainValue(e,!0)?W.read(arguments):e;return t===this||t&&this._class===t._class&&this._type===t._type&&this._alpha===t._alpha&&c.equals(this._components,t._components)||!1},toString:function(){for(var e=this._properties,t=[],n="gradient"===this._type,r=d.instance,i=0,o=e.length;i<o;i++){var a=this._components[i];null!=a&&t.push(e[i]+": "+(n?a:r.number(a)))}return null!=this._alpha&&t.push("alpha: "+r.number(this._alpha)),"{ "+t.join(", ")+" }"},toCSS:function(e){function t(e){return Math.round(255*(e<0?0:e>1?1:e))}var n=this._convert("rgb"),r=e||null==this._alpha?1:this._alpha;return n=[t(n[0]),t(n[1]),t(n[2])],r<1&&n.push(r<0?0:r),e?"#"+((1<<24)+(n[0]<<16)+(n[1]<<8)+n[2]).toString(16).slice(1):(4==n.length?"rgba(":"rgb(")+n.join(",")+")"},toCanvasStyle:function(e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var t,n=this._components,r=n[0],i=r._stops,o=n[1],a=n[2];if(r._radial){var s=a.getDistance(o),u=n[3];if(u){var l=u.subtract(o);l.getLength()>s&&(u=o.add(l.normalize(s-.1)))}var c=u||o;t=e.createRadialGradient(c.x,c.y,0,o.x,o.y,s)}else t=e.createLinearGradient(o.x,o.y,a.x,a.y);for(var h=0,f=i.length;h<f;h++){var p=i[h];t.addColorStop(p._offset||h/(f-1),p._color.toCanvasStyle())}return this._canvasStyle=t},transform:function(e){if("gradient"===this._type){for(var t=this._components,n=1,r=t.length;n<r;n++){var i=t[n];e._transformPoint(i,i,!0)}this._changed()}},statics:{_types:n,random:function(){var e=Math.random;return new W(e(),e(),e())}}})},new function(){var e={add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return e*t},divide:function(e,t){return e/t}};return c.each(e,function(e,t){this[t]=function(t){t=W.read(arguments);for(var n=this._type,r=this._components,i=t._convert(n),o=0,a=r.length;o<a;o++)i[o]=e(r[o],i[o]);return new W(n,i,null!=this._alpha?e(this._alpha,t.getAlpha()):null)}},{})}),q=c.extend({_class:"Gradient",initialize:function(e,t){this._id=v.get(),e&&this._set(e)&&(e=t=null),this._stops||this.setStops(e||["white","black"]),null==this._radial&&this.setRadial("string"==typeof t&&"radial"===t||t||!1)},_serialize:function(e,t){return t.add(this,function(){return c.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;t!=-1&&(this._owners.splice(t,1),0===this._owners.length&&(this._owners=s))},clone:function(){for(var e=[],t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new q(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var n=0,r=t.length;n<r;n++)t[n]._owner=s;t=this._stops=X.readAll(e,0,{clone:!0});for(var n=0,r=t.length;n<r;n++)t[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,n=e._stops,r=t.length;if(r===n.length){for(var i=0;i<r;i++)if(!t[i].equals(n[i]))return!1;return!0}}return!1}}),X=c.extend({_class:"GradientStop",initialize:function(e,t){var n=e,r=t;"object"==typeof e&&t===s&&(Array.isArray(e)&&"number"!=typeof e[0]?(n=e[0],r=e[1]):("color"in e||"offset"in e||"rampPoint"in e)&&(n=e.color,r=e.offset||e.rampPoint||0)),this.setColor(n),this.setOffset(r)},clone:function(){return new X(this._color.clone(),this._offset)},_serialize:function(e,t){var n=this._color,r=this._offset;return c.serialize(null==r?[n]:[n,r],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var e=W.read(arguments,0,{clone:!0});e&&(e._owner=this),this._color=e,this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),Y=c.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new g,selectedColor:null},t=c.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=c.set({},t,{fillColor:new W}),r={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},i={beans:!0},a={_class:"Style",beans:!0,initialize:function(r,i,a){this._values={},this._owner=i,this._project=i&&i._project||a||o.project,this._defaults=!i||i instanceof T?t:i instanceof G?n:e,r&&this.set(r)}};return c.each(t,function(e,t){var n=/Color$/.test(t),o="shadowOffset"===t,u=c.capitalize(t),l=r[t],h="set"+u,f="get"+u;a[h]=function(e){var r=this._owner,i=r&&r._children;if(i&&i.length>0&&!(r instanceof F))for(var o=0,a=i.length;o<a;o++)i[o]._style[h](e);else if(t in this._defaults){var u=this._values[t];u!==e&&(n&&(u&&u._owner!==s&&(u._owner=s),e&&e.constructor===W&&(e._owner&&(e=e.clone()),e._owner=r)),this._values[t]=e,r&&r._changed(l||65))}},a[f]=function(e){var r,i=this._owner,a=i&&i._children;if(t in this._defaults&&(!a||0===a.length||e||i instanceof F)){var r=this._values[t];if(r===s)r=this._defaults[t],r&&r.clone&&(r=r.clone());else{var u=n?W:o?g:null;!u||r&&r.constructor===u||(this._values[t]=r=u.read([r],0,{readNull:!0,clone:!0}),r&&n&&(r._owner=i))}}else if(a)for(var l=0,h=a.length;l<h;l++){var p=a[l]._style[f]();if(0===l)r=p;else if(!c.equals(r,p))return s}return r},i[f]=function(e){return this._style[f](e)},i[h]=function(e){this._style[h](e)}}),c.each({Font:"FontFamily",WindingRule:"FillRule"},function(e,t){var n="get"+t,r="set"+t;a[n]=i[n]="#get"+e,a[r]=i[r]="#set"+e}),S.inject(i),a},{set:function(e){var t=e instanceof Y,n=t?e._values:e;if(n)for(var r in n)if(r in this._defaults){var i=n[r];this[r]=i&&t&&i.clone?i.clone():i}},equals:function(e){return e===this||e&&this._class===e._class&&c.equals(this._values,e._values)||!1},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=t?t:1.2*n}}),K=new function(){function e(e,t,n,r){for(var i=["","webkit","moz","Moz","ms","o"],o=t[0].toUpperCase()+t.substring(1),a=0;a<6;a++){var s=i[a],u=s?s+o:t;if(u in e){if(!n)return e[u];e[u]=r;break}}}return{getStyles:function(e){var t=e&&9!==e.nodeType?e.ownerDocument:e,n=t&&t.defaultView;return n&&n.getComputedStyle(e,"")},getBounds:function(e,t){var n,r=e.ownerDocument,i=r.body,o=r.documentElement;try{n=e.getBoundingClientRect()}catch(a){n={left:0,top:0,width:0,height:0}}var s=n.left-(o.clientLeft||i.clientLeft||0),u=n.top-(o.clientTop||i.clientTop||0);if(!t){var l=r.defaultView;s+=l.pageXOffset||o.scrollLeft||i.scrollLeft,u+=l.pageYOffset||o.scrollTop||i.scrollTop}return new w(s,u,n.width,n.height)},getViewportBounds:function(e){var t=e.ownerDocument,n=t.defaultView,r=t.documentElement;return new w(0,0,n.innerWidth||r.clientWidth,n.innerHeight||r.clientHeight)},getOffset:function(e,t){return K.getBounds(e,t).getPoint()},getSize:function(e){return K.getBounds(e,!0).getSize()},isInvisible:function(e){return K.getSize(e).equals(new _(0,0))},isInView:function(e){return!K.isInvisible(e)&&K.getViewportBounds(e).intersects(K.getBounds(e,!0))},isInserted:function(e){return l.body.contains(e)},getPrefixed:function(t,n){return t&&e(t,n)},setPrefixed:function(t,n,r){if("object"==typeof n)for(var i in n)e(t,i,!0,n[i]);else e(t,n,!0,r)}}},Z={add:function(e,t){if(e)for(var n in t)for(var r=t[n],i=n.split(/[\s,]+/g),o=0,a=i.length;o<a;o++)e.addEventListener(i[o],r,!1)},remove:function(e,t){if(e)for(var n in t)for(var r=t[n],i=n.split(/[\s,]+/g),o=0,a=i.length;o<a;o++)e.removeEventListener(i[o],r,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new g(t.pageX||t.clientX+l.documentElement.scrollLeft,t.pageY||t.clientY+l.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return Z.getPoint(e).subtract(K.getOffset(t||Z.getTarget(e)))}};Z.requestAnimationFrame=new function(){function e(){var t=i;i=[];for(var o=0,a=t.length;o<a;o++)t[o]();r=n&&i.length,r&&n(e)}var t,n=K.getPrefixed(u,"requestAnimationFrame"),r=!1,i=[];return function(o){i.push(o),n?r||(n(e),r=!0):t||(t=setInterval(e,1e3/60))}};var Q=c.extend(h,{_class:"View",initialize:function e(t,n){function r(e){return n[e]||parseInt(n.getAttribute(e),10)}function i(){var e=K.getSize(n);return e.isNaN()||e.isZero()?new _(r("width"),r("height")):e}var a;if(u&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="view-"+e._id++),Z.add(n,this._viewEvents);var s="none";if(K.setPrefixed(n.style,{userDrag:s,userSelect:s,touchCallout:s,contentZooming:s,tapHighlightColor:"rgba(0,0,0,0)"}),f.hasAttribute(n,"resize")){var c=this;Z.add(u,this._windowEvents={resize:function(){c.setViewSize(i())}})}if(a=i(),f.hasAttribute(n,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var h=this._stats.domElement,p=h.style,d=K.getOffset(n);p.position="absolute",p.left=d.x+"px",p.top=d.y+"px",l.body.appendChild(h)}}else a=new _(n),n=null;this._project=t,this._scope=t._scope,this._element=n,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new E)._owner=this,this._zoom=1,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!o.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Q._focused===this&&(Q._focused=null),Q._views.splice(Q._views.indexOf(this),1),delete Q._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),Z.remove(this._element,this._viewEvents),Z.remove(u,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:c.each(S._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;Z.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;K.getPrefixed(l,"hidden")&&"true"!==f.getAttribute(t,"keepalive")||!K.isInView(t)||e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){o=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new c({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var n=this._frameItems;t?(n[e._id]={item:e,time:0,count:0},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[e._id],0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var n=this._frameItems[t];n.item.emit("frame",new c(e,{time:n.time+=e.delta,count:n.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=null},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var e=this._viewSize;return new b(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=_.read(arguments),t=e.width,n=e.height,r=e.subtract(this._viewSize);r.isZero()||(this._setElementSize(t,n),this._viewSize.set(t,n),this.emit("resize",{size:e,delta:r}),this._changed(),this._autoUpdate&&this.requestUpdate())},_setElementSize:function(e,t){var n=this._element;n&&(n.width!==e&&(n.width=e),n.height!==t&&(n.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new w(new g,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=g.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){return this._zoom},setZoom:function(e){this.transform((new E).scale(e/this._zoom,this.getCenter())),this._zoom=e},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.initialize.apply(e,arguments)},isVisible:function(){return K.isInView(this._element)},isInserted:function(){return K.isInserted(this._element)},getPixelSize:function(e){var t,n=this._element;if(n){var r=n.parentNode,i=l.createElement("div");i.style.fontSize=e,r.appendChild(i),t=parseFloat(K.getStyles(i).fontSize),r.removeChild(i)}else t=parseFloat(t);return t},getTextWidth:function(e,t){return 0}},c.each(["rotate","scale","shear","skew"],function(e){var t="rotate"===e;this[e]=function(){var n=(t?c:g).read(arguments),r=g.read(arguments,0,{readNull:!0});return this.transform((new E)[e](n,r||this.getCenter(!0)))}},{translate:function(){var e=new E;return this.transform(e.translate.apply(e,arguments))},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(g.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(g.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(g.read(arguments))},getEventPoint:function(e){return this.viewToProject(Z.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){l&&"string"==typeof t&&(t=l.getElementById(t));var n=u?J:Q;return new n(e,t)}}},new function(){function e(e){var t=Z.getTarget(e);return t.getAttribute&&Q._viewsById[t.getAttribute("id")]}function t(){var e=Q._focused;if(!e||!e.isVisible())for(var t=0,n=Q._views.length;t<n;t++)if((e=Q._views[t]).isVisible()){Q._focused=s=e;break}}function n(e,t,n){e._handleMouseEvent("mousemove",t,n)}function r(e,t,n,r,i,o,a){function s(e,n){if(e.responds(n)){if(u||(u=new ne(n,r,i,t||e,o?i.subtract(o):null)),e.emit(n,u)&&(T=!0,u.prevented&&(P=!0),u.stopped))return l=!0}else{var a=O[n];if(a)return s(e,a)}}for(var u,l=!1;e&&e!==a&&!s(e,n);)e=e._parent;return l}function i(e,t,n,i,o,a){return e._project.removeOn(n),P=T=!1,E&&r(E,null,n,i,o,a)||t&&t!==E&&!t.isDescendant(E)&&r(t,null,O[n]||n,i,o,a,E)||r(e,E||t||e,n,i,o,a)}if(u){var a,s,c,h,f,p=!1,d=!1,m=u.navigator;m.pointerEnabled||m.msPointerEnabled?(c="pointerdown MSPointerDown",h="pointermove MSPointerMove",f="pointerup pointercancel MSPointerUp MSPointerCancel"):(c="touchstart",h="touchmove",f="touchend touchcancel","ontouchstart"in u&&m.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(c+=" mousedown",h+=" mousemove",f+=" mouseup"));var v={},g={mouseout:function(e){var t=Q._focused,r=Z.getRelatedTarget(e);if(t&&(!r||"HTML"===r.nodeName)){var i=Z.getOffset(e,t._element),o=i.x,a=Math.abs,s=a(o),u=1<<25,l=s-u;i.x=a(l)<s?l*(o<0?-1:1):o,n(t,e,t.viewToProject(i))}},scroll:t};v[c]=function(t){var n=Q._focused=e(t);p||(p=!0,n._handleMouseEvent("mousedown",t))},g[h]=function(r){var i=Q._focused;if(!d){var o=e(r);o?i!==o&&(i&&n(i,r),a||(a=i),i=Q._focused=s=o):s&&s===i&&(a&&!a.isInserted()&&(a=null),i=Q._focused=a,a=null,t())}i&&n(i,r)},g[c]=function(){d=!0},g[f]=function(e){var t=Q._focused;t&&p&&t._handleMouseEvent("mouseup",e),d=p=!1},Z.add(l,g),Z.add(u,{load:t});var y,_,b,w,x,E,M,C,S,T=!1,P=!1,O={doubleclick:"click",mousedrag:"mousemove"},A=!1,R={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:v,_handleMouseEvent:function(e,t,n){function o(e){return a.virtual[e]||c.responds(e)||l&&l.responds(e)}var a=this._itemEvents,s=a.native[e],u="mousemove"===e,l=this._scope.tool,c=this;u&&p&&o("mousedrag")&&(e="mousedrag"),n||(n=this.getEventPoint(t));var h=this.getBounds().contains(n),f=s&&h&&c._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),d=f&&f.item||null,m=!1,v={};v[e.substr(5)]=!0,s&&d!==x&&(x&&r(x,null,"mouseleave",t,n),d&&r(d,null,"mouseenter",t,n),x=d),A^h&&(r(this,null,h?"mouseenter":"mouseleave",t,n),y=h?this:null,m=!0),!h&&!v.drag||n.equals(b)||(i(this,d,u?e:"mousemove",t,n,b),m=!0),A=h,(v.down&&h||v.up&&_)&&(i(this,d,e,t,n,_),v.down?(S=d===M&&Date.now()-C<300,w=M=d,E=!P&&d,_=n):v.up&&(P||d!==w||(C=Date.now(),i(this,d,S?"doubleclick":"click",t,n,_),S=!1),w=E=null),A=!1,m=!0),b=n,m&&l&&(T=l._handleMouseEvent(e,t,n,v)||T),(T&&!v.move||v.down&&o("mouseup"))&&t.preventDefault()},_handleKeyEvent:function(e,t,n,r){function i(i){i.responds(e)&&(o=s,i.emit(e,a=a||new ee(e,t,n,r)))}var a,s=this._scope,u=s.tool;this.isVisible()&&(i(this),u&&u.responds(e)&&i(u))},_countItemEvent:function(e,t){var n=this._itemEvents,r=n.native,i=n.virtual;for(var o in R)r[o]=(r[o]||0)+(R[o][e]||0)*t;i[e]=(i[e]||0)+t},statics:{updateFocus:t}}}}),J=Q.extend({_class:"CanvasView",initialize:function(e,t){if(!(t instanceof u.HTMLCanvasElement)){var n=_.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+[].slice.call(arguments,1));t=ae.getCanvas(n)}var r=this._context=t.getContext("2d");if(r.save(),this._pixelRatio=1,!/^off|false$/.test(f.getAttribute(t,"hidpi"))){var i=u.devicePixelRatio||1,o=K.getPrefixed(r,"backingStorePixelRatio")||1;this._pixelRatio=i/o}Q.call(this,e,t),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,n){var r=this._pixelRatio;if(e.base.call(this,t*r,n*r),1!==r){var i=this._element,o=this._context;if(!f.hasAttribute(i,"resize")){var a=i.style;a.width=t+"px",a.height=n+"px"}o.restore(),o.save(),o.scale(r,r)}},getPixelSize:function e(t){var n,r=o.agent;if(r&&r.firefox)n=e.base.call(this,t);else{var i=this._context,a=i.font;i.font=t+" serif",n=parseFloat(i.font),i.font=a}return n},getTextWidth:function(e,t){var n=this._context,r=n.font,i=0;n.font=e;for(var o=0,a=t.length;o<a;o++)i=Math.max(i,n.measureText(t[o]).width);return n.font=r,i},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,n=this._viewSize;return t.clearRect(0,0,n.width+1,n.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),$=c.extend({_class:"Event",initialize:function(e){this.event=e,this.type=e&&e.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return te.modifiers}}),ee=$.extend({_class:"KeyEvent",initialize:function(e,t,n,r){this.type=e,this.event=t,this.key=n,this.character=r},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),te=new function(){function e(e){var t=e.key||e.keyIdentifier;return t=/^U\+/.test(t)?String.fromCharCode(parseInt(t.substr(2),16)):/^Arrow[A-Z]/.test(t)?t.substr(5):"Unidentified"===t?String.fromCharCode(e.keyCode):t,i[t]||(t.length>1?c.hyphenate(t):t.toLowerCase())}function t(e,r,i,a){var u,l=Q._focused;if(s[r]=e,e?h[r]=i:delete h[r],r.length>1&&(u=c.camelize(r))in f){f[u]=e;var p=o&&o.agent;if("meta"===u&&p&&p.mac)if(e)n={};else{for(var d in n)d in h&&t(!1,d,n[d],a);n=null}}else e&&n&&(n[r]=i);l&&l._handleKeyEvent(e?"keydown":"keyup",a,r,i)}var n,r,i={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},a={tab:"\t",space:" ",enter:"\r"},s={},h={},f=new c({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var e=o&&o.agent;return e&&e.mac?this.meta:this.control}}});return Z.add(l,{keydown:function(n){var i=e(n),s=o&&o.agent;i.length>1||s&&s.chrome&&(n.altKey||s.mac&&n.metaKey||!s.mac&&n.ctrlKey)?t(!0,i,a[i]||(i.length>1?"":i),n):r=i},keypress:function(n){if(r){var i=e(n),o=n.charCode,a=o>=32?String.fromCharCode(o):i.length>1?"":i;i!==r&&(i=a.toLowerCase()),t(!0,i,a,n),r=null}},keyup:function(n){var r=e(n);r in h&&t(!1,r,h[r],n)}}),Z.add(u,{blur:function(e){for(var n in h)t(!1,n,h[n],e)}}),{modifiers:f,isDown:function(e){return!!s[e]}}},ne=$.extend({_class:"MouseEvent",initialize:function(e,t,n,r,i){this.type=e,this.event=t,this.point=n,this.target=r,this.delta=i},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),re=$.extend({_class:"ToolEvent",_item:null,initialize:function(e,t,n){this.tool=e,this.type=t,this.event=n},_choosePoint:function(e,t){return e?e:t?t.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,n=t._parent;/^(Group|CompoundPath)$/.test(n._class);)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),ie=p.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(e){p.call(this),this._moveCount=-1,this._downCount=-1,this._set(e)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,null!=e&&null!=this._maxDistance&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,null!=this._minDistance&&null!=e&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,n,r){function i(e,t){var i=n,o=s?f._point:f._downPoint||i;if(s){if(f._moveCount&&i.equals(o))return!1;if(o&&(null!=e||null!=t)){var a=i.subtract(o),u=a.getLength();if(u<(e||0))return!1;t&&(i=o.add(a.normalize(Math.min(u,t))))}f._moveCount++}return f._point=i,f._lastPoint=o||i,r.down&&(f._moveCount=-1,f._downPoint=i,f._downCount++),!0}function a(){u&&(h=f.emit(e,new re(f,e,t))||h)}o=this._scope,r.drag&&!this.responds(e)&&(e="mousemove");var s=r.move||r.drag,u=this.responds(e),l=this.minDistance,c=this.maxDistance,h=!1,f=this;if(r.down)i(),a();else if(r.up)i(null,c),a();else if(u)for(;i(l,c);)a();return h}}),oe={request:function(e){var t=new u.XMLHttpRequest;return t.open((e.method||"get").toUpperCase(),e.url,c.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var n=t.status;0===n||200===n?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var n=t.status,r='Could not load "'+e.url+'" (Status: '+n+")";if(!e.onError)throw new Error(r);e.onError(r,n)},t.send(null)}},ae={canvases:[],getCanvas:function(e,t){if(!u)return null;var n,r=!0;"object"==typeof e&&(t=e.height,e=e.width),this.canvases.length?n=this.canvases.pop():(n=l.createElement("canvas"),r=!1);var i=n.getContext("2d");if(!i)throw new Error("Canvas "+n+" is unable toprovide a 2D context.");return n.width===e&&n.height===t?r&&i.clearRect(0,0,e+1,t+1):(n.width=e,n.height=t),i.save(),n},getContext:function(e,t){var n=this.getCanvas(e,t);return n?n.getContext("2d"):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},se=new function(){function e(e,t,n){return.2989*e+.587*t+.114*n}function t(t,n,r,i){var o=i-e(t,n,r);p=t+o,d=n+o,m=r+o;var i=e(p,d,m),a=v(p,d,m),s=g(p,d,m);if(a<0){var u=i-a;p=i+(p-i)*i/u,d=i+(d-i)*i/u,m=i+(m-i)*i/u}if(s>255){var l=255-i,c=s-i;p=i+(p-i)*l/c,d=i+(d-i)*l/c,m=i+(m-i)*l/c}}function n(e,t,n){return g(e,t,n)-v(e,t,n)}function r(e,t,n,r){var i,o=[e,t,n],a=g(e,t,n),s=v(e,t,n);s=s===e?0:s===t?1:2,a=a===e?0:a===t?1:2,i=0===v(s,a)?1===g(s,a)?2:1:0,o[a]>o[s]?(o[i]=(o[i]-o[s])*r/(o[a]-o[s]),o[a]=r):o[i]=o[a]=0,o[s]=0,p=o[0],d=o[1],m=o[2]}var i,o,a,s,u,l,h,f,p,d,m,v=Math.min,g=Math.max,y=Math.abs,_={multiply:function(){p=u*i/255,d=l*o/255,m=h*a/255},screen:function(){p=u+i-u*i/255,d=l+o-l*o/255,m=h+a-h*a/255},overlay:function(){p=u<128?2*u*i/255:255-2*(255-u)*(255-i)/255,d=l<128?2*l*o/255:255-2*(255-l)*(255-o)/255,m=h<128?2*h*a/255:255-2*(255-h)*(255-a)/255},"soft-light":function(){var e=i*u/255;p=e+u*(255-(255-u)*(255-i)/255-e)/255,e=o*l/255,d=e+l*(255-(255-l)*(255-o)/255-e)/255,e=a*h/255,m=e+h*(255-(255-h)*(255-a)/255-e)/255},"hard-light":function(){p=i<128?2*i*u/255:255-2*(255-i)*(255-u)/255,d=o<128?2*o*l/255:255-2*(255-o)*(255-l)/255,m=a<128?2*a*h/255:255-2*(255-a)*(255-h)/255},"color-dodge":function(){p=0===u?0:255===i?255:v(255,255*u/(255-i)),d=0===l?0:255===o?255:v(255,255*l/(255-o)),m=0===h?0:255===a?255:v(255,255*h/(255-a))},"color-burn":function(){p=255===u?255:0===i?0:g(0,255-255*(255-u)/i),
d=255===l?255:0===o?0:g(0,255-255*(255-l)/o),m=255===h?255:0===a?0:g(0,255-255*(255-h)/a)},darken:function(){p=u<i?u:i,d=l<o?l:o,m=h<a?h:a},lighten:function(){p=u>i?u:i,d=l>o?l:o,m=h>a?h:a},difference:function(){p=u-i,p<0&&(p=-p),d=l-o,d<0&&(d=-d),m=h-a,m<0&&(m=-m)},exclusion:function(){p=u+i*(255-u-u)/255,d=l+o*(255-l-l)/255,m=h+a*(255-h-h)/255},hue:function(){r(i,o,a,n(u,l,h)),t(p,d,m,e(u,l,h))},saturation:function(){r(u,l,h,n(i,o,a)),t(p,d,m,e(u,l,h))},luminosity:function(){t(u,l,h,e(i,o,a))},color:function(){t(i,o,a,e(u,l,h))},add:function(){p=v(u+i,255),d=v(l+o,255),m=v(h+a,255)},subtract:function(){p=g(u-i,0),d=g(l-o,0),m=g(h-a,0)},average:function(){p=(u+i)/2,d=(l+o)/2,m=(h+a)/2},negation:function(){p=255-y(255-i-u),d=255-y(255-o-l),m=255-y(255-a-h)}},b=this.nativeModes=c.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(e){this[e]=!0},{}),w=ae.getContext(1,1);w&&(c.each(_,function(e,t){var n="darken"===t,r=!1;w.save();try{w.fillStyle=n?"#300":"#a00",w.fillRect(0,0,1,1),w.globalCompositeOperation=t,w.globalCompositeOperation===t&&(w.fillStyle=n?"#a00":"#300",w.fillRect(0,0,1,1),r=w.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(i){}w.restore(),b[t]=r}),ae.release(w)),this.process=function(e,t,n,r,c){var v=t.canvas,g="normal"===e;if(g||b[e])n.save(),n.setTransform(1,0,0,1,0,0),n.globalAlpha=r,g||(n.globalCompositeOperation=e),n.drawImage(v,c.x,c.y),n.restore();else{var y=_[e];if(!y)return;for(var w=n.getImageData(c.x,c.y,v.width,v.height),x=w.data,E=t.getImageData(0,0,v.width,v.height).data,M=0,C=x.length;M<C;M+=4){i=E[M],u=x[M],o=E[M+1],l=x[M+1],a=E[M+2],h=x[M+2],s=E[M+3],f=x[M+3],y();var S=s*r/255,T=1-S;x[M]=S*p+T*u,x[M+1]=S*d+T*l,x[M+2]=S*m+T*h,x[M+3]=s*r+T*f}n.putImageData(w,c.x,c.y)}}},ue=new function(){function e(e,t,i){return n(l.createElementNS(r,e),t,i)}function t(e,t){var n=a[t],r=n?e.getAttributeNS(n,t):e.getAttribute(t);return"null"===r?null:r}function n(e,t,n){for(var r in t){var i=t[r],o=a[r];"number"==typeof i&&n&&(i=n.number(i)),o?e.setAttributeNS(o,r,i):e.setAttribute(r,i)}return e}var r="http://www.w3.org/2000/svg",i="http://www.w3.org/2000/xmlns",o="http://www.w3.org/1999/xlink",a={href:o,xlink:i,xmlns:i+"/","xmlns:xlink":i+"/"};return{svg:r,xmlns:i,xlink:o,create:e,get:t,set:n}},le=c.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof B||e instanceof O||e instanceof G)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){var n=c.capitalize(t),r=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:r,fromSVG:r&&c.each(r,function(e,t){this[e]=t},{}),exportFilter:e[3],get:"get"+n,set:"set"+n}},{});return new function(){function e(e,t,n){var r=new c,i=e.getTranslation();if(t){e=e._shiftless();var o=e._inverseTransform(i);r[n?"cx":"x"]=o.x,r[n?"cy":"y"]=o.y,i=null}if(!e.isIdentity()){var a=e.decompose();if(a){var s=[],u=a.rotation,l=a.scaling,h=a.skewing;i&&!i.isZero()&&s.push("translate("+b.point(i)+")"),u&&s.push("rotate("+b.number(u)+")"),m.isZero(l.x-1)&&m.isZero(l.y-1)||s.push("scale("+b.point(l)+")"),h&&h.x&&s.push("skewX("+b.number(h.x)+")"),h&&h.y&&s.push("skewY("+b.number(h.y)+")"),r.transform=s.join(" ")}else r.transform="matrix("+e.getValues().join(",")+")"}return r}function t(t,n){for(var r=e(t._matrix),i=t._children,o=ue.create("g",r,b),a=0,s=i.length;a<s;a++){var u=i[a],l=y(u,n);if(l)if(u.isClipMask()){var c=ue.create("clipPath");c.appendChild(l),p(u,c,"clip"),ue.set(o,{"clip-path":"url(#"+c.id+")"})}else o.appendChild(l)}return o}function n(t,n){var r=e(t._matrix,!0),i=t.getSize(),o=t.getImage();return r.x-=i.width/2,r.y-=i.height/2,r.width=i.width,r.height=i.height,r.href=n.embedImages===!1&&o&&o.src||t.toDataURL(),ue.create("image",r,b)}function r(t,n){var r=n.matchShapes;if(r){var o=t.toShape(!1);if(o)return i(o,n)}var a,s=t._segments,u=s.length,l=e(t._matrix);if(r&&u>=2&&!t.hasHandles())if(u>2){a=t._closed?"polygon":"polyline";for(var c=[],h=0;h<u;h++)c.push(b.point(s[h]._point));l.points=c.join(" ")}else{a="line";var f=s[0]._point,p=s[1]._point;l.set({x1:f.x,y1:f.y,x2:p.x,y2:p.y})}else a="path",l.d=t.getPathData(null,n.precision);return ue.create(a,l,b)}function i(t){var n=t._type,r=t._radius,i=e(t._matrix,!0,"rectangle"!==n);if("rectangle"===n){n="rect";var o=t._size,a=o.width,s=o.height;i.x-=a/2,i.y-=s/2,i.width=a,i.height=s,r.isZero()&&(r=null)}return r&&("circle"===n?i.r=r:(i.rx=r.width,i.ry=r.height)),ue.create(n,i,b)}function o(t,n){var r=e(t._matrix),i=t.getPathData(null,n.precision);return i&&(r.d=i),ue.create("path",r,b)}function a(t,n){var r=e(t._matrix,!0),i=t._definition,o=f(i,"symbol"),a=i._item,s=a.getBounds();return o||(o=ue.create("symbol",{viewBox:b.rectangle(s)}),o.appendChild(y(a,n)),p(i,o,"symbol")),r.href="#"+o.id,r.x+=s.x,r.y+=s.y,r.width=s.width,r.height=s.height,r.overflow="visible",ue.create("use",r,b)}function s(e){var t=f(e,"color");if(!t){var n,r=e.getGradient(),i=r._radial,o=e.getOrigin(),a=e.getDestination();if(i){n={cx:o.x,cy:o.y,r:o.getDistance(a)};var s=e.getHighlight();s&&(n.fx=s.x,n.fy=s.y)}else n={x1:o.x,y1:o.y,x2:a.x,y2:a.y};n.gradientUnits="userSpaceOnUse",t=ue.create((i?"radial":"linear")+"Gradient",n,b);for(var u=r._stops,l=0,c=u.length;l<c;l++){var h=u[l],d=h._color,m=d.getAlpha();n={offset:h._offset||l/(c-1)},d&&(n["stop-color"]=d.toCSS(!0)),m<1&&(n["stop-opacity"]=m),t.appendChild(ue.create("stop",n,b))}p(e,t,"color")}return"url(#"+t.id+")"}function l(t){var n=ue.create("text",e(t._matrix,!0),b);return n.textContent=t._content,n}function h(e,t,n){var r={},i=!n&&e.getParent(),o=[];return null!=e._name&&(r.id=e._name),c.each(le,function(t){var n=t.get,a=t.type,u=e[n]();if(t.exportFilter?t.exportFilter(e,u):!i||!c.equals(i[n](),u)){if("color"===a&&null!=u){var l=u.getAlpha();l<1&&(r[t.attribute+"-opacity"]=l)}"style"===a?o.push(t.attribute+": "+u):r[t.attribute]=null==u?"none":"color"===a?u.gradient?s(u,e):u.toCSS(!0):"array"===a?u.join(","):"lookup"===a?t.toSVG[u]:u}}),o.length&&(r.style=o.join(";")),1===r.opacity&&delete r.opacity,e._visible||(r.visibility="hidden"),ue.set(t,r,b)}function f(e,t){x||(x={ids:{},svgs:{}});var n=e._id||e.__id||(e.__id=v.get("svg"));return e&&x.svgs[t+"-"+n]}function p(e,t,n){x||f();var r=x.ids[n]=(x.ids[n]||0)+1;t.id=n+"-"+r,x.svgs[n+"-"+(e._id||e.__id)]=t}function g(e,t){var n=e,r=null;if(x){n="svg"===e.nodeName.toLowerCase()&&e;for(var i in x.svgs)r||(n||(n=ue.create("svg"),n.appendChild(e)),r=n.insertBefore(ue.create("defs"),n.firstChild)),r.appendChild(x.svgs[i]);x=null}return t.asString?(new u.XMLSerializer).serializeToString(n):n}function y(e,t,n){var r=M[e._class],i=r&&r(e,t);if(i){var o=t.onExport;o&&(i=o(e,i,t)||i);var a=JSON.stringify(e._data);a&&"{}"!==a&&"null"!==a&&i.setAttribute("data-paper-data",a)}return i&&h(e,i,n)}function _(e){return e||(e={}),b=new d(e.precision),e}var b,x,M={Group:t,Layer:t,Raster:n,Path:r,Shape:i,CompoundPath:o,SymbolItem:a,PointText:l};S.inject({exportSVG:function(e){return e=_(e),g(y(this,e,!0),e)}}),C.inject({exportSVG:function(t){t=_(t);var n=this._children,r=this.getView(),i=c.pick(t.bounds,"view"),o=t.matrix||"view"===i&&r._matrix,a=o&&E.read([o]),s="view"===i?new w([0,0],r.getViewSize()):"content"===i?S._getBounds(n,a,{stroke:!0}):w.read([i],0,{readNull:!0}),u={version:"1.1",xmlns:ue.svg,"xmlns:xlink":ue.xlink};s&&(u.width=s.width,u.height=s.height,(s.x||s.y)&&(u.viewBox=b.rectangle(s)));var l=ue.create("svg",u,b),h=l;a&&!a.isIdentity()&&(h=l.appendChild(ue.create("g",e(a),b)));for(var f=0,p=n.length;f<p;f++)h.appendChild(y(n[f],t,!0));return g(l,t)}})},new function(){function e(e,t,n,r,i){var o=ue.get(e,t),a=null==o?r?null:n?"":0:n?o:parseFloat(o);return/%\s*$/.test(o)?a/100*(i?1:M[/x|^width/.test(t)?"width":"height"]):a}function t(t,n,r,i,o){return n=e(t,n||"x",!1,i,o),r=e(t,r||"y",!1,i,o),!i||null!=n&&null!=r?new g(n,r):null}function n(t,n,r,i,o){return n=e(t,n||"width",!1,i,o),r=e(t,r||"height",!1,i,o),!i||null!=n&&null!=r?new _(n,r):null}function r(e,t,n){return"none"===e?null:"number"===t?parseFloat(e):"array"===t?e?e.split(/[\s,]+/g).map(parseFloat):[]:"color"===t?y(e)||e:"lookup"===t?n[e]:e}function i(e,t,n,r){var i=e.childNodes,o="clippath"===t,a="defs"===t,s=new T,u=s._project,l=u._currentStyle,c=[];if(o||a||(s=v(s,e,r),u._currentStyle=s._style.clone()),r)for(var h=e.querySelectorAll("defs"),f=0,p=h.length;f<p;f++)b(h[f],n,!1);for(var f=0,p=i.length;f<p;f++){var d,m=i[f];1!==m.nodeType||/^defs$/i.test(m.nodeName)||!(d=b(m,n,!1))||d instanceof k||c.push(d)}return s.addChildren(c),o&&(s=v(s.reduce(),e,r)),u._currentStyle=l,(o||a)&&(s.remove(),s=null),s}function a(e,t){for(var n=e.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),r=[],i=0,o=n.length;i<o;i+=2)r.push(new g(parseFloat(n[i]),parseFloat(n[i+1])));var a=new U(r);return"polygon"===t&&a.closePath(),a}function h(e){return B.create(e.getAttribute("d"))}function f(n,r){var i,o=(e(n,"href",!0)||"").substring(1),a="radialgradient"===r;if(o)i=P[o].getGradient(),i._radial^a&&(i=i.clone(),i._radial=a);else{for(var s=n.childNodes,u=[],l=0,c=s.length;l<c;l++){var h=s[l];1===h.nodeType&&u.push(v(new X,h))}i=new q(u,a)}var f,p,d,m="userSpaceOnUse"!==e(n,"gradientUnits",!0);a?(f=t(n,"cx","cy",!1,m),p=f.add(e(n,"r",!1,!1,m),0),d=t(n,"fx","fy",!0,m)):(f=t(n,"x1","y1",!1,m),p=t(n,"x2","y2",!1,m));var g=v(new W(i,f,p,d),n);return g._scaleToBounds=m,null}function p(e,t,n,r){if(e.transform){for(var i=(r.getAttribute(n)||"").split(/\)\s*/g),o=new E,a=0,s=i.length;a<s;a++){var u=i[a];if(!u)break;for(var l=u.split(/\(\s*/),c=l[0],h=l[1].split(/[\s,]+/g),f=0,p=h.length;f<p;f++)h[f]=parseFloat(h[f]);switch(c){case"matrix":o.append(new E(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":o.rotate(h[0],h[1],h[2]);break;case"translate":o.translate(h[0],h[1]);break;case"scale":o.scale(h);break;case"skewX":o.skew(h[0],0);break;case"skewY":o.skew(0,h[0])}}e.transform(o)}}function d(e,t,n){var r="fill-opacity"===n?"getFillColor":"getStrokeColor",i=e[r]&&e[r]();i&&i.setAlpha(parseFloat(t))}function m(e,t,n){var r=e.attributes[t],i=r&&r.value;if(!i){var o=c.camelize(t);i=e.style[o],i||n.node[o]===n.parent[o]||(i=n.node[o])}return i?"none"===i?null:i:s}function v(e,t,n){var r=t.parentNode,i={node:K.getStyles(t)||{},parent:!n&&!/^defs$/i.test(r.tagName)&&K.getStyles(r)||{}};return c.each(L,function(n,r){var o=m(t,r,i);e=o!==s&&n(e,o,r,t,i)||e}),e}function y(e){var t=e&&e.match(/\((?:["'#]*)([^"')]+)/),n=t&&P[t[1].replace(u.location.href.split("#")[0]+"#","")];return n&&n._scaleToBounds&&(n=n.clone(),n._scaleToBounds=!0),n}function b(e,t,r){var i,a,s,u=e.nodeName.toLowerCase(),h="#document"!==u,f=l.body;r&&h&&(M=n(e,null,null,!0)||o.getView().getSize(),i=ue.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),a=e.parentNode,s=e.nextSibling,i.appendChild(e),f.appendChild(i));var p=o.settings,d=p.applyMatrix,m=p.insertItems;p.applyMatrix=!1,p.insertItems=!1;var g=R[u],y=g&&g(e,u,t,r)||null;if(p.insertItems=m,p.applyMatrix=d,y){!h||y instanceof T||(y=v(y,e,r));var _=t.onImport,b=h&&e.getAttribute("data-paper-data");_&&(y=_(e,y,t)||y),t.expandShapes&&y instanceof O&&(y.remove(),y=y.toPath()),b&&(y._data=JSON.parse(b))}return i&&(f.removeChild(i),a&&(s?a.insertBefore(e,s):a.appendChild(e))),r&&(P={},y&&c.pick(t.applyMatrix,d)&&y.matrix.apply(!0,!0)),y}function x(e,t,n){function r(r){try{var l="object"==typeof r?r:(new u.DOMParser).parseFromString(r,"image/svg+xml");if(!l.nodeName)throw l=null,new Error("Unsupported SVG source: "+e);o=a,c=b(l,t,!0),t&&t.insert===!1||n._insertItem(s,c);var h=t.onLoad;h&&h(c,r)}catch(f){i(f)}}function i(e,n){var r=t.onError;if(!r)throw new Error(e);r(e,n)}if(!e)return null;t="function"==typeof t?{onLoad:t}:t||{};var a=o,c=null;if("string"!=typeof e||/^.*</.test(e)){if("undefined"!=typeof File&&e instanceof File){var h=new FileReader;return h.onload=function(){r(h.result)},h.onerror=function(){i(h.error)},h.readAsText(e)}r(e)}else{var f=l.getElementById(e);f?r(f):oe.request({url:e,async:!0,onLoad:r,onError:i})}return c}var M,P={},R={"#document":function(e,t,n,r){for(var i=e.childNodes,o=0,a=i.length;o<a;o++){var s=i[o];if(1===s.nodeType)return b(s,n,r)}},g:i,svg:i,clippath:i,polygon:a,polyline:a,path:h,lineargradient:f,radialgradient:f,image:function(r){var i=new A(e(r,"href",!0));return i.on("load",function(){var e=n(r);this.setSize(e);var i=this._matrix._transformPoint(t(r).add(e.divide(2)));this.translate(i)}),i},symbol:function(e,t,n,r){return new k(i(e,t,n,r),(!0))},defs:i,use:function(n){var r=(e(n,"href",!0)||"").substring(1),i=P[r],o=t(n);return i?i instanceof k?i.place(o):i.clone().translate(o):null},circle:function(n){return new O.Circle(t(n,"cx","cy"),e(n,"r"))},ellipse:function(e){return new O.Ellipse({center:t(e,"cx","cy"),radius:n(e,"rx","ry")})},rect:function(e){return new O.Rectangle(new w(t(e),n(e)),n(e,"rx","ry"))},line:function(e){return new U.Line(t(e,"x1","y1"),t(e,"x2","y2"))},text:function(e){var n=new H(t(e).add(t(e,"dx","dy")));return n.setContent(e.textContent.trim()||""),n}},L=c.set(c.each(le,function(e){this[e.attribute]=function(t,n){if(t[e.set]&&(t[e.set](r(n,e.type,e.fromSVG)),"color"===e.type)){var i=t[e.get]();if(i){if(i._scaleToBounds){var o=t.getBounds();i.transform((new E).translate(o.getPoint()).scale(o.getSize()))}t instanceof O&&i.transform((new E).translate(t.getPosition(!0).negate()))}}}},{}),{id:function(e,t){P[t]=e,e.setName&&e.setName(t)},"clip-path":function(e,t){var n=y(t);if(n){if(n=n.clone(),n.setClipMask(!0),!(e instanceof T))return new T(n,e);e.insertChild(0,n)}},gradientTransform:p,transform:p,"fill-opacity":d,"stroke-opacity":d,visibility:function(e,t){e.setVisible&&e.setVisible("visible"===t)},display:function(e,t){e.setVisible&&e.setVisible(null!==t)},"stop-color":function(e,t){e.setColor&&e.setColor(t)},"stop-opacity":function(e,t){e._color&&e._color.setAlpha(parseFloat(t))},offset:function(e,t){if(e.setOffset){var n=t.match(/(.*)%$/);e.setOffset(n?n[1]/100:parseFloat(t))}},viewBox:function(e,t,i,o,a){var s,u,l=new w(r(t,"array")),c=n(o,null,null,!0);if(e instanceof T){var h=c?c.divide(l.getSize()):1,u=(new E).scale(h).translate(l.getPoint().negate());s=e}else e instanceof k&&(c&&l.setSize(c),s=e._item);if(s){if("visible"!==m(o,"overflow",a)){var f=new O.Rectangle(l);f.setClipMask(!0),s.addChild(f)}u&&s.transform(u)}}});S.inject({importSVG:function(e,t){return x(e,t,this)}}),C.inject({importSVG:function(e,t){return this.activate(),x(e,t,this)}})},c.exports.PaperScript=function(){function t(e,t,n){var r=y[t];if(e&&e[r]){var i=e[r](n);return"!="===t?!i:i}switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":return e%n;case"==":return e==n;case"!=":return e!=n}}function n(e,t){var n=b[e];if(n&&t&&t[n])return t[n]();switch(e){case"+":return+t;case"-":return-t}}function r(e,t){return v.acorn.parse(e,t)}function i(e,t){function n(e){for(var t=0,n=p.length;t<n;t++){var r=p[t];if(r[0]>=e)break;e+=r[1]}return e}function i(t){return e.substring(n(t.range[0]),n(t.range[1]))}function a(t,r){return e.substring(n(t.range[1]),n(r.range[0]))}function s(t,r){for(var i=n(t.range[0]),o=n(t.range[1]),a=0,s=p.length-1;s>=0;s--)if(i>p[s][0]){a=s+1;break}p.splice(a,0,[i,r.length-o+i]),e=e.substring(0,i)+r+e.substring(o)}function c(e,t){if(e){for(var n in e)if("range"!==n&&"loc"!==n){var r=e[n];if(Array.isArray(r))for(var o=0,u=r.length;o<u;o++)c(r[o],e);else r&&"object"==typeof r&&c(r,e)}switch(e.type){case"UnaryExpression":if(e.operator in b&&"Literal"!==e.argument.type){var l=i(e.argument);s(e,'$__("'+e.operator+'", '+l+")")}break;case"BinaryExpression":if(e.operator in y&&"Literal"!==e.left.type){var h=i(e.left),f=i(e.right),p=a(e.left,e.right),d=e.operator;s(e,"__$__("+h+","+p.replace(new RegExp("\\"+d),'"'+d+'"')+", "+f+")")}break;case"UpdateExpression":case"AssignmentExpression":var m=t&&t.type;if(!("ForStatement"===m||"BinaryExpression"===m&&/^[=!<>]/.test(t.operator)||"MemberExpression"===m&&t.computed))if("UpdateExpression"===e.type){var l=i(e.argument),v="__$__("+l+', "'+e.operator[0]+'", 1)',g=l+" = "+v;e.prefix||"AssignmentExpression"!==m&&"VariableDeclarator"!==m||(i(t.left||t.id)===l&&(g=v),g=l+"; "+g),s(e,g)}else if(/^.=$/.test(e.operator)&&"Literal"!==e.left.type){var h=i(e.left),f=i(e.right);s(e,h+" = __$__("+h+', "'+e.operator[0]+'", '+f+")")}}}}function h(e){var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(e=(Math.abs(e)<<1)+(e<0?1:0);e||!t;){var r=31&e;e>>=5,e&&(r|=32),t+=n[r]}return t}if(!e)return"";t=t||{};var f,p=[],d=t.url||"",m=o.agent,v=m.versionNumber,g=!1,_=t.sourceMaps,w=t.source||e,x=/\r\n|\n|\r/gm,E=t.offset||0;if(_&&(m.chrome&&v>=30||m.webkit&&v>=537.76||m.firefox&&v>=23||m.node)){if(m.node)E-=2;else if(u&&d&&!u.location.href.indexOf(d)){var M=l.getElementsByTagName("html")[0].innerHTML;E=M.substr(0,M.indexOf(e)+1).match(x).length+1}g=E>0&&!(m.chrome&&v>=36||m.safari&&v>=600||m.firefox&&v>=40||m.node);var C=["AA"+h(g?0:E)+"A"];C.length=(e.match(x)||[]).length+1+(g?E:0),f={version:3,file:d,names:[],mappings:C.join(";AACA"),sourceRoot:"",sources:[d],sourcesContent:[w]}}return c(r(e,{ranges:!0})),f&&(g&&(e=new Array(E+1).join("\n")+e),/^(inline|both)$/.test(_)&&(e+="\n//# sourceMappingURL=data:application/json;base64,"+u.btoa(unescape(encodeURIComponent(JSON.stringify(f))))),e+="\n//# sourceURL="+(d||"paperscript")),{url:d,source:w,code:e,map:f}}function a(e,r,a){function s(t,n){for(var r in t)!n&&/^_/.test(r)||!new RegExp("([\\b\\s\\W]|^)"+r.replace(/\$/g,"\\$")+"\\b").test(e)||(m.push(r),v.push(t[r]))}o=r;var u,h=r.getView(),f=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(e)&&!/\bnew\s+Tool\b/.test(e)?new ie:null,p=f?f._events:[],d=["onFrame","onResize"].concat(p),m=[],v=[],y="object"==typeof e?e:i(e,a);e=y.code,s({__$__:t,$__:n,paper:r,view:h,tool:f},!0),s(r),d=c.each(d,function(t){new RegExp("\\s+"+t+"\\b").test(e)&&(m.push(t),this.push(t+": "+t))},[]).join(", "),d&&(e+="\nreturn { "+d+" };");var _=o.agent;if(l&&(_.chrome||_.firefox&&_.versionNumber<40)){var b=l.createElement("script"),w=l.head||l.getElementsByTagName("head")[0];_.firefox&&(e="\n"+e),b.appendChild(l.createTextNode("paper._execute = function("+m+") {"+e+"\n}")),w.appendChild(b),u=o._execute,delete o._execute,w.removeChild(b)}else u=Function(m,e);var x=u.apply(r,v)||{};return c.each(p,function(e){var t=x[e];t&&(f[e]=t)}),h&&(x.onResize&&h.setOnResize(x.onResize),h.emit("resize",{size:h.size,delta:new g}),x.onFrame&&h.setOnFrame(x.onFrame),h.requestUpdate()),y}function s(e){if(/^text\/(?:x-|)paperscript$/.test(e.type)&&"true"!==f.getAttribute(e,"ignore")){var t=f.getAttribute(e,"canvas"),n=l.getElementById(t),r=e.src||e.getAttribute("data-src"),i=f.hasAttribute(e,"async"),o="data-paper-scope";if(!n)throw new Error('Unable to find canvas with id "'+t+'"');var s=f.get(n.getAttribute(o))||(new f).setup(n);return n.setAttribute(o,s._id),r?oe.request({url:r,async:i,mimeType:"text/plain",onLoad:function(e){a(e,s,r)}}):a(e.innerHTML,s,e.baseURI),e.setAttribute("data-paper-ignore","true"),s}}function h(){c.each(l&&l.getElementsByTagName("script"),s)}function p(e){return e?s(e):h()}var d,m,v=this;!function(t,n){return"object"==typeof d&&"object"==typeof e?n(d):"function"==typeof m&&m.amd?m(["exports"],n):void n(t.acorn||(t.acorn={}))}(this,function(e){"use strict";function t(e){he=e||{};for(var t in me)Object.prototype.hasOwnProperty.call(he,t)||(he[t]=me[t]);de=he.sourceFile||null}function n(e,t){var n=ve(fe,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=ge,r}function r(e){function t(e){if(1==e.length)return n+="return str === "+JSON.stringify(e[0])+";";n+="switch(str){";for(var t=0;t<e.length;++t)n+="case "+JSON.stringify(e[t])+":";n+="return true}return false;"}e=e.split(" ");var n="",r=[];e:for(var i=0;i<e.length;++i){for(var o=0;o<r.length;++o)if(r[o][0].length==e[i].length){r[o].push(e[i]);continue e}r.push([e[i]])}if(r.length>3){r.sort(function(e,t){return t.length-e.length}),n+="switch(str.length){";for(var i=0;i<r.length;++i){var a=r[i];n+="case "+a[0].length+":",t(a)}n+="}"}else t(e);return new Function("str",n)}function i(){this.line=Ce,this.column=ge-Se}function o(){Ce=1,ge=Se=0,Me=!0,l()}function a(e,t){_e=ge,he.locations&&(we=new i),xe=e,l(),Ee=t,Me=e.beforeExpr}function s(){var e=he.onComment&&he.locations&&new i,t=ge,r=fe.indexOf("*/",ge+=2);if(-1===r&&n(ge-2,"Unterminated comment"),ge=r+2,he.locations){Zt.lastIndex=t;for(var o;(o=Zt.exec(fe))&&o.index<ge;)++Ce,Se=o.index+o[0].length}he.onComment&&he.onComment(!0,fe.slice(t+2,r),t,ge,e,he.locations&&new i)}function u(){for(var e=ge,t=he.onComment&&he.locations&&new i,n=fe.charCodeAt(ge+=2);pe>ge&&10!==n&&13!==n&&8232!==n&&8233!==n;)++ge,n=fe.charCodeAt(ge);he.onComment&&he.onComment(!1,fe.slice(e+2,ge),e,ge,t,he.locations&&new i)}function l(){for(;pe>ge;){var e=fe.charCodeAt(ge);if(32===e)++ge;else if(13===e){++ge;var t=fe.charCodeAt(ge);10===t&&++ge,he.locations&&(++Ce,Se=ge)}else if(10===e||8232===e||8233===e)++ge,he.locations&&(++Ce,Se=ge);else if(e>8&&14>e)++ge;else if(47===e){var t=fe.charCodeAt(ge+1);if(42===t)s();else{if(47!==t)break;u()}}else if(160===e)++ge;else{if(!(e>=5760&&Ht.test(String.fromCharCode(e))))break;++ge}}}function c(){var e=fe.charCodeAt(ge+1);return e>=48&&57>=e?M(!0):(++ge,a(bt))}function h(){var e=fe.charCodeAt(ge+1);return Me?(++ge,w()):61===e?b(Mt,2):b(xt,1)}function f(){var e=fe.charCodeAt(ge+1);return 61===e?b(Mt,2):b(jt,1)}function p(e){var t=fe.charCodeAt(ge+1);return t===e?b(124===e?Tt:Pt,2):61===t?b(Mt,2):b(124===e?Ot:Rt,1)}function d(){var e=fe.charCodeAt(ge+1);return 61===e?b(Mt,2):b(At,1)}function m(e){var t=fe.charCodeAt(ge+1);return t===e?45==t&&62==fe.charCodeAt(ge+2)&&Kt.test(fe.slice(Pe,ge))?(ge+=3,u(),l(),_()):b(Ct,2):61===t?b(Mt,2):b(It,1)}function v(e){var t=fe.charCodeAt(ge+1),n=1;return t===e?(n=62===e&&62===fe.charCodeAt(ge+2)?3:2,61===fe.charCodeAt(ge+n)?b(Mt,n+1):b(Dt,n)):33==t&&60==e&&45==fe.charCodeAt(ge+2)&&45==fe.charCodeAt(ge+3)?(ge+=4,u(),l(),_()):(61===t&&(n=61===fe.charCodeAt(ge+2)?3:2),b(Lt,n))}function g(e){var t=fe.charCodeAt(ge+1);return 61===t?b(kt,61===fe.charCodeAt(ge+2)?3:2):b(61===e?Et:St,1)}function y(e){switch(e){case 46:return c();case 40:return++ge,a(mt);case 41:return++ge,a(vt);case 59:return++ge,a(yt);case 44:return++ge,a(gt);case 91:return++ge,a(ht);case 93:return++ge,a(ft);case 123:return++ge,a(pt);case 125:return++ge,a(dt);case 58:return++ge,a(_t);case 63:return++ge,a(wt);case 48:var t=fe.charCodeAt(ge+1);if(120===t||88===t)return E();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return M(!1);case 34:case 39:return C(e);case 47:return h(e);case 37:case 42:return f();case 124:case 38:return p(e);case 94:return d();case 43:case 45:return m(e);case 60:case 62:return v(e);case 61:case 33:return g(e);case 126:return b(St,1)}return!1}function _(e){if(e?ge=ye+1:ye=ge,he.locations&&(be=new i),e)return w();if(ge>=pe)return a(Be);var t=fe.charCodeAt(ge);if(Qt(t)||92===t)return P();var r=y(t);if(r===!1){var o=String.fromCharCode(t);if("\\"===o||Xt.test(o))return P();n(ge,"Unexpected character '"+o+"'")}return r}function b(e,t){var n=fe.slice(ge,ge+t);ge+=t,a(e,n)}function w(){for(var e,t,r="",i=ge;;){ge>=pe&&n(i,"Unterminated regular expression");var o=fe.charAt(ge);if(Kt.test(o)&&n(i,"Unterminated regular expression"),e)e=!1;else{if("["===o)t=!0;else if("]"===o&&t)t=!1;else if("/"===o&&!t)break;e="\\"===o}++ge}var r=fe.slice(i,ge);++ge;var s=T();s&&!/^[gmsiy]*$/.test(s)&&n(i,"Invalid regexp flag");try{var u=new RegExp(r,s)}catch(l){l instanceof SyntaxError&&n(i,l.message),n(l)}return a(Ie,u)}function x(e,t){for(var n=ge,r=0,i=0,o=null==t?1/0:t;o>i;++i){var a,s=fe.charCodeAt(ge);if(a=s>=97?s-97+10:s>=65?s-65+10:s>=48&&57>=s?s-48:1/0,a>=e)break;++ge,r=r*e+a}return ge===n||null!=t&&ge-n!==t?null:r}function E(){ge+=2;var e=x(16);return null==e&&n(ye+2,"Expected hexadecimal number"),Qt(fe.charCodeAt(ge))&&n(ge,"Identifier directly after number"),a(De,e)}function M(e){var t=ge,r=!1,i=48===fe.charCodeAt(ge);e||null!==x(10)||n(t,"Invalid number"),46===fe.charCodeAt(ge)&&(++ge,x(10),r=!0);var o=fe.charCodeAt(ge);69!==o&&101!==o||(o=fe.charCodeAt(++ge),43!==o&&45!==o||++ge,null===x(10)&&n(t,"Invalid number"),r=!0),Qt(fe.charCodeAt(ge))&&n(ge,"Identifier directly after number");var s,u=fe.slice(t,ge);return r?s=parseFloat(u):i&&1!==u.length?/[89]/.test(u)||ke?n(t,"Invalid number"):s=parseInt(u,8):s=parseInt(u,10),a(De,s)}function C(e){ge++;for(var t="";;){ge>=pe&&n(ye,"Unterminated string constant");var r=fe.charCodeAt(ge);if(r===e)return++ge,a(je,t);if(92===r){r=fe.charCodeAt(++ge);var i=/^[0-7]+/.exec(fe.slice(ge,ge+3));for(i&&(i=i[0]);i&&parseInt(i,8)>255;)i=i.slice(0,-1);if("0"===i&&(i=null),++ge,i)ke&&n(ge-2,"Octal literal in strict mode"),t+=String.fromCharCode(parseInt(i,8)),ge+=i.length-1;else switch(r){case 110:t+="\n";break;case 114:t+="\r";break;case 120:t+=String.fromCharCode(S(2));break;case 117:t+=String.fromCharCode(S(4));break;case 85:t+=String.fromCharCode(S(8));break;case 116:t+="\t";break;case 98:t+="\b";break;case 118:t+="\v";break;case 102:t+="\f";break;case 48:t+="\0";break;case 13:10===fe.charCodeAt(ge)&&++ge;case 10:he.locations&&(Se=ge,++Ce);break;default:t+=String.fromCharCode(r)}}else 13!==r&&10!==r&&8232!==r&&8233!==r||n(ye,"Unterminated string constant"),t+=String.fromCharCode(r),++ge}}function S(e){var t=x(16,e);return null===t&&n(ye,"Bad character escape sequence"),t}function T(){Bt=!1;for(var e,t=!0,r=ge;;){var i=fe.charCodeAt(ge);if(Jt(i))Bt&&(e+=fe.charAt(ge)),++ge;else{if(92!==i)break;Bt||(e=fe.slice(r,ge)),Bt=!0,117!=fe.charCodeAt(++ge)&&n(ge,"Expecting Unicode escape sequence \\uXXXX"),++ge;var o=S(4),a=String.fromCharCode(o);a||n(ge-1,"Invalid Unicode escape"),(t?Qt(o):Jt(o))||n(ge-4,"Invalid Unicode escape"),e+=a}t=!1}return Bt?e:fe.slice(r,ge)}function P(){var e=T(),t=Ne;return!Bt&&Gt(e)&&(t=ct[e]),a(t,e)}function O(){Te=ye,Pe=_e,Oe=we,_()}function A(e){if(ke=e,ge=ye,he.locations)for(;Se>ge;)Se=fe.lastIndexOf("\n",Se-2)+1,--Ce;l(),_()}function R(){this.type=null,this.start=ye,this.end=null}function k(){this.start=be,this.end=null,null!==de&&(this.source=de)}function L(){var e=new R;return he.locations&&(e.loc=new k),he.directSourceFile&&(e.sourceFile=he.directSourceFile),he.ranges&&(e.range=[ye,0]),e}function D(e){var t=new R;return t.start=e.start,he.locations&&(t.loc=new k,t.loc.start=e.loc.start),he.ranges&&(t.range=[e.range[0],0]),t}function I(e,t){return e.type=t,e.end=Pe,he.locations&&(e.loc.end=Oe),he.ranges&&(e.range[1]=Pe),e}function j(e){return he.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.value}function N(e){return xe===e?(O(),!0):void 0}function B(){return!he.strictSemicolons&&(xe===Be||xe===dt||Kt.test(fe.slice(Pe,ye)))}function U(){N(yt)||B()||V()}function F(e){xe===e?O():V()}function V(){n(ye,"Unexpected token")}function z(e){"Identifier"!==e.type&&"MemberExpression"!==e.type&&n(e.start,"Assigning to rvalue"),ke&&"Identifier"===e.type&&zt(e.name)&&n(e.start,"Assigning to "+e.name+" in strict mode")}function G(e){Te=Pe=ge,he.locations&&(Oe=new i),Ae=ke=null,Re=[],_();var t=e||L(),n=!0;for(e||(t.body=[]);xe!==Be;){var r=H();t.body.push(r),n&&j(r)&&A(!0),n=!1}return I(t,"Program")}function H(){(xe===xt||xe===Mt&&"/="==Ee)&&_(!0);var e=xe,t=L();switch(e){case Ue:case ze:O();var r=e===Ue;N(yt)||B()?t.label=null:xe!==Ne?V():(t.label=ce(),U());for(var i=0;i<Re.length;++i){var o=Re[i];if(null==t.label||o.name===t.label.name){if(null!=o.kind&&(r||"loop"===o.kind))break;if(t.label&&r)break}}return i===Re.length&&n(t.start,"Unsyntactic "+e.keyword),I(t,r?"BreakStatement":"ContinueStatement");case Ge:return O(),U(),I(t,"DebuggerStatement");case We:return O(),Re.push($t),t.body=H(),Re.pop(),F(nt),t.test=W(),U(),I(t,"DoWhileStatement");case Ye:if(O(),Re.push($t),F(mt),xe===yt)return X(t,null);if(xe===tt){var a=L();return O(),K(a,!0),I(a,"VariableDeclaration"),1===a.declarations.length&&N(lt)?Y(t,a):X(t,a)}var a=Z(!1,!0);return N(lt)?(z(a),Y(t,a)):X(t,a);case Ke:return O(),ue(t,!0);case Ze:return O(),t.test=W(),t.consequent=H(),t.alternate=N(qe)?H():null,I(t,"IfStatement");case Qe:return Ae||he.allowReturnOutsideFunction||n(ye,"'return' outside of function"),O(),N(yt)||B()?t.argument=null:(t.argument=Z(),U()),I(t,"ReturnStatement");case Je:O(),t.discriminant=W(),t.cases=[],F(pt),Re.push(en);for(var s,u;xe!=dt;)if(xe===Fe||xe===He){var l=xe===Fe;s&&I(s,"SwitchCase"),t.cases.push(s=L()),s.consequent=[],O(),l?s.test=Z():(u&&n(Te,"Multiple default clauses"),u=!0,s.test=null),F(_t)}else s||V(),s.consequent.push(H());return s&&I(s,"SwitchCase"),O(),Re.pop(),I(t,"SwitchStatement");case $e:return O(),Kt.test(fe.slice(Pe,ye))&&n(Pe,"Illegal newline after throw"),t.argument=Z(),U(),I(t,"ThrowStatement");case et:if(O(),t.block=q(),t.handler=null,xe===Ve){var c=L();O(),F(mt),c.param=ce(),ke&&zt(c.param.name)&&n(c.param.start,"Binding "+c.param.name+" in strict mode"),F(vt),c.guard=null,c.body=q(),t.handler=I(c,"CatchClause")}return t.guardedHandlers=Le,t.finalizer=N(Xe)?q():null,t.handler||t.finalizer||n(t.start,"Missing catch or finally clause"),I(t,"TryStatement");case tt:return O(),K(t),U(),I(t,"VariableDeclaration");case nt:return O(),t.test=W(),Re.push($t),t.body=H(),Re.pop(),I(t,"WhileStatement");case rt:return ke&&n(ye,"'with' in strict mode"),O(),t.object=W(),t.body=H(),I(t,"WithStatement");case pt:return q();case yt:return O(),I(t,"EmptyStatement");default:var h=Ee,f=Z();if(e===Ne&&"Identifier"===f.type&&N(_t)){for(var i=0;i<Re.length;++i)Re[i].name===h&&n(f.start,"Label '"+h+"' is already declared");var p=xe.isLoop?"loop":xe===Je?"switch":null;return Re.push({name:h,kind:p}),t.body=H(),Re.pop(),t.label=f,I(t,"LabeledStatement")}return t.expression=f,U(),I(t,"ExpressionStatement")}}function W(){F(mt);var e=Z();return F(vt),e}function q(e){var t,n=L(),r=!0,i=!1;for(n.body=[],F(pt);!N(dt);){var o=H();n.body.push(o),r&&e&&j(o)&&(t=i,A(i=!0)),r=!1}return i&&!t&&A(!1),I(n,"BlockStatement")}function X(e,t){return e.init=t,F(yt),e.test=xe===yt?null:Z(),F(yt),e.update=xe===vt?null:Z(),F(vt),e.body=H(),Re.pop(),I(e,"ForStatement")}function Y(e,t){return e.left=t,e.right=Z(),F(vt),e.body=H(),Re.pop(),I(e,"ForInStatement")}function K(e,t){for(e.declarations=[],e.kind="var";;){var r=L();if(r.id=ce(),ke&&zt(r.id.name)&&n(r.id.start,"Binding "+r.id.name+" in strict mode"),r.init=N(Et)?Z(!0,t):null,e.declarations.push(I(r,"VariableDeclarator")),!N(gt))break}return e}function Z(e,t){var n=Q(t);if(!e&&xe===gt){var r=D(n);for(r.expressions=[n];N(gt);)r.expressions.push(Q(t));return I(r,"SequenceExpression")}return n}function Q(e){var t=J(e);if(xe.isAssign){var n=D(t);return n.operator=Ee,n.left=t,O(),n.right=Q(e),z(t),I(n,"AssignmentExpression")}return t}function J(e){var t=$(e);if(N(wt)){var n=D(t);return n.test=t,n.consequent=Z(!0),F(_t),n.alternate=Z(!0,e),I(n,"ConditionalExpression")}return t}function $(e){return ee(te(),-1,e)}function ee(e,t,n){var r=xe.binop;if(null!=r&&(!n||xe!==lt)&&r>t){var i=D(e);i.left=e,i.operator=Ee;var o=xe;O(),i.right=ee(te(),r,n);var a=I(i,o===Tt||o===Pt?"LogicalExpression":"BinaryExpression");return ee(a,t,n)}return e}function te(){if(xe.prefix){var e=L(),t=xe.isUpdate;return e.operator=Ee,e.prefix=!0,Me=!0,O(),e.argument=te(),t?z(e.argument):ke&&"delete"===e.operator&&"Identifier"===e.argument.type&&n(e.start,"Deleting local variable in strict mode"),
I(e,t?"UpdateExpression":"UnaryExpression")}for(var r=ne();xe.postfix&&!B();){var e=D(r);e.operator=Ee,e.prefix=!1,e.argument=r,z(r),O(),r=I(e,"UpdateExpression")}return r}function ne(){return re(ie())}function re(e,t){if(N(bt)){var n=D(e);return n.object=e,n.property=ce(!0),n.computed=!1,re(I(n,"MemberExpression"),t)}if(N(ht)){var n=D(e);return n.object=e,n.property=Z(),n.computed=!0,F(ft),re(I(n,"MemberExpression"),t)}if(!t&&N(mt)){var n=D(e);return n.callee=e,n.arguments=le(vt,!1),re(I(n,"CallExpression"),t)}return e}function ie(){switch(xe){case ot:var e=L();return O(),I(e,"ThisExpression");case Ne:return ce();case De:case je:case Ie:var e=L();return e.value=Ee,e.raw=fe.slice(ye,_e),O(),I(e,"Literal");case at:case st:case ut:var e=L();return e.value=xe.atomValue,e.raw=xe.keyword,O(),I(e,"Literal");case mt:var t=be,n=ye;O();var r=Z();return r.start=n,r.end=_e,he.locations&&(r.loc.start=t,r.loc.end=we),he.ranges&&(r.range=[n,_e]),F(vt),r;case ht:var e=L();return O(),e.elements=le(ft,!0,!0),I(e,"ArrayExpression");case pt:return ae();case Ke:var e=L();return O(),ue(e,!1);case it:return oe();default:V()}}function oe(){var e=L();return O(),e.callee=re(ie(),!0),N(mt)?e.arguments=le(vt,!1):e.arguments=Le,I(e,"NewExpression")}function ae(){var e=L(),t=!0,r=!1;for(e.properties=[],O();!N(dt);){if(t)t=!1;else if(F(gt),he.allowTrailingCommas&&N(dt))break;var i,o={key:se()},a=!1;if(N(_t)?(o.value=Z(!0),i=o.kind="init"):he.ecmaVersion>=5&&"Identifier"===o.key.type&&("get"===o.key.name||"set"===o.key.name)?(a=r=!0,i=o.kind=o.key.name,o.key=se(),xe!==mt&&V(),o.value=ue(L(),!1)):V(),"Identifier"===o.key.type&&(ke||r))for(var s=0;s<e.properties.length;++s){var u=e.properties[s];if(u.key.name===o.key.name){var l=i==u.kind||a&&"init"===u.kind||"init"===i&&("get"===u.kind||"set"===u.kind);l&&!ke&&"init"===i&&"init"===u.kind&&(l=!1),l&&n(o.key.start,"Redefinition of property")}}e.properties.push(o)}return I(e,"ObjectExpression")}function se(){return xe===De||xe===je?ie():ce(!0)}function ue(e,t){xe===Ne?e.id=ce():t?V():e.id=null,e.params=[];var r=!0;for(F(mt);!N(vt);)r?r=!1:F(gt),e.params.push(ce());var i=Ae,o=Re;if(Ae=!0,Re=[],e.body=q(!0),Ae=i,Re=o,ke||e.body.body.length&&j(e.body.body[0]))for(var a=e.id?-1:0;a<e.params.length;++a){var s=0>a?e.id:e.params[a];if((Vt(s.name)||zt(s.name))&&n(s.start,"Defining '"+s.name+"' in strict mode"),a>=0)for(var u=0;a>u;++u)s.name===e.params[u].name&&n(s.start,"Argument name clash in strict mode")}return I(e,t?"FunctionDeclaration":"FunctionExpression")}function le(e,t,n){for(var r=[],i=!0;!N(e);){if(i)i=!1;else if(F(gt),t&&he.allowTrailingCommas&&N(e))break;n&&xe===gt?r.push(null):r.push(Z(!0))}return r}function ce(e){var t=L();return e&&"everywhere"==he.forbidReserved&&(e=!1),xe===Ne?(!e&&(he.forbidReserved&&(3===he.ecmaVersion?Ut:Ft)(Ee)||ke&&Vt(Ee))&&-1==fe.slice(ye,_e).indexOf("\\")&&n(ye,"The keyword '"+Ee+"' is reserved"),t.name=Ee):e&&xe.keyword?t.name=xe.keyword:V(),Me=!1,O(),I(t,"Identifier")}e.version="0.5.0";var he,fe,pe,de;e.parse=function(e,n){return fe=String(e),pe=fe.length,t(n),o(),G(he.program)};var me=e.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},ve=e.getLineInfo=function(e,t){for(var n=1,r=0;;){Zt.lastIndex=r;var i=Zt.exec(e);if(!(i&&i.index<t))break;++n,r=i.index+i[0].length}return{line:n,column:t-r}};e.tokenize=function(e,n){function r(e){return Pe=_e,_(e),i.start=ye,i.end=_e,i.startLoc=be,i.endLoc=we,i.type=xe,i.value=Ee,i}fe=String(e),pe=fe.length,t(n),o();var i={};return r.jumpTo=function(e,t){if(ge=e,he.locations){Ce=1,Se=Zt.lastIndex=0;for(var n;(n=Zt.exec(fe))&&n.index<e;)++Ce,Se=n.index+n[0].length}Me=t,l()},r};var ge,ye,_e,be,we,xe,Ee,Me,Ce,Se,Te,Pe,Oe,Ae,Re,ke,Le=[],De={type:"num"},Ie={type:"regexp"},je={type:"string"},Ne={type:"name"},Be={type:"eof"},Ue={keyword:"break"},Fe={keyword:"case",beforeExpr:!0},Ve={keyword:"catch"},ze={keyword:"continue"},Ge={keyword:"debugger"},He={keyword:"default"},We={keyword:"do",isLoop:!0},qe={keyword:"else",beforeExpr:!0},Xe={keyword:"finally"},Ye={keyword:"for",isLoop:!0},Ke={keyword:"function"},Ze={keyword:"if"},Qe={keyword:"return",beforeExpr:!0},Je={keyword:"switch"},$e={keyword:"throw",beforeExpr:!0},et={keyword:"try"},tt={keyword:"var"},nt={keyword:"while",isLoop:!0},rt={keyword:"with"},it={keyword:"new",beforeExpr:!0},ot={keyword:"this"},at={keyword:"null",atomValue:null},st={keyword:"true",atomValue:!0},ut={keyword:"false",atomValue:!1},lt={keyword:"in",binop:7,beforeExpr:!0},ct={break:Ue,case:Fe,catch:Ve,continue:ze,debugger:Ge,default:He,do:We,else:qe,finally:Xe,for:Ye,function:Ke,if:Ze,return:Qe,switch:Je,throw:$e,try:et,var:tt,while:nt,with:rt,null:at,true:st,false:ut,new:it,in:lt,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:ot,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ht={type:"[",beforeExpr:!0},ft={type:"]"},pt={type:"{",beforeExpr:!0},dt={type:"}"},mt={type:"(",beforeExpr:!0},vt={type:")"},gt={type:",",beforeExpr:!0},yt={type:";",beforeExpr:!0},_t={type:":",beforeExpr:!0},bt={type:"."},wt={type:"?",beforeExpr:!0},xt={binop:10,beforeExpr:!0},Et={isAssign:!0,beforeExpr:!0},Mt={isAssign:!0,beforeExpr:!0},Ct={postfix:!0,prefix:!0,isUpdate:!0},St={prefix:!0,beforeExpr:!0},Tt={binop:1,beforeExpr:!0},Pt={binop:2,beforeExpr:!0},Ot={binop:3,beforeExpr:!0},At={binop:4,beforeExpr:!0},Rt={binop:5,beforeExpr:!0},kt={binop:6,beforeExpr:!0},Lt={binop:7,beforeExpr:!0},Dt={binop:8,beforeExpr:!0},It={binop:9,prefix:!0,beforeExpr:!0},jt={binop:10,beforeExpr:!0};e.tokTypes={bracketL:ht,bracketR:ft,braceL:pt,braceR:dt,parenL:mt,parenR:vt,comma:gt,semi:yt,colon:_t,dot:bt,question:wt,slash:xt,eq:Et,name:Ne,eof:Be,num:De,regexp:Ie,string:je};for(var Nt in ct)e.tokTypes["_"+Nt]=ct[Nt];var Bt,Ut=r("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ft=r("class enum extends super const export import"),Vt=r("implements interface let package private protected public static yield"),zt=r("eval arguments"),Gt=r("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ht=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Wt="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",qt="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Xt=new RegExp("["+Wt+"]"),Yt=new RegExp("["+Wt+qt+"]"),Kt=/[\n\r\u2028\u2029]/,Zt=/\r\n|[\n\r\u2028\u2029]/g,Qt=e.isIdentifierStart=function(e){return 65>e?36===e:91>e||(97>e?95===e:123>e||e>=170&&Xt.test(String.fromCharCode(e)))},Jt=e.isIdentifierChar=function(e){return 48>e?36===e:58>e||!(65>e)&&(91>e||(97>e?95===e:123>e||e>=170&&Yt.test(String.fromCharCode(e))))},$t={kind:"loop"},en={kind:"switch"}});var y={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},b={"-":"__negate","+":null},w=c.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(e){this["__"+e]="#"+e},{});return g.inject(w),_.inject(w),W.inject(w),u&&("complete"===l.readyState?setTimeout(h):Z.add(u,{load:h})),{compile:i,execute:a,load:p,parse:r}}.call(this),o=new(f.inject(c.exports,{enumerable:!0,Base:c,Numerical:m,Key:te,DomEvent:Z,DomElement:K,document:l,window:u,Symbol:k,PlacedSymbol:R})),o.agent.node&&n(382)(o),r=o,i="function"==typeof r?r.call(t,n,t,e):r,!(i!==s&&(e.exports=i)),o}.call(this,"object"==typeof self?self:null)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(15);t.default=r.PropTypes.shape({subscribe:r.PropTypes.func.isRequired,dispatch:r.PropTypes.func.isRequired,getState:r.PropTypes.func.isRequired})},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(t){}}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setCladding=t.setRoofing=t.setFrameWidth=t.setFrameHeight=t.setLength=t.getData=t.setData=void 0;var i=n(156),o=r(i),a=t.setData=function(e){return{type:"SET_DATA",payload:e}};t.getData=function(){return function(e){var t=window.location.hash.match(/\d+/)[0];o.default.get("http://localhost:3001/p/"+t+".json").then(function(t){e(a(t.data))}).catch(function(e){console.log(e)})}},t.setLength=function(e){return{type:"SET_LENGTH",payload:e}},t.setFrameHeight=function(e){return{type:"SET_FRAME_HEIGHT",payload:e}},t.setFrameWidth=function(e){return{type:"SET_FRAME_WIDTH",payload:e}},t.setRoofing=function(e){return{type:"SET_ROOFING",payload:e}},t.setCladding=function(e){return{type:"SET_CLADDING",payload:e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.frame=void 0;var i=n(97),o=r(i);o.default.setup();var a=function(){var e=new o.default.Path.Rectangle(10,10,100,100);return e.exportSVG({asString:!0,bounds:null})},s=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000",!(arguments.length>3&&void 0!==arguments[3])||arguments[3]),n=new o.default.Path;n.moveTo(e[0]);for(var r=1;r<e.length;r++)n.lineTo(e[r]);return t&&n.closePath(),n};t.frame=function(e,t){var n=100*e,r=100*t,i=[[0,r],[n/2,r/2],[n/2,0],[-n/2,0],[-n/2,r/2]],o=s(i);return o.exportSVG({asString:!1,bounds:null}).getAttribute("d")};t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.roofingTotalSelector=t.roofingAreaSelector=t.roofingMaterialSelector=t.roofingColorSelector=t.claddingTotalSelector=t.claddingAreaSelector=t.claddingMaterialSelector=t.claddingColorSelector=t.frameBoxCountSelector=t.bayCountSelector=t.buildingAreaSelector=t.frameSelector=void 0;var i=n(375),o=n(1),a=r(o),s=n(97),u=(r(s),n(101)),l=function(e){return e.building.length},c=function(e){return e.frame.width},h=function(e){return e.frame.height},f=(t.frameSelector=(0,i.createSelector)(c,h,function(e,t){return(0,u.frame)(e,t)}),t.buildingAreaSelector=(0,i.createSelector)(l,c,function(e,t){return e*t}),t.bayCountSelector=(0,i.createSelector)(l,function(e){return Math.ceil(e/2)})),p=(t.frameBoxCountSelector=(0,i.createSelector)(f,function(e){return e+1}),{CLADDING:{RECYCLED_PLASTIC:{cost:20,color:"#5A554F",material:new a.default.MeshLambertMaterial({color:"#5A554F",side:a.default.DoubleSide})},LARCH:{cost:40,color:"#B7A98A",material:new a.default.MeshLambertMaterial({color:"#B7A98A",side:a.default.DoubleSide})},WEATHERBOARD:{cost:25,color:"#C3C5C0",material:new a.default.MeshLambertMaterial({color:"#C3C5C0",side:a.default.DoubleSide})},NONE:{cost:0,color:"red",material:new a.default.MeshLambertMaterial({color:"#000000",side:a.default.DoubleSide,transparent:!0,opacity:0})}},ROOFING:{STEEL:{cost:25,color:"#B8B7BF",material:new a.default.MeshLambertMaterial({color:"#B8B7BF",side:a.default.DoubleSide})},EPDM:{cost:15,color:"#5B5D5C",material:new a.default.MeshLambertMaterial({color:"#5B5D5C",side:a.default.DoubleSide})},NONE:{cost:0,color:"red",material:new a.default.MeshLambertMaterial({color:"#000000",side:a.default.DoubleSide,transparent:!0,opacity:0})}}}),d=function(e){return e.building.cladding},m=function(e){return e.building.roofing},v=(t.claddingColorSelector=(0,i.createSelector)(d,function(e){return p.CLADDING[e].color}),t.claddingMaterialSelector=(0,i.createSelector)(d,function(e){return p.CLADDING[e].material}),t.claddingAreaSelector=(0,i.createSelector)(l,c,h,function(e,t,n){return 2*(t*n+e*n)})),g=(t.claddingTotalSelector=(0,i.createSelector)(v,d,function(e,t){return e*p.CLADDING[t].cost}),t.roofingColorSelector=(0,i.createSelector)(m,function(e){return p.ROOFING[e].color}),t.roofingMaterialSelector=(0,i.createSelector)(m,function(e){return p.ROOFING[e].material}),t.roofingAreaSelector=(0,i.createSelector)(l,c,h,function(e,t,n){return Math.hypot(t/2,n/2)*e*2}));t.roofingTotalSelector=(0,i.createSelector)(g,m,function(e,t){return e*p.ROOFING[t].cost})},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(t){return g=t,y}}function o(e,t){try{return e(t)}catch(n){return g=n,y}}function a(e,t,n){try{e(t,n)}catch(r){return g=r,y}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,e!==r&&m(e,this)}function u(e,t,n){return new e.constructor(function(i,o){var a=new s(r);a.then(i,o),l(e,new d(t,n,a))})}function l(e,t){for(;3===e._81;)e=e._65;return s._10&&s._10(e),0===e._81?0===e._45?(e._45=1,void(e._54=t)):1===e._45?(e._45=2,void(e._54=[e._54,t])):void e._54.push(t):void c(e,t)}function c(e,t){v(function(){var n=1===e._81?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._81?h(t.promise,e._65):f(t.promise,e._65));var r=o(n,e._65);r===y?f(t.promise,g):h(t.promise,r)})}function h(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=i(t);if(n===y)return f(e,g);if(n===e.then&&t instanceof s)return e._81=3,e._65=t,void p(e);if("function"==typeof n)return void m(n.bind(t),e)}e._81=1,e._65=t,p(e)}function f(e,t){e._81=2,e._65=t,s._97&&s._97(e,t),p(e)}function p(e){if(1===e._45&&(l(e,e._54),e._54=null),2===e._45){for(var t=0;t<e._54.length;t++)l(e,e._54[t]);e._54=null}}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=a(e,function(e){n||(n=!0,h(t,e))},function(e){n||(n=!0,f(t,e))});n||r!==y||(n=!0,f(t,g))}var v=n(207),g=null,y={};e.exports=s,s._10=null,s._97=null,s._61=r,s.prototype.then=function(e,t){if(this.constructor!==s)return u(this,e,t);var n=new s(r);return l(this,new d(e,t,n)),n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),s=r(a),u=function(){function e(){i(this,e),this.userData={},this.uuid=s.default.Math.generateUUID()}return o(e,[{key:"setup",value:function(e){}},{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),e}();e.exports=u},function(e,t){"use strict";var n={hasCachedChildMarkups:1};e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=e,n=t._renderedComponent;n;)t=n,n=t._renderedComponent;return t}function o(e,t){(0,f.default)(!!t,"Markup is null!");var n=i(e);n._hostMarkup=t,t[g]=n}function a(e){var t=e._hostMarkup;t&&(delete t[g],e._hostMarkup=null)}function s(e,t){if(0===(e._flags&d.default.hasCachedChildMarkups)){var n=e._renderedChildren,r=Object.keys(n),a=t.childrenMarkup;e:for(var s=0;s<r.length;++s){var u=r[s],l=n[u],c=i(l)._hostID;if(0!==c){for(var h=0;h<a.length;++h){var p=a[h];if(p[v.default]===c){o(l,p);continue e}}(0,f.default)(!1)}}e._flags|=d.default.hasCachedChildMarkups}}function u(e){if(e[g])return e[g];for(var t=e,n=[];!t[g];){if(n.push(t),!t.parentMarkup)return null;t=t.parentMarkup}for(var r=void 0,i=t[g];i&&(r=i,n.length);)s(i,t),t=n.pop(),i=t[g];return r}function l(e){var t=u(e);return null!==t&&t._hostMarkup===e?t:null}function c(e){if((0,f.default)(void 0!==e._hostMarkup),e._hostMarkup)return e._hostMarkup;for(var t=e,n=[];!t._hostMarkup;)n.push(t),(0,f.default)(t._hostParent,"React3 tree root should always have a node reference."),t=t._hostParent;for(;n.length;t=n.pop())s(t,t._hostMarkup);return t._hostMarkup}var h=n(6),f=r(h),p=n(105),d=r(p),m=n(69),v=r(m),g="__react3InternalInstance$"+Math.random().toString(36).slice(2);e.exports={getMarkupFromInstance:c,getInstanceFromMarkup:l,precacheMarkup:o,uncacheMarkup:a,precacheChildMarkups:s,getClosestInstanceFromMarkup:u,getRenderedHostOrTextFromComponent:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){}function u(e){return!!e.prototype&&e.prototype.isReactComponent}function l(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=n(126),m=r(d),v=n(14),g=r(v),y=n(20),_=(r(y),n(6)),b=r(_),w=n(31),x=r(w),E=n(11),M=(r(E),n(121)),C=r(M),S=n(29),T=(r(S),n(119)),P=(r(T),function e(){a(this,e)});P.prototype=p({},P.prototype,m.default.Mixin);var O={ImpureClass:0,PureClass:1,StatelessFunctional:2},A=function(){function e(){a(this,e)}return f(e,[{key:"render",value:function(){var e=x.default.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return s(e,t),t}}]),e}(),R=function(e){function t(e,n){a(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._react3RendererInstance=n,r.construct(e),r}return o(t,e),f(t,[{key:"getHostMarkup",value:function(){return h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getHostNode",this).call(this)}},{key:"construct",value:function(e){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"construct",this).call(this,e),this._threeObject=null}},{key:"_updateRenderedComponent",value:function(e,n){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_updateRenderedComponent",this).call(this,e,n),this._threeObject=this._renderedComponent._threeObject}},{key:"_instantiateReactComponent",value:function(e,t){return this._react3RendererInstance.instantiateReactComponent(e,t)}},{key:"_replaceNodeWithMarkup",value:function(e,t){var n=e.parentMarkup,r=n.childrenMarkup,i=r.indexOf(e);(0,b.default)(i!==-1);var o=n.threeObject.userData.react3internalComponent,a=e.threeObject.userData.react3internalComponent;o.removeChild(a,e);var s=t.threeObject.userData.react3internalComponent;s._mountIndex=i,o.createChild(s,null,t)}},{key:"mountComponent",value:function(e,t,n,r){this._context=r,this._mountOrder=this._react3RendererInstance.nextMountID++,this._hostParent=t,this._hostContainerInfo=n;var i=this._currentElement.props,o=this._processContext(r),a=this._currentElement.type,h=e.getUpdateQueue(),f=u(a),p=this._constructComponent(f,i,o,h),d=void 0;f||null!=p&&null!=p.render?l(a)?this._compositeType=O.PureClass:this._compositeType=O.ImpureClass:(d=p,s(a,d),(0,b.default)(null===p||p===!1||g.default.isValidElement(p),"%s(...): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",a.displayName||a.name||"Component"),p=new A(a),this._compositeType=O.StatelessFunctional);p.props=i,p.context=o,p.refs=C.default,p.updater=h,this._instance=p,x.default.set(p,this);var m=p.state;void 0===m&&(p.state=m=null),("object"!==("undefined"==typeof m?"undefined":c(m))||Array.isArray(m))&&(0,b.default)(!1),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var v=this.performInitialMount(d,t,n,e,r);return p.componentDidMount&&e.getReactMountReady().enqueue(p.componentDidMount,p),v}},{key:"_constructComponent",value:function(e,t,n,r){return this._constructComponentWithoutOwner(e,t,n,r)}},{key:"_constructComponentWithoutOwner",value:function(e,t,n,r){var i=this._currentElement.type,o=void 0;return o=e?new i(t,n,r):i(t,n,r)}},{key:"attachRef",value:function(e,t){var n=this.getPublicInstance(),r=n.refs===C.default?n.refs={}:n.refs;r[e]=t.getPublicInstance()}}]),t}(P);e.exports=R},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o,a,s,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),h=r(c),f=n(6),p=r(f),d=n(29),m=(r(d),n(19)),v=r(m),g=n(111),y=r(g),_=n(104),b=r(_),w=n(45),x=(r(w),n(66)),E=r(x),M=n(117),C=r(M),S=n(308),T=r(S),P=["gammaInput","gammaOutput"],O=(a=o=function(){function e(t,n){var r=this;i(this,e),s.call(this);var o=t.mainCamera,a=t.onAnimate,l=t.onRecreateCanvas,c=t.onRendererUpdated,f=t.onManualRenderTriggerCreated,p=t.forceManualRender;this._parameters=u({},t),this._rendererInstance=n,this._mounted=!1,this._willUnmount=!1,this._scene=null,this._mainCameraName=o,this._viewports=[],this._modules=[],this._resourceContainers=[],this._recreateCanvasCallback=l,this._rendererUpdatedCallback=c,this._manualRenderTriggerCallback=f,this._forceManualRender=p,this._warnedAboutManualRendering=!1,this._canvas=null,this._onAnimate=a,this._objectsByUUID={},this._materials=[],this._geometries=[],this._textures=[],this._objectsByName={},this._lastRenderMode=null,this._renderTrigger=function(e){e?r._render():null===r._renderRequest&&(r._renderRequest=requestAnimationFrame(r._render))},this.uuid=h.default.Math.generateUUID(),this.userData={},"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"http://localhost:3001",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&(this._highlightScene=new h.default.Scene,this._highlightGeometry=new h.default.BoxGeometry(1,1,1),this._highlightMaterial=new h.default.MeshBasicMaterial({color:255,transparent:!0,opacity:.4}),this._highlightObjectId=null,this._getHighlightBoundingBox=null,this._hideHighlight=function(){r._highlightObjectId=null,r._getHighlightBoundingBox=null},this._objectHighlighted=function(e){var t=e.uuid,n=e.boundingBoxFunc,i=void 0;r._highlightObjectId&&(i=r._objectsByUUID[r._highlightObjectId],i.userData.events.removeListener("hideHighlight",r._hideHighlight)),r._highlightObjectId=t,r._getHighlightBoundingBox=n,i=r._objectsByUUID[t],i.userData.events.once("hideHighlight",r._hideHighlight)})}return l(e,[{key:"_createRenderer",value:function(){if(this._canvas){var e=this._parameters,t={canvas:this._canvas,precision:e.precision,alpha:e.alpha,premultipliedAlpha:e.premultipliedAlpha,antialias:e.antialias,stencil:e.stencil,preserveDrawingBuffer:e.preserveDrawingBuffer,depth:e.depth,logarithmicDepthBuffer:e.logarithmicDepthBuffer};this._renderer=(0,T.default)()?new h.default.WebGLRenderer(t):new h.default.CanvasRenderer(t),this._rendererUpdatedCallback&&this._rendererUpdatedCallback(this._renderer);var n=this._renderer;e.hasOwnProperty("pixelRatio")&&n.setPixelRatio(e.pixelRatio),e.hasOwnProperty("sortObjects")&&(n.sortObjects=e.sortObjects);var r=e.hasOwnProperty("clearColor"),i=e.hasOwnProperty("clearAlpha");if(r||i){var o=void 0;o=r?e.clearColor:new h.default.Color(0),i?n.setClearColor(o,e.clearAlpha):n.setClearColor(o)}e.hasOwnProperty("shadowMapEnabled")&&(n.shadowMap.enabled=e.shadowMapEnabled),e.hasOwnProperty("shadowMapType")&&(n.shadowMap.type=e.shadowMapType),e.hasOwnProperty("shadowMapCullFace")&&(n.shadowMap.cullFace=e.shadowMapCullFace),e.hasOwnProperty("shadowMapDebug")&&(n.shadowMap.debug=e.shadowMapDebug),P.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n.setSize(e.width,e.height)}}},{key:"initialize",value:function(){this.userData.events.on("animate",this._callOnAnimate),this._forceManualRender?this._renderRequest=null:this._renderRequest=requestAnimationFrame(this._render),this._manualRenderTriggerCallback&&this._manualRenderTriggerCallback(this._renderTrigger)}},{key:"getObjectsByName",value:function(e){var t=this._objectsByName[e],n=void 0;return t?!function(){var e=t.values;n=Object.keys(e).map(function(t){return e[t]})}():n=[],n}},{key:"addAnimateListener",value:function(e){this.userData.events.on("animate",e)}},{key:"removeAnimateListener",value:function(e){this.userData.events.removeListener("animate",e)}},{key:"addBeforeRenderListener",value:function(e){this.userData.events.on("preRender",e)}},{key:"removeBeforeRenderListener",value:function(e){this.userData.events.removeListener("preRender",e)}},{key:"addChildren",value:function(e){for(var t=0;t<e.length;++t){var n=e[t];n instanceof h.default.Scene?this.setScene(n):n instanceof y.default?this.addViewport(n):n instanceof b.default?this.addModule(n):n instanceof E.default?this.addResourceContainer(n):(0,p.default)(!1,"The react3 component should only contain <viewport/>s or <scene/>s or <resources/>.")}}},{key:"removeChild",value:function(e){e instanceof h.default.Scene?this._scene===e&&this.setScene(null):e instanceof y.default?this.removeViewport(e):e instanceof b.default?this.removeModule(e):e instanceof E.default?this.removeResourceContainer(e):(0,p.default)(!1,"The react3 component should only contain <viewport/>s or <scene/>s, <module/>s or <resources/>.")}},{key:"_renderScene",value:function(e){if(this._renderer.render(this._scene,e),"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"http://localhost:3001",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&null!==this._highlightObjectId){var t=this._getHighlightBoundingBox(),n=this._highlightScene,r=n.children.length-t.length;if(r>0)for(var i=0;i<r;i++)n.remove(n.children[0]);else if(r<0)for(var o=0;o<-r;o++)n.add(new h.default.Mesh(this._highlightGeometry,this._highlightMaterial));for(var a=0;a<t.length;++a){var s=t[a],u=s.min.clone().add(s.max).multiplyScalar(.5),l=s.max.clone().sub(s.min),c=n.children[a];c.position.copy(u),c.scale.copy(l)}var f=this._renderer.autoClear;this._renderer.autoClear=!1,this._renderer.render(n,e),this._renderer.autoClear=f}}},{key:"setScene",value:function(e){this._scene=e}},{key:"addViewport",value:function(e){this._viewports.push(e)}},{key:"removeViewport",value:function(e){var t=this._viewports.indexOf(e);this._viewports.splice(t,1)}},{key:"addResourceContainer",value:function(e){this._resourceContainers.push(e)}},{key:"removeResourceContainer",value:function(e){var t=this._resourceContainers.indexOf(e);this._resourceContainers.splice(t,1)}},{key:"addModule",value:function(e){this._modules.push(e)}},{key:"removeModule",value:function(e){var t=this._modules.indexOf(e);this._modules.splice(t,1)}},{key:"updateWidth",value:function(e){this._parameters.width=e,this._renderer&&this._renderer.setSize(this._parameters.width,this._parameters.height)}},{key:"updateOnRecreateCanvas",value:function(e,t){this._recreateCanvasCallback=t}},{key:"updateOnRendererUpdated",value:function(e){this._rendererUpdatedCallback=e}},{key:"updateOnManualRenderTriggerCreated",value:function(e){this._manualRenderTriggerCallback=e,e&&this._manualRenderTriggerCallback(this._renderTrigger)}},{key:"updateForceManualRender",value:function(e){this._forceManualRender!==e&&(this._forceManualRender=e,e?(cancelAnimationFrame(this._renderRequest),this._renderRequest=null):this._renderRequest=requestAnimationFrame(this._render))}},{key:"updateHeight",value:function(e){this._parameters.height=e,this._renderer&&this._renderer.setSize(this._parameters.width,this._parameters.height)}},{key:"updatePixelRatio",value:function(e){this._parameters.pixelRatio=e,this._renderer&&(this._renderer.setPixelRatio(e),this._renderer.setSize(this._parameters.width,this._parameters.height))}},{key:"updateSortObjects",value:function(e){this._parameters.sortObjects=e,this._renderer&&(this._renderer.sortObjects=e)}},{key:"updateAntialias",value:function(e){this._parameters.antialias=e,this._renderer&&this.refreshRenderer()}},{key:"updatePrecision",value:function(e){this._parameters.precision=e,this._renderer&&this.refreshRenderer()}},{key:"updateAlpha",value:function(e){this._parameters.alpha=e,this._renderer&&this.refreshRenderer()}},{key:"updatePremultipliedAlpha",value:function(e){this._parameters.premultipliedAlpha=e,this._renderer&&this.refreshRenderer()}},{key:"updateStencil",value:function(e){this._parameters.stencil=e,this._renderer&&this.refreshRenderer()}},{key:"updatePreserveDrawingBuffer",value:function(e){this._parameters.preserveDrawingBuffer=e,this._renderer&&this.refreshRenderer()}},{key:"updateDepth",value:function(e){this._parameters.depth=e,this._renderer&&this.refreshRenderer()}},{key:"updateLogarithmicDepthBuffer",value:function(e){this._parameters.logarithmicDepthBuffer=e,this._renderer&&this.refreshRenderer()}},{key:"updateShadowMapEnabled",value:function(e){this._parameters.shadowMapEnabled=e,this._renderer&&(this._renderer.shadowMap.enabled=e,this.allMaterialsNeedUpdate(!0))}},{key:"updateShadowMapType",
value:function(e){this._parameters.shadowMapType=e,this._renderer&&(this._renderer.shadowMap.type=e,this.allMaterialsNeedUpdate(!0))}},{key:"updateShadowMapCullFace",value:function(e){this._parameters.shadowMapCullFace=e,this._renderer&&(this._renderer.shadowMap.cullFace=e,this.allMaterialsNeedUpdate(!0))}},{key:"updateShadowMapDebug",value:function(e){this._parameters.shadowMapDebug=e,this._renderer&&(this._renderer.shadowMap.debug=e,this.allMaterialsNeedUpdate(!0))}},{key:"updateCanvas",value:function(e){if(this._canvas=e,this._renderer){this.disposeResourcesAndRenderer();var t=this._renderer.extensions.get("WEBGL_lose_context");t&&t.loseContext()}this._createRenderer()}},{key:"updateGammaInput",value:function(e){this._parameters.gammaInput=e,this._renderer&&(this._renderer.gammaInput=e,this.allMaterialsNeedUpdate(!0))}},{key:"updateGammaOutput",value:function(e){this._parameters.gammaOutput=e,this._renderer&&(this._renderer.gammaOutput=e,this.allMaterialsNeedUpdate(!0))}},{key:"updateContext",value:function(e){this._parameters.context=e}},{key:"updateMainCamera",value:function(e){this._parameters.mainCamera=e,this._mainCameraName=e}},{key:"updateOnAnimate",value:function(e){this._parameters.onAnimate=e,this._onAnimate=e}},{key:"updateClearColor",value:function(e){this._parameters.clearColor=e,this._renderer&&(this._parameters.hasOwnProperty("clearAlpha")?this._renderer.setClearColor(e,this._parameters.clearAlpha):this._renderer.setClearColor(e))}},{key:"updateClearAlpha",value:function(e){var t=this._parameters;if(void 0===e?delete t.clearAlpha:t.clearAlpha=e,this._renderer){var n=void 0;n=t.hasOwnProperty("clearColor")?t.clearColor:new h.default.Color(0),void 0!==e?this._renderer.setClearColor(n,e):this._renderer.setClearColor(n)}}},{key:"refreshRenderer",value:function(){this.disposeResourcesAndRenderer();var e=this._renderer.extensions.get("WEBGL_lose_context");delete this._renderer,this._rendererUpdatedCallback&&this._rendererUpdatedCallback(null),this.userData.events.removeListener("animate",this._callOnAnimate),this.userData.events.removeAllListeners(),null!==this._renderRequest&&(cancelAnimationFrame(this._renderRequest),this._renderRequest=null),e&&this._canvas?(e.loseContext(),this._recreateCanvasCallback()):this._recreateCanvasCallback()}},{key:"disposeResourcesAndRenderer",value:function(){for(var e=0;e<this._materials.length;++e){var t=this._materials[e];t.dispose()}for(var n=0;n<this._geometries.length;++n){var r=this._geometries[n];r.dispose()}for(var i=0;i<this._textures.length;++i){var o=this._textures[i];o.dispose()}this._renderer.dispose()}},{key:"willUnmount",value:function(){this._willUnmount=!0}},{key:"unmount",value:function(){if(this._mounted=!1,null!==this._renderRequest&&(cancelAnimationFrame(this._renderRequest),this._renderRequest=null),this.userData.events.removeListener("animate",this._callOnAnimate),this.userData.events.removeAllListeners(),delete this._rendererInstance,this._renderer){var e=this._renderer.extensions.get("WEBGL_lose_context");e&&e.loseContext(),this.disposeResourcesAndRenderer(),delete this._renderer,this._rendererUpdatedCallback&&this._rendererUpdatedCallback(null)}delete this._parameters,(0,p.default)(0===Object.keys(this._objectsByUUID).length,"Failed to cleanup some child objects for React3DInstance"),delete this._objectsByUUID,delete this._viewports,delete this._scene,"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"http://localhost:3001",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&(delete this._highlightScene,delete this._highlightObjectId,delete this._getHighlightBoundingBox)}},{key:"objectMounted",value:function(e){(0,p.default)(!this._objectsByUUID[e.uuid],"There already is an object with this uuid in the react 3d instance."),this._objectsByUUID[e.uuid]=e,e.userData.markup._rootInstance=this,this._addObjectWithName(e.name,e),"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"http://localhost:3001",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&e.userData.events.on("highlight",this._objectHighlighted),e.userData.events.emit("addedIntoRoot",e);var t=e,n=t.userData.markup.childrenMarkup;e instanceof h.default.Material&&this._materials.push(e),(e instanceof h.default.Geometry||e instanceof h.default.BufferGeometry)&&this._geometries.push(e),e instanceof h.default.Texture&&this._textures.push(e);for(var r=0;r<n.length;++r){var i=n[r];this.objectMounted(i.threeObject)}}},{key:"allMaterialsNeedUpdate",value:function(e){this._materials.forEach(function(t){e?t.dispose():t.needsUpdate=!0})}},{key:"objectRenamed",value:function(e,t,n){this._removeObjectWithName(t,e),this._addObjectWithName(n,e)}},{key:"_addObjectWithName",value:function(e,t){this._objectsByName[e]||(this._objectsByName[e]={count:0,values:{}}),this._objectsByName[e].values[t.uuid]=t,this._objectsByName[e].count++}},{key:"_removeObjectWithName",value:function(e,t){(0,p.default)(this._objectsByName[e]&&this._objectsByName[e].values[t.uuid]===t,"The object's name changed somehow?'"),delete this._objectsByName[e].values[t.uuid],this._objectsByName[e].count--,0===this._objectsByName[e].count&&delete this._objectsByName[e]}},{key:"objectRemoved",value:function(e){(0,p.default)(this._objectsByUUID[e.uuid]===e,"The removed object does not belong here!?"),"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"http://localhost:3001",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&(this._highlightObjectId===e.uuid&&(this._highlightObjectId=null),e.userData.events.removeListener("highlight",this._objectHighlighted),e.userData.events.removeListener("hideHighlight",this._hideHighlight)),delete this._objectsByUUID[e.uuid],e instanceof h.default.Material&&this._materials.splice(this._materials.indexOf(e),1),(e instanceof h.default.Geometry||e instanceof h.default.BufferGeometry)&&this._geometries.splice(this._geometries.indexOf(e),1),e instanceof h.default.Texture&&this._textures.splice(this._textures.indexOf(e),1),this._removeObjectWithName(e.name,e),delete e.userData.markup._rootInstance}},{key:"mountedIntoRoot",value:function(){this._mounted=!0,this.objectMounted(this)}}]),e}(),s=function(){var e=this;this._callOnAnimate=function(){e._onAnimate&&v.default.batchedUpdates(e._onAnimate)},this._render=function(){for(var t=0;t<e._modules.length;++t)e._modules[t].update();if(e._forceManualRender?e._renderRequest=null:e._renderRequest=requestAnimationFrame(e._render),e.userData.events.emit("animate"),e._scene&&e._mounted&&e._renderer){var n=null;if(e._mainCameraName){var r=e._objectsByName[e._mainCameraName];if(r&&r.count>0){var i=r.values;n=i[Object.keys(i)[0]]}}n?("camera"!==e._lastRenderMode&&(e._renderer.autoClear=!0,e._renderer.setViewport(0,0,e._parameters.width,e._parameters.height),e._lastRenderMode="camera"),C.default.current=n,e.userData.events.emit("preRender"),e._renderScene(n),C.default.current=null):e._viewports.length>0&&("viewport"!==e._lastRenderMode&&(e._renderer.autoClear=!1,e._lastRenderMode="viewport"),e._renderer.clear(),e._viewports.forEach(function(t){var n=null;if(t.cameraName){var r=e._objectsByName[t.cameraName];if(r&&r.count>0){var i=r.values;n=i[Object.keys(i)[0]]}}n&&(t.onBeforeRender&&v.default.batchedUpdates(t.onBeforeRender),e._renderer.setViewport(t.x,t.y,t.width,t.height),C.default.current=n,e.userData.events.emit("preRender"),e._renderScene(n),C.default.current=null)}))}}},a);e.exports=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(32),u=r(s),l=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(u.default);e.exports=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(22),h=r(c),f=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.path=new l.default.Path,e}return a(t,e),s(t,[{key:"performAction",value:function(e){e.holes.push(this.path)}}]),t}(h.default);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(1),a=r(o),s=function e(t){i(this,e),this.userData={},this.uuid=a.default.Math.generateUUID(),this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.cameraName=t.cameraName,this.onBeforeRender=t.onBeforeRender};e.exports=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(6),d=r(p),m=n(10),v=r(m),g=n(109),y=r(g),_=n(9),b=r(_),w=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n._invalidChild=function(e){return!(e instanceof c.default.Shape||e instanceof y.default)},n.hasProp("shapes",{type:f.default.arrayOf((0,b.default)(c.default.Shape)),updateInitial:!0,update:function(e,t){e.userData._shapesFromProps=t||[],e.userData._needsToRefreshGeometry=!0},default:[]});var r=["curveSegments","material","UVGenerator"],a=[f.default.number,f.default.number,f.default.shape({generateTopUV:f.default.func,generateSideWallUV:f.default.func})];return r.forEach(function(e,t){n.hasProp(e,{type:a[t],update:function(t,n){void 0===n?delete t.userData._options[e]:t.userData._options[e]=n,t.userData._needsToRefreshGeometry=!0},default:void 0})}),n}return a(t,e),s(t,[{key:"completePropertyUpdates",value:function(e){e.userData._needsToRefreshGeometry&&(this.refreshGeometry(e),e.userData._needsToRefreshGeometry=!1)}},{key:"construct",value:function(){return new c.default.BufferGeometry}},{key:"getOptions",value:function(e){var t={};return["curveSegments","material","UVGenerator"].forEach(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}},{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),e.userData._shapeCache=[],e.userData._options=this.getOptions(n),e.userData._resourceListenerCleanupFunctions=[],e.userData._needsToRefreshGeometry=!1,n.children||this.refreshGeometry(e)}},{key:"addChildren",value:function(e,t){var n=this;(0,d.default)(0===t.filter(this._invalidChild).length,!1);var r=[];t.forEach(function(t){t instanceof y.default?!function(){var i=r.length,o=function(t){e.userData._shapeCache[i]=t,n.refreshGeometry(e)};o.target=t;var a=function n(){t.userData.events.removeListener("resource.set",o),e.userData._resourceListenerCleanupFunctions.splice(e.userData._resourceListenerCleanupFunctions.indexOf(n),1)};e.userData._resourceListenerCleanupFunctions.push(a),t.userData.events.on("resource.set",o),t.userData.events.once("dispose",function(){a()}),r.push(null)}():r.push(t)}),e.userData._shapeCache=r,this.refreshGeometry(e)}},{key:"addChild",value:function(e){this.triggerRemount(e)}},{key:"moveChild",value:function(e){this.triggerRemount(e)}},{key:"removeChild",value:function(e){this.triggerRemount(e)}},{key:"unmount",value:function(e){return e.userData._resourceListenerCleanupFunctions.forEach(function(e){e()}),delete e.userData._options,delete e.userData._resourceListenerCleanupFunctions,delete e.userData._shapesFromProps,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}}]),t}(v.default);e.exports=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(1),h=r(c),f=n(6),p=r(f),d=n(2),m=r(d),v=n(13),g=r(v),y=n(22),_=r(y),b=n(9),w=r(b),x=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._invalidChild=function(e){var t=!(e instanceof _.default);return t},n.hasProp("points",{type:m.default.arrayOf((0,w.default)(h.default.Vector2)),update:n.triggerRemount,default:[]}),n}return a(t,e),u(t,[{key:"applyInitialProps",value:function(e,n){return e.userData=s({},e.userData),e.uuid=h.default.Math.generateUUID(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n)}},{key:"addChildren",value:function(e,t){var n=this;(0,p.default)(0===t.filter(this._invalidChild).length,!1),t.forEach(function(t){n.performChildAction(e,t)})}},{key:"performChildAction",value:function(e,t){t.performAction(e)}},{key:"addChild",value:function(e){this.triggerRemount(e)}},{key:"moveChild",value:function(e){this.triggerRemount(e)}},{key:"removeChild",value:function(e){this.triggerRemount(e)}},{key:"highlight",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;t.userData._descriptor.highlight(t)}},{key:"getBoundingBoxes",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;return t.userData._descriptor.getBoundingBoxes(t)}}]),t}(g.default);e.exports=x},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(21),d=r(p),m=n(67),v=r(m),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["vertexShader","fragmentShader"].forEach(function(e){n.hasProp(e,{type:f.default.string.isRequired,update:n.triggerRemount})}),n.hasProp("uniforms",{type:f.default.any,simple:!0,default:void 0}),n.hasWireframe(),n}return a(t,e),s(t,[{key:"getMaterialDescription",value:function(e){var n=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getMaterialDescription",this).call(this,e);return e.hasOwnProperty("uniforms")&&(n.uniforms=e.uniforms),e.hasOwnProperty("vertexShader")&&(n.vertexShader=e.vertexShader),e.hasOwnProperty("fragmentShader")&&(n.fragmentShader=e.fragmentShader),n}},{key:"construct",value:function(e){var t=this.getMaterialDescription(e);return new c.default.ShaderMaterial(t)}},{key:"invalidChildInternal",value:function(e){var n=!(e instanceof v.default||u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"invalidChildInternal",this).call(this,e));return n}},{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),n.hasOwnProperty("uniforms")||(e.uniforms=void 0)}}]),t}(d.default);e.exports=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=(r(l),n(18)),h=r(c),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n)}},{key:"setParent",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n)}},{key:"unmount",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}},{key:"beginPropertyUpdates",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"beginPropertyUpdates",this).call(this,e),e.userData._needsProjectionMatrixUpdate=!1}},{key:"completePropertyUpdates",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"completePropertyUpdates",this).call(this,e),e.userData._needsProjectionMatrixUpdate&&(e.userData._needsProjectionMatrixUpdate=!1,e.updateProjectionMatrix(),e.userData.events.emit("updateProjectionMatrix"))}}]),t}(h.default);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(50),d=r(p),m=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),e.userData._propertySlot="geometry"}},{key:"setParent",value:function(e,n){(0,f.default)(n instanceof c.default.Mesh||n instanceof c.default.Points||n instanceof c.default.Line,"Parent is not a mesh"),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n)}}]),t}(d.default);e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o,a,s=n(1),u=(r(s),a=o=function e(){i(this,e)},o.current=null,a);e.exports=u},function(e,t){"use strict";function n(e){this.message=e,this.stack=""}n.prototype=Error.prototype,e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return!h&&(a.default.debugTool.removeHook(u.default),a.default.debugTool.removeHook(c.default),h=!0,!0)}var o=n(11),a=r(o),s=n(337),u=r(s),l=n(331),c=r(l),h=!1;i.restore=function(){h=!1,a.default.debugTool.addHook(u.default),a.default.debugTool.addHook(c.default)},e.exports=i},17,34,function(e,t){"use strict";function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){i.forEach(function(t){r[n(t,e)]=r[e]})});var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:o};e.exports=a},function(e,t,n){"use strict";function r(){this._callbacks=null,this._contexts=null}var i=n(4),o=n(7),a=n(26);n(3);o(r.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){e.length!==t.length?i("24"):void 0,this._callbacks=null,this._contexts=null;for(var n=0;n<e.length;n++)e[n].call(t[n]);e.length=0,t.length=0}},checkpoint:function(){return this._callbacks?this._callbacks.length:0},rollback:function(e){this._callbacks&&(this._callbacks.length=e,this._contexts.length=e)},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),a.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e){return!!l.hasOwnProperty(e)||!u.hasOwnProperty(e)&&(s.test(e)?(l[e]=!0,!0):(u[e]=!0,!1))}function i(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&t===!1}var o=n(30),a=(n(8),n(11),n(368)),s=(n(5),new RegExp("^["+o.ATTRIBUTE_NAME_START_CHAR+"]["+o.ATTRIBUTE_NAME_CHAR+"]*$")),u={},l={},c={createMarkupForID:function(e){return o.ID_ATTRIBUTE_NAME+"="+a(e)},setAttributeForID:function(e,t){e.setAttribute(o.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return o.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(o.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(n){if(i(n,t))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&t===!0?r+'=""':r+"="+a(t)}return o.isCustomAttribute(e)?null==t?"":e+"="+a(t):null},createMarkupForCustomAttribute:function(e,t){return r(e)&&null!=t?e+"="+a(t):""},setValueForProperty:function(e,t,n){var r=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(r){var a=r.mutationMethod;if(a)a(e,n);else{if(i(r,n))return void this.deleteValueForProperty(e,t);if(r.mustUseProperty)e[r.propertyName]=n;else{var s=r.attributeName,u=r.attributeNamespace;u?e.setAttributeNS(u,s,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&n===!0?e.setAttribute(s,""):e.setAttribute(s,""+n)}}}else if(o.isCustomAttribute(t))return void c.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){if(r(t)){null==n?e.removeAttribute(t):e.setAttribute(t,""+n)}},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(n){var r=n.mutationMethod;if(r)r(e,void 0);else if(n.mustUseProperty){var i=n.propertyName;n.hasBooleanValue?e[i]=!1:e[i]=""}else e.removeAttribute(n.attributeName)}else o.isCustomAttribute(t)&&e.removeAttribute(t)}};e.exports=c},function(e,t,n){"use strict";function r(e,t){var n=x.hasOwnProperty(t)?x[t]:null;M.hasOwnProperty(t)&&(n!==b.OVERRIDE_BASE?h("73",t):void 0),e&&(n!==b.DEFINE_MANY&&n!==b.DEFINE_MANY_MERGED?h("74",t):void 0)}function i(e,t){if(t){"function"==typeof t?h("75"):void 0,d.isValidElement(t)?h("76"):void 0;var n=e.prototype,i=n.__reactAutoBindPairs;t.hasOwnProperty(_)&&E.mixins(e,t.mixins);for(var o in t)if(t.hasOwnProperty(o)&&o!==_){var a=t[o],l=n.hasOwnProperty(o);if(r(l,o),E.hasOwnProperty(o))E[o](e,a);else{var c=x.hasOwnProperty(o),f="function"==typeof a,p=f&&!c&&!l&&t.autobind!==!1;if(p)i.push(o,a),n[o]=a;else if(l){var m=x[o];!c||m!==b.DEFINE_MANY_MERGED&&m!==b.DEFINE_MANY?h("77",m,o):void 0,m===b.DEFINE_MANY_MERGED?n[o]=s(n[o],a):m===b.DEFINE_MANY&&(n[o]=u(n[o],a))}else n[o]=a}}}else;}function o(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var i=n in E;i?h("78",n):void 0;var o=n in e;o?h("79",n):void 0,e[n]=r}}}function a(e,t){e&&t&&"object"==typeof e&&"object"==typeof t?void 0:h("80");for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]?h("81",n):void 0,e[n]=t[n]);return e}function s(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return a(i,n),a(i,r),i}}function u(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function l(e,t){var n=t.bind(e);return n}function c(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e[r]=l(e,i)}}var h=n(4),f=n(7),p=n(56),d=n(14),m=(n(57),n(39),n(77)),v=n(34),g=(n(3),n(42)),y=n(25),_=(n(5),y({mixins:null})),b=g({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),w=[],x={mixins:b.DEFINE_MANY,statics:b.DEFINE_MANY,propTypes:b.DEFINE_MANY,contextTypes:b.DEFINE_MANY,childContextTypes:b.DEFINE_MANY,getDefaultProps:b.DEFINE_MANY_MERGED,getInitialState:b.DEFINE_MANY_MERGED,getChildContext:b.DEFINE_MANY_MERGED,render:b.DEFINE_ONCE,componentWillMount:b.DEFINE_MANY,componentDidMount:b.DEFINE_MANY,componentWillReceiveProps:b.DEFINE_MANY,shouldComponentUpdate:b.DEFINE_ONCE,componentWillUpdate:b.DEFINE_MANY,componentDidUpdate:b.DEFINE_MANY,componentWillUnmount:b.DEFINE_MANY,updateComponent:b.OVERRIDE_BASE},E={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)i(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=f({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=f({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=s(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=f({},e.propTypes,t)},statics:function(e,t){o(e,t)},autobind:function(){}},M={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},C=function(){};f(C.prototype,p.prototype,M);var S={createClass:function(e){var t=function(e,n,r){this.__reactAutoBindPairs.length&&c(this),this.props=e,this.context=n,this.refs=v,this.updater=r||m,this.state=null;var i=this.getInitialState?this.getInitialState():null;"object"!=typeof i||Array.isArray(i)?h("82",t.displayName||"ReactCompositeComponent"):void 0,this.state=i};t.prototype=new C,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],w.forEach(i.bind(null,t)),i(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render?void 0:h("83");for(var n in x)t.prototype[n]||(t.prototype[n]=null);
return t},injection:{injectMixin:function(e){w.push(e)}}};e.exports=S},function(e,t,n){"use strict";function r(e){}function i(e,t){}function o(e){return!(!e.prototype||!e.prototype.isReactComponent)}function a(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}var s=n(4),u=n(7),l=n(75),c=n(20),h=n(14),f=n(76),p=n(31),d=(n(11),n(138)),m=(n(57),n(27)),v=n(145),g=n(34),y=(n(3),n(43)),_=n(62),b=(n(5),{ImpureClass:0,PureClass:1,StatelessFunctional:2});r.prototype.render=function(){var e=p.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return i(e,t),t};var w=1,x={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,u){this._context=u,this._mountOrder=w++,this._hostParent=t,this._hostContainerInfo=n;var l,c=this._currentElement.props,f=this._processContext(u),d=this._currentElement.type,m=e.getUpdateQueue(),v=o(d),y=this._constructComponent(v,c,f,m);v||null!=y&&null!=y.render?a(d)?this._compositeType=b.PureClass:this._compositeType=b.ImpureClass:(l=y,i(d,l),null===y||y===!1||h.isValidElement(y)?void 0:s("105",d.displayName||d.name||"Component"),y=new r(d),this._compositeType=b.StatelessFunctional);y.props=c,y.context=f,y.refs=g,y.updater=m,this._instance=y,p.set(y,this);var _=y.state;void 0===_&&(y.state=_=null),"object"!=typeof _||Array.isArray(_)?s("106",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var x;return x=y.unstable_handleError?this.performInitialMountWithErrorHandling(l,t,n,e,u):this.performInitialMount(l,t,n,e,u),y.componentDidMount&&e.getReactMountReady().enqueue(y.componentDidMount,y),x},_constructComponent:function(e,t,n,r){return this._constructComponentWithoutOwner(e,t,n,r)},_constructComponentWithoutOwner:function(e,t,n,r){var i,o=this._currentElement.type;return i=e?new o(t,n,r):o(t,n,r)},performInitialMountWithErrorHandling:function(e,t,n,r,i){var o,a=r.checkpoint();try{o=this.performInitialMount(e,t,n,r,i)}catch(s){r.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(a),o=this.performInitialMount(e,t,n,r,i)}return o},performInitialMount:function(e,t,n,r,i){var o=this._instance;o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===e&&(e=this._renderValidatedComponent());var a=d.getType(e);this._renderedNodeType=a;var s=this._instantiateReactComponent(e,a!==d.EMPTY);this._renderedComponent=s;var u=0,l=m.mountComponent(s,r,t,n,this._processChildContext(i),u);return l},getHostNode:function(){return m.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var n=this.getName()+".componentWillUnmount()";f.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(m.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,p.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return g;var r={};for(var i in n)r[i]=e[i];return r},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t=this._currentElement.type,n=this._instance,r=n.getChildContext&&n.getChildContext();if(r){"object"!=typeof t.childContextTypes?s("107",this.getName()||"ReactCompositeComponent"):void 0;for(var i in r)i in t.childContextTypes?void 0:s("108",this.getName()||"ReactCompositeComponent",i);return u({},e,r)}return e},_checkContextTypes:function(e,t,n){v(e,t,n,this.getName(),null,this._debugID)},receiveComponent:function(e,t,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,r,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?m.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,r,i){var o=this._instance;null==o?s("136",this.getName()||"ReactCompositeComponent"):void 0;var a,u=!1;this._context===i?a=o.context:(a=this._processContext(i),u=!0);var l=t.props,c=n.props;t!==n&&(u=!0),u&&o.componentWillReceiveProps&&o.componentWillReceiveProps(c,a);var h=this._processPendingState(c,a),f=!0;this._pendingForceUpdate||(o.shouldComponentUpdate?f=o.shouldComponentUpdate(c,h,a):this._compositeType===b.PureClass&&(f=!y(l,c)||!y(o.state,h))),this._updateBatchNumber=null,f?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,c,h,a,e,i)):(this._currentElement=n,this._context=i,o.props=c,o.state=h,o.context=a)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var o=u({},i?r[0]:n.state),a=i?1:0;a<r.length;a++){var s=r[a];u(o,"function"==typeof s?s.call(n,o,e,t):s)}return o},_performComponentUpdate:function(e,t,n,r,i,o){var a,s,u,l=this._instance,c=Boolean(l.componentDidUpdate);c&&(a=l.props,s=l.state,u=l.context),l.componentWillUpdate&&l.componentWillUpdate(t,n,r),this._currentElement=e,this._context=o,l.props=t,l.state=n,l.context=r,this._updateRenderedComponent(i,o),c&&i.getReactMountReady().enqueue(l.componentDidUpdate.bind(l,a,s,u),l)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,i=this._renderValidatedComponent();if(_(r,i))m.receiveComponent(n,i,e,this._processChildContext(t));else{var o=m.getHostNode(n);m.unmountComponent(n,!1);var a=d.getType(i);this._renderedNodeType=a;var s=this._instantiateReactComponent(i,a!==d.EMPTY);this._renderedComponent=s;var u=0,l=m.mountComponent(s,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),u);this._replaceNodeWithMarkup(o,l,n)}},_replaceNodeWithMarkup:function(e,t,n){l.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(){var e;if(this._compositeType!==b.StatelessFunctional){c.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{c.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||e===!1||h.isValidElement(e)?void 0:s("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n?s("110"):void 0;var r=t.getPublicInstance(),i=n.refs===g?n.refs={}:n.refs;i[e]=r},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===b.StatelessFunctional?null:e},_instantiateReactComponent:null},E={Mixin:x};e.exports=E},function(e,t){"use strict";var n={hasCachedChildNodes:1};e.exports=n},function(e,t,n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=u.getValue(e);null!=t&&i(this,Boolean(e.multiple),t)}}function i(e,t,n){var r,i,o=l.getNodeFromInstance(e).options;if(t){for(r={},i=0;i<n.length;i++)r[""+n[i]]=!0;for(i=0;i<o.length;i++){var a=r.hasOwnProperty(o[i].value);o[i].selected!==a&&(o[i].selected=a)}}else{for(r=""+n,i=0;i<o.length;i++)if(o[i].value===r)return void(o[i].selected=!0);o.length&&(o[0].selected=!0)}}function o(e){var t=this._currentElement.props,n=u.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),c.asap(r,this),n}var a=n(7),s=n(52),u=n(73),l=n(8),c=n(19),h=(n(5),!1),f={getHostProps:function(e,t){return a({},s.getHostProps(e,t),{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=u.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:o.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||h||(h=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var r=u.getValue(t);null!=r?(e._wrapperState.pendingUpdate=!1,i(e,Boolean(t.multiple),r)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?i(e,Boolean(t.multiple),t.defaultValue):i(e,Boolean(t.multiple),t.multiple?[]:""))}};e.exports=f},function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var i=n(7),o=n(19),a=n(41),s=n(17),u={initialize:s,close:function(){f.isBatchingUpdates=!1}},l={initialize:s,close:o.flushBatchedUpdates.bind(o)},c=[l,u];i(r.prototype,a.Mixin,{getTransactionWrappers:function(){return c}});var h=new r,f={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,i,o){var a=f.isBatchingUpdates;f.isBatchingUpdates=!0,a?e(t,n,r,i,o):h.perform(e,null,t,n,r,i,o)}};e.exports=f},function(e,t){"use strict";var n,r={injectEmptyComponentFactory:function(e){n=e}},i={create:function(e){return n(e)}};i.injection=r,e.exports=i},function(e,t){"use strict";var n={logTopLevelRenders:!1};e.exports=n},function(e,t,n){"use strict";function r(e){return u?void 0:a("111",e.type),new u(e)}function i(e){return new c(e)}function o(e){return e instanceof c}var a=n(4),s=n(7),u=(n(3),null),l={},c=null,h={injectGenericComponentClass:function(e){u=e},injectTextComponentClass:function(e){c=e},injectComponentClasses:function(e){s(l,e)}},f={createInternalComponent:r,createInstanceForText:i,isTextComponent:o,injection:h};e.exports=f},function(e,t,n){"use strict";var r=n(30),i=n(36),o=n(72),a=n(75),s=n(125),u=n(130),l=n(55),c=n(132),h=n(19),f={Component:a.injection,Class:s.injection,DOMProperty:r.injection,EmptyComponent:u.injection,EventPluginHub:i.injection,EventPluginUtils:o.injection,EventEmitter:l.injection,HostComponent:c.injection,Updates:h.injection};e.exports=f},function(e,t,n){"use strict";function r(e){return o(document.documentElement,e)}var i=n(333),o=n(180),a=n(94),s=n(95),u={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:u.hasSelectionCapabilities(e)?u.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,i=e.selectionRange;t!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,i),a(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=i.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if(void 0===r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var o=e.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()}else i.setOffsets(e,t)}};e.exports=u},function(e,t,n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function i(e){return e?e.nodeType===D?e.documentElement:e.firstChild:null}function o(e){return e.getAttribute&&e.getAttribute(R)||""}function a(e,t,n,r,i){var o;if(w.logTopLevelRenders){var a=e._currentElement.props,s=a.type;o="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(o)}var u=M.mountComponent(e,n,null,y(e,t),i,0);o&&console.timeEnd(o),e._renderedComponent._topLevelWrapper=e,U._mountImageIntoNode(u,t,e,r,n)}function s(e,t,n,r){var i=S.ReactReconcileTransaction.getPooled(!n&&_.useCreateElement);i.perform(a,null,e,t,i,n,r),S.ReactReconcileTransaction.release(i)}function u(e,t,n){for(M.unmountComponent(e,n),t.nodeType===D&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function l(e){var t=i(e);if(t){var n=g.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function c(e){return!(!e||e.nodeType!==L&&e.nodeType!==D&&e.nodeType!==I)}function h(e){var t=i(e),n=t&&g.getInstanceFromNode(t);return n&&!n._hostParent?n:null}function f(e){var t=h(e);return t?t._hostContainerInfo._topLevelWrapper:null}var p=n(4),d=n(33),m=n(30),v=n(55),g=(n(20),n(8)),y=n(325),_=n(328),b=n(14),w=n(131),x=n(31),E=(n(11),n(343)),M=n(27),C=n(58),S=n(19),T=n(34),P=n(150),O=(n(3),n(61)),A=n(62),R=(n(5),m.ID_ATTRIBUTE_NAME),k=m.ROOT_ATTRIBUTE_NAME,L=1,D=9,I=11,j={},N=1,B=function(){this.rootID=N++};B.prototype.isReactComponent={},B.prototype.render=function(){return this.props};var U={TopLevelWrapper:B,_instancesByReactRootID:j,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r,i){return U.scrollMonitor(r,function(){C.enqueueElementInternal(e,t,n),i&&C.enqueueCallbackInternal(e,i)}),e},_renderNewRootComponent:function(e,t,n,r){c(t)?void 0:p("37"),v.ensureScrollValueMonitoring();var i=P(e,!1);S.batchedUpdates(s,i,t,n,r);var o=i._instance.rootID;return j[o]=i,i},renderSubtreeIntoContainer:function(e,t,n,r){return null!=e&&x.has(e)?void 0:p("38"),U._renderSubtreeIntoContainer(e,t,n,r)},_renderSubtreeIntoContainer:function(e,t,n,r){C.validateCallback(r,"ReactDOM.render"),b.isValidElement(t)?void 0:p("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a,s=b(B,null,null,null,null,null,t);if(e){var u=x.get(e);a=u._processChildContext(u._context)}else a=T;var c=f(n);if(c){var h=c._currentElement,d=h.props;if(A(d,t)){var m=c._renderedComponent.getPublicInstance(),v=r&&function(){r.call(m)};return U._updateRootComponent(c,s,a,n,v),m}U.unmountComponentAtNode(n)}var g=i(n),y=g&&!!o(g),_=l(n),w=y&&!c&&!_,E=U._renderNewRootComponent(s,n,w,a)._renderedComponent.getPublicInstance();return r&&r.call(E),E},render:function(e,t,n){return U._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){c(e)?void 0:p("40");var t=f(e);if(!t){l(e),1===e.nodeType&&e.hasAttribute(k);return!1}return delete j[t._instance.rootID],S.batchedUpdates(u,t,e,!1),!0},_mountImageIntoNode:function(e,t,n,o,a){if(c(t)?void 0:p("41"),o){var s=i(t);if(E.canReuseMarkup(e,s))return void g.precacheNode(n,s);var u=s.getAttribute(E.CHECKSUM_ATTR_NAME);s.removeAttribute(E.CHECKSUM_ATTR_NAME);var l=s.outerHTML;s.setAttribute(E.CHECKSUM_ATTR_NAME,u);var h=e,f=r(h,l),m=" (client) "+h.substring(f-20,f+20)+"\n (server) "+l.substring(f-20,f+20);t.nodeType===D?p("42",m):void 0}if(t.nodeType===D?p("43"):void 0,a.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);d.insertTreeBefore(t,e,null)}else O(t,e),g.precacheNode(n,t.firstChild)}};e.exports=U},function(e,t,n){"use strict";function r(e,t,n){return{type:f.INSERT_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function i(e,t,n){return{type:f.MOVE_EXISTING,content:null,fromIndex:e._mountIndex,fromNode:p.getHostNode(e),toIndex:n,afterNode:t}}function o(e,t){return{type:f.REMOVE_NODE,content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function a(e){return{type:f.SET_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(e){return{type:f.TEXT_CONTENT,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function u(e,t){return t&&(e=e||[],e.push(t)),e}function l(e,t){h.processChildrenUpdates(e,t)}var c=n(4),h=n(75),f=(n(31),n(11),n(137)),p=(n(20),n(27)),d=n(319),m=(n(17),n(146)),v=(n(3),{Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return d.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,r,i,o){var a,s=0;return a=m(t,s),d.updateChildren(e,a,n,r,i,this,this._hostContainerInfo,o,s),a},mountChildren:function(e,t,n){var r=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=r;var i=[],o=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],u=0,l=p.mountComponent(s,t,this,this._hostContainerInfo,n,u);s._mountIndex=o++,i.push(l)}return i},updateTextContent:function(e){var t=this._renderedChildren;d.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");var r=[s(e)];l(this,r)},updateMarkup:function(e){var t=this._renderedChildren;d.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");var r=[a(e)];l(this,r)},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var r=this._renderedChildren,i={},o=[],a=this._reconcilerUpdateChildren(r,e,o,i,t,n);if(a||r){var s,c=null,h=0,f=0,d=0,m=null;for(s in a)if(a.hasOwnProperty(s)){var v=r&&r[s],g=a[s];v===g?(c=u(c,this.moveChild(v,m,h,f)),f=Math.max(v._mountIndex,f),v._mountIndex=h):(v&&(f=Math.max(v._mountIndex,f)),c=u(c,this._mountChildAtIndex(g,o[d],m,h,t,n)),d++),h++,m=p.getHostNode(g)}for(s in i)i.hasOwnProperty(s)&&(c=u(c,this._unmountChild(r[s],i[s])));c&&l(this,c),this._renderedChildren=a}},unmountChildren:function(e){var t=this._renderedChildren;d.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,r){if(e._mountIndex<r)return i(e,t,n)},createChild:function(e,t,n){return r(n,t,e._mountIndex)},removeChild:function(e,t){return o(e,t)},_mountChildAtIndex:function(e,t,n,r,i,o){return e._mountIndex=r,this.createChild(e,n,t)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}});e.exports=v},function(e,t,n){"use strict";var r=n(42),i=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});e.exports=i},function(e,t,n){"use strict";var r=n(4),i=n(14),o=(n(3),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||e===!1?o.EMPTY:i.isValidElement(e)?"function"==typeof e.type?o.COMPOSITE:o.HOST:void r("26",e)}});e.exports=o},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.useCreateElement=e}var i=n(7),o=n(123),a=n(26),s=n(55),u=n(134),l=(n(11),n(41)),c=n(58),h={initialize:u.getSelectionInformation,close:u.restoreSelection},f={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},d=[h,f,p],m={getTransactionWrappers:function(){return d},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};i(r.prototype,l.Mixin,m),a.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):o.addComponentAsRefTo(t,e,n)}function i(e,t,n){"function"==typeof e?e(null):o.removeComponentAsRefFrom(t,e,n)}var o=n(344),a={};a.attachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&r(n,e,t._owner)}},a.shouldUpdateRefs=function(e,t){var n=null===e||e===!1,r=null===t||t===!1;return n||r||t.ref!==e.ref||"string"==typeof t.ref&&t._owner!==e._owner},a.detachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&i(n,e,t._owner)}},e.exports=a},function(e,t){"use strict";e.exports="15.3.1"},function(e,t){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){n.currentScrollLeft=e.x,n.currentScrollTop=e.y}};e.exports=n},function(e,t,n){"use strict";function r(e,t){return null==t?i("30"):void 0,null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}var i=n(4);n(3);e.exports=r},function(e,t,n){"use strict";var r=!1;e.exports=r},function(e,t,n){(function(t){"use strict";function r(e,t,n,r,u,l){for(var c in e)if(e.hasOwnProperty(c)){var h;try{"function"!=typeof e[c]?i("84",r||"React class",o[n],c):void 0,h=e[c](t,c,r,n,null,a)}catch(f){h=f}if(h instanceof Error&&!(h.message in s)){s[h.message]=!0}}}var i=n(4),o=n(39),a=n(78),s=(n(3),n(5),{});e.exports=r}).call(t,n(35))},function(e,t,n){(function(t){"use strict";function r(e,t,n,r){if(e&&"object"==typeof e){var i=e,o=void 0===i[n];o&&null!=t&&(i[n]=t)}}function i(e,t){if(null==e)return e;var n={};return o(e,r,n),n}var o=(n(54),n(63));n(5);e.exports=i}).call(t,n(35))},function(e,t){"use strict";function n(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}e.exports=n},function(e,t){"use strict";function n(e){var t=e&&(r&&e[r]||e[i]);if("function"==typeof t)return t}var r="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";e.exports=n},function(e,t,n){"use strict";function r(){return!o&&i.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var i=n(12),o=null;e.exports=r},function(e,t,n){"use strict";function r(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function i(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function o(e,t){var n;if(null===e||e===!1)n=l.create(o);else if("object"==typeof e){var s=e;!s||"function"!=typeof s.type&&"string"!=typeof s.type?a("130",null==s.type?s.type:typeof s.type,r(s._owner)):void 0,"string"==typeof s.type?n=c.createInternalComponent(s):i(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new h(s)}else"string"==typeof e||"number"==typeof e?n=c.createInstanceForText(e):a("131",typeof e);return n._mountIndex=0,n._mountImage=null,n}var a=n(4),s=n(7),u=n(126),l=n(130),c=n(132),h=(n(3),n(5),function(e){this.construct(e)});s(h.prototype,u.Mixin,{_instantiateReactComponent:o});e.exports=o},function(e,t){"use strict";function n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!r[e.type]:"textarea"===t}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=n},function(e,t,n){"use strict";var r=n(12),i=n(60),o=n(61),a=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(a=function(e,t){o(e,i(t))})),e.exports=a},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];var r=t[t.length-1],i=t.slice(0,-1);return function(){return i.reduceRight(function(e,t){return t(e)},r.apply(void 0,arguments))}}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){function r(){g===v&&(g=v.slice())}function o(){return m}function s(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return r(),g.push(e),function(){if(t){t=!1,r();var n=g.indexOf(e);g.splice(n,1)}}}function c(e){if(!(0,a.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(y)throw new Error("Reducers may not dispatch actions.");try{y=!0,m=d(m,e)}finally{y=!1}for(var t=v=g,n=0;n<t.length;n++)t[n]();return e}function h(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");d=e,c({type:l.INIT})}function f(){var e,t=s;return e={subscribe:function(e){function n(){e.next&&e.next(o())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");n();var r=t(n);return{unsubscribe:r}}},e[u.default]=function(){return this},e}var p;if("function"==typeof t&&"undefined"==typeof n&&(n=t,t=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(i)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var d=e,m=t,v=[],g=v,y=!1;return c({type:l.INIT}),p={dispatch:c,subscribe:s,getState:o,replaceReducer:h},p[u.default]=f,p}t.__esModule=!0,t.ActionTypes=void 0,t.default=i;var o=n(64),a=r(o),s=n(377),u=r(s),l=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(t){}}t.__esModule=!0,t.default=n},function(e,t,n){e.exports=n(157)},function(e,t,n){"use strict";function r(e){var t=new a(e),n=o(a.prototype.request,t);return i.extend(n,a.prototype,t),i.extend(n,t),n}var i=n(16),o=n(92),a=n(159),s=r();s.Axios=a,s.create=function(e){return r(e)},s.Cancel=n(88),s.CancelToken=n(158),s.isCancel=n(89),s.all=function(e){return Promise.all(e)},s.spread=n(173),e.exports=s,e.exports.default=s},function(e,t,n){"use strict";function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}var i=n(88);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e,t=new r(function(t){e=t});return{token:t,cancel:e}},e.exports=r},function(e,t,n){"use strict";function r(e){this.defaults=o.merge(i,e),this.interceptors={request:new a,response:new a}}var i=n(91),o=n(16),a=n(160),s=n(161),u=n(169),l=n(167);r.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,this.defaults,{method:"get"},e),e.baseURL&&!u(e.url)&&(e.url=l(e.baseURL,e.url));var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},o.forEach(["delete","get","head"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(16);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=n(16),o=n(164),a=n(89),s=n(91);e.exports=function(e){r(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var t=e.adapter||s.adapter;return t(e).then(function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(r(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t){"use strict";e.exports=function(e,t,n,r){return e.config=t,n&&(e.code=n),e.response=r,e}},function(e,t,n){"use strict";var r=n(90);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n)):e(n)}},function(e,t,n){"use strict";var r=n(16);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t){"use strict";function n(){this.message="String contains an invalid character"}function r(e){for(var t,r,o=String(e),a="",s=0,u=i;o.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&t>>8-s%1*8)){if(r=o.charCodeAt(s+=.75),r>255)throw new n;t=t<<8|r}return a}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=r},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(16);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,function(e,t){null!==e&&"undefined"!=typeof e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),o=a.join("&")}return o&&(e+=(e.indexOf("?")===-1?"?":"&")+o),e}},function(e,t){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t,n){"use strict";var r=n(16);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";var r=n(16);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";var r=n(16);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(16);e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),function(e){i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),
t&&(o[t]=o[t]?o[t]+", "+n:n)}),o):o}},function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){e.exports=n(176),e.exports.color=n(175)},function(e,t){var n=e.exports=n||{};n.color=n.color||{},n.utils=n.utils||{},n.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var n=t.call(arguments),r=e.length-1;r>=0;r--)n=[e[r].apply(this,n)];return n[0]}},each:function(t,n,r){if(e&&t.forEach===e)t.forEach(n,r);else if(t.length===t.length+0){for(var i=0,o=t.length;i<o;i++)if(i in t&&n.call(r,t[i],i)===this.BREAK)return}else for(var i in t)if(n.call(r,t[i],i)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}}(),n.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(var n=t.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(n.utils.common),n.Color=n.color.Color=function(e,t,n,r){function i(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(a(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(a(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(s(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(s(this),this.__state.space="HSV"),this.__state[t]=e}})}function a(e,n,i){if("HEX"===e.__state.space)e.__state[n]=t.component_from_hex(e.__state.hex,i);else{if("HSV"!==e.__state.space)throw"Corrupted color state";r.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function s(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);r.extend(e.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=n.h}var u=function(){if(this.__state=e.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),i(u.prototype,"r",2),i(u.prototype,"g",1),i(u.prototype,"b",0),o(u.prototype,"h"),o(u.prototype,"s"),o(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),u}(n.color.interpret=function(e,t){var n,r,i=function(){r=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(o,function(i){if(i.litmus(e))return t.each(i.conversions,function(i,o){if(n=i.read(e),r===!1&&n!==!1)return r=n,n.conversionName=o,n.conversion=i,t.BREAK}),t.BREAK}),r},o=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:e},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:e},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return i}(n.color.toString,n.utils.common),n.color.math=function(){var e;return{hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(e,t,n){var r,i,o=Math.min(e,t,n),a=Math.max(e,t,n),s=a-o;return 0==a?{h:NaN,s:0,v:0}:(i=s/a,r=e==a?(t-n)/s:t==a?2+(n-e)/s:4+(e-t)/s,r/=6,r<0&&(r+=1),{h:360*r,s:i,v:a/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(t,n,r){return r<<(e=8*n)|t&~(255<<e)}}}(),n.color.toString,n.utils.common)},function(e,t){var n=e.exports=n||{};n.gui=n.gui||{},n.utils=n.utils||{},n.controllers=n.controllers||{},n.dom=n.dom||{},n.color=n.color||{},n.utils.css=function(){return{load:function(e,t){t=t||document;var n=t.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t.getElementsByTagName("head")[0].appendChild(n)},inject:function(e,t){t=t||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(n)}}}(),n.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var n=t.call(arguments),r=e.length-1;r>=0;r--)n=[e[r].apply(this,n)];return n[0]}},each:function(t,n,r){if(e&&t.forEach===e)t.forEach(n,r);else if(t.length===t.length+0){for(var i=0,o=t.length;i<o;i++)if(i in t&&n.call(r,t[i],i)===this.BREAK)return}else for(var i in t)if(n.call(r,t[i],i)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}}(),n.controllers.Controller=function(e){var t=function(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0};return e.extend(t.prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),t}(n.utils.common),n.dom.dom=function(e){function t(t){if("0"===t||e.isUndefined(t))return 0;var n=t.match(i);return e.isNull(n)?0:parseFloat(n[1])}var n={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},r={};e.each(n,function(t,n){e.each(t,function(e){r[e]=n})});var i=/(\d+(\.\d+)?)px/,o={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(t,n,r){e.isUndefined(n)&&(n=!0),e.isUndefined(r)&&(r=!0),t.style.position="absolute",n&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,n,i,o){i=i||{};var a=r[n];if(!a)throw new Error("Event type "+n+" not supported.");var s=document.createEvent(a);switch(a){case"MouseEvents":var u=i.x||i.clientX||0,l=i.y||i.clientY||0;s.initMouseEvent(n,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,u,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=s.initKeyboardEvent||s.initKeyEvent;e.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(n,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(n,i.bubbles||!1,i.cancelable||!0)}e.defaults(s,o),t.dispatchEvent(s)},bind:function(e,t,n,r){return r=r||!1,e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n),o},unbind:function(e,t,n,r){return r=r||!1,e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n),o},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);n.indexOf(t)==-1&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return o},removeClass:function(e,t){if(t)if(void 0===e.className);else if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);r!=-1&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return o},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var n=getComputedStyle(e);return t(n["border-left-width"])+t(n["border-right-width"])+t(n["padding-left"])+t(n["padding-right"])+t(n.width)},getHeight:function(e){var n=getComputedStyle(e);return t(n["border-top-width"])+t(n["border-bottom-width"])+t(n["padding-top"])+t(n["padding-bottom"])+t(n.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do t.left+=e.offsetLeft,t.top+=e.offsetTop;while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return o}(n.utils.common),n.controllers.OptionController=function(e,t,n){var r=function(e,i,o){r.superclass.call(this,e,i);var a=this;if(this.__select=document.createElement("select"),n.isArray(o)){var s={};n.each(o,function(e){s[e]=e}),o=s}n.each(o,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)}),this.updateDisplay(),t.bind(this.__select,"change",function(){var e=this.options[this.selectedIndex].value;a.setValue(e)}),this.domElement.appendChild(this.__select)};return r.superclass=e,n.extend(r.prototype,e.prototype,{setValue:function(e){var t=r.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.NumberController=function(e,t){function n(e){return e=e.toString(),e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var r=function(e,i,o){r.superclass.call(this,e,i),o=o||{},this.__min=o.min,this.__max=o.max,this.__step=o.step,t.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=n(this.__impliedStep)};return r.superclass=e,t.extend(r.prototype,e.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&e%this.__step!=0&&(e=Math.round(e/this.__step)*this.__step),r.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this}}),r}(n.controllers.Controller,n.utils.common),n.controllers.NumberControllerBox=function(e,t,n){function r(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}var i=function(e,r,o){function a(){var e=parseFloat(f.__input.value);n.isNaN(e)||f.setValue(e)}function s(){a(),f.__onFinishChange&&f.__onFinishChange.call(f,f.getValue())}function u(e){t.bind(window,"mousemove",l),t.bind(window,"mouseup",c),h=e.clientY}function l(e){var t=h-e.clientY;f.setValue(f.getValue()+t*f.__impliedStep),h=e.clientY}function c(){t.unbind(window,"mousemove",l),t.unbind(window,"mouseup",c)}this.__truncationSuspended=!1,i.superclass.call(this,e,r,o);var h,f=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",a),t.bind(this.__input,"blur",s),t.bind(this.__input,"mousedown",u),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&(f.__truncationSuspended=!0,this.blur(),f.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return i.superclass=e,n.extend(i.prototype,e.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():r(this.getValue(),this.__precision),i.superclass.prototype.updateDisplay.call(this)}}),i}(n.controllers.NumberController,n.dom.dom,n.utils.common),n.controllers.NumberControllerSlider=function(e,t,n,r,i){function o(e,t,n,r,i){return r+(i-r)*((e-t)/(n-t))}var a=function(e,n,r,i,s){function u(e){t.bind(window,"mousemove",l),t.bind(window,"mouseup",c),l(e)}function l(e){e.preventDefault();var n=t.getOffset(h.__background),r=t.getWidth(h.__background);return h.setValue(o(e.clientX,n.left,n.left+r,h.__min,h.__max)),!1}function c(){t.unbind(window,"mousemove",l),t.unbind(window,"mouseup",c),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}a.superclass.call(this,e,n,{min:r,max:i,step:s});var h=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",u),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return a.superclass=e,a.useDefaultStyles=function(){n.inject(i)},r.extend(a.prototype,e.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",a.superclass.prototype.updateDisplay.call(this)}}),a}(n.controllers.NumberController,n.dom.dom,n.utils.css,n.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),n.controllers.FunctionController=function(e,t,n){var r=function(e,n,i){r.superclass.call(this,e,n);var o=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===i?"Fire":i,t.bind(this.__button,"click",function(e){return e.preventDefault(),o.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=e,n.extend(r.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.BooleanController=function(e,t,n){var r=function(e,n){function i(){o.setValue(!o.__prev)}r.superclass.call(this,e,n);var o=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",i,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=e,n.extend(r.prototype,e.prototype,{setValue:function(e){var t=r.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(var n=t.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(n.utils.common),n.color.interpret=function(e,t){var n,r,i=function(){r=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(o,function(i){if(i.litmus(e))return t.each(i.conversions,function(i,o){if(n=i.read(e),r===!1&&n!==!1)return r=n,n.conversionName=o,n.conversion=i,t.BREAK}),t.BREAK}),r},o=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:e},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:e},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return i}(n.color.toString,n.utils.common),n.GUI=n.gui.GUI=function(e,t,n,r,i,o,a,s,u,l,c,h,f,p,d){function m(e,t,n,o){if(void 0===t[n])throw new Error("Object "+t+' has no property "'+n+'"');var a;if(o.color)a=new c(t,n);else{var s=[t,n].concat(o.factoryArgs);a=r.apply(e,s)}o.before instanceof i&&(o.before=o.before.__li),y(e,a),p.addClass(a.domElement,"c");var u=document.createElement("span");p.addClass(u,"property-name"),u.innerHTML=a.property;var l=document.createElement("div");l.appendChild(u),l.appendChild(a.domElement);var h=v(e,l,o.before);return p.addClass(h,B.CLASS_CONTROLLER_ROW),p.addClass(h,typeof a.getValue()),g(e,h,a),e.__controllers.push(a),a}function v(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,params.before):e.__ul.appendChild(r),e.onResize(),r}function g(e,t,n){if(n.__li=t,n.__gui=e,d.extend(n,{options:function(t){return arguments.length>1?(n.remove(),m(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[d.toArray(arguments)]})):d.isArray(t)||d.isObject(t)?(n.remove(),m(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof u){var r=new s(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});d.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(n,e),i.apply(r,e)}}),p.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof s){var i=function(t){return d.isNumber(n.__min)&&d.isNumber(n.__max)?(n.remove(),m(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):t};n.min=d.compose(i,n.min),n.max=d.compose(i,n.max)}else n instanceof o?(p.bind(t,"click",function(){p.fakeEvent(n.__checkbox,"click")}),p.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof a?(p.bind(t,"click",function(){p.fakeEvent(n.__button,"click")}),p.bind(t,"mouseover",function(){p.addClass(n.__button,"hover")}),p.bind(t,"mouseout",function(){p.removeClass(n.__button,"hover")})):n instanceof c&&(p.addClass(t,"color"),n.updateDisplay=d.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=d.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&S(e.getRoot(),!0),t},n.setValue)}function y(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(r!=-1){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var o,a=n.load.remembered;if(a[e.preset])o=a[e.preset];else{if(!a[L])return;o=a[L]}if(o[r]&&void 0!==o[r][t.property]){var s=o[r][t.property];t.initialValue=s,t.setValue(s)}}}}function _(e,t){return document.location.href+"."+t}function b(e){function t(){l.style.display=e.useLocalStorage?"block":"none"}var n=e.__save_row=document.createElement("li");p.addClass(e.domElement,"has-save"),e.__ul.insertBefore(n,e.__ul.firstChild),p.addClass(n,"save-row");var r=document.createElement("span");r.innerHTML="&nbsp;",p.addClass(r,"button gears");var i=document.createElement("span");i.innerHTML="Save",p.addClass(i,"button"),p.addClass(i,"save");var o=document.createElement("span");o.innerHTML="New",p.addClass(o,"button"),p.addClass(o,"save-as");var a=document.createElement("span");a.innerHTML="Revert",p.addClass(a,"button"),p.addClass(a,"revert");var s=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?d.each(e.load.remembered,function(t,n){M(e,n,n==e.preset)}):M(e,L,!1),p.bind(s,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),n.appendChild(s),n.appendChild(r),n.appendChild(i),n.appendChild(o),n.appendChild(a),D){var u=document.getElementById("dg-save-locally"),l=document.getElementById("dg-local-explain");u.style.display="block";var c=document.getElementById("dg-local-storage");"true"===localStorage.getItem(_(e,"isLocal"))&&c.setAttribute("checked","checked"),t(),p.bind(c,"change",function(){e.useLocalStorage=!e.useLocalStorage,t()})}var h=document.getElementById("dg-new-constructor");p.bind(h,"keydown",function(e){!e.metaKey||67!==e.which&&67!=e.keyCode||P.hide()}),p.bind(r,"click",function(){h.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),P.show(),h.focus(),h.select()}),p.bind(i,"click",function(){e.save()}),p.bind(o,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),p.bind(a,"click",function(){e.revert()})}function w(e){function t(t){return t.preventDefault(),i=t.clientX,p.addClass(e.__closeButton,B.CLASS_DRAG),p.bind(window,"mousemove",n),p.bind(window,"mouseup",r),!1}function n(t){return t.preventDefault(),e.width+=i-t.clientX,e.onResize(),i=t.clientX,!1}function r(){p.removeClass(e.__closeButton,B.CLASS_DRAG),p.unbind(window,"mousemove",n),p.unbind(window,"mouseup",r)}e.__resize_handle=document.createElement("div"),d.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var i;p.bind(e.__resize_handle,"mousedown",t),p.bind(e.__closeButton,"mousedown",t),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function x(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function E(e,t){var n={};return d.each(e.__rememberedObjects,function(r,i){var o={},a=e.__rememberedObjectIndecesToControllers[i];d.each(a,function(e,n){o[n]=t?e.initialValue:e.getValue()}),n[i]=o}),n}function M(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function C(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value==e.preset&&(e.__preset_select.selectedIndex=t)}function S(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];t?n.innerHTML=n.value+"*":n.innerHTML=n.value}function T(e){0!=e.length&&h(function(){T(e)}),d.each(e,function(e){e.updateDisplay()})}e.inject(n);var P,O,A="dg",R=72,k=20,L="Default",D=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),I=!0,j=!1,N=[],B=function(e){function t(){localStorage.setItem(_(r,"gui"),JSON.stringify(r.getSaveObject()))}function n(){var e=r.getRoot();e.width+=1,d.defer(function(){e.width-=1})}var r=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),p.addClass(this.domElement,A),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],e=e||{},e=d.defaults(e,{autoPlace:!0,width:B.DEFAULT_WIDTH}),e=d.defaults(e,{resizable:e.autoPlace,hideable:e.autoPlace}),d.isUndefined(e.load)?e.load={preset:L}:e.preset&&(e.load.preset=e.preset),d.isUndefined(e.parent)&&e.hideable&&N.push(this),e.resizable=d.isUndefined(e.parent)&&e.resizable,e.autoPlace&&d.isUndefined(e.scrollable)&&(e.scrollable=!0);var i=D&&"true"===localStorage.getItem(_(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return e.parent}},scrollable:{get:function(){return e.scrollable}},autoPlace:{get:function(){return e.autoPlace}},preset:{get:function(){return r.parent?r.getRoot().preset:e.load.preset},set:function(t){r.parent?r.getRoot().preset=t:e.load.preset=t,C(this),r.revert()}},width:{get:function(){return e.width},set:function(t){e.width=t,x(r,t)}},name:{get:function(){return e.name},set:function(t){e.name=t,a&&(a.innerHTML=e.name)}},closed:{get:function(){return e.closed},set:function(t){e.closed=t,e.closed?p.addClass(r.__ul,B.CLASS_CLOSED):p.removeClass(r.__ul,B.CLASS_CLOSED),this.onResize(),r.__closeButton&&(r.__closeButton.innerHTML=t?B.TEXT_OPEN:B.TEXT_CLOSED)}},load:{get:function(){return e.load}},useLocalStorage:{get:function(){return i},set:function(e){D&&(i=e,e?p.bind(window,"unload",t):p.unbind(window,"unload",t),localStorage.setItem(_(r,"isLocal"),e))}}}),d.isUndefined(e.parent)){if(e.closed=!1,p.addClass(this.domElement,B.CLASS_MAIN),p.makeSelectable(this.domElement,!1),D&&i){r.useLocalStorage=!0;var o=localStorage.getItem(_(this,"gui"));o&&(e.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=B.TEXT_CLOSED,p.addClass(this.__closeButton,B.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),p.bind(this.__closeButton,"click",function(){r.closed=!r.closed})}else{void 0===e.closed&&(e.closed=!0);var a=document.createTextNode(e.name);p.addClass(a,"controller-name");var s=v(r,a),u=function(e){return e.preventDefault(),r.closed=!r.closed,!1};p.addClass(this.__ul,B.CLASS_CLOSED),p.addClass(s,"title"),p.bind(s,"click",u),e.closed||(this.closed=!1)}e.autoPlace&&(d.isUndefined(e.parent)&&(I&&(O=document.createElement("div"),p.addClass(O,A),p.addClass(O,B.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(O),I=!1),O.appendChild(this.domElement),p.addClass(this.domElement,B.CLASS_AUTO_PLACE)),this.parent||x(r,e.width)),p.bind(window,"resize",function(){r.onResize()}),p.bind(this.__ul,"webkitTransitionEnd",function(){r.onResize()}),p.bind(this.__ul,"transitionend",function(){r.onResize()}),p.bind(this.__ul,"oTransitionEnd",function(){r.onResize()}),this.onResize(),e.resizable&&w(this);r.getRoot();e.parent||n()};return B.toggleHide=function(){j=!j,d.each(N,function(e){e.domElement.style.zIndex=j?-999:999,e.domElement.style.opacity=j?0:1})},B.CLASS_AUTO_PLACE="a",B.CLASS_AUTO_PLACE_CONTAINER="ac",B.CLASS_MAIN="main",B.CLASS_CONTROLLER_ROW="cr",B.CLASS_TOO_TALL="taller-than-window",B.CLASS_CLOSED="closed",B.CLASS_CLOSE_BUTTON="close-button",B.CLASS_DRAG="drag",B.DEFAULT_WIDTH=245,B.TEXT_CLOSED="Close Controls",B.TEXT_OPEN="Open Controls",p.bind(window,"keydown",function(e){"text"===document.activeElement.type||e.which!==R&&e.keyCode!=R||B.toggleHide()},!1),d.extend(B.prototype,{add:function(e,t){return m(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return m(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.slice(this.__controllers.indexOf(e),1);var t=this;d.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&O.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new B(t);this.__folders[e]=n;var r=v(this,n.domElement);return p.addClass(r,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=p.getOffset(e.__ul).top,n=0;d.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=p.getHeight(t));
}),window.innerHeight-t-k<n?(p.addClass(e.domElement,B.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-k+"px"):(p.removeClass(e.domElement,B.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&d.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},remember:function(){if(d.isUndefined(P)&&(P=new f,P.domElement.innerHTML=t),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;d.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&b(e),e.__rememberedObjects.indexOf(t)==-1&&e.__rememberedObjects.push(t)}),this.autoPlace&&x(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=E(this)),e.folders={},d.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=E(this),S(this,!1)},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[L]=E(this,!0)),this.load.remembered[e]=E(this),this.preset=e,M(this,e,!0)},revert:function(e){d.each(this.__controllers,function(t){this.getRoot().load.remembered?y(e||this.getRoot(),t):t.setValue(t.initialValue)},this),d.each(this.__folders,function(e){e.revert(e)}),e||S(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&T(this.__listening)}}),B}(n.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",n.controllers.factory=function(e,t,n,r,i,o,a){return function(s,u){var l=s[u];return a.isArray(arguments[2])||a.isObject(arguments[2])?new e(s,u,arguments[2]):a.isNumber(l)?a.isNumber(arguments[2])&&a.isNumber(arguments[3])?new n(s,u,arguments[2],arguments[3]):new t(s,u,{min:arguments[2],max:arguments[3]}):a.isString(l)?new r(s,u):a.isFunction(l)?new i(s,u,""):a.isBoolean(l)?new o(s,u):void 0}}(n.controllers.OptionController,n.controllers.NumberControllerBox,n.controllers.NumberControllerSlider,n.controllers.StringController=function(e,t,n){var r=function(e,n){function i(){a.setValue(a.__input.value)}function o(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}r.superclass.call(this,e,n);var a=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",i),t.bind(this.__input,"change",i),t.bind(this.__input,"blur",o),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,n.extend(r.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.FunctionController,n.controllers.BooleanController,n.utils.common),n.controllers.Controller,n.controllers.BooleanController,n.controllers.FunctionController,n.controllers.NumberControllerBox,n.controllers.NumberControllerSlider,n.controllers.OptionController,n.controllers.ColorController=function(e,t,n,r,i){function o(e,t,n,r){e.style.background="",i.each(u,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "})}function a(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var s=function(e,u){function l(e){p(e),t.bind(window,"mousemove",p),t.bind(window,"mouseup",c)}function c(){t.unbind(window,"mousemove",p),t.unbind(window,"mouseup",c)}function h(){var e=r(this.value);e!==!1?(m.__color.__state=e,m.setValue(m.__color.toOriginal())):this.value=m.__color.toString()}function f(){t.unbind(window,"mousemove",d),t.unbind(window,"mouseup",f)}function p(e){e.preventDefault();var n=t.getWidth(m.__saturation_field),r=t.getOffset(m.__saturation_field),i=(e.clientX-r.left+document.body.scrollLeft)/n,o=1-(e.clientY-r.top+document.body.scrollTop)/n;return o>1?o=1:o<0&&(o=0),i>1?i=1:i<0&&(i=0),m.__color.v=o,m.__color.s=i,m.setValue(m.__color.toOriginal()),!1}function d(e){e.preventDefault();var n=t.getHeight(m.__hue_field),r=t.getOffset(m.__hue_field),i=1-(e.clientY-r.top+document.body.scrollTop)/n;return i>1?i=1:i<0&&(i=0),m.__color.h=360*i,m.setValue(m.__color.toOriginal()),!1}s.superclass.call(this,e,u),this.__color=new n(this.getValue()),this.__temp=new n(0);var m=this;this.domElement=document.createElement("div"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",t.bind(this.__input,"keydown",function(e){13===e.keyCode&&h.call(this)}),t.bind(this.__input,"blur",h),t.bind(this.__selector,"mousedown",function(e){t.addClass(this,"drag").bind(window,"mouseup",function(e){t.removeClass(m.__selector,"drag")})});var v=document.createElement("div");i.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),i.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),i.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),i.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),i.extend(v.style,{width:"100%",height:"100%",background:"none"}),o(v,"top","rgba(0,0,0,0)","#000"),i.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),a(this.__hue_field),i.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),t.bind(this.__saturation_field,"mousedown",l),t.bind(this.__field_knob,"mousedown",l),t.bind(this.__hue_field,"mousedown",function(e){d(e),t.bind(window,"mousemove",d),t.bind(window,"mouseup",f)}),this.__saturation_field.appendChild(v),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};s.superclass=e,i.extend(s.prototype,e.prototype,{updateDisplay:function(){var e=r(this.getValue());if(e!==!1){var t=!1;i.each(n.COMPONENTS,function(n){if(!i.isUndefined(e[n])&&!i.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&i.extend(this.__color.__state,e)}i.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=this.__color.v<.5||this.__color.s>.5?255:0,s=255-a;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,o(this.__saturation_field,"left","#fff",this.__temp.toString()),i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+s+","+s+","+s+",.7)"})}});var u=["-moz-","-o-","-webkit-","-ms-",""];return s}(n.controllers.Controller,n.dom.dom,n.color.Color=function(e,t,n,r){function i(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(a(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(a(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(s(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(s(this),this.__state.space="HSV"),this.__state[t]=e}})}function a(e,n,i){if("HEX"===e.__state.space)e.__state[n]=t.component_from_hex(e.__state.hex,i);else{if("HSV"!==e.__state.space)throw"Corrupted color state";r.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function s(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);r.extend(e.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=n.h}var u=function(){if(this.__state=e.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),i(u.prototype,"r",2),i(u.prototype,"g",1),i(u.prototype,"b",0),o(u.prototype,"h"),o(u.prototype,"s"),o(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),u}(n.color.interpret,n.color.math=function(){var e;return{hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(e,t,n){var r,i,o=Math.min(e,t,n),a=Math.max(e,t,n),s=a-o;return 0==a?{h:NaN,s:0,v:0}:(i=s/a,r=e==a?(t-n)/s:t==a?2+(n-e)/s:4+(e-t)/s,r/=6,r<0&&(r+=1),{h:360*r,s:i,v:a/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(t,n,r){return r<<(e=8*n)|t&~(255<<e)}}}(),n.color.toString,n.utils.common),n.color.interpret,n.utils.common),n.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),n.dom.CenteredDiv=function(e,t){var n=function(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;e.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var t=this,n=function(){t.domElement.style.display="none",t.backgroundElement.style.display="none",e.unbind(t.domElement,"webkitTransitionEnd",n),e.unbind(t.domElement,"transitionend",n),e.unbind(t.domElement,"oTransitionEnd",n)};e.bind(this.domElement,"webkitTransitionEnd",n),e.bind(this.domElement,"transitionend",n),e.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"},n}(n.dom.dom,n.utils.common),n.dom.dom,n.utils.common)},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),l=n.slice(),i=l.length,u=0;u<i;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"use strict";function n(e){return e.replace(r,function(e,t){return t.toUpperCase()})}var r=/-(.)/g;e.exports=n},function(e,t,n){"use strict";function r(e){return i(e.replace(o,"ms-"))}var i=n(178),o=/^-ms-/;e.exports=r},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!i(e)&&(i(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var i=n(188);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e.length;if(Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e?a(!1):void 0,"number"!=typeof t?a(!1):void 0,0===t||t-1 in e?void 0:a(!1),"function"==typeof e.callee?a(!1):void 0,e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var r=Array(t),i=0;i<t;i++)r[i]=e[i];return r}function i(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function o(e){return i(e)?Array.isArray(e)?e.slice():r(e):[e]}var a=n(3);e.exports=o},function(e,t,n){"use strict";function r(e){var t=e.match(c);return t&&t[1].toLowerCase()}function i(e,t){var n=l;l?void 0:u(!1);var i=r(e),o=i&&s(i);if(o){n.innerHTML=o[1]+e+o[2];for(var c=o[0];c--;)n=n.lastChild}else n.innerHTML=e;var h=n.getElementsByTagName("script");h.length&&(t?void 0:u(!1),a(h).forEach(t));for(var f=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return f}var o=n(12),a=n(181),s=n(183),u=n(3),l=o.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;e.exports=i},function(e,t,n){"use strict";function r(e){return a?void 0:o(!1),f.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||("*"===e?a.innerHTML="<link />":a.innerHTML="<"+e+"></"+e+">",s[e]=!a.firstChild),s[e]?f[e]:null}var i=n(12),o=n(3),a=i.canUseDOM?document.createElement("div"):null,s={},u=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],h=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],f={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:c,th:c},p=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];p.forEach(function(e){f[e]=h,s[e]=!0}),e.exports=r},function(e,t){"use strict";function n(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=n},function(e,t){"use strict";function n(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;e.exports=n},function(e,t,n){"use strict";function r(e){return i(e).replace(o,"-ms-")}var i=n(185),o=/^ms-/;e.exports=r},function(e,t){"use strict";function n(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=n},function(e,t,n){"use strict";function r(e){return i(e)&&3==e.nodeType}var i=n(187);e.exports=r},function(e,t){"use strict";function n(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=n},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},i="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,o){if("string"!=typeof t){var a=Object.getOwnPropertyNames(t);i&&(a=a.concat(Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;++s)if(!(n[a[s]]||r[a[s]]||o&&o[a[s]]))try{e[a[s]]=t[a[s]]}catch(u){}}return e}},function(e,t,n){"use strict";var r=function(e,t,n,r,i,o,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;u=new Error(t.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};e.exports=r},function(e,t,n){function r(e){return null==e?void 0===e?u:s:(e=Object(e),l&&l in e?o(e):a(e))}var i=n(96),o=n(195),a=n(196),s="[object Null]",u="[object Undefined]",l=i?i.toStringTag:void 0;e.exports=r},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){var r=n(197),i=r(Object.getPrototypeOf,Object);e.exports=i},function(e,t,n){function r(e){var t=a.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(i){}var o=s.call(e);return r&&(t?e[u]=n:delete e[u]),o}var i=n(96),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i?i.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return i.call(e)}var r=Object.prototype,i=r.toString;e.exports=n},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){var r=n(193),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){e.exports=n(341).create},function(e,t,n){"use strict";e.exports=n(322)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t.default=void 0;var s=n(15),u=n(98),l=r(u),c=n(99),h=(r(c),function(e){function t(n,r){i(this,t);var a=o(this,e.call(this,n,r));return a.store=n.store,a}return a(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){return s.Children.only(this.props.children)},t}(s.Component));t.default=h,h.propTypes={store:l.default.isRequired,children:s.PropTypes.element.isRequired},h.childContextTypes={store:l.default.isRequired}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.displayName||e.name||"Component"}function u(e,t){try{return e.apply(t)}catch(n){return T.value=n,T}}function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=Boolean(e),f=e||M,d=void 0;d="function"==typeof t?t:t?(0,g.default)(t):C;var v=n||S,y=r.pure,_=void 0===y||y,b=r.withRef,x=void 0!==b&&b,O=_&&v!==S,A=P++;return function(e){function t(e,t,n){var r=v(e,t,n);return r}var n="Connect("+s(e)+")",r=function(r){function s(e,t){i(this,s);var a=o(this,r.call(this,e,t));a.version=A,a.store=e.store||t.store,(0,E.default)(a.store,'Could not find "store" in either the context or '+('props of "'+n+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+n+'".'));var u=a.store.getState();return a.state={storeState:u},a.clearCache(),a}return a(s,r),s.prototype.shouldComponentUpdate=function(){return!_||this.haveOwnPropsChanged||this.hasStoreStateChanged},s.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return r},s.prototype.configureFinalMapState=function(e,t){var n=f(e.getState(),t),r="function"==typeof n;return this.finalMapStateToProps=r?n:f,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(e,t):n},s.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return r},s.prototype.configureFinalMapDispatch=function(e,t){var n=d(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:d,
this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(e,t):n},s.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return(!this.stateProps||!(0,m.default)(e,this.stateProps))&&(this.stateProps=e,!0)},s.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return(!this.dispatchProps||!(0,m.default)(e,this.dispatchProps))&&(this.dispatchProps=e,!0)},s.prototype.updateMergedPropsIfNeeded=function(){var e=t(this.stateProps,this.dispatchProps,this.props);return!(this.mergedProps&&O&&(0,m.default)(e,this.mergedProps))&&(this.mergedProps=e,!0)},s.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},s.prototype.trySubscribe=function(){l&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},s.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},s.prototype.componentDidMount=function(){this.trySubscribe()},s.prototype.componentWillReceiveProps=function(e){_&&(0,m.default)(e,this.props)||(this.haveOwnPropsChanged=!0)},s.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},s.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},s.prototype.handleChange=function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!_||t!==e){if(_&&!this.doStatePropsDependOnOwnProps){var n=u(this.updateStatePropsIfNeeded,this);if(!n)return;n===T&&(this.statePropsPrecalculationError=T.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({storeState:e})}}},s.prototype.getWrappedInstance=function(){return(0,E.default)(x,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},s.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,r=this.haveStatePropsBeenPrecalculated,i=this.statePropsPrecalculationError,o=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,i)throw i;var a=!0,s=!0;_&&o&&(a=n||t&&this.doStatePropsDependOnOwnProps,s=t&&this.doDispatchPropsDependOnOwnProps);var u=!1,l=!1;r?u=!0:a&&(u=this.updateStatePropsIfNeeded()),s&&(l=this.updateDispatchPropsIfNeeded());var f=!0;return f=!!(u||l||t)&&this.updateMergedPropsIfNeeded(),!f&&o?o:(x?this.renderedElement=(0,h.createElement)(e,c({},this.mergedProps,{ref:"wrappedInstance"})):this.renderedElement=(0,h.createElement)(e,this.mergedProps),this.renderedElement)},s}(h.Component);return r.displayName=n,r.WrappedComponent=e,r.contextTypes={store:p.default},r.propTypes={store:p.default},(0,w.default)(r,e)}}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=l;var h=n(15),f=n(98),p=r(f),d=n(204),m=r(d),v=n(205),g=r(v),y=n(99),_=(r(y),n(64)),b=(r(_),n(190)),w=r(b),x=n(191),E=r(x),M=function(e){return{}},C=function(e){return{dispatch:e}},S=function(e,t,n){return c({},n,e,t)},T={value:null},P=0},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!i.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;return!0}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function r(e){return function(t){return(0,i.bindActionCreators)(e,t)}}t.__esModule=!0,t.default=r;var i=n(86)},function(e,t,n){"undefined"==typeof Promise&&(n(223).enable(),window.Promise=n(222)),n(225),Object.assign=n(221)},function(e,t){(function(t){"use strict";function n(e){s.length||(a(),u=!0),s[s.length]=e}function r(){for(;l<s.length;){var e=l;if(l+=1,s[e].call(),l>c){for(var t=0,n=s.length-l;t<n;t++)s[t]=s[t+l];s.length-=l,l=0}}s.length=0,l=0,u=!1}function i(e){var t=1,n=new f(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function o(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var a,s=[],u=!1,l=0,c=1024,h="undefined"!=typeof t?t:self,f=h.MutationObserver||h.WebKitMutationObserver;a="function"==typeof f?i(r):o(r),n.requestFlush=a,n.makeRequestCallFromTimer=o}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(15),l=r(u),c=n(228),h=r(c),f=n(1),p=r(f),d=n(376),m=r(d),v=n(214),g=r(v),y=n(210),_=r(y),b=n(211),w=r(b),x=n(209),E=(r(x),n(213)),M=r(E),C=n(215),S=r(C),T=n(381),P=r(T),O=n(101),A=n(380)(p.default),R=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return console.log((0,O.frame)(3,4)),r.mouse=new p.default.Vector2,r.raycaster=new p.default.Raycaster,r.cameraPosition=new p.default.Vector3(5,5,5),r.clippingHeight=2.5,r.clippingPlane=new p.default.Plane(new p.default.Vector3(0,(-1),0),r.clippingHeight),r.spotlightPosition=new p.default.Vector3((-20),20,10),r.spotlightLookAt=new p.default.Vector3(0,1,0),r.ambientLightPosition=new p.default.Vector3(0,5,0),r._onAnimate=r._onAnimate.bind(r),r.getRenderer=r.getRenderer.bind(r),r.onWindowResize=r.onWindowResize.bind(r),r.onMouseDown=r.onMouseDown.bind(r),r.onMouseMove=r.onMouseMove.bind(r),r.setMesh=r.setMesh.bind(r),r.setClippingHeight=r.setClippingHeight.bind(r),r.setLens=r.setLens.bind(r),r.switchControls=r.switchControls.bind(r),r}return a(t,e),s(t,[{key:"_onAnimate",value:function(){this.stats.update(),P.default.update(),this.controls.update()}},{key:"setClippingHeight",value:function(e){this.clippingPlane&&(this.clippingPlane.constant=e)}},{key:"switchControls",value:function(e){e?(this.refs.camera.position.set(0,10,0),this.controls.minPolarAngle=0,this.controls.maxPolarAngle=0):(this.controls.minPolarAngle=Math.PI/6,this.controls.maxPolarAngle=Math.PI/2.1)}},{key:"setLens",value:function(e){var t=new P.default.Tween(this.clippingPlane);switch(e){case"GROUND":this.switchControls(!0),t.to({constant:-.08},100);break;case"BASIC":this.switchControls(!1),t.to({constant:2.5},200);break;case"CROSS":this.switchControls(!1),t.to({constant:1},200);break;default:this.setClippingHeight(this.clippingHeight)}t.start()}},{key:"getRenderer",value:function(e){this.renderer=e,e.clippingPlanes=[this.clippingPlane]}},{key:"componentWillMount",value:function(){}},{key:"onWindowResize",value:function(){this.refs.camera.aspect=window.innerWidth/window.innerHeight,this.refs.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"onMouseMove",value:function(e){}},{key:"onMouseDown",value:function(e){this.mouse.x=e.clientX/this.renderer.domElement.width*2-1,this.mouse.y=2*-(e.clientY/this.renderer.domElement.height)+1,this.raycaster.setFromCamera(this.mouse,this.refs.camera);var t=this.raycaster.intersectObjects([this.buildingMesh]);t.length>0&&console.log(t[0])}},{key:"componentDidMount",value:function(){var e=new A(this.refs.camera,document.getElementById("root"));e.minPolarAngle=0,e.maxPolarAngle=Math.PI/2.1,e.maxDistance=9,e.minDistance=4,this.controls=e,this.stats=new m.default;var t=document.getElementById("root");t.appendChild(this.stats.domElement),window.addEventListener("resize",this.onWindowResize,!1),document.addEventListener("mousedown",this.onMouseDown,!1),document.addEventListener("mousemove",this.onMouseMove,!1)}},{key:"componentWillUnmount",value:function(){this.refs.controls.gui.destroy(),delete this.controls,delete this.stats}},{key:"setMesh",value:function(e){this.buildingMesh=e}},{key:"render",value:function(){var e=window.innerWidth,t=window.innerHeight;return l.default.createElement("div",{id:"container"},l.default.createElement(h.default,{mainCamera:"camera",width:e,height:t,onAnimate:this._onAnimate,onRendererUpdated:this.getRenderer,shadowMapEnabled:!0,antialias:!0,clearColor:16185078},l.default.createElement("scene",null,l.default.createElement("perspectiveCamera",{name:"camera",ref:"camera",fov:75,aspect:e/t,near:.1,far:1e3,position:this.cameraPosition,lookAt:this.spotlightLookAt}),l.default.createElement("ambientLight",{position:this.ambientLightPosition,intensity:1}),l.default.createElement("spotLight",{position:this.spotlightPosition,lookAt:this.spotlightLookAt,castShadow:!0,intensity:.3}),l.default.createElement(_.default,{store:this.props.store,setMesh:this.setMesh}),l.default.createElement(M.default,{store:this.props.store}))),l.default.createElement(g.default,{store:this.props.store}),l.default.createElement(w.default,{store:this.props.store,clippingHeight:this.clippingHeight,setClippingHeight:this.setClippingHeight,ref:"controls"}),l.default.createElement(S.default,{setLens:this.setLens}))}}]),t}(l.default.Component);t.default=R},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(15),l=r(u),c=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return l.default.createElement("mesh",{position:this.props.position},l.default.createElement("boxGeometry",{width:this.props.width,height:this.props.height,depth:this.props.length}),l.default.createElement("meshBasicMaterial",{color:this.props.color}))}}]),t}(l.default.Component);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(15),l=r(u),c=n(44),h=n(100),f=n(102),p=n(65),d=r(p),m=n(1),v=r(m),g=n(212),y=r(g),_=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"componentWillMount",value:function(){this.props.getData()}},{key:"render",value:function(){return l.default.createElement("group",null,l.default.createElement(w,{bayCount:this.props.bayCount,length:this.props.length}),l.default.createElement(b,{path:this.props.frameSVG,setMesh:this.props.setMesh,claddingMaterial:this.props.claddingMaterial,roofingMaterial:this.props.roofingMaterial,bayCount:this.props.bayCount,length:this.props.length}))}}]),t}(l.default.Component),b=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.doUpdates=r.doUpdates.bind(r),r}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.group=this.refs.group,this.doUpdates(this.props)}},{key:"doUpdates",value:function(e){for(var t=new v.default.ExtrudeGeometry(this.shape,{amount:e.length+.2,bevelEnabled:!1,steps:e.bayCount}),n=[e.claddingMaterial,e.roofingMaterial],r=0;r<t.faces.length;r++)t.faces[r].materialIndex=t.faces[r].normal.y>0?1:0;var i=new v.default.Mesh(t,new v.default.MeshFaceMaterial(n));i.castShadow=!0,i.position.setZ(-(e.length+.2)/2),this.group.children[0]=i,e.setMesh(i)}},{key:"componentWillReceiveProps",value:function(e){this.doUpdates(e)}},{key:"render",value:function(){return this.shape=(new d.default).transformSVGPath(this.props.path,!1),l.default.createElement("object3D",{ref:"group"})}}]),t}(l.default.Component),w=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){this.frameboxes=[];for(var e=0;e<=this.props.bayCount;e++){var t=this.props.length/this.props.bayCount*e-this.props.length/2;this.frameboxes.push(l.default.createElement(y.default,{position:t,key:e}))}return l.default.createElement("group",null,this.frameboxes)}}]),t}(l.default.Component),x=function(e){return{length:e.building.length,frameWidth:e.frame.width,frameHeight:e.frame.height,claddingMaterial:(0,f.claddingMaterialSelector)(e),roofingMaterial:(0,f.roofingMaterialSelector)(e),bayCount:(0,f.bayCountSelector)(e),frameSVG:(0,f.frameSelector)(e)}},E=function(e){return{getData:function(){e((0,h.getData)())}}};t.default=(0,c.connect)(x,E)(_)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(15),l=r(u),c=n(44),h=n(100),f=n(174),p=r(f),d=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=new p.default.GUI,s={clippingHeight:r.props.clippingHeight,length:r.props.length,width:r.props.width,height:r.props.height,roofing:r.props.roofingMaterial,cladding:r.props.claddingMaterial},u=a.add(s,"clippingHeight",.1,2.5).step(.1);u.onChange(r.props.setClippingHeight);var l=a.add(s,"length",2,10).step(.3);l.onChange(r.props.setLength);var c=a.add(s,"width",2,4).step(.1);c.onChange(r.props.setWidth);var h=a.add(s,"height",2,4).step(.1);h.onChange(r.props.setHeight);var f=a.add(s,"roofing",{"STEEL (£25m²)":"STEEL","EPDM (£15m²)":"EPDM","NONE (£0)":"NONE"});f.onChange(r.props.setRoofing);var d=a.add(s,"cladding",{"RECYCLED PLASTIC (£20m²)":"RECYCLED_PLASTIC","LARCH (£40m²)":"LARCH","WEATHERBOARD (£25m²)":"WEATHERBOARD","NONE (£0)":"NONE"});return d.onChange(r.props.setCladding),r}return a(t,e),s(t,[{key:"render",value:function(){return!1}}]),t}(l.default.Component),m=function(e){return{length:e.building.length,width:e.frame.width,height:e.frame.height,roofingMaterial:e.building.roofing,claddingMaterial:e.building.cladding}},v=function(e){return{setLength:function(t){e((0,h.setLength)(t))},setWidth:function(t){e((0,h.setFrameWidth)(t))},setHeight:function(t){e((0,h.setFrameHeight)(t))},setRoofing:function(t){e((0,h.setRoofing)(t))},setCladding:function(t){e((0,h.setCladding)(t))}}};t.default=(0,c.connect)(m,v)(d)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(15),l=r(u),c=n(1),h=r(c),f=n(65),p=r(f),d=n(200),m=r(d),v=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.frames=(0,m.default)({left:l.default.createElement(g,{position:-.05}),right:l.default.createElement(g,{position:.05})}),r}return a(t,e),s(t,[{key:"render",value:function(){return l.default.createElement("object3D",{position:new h.default.Vector3(0,0,this.props.position)},this.frames)}}]),t}(l.default.Component);t.default=v;var g=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.paths=[],r.paths.push("M128.93599,275.65587l14.65408,19.0503l-4.67608,3.59177l2.43146,3.1609l-15.85248,12.19422l-2.44001,-3.17201l-10.31692,7.92459l2.44556,3.17923l-15.85248,12.19422l-2.45411,-3.19034l-10.31692,7.92459l2.45967,3.19757l-15.85248,12.19422l-2.46821,-3.20868l-3.25443,2.49978l-14.5667,-18.93671l3.2507,-2.50464l-2.4721,-3.21373l15.85248,-12.19422l2.46244,3.20117l10.30508,-7.93998l-2.45616,-3.19301l15.85248,-12.19422l2.44651,3.18046l10.30508,-7.93998l-2.44023,-3.17229l15.85248,-12.19422l2.43057,3.15974z"),r.paths.push("M183,164.5l24,0l0,5.5l4,0l0,20l-4,0l0,10l4,0l0,20l-4,0l0,26l-20.50293,15.74863l2.40582,3.12757l-15.85248,12.19422l-2.41437,-3.13868l-7.93051,6.09155l2.41864,3.14423l-15.85248,12.19422l-2.42719,-3.15534l-3.25443,2.49978l-14.65408,-19.0503l3.2507,-2.50464l-2.42574,-3.15347l15.85248,-12.19422l2.41609,3.14092l7.92141,-6.10338l-2.41126,-3.13464l15.85248,-12.19422l2.40161,3.12209l11.20625,-8.63432l0,-14l-4,0l0,-20l4,0l0,-10l-4,0l0,-20l4,0z"),r.paths.push("M183,74.5l24,0l0,5.5l4,0l0,20l-4,0l0,10l4,0l0,20l-4,0l0,10l4,0l0,20l-4,0l0,4.5l-24,0l0,-4.5l-4,0l0,-20l4,0l0,-10l-4,0l0,-20l4,0l0,-10l-4,0l0,-20l4,0z"),r.paths.push("M120,12l0,-24l5,0l0,-4l20,0l0,4l10,0l0,-4l20,0l0,4l32,0l0,32l4,0l0,20l-4,0l0,10l4,0l0,20l-4,0l0,4.5l-24,0l0,-4.5l-4,0l0,-20l4,0l0,-10l-4,0l0,-20l4,0l0,-8l-8,0l0,4l-20,0l0,-4l-10,0l0,4l-20,0l0,-4z"),r.paths.push("M-120,12l0,-24l5,0l0,-4l20,0l0,4l10,0l0,-4l20,0l0,4l10,0l0,-4l20,0l0,4l10,0l0,-4l20,0l0,4l10,0l0,-4l20,0l0,4l10,0l0,-4l20,0l0,4l10,0l0,-4l20,0l0,4l10,0l0,-4l20,0l0,4l5,0l0,24l-5,0l0,4l-20,0l0,-4l-10,0l0,4l-20,0l0,-4l-10,0l0,4l-20,0l0,-4l-10,0l0,4l-20,0l0,-4l-10,0l0,4l-20,0l0,-4l-10,0l0,4l-20,0l0,-4l-10,0l0,4l-20,0l0,-4l-10,0l0,4l-20,0l0,-4z"),r.paths.push("M-183,75.5l-24,0l0,-5.5l-4,0l0,-20l4,0l0,-10l-4,0l0,-20l4,0l0,-32l32,0l0,-4l20,0l0,4l10,0l0,-4l20,0l0,4l5,0l0,24l-5,0l0,4l-20,0l0,-4l-10,0l0,4l-20,0l0,-4l-8,0l0,8l4,0l0,20l-4,0l0,10l4,0l0,20l-4,0z"),r.paths.push("M-183,165.5l-24,0l0,-5.5l-4,0l0,-20l4,0l0,-10l-4,0l0,-20l4,0l0,-10l-4,0l0,-20l4,0l0,-4.5l24,0l0,4.5l4,0l0,20l-4,0l0,10l4,0l0,20l-4,0l0,10l4,0l0,20l-4,0z"),r.paths.push("M-127.51598,276.74998l-14.65245,19.04818l-4.67608,-3.59177l-2.42719,3.15534l-15.85248,-12.19422l2.41864,-3.14423l-7.93051,-6.09155l-2.41437,3.13868l-15.85248,-12.19422l2.40582,-3.12757l-20.50293,-15.74863l0,-26l-4,0l0,-20l4,0l0,-10l-4,0l0,-20l4,0l0,-4.5l24,0l0,4.5l4,0l0,20l-4,0l0,10l4,0l0,20l-4,0l0,14l11.20625,8.63432l2.40161,-3.12209l15.85248,12.19422l-2.41126,3.13464l7.92141,6.10338l2.41609,-3.14092l15.85248,12.19422l-2.42574,3.15347z"),r.paths.push("M-51.45593,335.35363l-14.56507,18.93459l-4.67608,-3.59177l-2.46821,3.20868l-15.85248,-12.19422l2.45967,-3.19757l-10.31692,-7.92459l-2.45411,3.19034l-15.85248,-12.19422l2.44556,-3.17923l-10.31692,-7.92459l-2.44001,3.17201l-15.85248,-12.19422l2.43146,-3.1609l-3.25443,-2.49978l14.65245,-19.04818l3.2507,2.50464l2.43057,-3.15974l15.85248,12.19422l-2.44023,3.17229l10.30508,7.93998l2.44651,-3.18046l15.85248,12.19422l-2.45616,3.19301l10.30508,7.93998l2.46244,-3.20117l15.85248,12.19422l-2.4721,3.21373z"),r.paths.push("M52.87594,334.25952l14.5667,18.93671l-4.67608,3.59177l2.47249,3.21423l-15.85248,12.19422l-2.48103,-3.22534l-7.93051,6.09155l2.4853,3.23089l-15.85248,12.19422l-2.49385,-3.242l-23.114,17.75423l-23.114,-17.75423l-2.49385,3.242l-15.85248,-12.19422l2.4853,-3.23089l-7.93051,-6.09155l-2.48103,3.22534l-15.85248,-12.19422l2.47249,-3.21423l-3.25443,-2.49978l14.56507,-18.93459l3.2507,2.50464l2.47692,-3.22l15.85248,12.19422l-2.48658,3.23255l7.92141,6.10338l2.49141,-3.23883l15.85248,12.19422l-2.50106,3.25138l8.59817,6.62482l8.59817,-6.62482l-2.50106,-3.25138l15.85248,-12.19422l2.49141,3.23883l7.92141,-6.10338l-2.48658,-3.23255l15.85248,-12.19422l2.47692,3.22z"),r}return a(t,e),s(t,[{key:"render",value:function(){var e=this;return l.default.createElement("group",null,this.paths.map(function(t,n){return l.default.createElement(y,{path:t,position:e.props.position,key:n})}))}}]),t}(l.default.Component),y=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=r.props.path;return r.shape=(new p.default).transformSVGPath(a),r}return a(t,e),s(t,[{key:"render",value:function(){return l.default.createElement("mesh",{position:new h.default.Vector3(0,0,this.props.position)},l.default.createElement("extrudeGeometry",{amount:4*f.SCALE,bevelEnabled:!1},l.default.createElement("shape",null,this.shape)),l.default.createElement("meshBasicMaterial",{color:"yellow",wireframe:!1}))}}]),t}(l.default.Component)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(15),l=r(u),c=n(1),h=r(c),f=n(44),p=n(65),d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"componentWillMount",value:function(){this.rotation=new h.default.Euler(270*p.DEGS_TO_RADS,0,0),this.position=new h.default.Vector3(0,(-.1),0),this.mapquestToken="MPklnE5qTp0V4UI8anLBAJjsEkf9ud82",this.imgSize=1024,this.mapZoom=18}},{key:"render",value:function(){return l.default.createElement("mesh",{rotation:this.rotation,position:this.position,receiveShadow:!0},l.default.createElement("meshBasicMaterial",{color:16185078,wireframe:!1,side:h.default.DoubleSide,transparent:!0,opacity:.5},l.default.createElement("texture",{url:this.props.textureURL})),l.default.createElement("planeGeometry",{width:80,height:80,widthSegments:1,heightSegments:1}))}}]),t}(l.default.Component),m=function(e){return{textureURL:e.data.static_map}};t.default=(0,f.connect)(m)(d)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(15),l=r(u),c=n(44),h=n(102),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return l.default.createElement("div",{id:"hud"},l.default.createElement("p",null,"floor area: ",this.props.area.toFixed(1),"m²"),l.default.createElement("p",null,"roofing: ",this.props.roofArea.toFixed(1),"m² / £",parseInt(this.props.roofTotal,10)),l.default.createElement("p",null,"cladding: ",this.props.claddingArea.toFixed(1),"m² / £",parseInt(this.props.claddingTotal,10)),l.default.createElement("p",null,"frames: ",this.props.frameBoxCount),l.default.createElement("p",null,"total: £",this.props.total.toFixed(2)))}}]),t}(l.default.Component),p=function(e){return{total:e.data.costings.total,area:(0,h.buildingAreaSelector)(e),roofArea:(0,h.roofingAreaSelector)(e),roofTotal:(0,h.roofingTotalSelector)(e),claddingArea:(0,h.claddingAreaSelector)(e),claddingTotal:(0,h.claddingTotalSelector)(e),frameBoxCount:(0,h.frameBoxCountSelector)(e)}},d=function(e){return{}};t.default=(0,c.connect)(p,d)(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(15),l=r(u),c=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=this;return l.default.createElement("div",{id:"lens-buttons"},l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("a",{onClick:function(){return e.props.setLens("GROUND")}},"Ground")),l.default.createElement("li",null,l.default.createElement("a",{onClick:function(){return e.props.setLens("CROSS")}},"Cross-Section")),l.default.createElement("li",null,l.default.createElement("a",{onClick:function(){return e.props.setLens("BASIC")}},"Basic"))))}}]),t}(l.default.Component);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(15),o=r(i),a=n(201),s=r(a),u=n(86),l=n(220),c=r(l),h=n(208),f=r(h),p=n(371),d=r(p),m=(0,u.createStore)(c.default,(0,u.compose)((0,u.applyMiddleware)(d.default),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));s.default.render(o.default.createElement(f.default,{store:m}),document.getElementById("root"))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{roofing:"EPDM",cladding:"LARCH",length:5},t=arguments[1];switch(t.type){case"SET_LENGTH":return n({},e,{length:t.payload});case"SET_ROOFING":return n({},e,{roofing:t.payload});case"SET_CLADDING":return n({},e,{cladding:t.payload});default:return e}};t.default=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:0,site:[],static_map:"",costings:{total:0,categories:[]}},t=arguments[1];switch(t.type){case"SET_DATA":return t.payload;default:return e}};t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:3,height:3},t=arguments[1];switch(t.type){case"SET_FRAME_WIDTH":return n({},e,{width:t.payload});case"SET_FRAME_HEIGHT":return n({},e,{height:t.payload});default:return e}};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(86),o=n(217),a=r(o),s=n(218),u=r(s),l=n(219),c=r(l);t.default=(0,i.combineReducers)({data:u.default,frame:c.default,building:a.default})},7,function(e,t,n){"use strict";function r(e){var t=new i(i._61);return t._81=1,t._65=e,t}var i=n(103);e.exports=i;var o=r(!0),a=r(!1),s=r(null),u=r(void 0),l=r(0),c=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return u;if(e===!0)return o;if(e===!1)return a;if(0===e)return l;if(""===e)return c;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(n){return new i(function(e,t){t(n)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(a,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._81;)s=s._65;return 1===s._81?r(a,s._65):(2===s._81&&n(s._65),void s.then(function(e){
r(a,e)},n))}var u=s.then;if("function"==typeof u){var l=new i(u.bind(s));return void l.then(function(e){r(a,e)},n)}}t[a]=s,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)r(a,t[a])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";function r(){l=!1,s._10=null,s._97=null}function i(e){function t(t){(e.allRejections||a(h[t].error,e.whitelist||u))&&(h[t].displayId=c++,e.onUnhandled?(h[t].logged=!0,e.onUnhandled(h[t].displayId,h[t].error)):(h[t].logged=!0,o(h[t].displayId,h[t].error)))}function n(t){h[t].logged&&(e.onHandled?e.onHandled(h[t].displayId,h[t].error):h[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+h[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+h[t].displayId+".")))}e=e||{},l&&r(),l=!0;var i=0,c=0,h={};s._10=function(e){2===e._81&&h[e._72]&&(h[e._72].logged?n(e._72):clearTimeout(h[e._72].timeout),delete h[e._72])},s._97=function(e,n){0===e._45&&(e._72=i++,h[e._72]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._72),a(n,u)?100:2e3),logged:!1})}}function o(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):");var n=(t&&(t.stack||t))+"";n.split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=n(103),u=[ReferenceError,TypeError,RangeError],l=!1;t.disable=r,t.enable=i},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function u(e){var t=new FileReader;return t.readAsText(e),a(t)}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob?(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=o(this);return e?e:Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(h.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=c(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function f(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function p(e){var t=new i,n=(e.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();t.append(r,i)}),t}function d(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof i?t.headers:new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];i||(i=[],this.map[e]=i),i.push(r)},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},i.prototype.getAll=function(e){return this.map[t(e)]||[]},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=[n(r)]},i.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},m.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this)},l.call(h.prototype),l.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},d.error=function(){var e=new d(null,{status:0,statusText:""});return e.type="error",e};var g=[301,302,303,307,308];d.redirect=function(e,t){if(g.indexOf(t)===-1)throw new RangeError("Invalid status code");return new d(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=h,e.Response=d,e.fetch=function(e,t){return new Promise(function(n,r){function i(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var o;o=h.prototype.isPrototypeOf(e)&&!t?e:new h(e,t);var a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:p(a),url:i()},t="response"in a?a.response:a.responseText;n(new d(t,e))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials&&(a.withCredentials=!0),"responseType"in a&&m.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(300),a=r(o),s=n(286),u=r(s),l=n(306),c=r(l),h=n(298),f=r(h),p=n(18),d=r(p),m=n(290),v=r(m),g=n(288),y=r(g),_=n(289),b=r(_),w=n(287),x=r(w),E=n(49),M=r(E),C=n(295),S=r(C),T=n(296),P=r(T),O=n(297),A=r(O),R=n(299),k=r(R),L=n(269),D=r(L),I=n(270),j=r(I),N=n(272),B=r(N),U=n(271),F=r(U),V=n(302),z=r(V),G=n(116),H=r(G),W=n(303),q=r(W),X=n(305),Y=r(X),K=n(304),Z=r(K),Q=n(244),J=r(Q),$=n(238),ee=r($),te=n(237),ne=r(te),re=n(263),ie=r(re),oe=n(248),ae=r(oe),se=n(249),ue=r(se),le=n(250),ce=r(le),he=n(251),fe=r(he),pe=n(245),de=r(pe),me=n(247),ve=r(me),ge=n(264),ye=r(ge),_e=n(240),be=r(_e),we=n(239),xe=r(we),Ee=n(252),Me=r(Ee),Ce=n(241),Se=r(Ce),Te=n(246),Pe=r(Te),Oe=n(266),Ae=r(Oe),Re=n(267),ke=r(Re),Le=n(243),De=r(Le),Ie=n(268),je=r(Ie),Ne=n(242),Be=r(Ne),Ue=n(265),Fe=r(Ue),Ve=n(253),ze=r(Ve),Ge=n(261),He=r(Ge),We=n(259),qe=r(We),Xe=n(258),Ye=r(Xe),Ke=n(256),Ze=r(Ke),Qe=n(260),Je=r(Qe),$e=n(254),et=r($e),tt=n(255),nt=r(tt),rt=n(257),it=r(rt),ot=n(262),at=r(ot),st=n(280),ut=r(st),lt=n(275),ct=r(lt),ht=n(279),ft=r(ht),pt=n(277),dt=r(pt),mt=n(114),vt=r(mt),gt=n(281),yt=r(gt),_t=n(283),bt=r(_t),wt=n(301),xt=r(wt),Et=n(285),Mt=r(Et),Ct=n(284),St=r(Ct),Tt=n(273),Pt=r(Tt),Ot=n(274),At=r(Ot),Rt=n(276),kt=r(Rt),Lt=n(278),Dt=r(Lt),It=n(282),jt=r(It),Nt=n(293),Bt=r(Nt),Ut=n(292),Ft=r(Ut),Vt=n(291),zt=r(Vt),Gt=n(294),Ht=r(Gt),Wt=function e(t){i(this,e),this.react3RendererInstance=t,this.descriptors={react3:new a.default(t),module:new u.default(t),viewport:new c.default(t),scene:new f.default(t),object3D:new d.default(t),group:new v.default(t),orthographicCamera:new y.default(t),perspectiveCamera:new b.default(t),cubeCamera:new x.default(t),mesh:new M.default(t),line:new S.default(t),lineSegments:new P.default(t),points:new A.default(t),sprite:new k.default(t),meshBasicMaterial:new ct.default(t),meshPhongMaterial:new ft.default(t),meshLambertMaterial:new dt.default(t),pointsMaterial:new ut.default(t),shaderMaterial:new vt.default(t),rawShaderMaterial:new yt.default(t),lineBasicMaterial:new Pt.default(t),lineDashedMaterial:new At.default(t),meshDepthMaterial:new kt.default(t),meshNormalMaterial:new Dt.default(t),spriteMaterial:new jt.default(t),texture:new bt.default(t),geometry:new J.default(t),bufferGeometry:new ee.default(t),boxGeometry:new ne.default(t),sphereGeometry:new ie.default(t),parametricGeometry:new ae.default(t),planeBufferGeometry:new ue.default(t),planeGeometry:new ce.default(t),polyhedronGeometry:new fe.default(t),icosahedronGeometry:new de.default(t),octahedronGeometry:new ve.default(t),tetrahedronGeometry:new ye.default(t),circleGeometry:new be.default(t),circleBufferGeometry:new xe.default(t),ringGeometry:new Me.default(t),cylinderGeometry:new Se.default(t),latheGeometry:new Pe.default(t),torusGeometry:new Ae.default(t),torusKnotGeometry:new ke.default(t),extrudeGeometry:new De.default(t),tubeGeometry:new je.default(t),dodecahedronGeometry:new Be.default(t),textGeometry:new Fe.default(t),shapeGeometry:new ze.default(t),shape:new He.default(t),moveTo:new qe.default(t),lineTo:new Ye.default(t),bezierCurveTo:new Ze.default(t),quadraticCurveTo:new Je.default(t),absArc:new et.default(t),absEllipse:new nt.default(t),hole:new it.default(t),splineThru:new at.default(t),ambientLight:new D.default(t),directionalLight:new j.default(t),spotLight:new B.default(t),pointLight:new F.default(t),resources:new z.default(t),materialResource:new xt.default(t),geometryResource:new H.default(t),shapeGeometryResource:new q.default(t),textureResource:new Y.default(t),shapeResource:new Z.default(t),uniforms:new Mt.default(t),uniform:new St.default(t),cameraHelper:new Bt.default(t),axisHelper:new Ft.default(t),arrowHelper:new zt.default(t),gridHelper:new Ht.default(t)}};e.exports=Wt},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return e}function s(e,t){console.log("deleteListener",e,t)}function u(e,t,n,r){console.log("enqueuePutListener",e,t,n,r)}function l(e,t,n){e.splice(n,0,e.splice(t,1)[0])}var c,h,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(27),d=r(p),m=n(136),v=r(m),g=n(6),y=r(g),_=n(120),b=r(_),w=n(146),x=r(w),E=n(20),M=(r(E),n(11)),C=(r(M),n(14)),S=r(C),T=n(140),P=r(T),O=n(105),A=r(O),R=n(69),k=r(R),L=n(107),D=r(L),I=n(106),j=r(I),N=function e(){var t=this;o(this,e),this.wantRemount=!1,this.onTrigger=function(){},this.trigger=function(){t.wantRemount=!0,t.onTrigger()}},B={},U=(b.default,b.default,function(e){return e.threeObject}),F=v.default.Mixin,V=(h=c=function(){function e(t,n){var r=this;o(this,e),this.updateChildren=F.updateChildren.bind(this),this._mountChildAtIndex=F._mountChildAtIndex.bind(this),this._unmountChild=F._unmountChild.bind(this),this.unmountChildren=F.unmountChildren.bind(this),this._currentElement=t,this._react3RendererInstance=n,this._elementType=t.type,this._renderedChildren=[],this._hostMarkup=null,this._hostParent=null,this._rootNodeID=0,this._hostID=0,this._hostContainerInfo=null,this._threeObject=null,this._topLevelWrapper=null,this._markup=null,this._nodeWithLegacyProperties=null,this._forceRemountOfComponent=!1,this._flags=0,this.threeElementDescriptor=n.threeElementDescriptors[t.type],this.threeElementDescriptor||(0,y.default)(!1),"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"http://localhost:3001",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&(this.highlightComponent=function(){r.threeElementDescriptor.highlight(r._threeObject)},this.hideHighlight=function(){r.threeElementDescriptor.hideHighlight(r._threeObject)}),this.remountTrigger=new N,this.remountTrigger.onTrigger=function(){r._forceRemountOfComponent=!0}}return f(e,[{key:"getHostMarkup",value:function(){return this._markup}},{key:"getHostNode",value:function(){return this._markup}},{key:"mountComponent",value:function(e,t,n,r){var o;this._rootNodeID=this._react3RendererInstance.globalIdCounter++,this._hostID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var a=this._currentElement;this._threeObject=this.threeElementDescriptor.construct(a.props),this.threeElementDescriptor.applyInitialProps(this._threeObject,a.props),this.threeElementDescriptor.placeRemountTrigger(this._threeObject,this.remountTrigger.trigger);var s=a.props.children,u=void 0;u=s?this.mountChildren(s,e,r):[];var l=(o={},i(o,k.default,this._hostID),i(o,"_rootInstance",null),i(o,"elementType",a.type),i(o,"threeObject",this._threeObject),i(o,"parentMarkup",null),i(o,"childrenMarkup",u),i(o,"toJSON",function(){return"---MARKUP---"}),o);(0,y.default)(!!this._threeObject.userData),Object.assign(this._threeObject.userData,{object3D:this._threeObject,react3internalComponent:this,toJSON:function(){return"---USERDATA---"},markup:l});var c=this._react3RendererInstance.threeElementDescriptors;if(u&&u.length>0){this.threeElementDescriptor.addChildren(this._threeObject,u.map(U));for(var h=0;h<u.length;++h){var f=u[h],p=c[f.elementType];f.parentMarkup=l,p.setParent(f.threeObject,this._threeObject)}}return this._markup=l,j.default.precacheMarkup(this,this._markup),this._flags|=A.default.hasCachedChildMarkups,l}},{key:"_reconcilerInstantiateChildren",value:function(e,t,n){return this._react3RendererInstance.instantiateChildren(e,t,n,0)}},{key:"_reconcilerUpdateChildren",value:function(e,t,n,r,i,o){var a=void 0,s=0;return a=(0,x.default)(t,s),this._react3RendererInstance.updateChildren(e,a,n,r,i,this,this._hostContainerInfo,o,s),a}},{key:"mountChildren",value:function(e,t,n){var r=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=r;var i=[],o=0;if(r)for(var a=Object.keys(r),s=0;s<a.length;++s){var u=a[s],l=r[u],c=0,h=d.default.mountComponent(l,t,this,this._hostContainerInfo,n,c);l._mountIndex=o,i.push(h),o++}return i}},{key:"moveChild",value:function(e,t,n){if(e._mountIndex!==t){this.threeElementDescriptor.moveChild(this._threeObject,e._threeObject,t,e._mountIndex);var r=this._markup;l(r.childrenMarkup,n,t)}}},{key:"receiveComponent",value:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n),this._forceRemountOfComponent&&(this._currentElement=null)}},{key:"updateComponent",value:function(e,t,n,r){var i=t.props,o=this._currentElement.props;t.type!==n.type&&(0,y.default)(!1),this._updateObjectProperties(i,o,e,r),this._forceRemountOfComponent||this._updateChildrenObjects(o,e,a(r,this))}},{key:"_updateChildrenObjects",value:function(e,t,n){var r=e.children||null;this.updateChildren(r,t,n)}},{key:"_updateObjectProperties",value:function(e,t,n){var r=this.remountTrigger;r.wantRemount=!1,this.threeElementDescriptor.beginPropertyUpdates(this._threeObject);for(var i=Object.keys(e),o=0;o<i.length;++o){var a=i[o];if(!t.hasOwnProperty(a)&&"children"!==a){if(r.wantRemount)break;B.hasOwnProperty(a)?e[a]&&s(this._rootNodeID,a):this.threeElementDescriptor.deleteProperty(this._threeObject,a)}}for(var l=Object.keys(t),c=0;c<l.length;++c){var h=l[c];if("children"!==h){if(r.wantRemount)break;var f=t[h],p=e[h];f!==p&&(B.hasOwnProperty(h)?f?u(this._rootNodeID,h,f,n):p&&s(this._rootNodeID,h):this.threeElementDescriptor.updateProperty(this._threeObject,h,f))}}this.threeElementDescriptor.completePropertyUpdates(this._threeObject)}},{key:"_removeAllChildRefs",value:function(){var e=this._renderedChildren;if(e)for(var t=Object.keys(e),n=0;n<t.length;++n){var r=t[n],i=e[r];i&&i._currentElement&&i._currentElement.ref&&(P.default.detachRefs(i,i._currentElement),i._currentElement=S.default.cloneElement(i._currentElement,{ref:null})),i._removeAllChildRefs()}}},{key:"unmountComponent",value:function(e){if(null!==this._threeObject&&this.threeElementDescriptor.componentWillUnmount(this._threeObject),this._forceRemountOfComponent&&this._removeAllChildRefs(),this.unmountChildren(e),j.default.uncacheMarkup(this),null!==this._threeObject&&this.threeElementDescriptor.unmount(this._threeObject),this._markup=null,this._rootNodeID=0,this._nodeWithLegacyProperties){var t=this._nodeWithLegacyProperties;t._reactInternalComponent=null,this._nodeWithLegacyProperties=null}}},{key:"emptyJson",value:function(){return"..."}},{key:"getPublicInstance",value:function(){return this._markup.threeObject}},{key:"_updateChildren",value:function(e,t,n){var r=this._renderedChildren,i={},o=[],a=this._reconcilerUpdateChildren(r,e,o,i,t,n);if(a||r){var s=this.remountTrigger;s.wantRemount=!1,this.threeElementDescriptor.beginChildUpdates(this._threeObject);var u=0,l=0,c=0;if(a)for(var h=Object.keys(a),f=0;f<h.length;++f){var p=h[f];if(!s.wantRemount){var d=r&&r[p],m=a[p];if(d===m)this.moveChild(d,u,l),l=Math.max(d._mountIndex,l),d._mountIndex=u;else{if(d){l=Math.max(d._mountIndex,l);var v=i[p];(0,y.default)(!!v,"Removed markup map should contain this child"),delete i[p],this._unmountChild(d,v)}s.wantRemount||(this._mountChildAtIndex(m,o[c],null,u,t,n),c++)}u++}}for(var g=Object.keys(i),_=0;_<g.length;++_){var b=g[_];this._unmountChild(r[b],i[b])}this._renderedChildren=a,this.threeElementDescriptor.completeChildUpdates(this._threeObject)}}},{key:"createChild",value:function(e,t,n){var r=e._mountIndex;this._markup.childrenMarkup.splice(r,0,n),n.parentMarkup=this._markup,this.threeElementDescriptor.addChild(this._threeObject,n.threeObject,r);var i=this._react3RendererInstance.threeElementDescriptors[n.elementType];i.setParent(n.threeObject,this._threeObject)}},{key:"removeChild",value:function(t,n){this.threeElementDescriptor.removeChild(this._threeObject,n.threeObject),t instanceof e?t.threeElementDescriptor.removedFromParent(n.threeObject):t instanceof D.default?n.threeObject.userData.react3internalComponent.threeElementDescriptor.removedFromParent(n.threeObject):(0,y.default)(!1);for(var r=this._markup.childrenMarkup,i=0;i<r.length;i++){var o=r[i];if(o.threeObject===n.threeObject)return r.splice(i,1),void delete o.parentMarkup}(0,y.default)(!1)}}]),e}(),c.displayName="React3Component",h);e.exports=V},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,u,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(15),f=r(h),p=n(321),d=r(p),m=n(1),v=r(m),g=n(45),y=r(g),_=n(9),b=r(_),w=f.default.PropTypes,x=(u=s=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.shouldComponentUpdate=d.default.shouldComponentUpdate,r._onRecreateCanvas=function(){r.setState({canvasKey:r.state.canvasKey+1})},r._canvasRef=function(e){r._canvas=e,r.props.canvasRef&&r.props.canvasRef(e)},r.state={canvasKey:0},r}return a(t,e),c(t,[{key:"componentDidMount",value:function(){this.react3Renderer=new y.default,this._render()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props;t.canvasRef!==e.canvasRef&&(t.canvasRef&&t.canvasRef(null),e.canvasRef&&e.canvasRef(this._canvas))}},{key:"componentDidUpdate",value:function(){this._render()}},{key:"componentWillUnmount",value:function(){this.react3Renderer.dispose(),delete this.react3Renderer}},{key:"_render",value:function(){var e=this._canvas,t=l({},this.props);delete t.canvasStyle,delete t.canvasRef,this.react3Renderer.render(f.default.createElement("react3",l({},t,{onRecreateCanvas:this._onRecreateCanvas}),this.props.children),e)}},{key:"render",value:function(){var e=this.state.canvasKey;return f.default.createElement("canvas",{ref:this._canvasRef,key:e,width:this.props.width,height:this.props.height,style:l({},this.props.canvasStyle,{width:this.props.width,height:this.props.height})})}}]),t}(f.default.Component),s.propTypes={context:w.string,width:w.number.isRequired,height:w.number.isRequired,children:w.any,canvasStyle:w.any,gammaInput:w.bool,gammaOutput:w.bool,sortObjects:w.bool,mainCamera:w.string,onAnimate:w.func,clearColor:w.oneOfType([(0,b.default)(v.default.Color),w.number,w.string]),shadowMapEnabled:w.bool,shadowMapType:w.oneOf([v.default.BasicShadowMap,v.default.PCFShadowMap,v.default.PCFSoftShadowMap]),shadowMapCullFace:w.oneOf([v.default.CullFaceNone,v.default.CullFaceBack,v.default.CullFaceFront,v.default.CullFaceFrontBack]),shadowMapDebug:w.bool,pixelRatio:w.number,antialias:w.oneOfType([w.bool,w.number]),canvasRef:w.func},s.defaultProps={context:"3d"},s.findTHREEObject=y.default.findTHREEObject,s.eventDispatcher=y.default.eventDispatcher,u);e.exports=x},function(e,t){"use strict";function n(e,t){var n={_topLevelWrapper:e,_idCounter:1};return n}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=(r(u),n(22)),c=r(l),h=function(e){function t(e,n,r,a,s,u){i(this,t);var l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return l.x=e,l.y=n,l.radius=r,l.startAngle=a,l.endAngle=s,l.clockwise=u,l}return a(t,e),s(t,[{key:"performAction",value:function(e){e.absarc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.clockwise)}}]),t}(c.default);e.exports=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=(r(u),n(22)),c=r(l),h=function(e){function t(e,n,r,a,s,u,l,c){i(this,t);var h=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return h.x=e,h.y=n,h.xRadius=r,h.yRadius=a,h.startAngle=s,h.endAngle=u,h.clockwise=l,h.rotation=c,h}return a(t,e),s(t,[{key:"performAction",value:function(e){e.absellipse(this.x,this.y,this.xRadius,this.yRadius,this.startAngle,this.endAngle,this.clockwise,this.rotation)}}]),t}(c.default);e.exports=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=(r(u),n(22)),c=r(l),h=function(e){function t(e,n,r,a,s,u){i(this,t);var l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return l.cp1X=e,l.cp1Y=n,l.cp2X=r,l.cp2Y=a,l.aX=s,l.aY=u,l}return a(t,e),s(t,[{key:"performAction",value:function(e){e.bezierCurveTo(this.cp1X,this.cp1Y,this.cp2X,this.cp2Y,this.aX,this.aY)}}]),t}(c.default);e.exports=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=(r(u),n(22)),c=r(l),h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.x=e,r.y=n,r}return a(t,e),s(t,[{key:"performAction",value:function(e){e.lineTo(this.x,this.y)}}]),t}(c.default);e.exports=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=(r(u),n(22)),c=r(l),h=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.x=e,r.y=n,r}return a(t,e),s(t,[{key:"performAction",value:function(e){e.moveTo(this.x,this.y)}}]),t}(c.default);e.exports=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=(r(u),n(22)),c=r(l),h=function(e){function t(e,n,r,a){i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.cpX=e,s.cpY=n,s.x=r,s.y=a,s}return a(t,e),s(t,[{key:"performAction",value:function(e){e.quadraticCurveTo(this.cpX,this.cpY,this.x,this.y)}}]),t}(c.default);e.exports=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=(r(u),n(22)),c=r(l),h=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.points=e,n}return a(t,e),s(t,[{key:"performAction",value:function(e){e.splineThru(this.points)}}]),t}(c.default);e.exports=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(10),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["width","height","depth"].forEach(function(e){n.hasProp(e,{type:h.default.number.isRequired,update:n.triggerRemount,default:1})}),["widthSegments","heightSegments","depthSegments"].forEach(function(e){n.hasProp(e,{type:h.default.number,update:n.triggerRemount,default:1})}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.width,n=e.height,r=e.depth,i=e.widthSegments,o=e.heightSegments,a=e.depthSegments;return new l.default.BoxGeometry(t,n,r,i,o,a)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(10),p=r(f),d=n(9),m=r(d),v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["vertices","colors","faceVertexUvs","faces","dynamic"].forEach(function(e){n.removeProp(e)}),["position","normal","color"].forEach(function(e){n.hasProp(e,{type:h.default.oneOfType([(0,m.default)(l.default.BufferAttribute),(0,m.default)(l.default.InterleavedBufferAttribute)]),update:function(t,n){n?t.addAttribute(e,n):t.removeAttribute(e)},updateInitial:!0,default:void 0})}),n.hasProp("index",{type:h.default.oneOfType([(0,m.default)(l.default.BufferAttribute),(0,m.default)(l.default.InterleavedBufferAttribute)]),update:function(e,t){e.setIndex(t)},updateInitial:!0,default:void 0}),n}return a(t,e),s(t,[{key:"construct",value:function(){return new l.default.BufferGeometry}}]),t}(p.default);e.exports=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(68),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["radius","segments","thetaStart","thetaLength"].forEach(function(e){n.hasProp(e,{type:h.default.number,update:n.updateCacheAndReplace.bind(n,e),default:void 0})}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.radius,n=e.segments,r=e.thetaStart,i=e.thetaLength;return new l.default.CircleBufferGeometry(t,n,r,i)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(10),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["radius","segments","thetaStart","thetaLength"].forEach(function(e){n.hasProp(e,{type:h.default.number,update:n.triggerRemount,default:void 0})}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.radius,n=e.segments,r=e.thetaStart,i=e.thetaLength;return new l.default.CircleGeometry(t,n,r,i)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(10),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["radiusTop","radiusBottom","height","radialSegments","heightSegments","openEnded","thetaStart","thetaLength"].forEach(function(e){n.hasProp(e,{type:h.default.number,update:n.triggerRemount,default:void 0})}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.radiusTop,n=e.radiusBottom,r=e.height,i=e.radialSegments,o=e.heightSegments,a=e.openEnded,s=e.thetaStart,u=e.thetaLength;return new l.default.CylinderGeometry(t,n,r,i,o,a,s,u)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(10),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("radius",{type:h.default.number,update:n.triggerRemount,default:1}),n.hasProp("detail",{type:h.default.number,update:n.triggerRemount,default:0}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.radius,n=e.detail;return new l.default.DodecahedronGeometry(t,n)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(1),h=r(c),f=n(2),p=r(f),d=n(112),m=r(d),v=n(9),g=r(v),y=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.hasProp("settings",{type:p.default.any,update:function(e,t){e.userData._settings=t},updateInitial:!0,default:void 0}),["steps","amount","bevelThickness","bevelSize","bevelSegments","extrudeMaterial"].forEach(function(e){n.hasProp(e,{type:p.default.number,update:function(t,n){void 0===n?delete t.userData._options[e]:t.userData._options[e]=n,t.userData._needsToRefreshGeometry=!0},default:void 0})});var r=["bevelEnabled","extrudePath","frames"],a=[p.default.bool,(0,g.default)(h.default.CurvePath),(0,g.default)(h.default.TubeGeometry.FrenetFrames)];return r.forEach(function(e,t){n.hasProp(e,{type:a[t],update:function(t,n){void 0===n?delete t.userData._options[e]:t.userData._options[e]=n,t.userData._needsToRefreshGeometry=!0},default:void 0})}),n}return a(t,e),u(t,[{key:"refreshGeometry",value:function(e){var t=e.userData._shapeCache.filter(function(e){return!!e}).concat(e.userData._shapesFromProps);e.fromGeometry(new h.default.ExtrudeGeometry(t,s({},e.userData._options,e.userData._settings)))}},{key:"getOptions",value:function(e){var n=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getOptions",this).call(this,e);return["steps","amount","bevelEnabled","bevelThickness","bevelSize","bevelSegments","extrudePath","frames","extrudeMaterial"].forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}}]),t}(m.default);e.exports=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(10),p=r(f),d=n(9),m=r(d),v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("vertices",{override:!0,type:h.default.arrayOf((0,m.default)(l.default.Vector3)).isRequired,update:function(e,t){e.vertices!==t&&(e.vertices=t,e.verticesNeedUpdate=!0)},updateInitial:!0,default:[]}),n}return a(t,e),s(t,[{key:"construct",value:function(){return new l.default.Geometry}}]),t}(p.default);e.exports=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(47),h=r(c),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.radius,n=e.detail;return new l.default.IcosahedronGeometry(t,n)}}]),t}(h.default);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(10),p=r(f),d=n(9),m=r(d),v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["segments","phiStart","phiLength"].forEach(function(e){n.hasProp(e,{type:h.default.number,update:n.triggerRemount,default:void 0})}),n.hasProp("points",{type:h.default.arrayOf((0,m.default)(l.default.Vector2)).isRequired,update:n.triggerRemount,default:void 0}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.points,n=e.segments,r=e.phiStart,i=e.phiLength;return new l.default.LatheGeometry(t,n,r,i)}}]),t}(p.default);e.exports=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(47),h=r(c),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.radius,n=e.detail;return new l.default.OctahedronGeometry(t,n)}}]),t}(h.default);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(10),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["slices","stacks"].forEach(function(e){n.hasProp(e,{type:h.default.number.isRequired,update:n.triggerRemount,default:void 0})}),n.hasProp("parametricFunction",{type:h.default.func.isRequired,update:n.triggerRemount,default:void 0}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.parametricFunction,n=e.slices,r=e.stacks;return new l.default.ParametricGeometry(t,n,r)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(68),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["width","height"].forEach(function(e){n.hasProp(e,{type:h.default.number.isRequired,update:n.updateCacheAndReplace.bind(n,e),default:1})}),["widthSegments","heightSegments"].forEach(function(e){n.hasProp(e,{type:h.default.number,update:n.triggerRemount,default:1})}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.width,n=e.height,r=e.widthSegments,i=e.heightSegments;return new l.default.PlaneBufferGeometry(t,n,r,i)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(10),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["width","height"].forEach(function(e){n.hasProp(e,{type:h.default.number.isRequired,update:n.triggerRemount,default:void 0})}),["widthSegments","heightSegments"].forEach(function(e){n.hasProp(e,{type:h.default.number,update:n.triggerRemount,default:1})}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.width,n=e.height,r=e.widthSegments,i=e.heightSegments;return new l.default.PlaneGeometry(t,n,r,i)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(47),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("vertices",{override:!0,type:h.default.arrayOf(h.default.number).isRequired,update:n.triggerRemount,default:void 0}),n.hasProp("indices",{type:h.default.arrayOf(h.default.number).isRequired,update:n.triggerRemount,default:void 0}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.vertices,n=e.indices,r=e.radius,i=e.detail;return new l.default.PolyhedronGeometry(t,n,r,i)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(10),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["innerRadius","outerRadius","thetaSegments","phiSegments","thetaStart","thetaLength"].forEach(function(e){n.hasProp(e,{type:h.default.number,update:n.triggerRemount,default:void 0})}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.innerRadius,n=e.outerRadius,r=e.thetaSegments,i=e.phiSegments,o=e.thetaStart,a=e.thetaLength;return new l.default.RingGeometry(t,n,r,i,o,a)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),h=n(112),f=r(h),p=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"refreshGeometry",value:function(e){var t=e.userData._shapeCache.filter(function(e){return!!e}).concat(e.userData._shapesFromProps);e.fromGeometry(new c.default.ShapeGeometry(t,s({},e.userData._options)))}}]),t}(f.default);e.exports=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(28),h=r(c),f=n(230),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["x","y","radius","startAngle","endAngle"].forEach(function(e){n.hasProp(e,{type:l.default.number.isRequired,update:n.triggerRemount,default:0})}),n.hasProp("clockwise",{type:l.default.bool.isRequired,update:n.triggerRemount,default:!1}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.x,n=e.y,r=e.radius,i=e.startAngle,o=e.endAngle,a=e.clockwise;return new p.default(t,n,r,i,o,a)}}]),t}(h.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(28),h=r(c),f=n(231),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["x","y","xRadius","yRadius","startAngle","endAngle"].forEach(function(e){n.hasProp(e,{type:l.default.number.isRequired,update:n.triggerRemount,default:0})}),n.hasProp("clockwise",{type:l.default.bool,update:n.triggerRemount,default:!1}),n.hasProp("rotation",{type:l.default.number,update:n.triggerRemount,default:0}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.x,n=e.y,r=e.xRadius,i=e.yRadius,o=e.startAngle,a=e.endAngle,s=e.clockwise,u=e.rotation;return new p.default(t,n,r,i,o,a,s,u)}}]),t}(h.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(28),h=r(c),f=n(232),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["cp1X","cp1Y","cp2X","cp2Y","aX","aY"].forEach(function(e){n.hasProp(e,{type:l.default.number.isRequired,update:n.triggerRemount,default:0})}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.cp1X,n=e.cp1Y,r=e.cp2X,i=e.cp2Y,o=e.aX,a=e.aY;return new p.default(t,n,r,i,o,a)}}]),t}(h.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);
}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(113),d=r(p),m=n(110),v=r(m),g=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"construct",value:function(){return new v.default}},{key:"performChildAction",value:function(e,t){t.performAction(e.path)}},{key:"setParent",value:function(e,n){return(0,f.default)(n instanceof c.default.Shape,"Holes can only be added to shapes."),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n)}}]),t}(d.default);e.exports=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(28),h=r(c),f=n(233),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["x","y"].forEach(function(e){n.hasProp(e,{type:l.default.number.isRequired,update:n.triggerRemount,default:0})}),n}return a(t,e),s(t,[{key:"construct",value:function(e){return new p.default(e.x,e.y)}}]),t}(h.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(28),h=r(c),f=n(234),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["x","y"].forEach(function(e){n.hasProp(e,{type:l.default.number.isRequired,update:n.triggerRemount,default:0})}),n}return a(t,e),s(t,[{key:"construct",value:function(e){return new p.default(e.x,e.y)}}]),t}(h.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(28),h=r(c),f=n(235),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["cpX","cpY","x","y"].forEach(function(e){n.hasProp(e,{type:l.default.number.isRequired,update:n.triggerRemount,default:0})}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.cpX,n=e.cpY,r=e.x,i=e.y;return new p.default(t,n,r,i)}}]),t}(h.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),h=n(113),f=r(h),p=n(51),d=r(p),m=(0,d.default)(s=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"construct",value:function(e){return e.hasOwnProperty("points")?new c.default.Shape(e.points):new c.default.Shape}}]),t}(f.default))||s;e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(28),p=r(f),d=n(236),m=r(d),v=n(9),g=r(v),y=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("points",{type:h.default.arrayOf((0,g.default)(l.default.Vector2)).isRequired,update:n.triggerRemount,default:[]}),n}return a(t,e),s(t,[{key:"construct",value:function(e){return new m.default(e.points)}}]),t}(p.default);e.exports=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(68),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("radius",{type:h.default.number,update:n.updateCacheAndReplace.bind(n,"radius"),default:void 0}),["widthSegments","heightSegments"].forEach(function(e){n.hasProp(e,{type:h.default.number,update:n.triggerRemount,default:void 0})}),["phiStart","phiLength","thetaStart","thetaLength"].forEach(function(e){n.hasProp(e,{type:h.default.number,update:n.updateCacheAndReplace.bind(n,e),default:void 0})}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.radius,n=e.widthSegments,r=e.heightSegments,i=e.phiStart,o=e.phiLength,a=e.thetaStart,s=e.thetaLength;return new l.default.SphereBufferGeometry(t,n,r,i,o,a,s)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(47),h=r(c),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.radius,n=e.detail;return new l.default.TetrahedronGeometry(t,n)}}]),t}(h.default);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(10),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("text",{type:h.default.string.isRequired,update:n.triggerRemount,default:"TEXT MISSING"}),n.hasProp("font",{type:h.default.instanceOf(l.default.Font).isRequired,update:n.triggerRemount}),n.hasProp("size",{type:h.default.number.isRequired,update:n.triggerRemount}),n.hasProp("height",{type:h.default.number,update:n.triggerRemount,default:50}),n.hasProp("curveSegments",{type:h.default.number,update:n.triggerRemount,default:12}),n.hasProp("bevelEnabled",{type:h.default.bool,update:n.triggerRemount,default:!1}),n.hasProp("bevelThickness",{type:h.default.number,update:n.triggerRemount,default:10}),n.hasProp("bevelSize",{type:h.default.number,update:n.triggerRemount,default:8}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.text,n=e.font,r=e.size,i=e.height,o=e.curveSegments,a=e.bevelEnabled,s=e.bevelThickness,u=e.bevelSize;return new l.default.TextGeometry(t,{font:n,size:r,height:i,curveSegments:o,bevelEnabled:a,bevelThickness:s,bevelSize:u})}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(10),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["radius","tube","radialSegments","tubularSegments","arc"].forEach(function(e){n.hasProp(e,{type:h.default.number,update:n.triggerRemount,default:void 0})}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.radius,n=e.tube,r=e.radialSegments,i=e.tubularSegments,o=e.arc;return new l.default.TorusGeometry(t,n,r,i,o)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(10),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["radius","tube","tubularSegments","radialSegments","p","q","heightScale"].forEach(function(e){n.hasProp(e,{type:h.default.number,update:n.triggerRemount,default:void 0})}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.radius,n=e.tube,r=e.tubularSegments,i=e.radialSegments,o=e.p,a=e.q,s=e.heightScale;return new l.default.TorusKnotGeometry(t,n,r,i,o,a,s)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(10),p=r(f),d=n(9),m=r(d),v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("path",{type:(0,m.default)(l.default.Curve).isRequired,update:n.triggerRemount}),n.hasProp("segments",{type:h.default.number,update:n.triggerRemount,default:64}),n.hasProp("radius",{type:h.default.number,update:n.triggerRemount,default:1}),n.hasProp("radiusSegments",{type:h.default.number,update:n.triggerRemount,default:8}),n.hasProp("closed",{type:h.default.bool,update:n.triggerRemount,default:!1}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.path,n=e.segments,r=e.radius,i=e.radiusSegments,o=e.closed;return new l.default.TubeGeometry(t,n,r,i,o)}}]),t}(p.default);e.exports=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(48),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("intensity",{type:h.default.number,simple:!0,default:1}),n.hasColor(),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.color,n=e.intensity;return new l.default.AmbientLight(t,n)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=n(1),f=r(h),p=n(2),d=r(p),m=n(48),v=r(m),g=(u=s=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("intensity",{type:d.default.number,simple:!0,default:1}),n.hasProp("shadowCameraLeft",{type:d.default.number,updateInitial:!0,update:function(e,t,n){n&&(e.shadow.camera.left=t)},default:t.defaultShadowCameraLeft}),n.hasProp("shadowCameraBottom",{type:d.default.number,updateInitial:!0,update:function(e,t,n){n&&(e.shadow.camera.bottom=t)},default:t.defaultShadowCameraBottom}),n.hasProp("shadowCameraRight",{type:d.default.number,updateInitial:!0,update:function(e,t,n){n&&(e.shadow.camera.right=t)},default:t.defaultShadowCameraRight}),n.hasProp("shadowCameraTop",{type:d.default.number,updateInitial:!0,update:function(e,t,n){n&&(e.shadow.camera.top=t)},default:t.defaultShadowCameraTop}),n.hasColor(),n.hasDirection(),n}return a(t,e),l(t,[{key:"construct",value:function(e){var t=e.color,n=e.intensity,r=new f.default.DirectionalLight(t,n);return r.position.set(0,0,0),r}},{key:"unmount",value:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}}]),t}(v.default),s.defaultShadowCameraLeft=-5,s.defaultShadowCameraRight=5,s.defaultShadowCameraTop=5,s.defaultShadowCameraBottom=-5,u);e.exports=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),h=r(c),f=n(2),p=r(f),d=n(48),m=r(d),v=(u=s=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasColor(),["intensity","decay"].forEach(function(e){n.hasProp(e,{type:p.default.number,simple:!0,default:1})}),n.hasProp("distance",{type:p.default.number,simple:!0,default:0}),n.hasProp("shadowCameraFov",{type:p.default.number,updateInitial:!0,update:function(e,t,n){n&&(e.shadow.camera.fov=t)},default:t.defaultShadowCameraFov}),n.hasProp("shadowCameraAspect",{type:p.default.number,updateInitial:!0,update:function(e,t,n){n&&(e.shadow.camera.aspect=t)},default:t.defaultShadowCameraAspect}),n.removeProp("lookAt"),n.removeProp("rotation"),n.removeProp("quaternion"),n}return a(t,e),l(t,[{key:"construct",value:function(e){var t=e.color,n=e.intensity,r=e.distance,i=e.decay;return new h.default.PointLight(t,n,r,i)}}]),t}(m.default),s.defaultShadowCameraFov=90,s.defaultShadowCameraAspect=1,u);e.exports=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(48),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=[1,0,Math.PI/3,10,1,0];return["intensity","distance","angle","exponent","decay","penumbra"].forEach(function(e,t){n.hasProp(e,{type:h.default.number,simple:!0,default:r[t]})}),n.hasProp("shadowCameraFov",{type:h.default.number,updateInitial:!0,update:function(e,t,n){n&&(e.shadow.camera.fov=t)},default:50}),n.hasColor(),n.hasDirection(),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.color,n=e.intensity,r=e.distance,i=e.angle,o=e.exponent,a=e.decay;return new l.default.SpotLight(t,n,r,i,o,a)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(21),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasColor(),n.hasProp("linewidth",{type:h.default.number,simple:!0,default:1}),["linecap","linejoin"].forEach(function(e){n.hasProp(e,{type:h.default.oneOf(["round"]),simple:!0,default:"round"})}),n.hasProp("vertexColors",{type:h.default.oneOf([l.default.NoColors,l.default.FaceColors,l.default.VertexColors]),simple:!0,default:l.default.NoColors}),n.hasProp("fog",{type:h.default.bool,update:function(e,t,n){n&&(e.fog=t),e.needsUpdate=!0},updateInitial:!0,default:!0}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=this.getMaterialDescription(e);return new l.default.LineBasicMaterial(t)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(21),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasColor(),["linewidth","scale","gapSize"].forEach(function(e){n.hasProp(e,{type:h.default.number,simple:!0,default:1})}),n.hasProp("dashSize",{type:h.default.number,simple:!0,default:3}),["linecap","linejoin"].forEach(function(e){n.hasProp(e,{type:h.default.oneOf(["round"]),simple:!0,default:"round"})}),n.hasProp("vertexColors",{type:h.default.oneOf([l.default.NoColors,l.default.FaceColors,l.default.VertexColors]),simple:!0,default:l.default.NoColors}),n.hasProp("fog",{type:h.default.bool,update:function(e,t,n){n&&(e.fog=t),e.needsUpdate=!0},updateInitial:!0,default:!0}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=this.getMaterialDescription(e);return new l.default.LineDashedMaterial(t)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(21),h=r(c),f=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasColor(),n.hasWireframe(),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=this.getMaterialDescription(e);return e.hasOwnProperty("map")&&(t.map=e.map),new l.default.MeshBasicMaterial(t)}}]),t}(h.default);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(21),h=r(c),f=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasWireframe(),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=this.getMaterialDescription(e);return new l.default.MeshDepthMaterial(t)}}]),t}(h.default);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(21),f=r(h),p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasColor(),n.hasColor("emissive",0),n.hasWireframe(),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=this.getMaterialDescription(e);return new c.default.MeshLambertMaterial(t)}},{key:"getMaterialDescription",value:function(e){var n=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getMaterialDescription",this).call(this,e);return e.hasOwnProperty("shininess")&&(n.shininess=e.shininess),
e.hasOwnProperty("map")&&(n.map=e.map),n}},{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),n.hasOwnProperty("map")||(e.map=void 0)}}]),t}(f.default);e.exports=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(21),h=r(c),f=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasWireframe(),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=this.getMaterialDescription(e);return new l.default.MeshNormalMaterial(t)}}]),t}(h.default);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(21),d=r(p),m=n(9),v=r(m),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasColor(),n.hasColor("specular",1118481),n.hasColor("emissive",0),n.hasWireframe(),n.hasProp("shininess",{type:f.default.number,simple:!0,default:30}),n.hasProp("metal",{type:f.default.bool,update:function(e,t){e.metal=t,e.needsUpdate=!0},default:!1}),["lightMapIntensity","aoMapIntensity","emissiveIntensity","bumpScale","displacementScale","reflectivity"].forEach(function(e){n.hasProp(e,{type:f.default.number,update:function(t,n){t[e]=n,t.needsUpdate=!0},default:1})}),["displacementBias"].forEach(function(e){n.hasProp(e,{type:f.default.number,update:function(t,n){t[e]=n,t.needsUpdate=!0},default:0})}),["refractionRatio"].forEach(function(e){n.hasProp(e,{type:f.default.number,update:function(t,n){t[e]=n,t.needsUpdate=!0},default:.98})}),n.hasProp("normalScale",{type:(0,v.default)(c.default.Vector2),update:function(e,t){e.normalScale.copy(t),e.needsUpdate=!0},default:new c.default.Vector2(1,1)}),n.hasProp("shading",{type:f.default.oneOf([c.default.FlatShading,c.default.SmoothShading]),update:function(e,t){e.shading=t,e.needsUpdate=!0},default:c.default.SmoothShading}),["skinning","morphTargets","morphNormals"].forEach(function(e){n.hasProp(e,{type:f.default.bool,update:function(t,n){t[e]=n,t.needsUpdate=!0},default:!1})}),n}return a(t,e),s(t,[{key:"getMaterialDescription",value:function(e){var n=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getMaterialDescription",this).call(this,e);return["shininess","lightMapIntensity","aoMapIntensity","emissiveIntensity","bumpScale","displacementScale","reflectivity","displacementBias","refractionRatio","normalScale","shading","skinning","morphTargets","morphNormals"].forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}},{key:"construct",value:function(e){var t=this.getMaterialDescription(e);return new c.default.MeshPhongMaterial(t)}}]),t}(d.default);e.exports=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(21),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasColor(),n.hasProp("size",{type:h.default.number,simple:!0,default:1}),n.hasProp("sizeAttenuation",{type:h.default.bool,update:function(e,t,n){n&&(e.sizeAttenuation=t),e.needsUpdate=!0},updateInitial:!0,default:!0}),n.hasProp("fog",{type:h.default.bool,update:function(e,t,n){n&&(e.fog=t),e.needsUpdate=!0},updateInitial:!0,default:!0}),n.hasProp("vertexColors",{type:h.default.oneOf([l.default.NoColors,l.default.FaceColors,l.default.VertexColors]),simple:!0,default:l.default.NoColors}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=this.getMaterialDescription(e);return new l.default.PointsMaterial(t)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(114),h=r(c),f=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["alphaTest"].forEach(function(e){n.removeProp(e)}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=this.getMaterialDescription(e);return new l.default.RawShaderMaterial(t)}}]),t}(h.default);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(21),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasColor(),n.hasProp("rotation",{type:h.default.number,simple:!0,default:0}),n.hasProp("fog",{type:h.default.bool,update:function(e,t,n){n&&(e.fog=t),e.needsUpdate=!0},updateInitial:!0,default:!1}),n}return a(t,e),s(t,[{key:"construct",value:function(e){var t=this.getMaterialDescription(e);return new l.default.SpriteMaterial(t)}}]),t}(p.default);e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=n(1),f=r(h),p=n(6),d=r(p),m=n(2),v=r(m),g=n(51),y=r(g),_=n(13),b=r(_),w=n(46),x=r(w),E=n(45),M=(r(E),n(9)),C=r(M),S=(0,y.default)(s=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("repeat",{type:(0,C.default)(f.default.Vector2),updateInitial:!0,update:function(e,t){t?e.repeat.copy(t):e.repeat.set(1,1)},default:new f.default.Vector2(1,1)}),n.hasProp("offset",{type:(0,C.default)(f.default.Vector2),updateInitial:!0,update:function(e,t){t?e.offset.copy(t):e.offset.set(0,0)},default:new f.default.Vector2(0,0)}),["wrapS","wrapT"].forEach(function(e){n.hasProp(e,{type:v.default.oneOf([f.default.RepeatWrapping,f.default.ClampToEdgeWrapping,f.default.MirroredRepeatWrapping]),updateInitial:!0,update:function(t,n){t[e]=n,t.image&&(t.needsUpdate=!0)},default:f.default.ClampToEdgeWrapping})}),n.hasProp("anisotropy",{type:v.default.number,updateInitial:!0,update:function(e,t){e.anisotropy=t,e.image&&(e.needsUpdate=!0)},default:1}),n.hasProp("url",{type:v.default.string.isRequired,update:n.triggerRemount,default:""}),n.hasProp("crossOrigin",{type:v.default.string,update:n.triggerRemount,default:void 0}),["onLoad","onProgress","onError"].forEach(function(e){n.hasProp(e,{type:v.default.func,update:function(){},default:void 0})}),n.hasProp("magFilter",{type:v.default.oneOf([f.default.LinearFilter,f.default.NearestFilter]),update:function(e,t){e.magFilter=t,e.image&&(e.needsUpdate=!0)},default:f.default.LinearFilter}),n.hasProp("minFilter",{type:v.default.oneOf([f.default.LinearMipMapLinearFilter,f.default.NearestFilter,f.default.NearestMipMapNearestFilter,f.default.NearestMipMapLinearFilter,f.default.LinearFilter,f.default.LinearMipMapNearestFilter]),update:function(e,t){e.magFilter=t,e.image&&(e.needsUpdate=!0)},default:f.default.LinearMipMapLinearFilter}),n}return a(t,e),l(t,[{key:"construct",value:function(e){var t=void 0;if(e.hasOwnProperty("url")){var n=new f.default.TextureLoader;e.hasOwnProperty("crossOrigin")&&(n.crossOrigin=e.crossOrigin);var r=void 0,i=void 0,o=void 0;e.hasOwnProperty("onLoad")&&(r=e.onLoad),e.hasOwnProperty("onProgress")&&(i=e.onProgress),e.hasOwnProperty("onError")&&(o=e.onError),t=n.load(e.url,r,i,o)}else(0,d.default)(!1,"The texture needs a url property.");return t}},{key:"setParent",value:function(e,n){(0,d.default)(n instanceof f.default.Material||n instanceof x.default,"Parent is not a material or a uniform"),n instanceof f.default.Material?((0,d.default)(null===n.map||void 0===n.map,"Parent already has a texture"),n.map=e,n.needsUpdate=!0):n.setValue(e),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n)}},{key:"applyInitialProps",value:function(e,n){e.userData=u({},e.userData),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n)}},{key:"unmount",value:function(e){var n=e.userData.markup.parentMarkup.threeObject;n instanceof f.default.Material?n.map===e&&(n.map=null,n.needsUpdate=!0):n instanceof x.default&&n.value===e&&n.setValue(null),e.dispose(),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}},{key:"highlight",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;t.userData._descriptor.highlight(t)}},{key:"hideHighlight",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;t.userData._descriptor.hideHighlight(t)}}]),t}(b.default))||s;e.exports=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(2),d=r(p),m=n(46),v=r(m),g=n(67),y=r(g),_=n(32),b=r(_),w=n(13),x=r(w),E=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._invalidChild=function(e){return n.invalidChildInternal(e)},n.hasProp("type",{type:d.default.string.isRequired,simple:!0}),n.hasProp("value",{type:d.default.any,update:function(e,t){e.setValue(t)},default:null}),n.hasProp("name",{type:d.default.string.isRequired,update:n.triggerRemount}),n}return a(t,e),s(t,[{key:"construct",value:function(){return new v.default}},{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),(0,f.default)(n.hasOwnProperty("name"),"The <uniform/> should have a 'name' property"),e.name=n.name,e.value=n.value}},{key:"setParent",value:function(e,n){(0,f.default)(n instanceof y.default,"Parent is not a Uniform Container (<uniforms/>)");var r=e.name;(0,f.default)(void 0===n[r],"Parent already has uniforms"),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n),n.uniforms[r]={type:e.type,value:e.value},e.userData._onValueChanged=function(e){n.uniforms[r].value=e},e.userData.events.on("valueChanged",e.userData._onValueChanged)}},{key:"addChildren",value:function(e,t){(0,f.default)(0===t.filter(this._invalidChild).length,"Uniform children can only be textures or resource references")}},{key:"addChild",value:function(e,t){this.addChildren(e,[t])}},{key:"removeChild",value:function(){}},{key:"invalidChildInternal",value:function(e){var t=!(e instanceof c.default.Texture||e instanceof b.default);return t}},{key:"unmount",value:function(e){e.userData.events.removeListener("valueChanged",e.userData._onValueChanged),delete e.userData._onValueChanged,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}},{key:"highlight",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;t.userData._descriptor.highlight(t)}},{key:"getBoundingBoxes",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;return t.userData._descriptor.getBoundingBoxes(t)}},{key:"hideHighlight",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;t.userData._descriptor.hideHighlight(t)}}]),t}(x.default);e.exports=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(13),d=r(p),m=n(67),v=r(m),g=n(46),y=r(g),_=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"construct",value:function(){return new v.default}},{key:"setParent",value:function(e,n){(0,f.default)(n instanceof c.default.ShaderMaterial,"Parent of <uniforms/> is not a shader material"),(0,f.default)(void 0===n.uniforms,"Parent already has uniforms"),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n),n.uniforms=e.uniforms}},{key:"addChildren",value:function(e,t){t.forEach(function(e){(0,f.default)(e instanceof y.default,"The <uniforms/> component can only have <uniform/> elements as children.")})}},{key:"highlight",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;t.userData._descriptor.highlight(t)}},{key:"getBoundingBoxes",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;return t.userData._descriptor.getBoundingBoxes(t)}},{key:"hideHighlight",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;t.userData._descriptor.hideHighlight(t)}}]),t}(d.default);e.exports=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.constructor&&e.constructor.name?e.constructor.name:"<<anonymous>>"}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(39),h=r(c),f=n(13),p=r(f),d=n(104),m=r(d),v=n(118),g=r(v),y=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=function(e,t,n,r,i){var o=h.default[r];if(!e[t])return new g.default("Required "+o+" `"+i+"` "+("was not specified in `"+n+"`."));if(!(e[t].prototype instanceof m.default)){var a=s(e[t]);return new g.default("Invalid "+o+" `"+i+"` "+("of type `"+a+"` supplied to `"+n+"`, ")+"expected subclass of `Module`.")}};return r.toString=function(){return"``` subclass of ReactThreeRenderer.Module ``` *``` required ```*"},n.hasProp("descriptor",{type:r,update:n.triggerRemount,default:void 0}),n}return a(t,e),u(t,[{key:"construct",value:function(e){var t=e.descriptor;return new t}},{key:"applyInitialProps",value:function(e,n){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),e.setup(this.react3RendererInstance)}},{key:"unmount",value:function(e){e.dispose(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}}]),t}(p.default);e.exports=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),h=n(2),f=r(h),p=n(18),d=r(p),m=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.propTypes=s({},n.propTypes,{near:f.default.number,far:f.default.number,cubeResolution:f.default.number.isRequired}),n}return a(t,e),u(t,[{key:"construct",value:function(e){return new c.default.CubeCamera(e.near,e.far,e.cubeResolution)}}]),t}(d.default);e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),h=n(2),f=r(h),p=n(115),d=r(p),m=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.propTypes=s({},n.propTypes,{left:f.default.number.isRequired,right:f.default.number.isRequired,top:f.default.number.isRequired,bottom:f.default.number.isRequired,near:f.default.number,far:f.default.number}),n.propUpdates=s({},n.propUpdates,{left:n._updateAndRefreshProjection.bind(n,"left"),right:n._updateAndRefreshProjection.bind(n,"right"),top:n._updateAndRefreshProjection.bind(n,"top"),bottom:n._updateAndRefreshProjection.bind(n,"bottom"),fov:n._updateFov,far:n._updateFar}),n}return a(t,e),u(t,[{key:"_updateFov",value:function(e,t){e.fov=t,e.userData._needsProjectionMatrixUpdate=!0}},{key:"_updateFar",value:function(e,t){e.far=t,e.userData._needsProjectionMatrixUpdate=!0}},{key:"construct",value:function(e){return new c.default.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far)}},{key:"_updateAndRefreshProjection",value:function(e,t,n){t[e]=n,t.userData._needsProjectionMatrixUpdate=!0}}]),t}(d.default);e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),h=n(2),f=r(h),p=n(115),d=r(p),m=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.propTypes=s({},n.propTypes,{fov:f.default.number,aspect:f.default.number,near:f.default.number,far:f.default.number}),n.propUpdates=s({},n.propUpdates,{aspect:n._updateAspect,fov:n._updateFov,far:n._updateFar,near:n._updateNear}),n}return a(t,e),u(t,[{key:"construct",value:function(e){return new c.default.PerspectiveCamera(e.fov,e.aspect,e.near,e.far)}},{key:"_updateFov",value:function(e,t){e.fov=t,e.userData._needsProjectionMatrixUpdate=!0}},{key:"_updateNear",value:function(e,t){e.near=t,e.userData._needsProjectionMatrixUpdate=!0}},{key:"_updateFar",value:function(e,t){e.far=t,e.userData._needsProjectionMatrixUpdate=!0}},{key:"_updateAspect",value:function(e,t){e.aspect=t,e.userData._needsProjectionMatrixUpdate=!0}}]),t}(d.default);e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(18),h=r(c),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"construct",value:function(){return new l.default.Group}}]),t}(h.default);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(18),d=r(p),m=n(9),v=r(m),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("origin",{type:(0,v.default)(c.default.Vector3).isRequired,update:function(e,t){e.position.copy(t)},default:void 0}),n.hasProp("dir",{type:(0,v.default)(c.default.Vector3).isRequired,update:function(e,t){e.setDirection(t)},default:void 0}),n.hasProp("color",{type:f.default.oneOfType([(0,v.default)(c.default.Color),f.default.number,f.default.string]),update:function(e,t){e.setColor(t)},default:16776960}),n.hasProp("length",{type:f.default.number,update:function(e,t){e.userData.lengthProps.length=t,e.userData.lengthsChanged=!0},default:1}),n.hasProp("headLength",{type:f.default.number,update:function(e,t){e.userData.lengthProps.headLength=t,e.userData.lengthsChanged=!0},default:void 0}),n.hasProp("headWidth",{type:f.default.number,update:function(e,t){e.userData.lengthProps.headWidth=t,e.userData.lengthsChanged=!0},default:void 0}),n}return a(t,e),s(t,[{key:"beginPropertyUpdates",value:function(e){e.userData.lengthsChanged=!1}},{key:"completePropertyUpdates",value:function(e){if(e.userData.lengthsChanged){e.userData.lengthsChanged=!1;var t=e.userData.lengthProps.length,n=e.userData.lengthProps,r=n.headLength,i=n.headWidth;void 0===r&&(r=.2*t),void 0===i&&(i=.2*r),e.setLength(t,r,i)}}},{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n);var r=n.length,i=n.headLength,o=n.headWidth;e.userData.lengthProps={length:r,headLength:i,headWidth:o}}},{key:"construct",value:function(e){var t=e.dir,n=e.origin,r=e.length,i=e.color,o=e.headLength,a=e.headWidth;return new c.default.ArrowHelper(t,n,r,i,o,a)}},{key:"unmount",value:function(e){e.line&&(e.line.geometry.dispose(),e.line.material.dispose()),e.cone&&(e.cone.geometry.dispose(),e.cone.material.dispose()),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}}]),t}(d.default);e.exports=g},function(e,t,n){
"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(18),d=r(p),m=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("size",{type:f.default.number,update:n.triggerRemount,default:1}),n}return a(t,e),s(t,[{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n)}},{key:"construct",value:function(e){var t=e.size;return new c.default.AxisHelper(t)}},{key:"unmount",value:function(e){e.geometry.dispose(),e.material.dispose(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}}]),t}(d.default);e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(18),d=r(p),m=n(117),v=r(m),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("visible",{type:f.default.bool,override:!0,update:function(e,t){e.userData._visible=t,e.visible=e.userData._hasCamera&&t},updateInitial:!0,default:!0}),n.hasProp("cameraName",{type:f.default.string.isRequired,update:function(e,t){n._clearCameraEvents(e),e.userData._cameraName=t,n._startCameraFinder(e)},default:void 0}),n}return a(t,e),s(t,[{key:"construct",value:function(){return new c.default.CameraHelper(new c.default.PerspectiveCamera)}},{key:"applyInitialProps",value:function(e,n){var r=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),e.userData._onCameraProjectionUpdate=function(){e.update()},e.userData._onCameraDispose=function(){r._startCameraFinder(e)},e.userData._onCameraRename=function(t){t.oldName===e.userData._cameraName&&r._startCameraFinder(e)},e.userData._onBeforeRender=function(){e.visible=e.userData._hasCamera&&e.userData._visible&&v.default.current!==e.userData._camera},e.userData._cameraName=n.cameraName,e.userData._visible=!n.hasOwnProperty("visible")||n.visible,e.userData.events.once("addedIntoRoot",function(){var t=e.userData.markup._rootInstance;t.addBeforeRenderListener(e.userData._onBeforeRender),r._startCameraFinder(e)})}},{key:"unmount",value:function(e){return this._clearCameraEvents(e),delete e.userData._onCameraProjectionUpdate,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}},{key:"_getCamera",value:function(e,t){var n=null;if(t){var r=e.getObjectsByName(t).filter(function(e){return e instanceof c.default.Camera});r.length>0&&(n=r[0])}return n}},{key:"_clearCameraEvents",value:function(e){e.userData._hasCamera&&(e.userData._camera.userData.events.removeListener("updateProjectionMatrix",e.userData._onCameraProjectionUpdate),e.userData._camera.userData.events.removeListener("dispose",e.userData._onCameraDispose),e.userData._camera.userData.events.removeListener("rename",e.userData._onCameraRename))}},{key:"_setCamera",value:function(e,t){var n=e.userData;if(n._camera!==t){this._clearCameraEvents(e),n._hasCamera=!0,n._camera=t,e.camera=t,e.matrix=t.matrixWorld,e.update(),e.visible=n._visible;var r=e.userData._camera.userData.events;r.on("rename",n._onCameraRename),r.on("updateProjectionMatrix",n._onCameraProjectionUpdate),r.once("dispose",n._onCameraDispose)}}},{key:"_startCameraFinder",value:function(e){var t=this;this._clearCameraEvents(e);var n=e.userData.markup&&e.userData.markup._rootInstance;if(n){e.userData._hasCamera=!1,e.userData._camera=null,e.camera=new c.default.PerspectiveCamera,e.visible=!1;var r=this._getCamera(n,e.userData._cameraName);r?this._setCamera(e,r):!function(){var r=function r(){var i=t._getCamera(n,e.userData._cameraName);i&&(n.removeAnimateListener(r),t._setCamera(e,i))};n.addAnimateListener(r)}()}}}]),t}(d.default);e.exports=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(18),d=r(p),m=n(9),v=r(m),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("size",{type:f.default.number.isRequired,update:n.triggerRemount,default:1}),n.hasProp("step",{type:f.default.number,update:n.triggerRemount,default:1}),n.hasProp("colorCenterLine",{type:f.default.oneOfType([(0,v.default)(c.default.Color),f.default.number,f.default.string]),update:n.triggerRemount,default:4473924}),n.hasProp("colorGrid",{type:f.default.oneOfType([(0,v.default)(c.default.Color),f.default.number,f.default.string]),update:n.triggerRemount,default:8947848}),n}return a(t,e),s(t,[{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n)}},{key:"construct",value:function(e){var t=e.size,n=e.step;return new c.default.GridHelper(t,n)}},{key:"unmount",value:function(e){e.geometry.dispose(),e.material.dispose(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}}]),t}(d.default);e.exports=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(49),h=r(c),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.hasOwnProperty("geometry")?e.geometry:void 0,n=e.hasOwnProperty("material")?e.material:void 0,r=new l.default.Line(t,n);return t||(r.geometry.dispose(),r.geometry=void 0),n||(r.material.dispose(),r.material=void 0),r}}]),t}(h.default);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(49),h=r(c),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.hasOwnProperty("geometry")?e.geometry:void 0,n=e.hasOwnProperty("material")?e.material:void 0,r=new l.default.LineSegments(t,n);return t||(r.geometry.dispose(),r.geometry=void 0),n||(r.material.dispose(),r.material=void 0),r}}]),t}(h.default);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(49),h=r(c),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"construct",value:function(){var e=new l.default.Points;return e.geometry.dispose(),e.material.dispose(),e.geometry=void 0,e.material=void 0,e}}]),t}(h.default);e.exports=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(18),f=r(h),p=n(9),d=r(p),m=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("fog",{type:(0,d.default)(c.default.Fog),simple:!0,default:void 0}),n}return a(t,e),s(t,[{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n)}},{key:"construct",value:function(){return new c.default.Scene}}]),t}(f.default);e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c=n(6),h=r(c),f=n(18),p=r(f),d=n(32),m=r(d),v=function(e){function t(){var e,n,r,a;i(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r._invalidChild=function(e){var t=!(e instanceof l.default.SpriteMaterial||e instanceof m.default);return t},a=n,o(r,a)}return a(t,e),s(t,[{key:"construct",value:function(e){var t=e.hasOwnProperty("material")?e.material:void 0,n=new l.default.Sprite(t);return t||(n.material.dispose(),n.material=void 0),n}},{key:"addChildren",value:function(e,t){(0,h.default)(0===t.filter(this._invalidChild).length,!1)}},{key:"addChild",value:function(e,t){this.addChildren(e,[t])}},{key:"moveChild",value:function(){}}]),t}(p.default);e.exports=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(29),d=(r(p),n(6)),m=r(d),v=n(13),g=r(v),y=n(108),_=r(y),b=n(9),w=r(b),x={gammaInput:{type:f.default.bool,default:!1},gammaOutput:{type:f.default.bool,default:!1},sortObjects:{type:f.default.bool,default:!0},context:{type:f.default.oneOf(["2d","3d"]).isRequired,default:"3d"},mainCamera:{type:f.default.string,default:void 0},onAnimate:{type:f.default.func,default:void 0},clearColor:{type:f.default.oneOfType([(0,w.default)(c.default.Color),f.default.number,f.default.string]),default:0},clearAlpha:{type:f.default.number,default:void 0},alpha:{type:f.default.bool,default:!1},shadowMapEnabled:{type:f.default.bool,default:!1},shadowMapType:{type:f.default.oneOf([c.default.BasicShadowMap,c.default.PCFShadowMap,c.default.PCFSoftShadowMap]),default:c.default.PCFShadowMap},shadowMapCullFace:{type:f.default.oneOf([c.default.CullFaceNone,c.default.CullFaceBack,c.default.CullFaceFront,c.default.CullFaceFrontBack]),default:c.default.CullFaceFront},shadowMapDebug:{type:f.default.bool,default:!1},onRecreateCanvas:{type:f.default.func.isRequired,default:void 0},pixelRatio:{type:f.default.number,default:1},width:{type:f.default.number.isRequired,default:1},height:{type:f.default.number.isRequired,default:1},precision:{type:f.default.oneOf(["highp","mediump","lowp"]),default:"highp"},premultipliedAlpha:{type:f.default.bool,default:!0},antialias:{type:f.default.oneOfType([f.default.bool,f.default.number]),default:!1},stencil:{type:f.default.bool,default:!0},preserveDrawingBuffer:{type:f.default.bool,default:!1},depth:{type:f.default.bool,default:!0},logarithmicDepthBuffer:{type:f.default.bool,default:!1},onRendererUpdated:{type:f.default.func,default:void 0},forceManualRender:{type:f.default.bool,default:!1},onManualRenderTriggerCreated:{type:f.default.func,default:void 0}},E=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.keys(x).forEach(function(e){var t=x[e],r=e[0].toUpperCase()+e.substr(1),i="update"+r,o={type:t.type,update:function(e,t){e[i](t)}};t.hasOwnProperty("default")&&(o.default=t.default),n.hasProp(e,o)}),n}return a(t,e),s(t,[{key:"completePropertyUpdates",value:function(e){}},{key:"setParent",value:function(e,n){(0,m.default)(n instanceof HTMLCanvasElement,"The `react3` element can only be rendered into a canvas."),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n),e.updateCanvas(n)}},{key:"construct",value:function(e){return new _.default(e,this.react3RendererInstance)}},{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),e.initialize()}},{key:"addChildren",value:function(e,t){e.addChildren(t)}},{key:"addChild",value:function(e,t){e.addChildren([t])}},{key:"moveChild",value:function(){}},{key:"removeChild",value:function(e,t){e.removeChild(t)}},{key:"_updateOnRecreateCanvas",value:function(e,t){e.updateOnRecreateCanvas(t)}},{key:"_updateHeight",value:function(e,t){e.updateHeight(t)}},{key:"unmount",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e),e.unmount()}},{key:"componentWillUnmount",value:function(e){return e.willUnmount(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this,e)}}]),t}(g.default);e.exports=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(50),d=r(p),m=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),n.hasOwnProperty("slot")?e.userData._propertySlot=n.slot:e.userData._propertySlot="material"}},{key:"setParent",value:function(e,n){(0,f.default)(n instanceof c.default.Mesh||n instanceof c.default.Points||n instanceof c.default.Line,"Parent is not a mesh"),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n)}}]),t}(d.default);e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(13),d=r(p),m=n(66),v=r(m),g=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"construct",value:function(){return new v.default}},{key:"unmount",value:function(e){var n=e.userData.markup.parentMarkup,r=n.threeObject.userData.events;e.resourceIds.forEach(function(t){r.emit("resource.removed",{id:t,distance:0,resource:e.resourceMap[t]})}),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unmount",this).call(this,e)}},{key:"addChildren",value:function(e,t){t.forEach(function(t){var n=t.userData._resourceId;(0,f.default)(!!n),e.resourceIds.push(n),e.resourceMap[n]=t;var r=e.userData.markup.parentMarkup;r&&r.threeObject.userData.events.emit("resource.added",{id:n,distance:0,resource:t})})}},{key:"addChild",value:function(e,t){this.addChildren(e,[t])}},{key:"removeChild",value:function(e,t){var n=t.userData._resourceId;delete e.resourceIds[n];var r=e.userData.markup.parentMarkup;r&&r.threeObject.userData.events.emit("resource.removed",{id:n,distance:0,resource:t})}},{key:"setParent",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n);var r=n.userData.events;n.userData._resources=e,e.resourceIds.forEach(function(t){r.emit("resource.added",{id:t,distance:0,resource:e.resourceMap[t]})})}},{key:"highlight",value:function(e){var t=e.userData.markup.parentMarkup.threeObject;t.updateMatrixWorld&&t.traverse&&e.userData.events.emit("highlight",{uuid:e.uuid,boundingBoxFunc:function(){var e=new c.default.Box3;return e.setFromObject(t),[e]}})}},{key:"hideHighlight",value:function(e){e.userData.events.emit("hideHighlight")}},{key:"moveChild",value:function(){}}]),t}(d.default);e.exports=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(2),c=r(l),h=n(1),f=r(h),p=n(116),d=r(p),m=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hasProp("type",{type:c.default.oneOf(["points","spacedPoints","shape"]).isRequired,update:n.triggerRemount,default:""}),n.hasProp("divisions",{type:c.default.number,update:n.triggerRemount,default:5}),n}return a(t,e),s(t,[{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),e.userData._divisions=n.divisions,e.userData._type=n.type}},{key:"applyToSlot",value:function(e,n,r){if(!r)return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyToSlot",this).call(this,e,n,null);var i=void 0;switch(e.userData._type){case"points":i=r.createPointsGeometry();break;case"spacedPoints":i=r.createSpacedPointsGeometry(e.userData._divisions);break;case"shape":i=new f.default.ShapeGeometry(r)}return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyToSlot",this).call(this,e,n,i)}}]),t}(d.default);e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(50),d=r(p),m=n(109),v=r(m),g=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),e.userData._remountOnUpdate=!0}},{key:"construct",value:function(e){return new v.default(e.resourceId)}},{key:"setParent",value:function(e,n){(0,f.default)(n instanceof c.default.ExtrudeGeometry||n instanceof c.default.BufferGeometry,"Parent is not an extrude geometry"),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n)}},{key:"applyToSlot",value:function(e,t,n){e.userData.events.emit("resource.set",n)}}]),t}(d.default);e.exports=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(50),d=r(p),m=n(46),v=r(m),g=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"applyInitialProps",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyInitialProps",this).call(this,e,n),e.userData._propertySlot="map"}},{key:"applyToSlot",value:function(e,n,r){n instanceof c.default.Material?(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"applyToSlot",this).call(this,e,n,r),n.dispose()):n instanceof v.default?n.setValue(r):(0,f.default)(!1,"Parent is not a material or a uniform")}},{key:"setParent",value:function(e,n){n instanceof c.default.Material?u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n):n instanceof v.default?(e.userData._propertySlot="value",u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setParent",this).call(this,e,n)):(0,f.default)(!1,"Parent is not a material or a uniform")}}]),t}(d.default);e.exports=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];
r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),l=r(u),c=n(111),h=r(c),f=n(13),p=r(f),d=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["x","y","width","height"].forEach(function(e){n.hasProp(e,{type:l.default.number.isRequired,simple:!0})}),n.hasProp("cameraName",{type:l.default.string.isRequired,simple:!0}),n}return a(t,e),s(t,[{key:"construct",value:function(e){return new h.default(e)}}]),t}(p.default);e.exports=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,[{key:"dispatchEvent",value:function(e,t){var n=e.userData._eventCallbacks,r=n&&n[t];if(r){for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];r.apply(void 0,o)}}}]),e}();e.exports=i},function(e,t){"use strict";e.exports=function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}},function(e,t,n){"use strict";var r=n(8),i=n(94),o={focusDOMComponent:function(){i(r.getNodeFromInstance(this))}};e.exports=o},function(e,t,n){"use strict";function r(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function i(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function o(e){switch(e){case P.topCompositionStart:return O.compositionStart;case P.topCompositionEnd:return O.compositionEnd;case P.topCompositionUpdate:return O.compositionUpdate}}function a(e,t){return e===P.topKeyDown&&t.keyCode===w}function s(e,t){switch(e){case P.topKeyUp:return b.indexOf(t.keyCode)!==-1;case P.topKeyDown:return t.keyCode!==w;case P.topKeyPress:case P.topMouseDown:case P.topBlur:return!0;default:return!1}}function u(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function l(e,t,n,r){var i,l;if(x?i=o(e):R?s(e,n)&&(i=O.compositionEnd):a(e,n)&&(i=O.compositionStart),!i)return null;C&&(R||i!==O.compositionStart?i===O.compositionEnd&&R&&(l=R.getData()):R=v.getPooled(r));var c=g.getPooled(i,t,n,r);if(l)c.data=l;else{var h=u(n);null!==h&&(c.data=h)}return d.accumulateTwoPhaseDispatches(c),c}function c(e,t){switch(e){case P.topCompositionEnd:return u(t);case P.topKeyPress:var n=t.which;return n!==S?null:(A=!0,T);case P.topTextInput:var r=t.data;return r===T&&A?null:r;default:return null}}function h(e,t){if(R){if(e===P.topCompositionEnd||s(e,t)){var n=R.getData();return v.release(R),R=null,n}return null}switch(e){case P.topPaste:return null;case P.topKeyPress:return t.which&&!i(t)?String.fromCharCode(t.which):null;case P.topCompositionEnd:return C?null:t.data;default:return null}}function f(e,t,n,r){var i;if(i=M?c(e,n):h(e,n),!i)return null;var o=y.getPooled(O.beforeInput,t,n,r);return o.data=i,d.accumulateTwoPhaseDispatches(o),o}var p=n(23),d=n(37),m=n(12),v=n(316),g=n(353),y=n(356),_=n(25),b=[9,13,27,32],w=229,x=m.canUseDOM&&"CompositionEvent"in window,E=null;m.canUseDOM&&"documentMode"in document&&(E=document.documentMode);var M=m.canUseDOM&&"TextEvent"in window&&!E&&!r(),C=m.canUseDOM&&(!x||E&&E>8&&E<=11),S=32,T=String.fromCharCode(S),P=p.topLevelTypes,O={beforeInput:{phasedRegistrationNames:{bubbled:_({onBeforeInput:null}),captured:_({onBeforeInputCapture:null})},dependencies:[P.topCompositionEnd,P.topKeyPress,P.topTextInput,P.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:_({onCompositionEnd:null}),captured:_({onCompositionEndCapture:null})},dependencies:[P.topBlur,P.topCompositionEnd,P.topKeyDown,P.topKeyPress,P.topKeyUp,P.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:_({onCompositionStart:null}),captured:_({onCompositionStartCapture:null})},dependencies:[P.topBlur,P.topCompositionStart,P.topKeyDown,P.topKeyPress,P.topKeyUp,P.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:_({onCompositionUpdate:null}),captured:_({onCompositionUpdateCapture:null})},dependencies:[P.topBlur,P.topCompositionUpdate,P.topKeyDown,P.topKeyPress,P.topKeyUp,P.topMouseDown]}},A=!1,R=null,k={eventTypes:O,extractEvents:function(e,t,n,r){return[l(e,t,n,r),f(e,t,n,r)]}};e.exports=k},function(e,t,n){"use strict";var r=n(122),i=n(12),o=(n(11),n(179),n(362)),a=n(186),s=n(189),u=(n(5),s(function(e){return a(e)})),l=!1,c="cssFloat";if(i.canUseDOM){var h=document.createElement("div").style;try{h.font=""}catch(f){l=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var p={createMarkupForStyles:function(e,t){var n="";for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];null!=i&&(n+=u(r)+":",n+=o(r,i,t)+";")}return n||null},setValueForStyles:function(e,t,n){var i=e.style;for(var a in t)if(t.hasOwnProperty(a)){var s=o(a,t[a],n);if("float"!==a&&"cssFloat"!==a||(a=c),s)i[a]=s;else{var u=l&&r.shorthandPropertyExpansions[a];if(u)for(var h in u)i[h]="";else i[a]=""}}}};e.exports=p},function(e,t,n){"use strict";function r(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function i(e){var t=M.getPooled(A.change,k,e,C(e));b.accumulateTwoPhaseDispatches(t),E.batchedUpdates(o,t)}function o(e){_.enqueueEvents(e),_.processEventQueue(!1)}function a(e,t){R=e,k=t,R.attachEvent("onchange",i)}function s(){R&&(R.detachEvent("onchange",i),R=null,k=null)}function u(e,t){if(e===O.topChange)return t}function l(e,t,n){e===O.topFocus?(s(),a(t,n)):e===O.topBlur&&s()}function c(e,t){R=e,k=t,L=e.value,D=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(R,"value",N),R.attachEvent?R.attachEvent("onpropertychange",f):R.addEventListener("propertychange",f,!1)}function h(){R&&(delete R.value,R.detachEvent?R.detachEvent("onpropertychange",f):R.removeEventListener("propertychange",f,!1),R=null,k=null,L=null,D=null)}function f(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==L&&(L=t,i(e))}}function p(e,t){if(e===O.topInput)return t}function d(e,t,n){e===O.topFocus?(h(),c(t,n)):e===O.topBlur&&h()}function m(e,t){if((e===O.topSelectionChange||e===O.topKeyUp||e===O.topKeyDown)&&R&&R.value!==L)return L=R.value,k}function v(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function g(e,t){if(e===O.topClick)return t}var y=n(23),_=n(36),b=n(37),w=n(12),x=n(8),E=n(19),M=n(24),C=n(82),S=n(84),T=n(151),P=n(25),O=y.topLevelTypes,A={change:{phasedRegistrationNames:{bubbled:P({onChange:null}),captured:P({onChangeCapture:null})},dependencies:[O.topBlur,O.topChange,O.topClick,O.topFocus,O.topInput,O.topKeyDown,O.topKeyUp,O.topSelectionChange]}},R=null,k=null,L=null,D=null,I=!1;w.canUseDOM&&(I=S("change")&&(!("documentMode"in document)||document.documentMode>8));var j=!1;w.canUseDOM&&(j=S("input")&&(!("documentMode"in document)||document.documentMode>11));var N={get:function(){return D.get.call(this)},set:function(e){L=""+e,D.set.call(this,e)}},B={eventTypes:A,extractEvents:function(e,t,n,i){var o,a,s=t?x.getNodeFromInstance(t):window;if(r(s)?I?o=u:a=l:T(s)?j?o=p:(o=m,a=d):v(s)&&(o=g),o){var c=o(e,t);if(c){var h=M.getPooled(A.change,c,n,i);return h.type="change",b.accumulateTwoPhaseDispatches(h),h}}a&&a(e,s,t)}};e.exports=B},function(e,t,n){"use strict";var r=n(4),i=n(33),o=n(12),a=n(182),s=n(17),u=(n(3),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(o.canUseDOM?void 0:r("56"),t?void 0:r("57"),"HTML"===e.nodeName?r("58"):void 0,"string"==typeof t){var n=a(t,s)[0];e.parentNode.replaceChild(n,e)}else i.replaceChildWithTree(e,t)}});e.exports=u},function(e,t,n){"use strict";var r=n(25),i=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({BeforeInputEventPlugin:null})];e.exports=i},function(e,t,n){"use strict";var r=n(23),i=n(37),o=n(8),a=n(59),s=n(25),u=r.topLevelTypes,l={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[u.topMouseOut,u.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[u.topMouseOut,u.topMouseOver]}},c={eventTypes:l,extractEvents:function(e,t,n,r){if(e===u.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(e!==u.topMouseOut&&e!==u.topMouseOver)return null;var s;if(r.window===r)s=r;else{var c=r.ownerDocument;s=c?c.defaultView||c.parentWindow:window}var h,f;if(e===u.topMouseOut){h=t;var p=n.relatedTarget||n.toElement;f=p?o.getClosestInstanceFromNode(p):null}else h=null,f=t;if(h===f)return null;var d=null==h?s:o.getNodeFromInstance(h),m=null==f?s:o.getNodeFromInstance(f),v=a.getPooled(l.mouseLeave,h,n,r);v.type="mouseleave",v.target=d,v.relatedTarget=m;var g=a.getPooled(l.mouseEnter,f,n,r);return g.type="mouseenter",g.target=m,g.relatedTarget=d,i.accumulateEnterLeaveDispatches(v,g,h,f),[v,g]}};e.exports=c},function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var i=n(7),o=n(26),a=n(149);i(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,i=this.getText(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=i.slice(e,s),this._fallbackText}}),o.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";var r=n(30),i=r.injection.MUST_USE_PROPERTY,o=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_NUMERIC_VALUE,s=r.injection.HAS_POSITIVE_NUMERIC_VALUE,u=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,l={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:o,allowTransparency:0,alt:0,async:o,autoComplete:0,autoPlay:o,capture:o,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:i|o,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:o,coords:0,crossOrigin:0,data:0,dateTime:0,default:o,defer:o,dir:0,disabled:o,download:u,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:o,formTarget:0,frameBorder:0,headers:0,height:0,hidden:o,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:o,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:i|o,muted:i|o,name:0,nonce:0,noValidate:o,open:o,optimum:0,pattern:0,placeholder:0,poster:0,preload:0,profile:0,radioGroup:0,readOnly:o,referrerPolicy:0,rel:0,required:o,reversed:o,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:o,scrolling:0,seamless:o,selected:i|o,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:o,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};e.exports=l},function(e,t,n){"use strict";var r=n(7),i=n(74),o=n(56),a=n(345),s=n(125),u=n(327),l=n(14),c=n(2),h=n(141),f=n(367),p=(n(5),l.createElement),d=l.createFactory,m=l.cloneElement,v=r,g={Children:{map:i.map,forEach:i.forEach,count:i.count,toArray:i.toArray,only:f},Component:o,PureComponent:a,createElement:p,cloneElement:m,isValidElement:l.isValidElement,PropTypes:c,createClass:s.createClass,createFactory:d,createMixin:function(e){return e},DOM:u,version:h,__spread:v};e.exports=g},function(e,t,n){(function(t){"use strict";function r(e,t,n,r){var i=void 0===e[n];null!=t&&i&&(e[n]=o(t,!0))}var i=n(27),o=n(150),a=(n(54),n(62)),s=n(63),u=(n(5),{instantiateChildren:function(e,t,n,i){if(null==e)return null;var o={};return s(e,r,o),o},updateChildren:function(e,t,n,r,s,u,l,c,h){if(t||e){var f,p;for(f in t)if(t.hasOwnProperty(f)){p=e&&e[f];var d=p&&p._currentElement,m=t[f];if(null!=p&&a(d,m))i.receiveComponent(p,m,s,c),t[f]=p;else{p&&(r[f]=i.getHostNode(p),i.unmountComponent(p,!1));var v=o(m,!0);t[f]=v;var g=i.mountComponent(v,s,u,l,c,h);n.push(g)}}for(f in e)!e.hasOwnProperty(f)||t&&t.hasOwnProperty(f)||(p=e[f],r[f]=i.getHostNode(p),i.unmountComponent(p,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];i.unmountComponent(r,t)}}});e.exports=u}).call(t,n(35))},function(e,t,n){"use strict";var r=n(70),i=n(329),o={processChildrenUpdates:i.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};e.exports=o},function(e,t,n){"use strict";var r=n(370),i={shouldComponentUpdate:function(e,t){return r(this,e,t)}};e.exports=i},function(e,t,n){"use strict";var r=n(8),i=n(338),o=n(135),a=n(27),s=n(19),u=n(141),l=n(363),c=n(83),h=n(369);n(5);i.inject();var f={findDOMNode:l,render:o.render,unmountComponentAtNode:o.unmountComponentAtNode,version:u,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:h};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=c(e)),e?r.getNodeFromInstance(e):null}},Mount:o,Reconciler:a});e.exports=f},function(e,t,n){"use strict";var r=n(52),i={getHostProps:r.getHostProps};e.exports=i},function(e,t,n){"use strict";function r(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function i(e,t){t&&(Q[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML?m("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""):void 0),null!=t.dangerouslySetInnerHTML&&(null!=t.children?m("60"):void 0,"object"==typeof t.dangerouslySetInnerHTML&&W in t.dangerouslySetInnerHTML?void 0:m("61")),null!=t.style&&"object"!=typeof t.style?m("62",r(e)):void 0)}function o(e,t,n,r){if(!(r instanceof I)){var i=e._hostContainerInfo,o=i._node&&i._node.nodeType===X,s=o?i._node:i._ownerDocument;V(t,s),r.getReactMountReady().enqueue(a,{inst:e,registrationName:t,listener:n})}}function a(){var e=this;M.putListener(e.inst,e.registrationName,e.listener)}function s(){var e=this;A.postMountWrapper(e)}function u(){var e=this;L.postMountWrapper(e)}function l(){var e=this;R.postMountWrapper(e)}function c(){var e=this;e._rootNodeID?void 0:m("63");var t=F(e);switch(t?void 0:m("64"),e._tag){case"iframe":case"object":e._wrapperState.listeners=[S.trapBubbledEvent(E.topLevelTypes.topLoad,"load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in Y)Y.hasOwnProperty(n)&&e._wrapperState.listeners.push(S.trapBubbledEvent(E.topLevelTypes[n],Y[n],t));break;case"source":e._wrapperState.listeners=[S.trapBubbledEvent(E.topLevelTypes.topError,"error",t)];break;case"img":e._wrapperState.listeners=[S.trapBubbledEvent(E.topLevelTypes.topError,"error",t),S.trapBubbledEvent(E.topLevelTypes.topLoad,"load",t)];break;case"form":e._wrapperState.listeners=[S.trapBubbledEvent(E.topLevelTypes.topReset,"reset",t),S.trapBubbledEvent(E.topLevelTypes.topSubmit,"submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[S.trapBubbledEvent(E.topLevelTypes.topInvalid,"invalid",t)]}}function h(){k.postUpdateWrapper(this)}function f(e){ee.call($,e)||(J.test(e)?void 0:m("65",e),$[e]=!0)}function p(e,t){return e.indexOf("-")>=0||null!=t.is}function d(e){var t=e.type;f(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var m=n(4),v=n(7),g=n(309),y=n(311),_=n(33),b=n(71),w=n(30),x=n(124),E=n(23),M=n(36),C=n(53),S=n(55),T=n(323),P=n(127),O=n(8),A=n(330),R=n(332),k=n(128),L=n(335),D=(n(11),n(136)),I=n(346),j=(n(17),n(60)),N=(n(3),n(84),n(25)),B=(n(43),n(85),n(5),P),U=M.deleteListener,F=O.getNodeFromInstance,V=S.listenTo,z=C.registrationNameModules,G={string:!0,number:!0},H=N({style:null}),W=N({__html:null}),q={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},X=11,Y={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},K={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Z={listing:!0,pre:!0,textarea:!0},Q=v({menuitem:!0},K),J=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,$={},ee={}.hasOwnProperty,te=1;d.displayName="ReactDOMComponent",d.Mixin={mountComponent:function(e,t,n,r){this._rootNodeID=te++,this._domID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var o=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(c,this);break;case"button":o=T.getHostProps(this,o,t);break;case"input":A.mountWrapper(this,o,t),o=A.getHostProps(this,o),e.getReactMountReady().enqueue(c,this);break;case"option":R.mountWrapper(this,o,t),o=R.getHostProps(this,o);break;case"select":k.mountWrapper(this,o,t),o=k.getHostProps(this,o),e.getReactMountReady().enqueue(c,this);break;case"textarea":L.mountWrapper(this,o,t),o=L.getHostProps(this,o),e.getReactMountReady().enqueue(c,this)}i(this,o);var a,h;null!=t?(a=t._namespaceURI,h=t._tag):n._tag&&(a=n._namespaceURI,h=n._tag),(null==a||a===b.svg&&"foreignobject"===h)&&(a=b.html),a===b.html&&("svg"===this._tag?a=b.svg:"math"===this._tag&&(a=b.mathml)),this._namespaceURI=a;var f;if(e.useCreateElement){var p,d=n._ownerDocument;if(a===b.html)if("script"===this._tag){var m=d.createElement("div"),v=this._currentElement.type;m.innerHTML="<"+v+"></"+v+">",p=m.removeChild(m.firstChild)}else p=o.is?d.createElement(this._currentElement.type,o.is):d.createElement(this._currentElement.type);else p=d.createElementNS(a,this._currentElement.type);O.precacheNode(this,p),this._flags|=B.hasCachedChildNodes,this._hostParent||x.setAttributeForRoot(p),this._updateDOMProperties(null,o,e);var y=_(p);this._createInitialChildren(e,o,r,y),f=y}else{var w=this._createOpenTagMarkupAndPutListeners(e,o),E=this._createContentMarkup(e,o,r);f=!E&&K[this._tag]?w+"/>":w+">"+E+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(s,this),o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(u,this),o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"select":o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"button":o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(l,this)}return f},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if(null!=i)if(z.hasOwnProperty(r))i&&o(this,r,i,e);else{r===H&&(i&&(i=this._previousStyleCopy=v({},t.style)),i=y.createMarkupForStyles(i,this));var a=null;null!=this._tag&&p(this._tag,t)?q.hasOwnProperty(r)||(a=x.createMarkupForCustomAttribute(r,i)):a=x.createMarkupForProperty(r,i),a&&(n+=" "+a)}}return e.renderToStaticMarkup?n:(this._hostParent||(n+=" "+x.createMarkupForRoot()),n+=" "+x.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var r="",i=t.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&(r=i.__html);else{var o=G[typeof t.children]?t.children:null,a=null!=o?null:t.children;if(null!=o)r=j(o);else if(null!=a){var s=this.mountChildren(a,e,n);r=s.join("")}}return Z[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(e,t,n,r){var i=t.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&_.queueHTML(r,i.__html);else{var o=G[typeof t.children]?t.children:null,a=null!=o?null:t.children;if(null!=o)_.queueText(r,o);else if(null!=a)for(var s=this.mountChildren(a,e,n),u=0;u<s.length;u++)_.queueChild(r,s[u])}},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,r){var o=t.props,a=this._currentElement.props;switch(this._tag){case"button":o=T.getHostProps(this,o),a=T.getHostProps(this,a);break;case"input":o=A.getHostProps(this,o),a=A.getHostProps(this,a);break;case"option":o=R.getHostProps(this,o),a=R.getHostProps(this,a);break;case"select":o=k.getHostProps(this,o),a=k.getHostProps(this,a);break;case"textarea":o=L.getHostProps(this,o),a=L.getHostProps(this,a)}switch(i(this,a),this._updateDOMProperties(o,a,e),this._updateDOMChildren(o,a,e,r),this._tag){case"input":A.updateWrapper(this);break;case"textarea":L.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(h,this)}},_updateDOMProperties:function(e,t,n){var r,i,a;for(r in e)if(!t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&null!=e[r])if(r===H){var s=this._previousStyleCopy;for(i in s)s.hasOwnProperty(i)&&(a=a||{},a[i]="");this._previousStyleCopy=null}else z.hasOwnProperty(r)?e[r]&&U(this,r):p(this._tag,e)?q.hasOwnProperty(r)||x.deleteValueForAttribute(F(this),r):(w.properties[r]||w.isCustomAttribute(r))&&x.deleteValueForProperty(F(this),r);for(r in t){var u=t[r],l=r===H?this._previousStyleCopy:null!=e?e[r]:void 0;if(t.hasOwnProperty(r)&&u!==l&&(null!=u||null!=l))if(r===H)if(u?u=this._previousStyleCopy=v({},u):this._previousStyleCopy=null,l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(a=a||{},a[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(a=a||{},a[i]=u[i])}else a=u;else if(z.hasOwnProperty(r))u?o(this,r,u,n):l&&U(this,r);else if(p(this._tag,t))q.hasOwnProperty(r)||x.setValueForAttribute(F(this),r,u);else if(w.properties[r]||w.isCustomAttribute(r)){var c=F(this);null!=u?x.setValueForProperty(c,r,u):x.deleteValueForProperty(c,r)}}a&&y.setValueForStyles(F(this),a,this)},_updateDOMChildren:function(e,t,n,r){var i=G[typeof e.children]?e.children:null,o=G[typeof t.children]?t.children:null,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,u=null!=i?null:e.children,l=null!=o?null:t.children,c=null!=i||null!=a,h=null!=o||null!=s;null!=u&&null==l?this.updateChildren(null,n,r):c&&!h&&this.updateTextContent(""),null!=o?i!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=l&&this.updateChildren(l,n,r)},getHostNode:function(){return F(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"html":case"head":case"body":m("66",this._tag)}this.unmountChildren(e),O.uncacheNode(this),M.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return F(this)}},v(d.prototype,d.Mixin,D.Mixin),e.exports=d},function(e,t,n){"use strict";function r(e,t){var n={_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===i?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null};return n}var i=(n(85),9);e.exports=r},function(e,t,n){"use strict";var r=n(7),i=n(33),o=n(8),a=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(a.prototype,{mountComponent:function(e,t,n,r){var a=n._idCounter++;this._domID=a,this._hostParent=t,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(e.useCreateElement){var u=n._ownerDocument,l=u.createComment(s);return o.precacheNode(this,l),i(l)}return e.renderToStaticMarkup?"":"<!--"+s+"-->"},receiveComponent:function(){},getHostNode:function(){return o.getNodeFromInstance(this)},unmountComponent:function(){o.uncacheNode(this)}}),e.exports=a},function(e,t,n){"use strict";var r=n(14),i=r.createFactory,o={a:i("a"),abbr:i("abbr"),address:i("address"),area:i("area"),article:i("article"),aside:i("aside"),audio:i("audio"),b:i("b"),base:i("base"),bdi:i("bdi"),bdo:i("bdo"),big:i("big"),blockquote:i("blockquote"),body:i("body"),br:i("br"),button:i("button"),canvas:i("canvas"),caption:i("caption"),cite:i("cite"),code:i("code"),col:i("col"),colgroup:i("colgroup"),data:i("data"),datalist:i("datalist"),dd:i("dd"),del:i("del"),details:i("details"),dfn:i("dfn"),dialog:i("dialog"),div:i("div"),dl:i("dl"),dt:i("dt"),em:i("em"),embed:i("embed"),fieldset:i("fieldset"),figcaption:i("figcaption"),figure:i("figure"),footer:i("footer"),form:i("form"),h1:i("h1"),h2:i("h2"),h3:i("h3"),h4:i("h4"),h5:i("h5"),h6:i("h6"),head:i("head"),header:i("header"),hgroup:i("hgroup"),hr:i("hr"),html:i("html"),i:i("i"),iframe:i("iframe"),img:i("img"),input:i("input"),ins:i("ins"),kbd:i("kbd"),keygen:i("keygen"),label:i("label"),legend:i("legend"),li:i("li"),link:i("link"),main:i("main"),map:i("map"),mark:i("mark"),menu:i("menu"),menuitem:i("menuitem"),meta:i("meta"),meter:i("meter"),nav:i("nav"),noscript:i("noscript"),object:i("object"),ol:i("ol"),optgroup:i("optgroup"),option:i("option"),output:i("output"),p:i("p"),param:i("param"),picture:i("picture"),pre:i("pre"),progress:i("progress"),q:i("q"),rp:i("rp"),rt:i("rt"),ruby:i("ruby"),s:i("s"),samp:i("samp"),script:i("script"),section:i("section"),select:i("select"),small:i("small"),source:i("source"),span:i("span"),strong:i("strong"),style:i("style"),sub:i("sub"),summary:i("summary"),sup:i("sup"),table:i("table"),tbody:i("tbody"),td:i("td"),textarea:i("textarea"),tfoot:i("tfoot"),th:i("th"),thead:i("thead"),time:i("time"),title:i("title"),tr:i("tr"),track:i("track"),u:i("u"),ul:i("ul"),var:i("var"),video:i("video"),wbr:i("wbr"),circle:i("circle"),clipPath:i("clipPath"),defs:i("defs"),ellipse:i("ellipse"),g:i("g"),image:i("image"),line:i("line"),linearGradient:i("linearGradient"),mask:i("mask"),path:i("path"),pattern:i("pattern"),polygon:i("polygon"),polyline:i("polyline"),radialGradient:i("radialGradient"),rect:i("rect"),stop:i("stop"),svg:i("svg"),text:i("text"),tspan:i("tspan")};e.exports=o},function(e,t){"use strict";var n={useCreateElement:!0};e.exports=n},function(e,t,n){"use strict";var r=n(70),i=n(8),o={dangerouslyProcessChildrenUpdates:function(e,t){var n=i.getNodeFromInstance(e);r.processUpdates(n,t)}};e.exports=o},function(e,t,n){"use strict";function r(){this._rootNodeID&&f.updateWrapper(this)}function i(e){var t=this._currentElement.props,n=l.executeOnChange(t,e);h.asap(r,this);var i=t.name;if("radio"===t.type&&null!=i){for(var a=c.getNodeFromInstance(this),s=a;s.parentNode;)s=s.parentNode;for(var u=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),f=0;f<u.length;f++){var p=u[f];if(p!==a&&p.form===a.form){var d=c.getInstanceFromNode(p);d?void 0:o("90"),h.asap(r,d)}}}return n}var o=n(4),a=n(7),s=n(52),u=n(124),l=n(73),c=n(8),h=n(19),f=(n(3),n(5),{getHostProps:function(e,t){var n=l.getValue(t),r=l.getChecked(t),i=a({type:void 0,step:void 0,min:void 0,max:void 0},s.getHostProps(e,t),{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange});return i},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,listeners:null,onChange:i.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&u.setValueForProperty(c.getNodeFromInstance(e),"checked",n||!1);var r=c.getNodeFromInstance(e),i=l.getValue(t);if(null!=i){var o=""+i;o!==r.value&&(r.value=o)}else null==t.value&&null!=t.defaultValue&&(r.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(r.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=c.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}});e.exports=f},function(e,t,n){"use strict";function r(e,t){null!=t&&("input"!==t.type&&"textarea"!==t.type&&"select"!==t.type||null==t.props||null!==t.props.value||i||(i=!0))}var i=(n(38),n(5),!1),o={onBeforeMountComponent:function(e,t){r(e,t)},onBeforeUpdateComponent:function(e,t){r(e,t)}};e.exports=o},function(e,t,n){"use strict";function r(e){var t="";return o.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:u||(u=!0))}),t}var i=n(7),o=n(74),a=n(8),s=n(128),u=(n(5),!1),l={mountWrapper:function(e,t,n){var i=null;if(null!=n){var o=n;"optgroup"===o._tag&&(o=o._hostParent),null!=o&&"select"===o._tag&&(i=s.getSelectValueContext(o))}var a=null;if(null!=i){var u;if(u=null!=t.value?t.value+"":r(t.children),a=!1,Array.isArray(i)){for(var l=0;l<i.length;l++)if(""+i[l]===u){a=!0;break}}else a=""+i===u}e._wrapperState={selected:a}},postMountWrapper:function(e){var t=e._currentElement.props;if(null!=t.value){var n=a.getNodeFromInstance(e);n.setAttribute("value",t.value)}},getHostProps:function(e,t){var n=i({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var o=r(t.children);return o&&(n.children=o),n}};e.exports=l},function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function i(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var o=i.text.length,a=o+r;return{start:o,end:a}}function o(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,i=t.anchorOffset,o=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(u){return null}var l=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),c=l?0:s.toString().length,h=s.cloneRange();h.selectNodeContents(e),h.setEnd(s.startContainer,s.startOffset);var f=r(h.startContainer,h.startOffset,h.endContainer,h.endOffset),p=f?0:h.toString().length,d=p+c,m=document.createRange();m.setStart(n,i),m.setEnd(o,a);var v=m.collapsed;return{start:v?d:p,end:v?p:d}}function a(e,t){var n,r,i=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),i.moveToElementText(e),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),r=e[c()].length,i=Math.min(t.start,r),o=void 0===t.end?i:Math.min(t.end,r);
if(!n.extend&&i>o){var a=o;o=i,i=a}var s=l(e,i),u=l(e,o);if(s&&u){var h=document.createRange();h.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(h),n.extend(u.node,u.offset)):(h.setEnd(u.node,u.offset),n.addRange(h))}}}var u=n(12),l=n(365),c=n(149),h=u.canUseDOM&&"selection"in document&&!("getSelection"in window),f={getOffsets:h?i:o,setOffsets:h?a:s};e.exports=f},function(e,t,n){"use strict";var r=n(4),i=n(7),o=n(70),a=n(33),s=n(8),u=n(60),l=(n(3),n(85),function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});i(l.prototype,{mountComponent:function(e,t,n,r){var i=n._idCounter++,o=" react-text: "+i+" ",l=" /react-text ";if(this._domID=i,this._hostParent=t,e.useCreateElement){var c=n._ownerDocument,h=c.createComment(o),f=c.createComment(l),p=a(c.createDocumentFragment());return a.queueChild(p,a(h)),this._stringText&&a.queueChild(p,a(c.createTextNode(this._stringText))),a.queueChild(p,a(f)),s.precacheNode(this,h),this._closingComment=f,p}var d=u(this._stringText);return e.renderToStaticMarkup?d:"<!--"+o+"-->"+d+"<!--"+l+"-->"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();o.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=s.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n?r("67",this._domID):void 0,8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),e.exports=l},function(e,t,n){"use strict";function r(){this._rootNodeID&&h.updateWrapper(this)}function i(e){var t=this._currentElement.props,n=u.executeOnChange(t,e);return c.asap(r,this),n}var o=n(4),a=n(7),s=n(52),u=n(73),l=n(8),c=n(19),h=(n(3),n(5),{getHostProps:function(e,t){null!=t.dangerouslySetInnerHTML?o("91"):void 0;var n=a({},s.getHostProps(e,t),{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange});return n},mountWrapper:function(e,t){var n=u.getValue(t),r=n;if(null==n){var a=t.defaultValue,s=t.children;null!=s&&(null!=a?o("92"):void 0,Array.isArray(s)&&(s.length<=1?void 0:o("93"),s=s[0]),a=""+s),null==a&&(a=""),r=a}e._wrapperState={initialValue:""+r,listeners:null,onChange:i.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=l.getNodeFromInstance(e),r=u.getValue(t);if(null!=r){var i=""+r;i!==n.value&&(n.value=i),null==t.defaultValue&&(n.defaultValue=i)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=l.getNodeFromInstance(e);t.value=t.textContent}});e.exports=h},function(e,t,n){"use strict";function r(e,t){"_hostNode"in e?void 0:u("33"),"_hostNode"in t?void 0:u("33");for(var n=0,r=e;r;r=r._hostParent)n++;for(var i=0,o=t;o;o=o._hostParent)i++;for(;n-i>0;)e=e._hostParent,n--;for(;i-n>0;)t=t._hostParent,i--;for(var a=n;a--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}function i(e,t){"_hostNode"in e?void 0:u("35"),"_hostNode"in t?void 0:u("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1}function o(e){return"_hostNode"in e?void 0:u("36"),e._hostParent}function a(e,t,n){for(var r=[];e;)r.push(e),e=e._hostParent;var i;for(i=r.length;i-- >0;)t(r[i],!1,n);for(i=0;i<r.length;i++)t(r[i],!0,n)}function s(e,t,n,i,o){for(var a=e&&t?r(e,t):null,s=[];e&&e!==a;)s.push(e),e=e._hostParent;for(var u=[];t&&t!==a;)u.push(t),t=t._hostParent;var l;for(l=0;l<s.length;l++)n(s[l],!0,i);for(l=u.length;l-- >0;)n(u[l],!1,o)}var u=n(4);n(3);e.exports={isAncestor:i,getLowestCommonAncestor:r,getParentInstance:o,traverseTwoPhase:a,traverseEnterLeave:s}},function(e,t,n){"use strict";function r(e,t){null!=t&&"string"==typeof t.type&&(t.type.indexOf("-")>=0||t.props.is||o(e,t))}var i,o=(n(30),n(53),n(38),n(5),function(e,t){var n=[];for(var r in t.props){var o=i(t.type,r,e);o||n.push(r)}n.map(function(e){return"`"+e+"`"}).join(", ");1===n.length||n.length>1}),a={onBeforeMountComponent:function(e,t){r(e,t)},onBeforeUpdateComponent:function(e,t){r(e,t)}};e.exports=a},function(e,t,n){"use strict";function r(){x||(x=!0,g.EventEmitter.injectReactEventListener(v),g.EventPluginHub.injectEventPluginOrder(a),g.EventPluginUtils.injectComponentTree(h),g.EventPluginUtils.injectTreeTraversal(p),g.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:w,EnterLeaveEventPlugin:s,ChangeEventPlugin:o,SelectEventPlugin:b,BeforeInputEventPlugin:i}),g.HostComponent.injectGenericComponentClass(c),g.HostComponent.injectTextComponentClass(d),g.DOMProperty.injectDOMPropertyConfig(u),g.DOMProperty.injectDOMPropertyConfig(_),g.EmptyComponent.injectEmptyComponentFactory(function(e){return new f(e)}),g.Updates.injectReconcileTransaction(y),g.Updates.injectBatchingStrategy(m),g.Component.injectEnvironment(l))}var i=n(310),o=n(312),a=n(314),s=n(315),u=n(317),l=n(320),c=n(324),h=n(8),f=n(326),p=n(336),d=n(334),m=n(129),v=n(340),g=n(133),y=n(139),_=n(348),b=n(349),w=n(350),x=!1;e.exports={inject:r}},function(e,t,n){"use strict";function r(e){i.enqueueEvents(e),i.processEventQueue(!1)}var i=n(36),o={handleTopLevel:function(e,t,n,o){var a=i.extractEvents(e,t,n,o);r(a)}};e.exports=o},function(e,t,n){"use strict";function r(e){for(;e._hostParent;)e=e._hostParent;var t=h.getNodeFromInstance(e),n=t.parentNode;return h.getClosestInstanceFromNode(n)}function i(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function o(e){var t=p(e.nativeEvent),n=h.getClosestInstanceFromNode(t),i=n;do e.ancestors.push(i),i=i&&r(i);while(i);for(var o=0;o<e.ancestors.length;o++)n=e.ancestors[o],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,p(e.nativeEvent))}function a(e){var t=d(window);e(t)}var s=n(7),u=n(93),l=n(12),c=n(26),h=n(8),f=n(19),p=n(82),d=n(184);s(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(i,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){var r=n;return r?u.listen(r,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var r=n;return r?u.capture(r,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=a.bind(null,e);u.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=i.getPooled(e,t);try{f.batchedUpdates(o,n)}finally{i.release(n)}}}};e.exports=m},function(e,t,n){"use strict";var r=n(4),i=n(74),o=n(14),a=n(17),s=(n(3),n(5),{create:function(e){if("object"!=typeof e||!e||Array.isArray(e))return e;if(o.isValidElement(e))return e;1===e.nodeType?r("0"):void 0;var t=[];for(var n in e)i.mapIntoWithKeyPrefixInternal(e[n],t,n,a.thatReturnsArgument);return t}});e.exports=s},function(e,t,n){"use strict";function r(e){return f+e.toString(36)}function i(e,t){return e.charAt(t)===f||t===e.length}function o(e){return""===e||e.charAt(0)===f&&e.charAt(e.length-1)!==f}function a(e,t){return 0===t.indexOf(e)&&i(t,e.length)}function s(e){return e?e.substr(0,e.lastIndexOf(f)):""}function u(e,t){if(o(e)&&o(t)?void 0:h("112",e,t),a(e,t)?void 0:h("113",e,t),e===t)return e;var n,r=e.length+p;for(n=r;n<t.length&&!i(t,n);n++);return t.substr(0,n)}function l(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var r=0,a=0;a<=n;a++)if(i(e,a)&&i(t,a))r=a;else if(e.charAt(a)!==t.charAt(a))break;var s=e.substr(0,r);return o(s)?void 0:h("114",e,t,s),s}function c(e,t,n,r,i,o){e=e||"",t=t||"",e===t?h("115",e):void 0;var l=a(t,e);l||a(e,t)?void 0:h("116",e,t);for(var c=0,f=l?s:u,p=e;;p=f(p,t)){var m;if(i&&p===e||o&&p===t||(m=n(p,l,r)),m===!1||p===t)break;c++<d?void 0:h("117",e,t,p)}}var h=n(4),f=(n(3),"."),p=f.length,d=1e4,m={createReactRootID:function(e){return r(e)},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===f&&e.length>1){var t=e.indexOf(f,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,i){var o=l(e,t);o!==e&&c(e,o,n,r,!1,!0),o!==t&&c(o,t,n,i,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(c("",e,t,n,!0,!1),c(e,"",t,n,!1,!0))},traverseTwoPhaseSkipTarget:function(e,t,n){e&&(c("",e,t,n,!0,!0),c(e,"",t,n,!0,!0))},traverseAncestors:function(e,t,n){c("",e,t,n,!0,!1)},getFirstCommonAncestorID:l,_getNextDescendantID:u,isAncestorIDOf:a,SEPARATOR:f};e.exports=m},function(e,t,n){"use strict";var r=n(361),i=/\/?>/,o=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return o.test(e)?e:e.replace(i," "+a.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(a.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var i=r(e);return i===n}};e.exports=a},function(e,t,n){"use strict";var r=n(4),i=(n(3),{isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){i.isValidOwner(n)?void 0:r("119"),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){i.isValidOwner(n)?void 0:r("120");var o=n.getPublicInstance();o&&o.refs[t]===e.getPublicInstance()&&n.detachRef(t)}});e.exports=i},function(e,t,n){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=u,this.updater=n||s}function i(){}var o=n(7),a=n(56),s=n(77),u=n(34);i.prototype=a.prototype,r.prototype=new i,r.prototype.constructor=r,o(r.prototype,a.prototype),r.prototype.isPureReactComponent=!0,e.exports=r},function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new s(this)}var i=n(7),o=n(26),a=n(41),s=(n(11),n(347)),u=[],l={enqueue:function(){}},c={getTransactionWrappers:function(){return u},getReactMountReady:function(){return l},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};i(r.prototype,a.Mixin,c),o.addPoolingTo(r),e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){}var o=n(58),a=(n(41),n(5),function(){function e(t){r(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,n){this.transaction.isInTransaction()&&o.enqueueCallback(e,t,n)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()?o.enqueueForceUpdate(e):i(e,"forceUpdate")},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()?o.enqueueReplaceState(e,t):i(e,"replaceState")},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()?o.enqueueSetState(e,t):i(e,"setState")},e}());e.exports=a},function(e,t){"use strict";var n={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},r={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},i={Properties:{},DOMAttributeNamespaces:{xlinkActuate:n.xlink,xlinkArcrole:n.xlink,xlinkHref:n.xlink,xlinkRole:n.xlink,xlinkShow:n.xlink,xlinkTitle:n.xlink,xlinkType:n.xlink,xmlBase:n.xml,xmlLang:n.xml,xmlSpace:n.xml},DOMAttributeNames:{}};Object.keys(r).forEach(function(e){i.Properties[e]=0,r[e]&&(i.DOMAttributeNames[e]=r[e])}),e.exports=i},function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&l.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(e,t){if(w||null==y||y!==h())return null;var n=r(y);if(!b||!d(b,n)){b=n;var i=c.getPooled(g.select,_,e,t);return i.type="select",i.target=y,a.accumulateTwoPhaseDispatches(i),i}return null}var o=n(23),a=n(37),s=n(12),u=n(8),l=n(134),c=n(24),h=n(95),f=n(151),p=n(25),d=n(43),m=o.topLevelTypes,v=s.canUseDOM&&"documentMode"in document&&document.documentMode<=11,g={select:{phasedRegistrationNames:{bubbled:p({onSelect:null}),captured:p({onSelectCapture:null})},dependencies:[m.topBlur,m.topContextMenu,m.topFocus,m.topKeyDown,m.topMouseDown,m.topMouseUp,m.topSelectionChange]}},y=null,_=null,b=null,w=!1,x=!1,E=p({onSelect:null}),M={eventTypes:g,extractEvents:function(e,t,n,r){if(!x)return null;var o=t?u.getNodeFromInstance(t):window;switch(e){case m.topFocus:(f(o)||"true"===o.contentEditable)&&(y=o,_=t,b=null);break;case m.topBlur:y=null,_=null,b=null;break;case m.topMouseDown:w=!0;break;case m.topContextMenu:case m.topMouseUp:return w=!1,i(n,r);case m.topSelectionChange:if(v)break;case m.topKeyDown:case m.topKeyUp:return i(n,r)}return null},didPutListener:function(e,t,n){t===E&&(x=!0)}};e.exports=M},function(e,t,n){"use strict";function r(e){return"."+e._rootNodeID}var i=n(4),o=n(23),a=n(93),s=n(37),u=n(8),l=n(351),c=n(352),h=n(24),f=n(355),p=n(357),d=n(59),m=n(354),v=n(358),g=n(359),y=n(40),_=n(360),b=n(17),w=n(80),x=(n(3),n(25)),E=o.topLevelTypes,M={abort:{phasedRegistrationNames:{bubbled:x({onAbort:!0}),captured:x({onAbortCapture:!0})}},animationEnd:{phasedRegistrationNames:{bubbled:x({onAnimationEnd:!0}),captured:x({onAnimationEndCapture:!0})}},animationIteration:{phasedRegistrationNames:{bubbled:x({onAnimationIteration:!0}),captured:x({onAnimationIterationCapture:!0})}},animationStart:{phasedRegistrationNames:{bubbled:x({onAnimationStart:!0}),captured:x({onAnimationStartCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:x({onBlur:!0}),captured:x({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:x({onCanPlay:!0}),captured:x({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:x({onCanPlayThrough:!0}),captured:x({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:x({onClick:!0}),captured:x({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:x({onContextMenu:!0}),captured:x({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:x({onCopy:!0}),captured:x({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:x({onCut:!0}),captured:x({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:x({onDoubleClick:!0}),captured:x({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:x({onDrag:!0}),captured:x({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:x({onDragEnd:!0}),captured:x({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:x({onDragEnter:!0}),captured:x({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:x({onDragExit:!0}),captured:x({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:x({onDragLeave:!0}),captured:x({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:x({onDragOver:!0}),captured:x({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:x({onDragStart:!0}),captured:x({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:x({onDrop:!0}),captured:x({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:x({onDurationChange:!0}),captured:x({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:x({onEmptied:!0}),captured:x({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:x({onEncrypted:!0}),captured:x({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:x({onEnded:!0}),captured:x({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:x({onError:!0}),captured:x({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:x({onFocus:!0}),captured:x({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:x({onInput:!0}),captured:x({onInputCapture:!0})}},invalid:{phasedRegistrationNames:{bubbled:x({onInvalid:!0}),captured:x({onInvalidCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:x({onKeyDown:!0}),captured:x({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:x({onKeyPress:!0}),captured:x({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:x({onKeyUp:!0}),captured:x({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:x({onLoad:!0}),captured:x({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:x({onLoadedData:!0}),captured:x({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:x({onLoadedMetadata:!0}),captured:x({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:x({onLoadStart:!0}),captured:x({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:x({onMouseDown:!0}),captured:x({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:x({onMouseMove:!0}),captured:x({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:x({onMouseOut:!0}),captured:x({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:x({onMouseOver:!0}),captured:x({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:x({onMouseUp:!0}),captured:x({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:x({onPaste:!0}),captured:x({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:x({onPause:!0}),captured:x({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:x({onPlay:!0}),captured:x({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:x({onPlaying:!0}),captured:x({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:x({onProgress:!0}),captured:x({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:x({onRateChange:!0}),captured:x({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:x({onReset:!0}),captured:x({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:x({onScroll:!0}),captured:x({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:x({onSeeked:!0}),captured:x({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:x({onSeeking:!0}),captured:x({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:x({onStalled:!0}),captured:x({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:x({onSubmit:!0}),captured:x({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:x({onSuspend:!0}),captured:x({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:x({onTimeUpdate:!0}),captured:x({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:x({onTouchCancel:!0}),captured:x({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:x({onTouchEnd:!0}),captured:x({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:x({onTouchMove:!0}),captured:x({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:x({onTouchStart:!0}),captured:x({onTouchStartCapture:!0})}},transitionEnd:{phasedRegistrationNames:{bubbled:x({onTransitionEnd:!0}),captured:x({onTransitionEndCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:x({onVolumeChange:!0}),captured:x({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:x({onWaiting:!0}),captured:x({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:x({onWheel:!0}),captured:x({onWheelCapture:!0})}}},C={topAbort:M.abort,topAnimationEnd:M.animationEnd,topAnimationIteration:M.animationIteration,topAnimationStart:M.animationStart,topBlur:M.blur,topCanPlay:M.canPlay,topCanPlayThrough:M.canPlayThrough,topClick:M.click,topContextMenu:M.contextMenu,topCopy:M.copy,topCut:M.cut,topDoubleClick:M.doubleClick,topDrag:M.drag,topDragEnd:M.dragEnd,topDragEnter:M.dragEnter,topDragExit:M.dragExit,topDragLeave:M.dragLeave,topDragOver:M.dragOver,topDragStart:M.dragStart,topDrop:M.drop,topDurationChange:M.durationChange,topEmptied:M.emptied,topEncrypted:M.encrypted,topEnded:M.ended,topError:M.error,topFocus:M.focus,topInput:M.input,topInvalid:M.invalid,topKeyDown:M.keyDown,topKeyPress:M.keyPress,topKeyUp:M.keyUp,topLoad:M.load,topLoadedData:M.loadedData,topLoadedMetadata:M.loadedMetadata,topLoadStart:M.loadStart,topMouseDown:M.mouseDown,topMouseMove:M.mouseMove,topMouseOut:M.mouseOut,topMouseOver:M.mouseOver,topMouseUp:M.mouseUp,topPaste:M.paste,topPause:M.pause,topPlay:M.play,topPlaying:M.playing,topProgress:M.progress,topRateChange:M.rateChange,topReset:M.reset,topScroll:M.scroll,topSeeked:M.seeked,topSeeking:M.seeking,topStalled:M.stalled,topSubmit:M.submit,topSuspend:M.suspend,topTimeUpdate:M.timeUpdate,topTouchCancel:M.touchCancel,topTouchEnd:M.touchEnd,topTouchMove:M.touchMove,topTouchStart:M.touchStart,topTransitionEnd:M.transitionEnd,topVolumeChange:M.volumeChange,topWaiting:M.waiting,topWheel:M.wheel};for(var S in C)C[S].dependencies=[S];var T=x({onClick:null}),P={},O={eventTypes:M,extractEvents:function(e,t,n,r){var o=C[e];if(!o)return null;var a;switch(e){case E.topAbort:case E.topCanPlay:case E.topCanPlayThrough:case E.topDurationChange:case E.topEmptied:case E.topEncrypted:case E.topEnded:case E.topError:case E.topInput:case E.topInvalid:case E.topLoad:case E.topLoadedData:case E.topLoadedMetadata:case E.topLoadStart:case E.topPause:case E.topPlay:case E.topPlaying:case E.topProgress:case E.topRateChange:case E.topReset:case E.topSeeked:case E.topSeeking:case E.topStalled:case E.topSubmit:case E.topSuspend:case E.topTimeUpdate:case E.topVolumeChange:case E.topWaiting:a=h;break;case E.topKeyPress:if(0===w(n))return null;case E.topKeyDown:case E.topKeyUp:a=p;break;case E.topBlur:case E.topFocus:a=f;break;case E.topClick:if(2===n.button)return null;case E.topContextMenu:case E.topDoubleClick:case E.topMouseDown:case E.topMouseMove:case E.topMouseOut:case E.topMouseOver:case E.topMouseUp:a=d;break;case E.topDrag:case E.topDragEnd:case E.topDragEnter:case E.topDragExit:case E.topDragLeave:case E.topDragOver:case E.topDragStart:case E.topDrop:a=m;break;case E.topTouchCancel:case E.topTouchEnd:case E.topTouchMove:case E.topTouchStart:a=v;break;case E.topAnimationEnd:case E.topAnimationIteration:case E.topAnimationStart:a=l;break;case E.topTransitionEnd:a=g;break;case E.topScroll:a=y;break;case E.topWheel:a=_;break;case E.topCopy:case E.topCut:case E.topPaste:a=c}a?void 0:i("86",e);var u=a.getPooled(o,t,n,r);return s.accumulateTwoPhaseDispatches(u),u},didPutListener:function(e,t,n){if(t===T){var i=r(e),o=u.getNodeFromInstance(e);P[i]||(P[i]=a.listen(o,"click",b))}},willDeleteListener:function(e,t){if(t===T){var n=r(e);P[n].remove(),delete P[n]}}};e.exports=O},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(24),o={animationName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(24),o={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(24),o={data:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(59),o={dataTransfer:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(40),o={relatedTarget:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(24),o={data:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(40),o=n(80),a=n(364),s=n(81),u={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?o(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?o(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};i.augmentClass(r,u),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(40),o=n(81),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};i.augmentClass(r,a),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(24),o={propertyName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){return i.call(this,e,t,n,r)}var i=n(59),o={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,o),e.exports=r},function(e,t){"use strict";function n(e){for(var t=1,n=0,i=0,o=e.length,a=o&-4;i<a;){for(var s=Math.min(i+4096,a);i<s;i+=4)n+=(t+=e.charCodeAt(i))+(t+=e.charCodeAt(i+1))+(t+=e.charCodeAt(i+2))+(t+=e.charCodeAt(i+3));t%=r,n%=r}for(;i<o;i++)n+=t+=e.charCodeAt(i);return t%=r,n%=r,t|n<<16}var r=65521;e.exports=n},function(e,t,n){"use strict";function r(e,t,n){var r=null==t||"boolean"==typeof t||""===t;if(r)return"";var i=isNaN(t);if(i||0===t||o.hasOwnProperty(e)&&o[e])return""+t;if("string"==typeof t){t=t.trim()}return t+"px"}var i=n(122),o=(n(5),i.isUnitlessNumber);e.exports=r},function(e,t,n){"use strict";function r(e){if(null==e)return null;if(1===e.nodeType)return e;var t=a.get(e);return t?(t=s(t),t?o.getNodeFromInstance(t):null):void("function"==typeof e.render?i("44"):i("45",Object.keys(e)))}var i=n(4),o=(n(20),n(8)),a=n(31),s=n(83);n(3),n(5);e.exports=r},function(e,t,n){"use strict";function r(e){if(e.key){var t=o[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=i(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?a[e.keyCode]||"Unidentified":""}var i=n(80),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=r},function(e,t){"use strict";function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function i(e,t){for(var i=n(e),o=0,a=0;i;){if(3===i.nodeType){if(a=o+i.textContent.length,o<=t&&a>=t)return{node:i,offset:t-o};o=a}i=n(r(i))}}e.exports=i},function(e,t,n){
"use strict";function r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function i(e){if(s[e])return s[e];if(!a[e])return e;var t=a[e];for(var n in t)if(t.hasOwnProperty(n)&&n in u)return s[e]=t[n];return""}var o=n(12),a={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},u={};o.canUseDOM&&(u=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),e.exports=i},function(e,t,n){"use strict";function r(e){return o.isValidElement(e)?void 0:i("143"),e}var i=n(4),o=n(14);n(3);e.exports=r},function(e,t,n){"use strict";function r(e){return'"'+i(e)+'"'}var i=n(60);e.exports=r},function(e,t,n){"use strict";var r=n(135);e.exports=r.renderSubtreeIntoContainer},function(e,t,n){"use strict";function r(e,t,n){return!i(e.props,t)||!i(e.state,n)}var i=n(43);e.exports=r},function(e,t){"use strict";function n(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}t.__esModule=!0;var r=n();r.withExtraArgument=n,t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,i){var a=e(n,r,i),u=a.dispatch,l=[],c={getState:a.getState,dispatch:function(e){return u(e)}};return l=t.map(function(e){return e(c)}),u=s.default.apply(void 0,l)(a.dispatch),o({},a,{dispatch:u})}}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i;var a=n(153),s=r(a)},function(e,t){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function r(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),i={},o=0;o<r.length;o++){var a=r[o],s=e[a];"function"==typeof s&&(i[a]=n(s,t))}return i}t.__esModule=!0,t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=t&&t.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function o(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:s.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var i="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:i}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function a(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];"function"==typeof e[a]&&(n[a]=e[a])}var s,u=Object.keys(n);try{o(n)}catch(l){s=l}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(s)throw s;for(var r=!1,o={},a=0;a<u.length;a++){var l=u[a],c=n[l],h=e[l],f=c(h,t);if("undefined"==typeof f){var p=i(l,t);throw new Error(p)}o[l]=f,r=r||f!==h}return r?o:e}}t.__esModule=!0,t.default=a;var s=n(154),u=n(64),l=(r(u),n(155));r(l)},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){return e===t}function i(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1],n=null,i=null;return function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return null!==n&&n.length===o.length&&o.every(function(e,r){return t(e,n[r])})||(i=e.apply(void 0,o)),n=o,i}}function o(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+n+"]"))}return t}function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return function(){for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];var s=0,u=i.pop(),l=o(i),c=e.apply(void 0,[function(){return s++,u.apply(void 0,arguments)}].concat(r)),h=function(e,t){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var a=l.map(function(n){return n.apply(void 0,[e,t].concat(i))});return c.apply(void 0,n(a))};return h.resultFunc=u,h.recomputations=function(){return s},h.resetRecomputations=function(){return s=0},h}}function s(e){var t=arguments.length<=1||void 0===arguments[1]?u:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})}t.__esModule=!0,t.defaultMemoize=i,t.createSelectorCreator=a,t.createStructuredSelector=s;var u=t.createSelector=a(i)},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){var e=function(){function t(e){return i.appendChild(e.dom),e}function n(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";r=e}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(e){e.preventDefault(),n(++r%i.children.length)},!1);var o=(performance||Date).now(),a=o,s=0,u=t(new e.Panel("FPS","#0ff","#002")),l=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:t,showPanel:n,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(l.update(e-o,200),e>a+1e3&&(u.update(1e3*s/(e-a),100),a=e,s=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:i,setMode:n}};return e.Panel=function(e,t,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,u=48*a,l=3*a,c=2*a,h=3*a,f=15*a,p=74*a,d=30*a,m=document.createElement("canvas");m.width=s,m.height=u,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*a+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,s,u),v.fillStyle=t,v.fillText(e,l,c),v.fillRect(h,f,p,d),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h,f,p,d),{dom:m,update:function(u,g){r=Math.min(r,u),i=Math.max(i,u),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,s,f),v.fillStyle=t,v.fillText(o(u)+" "+e+" ("+o(r)+"-"+o(i)+")",l,c),v.drawImage(m,h+a,f,p-a,d,h,f,p-a,d),v.fillRect(h+p-a,f,a,d),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h+p-a,f,a,o((1-u/g)*d))}}},e})},function(e,t,n){e.exports=n(378)},function(e,t,n){(function(e,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o,a=n(379),s=i(a);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:r;var u=(0,s.default)(o);t.default=u}).call(t,function(){return this}(),n(224)(e))},function(e,t){"use strict";function n(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){e.exports=function(e){function t(t,n){function r(){return 2*Math.PI/60/60*D.autoRotateSpeed}function i(){return Math.pow(.95,D.zoomSpeed)}function o(e){z.theta-=e}function a(e){z.phi-=e}function s(t){D.object instanceof e.PerspectiveCamera?G/=t:D.object instanceof e.OrthographicCamera?(D.object.zoom=Math.max(D.minZoom,Math.min(D.maxZoom,D.object.zoom*t)),D.object.updateProjectionMatrix(),W=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),D.enableZoom=!1)}function u(t){D.object instanceof e.PerspectiveCamera?G*=t:D.object instanceof e.OrthographicCamera?(D.object.zoom=Math.max(D.minZoom,Math.min(D.maxZoom,D.object.zoom/t)),D.object.updateProjectionMatrix(),W=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),D.enableZoom=!1)}function l(e){q.set(e.clientX,e.clientY)}function c(e){J.set(e.clientX,e.clientY)}function h(e){K.set(e.clientX,e.clientY)}function f(e){X.set(e.clientX,e.clientY),Y.subVectors(X,q);var t=D.domElement===document?D.domElement.body:D.domElement;o(2*Math.PI*Y.x/t.clientWidth*D.rotateSpeed),a(2*Math.PI*Y.y/t.clientHeight*D.rotateSpeed),q.copy(X),D.update()}function p(e){$.set(e.clientX,e.clientY),ee.subVectors($,J),ee.y>0?s(i()):ee.y<0&&u(i()),J.copy($),D.update()}function d(e){Z.set(e.clientX,e.clientY),Q.subVectors(Z,K),re(Q.x,Q.y),K.copy(Z),D.update()}function m(e){}function v(e){e.deltaY<0?u(i()):e.deltaY>0&&s(i()),D.update()}function g(e){switch(e.keyCode){case D.keys.UP:re(0,D.keyPanSpeed),D.update();break;case D.keys.BOTTOM:re(0,-D.keyPanSpeed),D.update();break;case D.keys.LEFT:re(D.keyPanSpeed,0),D.update();break;case D.keys.RIGHT:re(-D.keyPanSpeed,0),D.update()}}function y(e){q.set(e.touches[0].pageX,e.touches[0].pageY)}function _(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);J.set(0,r)}function b(e){K.set(e.touches[0].pageX,e.touches[0].pageY)}function w(e){X.set(e.touches[0].pageX,e.touches[0].pageY),Y.subVectors(X,q);var t=D.domElement===document?D.domElement.body:D.domElement;o(2*Math.PI*Y.x/t.clientWidth*D.rotateSpeed),a(2*Math.PI*Y.y/t.clientHeight*D.rotateSpeed),q.copy(X),D.update()}function x(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);$.set(0,r),ee.subVectors($,J),ee.y>0?u(i()):ee.y<0&&s(i()),J.copy($),D.update()}function E(e){Z.set(e.touches[0].pageX,e.touches[0].pageY),Q.subVectors(Z,K),re(Q.x,Q.y),K.copy(Z),D.update()}function M(e){}function C(e){if(D.enabled!==!1){if(e.preventDefault(),e.button===D.mouseButtons.ORBIT){if(D.enableRotate===!1)return;l(e),U=B.ROTATE}else if(e.button===D.mouseButtons.ZOOM){if(D.enableZoom===!1)return;c(e),U=B.DOLLY}else if(e.button===D.mouseButtons.PAN){if(D.enablePan===!1)return;h(e),U=B.PAN}U!==B.NONE&&(document.addEventListener("mousemove",S,!1),document.addEventListener("mouseup",T,!1),D.dispatchEvent(j))}}function S(e){if(D.enabled!==!1)if(e.preventDefault(),U===B.ROTATE){if(D.enableRotate===!1)return;f(e)}else if(U===B.DOLLY){if(D.enableZoom===!1)return;p(e)}else if(U===B.PAN){if(D.enablePan===!1)return;d(e)}}function T(e){D.enabled!==!1&&(m(e),document.removeEventListener("mousemove",S,!1),document.removeEventListener("mouseup",T,!1),D.dispatchEvent(N),U=B.NONE)}function P(e){D.enabled===!1||D.enableZoom===!1||U!==B.NONE&&U!==B.ROTATE||(e.preventDefault(),e.stopPropagation(),v(e),D.dispatchEvent(j),D.dispatchEvent(N))}function O(e){D.enabled!==!1&&D.enableKeys!==!1&&D.enablePan!==!1&&g(e)}function A(e){if(D.enabled!==!1){switch(e.touches.length){case 1:if(D.enableRotate===!1)return;y(e),U=B.TOUCH_ROTATE;break;case 2:if(D.enableZoom===!1)return;_(e),U=B.TOUCH_DOLLY;break;case 3:if(D.enablePan===!1)return;b(e),U=B.TOUCH_PAN;break;default:U=B.NONE}U!==B.NONE&&D.dispatchEvent(j)}}function R(e){if(D.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(D.enableRotate===!1)return;if(U!==B.TOUCH_ROTATE)return;w(e);break;case 2:if(D.enableZoom===!1)return;if(U!==B.TOUCH_DOLLY)return;x(e);break;case 3:if(D.enablePan===!1)return;if(U!==B.TOUCH_PAN)return;E(e);break;default:U=B.NONE}}function k(e){D.enabled!==!1&&(M(e),D.dispatchEvent(N),U=B.NONE)}function L(e){e.preventDefault()}this.object=t,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return V.phi},this.getAzimuthalAngle=function(){return V.theta},this.reset=function(){D.target.copy(D.target0),D.object.position.copy(D.position0),D.object.zoom=D.zoom0,D.object.updateProjectionMatrix(),D.dispatchEvent(I),D.update(),U=B.NONE},this.update=function(){var n=new e.Vector3,i=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),a=i.clone().inverse(),s=new e.Vector3,u=new e.Quaternion;return function(){var e=D.object.position;return n.copy(e).sub(D.target),n.applyQuaternion(i),V.setFromVector3(n),D.autoRotate&&U===B.NONE&&o(r()),V.theta+=z.theta,V.phi+=z.phi,V.theta=Math.max(D.minAzimuthAngle,Math.min(D.maxAzimuthAngle,V.theta)),V.phi=Math.max(D.minPolarAngle,Math.min(D.maxPolarAngle,V.phi)),V.makeSafe(),V.radius*=G,V.radius=Math.max(D.minDistance,Math.min(D.maxDistance,V.radius)),D.target.add(H),n.setFromSpherical(V),n.applyQuaternion(a),e.copy(D.target).add(n),D.object.lookAt(D.target),D.enableDamping===!0?(z.theta*=1-D.dampingFactor,z.phi*=1-D.dampingFactor):z.set(0,0,0),G=1,H.set(0,0,0),!!(W||s.distanceToSquared(D.object.position)>F||8*(1-u.dot(D.object.quaternion))>F)&&(D.dispatchEvent(I),s.copy(D.object.position),u.copy(D.object.quaternion),W=!1,!0)}}(),this.dispose=function(){D.domElement.removeEventListener("contextmenu",L,!1),D.domElement.removeEventListener("mousedown",C,!1),D.domElement.removeEventListener("wheel",P,!1),D.domElement.removeEventListener("touchstart",A,!1),D.domElement.removeEventListener("touchend",k,!1),D.domElement.removeEventListener("touchmove",R,!1),document.removeEventListener("mousemove",S,!1),document.removeEventListener("mouseup",T,!1),window.removeEventListener("keydown",O,!1)};var D=this,I={type:"change"},j={type:"start"},N={type:"end"},B={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},U=B.NONE,F=1e-6,V=new e.Spherical,z=new e.Spherical,G=1,H=new e.Vector3,W=!1,q=new e.Vector2,X=new e.Vector2,Y=new e.Vector2,K=new e.Vector2,Z=new e.Vector2,Q=new e.Vector2,J=new e.Vector2,$=new e.Vector2,ee=new e.Vector2,te=function(){var t=new e.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),H.add(t)}}(),ne=function(){var t=new e.Vector3;return function(e,n){t.setFromMatrixColumn(n,1),t.multiplyScalar(e),H.add(t)}}(),re=function(){var t=new e.Vector3;return function(n,r){var i=D.domElement===document?D.domElement.body:D.domElement;if(D.object instanceof e.PerspectiveCamera){var o=D.object.position;t.copy(o).sub(D.target);var a=t.length();a*=Math.tan(D.object.fov/2*Math.PI/180),te(2*n*a/i.clientHeight,D.object.matrix),ne(2*r*a/i.clientHeight,D.object.matrix)}else D.object instanceof e.OrthographicCamera?(te(n*(D.object.right-D.object.left)/D.object.zoom/i.clientWidth,D.object.matrix),ne(r*(D.object.top-D.object.bottom)/D.object.zoom/i.clientHeight,D.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),D.enablePan=!1)}}();D.domElement.addEventListener("contextmenu",L,!1),D.domElement.addEventListener("mousedown",C,!1),D.domElement.addEventListener("wheel",P,!1),D.domElement.addEventListener("touchstart",A,!1),D.domElement.addEventListener("touchend",k,!1),D.domElement.addEventListener("touchmove",R,!1),window.addEventListener("keydown",O,!1),this.update()}return t.prototype=Object.create(e.EventDispatcher.prototype),t.prototype.constructor=t,Object.defineProperties(t.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),t}},function(e,t,n){var r,i;(function(n){var o=o||function(){var e=[];return{getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)},update:function(t,n){if(0===e.length)return!1;var r=0;for(t=void 0!==t?t:o.now();r<e.length;)e[r].update(t)||n?r++:e.splice(r,1);return!0}}}();!function(){void 0===this.window&&void 0!==this.process?o.now=function(){var e=n.hrtime();return 1e3*e[0]+e[1]/1e3}:void 0!==this.window&&void 0!==window.performance&&void 0!==window.performance.now?o.now=window.performance.now.bind(window.performance):void 0!==Date.now?o.now=Date.now:o.now=function(){return(new Date).getTime()}}(),o.Tween=function(e){var t=e,n={},r={},i={},a=1e3,s=0,u=!1,l=!1,c=!1,h=0,f=null,p=o.Easing.Linear.None,d=o.Interpolation.Linear,m=[],v=null,g=!1,y=null,_=null,b=null;for(var w in e)n[w]=parseFloat(e[w],10);this.to=function(e,t){return void 0!==t&&(a=t),r=e,this},this.start=function(e){o.add(this),l=!0,g=!1,f=void 0!==e?e:o.now(),f+=h;for(var a in r){if(r[a]instanceof Array){if(0===r[a].length)continue;r[a]=[t[a]].concat(r[a])}void 0!==n[a]&&(n[a]=t[a],n[a]instanceof Array==!1&&(n[a]*=1),i[a]=n[a]||0)}return this},this.stop=function(){return l?(o.remove(this),l=!1,null!==b&&b.call(t),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var e=0,t=m.length;e<t;e++)m[e].stop()},this.delay=function(e){return h=e,this},this.repeat=function(e){return s=e,this},this.yoyo=function(e){return u=e,this},this.easing=function(e){return p=e,this},this.interpolation=function(e){return d=e,this},this.chain=function(){return m=arguments,this},this.onStart=function(e){return v=e,this},this.onUpdate=function(e){return y=e,this},this.onComplete=function(e){return _=e,this},this.onStop=function(e){return b=e,this},this.update=function(e){var o,l,b;if(e<f)return!0;g===!1&&(null!==v&&v.call(t),g=!0),l=(e-f)/a,l=l>1?1:l,b=p(l);for(o in r)if(void 0!==n[o]){var w=n[o]||0,x=r[o];x instanceof Array?t[o]=d(x,b):("string"==typeof x&&(x="+"===x.charAt(0)||"-"===x.charAt(0)?w+parseFloat(x,10):parseFloat(x,10)),"number"==typeof x&&(t[o]=w+(x-w)*b))}if(null!==y&&y.call(t,b),1===l){if(s>0){isFinite(s)&&s--;for(o in i){if("string"==typeof r[o]&&(i[o]=i[o]+parseFloat(r[o],10)),u){var E=i[o];i[o]=r[o],r[o]=E}n[o]=i[o]}return u&&(c=!c),f=e+h,!0}null!==_&&_.call(t);for(var M=0,C=m.length;M<C;M++)m[M].start(f+a);return!1}return!0}},o.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-o.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*o.Easing.Bounce.In(2*e):.5*o.Easing.Bounce.Out(2*e-1)+.5}}},o.Interpolation={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=o.Interpolation.Utils.Linear;return t<0?a(e[0],e[1],r):t>1?a(e[n],e[n-1],n-r):a(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){for(var n=0,r=e.length-1,i=Math.pow,a=o.Interpolation.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-t,r-s)*i(t,s)*e[s]*a(r,s);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=o.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),a(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):a(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=o.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var r=t;r>1;r--)n*=r;return e[t]=n,n}}(),CatmullRom:function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i,u=i*s;return(2*t-2*n+o+a)*u+(-3*t+3*n-2*o-a)*s+o*i+t}}},function(n){r=[],i=function(){return o}.apply(t,r),!(void 0!==i&&(e.exports=i))}(this)}).call(t,n(35))},function(e,t){},382,function(e,t,n,r){"use strict";var i=n(r),o=i;e.exports=o}]));
//# sourceMappingURL=main.b1a9dc60.js.map