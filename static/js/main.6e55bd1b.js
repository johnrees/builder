!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="/builder/",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),r=t[e[0]];return function(t,e,i){r.apply(this,[t,e,i].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){n(221),t.exports=n(236)},function(t,e,n){var r,i,o={REVISION:"79"};r=o,i="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==i&&(t.exports=i)),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(t){"use strict";if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}}(),Object.assign(o,{MOUSE:{LEFT:0,MIDDLE:1,RIGHT:2},CullFaceNone:0,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,FrontFaceDirectionCW:0,FrontFaceDirectionCCW:1,BasicShadowMap:0,PCFShadowMap:1,PCFSoftShadowMap:2,FrontSide:0,BackSide:1,DoubleSide:2,FlatShading:1,SmoothShading:2,NoColors:0,FaceColors:1,VertexColors:2,NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5,AddEquation:100,SubtractEquation:101,ReverseSubtractEquation:102,MinEquation:103,MaxEquation:104,ZeroFactor:200,OneFactor:201,SrcColorFactor:202,OneMinusSrcColorFactor:203,SrcAlphaFactor:204,OneMinusSrcAlphaFactor:205,DstAlphaFactor:206,OneMinusDstAlphaFactor:207,DstColorFactor:208,OneMinusDstColorFactor:209,SrcAlphaSaturateFactor:210,NeverDepth:0,AlwaysDepth:1,LessDepth:2,LessEqualDepth:3,EqualDepth:4,GreaterEqualDepth:5,GreaterDepth:6,NotEqualDepth:7,MultiplyOperation:0,MixOperation:1,AddOperation:2,NoToneMapping:0,LinearToneMapping:1,ReinhardToneMapping:2,Uncharted2ToneMapping:3,CineonToneMapping:4,UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307,RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002,NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008,UnsignedByteType:1009,ByteType:1010,ShortType:1011,UnsignedShortType:1012,IntType:1013,UnsignedIntType:1014,FloatType:1015,HalfFloatType:1025,UnsignedShort4444Type:1016,UnsignedShort5551Type:1017,UnsignedShort565Type:1018,AlphaFormat:1019,RGBFormat:1020,RGBAFormat:1021,LuminanceFormat:1022,LuminanceAlphaFormat:1023,RGBEFormat:o.RGBAFormat,DepthFormat:1026,RGB_S3TC_DXT1_Format:2001,RGBA_S3TC_DXT1_Format:2002,RGBA_S3TC_DXT3_Format:2003,RGBA_S3TC_DXT5_Format:2004,RGB_PVRTC_4BPPV1_Format:2100,RGB_PVRTC_2BPPV1_Format:2101,RGBA_PVRTC_4BPPV1_Format:2102,RGBA_PVRTC_2BPPV1_Format:2103,RGB_ETC1_Format:2151,LoopOnce:2200,LoopRepeat:2201,LoopPingPong:2202,InterpolateDiscrete:2300,InterpolateLinear:2301,InterpolateSmooth:2302,ZeroCurvatureEnding:2400,ZeroSlopeEnding:2401,WrapAroundEnding:2402,TrianglesDrawMode:0,TriangleStripDrawMode:1,TriangleFanDrawMode:2,LinearEncoding:3e3,sRGBEncoding:3001,GammaEncoding:3007,RGBEEncoding:3002,LogLuvEncoding:3003,RGBM7Encoding:3004,RGBM16Encoding:3005,RGBDEncoding:3006,BasicDepthPacking:3200,RGBADepthPacking:3201}),o.Color=function(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)},o.Color.prototype={constructor:o.Color,r:1,g:1,b:1,set:function(t){return t instanceof o.Color?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){this.r=t,this.g=t,this.b=t},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,r){if(e=o.Math.euclideanModulo(e,1),n=o.Math.clamp(n,0,1),r=o.Math.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,a=2*r-i;this.r=t(a,i,e+1/3),this.g=t(a,i,e),this.b=t(a,i,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var s=parseFloat(r[1])/360,u=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(s,u,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c=n[1],h=c.length;if(3===h)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}if(t&&t.length>0){var c=o.ColorKeywords[t];void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,n,r=t||{h:0,s:0,l:0},i=this.r,o=this.g,a=this.b,s=Math.max(i,o,a),u=Math.min(i,o,a),l=(u+s)/2;if(u===s)e=0,n=0;else{var c=s-u;switch(n=l<=.5?c/(s+u):c/(2-s-u),s){case i:e=(o-a)/c+(o<a?6:0);break;case o:e=(a-i)/c+2;break;case a:e=(i-o)/c+4}e/=6}return r.h=e,r.s=n,r.l=l,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){var r=this.getHSL();return r.h+=t,r.s+=e,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},o.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},o.Quaternion=function(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1},o.Quaternion.prototype={constructor:o.Quaternion,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(t instanceof o.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(t._x/2),r=Math.cos(t._y/2),i=Math.cos(t._z/2),a=Math.sin(t._x/2),s=Math.sin(t._y/2),u=Math.sin(t._z/2),l=t.order;return"XYZ"===l?(this._x=a*r*i+n*s*u,this._y=n*s*i-a*r*u,this._z=n*r*u+a*s*i,this._w=n*r*i-a*s*u):"YXZ"===l?(this._x=a*r*i+n*s*u,this._y=n*s*i-a*r*u,this._z=n*r*u-a*s*i,this._w=n*r*i+a*s*u):"ZXY"===l?(this._x=a*r*i-n*s*u,this._y=n*s*i+a*r*u,this._z=n*r*u+a*s*i,this._w=n*r*i-a*s*u):"ZYX"===l?(this._x=a*r*i-n*s*u,this._y=n*s*i+a*r*u,this._z=n*r*u-a*s*i,this._w=n*r*i+a*s*u):"YZX"===l?(this._x=a*r*i+n*s*u,this._y=n*s*i+a*r*u,this._z=n*r*u-a*s*i,this._w=n*r*i-a*s*u):"XZY"===l&&(this._x=a*r*i-n*s*u,this._y=n*s*i-a*r*u,this._z=n*r*u+a*s*i,this._w=n*r*i+a*s*u),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],l=n[2],c=n[6],h=n[10],f=r+s+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(c-u)*e,this._y=(o-l)*e,this._z=(a-i)*e):r>s&&r>h?(e=2*Math.sqrt(1+r-s-h),this._w=(c-u)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(o+l)/e):s>h?(e=2*Math.sqrt(1+s-r-h),this._w=(o-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(u+c)/e):(e=2*Math.sqrt(1+h-r-s),this._w=(a-i)/e,this._x=(o+l)/e,this._y=(u+c)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e,n=1e-6;return function(r,i){return void 0===t&&(t=new o.Vector3),e=r.dot(i)+1,e<n?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,l=e._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var u=Math.atan2(s,a),l=Math.sin((1-e)*u)/s,c=Math.sin(e*u)/s;return this._w=o*l+this._w*c,this._x=n*l+this._x*c,this._y=r*l+this._y*c,this._z=i*l+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(o.Quaternion,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[o+0],f=i[o+1],p=i[o+2],d=i[o+3];if(c!==d||s!==h||u!==f||l!==p){var m=1-a,v=s*h+u*f+l*p+c*d,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,v*g);m=Math.sin(m*b)/_,a=Math.sin(a*b)/_}var w=a*g;if(s=s*m+h*w,u=u*m+f*w,l=l*m+p*w,c=c*m+d*w,m===1-a){var x=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=x,u*=x,l*=x,c*=x}}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=c}}),o.Vector2=function(t,e){this.x=t||0,this.y=e||0},o.Vector2.prototype={constructor:o.Vector2,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new o.Vector2,e=new o.Vector2),t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}},o.Vector3=function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0},o.Vector3.prototype={constructor:o.Vector3,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return e instanceof o.Euler==!1&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new o.Quaternion),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t;return function(e,n){return void 0===t&&(t=new o.Quaternion),this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r+i[12],this.y=i[1]*e+i[5]*n+i[9]*r+i[13],this.z=i[2]*e+i[6]*n+i[10]*r+i[14],this},applyProjection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,l=s*n+a*e-i*r,c=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this},project:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new o.Vector3,e=new o.Vector3),t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,r=this.y,i=this.z;return this.x=r*t.z-i*t.y,this.y=i*t.x-n*t.z,this.z=n*t.y-r*t.x,this},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new o.Vector3),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new o.Vector3),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(o.Math.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){if("number"==typeof t){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=t;t=e,e=n}return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this}},o.Vector4=function(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1},o.Vector4.prototype={constructor:o.Vector4,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=.01,a=.1,s=t.elements,u=s[0],l=s[4],c=s[8],h=s[1],f=s[5],p=s[9],d=s[2],m=s[6],v=s[10];if(Math.abs(l-h)<o&&Math.abs(c-d)<o&&Math.abs(p-m)<o){if(Math.abs(l+h)<a&&Math.abs(c+d)<a&&Math.abs(p+m)<a&&Math.abs(u+f+v-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var g=(u+1)/2,y=(f+1)/2,_=(v+1)/2,b=(l+h)/4,w=(c+d)/4,x=(p+m)/4;return g>y&&g>_?g<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(g),r=b/n,i=w/n):y>_?y<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=b/r,i=x/r):_<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(_),n=w/i,r=x/i),this.set(n,r,i,e),this}var E=Math.sqrt((m-p)*(m-p)+(c-d)*(c-d)+(h-l)*(h-l));return Math.abs(E)<.001&&(E=1),this.x=(m-p)/E,this.y=(c-d)/E,this.z=(h-l)/E,this.w=Math.acos((u+f+v-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new o.Vector4,e=new o.Vector4),t.set(n,n,n,n),e.set(r,r,r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),
this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this.w=t.array[e+3],this}},o.Euler=function(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||o.Euler.DefaultOrder},o.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],o.Euler.DefaultOrder="XYZ",o.Euler.prototype={constructor:o.Euler,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=o.Math.clamp,i=t.elements,a=i[0],s=i[4],u=i[8],l=i[1],c=i[5],h=i[9],f=i[2],p=i[6],d=i[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(p,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(u,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===e?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,c))):"YZX"===e?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(u,d))):"XZY"===e?(this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(p,c),this._y=Math.atan2(u,a)):(this._x=Math.atan2(-h,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,n,r){return void 0===t&&(t=new o.Matrix4),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,r)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new o.Quaternion;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new o.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},o.Line3=function(t,e){this.start=void 0!==t?t:new o.Vector3,this.end=void 0!==e?e:new o.Vector3},o.Line3.prototype={constructor:o.Line3,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},center:function(t){var e=t||new o.Vector3;return e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){var e=t||new o.Vector3;return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var n=e||new o.Vector3;return this.delta(n).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new o.Vector3,e=new o.Vector3;return function(n,r){t.subVectors(n,this.start),e.subVectors(this.end,this.start);var i=e.dot(e),a=e.dot(t),s=a/i;return r&&(s=o.Math.clamp(s,0,1)),s}}(),closestPointToPoint:function(t,e,n){var r=this.closestPointToPointParameter(t,e),i=n||new o.Vector3;return this.delta(i).multiplyScalar(r).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},o.Box2=function(t,e){this.min=void 0!==t?t:new o.Vector2((+(1/0)),(+(1/0))),this.max=void 0!==e?e:new o.Vector2((-(1/0)),(-(1/0)))},o.Box2.prototype={constructor:o.Box2,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new o.Vector2;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(t){var e=t||new o.Vector2;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var e=t||new o.Vector2;return e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){var n=e||new o.Vector2;return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){var n=e||new o.Vector2;return n.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new o.Vector2;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},o.Box3=function(t,e){this.min=void 0!==t?t:new o.Vector3((+(1/0)),(+(1/0)),(+(1/0))),this.max=void 0!==e?e:new o.Vector3((-(1/0)),(-(1/0)),(-(1/0)))},o.Box3.prototype={constructor:o.Box3,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=+(1/0),n=+(1/0),r=+(1/0),i=-(1/0),o=-(1/0),a=-(1/0),s=0,u=t.length;s<u;s+=3){var l=t[s],c=t[s+1],h=t[s+2];l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}this.min.set(e,n,r),this.max.set(i,o,a)},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new o.Vector3;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(){var t=new o.Vector3;return function(e){var n=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var r=e.geometry;if(void 0!==r)if(r instanceof o.Geometry)for(var i=r.vertices,a=0,s=i.length;a<s;a++)t.copy(i[a]),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t);else if(r instanceof o.BufferGeometry){var u=r.attributes.position;if(void 0!==u){var l,c,h;u instanceof o.InterleavedBufferAttribute?(l=u.data.array,c=u.offset,h=u.data.stride):(l=u.array,c=0,h=3);for(var a=c,s=l.length;a<s;a+=h)t.fromArray(l,a),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t)}}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){var e=t||new o.Vector3;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var e=t||new o.Vector3;return e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){var n=e||new o.Vector3;return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t;return function(e){return void 0===t&&(t=new o.Vector3),this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},clampPoint:function(t,e){var n=e||new o.Vector3;return n.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new o.Vector3;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),getBoundingSphere:function(){var t=new o.Vector3;return function(e){var n=e||new o.Sphere;return n.center=this.center(),n.radius=.5*this.size(t).length(),n}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3,new o.Vector3];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},o.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},o.Matrix3.prototype={constructor:o.Matrix3,set:function(t,e,n,r,i,o,a,s,u){var l=this.elements;return l[0]=t,l[1]=r,l[2]=a,l[3]=e,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToVector3Array:function(){var t;return function(e,n,r){void 0===t&&(t=new o.Vector3),void 0===n&&(n=0),void 0===r&&(r=e.length);for(var i=0,a=n;i<r;i+=3,a+=3)t.fromArray(e,a),t.applyMatrix3(this),t.toArray(e,a);return e}}(),applyToBuffer:function(){var t;return function(e,n,r){void 0===t&&(t=new o.Vector3),void 0===n&&(n=0),void 0===r&&(r=e.length/e.itemSize);for(var i=0,a=n;i<r;i++,a++)t.x=e.getX(a),t.y=e.getY(a),t.z=e.getZ(a),t.applyMatrix3(this),e.setXYZ(t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*o*l-e*a*u-n*i*l+n*a*s+r*i*u-r*o*s},getInverse:function(t,e){t instanceof o.Matrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=t.elements,r=this.elements,i=n[0],a=n[1],s=n[2],u=n[3],l=n[4],c=n[5],h=n[6],f=n[7],p=n[8],d=p*l-c*f,m=c*h-p*u,v=f*u-l*h,g=i*d+a*m+s*v;if(0===g){var y="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(y);return console.warn(y),this.identity()}var _=1/g;return r[0]=d*_,r[1]=(s*f-p*a)*_,r[2]=(c*a-s*l)*_,r[3]=m*_,r[4]=(p*i-s*h)*_,r[5]=(s*u-c*i)*_,r[6]=v*_,r[7]=(a*h-f*i)*_,r[8]=(l*i-a*u)*_,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(t,e)},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},o.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},o.Matrix4.prototype={constructor:o.Matrix4,set:function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=f,v[7]=p,v[11]=d,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new o.Matrix4).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new o.Vector3);var n=this.elements,r=e.elements,i=1/t.setFromMatrixColumn(e,0).length(),a=1/t.setFromMatrixColumn(e,1).length(),s=1/t.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,this}}(),makeRotationFromEuler:function(t){t instanceof o.Euler==!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,a=Math.cos(n),s=Math.sin(n),u=Math.cos(r),l=Math.sin(r),c=Math.cos(i),h=Math.sin(i);if("XYZ"===t.order){var f=a*c,p=a*h,d=s*c,m=s*h;e[0]=u*c,e[4]=-u*h,e[8]=l,e[1]=p+d*l,e[5]=f-m*l,e[9]=-s*u,e[2]=m-f*l,e[6]=d+p*l,e[10]=a*u}else if("YXZ"===t.order){var v=u*c,g=u*h,y=l*c,_=l*h;e[0]=v+_*s,e[4]=y*s-g,e[8]=a*l,e[1]=a*h,e[5]=a*c,e[9]=-s,e[2]=g*s-y,e[6]=_+v*s,e[10]=a*u}else if("ZXY"===t.order){var v=u*c,g=u*h,y=l*c,_=l*h;e[0]=v-_*s,e[4]=-a*h,e[8]=y+g*s,e[1]=g+y*s,e[5]=a*c,e[9]=_-v*s,e[2]=-a*l,e[6]=s,e[10]=a*u}else if("ZYX"===t.order){var f=a*c,p=a*h,d=s*c,m=s*h;e[0]=u*c,e[4]=d*l-p,e[8]=f*l+m,e[1]=u*h,e[5]=m*l+f,e[9]=p*l-d,e[2]=-l,e[6]=s*u,e[10]=a*u}else if("YZX"===t.order){var b=a*u,w=a*l,x=s*u,E=s*l;e[0]=u*c,e[4]=E-b*h,e[8]=x*h+w,e[1]=h,e[5]=a*c,e[9]=-s*c,e[2]=-l*c,e[6]=w*h+x,e[10]=b-E*h}else if("XZY"===t.order){var b=a*u,w=a*l,x=s*u,E=s*l;e[0]=u*c,e[4]=-h,e[8]=l*c,e[1]=b*h+E,e[5]=a*c,e[9]=w*h-x,e[2]=x*h-w,e[6]=s*c,e[10]=E*h+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z,o=t.w,a=n+n,s=r+r,u=i+i,l=n*a,c=n*s,h=n*u,f=r*s,p=r*u,d=i*u,m=o*a,v=o*s,g=o*u;return e[0]=1-(f+d),e[4]=c-g,e[8]=h+v,e[1]=c+g,e[5]=1-(l+d),e[9]=p-m,e[2]=h-v,e[6]=p+m,e[10]=1-(l+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,n;return function(r,i,a){void 0===t&&(t=new o.Vector3,e=new o.Vector3,n=new o.Vector3);var s=this.elements;return n.subVectors(r,i).normalize(),0===n.lengthSq()&&(n.z=1),t.crossVectors(a,n).normalize(),0===t.lengthSq()&&(n.z+=1e-4,t.crossVectors(a,n).normalize()),e.crossVectors(n,t),s[0]=t.x,s[4]=e.x,s[8]=n.x,s[1]=t.y,s[5]=e.y,s[9]=n.y,s[2]=t.z,s[6]=e.z,s[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],p=n[2],d=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],b=n[15],w=r[0],x=r[4],E=r[8],C=r[12],S=r[1],M=r[5],P=r[9],T=r[13],O=r[2],A=r[6],R=r[10],L=r[14],I=r[3],k=r[7],D=r[11],j=r[15];return i[0]=o*w+a*S+s*O+u*I,i[4]=o*x+a*M+s*A+u*k,i[8]=o*E+a*P+s*R+u*D,i[12]=o*C+a*T+s*L+u*j,i[1]=l*w+c*S+h*O+f*I,i[5]=l*x+c*M+h*A+f*k,i[9]=l*E+c*P+h*R+f*D,i[13]=l*C+c*T+h*L+f*j,i[2]=p*w+d*S+m*O+v*I,i[6]=p*x+d*M+m*A+v*k,i[10]=p*E+d*P+m*R+v*D,i[14]=p*C+d*T+m*L+v*j,i[3]=g*w+y*S+_*O+b*I,i[7]=g*x+y*M+_*A+b*k,i[11]=g*E+y*P+_*R+b*D,i[15]=g*C+y*T+_*L+b*j,this},multiplyToArray:function(t,e,n){var r=this.elements;return this.multiplyMatrices(t,e),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToVector3Array:function(){var t;return function(e,n,r){void 0===t&&(t=new o.Vector3),void 0===n&&(n=0),void 0===r&&(r=e.length);for(var i=0,a=n;i<r;i+=3,a+=3)t.fromArray(e,a),t.applyMatrix4(this),t.toArray(e,a);return e}}(),applyToBuffer:function(){var t;return function(e,n,r){void 0===t&&(t=new o.Vector3),void 0===n&&(n=0),void 0===r&&(r=e.length/e.itemSize);for(var i=0,a=n;i<r;i++,a++)t.x=e.getX(a),t.y=e.getY(a),t.z=e.getZ(a),t.applyMatrix4(this),e.setXYZ(t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],f=t[14],p=t[3],d=t[7],m=t[11],v=t[15];return p*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*f-n*s*f)+d*(+e*s*f-e*u*h+i*o*h-r*o*f+r*u*l-i*s*l)+m*(+e*u*c-e*a*f-i*o*c+n*o*f+i*a*l-n*u*l)+v*(-r*a*l-e*s*c+e*a*h+r*o*c-n*o*h+n*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new o.Vector3),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],f=r[8],p=r[9],d=r[10],m=r[11],v=r[12],g=r[13],y=r[14],_=r[15],b=p*y*h-g*d*h+g*c*m-l*y*m-p*c*_+l*d*_,w=v*d*h-f*y*h-v*c*m+u*y*m+f*c*_-u*d*_,x=f*g*h-v*p*h+v*l*m-u*g*m-f*l*_+u*p*_,E=v*p*c-f*g*c-v*l*d+u*g*d+f*l*y-u*p*y,C=i*b+o*w+a*x+s*E;if(0===C){var S="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(e)throw new Error(S);return console.warn(S),this.identity()}var M=1/C;return n[0]=b*M,n[1]=(g*d*s-p*y*s-g*a*m+o*y*m+p*a*_-o*d*_)*M,n[2]=(l*y*s-g*c*s+g*a*h-o*y*h-l*a*_+o*c*_)*M,n[3]=(p*c*s-l*d*s-p*a*h+o*d*h+l*a*m-o*c*m)*M,n[4]=w*M,n[5]=(f*y*s-v*d*s+v*a*m-i*y*m-f*a*_+i*d*_)*M,n[6]=(v*c*s-u*y*s-v*a*h+i*y*h+u*a*_-i*c*_)*M,n[7]=(u*d*s-f*c*s+f*a*h-i*d*h-u*a*m+i*c*m)*M,n[8]=x*M,n[9]=(v*p*s-f*g*s-v*o*m+i*g*m+f*o*_-i*p*_)*M,n[10]=(u*g*s-v*l*s+v*o*h-i*g*h-u*o*_+i*l*_)*M,n[11]=(f*l*s-u*p*s-f*o*h+i*p*h+u*o*m-i*l*m)*M,n[12]=E*M,n[13]=(f*g*a-v*p*a+v*o*d-i*g*d-f*o*y+i*p*y)*M,n[14]=(v*l*a-u*g*a-v*o*c+i*g*c+u*o*y-i*l*y)*M,n[15]=(u*p*a-f*l*a+f*o*c-i*p*c-u*o*d+i*l*d)*M,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(){var t,e;return function(n,r,i){void 0===t&&(t=new o.Vector3,e=new o.Matrix4);var a=this.elements,s=t.set(a[0],a[1],a[2]).length(),u=t.set(a[4],a[5],a[6]).length(),l=t.set(a[8],a[9],a[10]).length(),c=this.determinant();c<0&&(s=-s),n.x=a[12],n.y=a[13],n.z=a[14],e.elements.set(this.elements);var h=1/s,f=1/u,p=1/l;return e.elements[0]*=h,e.elements[1]*=h,e.elements[2]*=h,e.elements[4]*=f,e.elements[5]*=f,e.elements[6]*=f,e.elements[8]*=p,e.elements[9]*=p,e.elements[10]*=p,r.setFromRotationMatrix(e),i.x=s,i.y=u,i.z=l,this}}(),makeFrustum:function(t,e,n,r,i,o){var a=this.elements,s=2*i/(e-t),u=2*i/(r-n),l=(e+t)/(e-t),c=(r+n)/(r-n),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(t,e,n,r){var i=n*Math.tan(o.Math.DEG2RAD*t*.5),a=-i,s=a*e,u=i*e;return this.makeFrustum(s,u,a,i,n,r)},makeOrthographic:function(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),l=1/(o-i),c=(e+t)*s,h=(n+r)*u,f=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t){return this.elements.set(t),this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}},o.Ray=function(t,e){this.origin=void 0!==t?t:new o.Vector3,this.direction=void 0!==e?e:new o.Vector3},o.Ray.prototype={constructor:o.Ray,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){var n=e||new o.Vector3;return n.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new o.Vector3;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var n=e||new o.Vector3;n.subVectors(t,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new o.Vector3;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new o.Vector3,e=new o.Vector3,n=new o.Vector3;return function(r,i,o,a){t.copy(r).add(i).multiplyScalar(.5),e.copy(i).sub(r).normalize(),n.copy(this.origin).sub(t);var s,u,l,c,h=.5*r.distanceTo(i),f=-this.direction.dot(e),p=n.dot(this.direction),d=-n.dot(e),m=n.lengthSq(),v=Math.abs(1-f*f);if(v>0)if(s=f*d-p,u=f*p-d,c=h*v,s>=0)if(u>=-c)if(u<=c){var g=1/v;s*=g,u*=g,l=s*(s+f*u+2*p)+u*(f*s+u+2*d)+m}else u=h,s=Math.max(0,-(f*u+p)),l=-s*s+u*(u+2*d)+m;else u=-h,s=Math.max(0,-(f*u+p)),l=-s*s+u*(u+2*d)+m;else u<=-c?(s=Math.max(0,-(-f*h+p)),u=s>0?-h:Math.min(Math.max(-h,-d),h),l=-s*s+u*(u+2*d)+m):u<=c?(s=0,u=Math.min(Math.max(-h,-d),h),l=u*(u+2*d)+m):(s=Math.max(0,-(f*h+p)),u=s>0?h:Math.min(Math.max(-h,-d),h),l=-s*s+u*(u+2*d)+m);else u=f>0?-h:h,s=Math.max(0,-(f*u+p)),l=-s*s+u*(u+2*d)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(e).multiplyScalar(u).add(t),l}}(),intersectSphere:function(){var t=new o.Vector3;return function(e,n){t.subVectors(e.center,this.origin);var r=t.dot(this.direction),i=t.dot(t)-r*r,o=e.radius*e.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,u=r+a;return s<0&&u<0?null:s<0?this.at(u,n):this.at(s,n)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var n=t.normal.dot(this.direction);return n*e<0},intersectBox:function(t,e){var n,r,i,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),l>=0?(i=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),c>=0?(a=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(a=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))},intersectsBox:function(){var t=new o.Vector3;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new o.Vector3,e=new o.Vector3,n=new o.Vector3,r=new o.Vector3;return function(i,o,a,s,u){e.subVectors(o,i),n.subVectors(a,i),r.crossVectors(e,n);var l,c=this.direction.dot(r);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}t.subVectors(this.origin,i);var h=l*this.direction.dot(n.crossVectors(t,n));if(h<0)return null;var f=l*this.direction.dot(e.cross(t));if(f<0)return null;if(h+f>c)return null;var p=-l*t.dot(r);return p<0?null:this.at(p/c,u)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},o.Sphere=function(t,e){this.center=void 0!==t?t:new o.Vector3,this.radius=void 0!==e?e:0},o.Sphere.prototype={constructor:o.Sphere,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new o.Box3;return function(e,n){var r=this.center;void 0!==n?r.copy(n):t.setFromPoints(e).center(r);for(var i=0,o=0,a=e.length;o<a;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t),r=e||new o.Vector3;return r.copy(t),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(t){var e=t||new o.Box3;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},o.Frustum=function(t,e,n,r,i,a){this.planes=[void 0!==t?t:new o.Plane,void 0!==e?e:new o.Plane,void 0!==n?n:new o.Plane,void 0!==r?r:new o.Plane,void 0!==i?i:new o.Plane,void 0!==a?a:new o.Plane];
},o.Frustum.prototype={constructor:o.Frustum,set:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],p=n[10],d=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return e[0].setComponents(a-r,c-s,d-h,y-m).normalize(),e[1].setComponents(a+r,c+s,d+h,y+m).normalize(),e[2].setComponents(a+i,c+u,d+f,y+v).normalize(),e[3].setComponents(a-i,c-u,d-f,y-v).normalize(),e[4].setComponents(a-o,c-l,d-p,y-g).normalize(),e[5].setComponents(a+o,c+l,d+p,y+g).normalize(),this},intersectsObject:function(){var t=new o.Sphere;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new o.Sphere;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){var o=e[i].distanceToPoint(n);if(o<r)return!1}return!0},intersectsBox:function(){var t=new o.Vector3,e=new o.Vector3;return function(n){for(var r=this.planes,i=0;i<6;i++){var o=r[i];t.x=o.normal.x>0?n.min.x:n.max.x,e.x=o.normal.x>0?n.max.x:n.min.x,t.y=o.normal.y>0?n.min.y:n.max.y,e.y=o.normal.y>0?n.max.y:n.min.y,t.z=o.normal.z>0?n.min.z:n.max.z,e.z=o.normal.z>0?n.max.z:n.min.z;var a=o.distanceToPoint(t),s=o.distanceToPoint(e);if(a<0&&s<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}},o.Plane=function(t,e){this.normal=void 0!==t?t:new o.Vector3(1,0,0),this.constant=void 0!==e?e:0},o.Plane.prototype={constructor:o.Plane,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new o.Vector3,e=new o.Vector3;return function(n,r,i){var o=t.subVectors(i,r).cross(e.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var n=this.distanceToPoint(t),r=e||new o.Vector3;return r.copy(this.normal).multiplyScalar(n)},intersectLine:function(){var t=new o.Vector3;return function(e,n){var r=n||new o.Vector3,i=e.delta(t),a=this.normal.dot(i);if(0!==a){var s=-(e.start.dot(this.normal)+this.constant)/a;if(!(s<0||s>1))return r.copy(i).multiplyScalar(s).add(e.start)}else if(0===this.distanceToPoint(e.start))return r.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){var e=t||new o.Vector3;return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new o.Vector3,e=new o.Matrix3;return function(n,r){var i=this.coplanarPoint(t).applyMatrix4(n),o=r||e.getNormalMatrix(n),a=this.normal.applyMatrix3(o).normalize();return this.constant=-i.dot(a),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},o.Spherical=function(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this},o.Spherical.prototype={constructor:o.Spherical,set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius.copy(t.radius),this.phi.copy(t.phi),this.theta.copy(t.theta),this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(t){return this.radius=t.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t.x,t.z),this.phi=Math.acos(o.Math.clamp(t.y/this.radius,-1,1))),this}},o.Math={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),r=0;return function(){for(var i=0;i<36;i++)8===i||13===i||18===i||23===i?n[i]="-":14===i?n[i]="4":(r<=2&&(r=33554432+16777216*Math.random()|0),t=15&r,r>>=4,n[i]=e[19===i?3&t|8:t]);return n.join("")}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},random16:function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*o.Math.DEG2RAD},radToDeg:function(t){return t*o.Math.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}},o.Spline=function(t){function e(t,e,n,r,i,o,a){var s=.5*(n-t),u=.5*(r-e);return(2*(e-n)+s+u)*a+(-3*(e-n)-2*s-u)*o+s*i+e}this.points=t;var n,r,i,a,s,u,l,c,h,f=[],p={x:0,y:0,z:0};this.initFromArray=function(t){this.points=[];for(var e=0;e<t.length;e++)this.points[e]={x:t[e][0],y:t[e][1],z:t[e][2]}},this.getPoint=function(t){return n=(this.points.length-1)*t,r=Math.floor(n),i=n-r,f[0]=0===r?r:r-1,f[1]=r,f[2]=r>this.points.length-2?this.points.length-1:r+1,f[3]=r>this.points.length-3?this.points.length-1:r+2,u=this.points[f[0]],l=this.points[f[1]],c=this.points[f[2]],h=this.points[f[3]],a=i*i,s=i*a,p.x=e(u.x,l.x,c.x,h.x,i,a,s),p.y=e(u.y,l.y,c.y,h.y,i,a,s),p.z=e(u.z,l.z,c.z,h.z,i,a,s),p},this.getControlPointsArray=function(){var t,e,n=this.points.length,r=[];for(t=0;t<n;t++)e=this.points[t],r[t]=[e.x,e.y,e.z];return r},this.getLength=function(t){var e,n,r,i,a=0,s=0,u=0,l=new o.Vector3,c=new o.Vector3,h=[],f=0;for(h[0]=0,t||(t=100),r=this.points.length*t,l.copy(this.points[0]),e=1;e<r;e++)n=e/r,i=this.getPoint(n),c.copy(i),f+=c.distanceTo(l),l.copy(i),a=(this.points.length-1)*n,s=Math.floor(a),s!==u&&(h[s]=f,u=s);return h[h.length]=f,{chunks:h,total:f}},this.reparametrizeByArcLength=function(t){var e,n,r,i,a,s,u,l,c=[],h=new o.Vector3,f=this.getLength();for(c.push(h.copy(this.points[0]).clone()),e=1;e<this.points.length;e++){for(s=f.chunks[e]-f.chunks[e-1],u=Math.ceil(t*s/f.total),i=(e-1)/(this.points.length-1),a=e/(this.points.length-1),n=1;n<u-1;n++)r=i+n*(1/u)*(a-i),l=this.getPoint(r),c.push(h.copy(l).clone());c.push(h.copy(this.points[e]).clone())}this.points=c}},o.Triangle=function(t,e,n){this.a=void 0!==t?t:new o.Vector3,this.b=void 0!==e?e:new o.Vector3,this.c=void 0!==n?n:new o.Vector3},o.Triangle.normal=function(){var t=new o.Vector3;return function(e,n,r,i){var a=i||new o.Vector3;a.subVectors(r,n),t.subVectors(e,n),a.cross(t);var s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}}(),o.Triangle.barycoordFromPoint=function(){var t=new o.Vector3,e=new o.Vector3,n=new o.Vector3;return function(r,i,a,s,u){t.subVectors(s,i),e.subVectors(a,i),n.subVectors(r,i);var l=t.dot(t),c=t.dot(e),h=t.dot(n),f=e.dot(e),p=e.dot(n),d=l*f-c*c,m=u||new o.Vector3;if(0===d)return m.set(-2,-1,-1);var v=1/d,g=(f*h-c*p)*v,y=(l*p-c*h)*v;return m.set(1-g-y,y,g)}}(),o.Triangle.containsPoint=function(){var t=new o.Vector3;return function(e,n,r,i){var a=o.Triangle.barycoordFromPoint(e,n,r,i,t);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),o.Triangle.prototype={constructor:o.Triangle,set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new o.Vector3,e=new o.Vector3;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){var e=t||new o.Vector3;return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return o.Triangle.normal(this.a,this.b,this.c,t)},plane:function(t){var e=t||new o.Plane;return e.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return o.Triangle.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return o.Triangle.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t,e,n,r;return function(i,a){void 0===t&&(t=new o.Plane,e=[new o.Line3,new o.Line3,new o.Line3],n=new o.Vector3,r=new o.Vector3);var s=a||new o.Vector3,u=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(i,n),this.containsPoint(n)===!0)s.copy(n);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var l=0;l<e.length;l++){e[l].closestPointToPoint(n,!0,r);var c=n.distanceToSquared(r);c<u&&(u=c,s.copy(r))}}return s}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},o.Interpolant=function(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n},o.Interpolant.prototype={constructor:o.Interpolant,evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var o;n:{r:if(!(t<r)){for(var a=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===a)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}{if(t>=i)break t;var s=e[1];t<s&&(n=2,i=s);for(var a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===a)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){var u=n+o>>>1;t<e[u]?o=u:n=u+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e},interpolate_:function(t,e,n,r){throw new Error("call to abstract method")},intervalChanged_:function(t,e,n){}},Object.assign(o.Interpolant.prototype,{beforeStart_:o.Interpolant.prototype.copySampleValue_,afterEnd_:o.Interpolant.prototype.copySampleValue_}),o.CubicInterpolant=function(t,e,n,r){o.Interpolant.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0},o.CubicInterpolant.prototype=Object.assign(Object.create(o.Interpolant.prototype),{constructor:o.CubicInterpolant,DefaultSettings_:{endingStart:o.ZeroCurvatureEnding,endingEnd:o.ZeroCurvatureEnding},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,a=t+1,s=r[i],u=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case o.ZeroSlopeEnding:i=t,s=2*e-n;break;case o.WrapAroundEnding:i=r.length-2,s=e+r[i]-r[i+1];break;default:i=t,s=n}if(void 0===u)switch(this.getSettings_().endingEnd){case o.ZeroSlopeEnding:a=t,u=2*n-e;break;case o.WrapAroundEnding:a=1,u=n+r[1]-r[0];break;default:a=t-1,u=e}var l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(u-n),this._offsetPrev=i*c,this._offsetNext=a*c},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(n-e)/(r-e),d=p*p,m=d*p,v=-h*m+2*h*d-h*p,g=(1+h)*m+(-1.5-2*h)*d+(-.5+h)*p+1,y=(-1-f)*m+(1.5+f)*d+.5*p,_=f*m-f*d,b=0;b!==a;++b)i[b]=v*o[l+b]+g*o[u+b]+y*o[s+b]+_*o[c+b];return i}}),o.DiscreteInterpolant=function(t,e,n,r){o.Interpolant.call(this,t,e,n,r)},o.DiscreteInterpolant.prototype=Object.assign(Object.create(o.Interpolant.prototype),{constructor:o.DiscreteInterpolant,interpolate_:function(t,e,n,r){return this.copySampleValue_(t-1)}}),o.LinearInterpolant=function(t,e,n,r){o.Interpolant.call(this,t,e,n,r)},o.LinearInterpolant.prototype=Object.assign(Object.create(o.Interpolant.prototype),{constructor:o.LinearInterpolant,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=(n-e)/(r-e),c=1-l,h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}),o.QuaternionLinearInterpolant=function(t,e,n,r){o.Interpolant.call(this,t,e,n,r)},o.QuaternionLinearInterpolant.prototype=Object.assign(Object.create(o.Interpolant.prototype),{constructor:o.QuaternionLinearInterpolant,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,u=t*s,l=(n-e)/(r-e),c=u+s;u!==c;u+=4)o.Quaternion.slerpFlat(i,0,a,u-s,a,u,l);return i}}),o.Clock=function(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},o.Clock.prototype={constructor:o.Clock,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=(performance||Date).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}},o.EventDispatcher=function(){},Object.assign(o.EventDispatcher.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&n[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners,r=n[t];if(void 0!==r){var i=r.indexOf(e);i!==-1&&r.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;var r=[],i=0,o=n.length;for(i=0;i<o;i++)r[i]=n[i];for(i=0;i<o;i++)r[i].call(this,t)}}}}),o.Layers=function(){this.mask=1},o.Layers.prototype={constructor:o.Layers,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!==(this.mask&t.mask)}},function(t){function e(t,e){return t.distance-e.distance}function n(t,e,r,i){if(t.visible!==!1&&(t.raycast(e,r),i===!0))for(var o=t.children,a=0,s=o.length;a<s;a++)n(o[a],e,r,!0)}t.Raycaster=function(e,n,r,i){this.ray=new t.Ray(e,n),this.near=r||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})},t.Raycaster.prototype={constructor:t.Raycaster,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(e,n){n instanceof t.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize()):n instanceof t.OrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,r){var i=[];return n(t,this,i,r),i.sort(e),i},intersectObjects:function(t,r){var i=[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var o=0,a=t.length;o<a;o++)n(t[o],this,i,r);return i.sort(e),i}}}(o),o.Object3D=function(){function t(){i.setFromEuler(r,!1)}function e(){r.setFromQuaternion(i,void 0,!1)}Object.defineProperty(this,"id",{value:o.Object3DIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=o.Object3D.DefaultUp.clone();var n=new o.Vector3,r=new o.Euler,i=new o.Quaternion,a=new o.Vector3(1,1,1);r.onChange(t),i.onChange(e),Object.defineProperties(this,{position:{enumerable:!0,value:n},rotation:{enumerable:!0,value:r},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:a},modelViewMatrix:{value:new o.Matrix4},normalMatrix:{value:new o.Matrix3}}),this.matrix=new o.Matrix4,this.matrixWorld=new o.Matrix4,this.matrixAutoUpdate=o.Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new o.Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},o.Object3D.DefaultUp=new o.Vector3(0,1,0),o.Object3D.DefaultMatrixAutoUpdate=!0,Object.assign(o.Object3D.prototype,o.EventDispatcher.prototype,{applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new o.Quaternion;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new o.Vector3(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new o.Vector3(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new o.Vector3(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new o.Vector3;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new o.Vector3(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new o.Vector3(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new o.Vector3(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new o.Matrix4;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new o.Matrix4;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t instanceof o.Object3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var n=this.children.indexOf(t);n!==-1&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1))},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){var e=t||new o.Vector3;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new o.Vector3,e=new o.Vector3;return function(n){var r=n||new o.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,r,e),r}}(),getWorldRotation:function(){var t=new o.Quaternion;return function(e){var n=e||new o.Euler;return this.getWorldQuaternion(t),n.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new o.Vector3,e=new o.Quaternion;return function(n){var r=n||new o.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,r),r}}(),getWorldDirection:function(){var t=new o.Quaternion;return function(e){var n=e||new o.Vector3;return this.getWorldQuaternion(t),n.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&t!==!0||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=0,n=this.children.length;e<n;e++)this.children[e].updateMatrixWorld(t)},toJSON:function(t){function e(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}var n=void 0===t||""===t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{}},r.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),i.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),i.material=this.material.uuid),this.children.length>0){i.children=[];for(var o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(t).object)}if(n){var a=e(t.geometries),s=e(t.materials),u=e(t.textures),l=e(t.images);a.length>0&&(r.geometries=a),s.length>0&&(r.materials=s),u.length>0&&(r.textures=u),l.length>0&&(r.images=l)}return r.object=i,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}),o.Object3DIdCount=0,o.Face3=function(t,e,n,r,i,a){this.a=t,this.b=e,this.c=n,this.normal=r instanceof o.Vector3?r:new o.Vector3,this.vertexNormals=Array.isArray(r)?r:[],this.color=i instanceof o.Color?i:new o.Color,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0},o.Face3.prototype={constructor:o.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},o.BufferAttribute=function(t,e,n){this.uuid=o.Math.generateUUID(),this.array=t,this.itemSize=e,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0,this.normalized=n===!0},o.BufferAttribute.prototype={constructor:o.BufferAttribute,get count(){return this.array.length/this.itemSize},set needsUpdate(t){t===!0&&this.version++},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new o.Color),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyIndicesArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];e[n++]=o.a,e[n++]=o.b,e[n++]=o.c}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new o.Vector2),e[n++]=a.x,e[n++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new o.Vector3),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new o.Vector4),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},clone:function(){return(new this.constructor).copy(this)}},o.Int8Attribute=function(t,e){return new o.BufferAttribute(new Int8Array(t),e)},o.Uint8Attribute=function(t,e){return new o.BufferAttribute(new Uint8Array(t),e)},o.Uint8ClampedAttribute=function(t,e){return new o.BufferAttribute(new Uint8ClampedArray(t),e)},o.Int16Attribute=function(t,e){return new o.BufferAttribute(new Int16Array(t),e)},o.Uint16Attribute=function(t,e){return new o.BufferAttribute(new Uint16Array(t),e)},o.Int32Attribute=function(t,e){return new o.BufferAttribute(new Int32Array(t),e)},o.Uint32Attribute=function(t,e){return new o.BufferAttribute(new Uint32Array(t),e)},o.Float32Attribute=function(t,e){return new o.BufferAttribute(new Float32Array(t),e)},o.Float64Attribute=function(t,e){return new o.BufferAttribute(new Float64Array(t),e)},o.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new o.BufferAttribute(t,e).setDynamic(!0)},o.InstancedBufferAttribute=function(t,e,n){o.BufferAttribute.call(this,t,e),this.meshPerAttribute=n||1},o.InstancedBufferAttribute.prototype=Object.create(o.BufferAttribute.prototype),o.InstancedBufferAttribute.prototype.constructor=o.InstancedBufferAttribute,o.InstancedBufferAttribute.prototype.copy=function(t){return o.BufferAttribute.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},o.InterleavedBuffer=function(t,e){this.uuid=o.Math.generateUUID(),this.array=t,this.stride=e,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},o.InterleavedBuffer.prototype={constructor:o.InterleavedBuffer,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(t){t===!0&&this.version++},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)}},o.InstancedInterleavedBuffer=function(t,e,n){o.InterleavedBuffer.call(this,t,e),this.meshPerAttribute=n||1},o.InstancedInterleavedBuffer.prototype=Object.create(o.InterleavedBuffer.prototype),o.InstancedInterleavedBuffer.prototype.constructor=o.InstancedInterleavedBuffer,o.InstancedInterleavedBuffer.prototype.copy=function(t){return o.InterleavedBuffer.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},o.InterleavedBufferAttribute=function(t,e,n,r){this.uuid=o.Math.generateUUID(),this.data=t,this.itemSize=e,this.offset=n,this.normalized=r===!0},o.InterleavedBufferAttribute.prototype={constructor:o.InterleavedBufferAttribute,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.data.count},get array(){return this.data.array},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}},o.Geometry=function(){Object.defineProperty(this,"id",{value:o.GeometryIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,
this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},Object.assign(o.Geometry.prototype,o.EventDispatcher.prototype,{applyMatrix:function(t){for(var e=(new o.Matrix3).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(t)}for(var n=0,r=this.faces.length;n<r;n++){var a=this.faces[n];a.normal.applyMatrix3(e).normalize();for(var s=0,u=a.vertexNormals.length;s<u;s++)a.vertexNormals[s].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,n,r){return void 0===t&&(t=new o.Matrix4),t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,n,r){return void 0===t&&(t=new o.Matrix4),t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new o.Object3D),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,r,i){var a=void 0!==s?[h[t].clone(),h[e].clone(),h[r].clone()]:[],d=void 0!==u?[n.colors[t].clone(),n.colors[e].clone(),n.colors[r].clone()]:[],m=new o.Face3(t,e,r,a,d,i);n.faces.push(m),void 0!==l&&n.faceVertexUvs[0].push([f[t].clone(),f[e].clone(),f[r].clone()]),void 0!==c&&n.faceVertexUvs[1].push([p[t].clone(),p[e].clone(),p[r].clone()])}var n=this,r=null!==t.index?t.index.array:void 0,i=t.attributes,a=i.position.array,s=void 0!==i.normal?i.normal.array:void 0,u=void 0!==i.color?i.color.array:void 0,l=void 0!==i.uv?i.uv.array:void 0,c=void 0!==i.uv2?i.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var h=[],f=[],p=[],d=0,m=0;d<a.length;d+=3,m+=2)n.vertices.push(new o.Vector3(a[d],a[d+1],a[d+2])),void 0!==s&&h.push(new o.Vector3(s[d],s[d+1],s[d+2])),void 0!==u&&n.colors.push(new o.Color(u[d],u[d+1],u[d+2])),void 0!==l&&f.push(new o.Vector2(l[m],l[m+1])),void 0!==c&&p.push(new o.Vector2(c[m],c[m+1]));if(void 0!==r){var v=t.groups;if(v.length>0)for(var d=0;d<v.length;d++)for(var g=v[d],y=g.start,_=g.count,m=y,b=y+_;m<b;m+=3)e(r[m],r[m+1],r[m+2],g.materialIndex);else for(var d=0;d<r.length;d+=3)e(r[d],r[d+1],r[d+2])}else for(var d=0;d<a.length/3;d+=3)e(d,d+1,d+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.center().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new o.Matrix4;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new o.Vector3,e=new o.Vector3,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],s=this.vertices[i.b],u=this.vertices[i.c];t.subVectors(u,s),e.subVectors(a,s),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,n,r,i,a,s;for(s=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)s[e]=new o.Vector3;if(t){var u,l,c,h=new o.Vector3,f=new o.Vector3;for(r=0,i=this.faces.length;r<i;r++)a=this.faces[r],u=this.vertices[a.a],l=this.vertices[a.b],c=this.vertices[a.c],h.subVectors(c,l),f.subVectors(u,l),h.cross(f),s[a.a].add(h),s[a.b].add(h),s[a.c].add(h)}else for(r=0,i=this.faces.length;r<i;r++)a=this.faces[r],s[a.a].add(a.normal),s[a.b].add(a.normal),s[a.c].add(a.normal);for(e=0,n=this.vertices.length;e<n;e++)s[e].normalize();for(r=0,i=this.faces.length;r<i;r++){a=this.faces[r];var p=a.vertexNormals;3===p.length?(p[0].copy(s[a.a]),p[1].copy(s[a.b]),p[2].copy(s[a.c])):(p[0]=s[a.a].clone(),p[1]=s[a.b].clone(),p[2]=s[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var a=new o.Geometry;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var s,u,l=this.morphNormals[t].faceNormals,c=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)s=new o.Vector3,u={a:new o.Vector3,b:new o.Vector3,c:new o.Vector3},l.push(s),c.push(u)}var h=this.morphNormals[t];a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals();var s,u;for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],s=h.faceNormals[n],u=h.vertexNormals[n],s.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var t=0,e=this.vertices,n=0,r=e.length;n<r;n++)n>0&&(t+=e[n].distanceTo(e[n-1])),this.lineDistances[n]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new o.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new o.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t instanceof o.Geometry==!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var r,i=this.vertices.length,a=this.vertices,s=t.vertices,u=this.faces,l=t.faces,c=this.faceVertexUvs[0],h=t.faceVertexUvs[0];void 0===n&&(n=0),void 0!==e&&(r=(new o.Matrix3).getNormalMatrix(e));for(var f=0,p=s.length;f<p;f++){var d=s[f],m=d.clone();void 0!==e&&m.applyMatrix4(e),a.push(m)}for(f=0,p=l.length;f<p;f++){var v,g,y,_=l[f],b=_.vertexNormals,w=_.vertexColors;v=new o.Face3(_.a+i,_.b+i,_.c+i),v.normal.copy(_.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var x=0,E=b.length;x<E;x++)g=b[x].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),v.vertexNormals.push(g);v.color.copy(_.color);for(var x=0,E=w.length;x<E;x++)y=w[x],v.vertexColors.push(y.clone());v.materialIndex=_.materialIndex+n,u.push(v)}for(f=0,p=h.length;f<p;f++){var C=h[f],S=[];if(void 0!==C){for(var x=0,E=C.length;x<E;x++)S.push(C[x].clone());c.push(S)}}},mergeMesh:function(t){return t instanceof o.Mesh==!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.matrixAutoUpdate&&t.updateMatrix(),void this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,n,r,i,o,a,s,u={},l=[],c=[],h=4,f=Math.pow(10,h);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],e=Math.round(t.x*f)+"_"+Math.round(t.y*f)+"_"+Math.round(t.z*f),void 0===u[e]?(u[e]=n,l.push(this.vertices[n]),c[n]=l.length-1):c[n]=c[u[e]];var p=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=c[i.a],i.b=c[i.b],i.c=c[i.c],o=[i.a,i.b,i.c];for(var d=-1,m=0;m<3;m++)if(o[m]===o[(m+1)%3]){d=m,p.push(n);break}}for(n=p.length-1;n>=0;n--){var v=p[n];for(this.faces.splice(v,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(v,1)}var g=this.vertices.length-l.length;return this.vertices=l,g},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,n=e.length,r=0;r<n;r++)e[r]._id=r;e.sort(t);var i,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===n&&(i=[]),s&&s.length===n&&(o=[]);for(var r=0;r<n;r++){var u=e[r]._id;i&&i.push(a[u]),o&&o.push(s[u])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==f[e]?f[e]:(f[e]=h.length/3,h.push(t.x,t.y,t.z),f[e])}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==d[e]?d[e]:(d[e]=p.length,p.push(t.getHex()),d[e])}function r(t){var e=t.x.toString()+t.y.toString();return void 0!==v[e]?v[e]:(v[e]=m.length/2,m.push(t.x,t.y),v[e])}var i={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o)void 0!==o[a]&&(i[a]=o[a]);return i}for(var s=[],u=0;u<this.vertices.length;u++){var l=this.vertices[u];s.push(l.x,l.y,l.z)}for(var c=[],h=[],f={},p=[],d={},m=[],v={},u=0;u<this.faces.length;u++){var g=this.faces[u],y=!0,_=!1,b=void 0!==this.faceVertexUvs[0][u],w=g.normal.length()>0,x=g.vertexNormals.length>0,E=1!==g.color.r||1!==g.color.g||1!==g.color.b,C=g.vertexColors.length>0,S=0;if(S=t(S,0,0),S=t(S,1,y),S=t(S,2,_),S=t(S,3,b),S=t(S,4,w),S=t(S,5,x),S=t(S,6,E),S=t(S,7,C),c.push(S),c.push(g.a,g.b,g.c),c.push(g.materialIndex),b){var M=this.faceVertexUvs[0][u];c.push(r(M[0]),r(M[1]),r(M[2]))}if(w&&c.push(e(g.normal)),x){var P=g.vertexNormals;c.push(e(P[0]),e(P[1]),e(P[2]))}if(E&&c.push(n(g.color)),C){var T=g.vertexColors;c.push(n(T[0]),n(T[1]),n(T[2]))}}return i.data={},i.data.vertices=s,i.data.normals=h,p.length>0&&(i.data.colors=p),m.length>0&&(i.data.uvs=[m]),i.data.faces=c,i},clone:function(){return(new o.Geometry).copy(this)},copy:function(t){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]];for(var e=t.vertices,n=0,r=e.length;n<r;n++)this.vertices.push(e[n].clone());for(var i=t.faces,n=0,r=i.length;n<r;n++)this.faces.push(i[n].clone());for(var n=0,r=t.faceVertexUvs.length;n<r;n++){var o=t.faceVertexUvs[n];void 0===this.faceVertexUvs[n]&&(this.faceVertexUvs[n]=[]);for(var a=0,s=o.length;a<s;a++){for(var u=o[a],l=[],c=0,h=u.length;c<h;c++){var f=u[c];l.push(f.clone())}this.faceVertexUvs[n].push(l)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),o.GeometryIdCount=0,o.DirectGeometry=function(){Object.defineProperty(this,"id",{value:o.GeometryIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1},Object.assign(o.DirectGeometry.prototype,o.EventDispatcher.prototype,{computeBoundingBox:o.Geometry.prototype.computeBoundingBox,computeBoundingSphere:o.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(t){for(var e,n,r=[],i=t.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==n&&(n=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,r.push(e)),e={start:3*o,materialIndex:n})}void 0!==e&&(e.count=3*o-e.start,r.push(e)),this.groups=r},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,i=t.faceVertexUvs,a=i[0]&&i[0].length>0,s=i[1]&&i[1].length>0,u=t.morphTargets,l=u.length;if(l>0){e=[];for(var c=0;c<l;c++)e[c]=[];this.morphTargets.position=e}var h,f=t.morphNormals,p=f.length;if(p>0){h=[];for(var c=0;c<p;c++)h[c]=[];this.morphTargets.normal=h}for(var d=t.skinIndices,m=t.skinWeights,v=d.length===r.length,g=m.length===r.length,c=0;c<n.length;c++){var y=n[c];this.vertices.push(r[y.a],r[y.b],r[y.c]);var _=y.vertexNormals;if(3===_.length)this.normals.push(_[0],_[1],_[2]);else{var b=y.normal;this.normals.push(b,b,b)}var w=y.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var x=y.color;this.colors.push(x,x,x)}if(a===!0){var E=i[0][c];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new o.Vector2,new o.Vector2,new o.Vector2))}if(s===!0){var E=i[1][c];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new o.Vector2,new o.Vector2,new o.Vector2))}for(var C=0;C<l;C++){var S=u[C].vertices;e[C].push(S[y.a],S[y.b],S[y.c])}for(var C=0;C<p;C++){var M=f[C].vertexNormals[c];h[C].push(M.a,M.b,M.c)}v&&this.skinIndices.push(d[y.a],d[y.b],d[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),o.BufferGeometry=function(){Object.defineProperty(this,"id",{value:o.GeometryIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}},Object.assign(o.BufferGeometry.prototype,o.EventDispatcher.prototype,{getIndex:function(){return this.index},setIndex:function(t){this.index=t},addAttribute:function(t,e){return e instanceof o.BufferAttribute==!1&&e instanceof o.InterleavedBufferAttribute==!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new o.BufferAttribute(arguments[1],arguments[2]))):"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this)},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToVector3Array(e.array),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new o.Matrix3).getNormalMatrix(t);r.applyToVector3Array(n.array),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new o.Matrix4),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,n,r){return void 0===t&&(t=new o.Matrix4),t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,n,r){return void 0===t&&(t=new o.Matrix4),t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new o.Object3D),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.center().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t instanceof o.Points||t instanceof o.Line){var n=new o.Float32Attribute(3*e.vertices.length,3),r=new o.Float32Attribute(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new o.Float32Attribute(e.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t instanceof o.Mesh&&e instanceof o.Geometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t instanceof o.Mesh){var n=e.__directGeometry;if(void 0===n||e.elementsNeedUpdate===!0)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate||e.elementsNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate||e.elementsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate||e.elementsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate||e.elementsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate||e.elementsNeedUpdate,e.elementsNeedUpdate=!1,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}var r;return e.verticesNeedUpdate===!0&&(r=this.attributes.position,void 0!==r&&(r.copyVector3sArray(e.vertices),r.needsUpdate=!0),e.verticesNeedUpdate=!1),e.normalsNeedUpdate===!0&&(r=this.attributes.normal,void 0!==r&&(r.copyVector3sArray(e.normals),r.needsUpdate=!0),e.normalsNeedUpdate=!1),e.colorsNeedUpdate===!0&&(r=this.attributes.color,void 0!==r&&(r.copyColorsArray(e.colors),r.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(r=this.attributes.uv,void 0!==r&&(r.copyVector2sArray(e.uvs),r.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,void 0!==r&&(r.copyArray(e.lineDistances),r.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new o.DirectGeometry).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new o.BufferAttribute(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new o.BufferAttribute(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new o.BufferAttribute(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new o.BufferAttribute(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new o.BufferAttribute(a,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var s=t.vertices.length>65535?Uint32Array:Uint16Array,u=new s(3*t.indices.length);this.setIndex(new o.BufferAttribute(u,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var l in t.morphTargets){for(var c=[],h=t.morphTargets[l],f=0,p=h.length;f<p;f++){var d=h[f],m=new o.Float32Attribute(3*d.length,3);c.push(m.copyVector3sArray(d))}this.morphAttributes[l]=c}if(t.skinIndices.length>0){var v=new o.Float32Attribute(4*t.skinIndices.length,4);this.addAttribute("skinIndex",v.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var g=new o.Float32Attribute(4*t.skinWeights.length,4);this.addAttribute("skinWeight",g.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new o.Box3);var t=this.attributes.position.array;void 0!==t?this.boundingBox.setFromArray(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new o.Box3,e=new o.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new o.Sphere);var n=this.attributes.position;if(n){var r=n.array,i=this.boundingSphere.center;t.setFromArray(r),t.center(i);for(var a=0,s=0,u=r.length;s<u;s+=3)e.fromArray(r,s),a=Math.max(a,i.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var r=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new o.BufferAttribute(new Float32Array(r.length),3));else for(var i=e.normal.array,a=0,s=i.length;a<s;a++)i[a]=0;var u,l,c,h=e.normal.array,f=new o.Vector3,p=new o.Vector3,d=new o.Vector3,m=new o.Vector3,v=new o.Vector3;if(t){var g=t.array;0===n.length&&this.addGroup(0,g.length);for(var y=0,_=n.length;y<_;++y)for(var b=n[y],w=b.start,x=b.count,a=w,s=w+x;a<s;a+=3)u=3*g[a+0],l=3*g[a+1],c=3*g[a+2],f.fromArray(r,u),p.fromArray(r,l),d.fromArray(r,c),m.subVectors(d,p),v.subVectors(f,p),m.cross(v),h[u]+=m.x,h[u+1]+=m.y,h[u+2]+=m.z,h[l]+=m.x,h[l+1]+=m.y,h[l+2]+=m.z,h[c]+=m.x,h[c+1]+=m.y,h[c+2]+=m.z}else for(var a=0,s=r.length;a<s;a+=9)f.fromArray(r,a),p.fromArray(r,a+3),d.fromArray(r,a+6),m.subVectors(d,p),v.subVectors(f,p),m.cross(v),h[a]=m.x,h[a+1]=m.y,h[a+2]=m.z,h[a+3]=m.x,h[a+4]=m.y,h[a+5]=m.z,h[a+6]=m.x,h[a+7]=m.y,h[a+8]=m.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t instanceof o.BufferGeometry==!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0);var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r],a=i.array,s=t.attributes[r],u=s.array,l=s.itemSize,c=0,h=l*e;c<u.length;c++,h++)a[h]=u[c];return this},normalizeNormals:function(){for(var t,e,n,r,i=this.attributes.normal.array,o=0,a=i.length;o<a;o+=3)t=i[o],e=i[o+1],n=i[o+2],r=1/Math.sqrt(t*t+e*e+n*n),i[o]*=r,i[o+1]*=r,i[o+2]*=r},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new o.BufferGeometry,e=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],a=i.array,s=i.itemSize,u=new a.constructor(e.length*s),l=0,c=0,h=0,f=e.length;h<f;h++){l=e[h]*s;for(var p=0;p<s;p++)u[c++]=a[l++]}t.addAttribute(r,new o.BufferAttribute(u,s))}return t},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);t.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n],i=Array.prototype.slice.call(a.array);t.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t},clone:function(){return(new o.BufferGeometry).copy(this)},copy:function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n=t.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var o=t.groups,a=0,s=o.length;a<s;a++){var u=o[a];this.addGroup(u.start,u.count,u.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),o.BufferGeometry.MaxIndex=65535,o.InstancedBufferGeometry=function(){o.BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0},o.InstancedBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.InstancedBufferGeometry.prototype.constructor=o.InstancedBufferGeometry,o.InstancedBufferGeometry.prototype.addGroup=function(t,e,n){this.groups.push({start:t,count:e,instances:n})},o.InstancedBufferGeometry.prototype.copy=function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n=t.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var o=t.groups,a=0,s=o.length;a<s;a++){var u=o[a];this.addGroup(u.start,u.count,u.instances)}return this},o.Uniform=function(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t,this.dynamic=!1},o.Uniform.prototype={constructor:o.Uniform,onUpdate:function(t){return this.dynamic=!0,this.onUpdateCallback=t,this}},o.AnimationAction=function(){throw new Error("THREE.AnimationAction: Use mixer.clipAction for construction.")},o.AnimationAction._new=function(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var r=e.tracks,i=r.length,a=new Array(i),s={endingStart:o.ZeroCurvatureEnding,endingEnd:o.ZeroCurvatureEnding},u=0;u!==i;++u){var l=r[u].createInterpolant(null);a[u]=l,l.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=o.LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0},o.AnimationAction._new.prototype={constructor:o.AnimationAction._new,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){this._startTime;return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){this._mixer;if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,o=i/r,a=r/i;t.warp(1,o,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=t/a,u[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){var i=this._startTime;if(null!==i){var o=(t-i)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var u=this._interpolants,l=this._propertyBindings,c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulate(r,s)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(r===o.LoopOnce){i===-1&&(this.loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var a=r===o.LoopPingPong;if(i===-1&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=n||e<0){var s=Math.floor(e/n);e-=n*s,i+=Math.abs(s);var u=this.repetitions-i;if(u<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(0===u){var l=t<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(a&&1===(1&i))return this.time=e,n-e}return this.time=e,e},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=o.ZeroSlopeEnding,r.endingEnd=o.ZeroSlopeEnding):(t?r.endingStart=this.zeroSlopeAtStart?o.ZeroSlopeEnding:o.ZeroCurvatureEnding:r.endingStart=o.WrapAroundEnding,e?r.endingEnd=this.zeroSlopeAtEnd?o.ZeroSlopeEnding:o.ZeroCurvatureEnding:r.endingEnd=o.WrapAroundEnding)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}},o.AnimationClip=function(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=o.Math.generateUUID(),this.duration<0&&this.resetDuration(),this.trim(),this.optimize()},o.AnimationClip.prototype={constructor:o.AnimationClip,resetDuration:function(){for(var t=this.tracks,e=0,n=0,r=t.length;n!==r;++n){var i=this.tracks[n];e=Math.max(e,i.times[i.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},Object.assign(o.AnimationClip,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,a=n.length;i!==a;++i)e.push(o.KeyframeTrack.parse(n[i]).scale(r));return new o.AnimationClip(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e},i=0,a=n.length;i!==a;++i)e.push(o.KeyframeTrack.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){for(var i=e.length,a=[],s=0;s<i;s++){var u=[],l=[];u.push((s+i-1)%i,s,(s+1)%i),l.push(0,1,0);var c=o.AnimationUtils.getKeyframeOrder(u);u=o.AnimationUtils.sortedArray(u,1,c),l=o.AnimationUtils.sortedArray(l,1,c),r||0!==u[0]||(u.push(i),l.push(l[0])),a.push(new o.NumberKeyframeTrack(".morphTargetInfluences["+e[s].name+"]",u,l).scale(1/n));
}return new o.AnimationClip(t,(-1),a)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,s=t.length;a<s;a++){var u=t[a],l=u.name.match(i);if(l&&l.length>1){var c=l[1],h=r[c];h||(r[c]=h=[]),h.push(u)}}var f=[];for(var c in r)f.push(o.AnimationClip.CreateFromMorphTargetSequence(c,r[c],e,n));return f},parseAnimation:function(t,e,n){if(!t)return console.error("  no animation in JSONLoader data"),null;for(var r=function(t,e,n,r,i){if(0!==n.length){var a=[],s=[];o.AnimationUtils.flattenJSON(n,a,s,r),0!==a.length&&i.push(new t(e,a,s))}},i=[],a=t.name||"default",s=t.length||-1,u=t.fps||30,l=t.hierarchy||[],c=0;c<l.length;c++){var h=l[c].keys;if(h&&0!==h.length)if(h[0].morphTargets){for(var f={},p=0;p<h.length;p++)if(h[p].morphTargets)for(var d=0;d<h[p].morphTargets.length;d++)f[h[p].morphTargets[d]]=-1;for(var m in f){for(var v=[],g=[],d=0;d!==h[p].morphTargets.length;++d){var y=h[p];v.push(y.time),g.push(y.morphTarget===m?1:0)}i.push(new o.NumberKeyframeTrack(".morphTargetInfluence["+m+"]",v,g))}s=f.length*(u||1)}else{var _=".bones["+e[c].name+"]";r(o.VectorKeyframeTrack,_+".position",h,"pos",i),r(o.QuaternionKeyframeTrack,_+".quaternion",h,"rot",i),r(o.VectorKeyframeTrack,_+".scale",h,"scl",i)}}if(0===i.length)return null;var b=new o.AnimationClip(a,s,i);return b}}),o.AnimationMixer=function(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1},Object.assign(o.AnimationMixer.prototype,o.EventDispatcher.prototype,{clipAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?o.AnimationClip.findByName(n,t):t,a=null!==i?i.uuid:t,s=this._actionsByClip[a],u=null;if(void 0!==s){var l=s.actionByRoot[r];if(void 0!==l)return l;u=s.knownActions[0],null===i&&(i=u._clip)}if(null===i)return null;var c=new o.AnimationMixer._Action(this,i,e);return this._bindAction(c,u),this._addInactiveAction(c,a,r),c},existingAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?o.AnimationClip.findByName(n,t):t,a=i?i.uuid:t,s=this._actionsByClip[a];return void 0!==s?s.actionByRoot[r]||null:null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a){var s=e[a];s.enabled&&s._update(r,t,i,o)}for(var u=this._bindings,l=this._nActiveBindings,a=0;a!==l;++a)u[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,e[l]=c,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[e];if(void 0!==s)for(var u in s){var l=s[u];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),o.AnimationMixer._Action=o.AnimationAction._new,Object.assign(o.AnimationMixer.prototype,{_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,a=t._propertyBindings,s=t._interpolants,u=n.uuid,l=this._bindingsByRootAndName,c=l[u];void 0===c&&(c={},l[u]=c);for(var h=0;h!==i;++h){var f=r[h],p=f.name,d=c[p];if(void 0!==d)a[h]=d;else{if(d=a[h],void 0!==d){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,u,p));continue}var m=e&&e._propertyBindings[h].binding.parsedPath;d=new o.PropertyMixer(o.PropertyBinding.create(n,p,m),f.ValueTypeName,f.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,u,p),a[h]=d}s[h].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=t._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),t._byClipCacheIndex=null;var c=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete c[h],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=r[e],o=this._bindings;void 0===i&&(i={},r[e]=i),i[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete a[i];t:{for(var l in a)break t;delete o[r]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new o.LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1)}),o.AnimationObjectGroup=function(t){this.uuid=o.Math.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}},o.AnimationObjectGroup.prototype={constructor:o.AnimationObjectGroup,add:function(t){for(var e=this._objects,n=e.length,r=this.nCachedObjects_,i=this._indicesByUUID,a=this._paths,s=this._parsedPaths,u=this._bindings,l=u.length,c=0,h=arguments.length;c!==h;++c){var f=arguments[c],p=f.uuid,d=i[p];if(void 0===d){d=n++,i[p]=d,e.push(f);for(var m=0,v=l;m!==v;++m)u[m].push(new o.PropertyBinding(f,a[m],s[m]))}else if(d<r){var g=e[d],y=--r,_=e[y];i[_.uuid]=d,e[d]=_,i[p]=y,e[y]=f;for(var m=0,v=l;m!==v;++m){var b=u[m],w=b[y],x=b[d];b[d]=w,void 0===x&&(x=new o.PropertyBinding(f,a[m],s[m])),b[y]=x}}else e[d]!==g&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=r},remove:function(t){for(var e=this._objects,n=(e.length,this.nCachedObjects_),r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],l=u.uuid,c=r[l];if(void 0!==c&&c>=n){var h=n++,f=e[h];r[f.uuid]=c,e[c]=f,r[l]=h,e[h]=u;for(var p=0,d=o;p!==d;++p){var m=i[p],v=m[h],g=m[c];m[c]=v,m[h]=g}}}this.nCachedObjects_=n},uncache:function(t){for(var e=this._objects,n=e.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._bindings,a=o.length,s=0,u=arguments.length;s!==u;++s){var l=arguments[s],c=l.uuid,h=i[c];if(void 0!==h)if(delete i[c],h<r){var f=--r,p=e[f],d=--n,m=e[d];i[p.uuid]=h,e[h]=p,i[m.uuid]=f,e[f]=m,e.pop();for(var v=0,g=a;v!==g;++v){var y=o[v],_=y[f],b=y[d];y[h]=_,y[f]=b,y.pop()}}else{var d=--n,m=e[d];i[m.uuid]=h,e[h]=m,e.pop();for(var v=0,g=a;v!==g;++v){var y=o[v];y[h]=y[d],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,s=this._parsedPaths,u=this._objects,l=u.length,c=this.nCachedObjects_,h=new Array(l);r=i.length,n[t]=r,a.push(t),s.push(e),i.push(h);for(var f=c,p=u.length;f!==p;++f){var d=u[f];h[f]=new o.PropertyBinding(d,t,e)}return h},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a],u=t[a];e[u]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}},o.AnimationUtils={arraySlice:function(t,e,n){return o.AnimationUtils.isTypedArray(t)?new t.constructor(t.subarray(e,n)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(e),r},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*e,u=0;u!==e;++u)i[a++]=t[s+u];return i},flattenJSON:function(t,e,n,r){for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do a=o[r],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[i++];while(void 0!==o);else if(void 0!==a.toArray)do a=o[r],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++];while(void 0!==o);else do a=o[r],void 0!==a&&(e.push(o.time),n.push(a)),o=t[i++];while(void 0!==o)}}},o.KeyframeTrack=function(t,e,n,r){if(void 0===t)throw new Error("track name is undefined");if(void 0===e||0===e.length)throw new Error("no keyframes in track named "+t);this.name=t,this.times=o.AnimationUtils.convertArray(e,this.TimeBufferType),this.values=o.AnimationUtils.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()},o.KeyframeTrack.prototype={constructor:o.KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:o.InterpolateLinear,InterpolantFactoryMethodDiscrete:function(t){return new o.DiscreteInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new o.LinearInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new o.CubicInterpolant(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case o.InterpolateDiscrete:e=this.InterpolantFactoryMethodDiscrete;break;case o.InterpolateLinear:e=this.InterpolantFactoryMethodLinear;break;case o.InterpolateSmooth:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(n)}this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return o.InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return o.InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return o.InterpolateSmooth}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<t;)++i;for(;a!==-1&&n[a]>e;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);var s=this.getValueSize();this.times=o.AnimationUtils.arraySlice(n,i,a),this.values=o.AnimationUtils.arraySlice(this.values,i*s,a*s)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("invalid value size in track",this),t=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("track is empty",this),t=!1);for(var a=null,s=0;s!==i;s++){var u=n[s];if("number"==typeof u&&isNaN(u)){console.error("time is not a valid number",this,s,u),t=!1;break}if(null!==a&&a>u){console.error("out of order keys",this,s,u,a),t=!1;break}a=u}if(void 0!==r&&o.AnimationUtils.isTypedArray(r))for(var s=0,l=r.length;s!==l;++s){var c=r[s];if(isNaN(c)){console.error("value is not a valid number",this,s,c),t=!1;break}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),r=1,i=1,a=t.length-1;i<=a;++i){var s=!1,u=t[i],l=t[i+1];if(u!==l&&(1!==i||u!==u[0]))for(var c=i*n,h=c-n,f=c+n,p=0;p!==n;++p){var d=e[c+p];if(d!==e[h+p]||d!==e[f+p]){s=!0;break}}if(s){if(i!==r){t[r]=t[i];for(var m=i*n,v=r*n,p=0;p!==n;++p)e[v+p]=e[m+p]}++r}}return r!==t.length&&(this.times=o.AnimationUtils.arraySlice(t,0,r),this.values=o.AnimationUtils.arraySlice(e,0,r*n)),this}},Object.assign(o.KeyframeTrack,{parse:function(t){if(void 0===t.type)throw new Error("track type undefined, can not parse");var e=o.KeyframeTrack._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var n=[],r=[];o.AnimationUtils.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:o.AnimationUtils.convertArray(t.times,Array),values:o.AnimationUtils.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return o.NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return o.VectorKeyframeTrack;case"color":return o.ColorKeyframeTrack;case"quaternion":return o.QuaternionKeyframeTrack;case"bool":case"boolean":return o.BooleanKeyframeTrack;case"string":return o.StringKeyframeTrack}throw new Error("Unsupported typeName: "+t)}}),o.PropertyBinding=function(t,e,n){this.path=e,this.parsedPath=n||o.PropertyBinding.parseTrackName(e),this.node=o.PropertyBinding.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t},o.PropertyBinding.prototype={constructor:o.PropertyBinding,getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(t=o.PropertyBinding.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(n){var a=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("  can not bind to material as node does not have a material",this);if(!t.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===a){a=s;break}break;default:if(void 0===t[n])return void console.error("  can not bind to objectName of node, undefined",this);t=t[n]}if(void 0!==a){if(void 0===t[a])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,t);t=t[a]}}var u=t[r];if(void 0===u){var l=e.nodeName;return void console.error("  trying to update property for track: "+l+"."+r+" but it wasn't found.",t)}var c=this.Versioning.None;void 0!==t.needsUpdate?(c=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var h=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!t.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var s=0;s<this.node.geometry.morphTargets.length;s++)if(t.geometry.morphTargets[s].name===i){i=s;break}}h=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=i}else void 0!==u.fromArray&&void 0!==u.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=u):void 0!==u.length?(h=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=r;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][c]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(o.PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:o.PropertyBinding.prototype.getValue,_setValue_unbound:o.PropertyBinding.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.node[this.propertyName]=t[e]},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),o.PropertyBinding.Composite=function(t,e,n){var r=n||o.PropertyBinding.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)},o.PropertyBinding.Composite.prototype={constructor:o.PropertyBinding.Composite,getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},o.PropertyBinding.create=function(t,e,n){return t instanceof o.AnimationObjectGroup?new o.PropertyBinding.Composite(t,e,n):new o.PropertyBinding(t,e,n)},o.PropertyBinding.parseTrackName=function(t){var e=/^(([\w]+\/)*)([\w-\d]+)?(\.([\w]+)(\[([\w\d\[\]\_.:\- ]+)\])?)?(\.([\w.]+)(\[([\w\d\[\]\_. ]+)\])?)$/,n=e.exec(t);if(!n)throw new Error("cannot parse trackName at all: "+t);n.index===e.lastIndex&&e.lastIndex++;var r={nodeName:n[3],objectName:n[5],objectIndex:n[7],propertyName:n[9],propertyIndex:n[11]};if(null===r.propertyName||0===r.propertyName.length)throw new Error("can not parse propertyName from trackName: "+t);return r},o.PropertyBinding.findNode=function(t,e){if(!e||""===e||"root"===e||"."===e||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=function(t){for(var n=0;n<t.bones.length;n++){var r=t.bones[n];if(r.name===e)return r}return null},r=n(t.skeleton);if(r)return r}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e)return r;var o=i(r.children);if(o)return o}return null},o=i(t.children);if(o)return o}return null},o.PropertyMixer=function(t,e,n){this.binding=t,this.valueSize=n;var r,i=Float64Array;switch(e){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0},o.PropertyMixer.prototype={constructor:o.PropertyMixer,accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=e}else{o+=e;var s=e/o;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*e;this._mixBufferRegion(n,r,a,1-i,e)}for(var s=e,u=e+e;s!==u;++s)if(n[s]!==n[s+e]){o.setValue(n,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=3*n;t.getValue(e,r);for(var i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,r,i){o.Quaternion.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*r}}},o.BooleanKeyframeTrack=function(t,e,n){o.KeyframeTrack.call(this,t,e,n)},o.BooleanKeyframeTrack.prototype=Object.assign(Object.create(o.KeyframeTrack.prototype),{constructor:o.BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:o.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),o.ColorKeyframeTrack=function(t,e,n,r){o.KeyframeTrack.call(this,t,e,n,r)},o.ColorKeyframeTrack.prototype=Object.assign(Object.create(o.KeyframeTrack.prototype),{constructor:o.ColorKeyframeTrack,ValueTypeName:"color"}),o.NumberKeyframeTrack=function(t,e,n,r){o.KeyframeTrack.call(this,t,e,n,r)},o.NumberKeyframeTrack.prototype=Object.assign(Object.create(o.KeyframeTrack.prototype),{constructor:o.NumberKeyframeTrack,ValueTypeName:"number"}),o.QuaternionKeyframeTrack=function(t,e,n,r){o.KeyframeTrack.call(this,t,e,n,r)},o.QuaternionKeyframeTrack.prototype=Object.assign(Object.create(o.KeyframeTrack.prototype),{constructor:o.QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:o.InterpolateLinear,InterpolantFactoryMethodLinear:function(t){return new o.QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),o.StringKeyframeTrack=function(t,e,n,r){o.KeyframeTrack.call(this,t,e,n,r)},o.StringKeyframeTrack.prototype=Object.assign(Object.create(o.KeyframeTrack.prototype),{constructor:o.StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:o.InterpolateDiscrete,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),o.VectorKeyframeTrack=function(t,e,n,r){o.KeyframeTrack.call(this,t,e,n,r)},o.VectorKeyframeTrack.prototype=Object.assign(Object.create(o.KeyframeTrack.prototype),{constructor:o.VectorKeyframeTrack,ValueTypeName:"vector"}),o.Audio=function(t){o.Object3D.call(this),this.type="Audio",this.context=t.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]},o.Audio.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.Audio,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.source.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();return t.buffer=this.source.buffer,t.loop=this.source.loop,t.onended=this.source.onended,t.start(0,this.startTime),t.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=t,this.connect()},pause:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),this.isPlaying===!0?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,this.isPlaying===!0&&(this.source.playbackRate.value=this.playbackRate),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},setLoop:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):void(this.source.loop=t)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),o.AudioAnalyser=function(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)},Object.assign(o.AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.defineProperty(o,"AudioContext",{get:function(){var t;return function(){return void 0===t&&(t=new(window.AudioContext||window.webkitAudioContext)),t}}()}),o.PositionalAudio=function(t){o.Audio.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)},o.PositionalAudio.prototype=Object.assign(Object.create(o.Audio.prototype),{constructor:o.PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new o.Vector3;return function(e){o.Object3D.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),o.AudioListener=function(){o.Object3D.call(this),this.type="AudioListener",this.context=o.AudioContext,this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null},o.AudioListener.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.AudioListener,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new o.Vector3,e=new o.Quaternion,n=new o.Vector3,r=new o.Vector3;return function(i){o.Object3D.prototype.updateMatrixWorld.call(this,i);var a=this.context.listener,s=this.up;this.matrixWorld.decompose(t,e,n),r.set(0,0,-1).applyQuaternion(e),a.setPosition(t.x,t.y,t.z),a.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z)}}()}),o.Camera=function(){o.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new o.Matrix4,this.projectionMatrix=new o.Matrix4},o.Camera.prototype=Object.create(o.Object3D.prototype),o.Camera.prototype.constructor=o.Camera,
o.Camera.prototype.getWorldDirection=function(){var t=new o.Quaternion;return function(e){var n=e||new o.Vector3;return this.getWorldQuaternion(t),n.set(0,0,-1).applyQuaternion(t)}}(),o.Camera.prototype.lookAt=function(){var t=new o.Matrix4;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),o.Camera.prototype.clone=function(){return(new this.constructor).copy(this)},o.Camera.prototype.copy=function(t){return o.Object3D.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},o.CubeCamera=function(t,e,n){o.Object3D.call(this),this.type="CubeCamera";var r=90,i=1,a=new o.PerspectiveCamera(r,i,t,e);a.up.set(0,-1,0),a.lookAt(new o.Vector3(1,0,0)),this.add(a);var s=new o.PerspectiveCamera(r,i,t,e);s.up.set(0,-1,0),s.lookAt(new o.Vector3((-1),0,0)),this.add(s);var u=new o.PerspectiveCamera(r,i,t,e);u.up.set(0,0,1),u.lookAt(new o.Vector3(0,1,0)),this.add(u);var l=new o.PerspectiveCamera(r,i,t,e);l.up.set(0,0,-1),l.lookAt(new o.Vector3(0,(-1),0)),this.add(l);var c=new o.PerspectiveCamera(r,i,t,e);c.up.set(0,-1,0),c.lookAt(new o.Vector3(0,0,1)),this.add(c);var h=new o.PerspectiveCamera(r,i,t,e);h.up.set(0,-1,0),h.lookAt(new o.Vector3(0,0,(-1))),this.add(h);var f={format:o.RGBFormat,magFilter:o.LinearFilter,minFilter:o.LinearFilter};this.renderTarget=new o.WebGLRenderTargetCube(n,n,f),this.updateCubeMap=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,a,n),n.activeCubeFace=1,t.render(e,s,n),n.activeCubeFace=2,t.render(e,u,n),n.activeCubeFace=3,t.render(e,l,n),n.activeCubeFace=4,t.render(e,c,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,t.render(e,h,n),t.setRenderTarget(null)}},o.CubeCamera.prototype=Object.create(o.Object3D.prototype),o.CubeCamera.prototype.constructor=o.CubeCamera,o.OrthographicCamera=function(t,e,n,r,i,a){o.Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()},o.OrthographicCamera.prototype=Object.assign(Object.create(o.Camera.prototype),{constructor:o.OrthographicCamera,copy:function(t){return o.Camera.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:r,width:i,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;i+=c*(this.view.offsetX/u),o=i+c*(this.view.width/u),a-=h*(this.view.offsetY/l),s=a-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far)},toJSON:function(t){var e=o.Object3D.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),o.PerspectiveCamera=function(t,e,n,r){o.Camera.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()},o.PerspectiveCamera.prototype=Object.assign(Object.create(o.Camera.prototype),{constructor:o.PerspectiveCamera,copy:function(t){return o.Camera.prototype.copy.call(this,t),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*o.Math.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*o.Math.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*o.Math.RAD2DEG*Math.atan(Math.tan(.5*o.Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:r,width:i,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*o.Math.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==a){var s=a.fullWidth,u=a.fullHeight;i+=a.offsetX*r/s,e-=a.offsetY*n/u,r*=a.width/s,n*=a.height/u}var l=this.filmOffset;0!==l&&(i+=t*l/this.getFilmWidth()),this.projectionMatrix.makeFrustum(i,i+r,e-n,e,t,this.far)},toJSON:function(t){var e=o.Object3D.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),o.StereoCamera=function(){this.type="StereoCamera",this.aspect=1,this.cameraL=new o.PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new o.PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1},Object.assign(o.StereoCamera.prototype,{update:function(){var t,e,n,r,i,a=new o.Matrix4,s=new o.Matrix4;return function(u){var l=t!==u.focus||e!==u.fov||n!==u.aspect*this.aspect||r!==u.near||i!==u.far;if(l){t=u.focus,e=u.fov,n=u.aspect*this.aspect,r=u.near,i=u.far;var c,h,f=u.projectionMatrix.clone(),p=.032,d=p*r/t,m=r*Math.tan(o.Math.DEG2RAD*e*.5);s.elements[12]=-p,a.elements[12]=p,c=-m*n+d,h=m*n+d,f.elements[0]=2*r/(h-c),f.elements[8]=(h+c)/(h-c),this.cameraL.projectionMatrix.copy(f),c=-m*n-d,h=m*n-d,f.elements[0]=2*r/(h-c),f.elements[8]=(h+c)/(h-c),this.cameraR.projectionMatrix.copy(f)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(s),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(a)}}()}),o.Light=function(t,e){o.Object3D.call(this),this.type="Light",this.color=new o.Color(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0},o.Light.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.Light,copy:function(t){return o.Object3D.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=o.Object3D.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),e}}),o.LightShadow=function(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new o.Vector2(512,512),this.map=null,this.matrix=new o.Matrix4},Object.assign(o.LightShadow.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)}}),o.AmbientLight=function(t,e){o.Light.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0},o.AmbientLight.prototype=Object.assign(Object.create(o.Light.prototype),{constructor:o.AmbientLight}),o.DirectionalLight=function(t,e){o.Light.call(this,t,e),this.type="DirectionalLight",this.position.copy(o.Object3D.DefaultUp),this.updateMatrix(),this.target=new o.Object3D,this.shadow=new o.DirectionalLightShadow},o.DirectionalLight.prototype=Object.assign(Object.create(o.Light.prototype),{constructor:o.DirectionalLight,copy:function(t){return o.Light.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),o.DirectionalLightShadow=function(t){o.LightShadow.call(this,new o.OrthographicCamera((-5),5,5,(-5),.5,500))},o.DirectionalLightShadow.prototype=Object.assign(Object.create(o.LightShadow.prototype),{constructor:o.DirectionalLightShadow}),o.HemisphereLight=function(t,e,n){o.Light.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(o.Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new o.Color(e)},o.HemisphereLight.prototype=Object.assign(Object.create(o.Light.prototype),{constructor:o.HemisphereLight,copy:function(t){return o.Light.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),o.PointLight=function(t,e,n,r){o.Light.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new o.LightShadow(new o.PerspectiveCamera(90,1,.5,500))},o.PointLight.prototype=Object.assign(Object.create(o.Light.prototype),{constructor:o.PointLight,copy:function(t){return o.Light.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),o.SpotLight=function(t,e,n,r,i,a){o.Light.call(this,t,e),this.type="SpotLight",this.position.copy(o.Object3D.DefaultUp),this.updateMatrix(),this.target=new o.Object3D,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new o.SpotLightShadow},o.SpotLight.prototype=Object.assign(Object.create(o.Light.prototype),{constructor:o.SpotLight,copy:function(t){return o.Light.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),o.SpotLightShadow=function(){o.LightShadow.call(this,new o.PerspectiveCamera(50,1,.5,500))},o.SpotLightShadow.prototype=Object.assign(Object.create(o.LightShadow.prototype),{constructor:o.SpotLightShadow,update:function(t){var e=2*o.Math.RAD2DEG*t.angle,n=this.mapSize.width/this.mapSize.height,r=t.distance||500,i=this.camera;e===i.fov&&n===i.aspect&&r===i.far||(i.fov=e,i.aspect=n,i.far=r,i.updateProjectionMatrix())}}),o.AudioLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager},Object.assign(o.AudioLoader.prototype,{load:function(t,e,n,r){var i=new o.XHRLoader(this.manager);i.setResponseType("arraybuffer"),i.load(t,function(t){var n=o.AudioContext;n.decodeAudioData(t,function(t){e(t)})},n,r)}}),o.Cache={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},o.Loader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},o.Loader.prototype={constructor:o.Loader,crossOrigin:void 0,extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e,n){for(var r=[],i=0;i<t.length;++i)r[i]=this.createMaterial(t[i],e,n);return r},createMaterial:function(){var t,e,n;return function(r,i,a){function s(t,n,r,s,l){var c,h=i+t,f=o.Loader.Handlers.get(h);null!==f?c=f.load(h):(e.setCrossOrigin(a),c=e.load(h)),void 0!==n&&(c.repeat.fromArray(n),1!==n[0]&&(c.wrapS=o.RepeatWrapping),1!==n[1]&&(c.wrapT=o.RepeatWrapping)),void 0!==r&&c.offset.fromArray(r),void 0!==s&&("repeat"===s[0]&&(c.wrapS=o.RepeatWrapping),"mirror"===s[0]&&(c.wrapS=o.MirroredRepeatWrapping),"repeat"===s[1]&&(c.wrapT=o.RepeatWrapping),"mirror"===s[1]&&(c.wrapT=o.MirroredRepeatWrapping)),void 0!==l&&(c.anisotropy=l);var p=o.Math.generateUUID();return u[p]=c,p}void 0===t&&(t=new o.Color),void 0===e&&(e=new o.TextureLoader),void 0===n&&(n=new o.MaterialLoader);var u={},l={uuid:o.Math.generateUUID(),type:"MeshLambertMaterial"};for(var c in r){var h=r[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=h;break;case"blending":l.blending=o[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":l.color=t.fromArray(h).getHex();break;case"colorSpecular":l.specular=t.fromArray(h).getHex();break;case"colorEmissive":l.emissive=t.fromArray(h).getHex();break;case"specularCoef":l.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=s(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=s(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=s(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=s(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=s(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=s(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=s(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=s(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=s(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=s(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=o.BackSide;break;case"doubleSided":l.side=o.DoubleSide;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[c]=h;break;case"vertexColors":h===!0&&(l.vertexColors=o.VertexColors),"face"===h&&(l.vertexColors=o.FaceColors);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,h)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),n.setTextures(u),n.parse(l)}}()},o.Loader.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,r=e.length;n<r;n+=2){var i=e[n],o=e[n+1];if(i.test(t))return o}return null}},o.XHRLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager},Object.assign(o.XHRLoader.prototype,{load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t);var i=this,a=o.Cache.get(t);if(void 0!==a)return i.manager.itemStart(t),setTimeout(function(){e&&e(a),i.manager.itemEnd(t)},0),a;var s=new XMLHttpRequest;return s.overrideMimeType("text/plain"),s.open("GET",t,!0),s.addEventListener("load",function(n){var a=n.target.response;o.Cache.add(t,a),200===this.status?(e&&e(a),i.manager.itemEnd(t)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),e&&e(a),i.manager.itemEnd(t)):(r&&r(n),i.manager.itemError(t))},!1),void 0!==n&&s.addEventListener("progress",function(t){n(t)},!1),s.addEventListener("error",function(e){r&&r(e),i.manager.itemError(t)},!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.send(null),i.manager.itemStart(t),s},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this}}),o.FontLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager},Object.assign(o.FontLoader.prototype,{load:function(t,e,n,r){var i=this,a=new o.XHRLoader(this.manager);a.load(t,function(t){var n;try{n=JSON.parse(t)}catch(r){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var o=i.parse(n);e&&e(o)},n,r)},parse:function(t){return new o.Font(t)}}),o.ImageLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager},Object.assign(o.ImageLoader.prototype,{load:function(t,e,n,r){var i=this,a=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(a.onload=function(){URL.revokeObjectURL(a.src),e&&e(a),i.manager.itemEnd(t)},0===t.indexOf("data:"))a.src=t;else{var s=new o.XHRLoader;s.setPath(this.path),s.setResponseType("blob"),s.load(t,function(t){a.src=URL.createObjectURL(t)},n,r)}return i.manager.itemStart(t),a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),o.JSONLoader=function(t){"boolean"==typeof t&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),t=void 0),this.manager=void 0!==t?t:o.DefaultLoadingManager,this.withCredentials=!1},Object.assign(o.JSONLoader.prototype,{load:function(t,e,n,r){var i=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:o.Loader.prototype.extractUrlBase(t),s=new o.XHRLoader(this.manager);s.setWithCredentials(this.withCredentials),s.load(t,function(n){var r=JSON.parse(n),o=r.metadata;if(void 0!==o){var s=o.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}}var u=i.parse(r,a);e(u.geometry,u.materials)},n,r)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){function n(e){function n(t,e){return t&1<<e}var r,i,a,u,l,c,h,f,p,d,m,v,g,y,_,b,w,x,E,C,S,M,P,T,O,A,R,L=t.faces,I=t.vertices,k=t.normals,D=t.colors,j=0;if(void 0!==t.uvs){for(r=0;r<t.uvs.length;r++)t.uvs[r].length&&j++;for(r=0;r<j;r++)s.faceVertexUvs[r]=[]}for(u=0,l=I.length;u<l;)x=new o.Vector3,x.x=I[u++]*e,x.y=I[u++]*e,x.z=I[u++]*e,s.vertices.push(x);for(u=0,l=L.length;u<l;)if(d=L[u++],m=n(d,0),v=n(d,1),g=n(d,3),y=n(d,4),_=n(d,5),b=n(d,6),w=n(d,7),m){if(C=new o.Face3,C.a=L[u],C.b=L[u+1],C.c=L[u+3],S=new o.Face3,S.a=L[u+1],S.b=L[u+2],S.c=L[u+3],u+=4,v&&(p=L[u++],C.materialIndex=p,S.materialIndex=p),a=s.faces.length,g)for(r=0;r<j;r++)for(T=t.uvs[r],s.faceVertexUvs[r][a]=[],s.faceVertexUvs[r][a+1]=[],i=0;i<4;i++)f=L[u++],A=T[2*f],R=T[2*f+1],O=new o.Vector2(A,R),2!==i&&s.faceVertexUvs[r][a].push(O),0!==i&&s.faceVertexUvs[r][a+1].push(O);if(y&&(h=3*L[u++],C.normal.set(k[h++],k[h++],k[h]),S.normal.copy(C.normal)),_)for(r=0;r<4;r++)h=3*L[u++],P=new o.Vector3(k[h++],k[h++],k[h]),2!==r&&C.vertexNormals.push(P),0!==r&&S.vertexNormals.push(P);if(b&&(c=L[u++],M=D[c],C.color.setHex(M),S.color.setHex(M)),w)for(r=0;r<4;r++)c=L[u++],M=D[c],2!==r&&C.vertexColors.push(new o.Color(M)),0!==r&&S.vertexColors.push(new o.Color(M));s.faces.push(C),s.faces.push(S)}else{if(E=new o.Face3,E.a=L[u++],E.b=L[u++],E.c=L[u++],v&&(p=L[u++],E.materialIndex=p),a=s.faces.length,g)for(r=0;r<j;r++)for(T=t.uvs[r],s.faceVertexUvs[r][a]=[],i=0;i<3;i++)f=L[u++],A=T[2*f],R=T[2*f+1],O=new o.Vector2(A,R),s.faceVertexUvs[r][a].push(O);if(y&&(h=3*L[u++],E.normal.set(k[h++],k[h++],k[h])),_)for(r=0;r<3;r++)h=3*L[u++],P=new o.Vector3(k[h++],k[h++],k[h]),E.vertexNormals.push(P);if(b&&(c=L[u++],E.color.setHex(D[c])),w)for(r=0;r<3;r++)c=L[u++],E.vertexColors.push(new o.Color(D[c]));s.faces.push(E)}}function r(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var n=0,r=t.skinWeights.length;n<r;n+=e){var i=t.skinWeights[n],a=e>1?t.skinWeights[n+1]:0,u=e>2?t.skinWeights[n+2]:0,l=e>3?t.skinWeights[n+3]:0;s.skinWeights.push(new o.Vector4(i,a,u,l))}if(t.skinIndices)for(var n=0,r=t.skinIndices.length;n<r;n+=e){var c=t.skinIndices[n],h=e>1?t.skinIndices[n+1]:0,f=e>2?t.skinIndices[n+2]:0,p=e>3?t.skinIndices[n+3]:0;s.skinIndices.push(new o.Vector4(c,h,f,p))}s.bones=t.bones,s.bones&&s.bones.length>0&&(s.skinWeights.length!==s.skinIndices.length||s.skinIndices.length!==s.vertices.length)&&console.warn("When skinning, number of vertices ("+s.vertices.length+"), skinIndices ("+s.skinIndices.length+"), and skinWeights ("+s.skinWeights.length+") should match.")}function i(e){if(void 0!==t.morphTargets)for(var n=0,r=t.morphTargets.length;n<r;n++){s.morphTargets[n]={},s.morphTargets[n].name=t.morphTargets[n].name,s.morphTargets[n].vertices=[];for(var i=s.morphTargets[n].vertices,a=t.morphTargets[n].vertices,u=0,l=a.length;u<l;u+=3){var c=new o.Vector3;c.x=a[u]*e,c.y=a[u+1]*e,c.z=a[u+2]*e,i.push(c)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=s.faces,f=t.morphColors[0].colors,n=0,r=h.length;n<r;n++)h[n].color.fromArray(f,3*n)}}function a(){var e=[],n=[];void 0!==t.animation&&n.push(t.animation),void 0!==t.animations&&(t.animations.length?n=n.concat(t.animations):n.push(t.animations));for(var r=0;r<n.length;r++){var i=o.AnimationClip.parseAnimation(n[r],s.bones);i&&e.push(i)}if(s.morphTargets){var a=o.AnimationClip.CreateClipsFromMorphTargetSequences(s.morphTargets,10);e=e.concat(a)}e.length>0&&(s.animations=e)}var s=new o.Geometry,u=void 0!==t.scale?1/t.scale:1;if(n(u),r(),i(u),a(),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===t.materials||0===t.materials.length)return{geometry:s};var l=o.Loader.prototype.initMaterials(t.materials,e,this.crossOrigin);return{geometry:s,materials:l}}}),o.LoadingManager=function(t,e,n){var r=this,i=!1,o=0,a=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,i===!1&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)}},o.DefaultLoadingManager=new o.LoadingManager,o.BufferGeometryLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager},Object.assign(o.BufferGeometryLoader.prototype,{load:function(t,e,n,r){var i=this,a=new o.XHRLoader(i.manager);a.load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},parse:function(t){var e=new o.BufferGeometry,n=t.data.index,r={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==n){var i=new r[n.type](n.array);e.setIndex(new o.BufferAttribute(i,1))}var a=t.data.attributes;for(var s in a){var u=a[s],i=new r[u.type](u.array);e.addAttribute(s,new o.BufferAttribute(i,u.itemSize,u.normalized))}var l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(var c=0,h=l.length;c!==h;++c){var f=l[c];e.addGroup(f.start,f.count,f.materialIndex)}var p=t.data.boundingSphere;if(void 0!==p){var d=new o.Vector3;void 0!==p.center&&d.fromArray(p.center),e.boundingSphere=new o.Sphere(d,p.radius)}return e}}),o.MaterialLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager,this.textures={}},Object.assign(o.MaterialLoader.prototype,{load:function(t,e,n,r){var i=this,a=new o.XHRLoader(i.manager);a.load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},setTextures:function(t){this.textures=t},getTexture:function(t){var e=this.textures;return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]},parse:function(t){var e=new o[t.type];if(void 0!==t.uuid&&(e.uuid=t.uuid),void 0!==t.name&&(e.name=t.name),void 0!==t.color&&e.color.setHex(t.color),void 0!==t.roughness&&(e.roughness=t.roughness),void 0!==t.metalness&&(e.metalness=t.metalness),void 0!==t.emissive&&e.emissive.setHex(t.emissive),void 0!==t.specular&&e.specular.setHex(t.specular),void 0!==t.shininess&&(e.shininess=t.shininess),void 0!==t.uniforms&&(e.uniforms=t.uniforms),void 0!==t.vertexShader&&(e.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(e.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(e.vertexColors=t.vertexColors),void 0!==t.shading&&(e.shading=t.shading),void 0!==t.blending&&(e.blending=t.blending),void 0!==t.side&&(e.side=t.side),void 0!==t.opacity&&(e.opacity=t.opacity),void 0!==t.transparent&&(e.transparent=t.transparent),void 0!==t.alphaTest&&(e.alphaTest=t.alphaTest),void 0!==t.depthTest&&(e.depthTest=t.depthTest),void 0!==t.depthWrite&&(e.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(e.colorWrite=t.colorWrite),void 0!==t.wireframe&&(e.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(e.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.size&&(e.size=t.size),void 0!==t.sizeAttenuation&&(e.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(e.map=this.getTexture(t.map)),void 0!==t.alphaMap&&(e.alphaMap=this.getTexture(t.alphaMap),e.transparent=!0),void 0!==t.bumpMap&&(e.bumpMap=this.getTexture(t.bumpMap)),void 0!==t.bumpScale&&(e.bumpScale=t.bumpScale),void 0!==t.normalMap&&(e.normalMap=this.getTexture(t.normalMap)),void 0!==t.normalScale){var n=t.normalScale;Array.isArray(n)===!1&&(n=[n,n]),e.normalScale=(new o.Vector2).fromArray(n)}if(void 0!==t.displacementMap&&(e.displacementMap=this.getTexture(t.displacementMap)),void 0!==t.displacementScale&&(e.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(e.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(e.roughnessMap=this.getTexture(t.roughnessMap)),void 0!==t.metalnessMap&&(e.metalnessMap=this.getTexture(t.metalnessMap)),void 0!==t.emissiveMap&&(e.emissiveMap=this.getTexture(t.emissiveMap)),void 0!==t.emissiveIntensity&&(e.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(e.specularMap=this.getTexture(t.specularMap)),void 0!==t.envMap&&(e.envMap=this.getTexture(t.envMap),e.combine=o.MultiplyOperation),void 0!==t.reflectivity&&(e.reflectivity=t.reflectivity),void 0!==t.lightMap&&(e.lightMap=this.getTexture(t.lightMap)),void 0!==t.lightMapIntensity&&(e.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(e.aoMap=this.getTexture(t.aoMap)),void 0!==t.aoMapIntensity&&(e.aoMapIntensity=t.aoMapIntensity),void 0!==t.materials)for(var r=0,i=t.materials.length;r<i;r++)e.materials.push(this.parse(t.materials[r]));return e}}),o.ObjectLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager,this.texturePath=""},Object.assign(o.ObjectLoader.prototype,{load:function(t,e,n,r){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var i=this,a=new o.XHRLoader(i.manager);a.load(t,function(t){i.parse(JSON.parse(t),e)},n,r)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var n=this.parseGeometries(t.geometries),r=this.parseImages(t.images,function(){void 0!==e&&e(a)}),i=this.parseTextures(t.textures,r),o=this.parseMaterials(t.materials,i),a=this.parseObject(t.object,n,o);return t.animations&&(a.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(a),a},parseGeometries:function(t){var e={};if(void 0!==t)for(var n=new o.JSONLoader,r=new o.BufferGeometryLoader,i=0,a=t.length;i<a;i++){var s,u=t[i];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new o[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new o[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new o[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new o[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new o[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new o[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":s=new o[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new o[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new o[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new o[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new o[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"BufferGeometry":s=r.parse(u);break;case"Geometry":s=n.parse(u.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),e[u.uuid]=s}return e},parseMaterials:function(t,e){var n={};if(void 0!==t){var r=new o.MaterialLoader;r.setTextures(e);for(var i=0,a=t.length;i<a;i++){var s=r.parse(t[i]);n[s.uuid]=s}}return n},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=o.AnimationClip.parse(t[n]);e.push(r)}return e},parseImages:function(t,e){function n(t){return r.manager.itemStart(t),s.load(t,function(){r.manager.itemEnd(t)})}var r=this,i={};if(void 0!==t&&t.length>0){var a=new o.LoadingManager(e),s=new o.ImageLoader(a);s.setCrossOrigin(this.crossOrigin);for(var u=0,l=t.length;u<l;u++){var c=t[u],h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.texturePath+c.url;i[c.uuid]=n(h)}}return i},parseTextures:function(t,e){function n(t){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),o[t])}var r={};if(void 0!==t)for(var i=0,a=t.length;i<a;i++){var s=t[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var u=new o.Texture(e[s.image]);
u.needsUpdate=!0,u.uuid=s.uuid,void 0!==s.name&&(u.name=s.name),void 0!==s.mapping&&(u.mapping=n(s.mapping)),void 0!==s.offset&&u.offset.fromArray(s.offset),void 0!==s.repeat&&u.repeat.fromArray(s.repeat),void 0!==s.wrap&&(u.wrapS=n(s.wrap[0]),u.wrapT=n(s.wrap[1])),void 0!==s.minFilter&&(u.minFilter=n(s.minFilter)),void 0!==s.magFilter&&(u.magFilter=n(s.magFilter)),void 0!==s.anisotropy&&(u.anisotropy=s.anisotropy),void 0!==s.flipY&&(u.flipY=s.flipY),r[s.uuid]=u}return r},parseObject:function(){var t=new o.Matrix4;return function(e,n,r){function i(t){return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),n[t]}function a(t){if(void 0!==t)return void 0===r[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),r[t]}var s;switch(e.type){case"Scene":s=new o.Scene;break;case"PerspectiveCamera":s=new o.PerspectiveCamera(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new o.OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":s=new o.AmbientLight(e.color,e.intensity);break;case"DirectionalLight":s=new o.DirectionalLight(e.color,e.intensity);break;case"PointLight":s=new o.PointLight(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":s=new o.SpotLight(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new o.HemisphereLight(e.color,e.groundColor,e.intensity);break;case"Mesh":var u=i(e.geometry),l=a(e.material);s=u.bones&&u.bones.length>0?new o.SkinnedMesh(u,l):new o.Mesh(u,l);break;case"LOD":s=new o.LOD;break;case"Line":s=new o.Line(i(e.geometry),a(e.material),e.mode);break;case"PointCloud":case"Points":s=new o.Points(i(e.geometry),a(e.material));break;case"Sprite":s=new o.Sprite(a(e.material));break;case"Group":s=new o.Group;break;default:s=new o.Object3D}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.children)for(var c in e.children)s.add(this.parseObject(e.children[c],n,r));if("LOD"===e.type)for(var h=e.levels,f=0;f<h.length;f++){var p=h[f],c=s.getObjectByProperty("uuid",p.object);void 0!==c&&s.addLevel(c,p.distance)}return s}}()}),o.TextureLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager},Object.assign(o.TextureLoader.prototype,{load:function(t,e,n,r){var i=new o.Texture,a=new o.ImageLoader(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(n){var r=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?o.RGBFormat:o.RGBAFormat,i.image=n,i.needsUpdate=!0,void 0!==e&&e(i)},n,r),i},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),o.CubeTextureLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager},Object.assign(o.CubeTextureLoader.prototype,{load:function(t,e,n,r){function i(n){s.load(t[n],function(t){a.images[n]=t,u++,6===u&&(a.needsUpdate=!0,e&&e(a))},void 0,r)}var a=new o.CubeTexture,s=new o.ImageLoader(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);for(var u=0,l=0;l<t.length;++l)i(l);return a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),o.DataTextureLoader=o.BinaryTextureLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager,this._parser=null},Object.assign(o.BinaryTextureLoader.prototype,{load:function(t,e,n,r){var i=this,a=new o.DataTexture,s=new o.XHRLoader(this.manager);return s.setResponseType("arraybuffer"),s.load(t,function(t){var n=i._parser(t);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:o.ClampToEdgeWrapping,a.wrapT=void 0!==n.wrapT?n.wrapT:o.ClampToEdgeWrapping,a.magFilter=void 0!==n.magFilter?n.magFilter:o.LinearFilter,a.minFilter=void 0!==n.minFilter?n.minFilter:o.LinearMipMapLinearFilter,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps),1===n.mipmapCount&&(a.minFilter=o.LinearFilter),a.needsUpdate=!0,e&&e(a,n))},n,r),a}}),o.CompressedTextureLoader=function(t){this.manager=void 0!==t?t:o.DefaultLoadingManager,this._parser=null},Object.assign(o.CompressedTextureLoader.prototype,{load:function(t,e,n,r){function i(i){l.load(t[i],function(t){var n=a._parser(t,!0);s[i]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(u.minFilter=o.LinearFilter),u.format=n.format,u.needsUpdate=!0,e&&e(u))},n,r)}var a=this,s=[],u=new o.CompressedTexture;u.image=s;var l=new o.XHRLoader(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,h=0,f=t.length;h<f;++h)i(h);else l.load(t,function(t){var n=a._parser(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,i=0;i<r;i++){s[i]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)s[i].mipmaps.push(n.mipmaps[i*n.mipmapCount+l]),s[i].format=n.format,s[i].width=n.width,s[i].height=n.height}else u.image.width=n.width,u.image.height=n.height,u.mipmaps=n.mipmaps;1===n.mipmapCount&&(u.minFilter=o.LinearFilter),u.format=n.format,u.needsUpdate=!0,e&&e(u)},n,r);return u},setPath:function(t){return this.path=t,this}}),o.Material=function(){Object.defineProperty(this,"id",{value:o.MaterialIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=o.NormalBlending,this.side=o.FrontSide,this.shading=o.SmoothShading,this.vertexColors=o.NoColors,this.opacity=1,this.transparent=!1,this.blendSrc=o.SrcAlphaFactor,this.blendDst=o.OneMinusSrcAlphaFactor,this.blendEquation=o.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=o.LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0},o.Material.prototype={constructor:o.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){t===!0&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n){var r=this[e];void 0!==r?r instanceof o.Color?r.set(n):r instanceof o.Vector3&&n instanceof o.Vector3?r.copy(n):"overdraw"===e?this[e]=Number(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){function e(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}var n=void 0===t;n&&(t={textures:{},images:{}});var r={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color instanceof o.Color&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive instanceof o.Color&&(r.emissive=this.emissive.getHex()),this.specular instanceof o.Color&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),this.map instanceof o.Texture&&(r.map=this.map.toJSON(t).uuid),this.alphaMap instanceof o.Texture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap instanceof o.Texture&&(r.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap instanceof o.Texture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap instanceof o.Texture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap instanceof o.Texture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap instanceof o.Texture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap instanceof o.Texture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap instanceof o.Texture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap instanceof o.Texture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.envMap instanceof o.Texture&&(r.envMap=this.envMap.toJSON(t).uuid,r.reflectivity=this.reflectivity),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==o.NormalBlending&&(r.blending=this.blending),this.shading!==o.SmoothShading&&(r.shading=this.shading),this.side!==o.FrontSide&&(r.side=this.side),this.vertexColors!==o.NoColors&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),n){var i=e(t.textures),a=e(t.images);i.length>0&&(r.textures=i),a.length>0&&(r.images=a)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(o.Material.prototype,o.EventDispatcher.prototype),o.MaterialIdCount=0,o.LineBasicMaterial=function(t){o.Material.call(this),this.type="LineBasicMaterial",this.color=new o.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)},o.LineBasicMaterial.prototype=Object.create(o.Material.prototype),o.LineBasicMaterial.prototype.constructor=o.LineBasicMaterial,o.LineBasicMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},o.LineDashedMaterial=function(t){o.Material.call(this),this.type="LineDashedMaterial",this.color=new o.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(t)},o.LineDashedMaterial.prototype=Object.create(o.Material.prototype),o.LineDashedMaterial.prototype.constructor=o.LineDashedMaterial,o.LineDashedMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this},o.MeshBasicMaterial=function(t){o.Material.call(this),this.type="MeshBasicMaterial",this.color=new o.Color(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)},o.MeshBasicMaterial.prototype=Object.create(o.Material.prototype),o.MeshBasicMaterial.prototype.constructor=o.MeshBasicMaterial,o.MeshBasicMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},o.MeshDepthMaterial=function(t){o.Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=o.BasicDepthPacking,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)},o.MeshDepthMaterial.prototype=Object.create(o.Material.prototype),o.MeshDepthMaterial.prototype.constructor=o.MeshDepthMaterial,o.MeshDepthMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},o.MeshLambertMaterial=function(t){o.Material.call(this),this.type="MeshLambertMaterial",this.color=new o.Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new o.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},o.MeshLambertMaterial.prototype=Object.create(o.Material.prototype),o.MeshLambertMaterial.prototype.constructor=o.MeshLambertMaterial,o.MeshLambertMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},o.MeshNormalMaterial=function(t){o.Material.call(this,t),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.morphTargets=!1,this.setValues(t)},o.MeshNormalMaterial.prototype=Object.create(o.Material.prototype),o.MeshNormalMaterial.prototype.constructor=o.MeshNormalMaterial,o.MeshNormalMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},o.MeshPhongMaterial=function(t){o.Material.call(this),this.type="MeshPhongMaterial",this.color=new o.Color(16777215),this.specular=new o.Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new o.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new o.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},o.MeshPhongMaterial.prototype=Object.create(o.Material.prototype),o.MeshPhongMaterial.prototype.constructor=o.MeshPhongMaterial,o.MeshPhongMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},o.MeshStandardMaterial=function(t){o.Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new o.Color(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new o.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new o.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},o.MeshStandardMaterial.prototype=Object.create(o.Material.prototype),o.MeshStandardMaterial.prototype.constructor=o.MeshStandardMaterial,o.MeshStandardMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},o.MeshPhysicalMaterial=function(t){o.MeshStandardMaterial.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)},o.MeshPhysicalMaterial.prototype=Object.create(o.MeshStandardMaterial.prototype),o.MeshPhysicalMaterial.prototype.constructor=o.MeshPhysicalMaterial,o.MeshPhysicalMaterial.prototype.copy=function(t){return o.MeshStandardMaterial.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},o.MultiMaterial=function(t){this.uuid=o.Math.generateUUID(),this.type="MultiMaterial",this.materials=t instanceof Array?t:[],this.visible=!0},o.MultiMaterial.prototype={constructor:o.MultiMaterial,toJSON:function(t){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials,r=0,i=n.length;r<i;r++){var o=n[r].toJSON(t);delete o.metadata,e.materials.push(o)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},o.PointsMaterial=function(t){o.Material.call(this),this.type="PointsMaterial",this.color=new o.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)},o.PointsMaterial.prototype=Object.create(o.Material.prototype),o.PointsMaterial.prototype.constructor=o.PointsMaterial,o.PointsMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},o.ShaderMaterial=function(t){o.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))},o.ShaderMaterial.prototype=Object.create(o.Material.prototype),o.ShaderMaterial.prototype.constructor=o.ShaderMaterial,o.ShaderMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=o.UniformsUtils.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},o.ShaderMaterial.prototype.toJSON=function(t){var e=o.Material.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},o.RawShaderMaterial=function(t){o.ShaderMaterial.call(this,t),this.type="RawShaderMaterial"},o.RawShaderMaterial.prototype=Object.create(o.ShaderMaterial.prototype),o.RawShaderMaterial.prototype.constructor=o.RawShaderMaterial,o.SpriteMaterial=function(t){o.Material.call(this),this.type="SpriteMaterial",this.color=new o.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)},o.SpriteMaterial.prototype=Object.create(o.Material.prototype),o.SpriteMaterial.prototype.constructor=o.SpriteMaterial,o.SpriteMaterial.prototype.copy=function(t){return o.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},o.ShadowMaterial=function(){o.ShaderMaterial.call(this,{uniforms:o.UniformsUtils.merge([o.UniformsLib.lights,{opacity:{value:1}}]),vertexShader:o.ShaderChunk.shadow_vert,fragmentShader:o.ShaderChunk.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}}})},o.ShadowMaterial.prototype=Object.create(o.ShaderMaterial.prototype),o.ShadowMaterial.prototype.constructor=o.ShadowMaterial,o.Texture=function(t,e,n,r,i,a,s,u,l,c){Object.defineProperty(this,"id",{value:o.TextureIdCount++}),this.uuid=o.Math.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==t?t:o.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:o.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:o.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:o.ClampToEdgeWrapping,this.magFilter=void 0!==i?i:o.LinearFilter,this.minFilter=void 0!==a?a:o.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:o.RGBAFormat,this.type=void 0!==u?u:o.UnsignedByteType,this.offset=new o.Vector2(0,0),this.repeat=new o.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:o.LinearEncoding,this.version=0,this.onUpdate=null},o.Texture.DEFAULT_IMAGE=void 0,o.Texture.DEFAULT_MAPPING=o.UVMapping,o.Texture.prototype={constructor:o.Texture,set needsUpdate(t){t===!0&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){function e(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=o.Math.generateUUID()),void 0===t.images[r.uuid]&&(t.images[r.uuid]={uuid:r.uuid,url:e(r)}),n.image=r.uuid}return t.textures[this.uuid]=n,n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===o.UVMapping){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case o.RepeatWrapping:t.x=t.x-Math.floor(t.x);break;case o.ClampToEdgeWrapping:t.x=t.x<0?0:1;break;case o.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case o.RepeatWrapping:t.y=t.y-Math.floor(t.y);break;case o.ClampToEdgeWrapping:t.y=t.y<0?0:1;break;case o.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},Object.assign(o.Texture.prototype,o.EventDispatcher.prototype),o.TextureIdCount=0,o.DepthTexture=function(t,e,n,r,i,a,s,u,l){o.Texture.call(this,null,r,i,a,s,u,o.DepthFormat,n,l),this.image={width:t,height:e},this.type=void 0!==n?n:o.UnsignedShortType,this.magFilter=void 0!==s?s:o.NearestFilter,this.minFilter=void 0!==u?u:o.NearestFilter,this.flipY=!1,this.generateMipmaps=!1},o.DepthTexture.prototype=Object.create(o.Texture.prototype),o.DepthTexture.prototype.constructor=o.DepthTexture,o.CanvasTexture=function(t,e,n,r,i,a,s,u,l){o.Texture.call(this,t,e,n,r,i,a,s,u,l),this.needsUpdate=!0},o.CanvasTexture.prototype=Object.create(o.Texture.prototype),o.CanvasTexture.prototype.constructor=o.CanvasTexture,o.CubeTexture=function(t,e,n,r,i,a,s,u,l,c){t=void 0!==t?t:[],e=void 0!==e?e:o.CubeReflectionMapping,o.Texture.call(this,t,e,n,r,i,a,s,u,l,c),this.flipY=!1},o.CubeTexture.prototype=Object.create(o.Texture.prototype),o.CubeTexture.prototype.constructor=o.CubeTexture,Object.defineProperty(o.CubeTexture.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),o.CompressedTexture=function(t,e,n,r,i,a,s,u,l,c,h,f){o.Texture.call(this,null,a,s,u,l,c,r,i,h,f),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1},o.CompressedTexture.prototype=Object.create(o.Texture.prototype),o.CompressedTexture.prototype.constructor=o.CompressedTexture,o.DataTexture=function(t,e,n,r,i,a,s,u,l,c,h,f){o.Texture.call(this,null,a,s,u,l,c,r,i,h,f),this.image={data:t,width:e,height:n},this.magFilter=void 0!==l?l:o.NearestFilter,this.minFilter=void 0!==c?c:o.NearestFilter,this.flipY=!1,this.generateMipmaps=!1},o.DataTexture.prototype=Object.create(o.Texture.prototype),o.DataTexture.prototype.constructor=o.DataTexture,o.VideoTexture=function(t,e,n,r,i,a,s,u,l){function c(){requestAnimationFrame(c),t.readyState>=t.HAVE_CURRENT_DATA&&(h.needsUpdate=!0)}o.Texture.call(this,t,e,n,r,i,a,s,u,l),this.generateMipmaps=!1;var h=this;c()},o.VideoTexture.prototype=Object.create(o.Texture.prototype),o.VideoTexture.prototype.constructor=o.VideoTexture,o.Group=function(){o.Object3D.call(this),this.type="Group"},o.Group.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.Group}),o.Points=function(t,e){o.Object3D.call(this),this.type="Points",this.geometry=void 0!==t?t:new o.BufferGeometry,this.material=void 0!==e?e:new o.PointsMaterial({color:16777215*Math.random()})},o.Points.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.Points,raycast:function(){var t=new o.Matrix4,e=new o.Ray,n=new o.Sphere;return function(r,i){function a(t,n){var o=e.distanceSqToPoint(t);if(o<f){var a=e.closestPointToPoint(t);a.applyMatrix4(l);var u=r.ray.origin.distanceTo(a);if(u<r.near||u>r.far)return;i.push({distance:u,distanceToRay:Math.sqrt(o),point:a.clone(),index:n,face:null,object:s})}}var s=this,u=this.geometry,l=this.matrixWorld,c=r.params.Points.threshold;if(null===u.boundingSphere&&u.computeBoundingSphere(),n.copy(u.boundingSphere),n.applyMatrix4(l),r.ray.intersectsSphere(n)!==!1){t.getInverse(l),e.copy(r.ray).applyMatrix4(t);var h=c/((this.scale.x+this.scale.y+this.scale.z)/3),f=h*h,p=new o.Vector3;if(u instanceof o.BufferGeometry){var d=u.index,m=u.attributes,v=m.position.array;if(null!==d)for(var g=d.array,y=0,_=g.length;y<_;y++){var b=g[y];p.fromArray(v,3*b),a(p,b)}else for(var y=0,w=v.length/3;y<w;y++)p.fromArray(v,3*y),a(p,y)}else for(var x=u.vertices,y=0,w=x.length;y<w;y++)a(x[y],y)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),o.Line=function(t,e,n){return 1===n?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new o.LineSegments(t,e)):(o.Object3D.call(this),this.type="Line",this.geometry=void 0!==t?t:new o.BufferGeometry,void(this.material=void 0!==e?e:new o.LineBasicMaterial({color:16777215*Math.random()})))},o.Line.prototype=Object.assign(Object.create(o.Object3D.prototype),{
constructor:o.Line,raycast:function(){var t=new o.Matrix4,e=new o.Ray,n=new o.Sphere;return function(r,i){var a=r.linePrecision,s=a*a,u=this.geometry,l=this.matrixWorld;if(null===u.boundingSphere&&u.computeBoundingSphere(),n.copy(u.boundingSphere),n.applyMatrix4(l),r.ray.intersectsSphere(n)!==!1){t.getInverse(l),e.copy(r.ray).applyMatrix4(t);var c=new o.Vector3,h=new o.Vector3,f=new o.Vector3,p=new o.Vector3,d=this instanceof o.LineSegments?2:1;if(u instanceof o.BufferGeometry){var m=u.index,v=u.attributes,g=v.position.array;if(null!==m)for(var y=m.array,_=0,b=y.length-1;_<b;_+=d){var w=y[_],x=y[_+1];c.fromArray(g,3*w),h.fromArray(g,3*x);var E=e.distanceSqToSegment(c,h,p,f);if(!(E>s)){p.applyMatrix4(this.matrixWorld);var C=r.ray.origin.distanceTo(p);C<r.near||C>r.far||i.push({distance:C,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else for(var _=0,b=g.length/3-1;_<b;_+=d){c.fromArray(g,3*_),h.fromArray(g,3*_+3);var E=e.distanceSqToSegment(c,h,p,f);if(!(E>s)){p.applyMatrix4(this.matrixWorld);var C=r.ray.origin.distanceTo(p);C<r.near||C>r.far||i.push({distance:C,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else if(u instanceof o.Geometry)for(var S=u.vertices,M=S.length,_=0;_<M-1;_+=d){var E=e.distanceSqToSegment(S[_],S[_+1],p,f);if(!(E>s)){p.applyMatrix4(this.matrixWorld);var C=r.ray.origin.distanceTo(p);C<r.near||C>r.far||i.push({distance:C,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),o.LineSegments=function(t,e){o.Line.call(this,t,e),this.type="LineSegments"},o.LineSegments.prototype=Object.assign(Object.create(o.Line.prototype),{constructor:o.LineSegments}),o.Mesh=function(t,e){o.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new o.BufferGeometry,this.material=void 0!==e?e:new o.MeshBasicMaterial({color:16777215*Math.random()}),this.drawMode=o.TrianglesDrawMode,this.updateMorphTargets()},o.Mesh.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.Mesh,setDrawMode:function(t){this.drawMode=t},copy:function(t){return o.Object3D.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,e=this.geometry.morphTargets.length;t<e;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[t].name]=t}},getMorphTargetIndexByName:function(t){return void 0!==this.morphTargetDictionary[t]?this.morphTargetDictionary[t]:(console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+t+" does not exist. Returning 0."),0)},raycast:function(){function t(t,e,n,r,i,a,s){return o.Triangle.barycoordFromPoint(t,e,n,r,v),i.multiplyScalar(v.x),a.multiplyScalar(v.y),s.multiplyScalar(v.z),i.add(a).add(s),i.clone()}function e(t,e,n,r,i,a,s){var u,l=t.material;if(u=l.side===o.BackSide?n.intersectTriangle(a,i,r,!0,s):n.intersectTriangle(r,i,a,l.side!==o.DoubleSide,s),null===u)return null;y.copy(s),y.applyMatrix4(t.matrixWorld);var c=e.ray.origin.distanceTo(y);return c<e.near||c>e.far?null:{distance:c,point:y.clone(),object:t}}function n(n,r,i,a,c,h,f,v){s.fromArray(a,3*h),u.fromArray(a,3*f),l.fromArray(a,3*v);var y=e(n,r,i,s,u,l,g);return y&&(c&&(p.fromArray(c,2*h),d.fromArray(c,2*f),m.fromArray(c,2*v),y.uv=t(g,s,u,l,p,d,m)),y.face=new o.Face3(h,f,v,o.Triangle.normal(s,u,l)),y.faceIndex=h),y}var r=new o.Matrix4,i=new o.Ray,a=new o.Sphere,s=new o.Vector3,u=new o.Vector3,l=new o.Vector3,c=new o.Vector3,h=new o.Vector3,f=new o.Vector3,p=new o.Vector2,d=new o.Vector2,m=new o.Vector2,v=new o.Vector3,g=new o.Vector3,y=new o.Vector3;return function(v,y){var _=this.geometry,b=this.material,w=this.matrixWorld;if(void 0!==b&&(null===_.boundingSphere&&_.computeBoundingSphere(),a.copy(_.boundingSphere),a.applyMatrix4(w),v.ray.intersectsSphere(a)!==!1&&(r.getInverse(w),i.copy(v.ray).applyMatrix4(r),null===_.boundingBox||i.intersectsBox(_.boundingBox)!==!1))){var x,E;if(_ instanceof o.BufferGeometry){var C,S,M,P=_.index,T=_.attributes,O=T.position.array;if(void 0!==T.uv&&(x=T.uv.array),null!==P)for(var A=P.array,R=0,L=A.length;R<L;R+=3)C=A[R],S=A[R+1],M=A[R+2],E=n(this,v,i,O,x,C,S,M),E&&(E.faceIndex=Math.floor(R/3),y.push(E));else for(var R=0,L=O.length;R<L;R+=9)C=R/3,S=C+1,M=C+2,E=n(this,v,i,O,x,C,S,M),E&&(E.index=C,y.push(E))}else if(_ instanceof o.Geometry){var I,k,D,j=b instanceof o.MultiMaterial,N=j===!0?b.materials:null,B=_.vertices,F=_.faces,U=_.faceVertexUvs[0];U.length>0&&(x=U);for(var V=0,z=F.length;V<z;V++){var G=F[V],H=j===!0?N[G.materialIndex]:b;if(void 0!==H){if(I=B[G.a],k=B[G.b],D=B[G.c],H.morphTargets===!0){var W=_.morphTargets,X=this.morphTargetInfluences;s.set(0,0,0),u.set(0,0,0),l.set(0,0,0);for(var q=0,Y=W.length;q<Y;q++){var K=X[q];if(0!==K){var Z=W[q].vertices;s.addScaledVector(c.subVectors(Z[G.a],I),K),u.addScaledVector(h.subVectors(Z[G.b],k),K),l.addScaledVector(f.subVectors(Z[G.c],D),K)}}s.add(I),u.add(k),l.add(D),I=s,k=u,D=l}if(E=e(this,v,i,I,k,D,g)){if(x){var J=x[V];p.copy(J[0]),d.copy(J[1]),m.copy(J[2]),E.uv=t(g,I,k,D,p,d,m)}E.face=G,E.faceIndex=V,y.push(E)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),o.Bone=function(t){o.Object3D.call(this),this.type="Bone",this.skin=t},o.Bone.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.Bone,copy:function(t){return o.Object3D.prototype.copy.call(this,t),this.skin=t.skin,this}}),o.Skeleton=function(t,e,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new o.Matrix4,t=t||[],this.bones=t.slice(0),this.useVertexTexture){var r=Math.sqrt(4*this.bones.length);r=o.Math.nextPowerOfTwo(Math.ceil(r)),r=Math.max(r,4),this.boneTextureWidth=r,this.boneTextureHeight=r,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new o.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,o.RGBAFormat,o.FloatType)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var i=0,a=this.bones.length;i<a;i++)this.boneInverses.push(new o.Matrix4)}},Object.assign(o.Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new o.Matrix4;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var t,e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(var e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&(t.parent instanceof o.Bone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new o.Matrix4;return function(){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;t.multiplyMatrices(r,this.boneInverses[e]),t.toArray(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new o.Skeleton(this.bones,this.boneInverses,this.useVertexTexture)}}),o.SkinnedMesh=function(t,e,n){o.Mesh.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new o.Matrix4,this.bindMatrixInverse=new o.Matrix4;var r=[];if(this.geometry&&void 0!==this.geometry.bones){for(var i,a,s=0,u=this.geometry.bones.length;s<u;++s)a=this.geometry.bones[s],i=new o.Bone(this),r.push(i),i.name=a.name,i.position.fromArray(a.pos),i.quaternion.fromArray(a.rotq),void 0!==a.scl&&i.scale.fromArray(a.scl);for(var s=0,u=this.geometry.bones.length;s<u;++s)a=this.geometry.bones[s],a.parent!==-1&&null!==a.parent&&void 0!==r[a.parent]?r[a.parent].add(r[s]):this.add(r[s])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new o.Skeleton(r,(void 0),n),this.matrixWorld)},o.SkinnedMesh.prototype=Object.assign(Object.create(o.Mesh.prototype),{constructor:o.SkinnedMesh,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry instanceof o.Geometry)for(var t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t],n=1/e.lengthManhattan();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0)}else if(this.geometry instanceof o.BufferGeometry)for(var r=new o.Vector4,i=this.geometry.attributes.skinWeight,t=0;t<i.count;t++){r.x=i.getX(t),r.y=i.getY(t),r.z=i.getZ(t),r.w=i.getW(t);var n=1/r.lengthManhattan();n!==1/0?r.multiplyScalar(n):r.set(1,0,0,0),i.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(t){o.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),o.LOD=function(){o.Object3D.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})},o.LOD.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.LOD,copy:function(t){o.Object3D.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var i=e[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);n.splice(r,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(){var t=new o.Vector3;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(t);this.getObjectForDistance(r).raycast(e,n)}}(),update:function(){var t=new o.Vector3,e=new o.Vector3;return function(n){var r=this.levels;if(r.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var i=t.distanceTo(e);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(t){var e=o.Object3D.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var a=n[r];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}),o.Sprite=function(t){o.Object3D.call(this),this.type="Sprite",this.material=void 0!==t?t:new o.SpriteMaterial},o.Sprite.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.Sprite,raycast:function(){var t=new o.Vector3;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.distanceSqToPoint(t),i=this.scale.x*this.scale.y/4;r>i||n.push({distance:Math.sqrt(r),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),o.LensFlare=function(t,e,n,r,i){o.Object3D.call(this),this.lensFlares=[],this.positionScreen=new o.Vector3,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,n,r,i)},o.LensFlare.prototype=Object.assign(Object.create(o.Object3D.prototype),{constructor:o.LensFlare,copy:function(t){o.Object3D.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var e=0,n=t.lensFlares.length;e<n;e++)this.lensFlares.push(t.lensFlares[e]);return this},add:function(t,e,n,r,i,a){void 0===e&&(e=-1),void 0===n&&(n=0),void 0===a&&(a=1),void 0===i&&(i=new o.Color(16777215)),void 0===r&&(r=o.NormalBlending),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:t,size:e,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:i,blending:r})},updateLensFlares:function(){var t,e,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(t=0;t<n;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+r*e.distance,e.y=this.positionScreen.y+i*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)}}),o.Scene=function(){o.Object3D.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},o.Scene.prototype=Object.create(o.Object3D.prototype),o.Scene.prototype.constructor=o.Scene,o.Scene.prototype.copy=function(t,e){return o.Object3D.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},o.Fog=function(t,e,n){this.name="",this.color=new o.Color(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3},o.Fog.prototype.clone=function(){return new o.Fog(this.color.getHex(),this.near,this.far)},o.FogExp2=function(t,e){this.name="",this.color=new o.Color(t),this.density=void 0!==e?e:25e-5},o.FogExp2.prototype.clone=function(){return new o.FogExp2(this.color.getHex(),this.density)},o.ShaderChunk={},o.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",o.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",o.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",o.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",o.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",o.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n",o.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n",o.ShaderChunk.bsdfs="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",o.ShaderChunk.bumpmap_pars_fragment="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",o.ShaderChunk.clipping_planes_fragment="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n#endif\n",o.ShaderChunk.clipping_planes_pars_fragment="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",o.ShaderChunk.clipping_planes_pars_vertex="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",o.ShaderChunk.clipping_planes_vertex="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",o.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",o.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",o.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",o.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",o.ShaderChunk.common="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n",o.ShaderChunk.cube_uv_reflection_fragment="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",o.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",o.ShaderChunk.displacementmap_vertex="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",o.ShaderChunk.displacementmap_pars_vertex="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",o.ShaderChunk.emissivemap_fragment="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",o.ShaderChunk.emissivemap_pars_fragment="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",o.ShaderChunk.encodings_pars_fragment="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",o.ShaderChunk.encodings_fragment="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",o.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",
o.ShaderChunk.envmap_pars_fragment="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",o.ShaderChunk.envmap_pars_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",o.ShaderChunk.envmap_vertex="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",o.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",o.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",o.ShaderChunk.lightmap_fragment="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",o.ShaderChunk.lightmap_pars_fragment="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",o.ShaderChunk.lights_lambert_vertex="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",o.ShaderChunk.lights_pars="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#include <normal_flip>\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#include <normal_flip>\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",o.ShaderChunk.lights_phong_fragment="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",o.ShaderChunk.lights_phong_pars_fragment="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",o.ShaderChunk.lights_physical_fragment="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",o.ShaderChunk.lights_physical_pars_fragment="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",o.ShaderChunk.lights_template="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",o.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",o.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",o.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",o.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",o.ShaderChunk.map_fragment="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",o.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",o.ShaderChunk.map_particle_fragment="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",o.ShaderChunk.map_particle_pars_fragment="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",o.ShaderChunk.metalnessmap_fragment="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",o.ShaderChunk.metalnessmap_pars_fragment="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",o.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",o.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",o.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",o.ShaderChunk.normal_flip="#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",o.ShaderChunk.normal_fragment="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",o.ShaderChunk.normalmap_pars_fragment="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",o.ShaderChunk.packing="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",o.ShaderChunk.premultiplied_alpha_fragment="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",o.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",o.ShaderChunk.roughnessmap_fragment="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",o.ShaderChunk.roughnessmap_pars_fragment="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",o.ShaderChunk.shadowmap_pars_fragment="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",
o.ShaderChunk.shadowmap_pars_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",o.ShaderChunk.shadowmap_vertex="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",o.ShaderChunk.shadowmask_pars_fragment="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",o.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",o.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",o.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",o.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",o.ShaderChunk.specularmap_fragment="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",o.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",o.ShaderChunk.tonemapping_fragment="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",o.ShaderChunk.tonemapping_pars_fragment="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",o.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",o.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",o.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",o.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",o.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",o.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",o.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",o.UniformsUtils={merge:function(t){for(var e={},n=0;n<t.length;n++){var r=this.clone(t[n]);for(var i in r)e[i]=r[i]}return e},clone:function(t){var e={};for(var n in t){e[n]={};for(var r in t[n]){var i=t[n][r];i instanceof o.Color||i instanceof o.Vector2||i instanceof o.Vector3||i instanceof o.Vector4||i instanceof o.Matrix3||i instanceof o.Matrix4||i instanceof o.Texture?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}},o.UniformsLib={common:{diffuse:{value:new o.Color(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new o.Vector4(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new o.Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new o.Color(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}}},points:{diffuse:{value:new o.Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new o.Vector4(0,0,1,1)}}},o.ShaderChunk.cube_frag="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",o.ShaderChunk.cube_vert="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",o.ShaderChunk.depth_frag="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",o.ShaderChunk.depth_vert="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",o.ShaderChunk.distanceRGBA_frag="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",o.ShaderChunk.distanceRGBA_vert="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",o.ShaderChunk.equirect_frag="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",o.ShaderChunk.equirect_vert="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",o.ShaderChunk.linedashed_frag="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",o.ShaderChunk.linedashed_vert="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",o.ShaderChunk.meshbasic_frag="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",o.ShaderChunk.meshbasic_vert="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",o.ShaderChunk.meshlambert_frag="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",o.ShaderChunk.meshlambert_vert="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",o.ShaderChunk.meshphong_frag="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",o.ShaderChunk.meshphong_vert="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",o.ShaderChunk.meshphysical_frag="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",o.ShaderChunk.meshphysical_vert="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",o.ShaderChunk.normal_frag="uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n",o.ShaderChunk.normal_vert="varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",o.ShaderChunk.points_frag="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",o.ShaderChunk.points_vert="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",o.ShaderChunk.shadow_frag="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",o.ShaderChunk.shadow_vert="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",o.ShaderLib={basic:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.aomap,o.UniformsLib.fog]),vertexShader:o.ShaderChunk.meshbasic_vert,fragmentShader:o.ShaderChunk.meshbasic_frag},lambert:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.aomap,o.UniformsLib.lightmap,o.UniformsLib.emissivemap,o.UniformsLib.fog,o.UniformsLib.lights,{emissive:{value:new o.Color(0)}}]),vertexShader:o.ShaderChunk.meshlambert_vert,fragmentShader:o.ShaderChunk.meshlambert_frag},phong:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.aomap,o.UniformsLib.lightmap,o.UniformsLib.emissivemap,o.UniformsLib.bumpmap,o.UniformsLib.normalmap,o.UniformsLib.displacementmap,o.UniformsLib.fog,o.UniformsLib.lights,{emissive:{value:new o.Color(0)},specular:{value:new o.Color(1118481)},shininess:{value:30}}]),vertexShader:o.ShaderChunk.meshphong_vert,fragmentShader:o.ShaderChunk.meshphong_frag},standard:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.aomap,o.UniformsLib.lightmap,o.UniformsLib.emissivemap,o.UniformsLib.bumpmap,o.UniformsLib.normalmap,o.UniformsLib.displacementmap,o.UniformsLib.roughnessmap,o.UniformsLib.metalnessmap,o.UniformsLib.fog,o.UniformsLib.lights,{emissive:{value:new o.Color(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:o.ShaderChunk.meshphysical_vert,fragmentShader:o.ShaderChunk.meshphysical_frag},points:{uniforms:o.UniformsUtils.merge([o.UniformsLib.points,o.UniformsLib.fog]),vertexShader:o.ShaderChunk.points_vert,fragmentShader:o.ShaderChunk.points_frag},dashed:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:o.ShaderChunk.linedashed_vert,fragmentShader:o.ShaderChunk.linedashed_frag},depth:{uniforms:o.UniformsUtils.merge([o.UniformsLib.common,o.UniformsLib.displacementmap]),vertexShader:o.ShaderChunk.depth_vert,fragmentShader:o.ShaderChunk.depth_frag},normal:{uniforms:{opacity:{value:1}},vertexShader:o.ShaderChunk.normal_vert,fragmentShader:o.ShaderChunk.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:o.ShaderChunk.cube_vert,fragmentShader:o.ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:o.ShaderChunk.equirect_vert,fragmentShader:o.ShaderChunk.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new o.Vector3}},vertexShader:o.ShaderChunk.distanceRGBA_vert,fragmentShader:o.ShaderChunk.distanceRGBA_frag}},o.ShaderLib.physical={uniforms:o.UniformsUtils.merge([o.ShaderLib.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:o.ShaderChunk.meshphysical_vert,fragmentShader:o.ShaderChunk.meshphysical_frag},o.WebGLRenderer=function(t){function e(){return null===et?dt:1}function n(t,e,n,r){G===!0&&(t*=r,e*=r,n*=r),Lt.clearColor(t,e,n,r)}function r(){Lt.init(),Lt.scissor(at.copy(mt).multiplyScalar(dt)),Lt.viewport(ut.copy(gt).multiplyScalar(dt)),n(ct.r,ct.g,ct.b,ht)}function i(){tt=null,ot=null,it="",rt=-1,Lt.reset()}function a(t){t.preventDefault(),i(),r(),It.clear()}function s(t){var e=t.target;e.removeEventListener("dispose",s),u(e)}function u(t){l(t),It.delete(t)}function l(t){var e=It.get(t).program;t.program=void 0,
void 0!==e&&jt.releaseProgram(e)}function c(t,e,n,r){var i;if(n instanceof o.InstancedBufferGeometry&&(i=At.get("ANGLE_instanced_arrays"),null===i))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===r&&(r=0),Lt.initAttributes();var a=n.attributes,s=e.getAttributes(),u=t.defaultAttributeValues;for(var l in s){var c=s[l];if(c>=0){var h=a[l];if(void 0!==h){var f=Pt.FLOAT,p=h.array,d=h.normalized;p instanceof Float32Array?f=Pt.FLOAT:p instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):p instanceof Uint16Array?f=Pt.UNSIGNED_SHORT:p instanceof Int16Array?f=Pt.SHORT:p instanceof Uint32Array?f=Pt.UNSIGNED_INT:p instanceof Int32Array?f=Pt.INT:p instanceof Int8Array?f=Pt.BYTE:p instanceof Uint8Array&&(f=Pt.UNSIGNED_BYTE);var m=h.itemSize,v=Dt.getAttributeBuffer(h);if(h instanceof o.InterleavedBufferAttribute){var g=h.data,y=g.stride,_=h.offset;g instanceof o.InstancedInterleavedBuffer?(Lt.enableAttributeAndDivisor(c,g.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=g.meshPerAttribute*g.count)):Lt.enableAttribute(c),Pt.bindBuffer(Pt.ARRAY_BUFFER,v),Pt.vertexAttribPointer(c,m,f,d,y*g.array.BYTES_PER_ELEMENT,(r*y+_)*g.array.BYTES_PER_ELEMENT)}else h instanceof o.InstancedBufferAttribute?(Lt.enableAttributeAndDivisor(c,h.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=h.meshPerAttribute*h.count)):Lt.enableAttribute(c),Pt.bindBuffer(Pt.ARRAY_BUFFER,v),Pt.vertexAttribPointer(c,m,f,d,0,r*m*h.array.BYTES_PER_ELEMENT)}else if(void 0!==u){var b=u[l];if(void 0!==b)switch(b.length){case 2:Pt.vertexAttrib2fv(c,b);break;case 3:Pt.vertexAttrib3fv(c,b);break;case 4:Pt.vertexAttrib4fv(c,b);break;default:Pt.vertexAttrib1fv(c,b)}}}}Lt.disableUnusedAttributes()}function h(t,e){return Math.abs(e[0])-Math.abs(t[0])}function f(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.program&&e.material.program&&t.material.program!==e.material.program?t.material.program.id-e.material.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function p(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function d(t,e,n,r,i){var o,a;n.transparent?(o=Y,a=++K):(o=X,a=++q);var s=o[a];void 0!==s?(s.id=t.id,s.object=t,s.geometry=e,s.material=n,s.z=Ct.z,s.group=i):(s={id:t.id,object:t,geometry:e,material:n,z:Ct.z,group:i},o.push(s))}function m(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),xt.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),g(xt)}function v(t){return xt.center.set(0,0,0),xt.radius=.7071067811865476,xt.applyMatrix4(t.matrixWorld),g(xt)}function g(t){if(!yt.intersectsSphere(t))return!1;var e=_t.numPlanes;if(0===e)return!0;var n=$.clippingPlanes,r=t.center,i=-t.radius,o=0;do if(n[o].distanceToPoint(r)<i)return!1;while(++o!==e);return!0}function y(t,e){if(t.visible!==!1){if(t.layers.test(e.layers))if(t instanceof o.Light)W.push(t);else if(t instanceof o.Sprite)t.frustumCulled!==!1&&v(t)!==!0||J.push(t);else if(t instanceof o.LensFlare)Q.push(t);else if(t instanceof o.ImmediateRenderObject)$.sortObjects===!0&&(Ct.setFromMatrixPosition(t.matrixWorld),Ct.applyProjection(Et)),d(t,null,t.material,Ct.z,null);else if((t instanceof o.Mesh||t instanceof o.Line||t instanceof o.Points)&&(t instanceof o.SkinnedMesh&&t.skeleton.update(),t.frustumCulled===!1||m(t)===!0)){var n=t.material;if(n.visible===!0){$.sortObjects===!0&&(Ct.setFromMatrixPosition(t.matrixWorld),Ct.applyProjection(Et));var r=Dt.update(t);if(n instanceof o.MultiMaterial)for(var i=r.groups,a=n.materials,s=0,u=i.length;s<u;s++){var l=i[s],c=a[l.materialIndex];c.visible===!0&&d(t,r,c,Ct.z,l)}else d(t,r,n,Ct.z,null)}}for(var h=t.children,s=0,u=h.length;s<u;s++)y(h[s],e)}}function _(t,e,n,r){for(var i=0,a=t.length;i<a;i++){var s=t[i],u=s.object,l=s.geometry,c=void 0===r?s.material:r,h=s.group;if(u.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,u.matrixWorld),u.normalMatrix.getNormalMatrix(u.modelViewMatrix),u instanceof o.ImmediateRenderObject){w(c);var f=x(e,n,c,u);it="",u.render(function(t){$.renderBufferImmediate(t,f,c)})}else $.renderBufferDirect(e,n,l,c,u,h)}}function b(t,e,n){var r=It.get(t),i=jt.getParameters(t,St,e,_t.numPlanes,n),a=jt.getProgramCode(t,i),u=r.program,c=!0;if(void 0===u)t.addEventListener("dispose",s);else if(u.code!==a)l(t);else{if(void 0!==i.shaderID)return;c=!1}if(c){if(i.shaderID){var h=o.ShaderLib[i.shaderID];r.__webglShader={name:t.type,uniforms:o.UniformsUtils.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else r.__webglShader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.__webglShader=r.__webglShader,u=jt.acquireProgram(t,i,a),r.program=u,t.program=u}var f=u.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<$.maxMorphTargets;p++)f["morphTarget"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var p=0;p<$.maxMorphNormals;p++)f["morphNormal"+p]>=0&&t.numSupportedMorphNormals++}var d=r.__webglShader.uniforms;(t instanceof o.ShaderMaterial||t instanceof o.RawShaderMaterial)&&t.clipping!==!0||(r.numClippingPlanes=_t.numPlanes,d.clippingPlanes=_t.uniform),t.lights&&(r.lightsHash=St.hash,d.ambientLightColor.value=St.ambient,d.directionalLights.value=St.directional,d.spotLights.value=St.spot,d.pointLights.value=St.point,d.hemisphereLights.value=St.hemi,d.directionalShadowMap.value=St.directionalShadowMap,d.directionalShadowMatrix.value=St.directionalShadowMatrix,d.spotShadowMap.value=St.spotShadowMap,d.spotShadowMatrix.value=St.spotShadowMatrix,d.pointShadowMap.value=St.pointShadowMap,d.pointShadowMatrix.value=St.pointShadowMatrix);var m=r.program.getUniforms(),v=o.WebGLUniforms.seqWithValue(m.seq,d);r.uniformsList=v,r.dynamicUniforms=o.WebGLUniforms.splitDynamic(v,d)}function w(t){t.side!==o.DoubleSide?Lt.enable(Pt.CULL_FACE):Lt.disable(Pt.CULL_FACE),Lt.setFlipSided(t.side===o.BackSide),t.transparent===!0?Lt.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):Lt.setBlending(o.NoBlending),Lt.setDepthFunc(t.depthFunc),Lt.setDepthTest(t.depthTest),Lt.setDepthWrite(t.depthWrite),Lt.setColorWrite(t.colorWrite),Lt.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function x(t,e,n,r){lt=0;var i=It.get(n);if(bt){if(wt||t!==ot){var a=t===ot&&n.id===rt;_t.setState(n.clippingPlanes,n.clipShadows,t,i,a)}void 0!==i.numClippingPlanes&&i.numClippingPlanes!==_t.numPlanes&&(n.needsUpdate=!0)}void 0===i.program&&(n.needsUpdate=!0),void 0!==i.lightsHash&&i.lightsHash!==St.hash&&(n.needsUpdate=!0),n.needsUpdate&&(b(n,e,r),n.needsUpdate=!1);var s=!1,u=!1,l=!1,c=i.program,h=c.getUniforms(),f=i.__webglShader.uniforms;if(c.id!==tt&&(Pt.useProgram(c.program),tt=c.id,s=!0,u=!0,l=!0),n.id!==rt&&(rt=n.id,u=!0),s||t!==ot){if(h.set(Pt,t,"projectionMatrix"),Rt.logarithmicDepthBuffer&&h.setValue(Pt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==ot&&(ot=t,u=!0,l=!0),n instanceof o.ShaderMaterial||n instanceof o.MeshPhongMaterial||n instanceof o.MeshStandardMaterial||n.envMap){var p=h.map.cameraPosition;void 0!==p&&p.setValue(Pt,Ct.setFromMatrixPosition(t.matrixWorld))}(n instanceof o.MeshPhongMaterial||n instanceof o.MeshLambertMaterial||n instanceof o.MeshBasicMaterial||n instanceof o.MeshStandardMaterial||n instanceof o.ShaderMaterial||n.skinning)&&h.setValue(Pt,"viewMatrix",t.matrixWorldInverse),h.set(Pt,$,"toneMappingExposure"),h.set(Pt,$,"toneMappingWhitePoint")}if(n.skinning){h.setOptional(Pt,r,"bindMatrix"),h.setOptional(Pt,r,"bindMatrixInverse");var d=r.skeleton;d&&(Rt.floatVertexTextures&&d.useVertexTexture?(h.set(Pt,d,"boneTexture"),h.set(Pt,d,"boneTextureWidth"),h.set(Pt,d,"boneTextureHeight")):h.setOptional(Pt,d,"boneMatrices"))}u&&(n.lights&&L(f,l),e&&n.fog&&P(f,e),(n instanceof o.MeshBasicMaterial||n instanceof o.MeshLambertMaterial||n instanceof o.MeshPhongMaterial||n instanceof o.MeshStandardMaterial||n instanceof o.MeshDepthMaterial)&&E(f,n),n instanceof o.LineBasicMaterial?C(f,n):n instanceof o.LineDashedMaterial?(C(f,n),S(f,n)):n instanceof o.PointsMaterial?M(f,n):n instanceof o.MeshLambertMaterial?T(f,n):n instanceof o.MeshPhongMaterial?O(f,n):n instanceof o.MeshPhysicalMaterial?R(f,n):n instanceof o.MeshStandardMaterial?A(f,n):n instanceof o.MeshDepthMaterial?n.displacementMap&&(f.displacementMap.value=n.displacementMap,f.displacementScale.value=n.displacementScale,f.displacementBias.value=n.displacementBias):n instanceof o.MeshNormalMaterial&&(f.opacity.value=n.opacity),o.WebGLUniforms.upload(Pt,i.uniformsList,f,$)),h.set(Pt,r,"modelViewMatrix"),h.set(Pt,r,"normalMatrix"),h.setValue(Pt,"modelMatrix",r.matrixWorld);var m=i.dynamicUniforms;return null!==m&&(o.WebGLUniforms.evalDynamic(m,f,r,t),o.WebGLUniforms.upload(Pt,m,f,$)),c}function E(t,e){t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),t.map.value=e.map,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var n;if(e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n){n instanceof o.WebGLRenderTarget&&(n=n.texture);var r=n.offset,i=n.repeat;t.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap instanceof o.CubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}function C(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function S(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function M(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*dt,t.scale.value=.5*N.clientHeight,t.map.value=e.map,null!==e.map){var n=e.map.offset,r=e.map.repeat;t.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}}function P(t,e){t.fogColor.value=e.color,e instanceof o.Fog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e instanceof o.FogExp2&&(t.fogDensity.value=e.density)}function T(t,e){e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function O(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function A(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function R(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,A(t,e)}function L(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function I(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n];i.castShadow&&(St.shadows[e++]=i)}St.shadows.length=e}function k(t,e){var n,r,i,a,s,u,l,c=0,h=0,f=0,p=e.matrixWorldInverse,d=0,m=0,v=0,g=0;for(n=0,r=t.length;n<r;n++)if(i=t[n],a=i.color,s=i.intensity,u=i.distance,l=i.shadow&&i.shadow.map?i.shadow.map.texture:null,i instanceof o.AmbientLight)c+=a.r*s,h+=a.g*s,f+=a.b*s;else if(i instanceof o.DirectionalLight){var y=Nt.get(i);y.color.copy(i.color).multiplyScalar(i.intensity),y.direction.setFromMatrixPosition(i.matrixWorld),Ct.setFromMatrixPosition(i.target.matrixWorld),y.direction.sub(Ct),y.direction.transformDirection(p),y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),St.directionalShadowMap[d]=l,St.directionalShadowMatrix[d]=i.shadow.matrix,St.directional[d++]=y}else if(i instanceof o.SpotLight){var y=Nt.get(i);y.position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(p),y.color.copy(a).multiplyScalar(s),y.distance=u,y.direction.setFromMatrixPosition(i.matrixWorld),Ct.setFromMatrixPosition(i.target.matrixWorld),y.direction.sub(Ct),y.direction.transformDirection(p),y.coneCos=Math.cos(i.angle),y.penumbraCos=Math.cos(i.angle*(1-i.penumbra)),y.decay=0===i.distance?0:i.decay,y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),St.spotShadowMap[v]=l,St.spotShadowMatrix[v]=i.shadow.matrix,St.spot[v++]=y}else if(i instanceof o.PointLight){var y=Nt.get(i);y.position.setFromMatrixPosition(i.matrixWorld),y.position.applyMatrix4(p),y.color.copy(i.color).multiplyScalar(i.intensity),y.distance=i.distance,y.decay=0===i.distance?0:i.decay,y.shadow=i.castShadow,i.castShadow&&(y.shadowBias=i.shadow.bias,y.shadowRadius=i.shadow.radius,y.shadowMapSize=i.shadow.mapSize),St.pointShadowMap[m]=l,void 0===St.pointShadowMatrix[m]&&(St.pointShadowMatrix[m]=new o.Matrix4),Ct.setFromMatrixPosition(i.matrixWorld).negate(),St.pointShadowMatrix[m].identity().setPosition(Ct),St.point[m++]=y}else if(i instanceof o.HemisphereLight){var y=Nt.get(i);y.direction.setFromMatrixPosition(i.matrixWorld),y.direction.transformDirection(p),y.direction.normalize(),y.skyColor.copy(i.color).multiplyScalar(s),y.groundColor.copy(i.groundColor).multiplyScalar(s),St.hemi[g++]=y}St.ambient[0]=c,St.ambient[1]=h,St.ambient[2]=f,St.directional.length=d,St.spot.length=v,St.point.length=m,St.hemi.length=g,St.hash=d+","+m+","+v+","+g+","+St.shadows.length}function D(){var t=lt;return t>=Rt.maxTextures&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+Rt.maxTextures),lt+=1,t}function j(t){var e;if(t===o.RepeatWrapping)return Pt.REPEAT;if(t===o.ClampToEdgeWrapping)return Pt.CLAMP_TO_EDGE;if(t===o.MirroredRepeatWrapping)return Pt.MIRRORED_REPEAT;if(t===o.NearestFilter)return Pt.NEAREST;if(t===o.NearestMipMapNearestFilter)return Pt.NEAREST_MIPMAP_NEAREST;if(t===o.NearestMipMapLinearFilter)return Pt.NEAREST_MIPMAP_LINEAR;if(t===o.LinearFilter)return Pt.LINEAR;if(t===o.LinearMipMapNearestFilter)return Pt.LINEAR_MIPMAP_NEAREST;if(t===o.LinearMipMapLinearFilter)return Pt.LINEAR_MIPMAP_LINEAR;if(t===o.UnsignedByteType)return Pt.UNSIGNED_BYTE;if(t===o.UnsignedShort4444Type)return Pt.UNSIGNED_SHORT_4_4_4_4;if(t===o.UnsignedShort5551Type)return Pt.UNSIGNED_SHORT_5_5_5_1;if(t===o.UnsignedShort565Type)return Pt.UNSIGNED_SHORT_5_6_5;if(t===o.ByteType)return Pt.BYTE;if(t===o.ShortType)return Pt.SHORT;if(t===o.UnsignedShortType)return Pt.UNSIGNED_SHORT;if(t===o.IntType)return Pt.INT;if(t===o.UnsignedIntType)return Pt.UNSIGNED_INT;if(t===o.FloatType)return Pt.FLOAT;if(e=At.get("OES_texture_half_float"),null!==e&&t===o.HalfFloatType)return e.HALF_FLOAT_OES;if(t===o.AlphaFormat)return Pt.ALPHA;if(t===o.RGBFormat)return Pt.RGB;if(t===o.RGBAFormat)return Pt.RGBA;if(t===o.LuminanceFormat)return Pt.LUMINANCE;if(t===o.LuminanceAlphaFormat)return Pt.LUMINANCE_ALPHA;if(t===o.DepthFormat)return Pt.DEPTH_COMPONENT;if(t===o.AddEquation)return Pt.FUNC_ADD;if(t===o.SubtractEquation)return Pt.FUNC_SUBTRACT;if(t===o.ReverseSubtractEquation)return Pt.FUNC_REVERSE_SUBTRACT;if(t===o.ZeroFactor)return Pt.ZERO;if(t===o.OneFactor)return Pt.ONE;if(t===o.SrcColorFactor)return Pt.SRC_COLOR;if(t===o.OneMinusSrcColorFactor)return Pt.ONE_MINUS_SRC_COLOR;if(t===o.SrcAlphaFactor)return Pt.SRC_ALPHA;if(t===o.OneMinusSrcAlphaFactor)return Pt.ONE_MINUS_SRC_ALPHA;if(t===o.DstAlphaFactor)return Pt.DST_ALPHA;if(t===o.OneMinusDstAlphaFactor)return Pt.ONE_MINUS_DST_ALPHA;if(t===o.DstColorFactor)return Pt.DST_COLOR;if(t===o.OneMinusDstColorFactor)return Pt.ONE_MINUS_DST_COLOR;if(t===o.SrcAlphaSaturateFactor)return Pt.SRC_ALPHA_SATURATE;if(e=At.get("WEBGL_compressed_texture_s3tc"),null!==e){if(t===o.RGB_S3TC_DXT1_Format)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===o.RGBA_S3TC_DXT1_Format)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===o.RGBA_S3TC_DXT3_Format)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===o.RGBA_S3TC_DXT5_Format)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e=At.get("WEBGL_compressed_texture_pvrtc"),null!==e){if(t===o.RGB_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===o.RGB_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===o.RGBA_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===o.RGBA_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e=At.get("WEBGL_compressed_texture_etc1"),null!==e&&t===o.RGB_ETC1_Format)return e.COMPRESSED_RGB_ETC1_WEBGL;if(e=At.get("EXT_blend_minmax"),null!==e){if(t===o.MinEquation)return e.MIN_EXT;if(t===o.MaxEquation)return e.MAX_EXT}return 0}console.log("THREE.WebGLRenderer",o.REVISION),t=t||{};var N=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),B=void 0!==t.context?t.context:null,F=void 0!==t.alpha&&t.alpha,U=void 0===t.depth||t.depth,V=void 0===t.stencil||t.stencil,z=void 0!==t.antialias&&t.antialias,G=void 0===t.premultipliedAlpha||t.premultipliedAlpha,H=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,W=[],X=[],q=-1,Y=[],K=-1,Z=new Float32Array(8),J=[],Q=[];this.domElement=N,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=o.LinearToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var $=this,tt=null,et=null,nt=null,rt=-1,it="",ot=null,at=new o.Vector4,st=null,ut=new o.Vector4,lt=0,ct=new o.Color(0),ht=0,ft=N.width,pt=N.height,dt=1,mt=new o.Vector4(0,0,ft,pt),vt=!1,gt=new o.Vector4(0,0,ft,pt),yt=new o.Frustum,_t=new o.WebGLClipping,bt=!1,wt=!1,xt=new o.Sphere,Et=new o.Matrix4,Ct=new o.Vector3,St={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Mt={calls:0,vertices:0,faces:0,points:0};this.info={render:Mt,memory:{geometries:0,textures:0},programs:null};var Pt;try{var Tt={alpha:F,depth:U,stencil:V,antialias:z,premultipliedAlpha:G,preserveDrawingBuffer:H};if(Pt=B||N.getContext("webgl",Tt)||N.getContext("experimental-webgl",Tt),null===Pt)throw null!==N.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===Pt.getShaderPrecisionFormat&&(Pt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),N.addEventListener("webglcontextlost",a,!1)}catch(Ot){console.error("THREE.WebGLRenderer: "+Ot)}var At=new o.WebGLExtensions(Pt);At.get("WEBGL_depth_texture"),At.get("OES_texture_float"),At.get("OES_texture_float_linear"),At.get("OES_texture_half_float"),At.get("OES_texture_half_float_linear"),At.get("OES_standard_derivatives"),At.get("ANGLE_instanced_arrays"),At.get("OES_element_index_uint")&&(o.BufferGeometry.MaxIndex=4294967296);var Rt=new o.WebGLCapabilities(Pt,At,t),Lt=new o.WebGLState(Pt,At,j),It=new o.WebGLProperties,kt=new o.WebGLTextures(Pt,At,Lt,It,Rt,j,this.info),Dt=new o.WebGLObjects(Pt,It,this.info),jt=new o.WebGLPrograms(this,Rt),Nt=new o.WebGLLights;this.info.programs=jt.programs;var Bt=new o.WebGLBufferRenderer(Pt,At,Mt),Ft=new o.WebGLIndexedBufferRenderer(Pt,At,Mt),Ut=new o.OrthographicCamera((-1),1,1,(-1),0,1),Vt=new o.PerspectiveCamera,zt=new o.Mesh(new o.PlaneBufferGeometry(2,2),new o.MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1})),Gt=o.ShaderLib.cube,Ht=new o.Mesh(new o.BoxBufferGeometry(5,5,5),new o.ShaderMaterial({uniforms:Gt.uniforms,vertexShader:Gt.vertexShader,fragmentShader:Gt.fragmentShader,side:o.BackSide,depthTest:!1,depthWrite:!1,fog:!1}));r(),this.context=Pt,this.capabilities=Rt,this.extensions=At,this.properties=It,this.state=Lt;var Wt=new o.WebGLShadowMap(this,St,Dt,Rt);this.shadowMap=Wt;var Xt=new o.SpritePlugin(this,J),qt=new o.LensFlarePlugin(this,Q);this.getContext=function(){return Pt},this.getContextAttributes=function(){return Pt.getContextAttributes()},this.forceContextLoss=function(){At.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return Rt.getMaxAnisotropy()},this.getPrecision=function(){return Rt.precision},this.getPixelRatio=function(){return dt},this.setPixelRatio=function(t){void 0!==t&&(dt=t,this.setSize(gt.z,gt.w,!1))},this.getSize=function(){return{width:ft,height:pt}},this.setSize=function(t,e,n){ft=t,pt=e,N.width=t*dt,N.height=e*dt,n!==!1&&(N.style.width=t+"px",N.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,n,r){Lt.viewport(gt.set(t,e,n,r))},this.setScissor=function(t,e,n,r){Lt.scissor(mt.set(t,e,n,r))},this.setScissorTest=function(t){Lt.setScissorTest(vt=t)},this.getClearColor=function(){return ct},this.setClearColor=function(t,e){ct.set(t),ht=void 0!==e?e:1,n(ct.r,ct.g,ct.b,ht)},this.getClearAlpha=function(){return ht},this.setClearAlpha=function(t){ht=t,n(ct.r,ct.g,ct.b,ht)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=Pt.COLOR_BUFFER_BIT),(void 0===e||e)&&(r|=Pt.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=Pt.STENCIL_BUFFER_BIT),Pt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,r){this.setRenderTarget(t),this.clear(e,n,r)},this.resetGLState=i,this.dispose=function(){Y=[],K=-1,X=[],q=-1,N.removeEventListener("webglcontextlost",a,!1)},this.renderBufferImmediate=function(t,e,n){Lt.initAttributes();var r=It.get(t);t.hasPositions&&!r.position&&(r.position=Pt.createBuffer()),t.hasNormals&&!r.normal&&(r.normal=Pt.createBuffer()),t.hasUvs&&!r.uv&&(r.uv=Pt.createBuffer()),t.hasColors&&!r.color&&(r.color=Pt.createBuffer());var i=e.getAttributes();if(t.hasPositions&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,r.position),Pt.bufferData(Pt.ARRAY_BUFFER,t.positionArray,Pt.DYNAMIC_DRAW),Lt.enableAttribute(i.position),Pt.vertexAttribPointer(i.position,3,Pt.FLOAT,!1,0,0)),t.hasNormals){if(Pt.bindBuffer(Pt.ARRAY_BUFFER,r.normal),"MeshPhongMaterial"!==n.type&&"MeshStandardMaterial"!==n.type&&"MeshPhysicalMaterial"!==n.type&&n.shading===o.FlatShading)for(var a=0,s=3*t.count;a<s;a+=9){var u=t.normalArray,l=(u[a+0]+u[a+3]+u[a+6])/3,c=(u[a+1]+u[a+4]+u[a+7])/3,h=(u[a+2]+u[a+5]+u[a+8])/3;u[a+0]=l,u[a+1]=c,u[a+2]=h,u[a+3]=l,u[a+4]=c,u[a+5]=h,u[a+6]=l,u[a+7]=c,u[a+8]=h}Pt.bufferData(Pt.ARRAY_BUFFER,t.normalArray,Pt.DYNAMIC_DRAW),Lt.enableAttribute(i.normal),Pt.vertexAttribPointer(i.normal,3,Pt.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,r.uv),Pt.bufferData(Pt.ARRAY_BUFFER,t.uvArray,Pt.DYNAMIC_DRAW),Lt.enableAttribute(i.uv),Pt.vertexAttribPointer(i.uv,2,Pt.FLOAT,!1,0,0)),t.hasColors&&n.vertexColors!==o.NoColors&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,r.color),Pt.bufferData(Pt.ARRAY_BUFFER,t.colorArray,Pt.DYNAMIC_DRAW),Lt.enableAttribute(i.color),Pt.vertexAttribPointer(i.color,3,Pt.FLOAT,!1,0,0)),Lt.disableUnusedAttributes(),Pt.drawArrays(Pt.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,n,r,i,a,s){w(i);var u=x(t,n,i,a),l=!1,f=r.id+"_"+u.id+"_"+i.wireframe;f!==it&&(it=f,l=!0);var p=a.morphTargetInfluences;if(void 0!==p){for(var d=[],m=0,v=p.length;m<v;m++){var g=p[m];d.push([g,m])}d.sort(h),d.length>8&&(d.length=8);for(var y=r.morphAttributes,m=0,v=d.length;m<v;m++){var g=d[m];if(Z[m]=g[0],0!==g[0]){var _=g[1];i.morphTargets===!0&&y.position&&r.addAttribute("morphTarget"+m,y.position[_]),i.morphNormals===!0&&y.normal&&r.addAttribute("morphNormal"+m,y.normal[_])}else i.morphTargets===!0&&r.removeAttribute("morphTarget"+m),i.morphNormals===!0&&r.removeAttribute("morphNormal"+m)}u.getUniforms().setValue(Pt,"morphTargetInfluences",Z),l=!0}var _=r.index,b=r.attributes.position;i.wireframe===!0&&(_=Dt.getWireframeAttribute(r));var E;null!==_?(E=Ft,E.setIndex(_)):E=Bt,l&&(c(i,u,r),null!==_&&Pt.bindBuffer(Pt.ELEMENT_ARRAY_BUFFER,Dt.getAttributeBuffer(_)));var C=0,S=1/0;null!==_?S=_.count:void 0!==b&&(S=b.count);var M=r.drawRange.start,P=r.drawRange.count,T=null!==s?s.start:0,O=null!==s?s.count:1/0,A=Math.max(C,M,T),R=Math.min(C+S,M+P,T+O)-1,L=Math.max(0,R-A+1);if(a instanceof o.Mesh)if(i.wireframe===!0)Lt.setLineWidth(i.wireframeLinewidth*e()),E.setMode(Pt.LINES);else switch(a.drawMode){case o.TrianglesDrawMode:E.setMode(Pt.TRIANGLES);break;case o.TriangleStripDrawMode:E.setMode(Pt.TRIANGLE_STRIP);break;case o.TriangleFanDrawMode:E.setMode(Pt.TRIANGLE_FAN)}else if(a instanceof o.Line){var I=i.linewidth;void 0===I&&(I=1),Lt.setLineWidth(I*e()),a instanceof o.LineSegments?E.setMode(Pt.LINES):E.setMode(Pt.LINE_STRIP)}else a instanceof o.Points&&E.setMode(Pt.POINTS);r instanceof o.InstancedBufferGeometry?r.maxInstancedCount>0&&E.renderInstances(r,A,L):E.render(A,L)},this.render=function(t,e,r,i){if(e instanceof o.Camera==!1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var a=t.fog;it="",rt=-1,ot=null,t.autoUpdate===!0&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),Et.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),yt.setFromMatrix(Et),W.length=0,q=-1,K=-1,J.length=0,Q.length=0,wt=this.localClippingEnabled,bt=_t.init(this.clippingPlanes,wt,e),y(t,e),X.length=q+1,Y.length=K+1,$.sortObjects===!0&&(X.sort(f),Y.sort(p)),bt&&_t.beginShadows(),I(W),Wt.render(t,e),k(W,e),bt&&_t.endShadows(),Mt.calls=0,Mt.vertices=0,Mt.faces=0,Mt.points=0,void 0===r&&(r=null),this.setRenderTarget(r);var s=t.background;if(null===s?n(ct.r,ct.g,ct.b,ht):s instanceof o.Color&&n(s.r,s.g,s.b,1),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),s instanceof o.CubeTexture?(Vt.projectionMatrix.copy(e.projectionMatrix),Vt.matrixWorld.extractRotation(e.matrixWorld),Vt.matrixWorldInverse.getInverse(Vt.matrixWorld),Ht.material.uniforms.tCube.value=s,Ht.modelViewMatrix.multiplyMatrices(Vt.matrixWorldInverse,Ht.matrixWorld),Dt.update(Ht),$.renderBufferDirect(Vt,null,Ht.geometry,Ht.material,Ht,null)):s instanceof o.Texture&&(zt.material.map=s,Dt.update(zt),$.renderBufferDirect(Ut,null,zt.geometry,zt.material,zt,null)),t.overrideMaterial){var u=t.overrideMaterial;_(X,e,a,u),_(Y,e,a,u)}else Lt.setBlending(o.NoBlending),_(X,e,a),_(Y,e,a);Xt.render(t,e),qt.render(t,e,ut),r&&kt.updateRenderTargetMipmap(r),Lt.setDepthTest(!0),Lt.setDepthWrite(!0),Lt.setColorWrite(!0)},this.setFaceCulling=function(t,e){Lt.setCullFace(t),Lt.setFlipSided(e===o.FrontFaceDirectionCW)},this.allocTextureUnit=D,this.setTexture2D=function(){var t=!1;return function(e,n){e instanceof o.WebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),kt.setTexture2D(e,n)}}(),this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),kt.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e instanceof o.WebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e instanceof o.CubeTexture||Array.isArray(e.image)&&6===e.image.length?kt.setTextureCube(e,n):kt.setTextureCubeDynamic(e,n)}}(),this.getCurrentRenderTarget=function(){return et},this.setRenderTarget=function(t){et=t,t&&void 0===It.get(t).__webglFramebuffer&&kt.setupRenderTarget(t);var e,n=t instanceof o.WebGLRenderTargetCube;if(t){var r=It.get(t);e=n?r.__webglFramebuffer[t.activeCubeFace]:r.__webglFramebuffer,at.copy(t.scissor),st=t.scissorTest,ut.copy(t.viewport)}else e=null,at.copy(mt).multiplyScalar(dt),st=vt,ut.copy(gt).multiplyScalar(dt);if(nt!==e&&(Pt.bindFramebuffer(Pt.FRAMEBUFFER,e),nt=e),Lt.scissor(at),Lt.setScissorTest(st),Lt.viewport(ut),n){var i=It.get(t.texture);Pt.framebufferTexture2D(Pt.FRAMEBUFFER,Pt.COLOR_ATTACHMENT0,Pt.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,i.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,n,r,i,a){if(t instanceof o.WebGLRenderTarget==!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=It.get(t).__webglFramebuffer;if(s){var u=!1;s!==nt&&(Pt.bindFramebuffer(Pt.FRAMEBUFFER,s),u=!0);try{var l=t.texture;if(l.format!==o.RGBAFormat&&j(l.format)!==Pt.getParameter(Pt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l.type===o.UnsignedByteType||j(l.type)===Pt.getParameter(Pt.IMPLEMENTATION_COLOR_READ_TYPE)||l.type===o.FloatType&&At.get("WEBGL_color_buffer_float")||l.type===o.HalfFloatType&&At.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Pt.checkFramebufferStatus(Pt.FRAMEBUFFER)===Pt.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&Pt.readPixels(e,n,r,i,j(l.format),j(l.type),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&Pt.bindFramebuffer(Pt.FRAMEBUFFER,nt)}}}},o.WebGLRenderTarget=function(t,e,n){this.uuid=o.Math.generateUUID(),this.width=t,this.height=e,this.scissor=new o.Vector4(0,0,t,e),this.scissorTest=!1,this.viewport=new o.Vector4(0,0,t,e),n=n||{},void 0===n.minFilter&&(n.minFilter=o.LinearFilter),this.texture=new o.Texture((void 0),(void 0),n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=null},Object.assign(o.WebGLRenderTarget.prototype,o.EventDispatcher.prototype,{setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),o.WebGLRenderTargetCube=function(t,e,n){o.WebGLRenderTarget.call(this,t,e,n),this.activeCubeFace=0,this.activeMipMapLevel=0},o.WebGLRenderTargetCube.prototype=Object.create(o.WebGLRenderTarget.prototype),o.WebGLRenderTargetCube.prototype.constructor=o.WebGLRenderTargetCube,o.WebGLBufferRenderer=function(t,e,n){
function r(t){s=t}function i(e,r){t.drawArrays(s,e,r),n.calls++,n.vertices+=r,s===t.TRIANGLES&&(n.faces+=r/3)}function a(r){var i=e.get("ANGLE_instanced_arrays");if(null===i)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var a=r.attributes.position,u=0;a instanceof o.InterleavedBufferAttribute?(u=a.data.count,i.drawArraysInstancedANGLE(s,0,u,r.maxInstancedCount)):(u=a.count,i.drawArraysInstancedANGLE(s,0,u,r.maxInstancedCount)),n.calls++,n.vertices+=u*r.maxInstancedCount,s===t.TRIANGLES&&(n.faces+=r.maxInstancedCount*u/3)}var s;this.setMode=r,this.render=i,this.renderInstances=a},o.WebGLClipping=function(){function t(){c.value!==r&&(c.value=r,c.needsUpdate=i>0),n.numPlanes=i}function e(t,e,r,i){var o=null!==t?t.length:0,a=null;if(0!==o){if(a=c.value,i!==!0||null===a){var s=r+4*o,h=e.matrixWorldInverse;l.getNormalMatrix(h),(null===a||a.length<s)&&(a=new Float32Array(s));for(var f=0,p=r;f!==o;++f,p+=4)u.copy(t[f]).applyMatrix4(h,l),u.normal.toArray(a,p),a[p+3]=u.constant}c.value=a,c.needsUpdate=!0}return n.numPlanes=o,a}var n=this,r=null,i=0,a=!1,s=!1,u=new o.Plane,l=new o.Matrix3,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.init=function(t,n,o){var s=0!==t.length||n||0!==i||a;return a=n,r=e(t,o,0),i=t.length,s},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(n,o,u,l,h){if(!a||null===n||0===n.length||s&&!o)s?e(null):t();else{var f=s?0:i,p=4*f,d=l.clippingState||null;c.value=d,d=e(n,u,p,h);for(var m=0;m!==p;++m)d[m]=r[m];l.clippingState=d,this.numPlanes+=f}}},o.WebGLIndexedBufferRenderer=function(t,e,n){function r(t){s=t}function i(n){n.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(u=t.UNSIGNED_INT,l=4):(u=t.UNSIGNED_SHORT,l=2)}function o(e,r){t.drawElements(s,r,u,e*l),n.calls++,n.vertices+=r,s===t.TRIANGLES&&(n.faces+=r/3)}function a(r,i,o){var a=e.get("ANGLE_instanced_arrays");return null===a?void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(a.drawElementsInstancedANGLE(s,o,u,i*l,r.maxInstancedCount),n.calls++,n.vertices+=o*r.maxInstancedCount,void(s===t.TRIANGLES&&(n.faces+=r.maxInstancedCount*o/3)))}var s,u,l;this.setMode=r,this.setIndex=i,this.render=o,this.renderInstances=a},o.WebGLExtensions=function(t){var e={};this.get=function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=t.getExtension("WEBGL_compressed_texture_etc1");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r,r}},o.WebGLCapabilities=function(t,e,n){function r(){if(void 0!==o)return o;var n=e.get("EXT_texture_filter_anisotropic");return o=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o;this.getMaxAnisotropy=r,this.getMaxPrecision=i,this.precision=void 0!==n.precision?n.precision:"highp",this.logarithmicDepthBuffer=void 0!==n.logarithmicDepthBuffer&&n.logarithmicDepthBuffer,this.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.maxVertexTextures=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxCubemapSize=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),this.maxAttributes=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.maxVertexUniforms=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),this.maxVaryings=t.getParameter(t.MAX_VARYING_VECTORS),this.maxFragmentUniforms=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),this.vertexTextures=this.maxVertexTextures>0,this.floatFragmentTextures=!!e.get("OES_texture_float"),this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;var a=i(this.precision);a!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",a,"instead."),this.precision=a),this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!e.get("EXT_frag_depth"))},o.WebGLGeometries=function(t,e,n){function r(t){var e=t.geometry;if(void 0!==c[e.id])return c[e.id];e.addEventListener("dispose",i);var r;return e instanceof o.BufferGeometry?r=e:e instanceof o.Geometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new o.BufferGeometry).setFromObject(t)),r=e._bufferGeometry),c[e.id]=r,n.memory.geometries++,r}function i(t){var r=t.target,o=c[r.id];null!==o.index&&s(o.index),u(o.attributes),r.removeEventListener("dispose",i),delete c[r.id];var a=e.get(r);a.wireframe&&s(a.wireframe),e.delete(r);var l=e.get(o);l.wireframe&&s(l.wireframe),e.delete(o),n.memory.geometries--}function a(t){return t instanceof o.InterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function s(e){var n=a(e);void 0!==n&&(t.deleteBuffer(n),l(e))}function u(t){for(var e in t)s(t[e])}function l(t){t instanceof o.InterleavedBufferAttribute?e.delete(t.data):e.delete(t)}var c={};this.get=r},o.WebGLLights=function(){var t={};this.get=function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new o.Vector3,color:new o.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o.Vector2};break;case"SpotLight":n={position:new o.Vector3,direction:new o.Vector3,color:new o.Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o.Vector2};break;case"PointLight":n={position:new o.Vector3,color:new o.Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new o.Vector2};break;case"HemisphereLight":n={direction:new o.Vector3,skyColor:new o.Color,groundColor:new o.Color}}return t[e.id]=n,n}},o.WebGLObjects=function(t,e,n){function r(e){var n=h.get(e);e.geometry instanceof o.Geometry&&n.updateFromObject(e);var r=n.index,a=n.attributes;null!==r&&i(r,t.ELEMENT_ARRAY_BUFFER);for(var s in a)i(a[s],t.ARRAY_BUFFER);var u=n.morphAttributes;for(var s in u)for(var l=u[s],c=0,f=l.length;c<f;c++)i(l[c],t.ARRAY_BUFFER);return n}function i(t,n){var r=t instanceof o.InterleavedBufferAttribute?t.data:t,i=e.get(r);void 0===i.__webglBuffer?a(i,r,n):i.version!==r.version&&s(i,r,n)}function a(e,n,r){e.__webglBuffer=t.createBuffer(),t.bindBuffer(r,e.__webglBuffer);var i=n.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW;t.bufferData(r,n.array,i),e.version=n.version}function s(e,n,r){t.bindBuffer(r,e.__webglBuffer),n.dynamic===!1||n.updateRange.count===-1?t.bufferSubData(r,0,n.array):0===n.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(r,n.updateRange.offset*n.array.BYTES_PER_ELEMENT,n.array.subarray(n.updateRange.offset,n.updateRange.offset+n.updateRange.count)),n.updateRange.count=0),e.version=n.version}function u(t){return t instanceof o.InterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function l(n){var r=e.get(n);if(void 0!==r.wireframe)return r.wireframe;var a=[],s=n.index,u=n.attributes,l=u.position;if(null!==s)for(var h={},f=s.array,p=0,d=f.length;p<d;p+=3){var m=f[p+0],v=f[p+1],g=f[p+2];c(h,m,v)&&a.push(m,v),c(h,v,g)&&a.push(v,g),c(h,g,m)&&a.push(g,m)}else for(var f=u.position.array,p=0,d=f.length/3-1;p<d;p+=3){var m=p+0,v=p+1,g=p+2;a.push(m,v,v,g,g,m)}var y=l.count>65535?Uint32Array:Uint16Array,_=new o.BufferAttribute(new y(a),1);return i(_,t.ELEMENT_ARRAY_BUFFER),r.wireframe=_,_}function c(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];return void 0===i?(t[e]=[n],!0):i.indexOf(n)===-1&&(i.push(n),!0)}var h=new o.WebGLGeometries(t,e,n);this.getAttributeBuffer=u,this.getWireframeAttribute=l,this.update=r},o.WebGLProgram=function(){function t(t){switch(t){case o.LinearEncoding:return["Linear","( value )"];case o.sRGBEncoding:return["sRGB","( value )"];case o.RGBEEncoding:return["RGBE","( value )"];case o.RGBM7Encoding:return["RGBM","( value, 7.0 )"];case o.RGBM16Encoding:return["RGBM","( value, 16.0 )"];case o.RGBDEncoding:return["RGBD","( value, 256.0 )"];case o.GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function e(e,n){var r=t(n);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function n(e,n){var r=t(n);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function r(t,e){var n;switch(e){case o.LinearToneMapping:n="Linear";break;case o.ReinhardToneMapping:n="Reinhard";break;case o.Uncharted2ToneMapping:n="Uncharted2";break;case o.CineonToneMapping:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function i(t,e,n){t=t||{};var r=[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(u).join("\n")}function a(t){var e=[];for(var n in t){var r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join("\n")}function s(t,e,n){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<i;o++){var a=t.getActiveAttrib(e,o),s=a.name;r[s]=t.getAttribLocation(e,s)}return r}function u(t){return""!==t}function l(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function c(t){function e(t,e){var n=o.ShaderChunk[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return c(n)}var n=/#include +<([\w\d.]+)>/g;return t.replace(n,e)}function h(t){function e(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}var n=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(n,e)}var f=0;return function(t,p,d,m){var v=t.context,g=d.extensions,y=d.defines,_=d.__webglShader.vertexShader,b=d.__webglShader.fragmentShader,w="SHADOWMAP_TYPE_BASIC";m.shadowMapType===o.PCFShadowMap?w="SHADOWMAP_TYPE_PCF":m.shadowMapType===o.PCFSoftShadowMap&&(w="SHADOWMAP_TYPE_PCF_SOFT");var x="ENVMAP_TYPE_CUBE",E="ENVMAP_MODE_REFLECTION",C="ENVMAP_BLENDING_MULTIPLY";if(m.envMap){switch(d.envMap.mapping){case o.CubeReflectionMapping:case o.CubeRefractionMapping:x="ENVMAP_TYPE_CUBE";break;case o.CubeUVReflectionMapping:case o.CubeUVRefractionMapping:x="ENVMAP_TYPE_CUBE_UV";break;case o.EquirectangularReflectionMapping:case o.EquirectangularRefractionMapping:x="ENVMAP_TYPE_EQUIREC";break;case o.SphericalReflectionMapping:x="ENVMAP_TYPE_SPHERE"}switch(d.envMap.mapping){case o.CubeRefractionMapping:case o.EquirectangularRefractionMapping:E="ENVMAP_MODE_REFRACTION"}switch(d.combine){case o.MultiplyOperation:C="ENVMAP_BLENDING_MULTIPLY";break;case o.MixOperation:C="ENVMAP_BLENDING_MIX";break;case o.AddOperation:C="ENVMAP_BLENDING_ADD"}}var S,M,P=t.gammaFactor>0?t.gammaFactor:1,T=i(g,m,t.extensions),O=a(y),A=v.createProgram();d instanceof o.RawShaderMaterial?(S=[O].filter(u).join("\n"),M=[O].filter(u).join("\n")):(S=["precision "+m.precision+" float;","precision "+m.precision+" int;","#define SHADER_NAME "+d.__webglShader.name,O,m.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+P,"#define MAX_BONES "+m.maxBones,m.map?"#define USE_MAP":"",m.envMap?"#define USE_ENVMAP":"",m.envMap?"#define "+E:"",m.lightMap?"#define USE_LIGHTMAP":"",m.aoMap?"#define USE_AOMAP":"",m.emissiveMap?"#define USE_EMISSIVEMAP":"",m.bumpMap?"#define USE_BUMPMAP":"",m.normalMap?"#define USE_NORMALMAP":"",m.displacementMap&&m.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",m.specularMap?"#define USE_SPECULARMAP":"",m.roughnessMap?"#define USE_ROUGHNESSMAP":"",m.metalnessMap?"#define USE_METALNESSMAP":"",m.alphaMap?"#define USE_ALPHAMAP":"",m.vertexColors?"#define USE_COLOR":"",m.flatShading?"#define FLAT_SHADED":"",m.skinning?"#define USE_SKINNING":"",m.useVertexTexture?"#define BONE_TEXTURE":"",m.morphTargets?"#define USE_MORPHTARGETS":"",m.morphNormals&&m.flatShading===!1?"#define USE_MORPHNORMALS":"",m.doubleSided?"#define DOUBLE_SIDED":"",m.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+m.numClippingPlanes,m.shadowMapEnabled?"#define USE_SHADOWMAP":"",m.shadowMapEnabled?"#define "+w:"",m.sizeAttenuation?"#define USE_SIZEATTENUATION":"",m.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",m.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(u).join("\n"),M=[T,"precision "+m.precision+" float;","precision "+m.precision+" int;","#define SHADER_NAME "+d.__webglShader.name,O,m.alphaTest?"#define ALPHATEST "+m.alphaTest:"","#define GAMMA_FACTOR "+P,m.useFog&&m.fog?"#define USE_FOG":"",m.useFog&&m.fogExp?"#define FOG_EXP2":"",m.map?"#define USE_MAP":"",m.envMap?"#define USE_ENVMAP":"",m.envMap?"#define "+x:"",m.envMap?"#define "+E:"",m.envMap?"#define "+C:"",m.lightMap?"#define USE_LIGHTMAP":"",m.aoMap?"#define USE_AOMAP":"",m.emissiveMap?"#define USE_EMISSIVEMAP":"",m.bumpMap?"#define USE_BUMPMAP":"",m.normalMap?"#define USE_NORMALMAP":"",m.specularMap?"#define USE_SPECULARMAP":"",m.roughnessMap?"#define USE_ROUGHNESSMAP":"",m.metalnessMap?"#define USE_METALNESSMAP":"",m.alphaMap?"#define USE_ALPHAMAP":"",m.vertexColors?"#define USE_COLOR":"",m.flatShading?"#define FLAT_SHADED":"",m.doubleSided?"#define DOUBLE_SIDED":"",m.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+m.numClippingPlanes,m.shadowMapEnabled?"#define USE_SHADOWMAP":"",m.shadowMapEnabled?"#define "+w:"",m.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",m.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",m.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",m.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",m.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",m.toneMapping!==o.NoToneMapping?"#define TONE_MAPPING":"",m.toneMapping!==o.NoToneMapping?o.ShaderChunk.tonemapping_pars_fragment:"",m.toneMapping!==o.NoToneMapping?r("toneMapping",m.toneMapping):"",m.outputEncoding||m.mapEncoding||m.envMapEncoding||m.emissiveMapEncoding?o.ShaderChunk.encodings_pars_fragment:"",m.mapEncoding?e("mapTexelToLinear",m.mapEncoding):"",m.envMapEncoding?e("envMapTexelToLinear",m.envMapEncoding):"",m.emissiveMapEncoding?e("emissiveMapTexelToLinear",m.emissiveMapEncoding):"",m.outputEncoding?n("linearToOutputTexel",m.outputEncoding):"",m.depthPacking?"#define DEPTH_PACKING "+d.depthPacking:"","\n"].filter(u).join("\n")),_=c(_,m),_=l(_,m),b=c(b,m),b=l(b,m),d instanceof o.ShaderMaterial==!1&&(_=h(_),b=h(b));var R=S+_,L=M+b,I=o.WebGLShader(v,v.VERTEX_SHADER,R),k=o.WebGLShader(v,v.FRAGMENT_SHADER,L);v.attachShader(A,I),v.attachShader(A,k),void 0!==d.index0AttributeName?v.bindAttribLocation(A,0,d.index0AttributeName):m.morphTargets===!0&&v.bindAttribLocation(A,0,"position"),v.linkProgram(A);var D=v.getProgramInfoLog(A),j=v.getShaderInfoLog(I),N=v.getShaderInfoLog(k),B=!0,F=!0;v.getProgramParameter(A,v.LINK_STATUS)===!1?(B=!1,console.error("THREE.WebGLProgram: shader error: ",v.getError(),"gl.VALIDATE_STATUS",v.getProgramParameter(A,v.VALIDATE_STATUS),"gl.getProgramInfoLog",D,j,N)):""!==D?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",D):""!==j&&""!==N||(F=!1),F&&(this.diagnostics={runnable:B,material:d,programLog:D,vertexShader:{log:j,prefix:S},fragmentShader:{log:N,prefix:M}}),v.deleteShader(I),v.deleteShader(k);var U;this.getUniforms=function(){return void 0===U&&(U=new o.WebGLUniforms(v,A,t)),U};var V;return this.getAttributes=function(){return void 0===V&&(V=s(v,A)),V},this.destroy=function(){v.deleteProgram(A),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=f++,this.code=p,this.usedTimes=1,this.program=A,this.vertexShader=I,this.fragmentShader=k,this}}(),o.WebGLPrograms=function(t,e){function n(t){if(e.floatVertexTextures&&t&&t.skeleton&&t.skeleton.useVertexTexture)return 1024;var n=e.maxVertexUniforms,r=Math.floor((n-20)/4),i=r;return void 0!==t&&t instanceof o.SkinnedMesh&&(i=Math.min(t.skeleton.bones.length,i),i<t.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+t.skeleton.bones.length+", this GPU supports just "+i+" (try OpenGL instead of ANGLE)")),i}function r(t,e){var n;return t?t instanceof o.Texture?n=t.encoding:t instanceof o.WebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=o.LinearEncoding,n===o.LinearEncoding&&e&&(n=o.GammaEncoding),n}var i=[],a={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},s=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","depthPacking"];this.getParameters=function(i,s,u,l,c){var h=a[i.type],f=n(c),p=t.getPrecision();null!==i.precision&&(p=e.getMaxPrecision(i.precision),p!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",p,"instead."));var d=t.getCurrentRenderTarget(),m={shaderID:h,precision:p,supportsVertexTextures:e.vertexTextures,outputEncoding:r(d?d.texture:null,t.gammaOutput),map:!!i.map,mapEncoding:r(i.map,t.gammaInput),envMap:!!i.envMap,envMapMode:i.envMap&&i.envMap.mapping,envMapEncoding:r(i.envMap,t.gammaInput),envMapCubeUV:!!i.envMap&&(i.envMap.mapping===o.CubeUVReflectionMapping||i.envMap.mapping===o.CubeUVRefractionMapping),lightMap:!!i.lightMap,aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:r(i.emissiveMap,t.gammaInput),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,combine:i.combine,vertexColors:i.vertexColors,fog:!!u,useFog:i.fog,fogExp:u instanceof o.FogExp2,flatShading:i.shading===o.FlatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:i.skinning,maxBones:f,useVertexTexture:e.floatVertexTextures&&c&&c.skeleton&&c.skeleton.useVertexTexture,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numHemiLights:s.hemi.length,numClippingPlanes:l,shadowMapEnabled:t.shadowMap.enabled&&c.receiveShadow&&s.shadows.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===o.DoubleSide,flipSided:i.side===o.BackSide,depthPacking:void 0!==i.depthPacking&&i.depthPacking};return m},this.getProgramCode=function(t,e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);for(var i=0;i<s.length;i++)n.push(e[s[i]]);return n.join()},this.acquireProgram=function(e,n,r){for(var a,s=0,u=i.length;s<u;s++){var l=i[s];if(l.code===r){a=l,++a.usedTimes;break}}return void 0===a&&(a=new o.WebGLProgram(t,r,e,n),i.push(a)),a},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=i.indexOf(t);i[e]=i[i.length-1],i.pop(),t.destroy()}},this.programs=i},o.WebGLProperties=function(){var t={};this.get=function(e){var n=e.uuid,r=t[n];return void 0===r&&(r={},t[n]=r),r},this.delete=function(e){delete t[e.uuid]},this.clear=function(){t={}}},o.WebGLShader=function(){function t(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}return function(e,n,r){var i=e.createShader(n);return e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",n===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),t(r)),i}}(),o.WebGLShadowMap=function(t,e,n,r){function i(e,n,r,i){var a=e.geometry,s=null,u=b,l=e.customDepthMaterial;if(r&&(u=w,l=e.customDistanceMaterial),l)s=l;else{var c=!1;n.morphTargets&&(a instanceof o.BufferGeometry?c=a.morphAttributes&&a.morphAttributes.position&&a.morphAttributes.position.length>0:a instanceof o.Geometry&&(c=a.morphTargets&&a.morphTargets.length>0));var h=e instanceof o.SkinnedMesh&&n.skinning,f=0;c&&(f|=g),h&&(f|=y),s=u[f]}if(t.localClippingEnabled&&n.clipShadows===!0&&0!==n.clippingPlanes.length){var p=s.uuid,d=n.uuid,m=x[p];void 0===m&&(m={},x[p]=m);var v=m[d];void 0===v&&(v=s.clone(),m[d]=v),s=v}s.visible=n.visible,s.wireframe=n.wireframe;var _=n.side;return k.renderSingleSided&&_==o.DoubleSide&&(_=o.FrontSide),k.renderReverseSided&&(_===o.FrontSide?_=o.BackSide:_===o.BackSide&&(_=o.FrontSide)),s.side=_,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,r&&void 0!==s.uniforms.lightPos&&s.uniforms.lightPos.value.copy(i),s}function a(t,e,n){if(t.visible!==!1){if(t.layers.test(e.layers)&&(t instanceof o.Mesh||t instanceof o.Line||t instanceof o.Points)&&t.castShadow&&(t.frustumCulled===!1||l.intersectsObject(t)===!0)){var r=t.material;r.visible===!0&&(t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),v.push(t))}for(var i=t.children,s=0,u=i.length;s<u;s++)a(i[s],e,n)}}var s=t.context,u=t.state,l=new o.Frustum,c=new o.Matrix4,h=e.shadows,f=new o.Vector2,p=new o.Vector2(r.maxTextureSize,r.maxTextureSize),d=new o.Vector3,m=new o.Vector3,v=[],g=1,y=2,_=(g|y)+1,b=new Array(_),w=new Array(_),x={},E=[new o.Vector3(1,0,0),new o.Vector3((-1),0,0),new o.Vector3(0,0,1),new o.Vector3(0,0,(-1)),new o.Vector3(0,1,0),new o.Vector3(0,(-1),0)],C=[new o.Vector3(0,1,0),new o.Vector3(0,1,0),new o.Vector3(0,1,0),new o.Vector3(0,1,0),new o.Vector3(0,0,1),new o.Vector3(0,0,(-1))],S=[new o.Vector4,new o.Vector4,new o.Vector4,new o.Vector4,new o.Vector4,new o.Vector4],M=new o.MeshDepthMaterial;M.depthPacking=o.RGBADepthPacking,M.clipping=!0;for(var P=o.ShaderLib.distanceRGBA,T=o.UniformsUtils.clone(P.uniforms),O=0;O!==_;++O){var A=0!==(O&g),R=0!==(O&y),L=M.clone();L.morphTargets=A,L.skinning=R,b[O]=L;var I=new o.ShaderMaterial({defines:{USE_SHADOWMAP:""},uniforms:T,vertexShader:P.vertexShader,fragmentShader:P.fragmentShader,morphTargets:A,skinning:R,clipping:!0});w[O]=I}var k=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=o.PCFShadowMap,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(e,r){if(k.enabled!==!1&&(k.autoUpdate!==!1||k.needsUpdate!==!1)&&0!==h.length){u.clearColor(1,1,1,1),u.disable(s.BLEND),u.setDepthTest(!0),u.setScissorTest(!1);for(var g,y,_=0,b=h.length;_<b;_++){var w=h[_],x=w.shadow;if(void 0!==x){var M=x.camera;if(f.copy(x.mapSize),f.min(p),w instanceof o.PointLight){g=6,y=!0;var P=f.x,T=f.y;S[0].set(2*P,T,P,T),S[1].set(0,T,P,T),S[2].set(3*P,T,P,T),S[3].set(P,T,P,T),S[4].set(3*P,0,P,T),S[5].set(P,0,P,T),f.x*=4,f.y*=2}else g=1,y=!1;if(null===x.map){var O={minFilter:o.NearestFilter,magFilter:o.NearestFilter,format:o.RGBAFormat};x.map=new o.WebGLRenderTarget(f.x,f.y,O),M.updateProjectionMatrix()}x instanceof o.SpotLightShadow&&x.update(w);var A=x.map,R=x.matrix;m.setFromMatrixPosition(w.matrixWorld),M.position.copy(m),t.setRenderTarget(A),t.clear();for(var L=0;L<g;L++){if(y){d.copy(M.position),d.add(E[L]),M.up.copy(C[L]),M.lookAt(d);var I=S[L];u.viewport(I)}else d.setFromMatrixPosition(w.target.matrixWorld),M.lookAt(d);M.updateMatrixWorld(),M.matrixWorldInverse.getInverse(M.matrixWorld),R.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),R.multiply(M.projectionMatrix),R.multiply(M.matrixWorldInverse),c.multiplyMatrices(M.projectionMatrix,M.matrixWorldInverse),l.setFromMatrix(c),v.length=0,a(e,r,M);for(var D=0,j=v.length;D<j;D++){var N=v[D],B=n.update(N),F=N.material;if(F instanceof o.MultiMaterial)for(var U=B.groups,V=F.materials,z=0,G=U.length;z<G;z++){var H=U[z],W=V[H.materialIndex];if(W.visible===!0){var X=i(N,W,y,m);t.renderBufferDirect(M,null,B,X,N,H)}}else{var X=i(N,F,y,m);t.renderBufferDirect(M,null,B,X,N,null)}}}}else console.warn("THREE.WebGLShadowMap:",w,"has no shadow.")}var q=t.getClearColor(),Y=t.getClearAlpha();t.setClearColor(q,Y),k.needsUpdate=!1}}},o.WebGLState=function(t,e,n){function r(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var a=0;a<r;a++)t.texImage2D(n+a,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i);return o}var i=this;this.buffers={color:new o.WebGLColorBuffer(t,this),depth:new o.WebGLDepthBuffer(t,this),stencil:new o.WebGLStencilBuffer(t,this)};var a=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=new Uint8Array(a),u=new Uint8Array(a),l=new Uint8Array(a),c={},h=null,f=null,p=null,d=null,m=null,v=null,g=null,y=null,_=!1,b=null,w=null,x=null,E=null,C=null,S=null,M=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),P=null,T={},O=new o.Vector4,A=new o.Vector4,R={};R[t.TEXTURE_2D]=r(t.TEXTURE_2D,t.TEXTURE_2D,1),R[t.TEXTURE_CUBE_MAP]=r(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),this.init=function(){this.clearColor(0,0,0,1),this.clearDepth(1),this.clearStencil(0),this.enable(t.DEPTH_TEST),this.setDepthFunc(o.LessEqualDepth),this.setFlipSided(!1),this.setCullFace(o.CullFaceBack),this.enable(t.CULL_FACE),this.enable(t.BLEND),this.setBlending(o.NormalBlending)},this.initAttributes=function(){for(var t=0,e=s.length;t<e;t++)s[t]=0},this.enableAttribute=function(n){if(s[n]=1,0===u[n]&&(t.enableVertexAttribArray(n),u[n]=1),0!==l[n]){var r=e.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(n,0),l[n]=0}},this.enableAttributeAndDivisor=function(e,n,r){s[e]=1,0===u[e]&&(t.enableVertexAttribArray(e),u[e]=1),l[e]!==n&&(r.vertexAttribDivisorANGLE(e,n),l[e]=n)},this.disableUnusedAttributes=function(){for(var e=0,n=u.length;e!==n;++e)u[e]!==s[e]&&(t.disableVertexAttribArray(e),u[e]=0)},this.enable=function(e){c[e]!==!0&&(t.enable(e),c[e]=!0)},this.disable=function(e){c[e]!==!1&&(t.disable(e),c[e]=!1)},this.getCompressedTextureFormats=function(){if(null===h&&(h=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)h.push(n[r]);return h},this.setBlending=function(e,r,i,a,s,u,l,c){return e===o.NoBlending?(this.disable(t.BLEND),void(f=e)):(this.enable(t.BLEND),e===f&&c===_||(e===o.AdditiveBlending?c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===o.SubtractiveBlending?c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===o.MultiplyBlending?c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),f=e,_=c),void(e===o.CustomBlending?(s=s||r,u=u||i,l=l||a,r===p&&s===v||(t.blendEquationSeparate(n(r),n(s)),p=r,v=s),i===d&&a===m&&u===g&&l===y||(t.blendFuncSeparate(n(i),n(a),n(u),n(l)),d=i,m=a,g=u,y=l)):(p=null,d=null,m=null,v=null,g=null,y=null)))},this.setColorWrite=function(t){this.buffers.color.setMask(t)},this.setDepthTest=function(t){this.buffers.depth.setTest(t)},this.setDepthWrite=function(t){this.buffers.depth.setMask(t)},this.setDepthFunc=function(t){this.buffers.depth.setFunc(t)},this.setStencilTest=function(t){this.buffers.stencil.setTest(t)},this.setStencilWrite=function(t){this.buffers.stencil.setMask(t)},this.setStencilFunc=function(t,e,n){this.buffers.stencil.setFunc(t,e,n)},this.setStencilOp=function(t,e,n){this.buffers.stencil.setOp(t,e,n)},this.setFlipSided=function(e){b!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),b=e)},this.setCullFace=function(e){e!==o.CullFaceNone?(this.enable(t.CULL_FACE),e!==w&&(e===o.CullFaceBack?t.cullFace(t.BACK):e===o.CullFaceFront?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),w=e},this.setLineWidth=function(e){e!==x&&(t.lineWidth(e),x=e)},this.setPolygonOffset=function(e,n,r){e?(this.enable(t.POLYGON_OFFSET_FILL),E===n&&C===r||(t.polygonOffset(n,r),E=n,C=r)):this.disable(t.POLYGON_OFFSET_FILL);
},this.getScissorTest=function(){return S},this.setScissorTest=function(e){S=e,e?this.enable(t.SCISSOR_TEST):this.disable(t.SCISSOR_TEST)},this.activeTexture=function(e){void 0===e&&(e=t.TEXTURE0+M-1),P!==e&&(t.activeTexture(e),P=e)},this.bindTexture=function(e,n){null===P&&i.activeTexture();var r=T[P];void 0===r&&(r={type:void 0,texture:void 0},T[P]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||R[e]),r.type=e,r.texture=n)},this.compressedTexImage2D=function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error(e)}},this.texImage2D=function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error(e)}},this.clearColor=function(t,e,n,r){this.buffers.color.setClear(t,e,n,r)},this.clearDepth=function(t){this.buffers.depth.setClear(t)},this.clearStencil=function(t){this.buffers.stencil.setClear(t)},this.scissor=function(e){O.equals(e)===!1&&(t.scissor(e.x,e.y,e.z,e.w),O.copy(e))},this.viewport=function(e){A.equals(e)===!1&&(t.viewport(e.x,e.y,e.z,e.w),A.copy(e))},this.reset=function(){for(var e=0;e<u.length;e++)1===u[e]&&(t.disableVertexAttribArray(e),u[e]=0);c={},h=null,P=null,T={},f=null,b=null,w=null,this.buffers.color.reset(),this.buffers.depth.reset(),this.buffers.stencil.reset()}},o.WebGLColorBuffer=function(t,e){var n=!1,r=new o.Vector4,i=null,a=new o.Vector4;this.setMask=function(e){i===e||n||(t.colorMask(e,e,e,e),i=e)},this.setLocked=function(t){n=t},this.setClear=function(e,n,i,o){r.set(e,n,i,o),a.equals(r)===!1&&(t.clearColor(e,n,i,o),a.copy(r))},this.reset=function(){n=!1,i=null,a=new o.Vector4}},o.WebGLDepthBuffer=function(t,e){var n=!1,r=null,i=null,a=null;this.setTest=function(n){n?e.enable(t.DEPTH_TEST):e.disable(t.DEPTH_TEST)},this.setMask=function(e){r===e||n||(t.depthMask(e),r=e)},this.setFunc=function(e){if(i!==e){if(e)switch(e){case o.NeverDepth:t.depthFunc(t.NEVER);break;case o.AlwaysDepth:t.depthFunc(t.ALWAYS);break;case o.LessDepth:t.depthFunc(t.LESS);break;case o.LessEqualDepth:t.depthFunc(t.LEQUAL);break;case o.EqualDepth:t.depthFunc(t.EQUAL);break;case o.GreaterEqualDepth:t.depthFunc(t.GEQUAL);break;case o.GreaterDepth:t.depthFunc(t.GREATER);break;case o.NotEqualDepth:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);i=e}},this.setLocked=function(t){n=t},this.setClear=function(e){a!==e&&(t.clearDepth(e),a=e)},this.reset=function(){n=!1,r=null,i=null,a=null}},o.WebGLStencilBuffer=function(t,e){var n=!1,r=null,i=null,o=null,a=null,s=null,u=null,l=null,c=null;this.setTest=function(n){n?e.enable(t.STENCIL_TEST):e.disable(t.STENCIL_TEST)},this.setMask=function(e){r===e||n||(t.stencilMask(e),r=e)},this.setFunc=function(e,n,r){i===e&&o===n&&a===r||(t.stencilFunc(e,n,r),i=e,o=n,a=r)},this.setOp=function(e,n,r){s===e&&u===n&&l===r||(t.stencilOp(e,n,r),s=e,u=n,l=r)},this.setLocked=function(t){n=t},this.setClear=function(e){c!==e&&(t.clearStencil(e),c=e)},this.reset=function(){n=!1,r=null,i=null,o=null,a=null,s=null,u=null,l=null,c=null}},o.WebGLTextures=function(t,e,n,r,i,a,s){function u(t,e){if(t.width>e||t.height>e){var n=e/Math.max(t.width,t.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Math.floor(t.width*n),r.height=Math.floor(t.height*n);var i=r.getContext("2d");return i.drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+r.width+"x"+r.height,t),r}return t}function l(t){return o.Math.isPowerOfTwo(t.width)&&o.Math.isPowerOfTwo(t.height)}function c(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=o.Math.nearestPowerOfTwo(t.width),e.height=o.Math.nearestPowerOfTwo(t.height);var n=e.getContext("2d");return n.drawImage(t,0,0,e.width,e.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+e.width+"x"+e.height,t),e}return t}function h(t){return t.wrapS!==o.ClampToEdgeWrapping||t.wrapT!==o.ClampToEdgeWrapping||t.minFilter!==o.NearestFilter&&t.minFilter!==o.LinearFilter}function f(e){return e===o.NearestFilter||e===o.NearestMipMapNearestFilter||e===o.NearestMipMapLinearFilter?t.NEAREST:t.LINEAR}function p(t){var e=t.target;e.removeEventListener("dispose",p),m(e),T.textures--}function d(t){var e=t.target;e.removeEventListener("dispose",d),v(e),T.textures--}function m(e){var n=r.get(e);if(e.image&&n.__image__webglTextureCube)t.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture)}r.delete(e)}function v(e){var n=r.get(e),i=r.get(e.texture);if(e){if(void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e instanceof o.WebGLRenderTargetCube)for(var a=0;a<6;a++)t.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[a]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);r.delete(e.texture),r.delete(e)}}function g(e,i){var o=r.get(e);if(e.version>0&&o.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(a.complete!==!1)return void w(o,e,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}}n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_2D,o.__webglTexture)}function y(e,s){var c=r.get(e);if(6===e.image.length)if(e.version>0&&c.__version!==e.version){c.__image__webglTextureCube||(e.addEventListener("dispose",p),c.__image__webglTextureCube=t.createTexture(),T.textures++),n.activeTexture(t.TEXTURE0+s),n.bindTexture(t.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var h=e instanceof o.CompressedTexture,f=e.image[0]instanceof o.DataTexture,d=[],m=0;m<6;m++)h||f?d[m]=f?e.image[m].image:e.image[m]:d[m]=u(e.image[m],i.maxCubemapSize);var v=d[0],g=l(v),y=a(e.format),_=a(e.type);b(t.TEXTURE_CUBE_MAP,e,g);for(var m=0;m<6;m++)if(h)for(var w,x=d[m].mipmaps,E=0,C=x.length;E<C;E++)w=x[E],e.format!==o.RGBAFormat&&e.format!==o.RGBFormat?n.getCompressedTextureFormats().indexOf(y)>-1?n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,E,y,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,E,y,w.width,w.height,0,y,_,w.data);else f?n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,d[m].width,d[m].height,0,y,_,d[m].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,y,y,_,d[m]);e.generateMipmaps&&g&&t.generateMipmap(t.TEXTURE_CUBE_MAP),c.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(t.TEXTURE0+s),n.bindTexture(t.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)}function _(e,i){n.activeTexture(t.TEXTURE0+i),n.bindTexture(t.TEXTURE_CUBE_MAP,r.get(e).__webglTexture)}function b(n,s,u){var l;if(u?(t.texParameteri(n,t.TEXTURE_WRAP_S,a(s.wrapS)),t.texParameteri(n,t.TEXTURE_WRAP_T,a(s.wrapT)),t.texParameteri(n,t.TEXTURE_MAG_FILTER,a(s.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,a(s.minFilter))):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),s.wrapS===o.ClampToEdgeWrapping&&s.wrapT===o.ClampToEdgeWrapping||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",s),t.texParameteri(n,t.TEXTURE_MAG_FILTER,f(s.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,f(s.minFilter)),s.minFilter!==o.NearestFilter&&s.minFilter!==o.LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",s)),l=e.get("EXT_texture_filter_anisotropic")){if(s.type===o.FloatType&&null===e.get("OES_texture_float_linear"))return;if(s.type===o.HalfFloatType&&null===e.get("OES_texture_half_float_linear"))return;(s.anisotropy>1||r.get(s).__currentAnisotropy)&&(t.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy)}}function w(e,r,s){void 0===e.__webglInit&&(e.__webglInit=!0,r.addEventListener("dispose",p),e.__webglTexture=t.createTexture(),T.textures++),n.activeTexture(t.TEXTURE0+s),n.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,r.unpackAlignment);var f=u(r.image,i.maxTextureSize);h(r)&&l(f)===!1&&(f=c(f));var d=l(f),m=a(r.format),v=a(r.type);b(t.TEXTURE_2D,r,d);var g,y=r.mipmaps;if(r instanceof o.DepthTexture){var _=t.DEPTH_COMPONENT;if(r.type===o.FloatType){if(!O)throw new Error("Float Depth Texture only supported in WebGL2.0");_=t.DEPTH_COMPONENT32F}else O&&(_=t.DEPTH_COMPONENT16);n.texImage2D(t.TEXTURE_2D,0,_,f.width,f.height,0,m,v,null)}else if(r instanceof o.DataTexture)if(y.length>0&&d){for(var w=0,x=y.length;w<x;w++)g=y[w],n.texImage2D(t.TEXTURE_2D,w,m,g.width,g.height,0,m,v,g.data);r.generateMipmaps=!1}else n.texImage2D(t.TEXTURE_2D,0,m,f.width,f.height,0,m,v,f.data);else if(r instanceof o.CompressedTexture)for(var w=0,x=y.length;w<x;w++)g=y[w],r.format!==o.RGBAFormat&&r.format!==o.RGBFormat?n.getCompressedTextureFormats().indexOf(m)>-1?n.compressedTexImage2D(t.TEXTURE_2D,w,m,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(t.TEXTURE_2D,w,m,g.width,g.height,0,m,v,g.data);else if(y.length>0&&d){for(var w=0,x=y.length;w<x;w++)g=y[w],n.texImage2D(t.TEXTURE_2D,w,m,m,v,g);r.generateMipmaps=!1}else n.texImage2D(t.TEXTURE_2D,0,m,m,v,f);r.generateMipmaps&&d&&t.generateMipmap(t.TEXTURE_2D),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function x(e,i,o,s){var u=a(i.texture.format),l=a(i.texture.type);n.texImage2D(s,0,u,i.width,i.height,0,u,l,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,o,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function E(e,n){t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):n.depthBuffer&&n.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n.width,n.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function C(e,n){var i=n instanceof o.WebGLRenderTargetCube;if(i)throw new Error("Depth Texture with cube render targets is not supported!");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!(n.depthTexture instanceof o.DepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),g(n.depthTexture,0);var a=r.get(n.depthTexture).__webglTexture;t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,a,0)}function S(e){var n=r.get(e),i=e instanceof o.WebGLRenderTargetCube;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");C(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=t.createRenderbuffer(),E(n.__webglDepthbuffer[a],e)}else t.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),E(n.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function M(e){var i=r.get(e),a=r.get(e.texture);e.addEventListener("dispose",d),a.__webglTexture=t.createTexture(),T.textures++;var s=e instanceof o.WebGLRenderTargetCube,u=l(e);if(s){i.__webglFramebuffer=[];for(var c=0;c<6;c++)i.__webglFramebuffer[c]=t.createFramebuffer()}else i.__webglFramebuffer=t.createFramebuffer();if(s){n.bindTexture(t.TEXTURE_CUBE_MAP,a.__webglTexture),b(t.TEXTURE_CUBE_MAP,e.texture,u);for(var c=0;c<6;c++)x(i.__webglFramebuffer[c],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+c);e.texture.generateMipmaps&&u&&t.generateMipmap(t.TEXTURE_CUBE_MAP),n.bindTexture(t.TEXTURE_CUBE_MAP,null)}else n.bindTexture(t.TEXTURE_2D,a.__webglTexture),b(t.TEXTURE_2D,e.texture,u),x(i.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),e.texture.generateMipmaps&&u&&t.generateMipmap(t.TEXTURE_2D),n.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&S(e)}function P(e){var i=e.texture;if(i.generateMipmaps&&l(e)&&i.minFilter!==o.NearestFilter&&i.minFilter!==o.LinearFilter){var a=e instanceof o.WebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,s=r.get(i).__webglTexture;n.bindTexture(a,s),t.generateMipmap(a),n.bindTexture(a,null)}}var T=s.memory,O="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;this.setTexture2D=g,this.setTextureCube=y,this.setTextureCubeDynamic=_,this.setupRenderTarget=M,this.updateRenderTargetMipmap=P},o.WebGLUniforms=function(){var t=new o.Texture,e=new o.CubeTexture,n=function(){this.seq=[],this.map={}},r=[],i=[],a=function(t,e,n){var i=t[0];if(i<=0||i>0)return t;var o=e*n,a=r[o];if(void 0===a&&(a=new Float32Array(o),r[o]=a),0!==e){i.toArray(a,0);for(var s=1,u=0;s!==e;++s)u+=n,t[s].toArray(a,u)}return a},s=function(t,e){var n=i[e];void 0===n&&(n=new Int32Array(e),i[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocTextureUnit();return n},u=function(t,e){t.uniform1f(this.addr,e)},l=function(t,e){t.uniform1i(this.addr,e)},c=function(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)},h=function(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)},f=function(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)},p=function(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)},d=function(t,e){t.uniformMatrix3fv(this.addr,!1,e.elements||e)},m=function(t,e){t.uniformMatrix4fv(this.addr,!1,e.elements||e)},v=function(e,n,r){var i=r.allocTextureUnit();e.uniform1i(this.addr,i),r.setTexture2D(n||t,i)},g=function(t,n,r){var i=r.allocTextureUnit();t.uniform1i(this.addr,i),r.setTextureCube(n||e,i)},y=function(t,e){t.uniform2iv(this.addr,e)},_=function(t,e){t.uniform3iv(this.addr,e)},b=function(t,e){t.uniform4iv(this.addr,e)},w=function(t){switch(t){case 5126:return u;case 35664:return c;case 35665:return h;case 35666:return f;case 35674:return p;case 35675:return d;case 35676:return m;case 35678:return v;case 35680:return g;case 5124:case 35670:return l;case 35667:case 35671:return y;case 35668:case 35672:return _;case 35669:case 35673:return b}},x=function(t,e){t.uniform1fv(this.addr,e)},E=function(t,e){t.uniform1iv(this.addr,e)},C=function(t,e){t.uniform2fv(this.addr,a(e,this.size,2))},S=function(t,e){t.uniform3fv(this.addr,a(e,this.size,3))},M=function(t,e){t.uniform4fv(this.addr,a(e,this.size,4))},P=function(t,e){t.uniformMatrix2fv(this.addr,!1,a(e,this.size,4))},T=function(t,e){t.uniformMatrix3fv(this.addr,!1,a(e,this.size,9))},O=function(t,e){t.uniformMatrix4fv(this.addr,!1,a(e,this.size,16))},A=function(e,n,r){var i=n.length,o=s(r,i);e.uniform1iv(this.addr,o);for(var a=0;a!==i;++a)r.setTexture2D(n[a]||t,o[a])},R=function(t,n,r){var i=n.length,o=s(r,i);t.uniform1iv(this.addr,o);for(var a=0;a!==i;++a)r.setTextureCube(n[a]||e,o[a])},L=function(t){switch(t){case 5126:return x;case 35664:return C;case 35665:return S;case 35666:return M;case 35674:return P;case 35675:return T;case 35676:return O;case 35678:return A;case 35680:return R;case 5124:case 35670:return E;case 35667:case 35671:return y;case 35668:case 35672:return _;case 35669:case 35673:return b}},I=function(t,e,n){this.id=t,this.addr=n,this.setValue=w(e.type)},k=function(t,e,n){this.id=t,this.addr=n,this.size=e.size,this.setValue=L(e.type)},D=function(t){this.id=t,n.call(this)};D.prototype.setValue=function(t,e){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var o=n[r];o.setValue(t,e[o.id])}};var j=/([\w\d_]+)(\])?(\[|\.)?/g,N=function(t,e){t.seq.push(e),t.map[e.id]=e},B=function(t,e,n){var r=t.name,i=r.length;for(j.lastIndex=0;;){var o=j.exec(r),a=j.lastIndex,s=o[1],u="]"===o[2],l=o[3];if(u&&(s=0|s),void 0===l||"["===l&&a+2===i){N(n,void 0===l?new I(s,t,e):new k(s,t,e));break}var c=n.map,h=c[s];void 0===h&&(h=new D(s),N(n,h)),n=h}},F=function(t,e,r){n.call(this),this.renderer=r;for(var i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o=0;o!==i;++o){var a=t.getActiveUniform(e,o),s=a.name,u=t.getUniformLocation(e,s);B(a,u,this)}};return F.prototype.setValue=function(t,e,n){var r=this.map[e];void 0!==r&&r.setValue(t,n,this.renderer)},F.prototype.set=function(t,e,n){var r=this.map[n];void 0!==r&&r.setValue(t,e[n],this.renderer)},F.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},F.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var a=e[i],s=n[a.id];s.needsUpdate!==!1&&a.setValue(t,s.value,r)}},F.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n},F.splitDynamic=function(t,e){for(var n=null,r=t.length,i=0,o=0;o!==r;++o){var a=t[o],s=e[a.id];s&&s.dynamic===!0?(null===n&&(n=[]),n.push(a)):(i<o&&(t[i]=a),++i)}return i<r&&(t.length=i),n},F.evalDynamic=function(t,e,n,r){for(var i=0,o=t.length;i!==o;++i){var a=e[t[i].id],s=a.onUpdateCallback;void 0!==s&&s.call(a,n,r)}},F}(),o.LensFlarePlugin=function(t,e){function n(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);i=p.createBuffer(),a=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,i),p.bufferData(p.ARRAY_BUFFER,t,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,a),p.bufferData(p.ELEMENT_ARRAY_BUFFER,e,p.STATIC_DRAW),h=p.createTexture(),f=p.createTexture(),d.bindTexture(p.TEXTURE_2D,h),p.texImage2D(p.TEXTURE_2D,0,p.RGB,16,16,0,p.RGB,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),d.bindTexture(p.TEXTURE_2D,f),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,16,16,0,p.RGBA,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},u=r(s),l={vertex:p.getAttribLocation(u,"position"),uv:p.getAttribLocation(u,"uv")},c={renderType:p.getUniformLocation(u,"renderType"),map:p.getUniformLocation(u,"map"),occlusionMap:p.getUniformLocation(u,"occlusionMap"),opacity:p.getUniformLocation(u,"opacity"),color:p.getUniformLocation(u,"color"),scale:p.getUniformLocation(u,"scale"),rotation:p.getUniformLocation(u,"rotation"),screenPosition:p.getUniformLocation(u,"screenPosition")}}function r(e){var n=p.createProgram(),r=p.createShader(p.FRAGMENT_SHADER),i=p.createShader(p.VERTEX_SHADER),o="precision "+t.getPrecision()+" float;\n";return p.shaderSource(r,o+e.fragmentShader),p.shaderSource(i,o+e.vertexShader),p.compileShader(r),p.compileShader(i),p.attachShader(n,r),p.attachShader(n,i),p.linkProgram(n),n}var i,a,s,u,l,c,h,f,p=t.context,d=t.state;this.render=function(r,s,m){if(0!==e.length){var v=new o.Vector3,g=m.w/m.z,y=.5*m.z,_=.5*m.w,b=16/m.w,w=new o.Vector2(b*g,b),x=new o.Vector3(1,1,0),E=new o.Vector2(1,1),C=new o.Box2;C.min.set(0,0),C.max.set(m.z-16,m.w-16),void 0===u&&n(),p.useProgram(u),d.initAttributes(),d.enableAttribute(l.vertex),d.enableAttribute(l.uv),d.disableUnusedAttributes(),p.uniform1i(c.occlusionMap,0),p.uniform1i(c.map,1),p.bindBuffer(p.ARRAY_BUFFER,i),p.vertexAttribPointer(l.vertex,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(l.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,a),d.disable(p.CULL_FACE),d.setDepthWrite(!1);for(var S=0,M=e.length;S<M;S++){b=16/m.w,w.set(b*g,b);var P=e[S];if(v.set(P.matrixWorld.elements[12],P.matrixWorld.elements[13],P.matrixWorld.elements[14]),v.applyMatrix4(s.matrixWorldInverse),v.applyProjection(s.projectionMatrix),x.copy(v),E.x=m.x+x.x*y+y-8,E.y=m.y+x.y*_+_-8,C.containsPoint(E)===!0){d.activeTexture(p.TEXTURE0),d.bindTexture(p.TEXTURE_2D,null),d.activeTexture(p.TEXTURE1),d.bindTexture(p.TEXTURE_2D,h),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGB,E.x,E.y,16,16,0),p.uniform1i(c.renderType,0),p.uniform2f(c.scale,w.x,w.y),p.uniform3f(c.screenPosition,x.x,x.y,x.z),d.disable(p.BLEND),d.enable(p.DEPTH_TEST),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),d.activeTexture(p.TEXTURE0),d.bindTexture(p.TEXTURE_2D,f),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGBA,E.x,E.y,16,16,0),p.uniform1i(c.renderType,1),d.disable(p.DEPTH_TEST),d.activeTexture(p.TEXTURE1),d.bindTexture(p.TEXTURE_2D,h),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),P.positionScreen.copy(x),P.customUpdateCallback?P.customUpdateCallback(P):P.updateLensFlares(),p.uniform1i(c.renderType,2),d.enable(p.BLEND);for(var T=0,O=P.lensFlares.length;T<O;T++){var A=P.lensFlares[T];A.opacity>.001&&A.scale>.001&&(x.x=A.x,x.y=A.y,x.z=A.z,b=A.size*A.scale/m.w,w.x=b*g,w.y=b,p.uniform3f(c.screenPosition,x.x,x.y,x.z),p.uniform2f(c.scale,w.x,w.y),p.uniform1f(c.rotation,A.rotation),p.uniform1f(c.opacity,A.opacity),p.uniform3f(c.color,A.color.r,A.color.g,A.color.b),d.setBlending(A.blending,A.blendEquation,A.blendSrc,A.blendDst),t.setTexture2D(A.texture,1),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0))}}}d.enable(p.CULL_FACE),d.enable(p.DEPTH_TEST),d.setDepthWrite(!0),t.resetGLState()}}},o.SpritePlugin=function(t,e){function n(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);a=f.createBuffer(),s=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,a),f.bufferData(f.ARRAY_BUFFER,t,f.STATIC_DRAW),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),f.bufferData(f.ELEMENT_ARRAY_BUFFER,e,f.STATIC_DRAW),u=r(),l={position:f.getAttribLocation(u,"position"),uv:f.getAttribLocation(u,"uv")},c={uvOffset:f.getUniformLocation(u,"uvOffset"),uvScale:f.getUniformLocation(u,"uvScale"),rotation:f.getUniformLocation(u,"rotation"),scale:f.getUniformLocation(u,"scale"),color:f.getUniformLocation(u,"color"),map:f.getUniformLocation(u,"map"),opacity:f.getUniformLocation(u,"opacity"),modelViewMatrix:f.getUniformLocation(u,"modelViewMatrix"),projectionMatrix:f.getUniformLocation(u,"projectionMatrix"),fogType:f.getUniformLocation(u,"fogType"),fogDensity:f.getUniformLocation(u,"fogDensity"),fogNear:f.getUniformLocation(u,"fogNear"),fogFar:f.getUniformLocation(u,"fogFar"),fogColor:f.getUniformLocation(u,"fogColor"),alphaTest:f.getUniformLocation(u,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8,n.height=8;var i=n.getContext("2d");i.fillStyle="white",i.fillRect(0,0,8,8),h=new o.Texture(n),h.needsUpdate=!0}function r(){var e=f.createProgram(),n=f.createShader(f.VERTEX_SHADER),r=f.createShader(f.FRAGMENT_SHADER);return f.shaderSource(n,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),f.shaderSource(r,["precision "+t.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),f.compileShader(n),f.compileShader(r),f.attachShader(e,n),f.attachShader(e,r),f.linkProgram(e),e}function i(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var a,s,u,l,c,h,f=t.context,p=t.state,d=new o.Vector3,m=new o.Quaternion,v=new o.Vector3;this.render=function(r,g){if(0!==e.length){void 0===u&&n(),f.useProgram(u),p.initAttributes(),p.enableAttribute(l.position),p.enableAttribute(l.uv),p.disableUnusedAttributes(),p.disable(f.CULL_FACE),p.enable(f.BLEND),f.bindBuffer(f.ARRAY_BUFFER,a),f.vertexAttribPointer(l.position,2,f.FLOAT,!1,16,0),f.vertexAttribPointer(l.uv,2,f.FLOAT,!1,16,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),f.uniformMatrix4fv(c.projectionMatrix,!1,g.projectionMatrix.elements),p.activeTexture(f.TEXTURE0),f.uniform1i(c.map,0);var y=0,_=0,b=r.fog;b?(f.uniform3f(c.fogColor,b.color.r,b.color.g,b.color.b),b instanceof o.Fog?(f.uniform1f(c.fogNear,b.near),f.uniform1f(c.fogFar,b.far),f.uniform1i(c.fogType,1),y=1,_=1):b instanceof o.FogExp2&&(f.uniform1f(c.fogDensity,b.density),f.uniform1i(c.fogType,2),y=2,_=2)):(f.uniform1i(c.fogType,0),y=0,_=0);for(var w=0,x=e.length;w<x;w++){var E=e[w];E.modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}e.sort(i);for(var C=[],w=0,x=e.length;w<x;w++){var E=e[w],S=E.material;if(S.visible!==!1){f.uniform1f(c.alphaTest,S.alphaTest),f.uniformMatrix4fv(c.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(d,m,v),C[0]=v.x,C[1]=v.y;var M=0;r.fog&&S.fog&&(M=_),y!==M&&(f.uniform1i(c.fogType,M),y=M),null!==S.map?(f.uniform2f(c.uvOffset,S.map.offset.x,S.map.offset.y),f.uniform2f(c.uvScale,S.map.repeat.x,S.map.repeat.y)):(f.uniform2f(c.uvOffset,0,0),f.uniform2f(c.uvScale,1,1)),f.uniform1f(c.opacity,S.opacity),f.uniform3f(c.color,S.color.r,S.color.g,S.color.b),f.uniform1f(c.rotation,S.rotation),f.uniform2fv(c.scale,C),p.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst),p.setDepthTest(S.depthTest),p.setDepthWrite(S.depthWrite),S.map?t.setTexture2D(S.map,0):t.setTexture2D(h,0),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0)}}p.enable(f.CULL_FACE),t.resetGLState()}}},Object.assign(o,{Face4:function(t,e,n,r,i,a,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new o.Face3(t,e,n,i,a,s)},LineStrip:0,LinePieces:1,MeshFaceMaterial:o.MultiMaterial,PointCloud:function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new o.Points(t,e)},Particle:o.Sprite,ParticleSystem:function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new o.Points(t,e)},PointCloudMaterial:function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new o.PointsMaterial(t)},ParticleBasicMaterial:function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new o.PointsMaterial(t)},ParticleSystemMaterial:function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new o.PointsMaterial(t)},Vertex:function(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new o.Vector3(t,e,n)}}),Object.assign(o.Box2.prototype,{empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)}}),Object.assign(o.Box3.prototype,{empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(o.Matrix3.prototype,{multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)}}),Object.assign(o.Matrix4.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),
this.applyToVector3Array(t)},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(t){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(t){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(t){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(t){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(t,e){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}}),Object.assign(o.Plane.prototype,{isIntersectionLine:function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)}}),Object.assign(o.Quaternion.prototype,{multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)}}),Object.assign(o.Ray.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(o.Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)}}),Object.assign(o.Object3D.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(t){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)}}),Object.defineProperties(o.Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(t){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(o.LOD.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),o.PerspectiveCamera.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(o.Light.prototype,{onlyShadow:{set:function(t){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(t){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(t){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(o.BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length}}}),Object.assign(o.BufferGeometry.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(o.BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(o.Material.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(t){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new o.Color}}}),Object.defineProperties(o.MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(t){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(o.ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),o.EventDispatcher.prototype=Object.assign(Object.create({constructor:o.EventDispatcher,apply:function(t){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(t,this)}}),o.EventDispatcher.prototype),Object.assign(o.WebGLRenderer.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(o.WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=t}}}),Object.defineProperties(o.WebGLShadowMap.prototype,{cullFace:{get:function(){return this.renderReverseSided?o.CullFaceFront:o.CullFaceBack},set:function(t){var e=t!==o.CullFaceBack;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+e+"."),this.renderReverseSided=e}}}),Object.defineProperties(o.WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.assign(o.Audio.prototype,{load:function(t){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var e=this,n=new o.AudioLoader;return n.load(t,function(t){e.setBuffer(t)}),this}}),Object.assign(o.AudioAnalyser.prototype,{getData:function(t){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()}}),o.GeometryUtils={merge:function(t,e,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;e instanceof o.Mesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},o.ImageUtils={crossOrigin:void 0,loadTexture:function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new o.TextureLoader;i.setCrossOrigin(this.crossOrigin);var a=i.load(t,n,void 0,r);return e&&(a.mapping=e),a},loadTextureCube:function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new o.CubeTextureLoader;i.setCrossOrigin(this.crossOrigin);var a=i.load(t,n,void 0,r);return e&&(a.mapping=e),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},o.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(t,e){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},o.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},o.CurveUtils={tangentQuadraticBezier:function(t,e,n,r){return 2*(1-t)*(n-e)+2*t*(r-n)},tangentCubicBezier:function(t,e,n,r,i){return-3*e*(1-t)*(1-t)+3*n*(1-t)*(1-t)-6*t*n*(1-t)+6*t*r*(1-t)-3*t*t*r+3*t*t*i},tangentSpline:function(t,e,n,r,i){var o=6*t*t-6*t,a=3*t*t-4*t+1,s=-6*t*t+6*t,u=3*t*t-2*t;return o+a+s+u},interpolate:function(t,e,n,r,i){var o=.5*(n-t),a=.5*(r-e),s=i*i,u=i*s;return(2*e-2*n+o+a)*u+(-3*e+3*n-2*o-a)*s+o*i+e}},o.SceneUtils={createMultiMaterialObject:function(t,e){for(var n=new o.Group,r=0,i=e.length;r<i;r++)n.add(new o.Mesh(t,e[r]));return n},detach:function(t,e,n){t.applyMatrix(e.matrixWorld),e.remove(t),n.add(t)},attach:function(t,e,n){var r=new o.Matrix4;r.getInverse(n.matrixWorld),t.applyMatrix(r),e.remove(t),n.add(t)}},o.ShapeUtils={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},triangulate:function(){function t(t,e,n,r,i,o){var a,s,u,l,c,h,f,p,d;if(s=t[o[e]].x,u=t[o[e]].y,l=t[o[n]].x,c=t[o[n]].y,h=t[o[r]].x,f=t[o[r]].y,Number.EPSILON>(l-s)*(f-u)-(c-u)*(h-s))return!1;var m,v,g,y,_,b,w,x,E,C,S,M,P,T,O;for(m=h-l,v=f-c,g=s-h,y=u-f,_=l-s,b=c-u,a=0;a<i;a++)if(p=t[o[a]].x,d=t[o[a]].y,!(p===s&&d===u||p===l&&d===c||p===h&&d===f)&&(w=p-s,x=d-u,E=p-l,C=d-c,S=p-h,M=d-f,O=m*C-v*E,P=_*x-b*w,T=g*M-y*S,O>=-Number.EPSILON&&T>=-Number.EPSILON&&P>=-Number.EPSILON))return!1;return!0}return function(e,n){var r=e.length;if(r<3)return null;var i,a,s,u=[],l=[],c=[];if(o.ShapeUtils.area(e)>0)for(a=0;a<r;a++)l[a]=a;else for(a=0;a<r;a++)l[a]=r-1-a;var h=r,f=2*h;for(a=h-1;h>2;){if(f--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),n?c:u;if(i=a,h<=i&&(i=0),a=i+1,h<=a&&(a=0),s=a+1,h<=s&&(s=0),t(e,i,a,s,h,l)){var p,d,m,v,g;for(p=l[i],d=l[a],m=l[s],u.push([e[p],e[d],e[m]]),c.push([l[i],l[a],l[s]]),v=a,g=a+1;g<h;v++,g++)l[v]=l[g];h--,f=2*h}}return n?c:u}}(),triangulateShape:function(t,e){function n(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function r(t,e,n){return t.x!==e.x?t.x<e.x?t.x<=n.x&&n.x<=e.x:e.x<=n.x&&n.x<=t.x:t.y<e.y?t.y<=n.y&&n.y<=e.y:e.y<=n.y&&n.y<=t.y}function i(t,e,n,i,o){var a=e.x-t.x,s=e.y-t.y,u=i.x-n.x,l=i.y-n.y,c=t.x-n.x,h=t.y-n.y,f=s*u-a*l,p=s*c-a*h;if(Math.abs(f)>Number.EPSILON){var d;if(f>0){if(p<0||p>f)return[];if(d=l*c-u*h,d<0||d>f)return[]}else{if(p>0||p<f)return[];if(d=l*c-u*h,d>0||d<f)return[]}if(0===d)return!o||0!==p&&p!==f?[t]:[];if(d===f)return!o||0!==p&&p!==f?[e]:[];if(0===p)return[n];if(p===f)return[i];var m=d/f;return[{x:t.x+m*a,y:t.y+m*s}]}if(0!==p||l*c!==u*h)return[];var v=0===a&&0===s,g=0===u&&0===l;if(v&&g)return t.x!==n.x||t.y!==n.y?[]:[t];if(v)return r(n,i,t)?[t]:[];if(g)return r(t,e,n)?[n]:[];var y,_,b,w,x,E,C,S;return 0!==a?(t.x<e.x?(y=t,b=t.x,_=e,w=e.x):(y=e,b=e.x,_=t,w=t.x),n.x<i.x?(x=n,C=n.x,E=i,S=i.x):(x=i,C=i.x,E=n,S=n.x)):(t.y<e.y?(y=t,b=t.y,_=e,w=e.y):(y=e,b=e.y,_=t,w=t.y),n.y<i.y?(x=n,C=n.y,E=i,S=i.y):(x=i,C=i.y,E=n,S=n.y)),b<=C?w<C?[]:w===C?o?[]:[x]:w<=S?[x,_]:[x,E]:b>S?[]:b===S?o?[]:[y]:w<=S?[y,_]:[y,E]}function a(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=n.x-t.x,s=n.y-t.y,u=r.x-t.x,l=r.y-t.y,c=i*s-o*a,h=i*l-o*u;if(Math.abs(c)>Number.EPSILON){var f=u*s-l*a;return c>0?h>=0&&f>=0:h>=0||f>=0}return h>0}function s(t,e){function n(t,e){var n=y.length-1,r=t-1;r<0&&(r=n);var i=t+1;i>n&&(i=0);var o=a(y[t],y[r],y[i],s[e]);if(!o)return!1;var u=s.length-1,l=e-1;l<0&&(l=u);var c=e+1;return c>u&&(c=0),o=a(s[e],s[l],s[c],y[t]),!!o}function r(t,e){var n,r,o;for(n=0;n<y.length;n++)if(r=n+1,r%=y.length,o=i(t,e,y[n],y[r],!0),o.length>0)return!0;return!1}function o(t,n){var r,o,a,s,u;for(r=0;r<_.length;r++)for(o=e[_[r]],a=0;a<o.length;a++)if(s=a+1,s%=o.length,u=i(t,n,o[a],o[s],!0),u.length>0)return!0;return!1}for(var s,u,l,c,h,f,p,d,m,v,g,y=t.concat(),_=[],b=[],w=0,x=e.length;w<x;w++)_.push(w);for(var E=0,C=2*_.length;_.length>0;){if(C--,C<0){console.log("Infinite Loop! Holes left:"+_.length+", Probably Hole outside Shape!");break}for(l=E;l<y.length;l++){c=y[l],u=-1;for(var w=0;w<_.length;w++)if(f=_[w],p=c.x+":"+c.y+":"+f,void 0===b[p]){s=e[f];for(var S=0;S<s.length;S++)if(h=s[S],n(l,S)&&!r(c,h)&&!o(c,h)){u=S,_.splice(w,1),d=y.slice(0,l+1),m=y.slice(l),v=s.slice(u),g=s.slice(0,u+1),y=d.concat(v).concat(g).concat(m),E=l;break}if(u>=0)break;b[p]=!0}if(u>=0)break}}return y}n(t),e.forEach(n);for(var u,l,c,h,f,p,d={},m=t.concat(),v=0,g=e.length;v<g;v++)Array.prototype.push.apply(m,e[v]);for(u=0,l=m.length;u<l;u++)f=m[u].x+":"+m[u].y,void 0!==d[f]&&console.warn("THREE.ShapeUtils: Duplicate point",f,u),d[f]=u;var y=s(t,e),_=o.ShapeUtils.triangulate(y,!1);for(u=0,l=_.length;u<l;u++)for(h=_[u],c=0;c<3;c++)f=h[c].x+":"+h[c].y,p=d[f],void 0!==p&&(h[c]=p);return _.concat()},isClockWise:function(t){return o.ShapeUtils.area(t)<0},b2:function(){function t(t,e){var n=1-t;return n*n*e}function e(t,e){return 2*(1-t)*t*e}function n(t,e){return t*t*e}return function(r,i,o,a){return t(r,i)+e(r,o)+n(r,a)}}(),b3:function(){function t(t,e){var n=1-t;return n*n*n*e}function e(t,e){var n=1-t;return 3*n*n*t*e}function n(t,e){var n=1-t;return 3*n*t*t*e}function r(t,e){return t*t*t*e}return function(i,o,a,s,u){return t(i,o)+e(i,a)+n(i,s)+r(i,u)}}()},o.Curve=function(){},o.Curve.prototype={constructor:o.Curve,getPoint:function(t){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){t||(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){t||(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=t;n++)e=this.getPoint(n/t),o+=e.distanceTo(i),r.push(o),i=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e?e:t*r[o-1];for(var a,s=0,u=o-1;s<=u;)if(i=Math.floor(s+(u-s)/2),a=r[i]-n,a<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(i=u,r[i]===n){var l=i/(o-1);return l}var c=r[i],h=r[i+1],f=h-c,p=(n-c)/f,l=(i+p)/(o-1);return l},getTangent:function(t){var e=1e-4,n=t-e,r=t+e;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),a=o.clone().sub(i);return a.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)}},o.Curve.create=function(t,e){return t.prototype=Object.create(o.Curve.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},o.CurvePath=function(){this.curves=[],this.autoClose=!1},o.CurvePath.prototype=Object.assign(Object.create(o.Curve.prototype),{constructor:o.CurvePath,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new o.LineCurve(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){t||(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],s=a instanceof o.EllipseCurve?2*t:a instanceof o.LineCurve?1:a instanceof o.SplineCurve?t*a.points.length:t,u=a.getPoints(s),l=0;l<u.length;l++){var c=u[l];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new o.Geometry,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new o.Vector3(i.x,i.y,i.z||0))}return e}}),o.Font=function(t){this.data=t},Object.assign(o.Font.prototype,{generateShapes:function(t,e,n){function r(t){for(var n=String(t).split(""),r=e/a.resolution,o=0,s=[],u=0;u<n.length;u++){var l=i(n[u],r,o);o+=l.offset,s.push(l.path)}return s}function i(t,e,r){var i=a.glyphs[t]||a.glyphs["?"];if(i){var s,u,l,c,h,f,p,d,m,v,g,y=new o.ShapePath,_=[],b=o.ShapeUtils.b2,w=o.ShapeUtils.b3;if(i.o)for(var x=i._cachedOutline||(i._cachedOutline=i.o.split(" ")),E=0,C=x.length;E<C;){var S=x[E++];switch(S){case"m":s=x[E++]*e+r,u=x[E++]*e,y.moveTo(s,u);break;case"l":s=x[E++]*e+r,u=x[E++]*e,y.lineTo(s,u);break;case"q":if(l=x[E++]*e+r,c=x[E++]*e,p=x[E++]*e+r,d=x[E++]*e,y.quadraticCurveTo(p,d,l,c),g=_[_.length-1]){h=g.x,f=g.y;for(var M=1;M<=n;M++){var P=M/n;b(P,h,p,l),b(P,f,d,c)}}break;case"b":if(l=x[E++]*e+r,c=x[E++]*e,p=x[E++]*e+r,d=x[E++]*e,m=x[E++]*e+r,v=x[E++]*e,y.bezierCurveTo(p,d,m,v,l,c),g=_[_.length-1]){h=g.x,f=g.y;for(var M=1;M<=n;M++){var P=M/n;w(P,h,p,m,l),w(P,f,d,v,c)}}}}return{offset:i.ha*e,path:y}}}void 0===e&&(e=100),void 0===n&&(n=4);for(var a=this.data,s=r(t),u=[],l=0,c=s.length;l<c;l++)Array.prototype.push.apply(u,s[l].toShapes());return u}}),o.Path=function(t){o.CurvePath.call(this),this.currentPoint=new o.Vector2,t&&this.fromPoints(t)},o.Path.prototype=Object.assign(Object.create(o.CurvePath.prototype),{constructor:o.Path,fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new o.LineCurve(this.currentPoint.clone(),new o.Vector2(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){var i=new o.QuadraticBezierCurve(this.currentPoint.clone(),new o.Vector2(t,e),new o.Vector2(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,i,a){var s=new o.CubicBezierCurve(this.currentPoint.clone(),new o.Vector2(t,e),new o.Vector2(n,r),new o.Vector2(i,a));this.curves.push(s),this.currentPoint.set(i,a)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),n=new o.SplineCurve(e);this.curves.push(n),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+a,e+s,n,r,i,o)},absarc:function(t,e,n,r,i,o){this.absellipse(t,e,n,n,r,i,o)},ellipse:function(t,e,n,r,i,o,a,s){var u=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(t+u,e+l,n,r,i,o,a,s)},absellipse:function(t,e,n,r,i,a,s,u){var l=new o.EllipseCurve(t,e,n,r,i,a,s,u);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var h=l.getPoint(1);this.currentPoint.copy(h)}}),o.ShapePath=function(){this.subPaths=[],this.currentPath=null},o.ShapePath.prototype={moveTo:function(t,e){this.currentPath=new o.Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,r){this.currentPath.quadraticCurveTo(t,e,n,r)},bezierCurveTo:function(t,e,n,r,i,o){this.currentPath.bezierCurveTo(t,e,n,r,i,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],a=new o.Shape;a.curves=i.curves,e.push(a)}return e}function r(t,e){for(var n=e.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=e[i],s=e[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=e[o],u=-u,s=e[i],l=-l),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var c=l*(t.x-a.x)-u*(t.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return r}var i=o.ShapeUtils.isClockWise,a=this.subPaths;if(0===a.length)return[];if(e===!0)return n(a);var s,u,l,c=[];if(1===a.length)return u=a[0],l=new o.Shape,l.curves=u.curves,c.push(l),c;var h=!i(a[0].getPoints());h=t?!h:h;var f,p=[],d=[],m=[],v=0;d[v]=void 0,m[v]=[];for(var g=0,y=a.length;g<y;g++)u=a[g],f=u.getPoints(),s=i(f),s=t?!s:s,s?(!h&&d[v]&&v++,d[v]={s:new o.Shape,p:f},d[v].s.curves=u.curves,h&&v++,m[v]=[]):m[v].push({h:u,p:f[0]});if(!d[0])return n(a);if(d.length>1){for(var _=!1,b=[],w=0,x=d.length;w<x;w++)p[w]=[];for(var w=0,x=d.length;w<x;w++)for(var E=m[w],C=0;C<E.length;C++){for(var S=E[C],M=!0,P=0;P<d.length;P++)r(S.p,d[P].p)&&(w!==P&&b.push({froms:w,tos:P,hole:C}),M?(M=!1,p[P].push(S)):_=!0);M&&p[w].push(S)}b.length>0&&(_||(m=p))}for(var T,g=0,O=d.length;g<O;g++){l=d[g].s,c.push(l),T=m[g];for(var A=0,R=T.length;A<R;A++)l.holes.push(T[A].h)}return c}},o.Shape=function(){o.Path.apply(this,arguments),this.holes=[]},o.Shape.prototype=Object.assign(Object.create(o.Path.prototype),{constructor:o.Shape,extrude:function(t){return new o.ExtrudeGeometry(this,t)},makeGeometry:function(t){return new o.ShapeGeometry(this,t)},getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}}),o.LineCurve=function(t,e){this.v1=t,this.v2=e},o.LineCurve.prototype=Object.create(o.Curve.prototype),o.LineCurve.prototype.constructor=o.LineCurve,o.LineCurve.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},o.LineCurve.prototype.getPointAt=function(t){return this.getPoint(t)},o.LineCurve.prototype.getTangent=function(t){var e=this.v2.clone().sub(this.v1);return e.normalize()},o.QuadraticBezierCurve=function(t,e,n){this.v0=t,this.v1=e,this.v2=n},o.QuadraticBezierCurve.prototype=Object.create(o.Curve.prototype),o.QuadraticBezierCurve.prototype.constructor=o.QuadraticBezierCurve,o.QuadraticBezierCurve.prototype.getPoint=function(t){var e=o.ShapeUtils.b2;return new o.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y))},o.QuadraticBezierCurve.prototype.getTangent=function(t){var e=o.CurveUtils.tangentQuadraticBezier;return new o.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y)).normalize()},o.CubicBezierCurve=function(t,e,n,r){this.v0=t,this.v1=e,this.v2=n,this.v3=r},o.CubicBezierCurve.prototype=Object.create(o.Curve.prototype),o.CubicBezierCurve.prototype.constructor=o.CubicBezierCurve,o.CubicBezierCurve.prototype.getPoint=function(t){var e=o.ShapeUtils.b3;return new o.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},o.CubicBezierCurve.prototype.getTangent=function(t){var e=o.CurveUtils.tangentCubicBezier;return new o.Vector2(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},o.SplineCurve=function(t){this.points=void 0==t?[]:t},o.SplineCurve.prototype=Object.create(o.Curve.prototype),o.SplineCurve.prototype.constructor=o.SplineCurve,o.SplineCurve.prototype.getPoint=function(t){var e=this.points,n=(e.length-1)*t,r=Math.floor(n),i=n-r,a=e[0===r?r:r-1],s=e[r],u=e[r>e.length-2?e.length-1:r+1],l=e[r>e.length-3?e.length-1:r+2],c=o.CurveUtils.interpolate;return new o.Vector2(c(a.x,s.x,u.x,l.x,i),c(a.y,s.y,u.y,l.y,i))},o.EllipseCurve=function(t,e,n,r,i,o,a,s){this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,
this.aEndAngle=o,this.aClockwise=a,this.aRotation=s||0},o.EllipseCurve.prototype=Object.create(o.Curve.prototype),o.EllipseCurve.prototype.constructor=o.EllipseCurve,o.EllipseCurve.prototype.getPoint=function(t){for(var e=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=e;for(;n>e;)n-=e;n<Number.EPSILON&&(n=r?0:e),this.aClockwise!==!0||r||(n===e?n=-e:n-=e);var i=this.aStartAngle+t*n,a=this.aX+this.xRadius*Math.cos(i),s=this.aY+this.yRadius*Math.sin(i);if(0!==this.aRotation){var u=Math.cos(this.aRotation),l=Math.sin(this.aRotation),c=a-this.aX,h=s-this.aY;a=c*u-h*l+this.aX,s=c*l+h*u+this.aY}return new o.Vector2(a,s)},o.ArcCurve=function(t,e,n,r,i,a){o.EllipseCurve.call(this,t,e,n,n,r,i,a)},o.ArcCurve.prototype=Object.create(o.EllipseCurve.prototype),o.ArcCurve.prototype.constructor=o.ArcCurve,o.LineCurve3=o.Curve.create(function(t,e){this.v1=t,this.v2=e},function(t){if(1===t)return this.v2.clone();var e=new o.Vector3;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e}),o.QuadraticBezierCurve3=o.Curve.create(function(t,e,n){this.v0=t,this.v1=e,this.v2=n},function(t){var e=o.ShapeUtils.b2;return new o.Vector3(e(t,this.v0.x,this.v1.x,this.v2.x),e(t,this.v0.y,this.v1.y,this.v2.y),e(t,this.v0.z,this.v1.z,this.v2.z))}),o.CubicBezierCurve3=o.Curve.create(function(t,e,n,r){this.v0=t,this.v1=e,this.v2=n,this.v3=r},function(t){var e=o.ShapeUtils.b3;return new o.Vector3(e(t,this.v0.x,this.v1.x,this.v2.x,this.v3.x),e(t,this.v0.y,this.v1.y,this.v2.y,this.v3.y),e(t,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),o.SplineCurve3=o.Curve.create(function(t){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0==t?[]:t},function(t){var e=this.points,n=(e.length-1)*t,r=Math.floor(n),i=n-r,a=e[0==r?r:r-1],s=e[r],u=e[r>e.length-2?e.length-1:r+1],l=e[r>e.length-3?e.length-1:r+2],c=o.CurveUtils.interpolate;return new o.Vector3(c(a.x,s.x,u.x,l.x,i),c(a.y,s.y,u.y,l.y,i),c(a.z,s.z,u.z,l.z,i))}),o.CatmullRomCurve3=function(){function t(){}var e=new o.Vector3,n=new t,r=new t,i=new t;return t.prototype.init=function(t,e,n,r){this.c0=t,this.c1=n,this.c2=-3*t+3*e-2*n-r,this.c3=2*t-2*e+n+r},t.prototype.initNonuniformCatmullRom=function(t,e,n,r,i,o,a){var s=(e-t)/i-(n-t)/(i+o)+(n-e)/o,u=(n-e)/o-(r-e)/(o+a)+(r-n)/a;s*=o,u*=o,this.init(e,n,s,u)},t.prototype.initCatmullRom=function(t,e,n,r,i){this.init(e,n,i*(n-t),i*(r-e))},t.prototype.calc=function(t){var e=t*t,n=e*t;return this.c0+this.c1*t+this.c2*e+this.c3*n},o.Curve.create(function(t){this.points=t||[],this.closed=!1},function(t){var a,s,u,l,c=this.points;l=c.length,l<2&&console.log("duh, you need at least 2 points"),a=(l-(this.closed?0:1))*t,s=Math.floor(a),u=a-s,this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/c.length)+1)*c.length:0===u&&s===l-1&&(s=l-2,u=1);var h,f,p,d;if(this.closed||s>0?h=c[(s-1)%l]:(e.subVectors(c[0],c[1]).add(c[0]),h=e),f=c[s%l],p=c[(s+1)%l],this.closed||s+2<l?d=c[(s+2)%l]:(e.subVectors(c[l-1],c[l-2]).add(c[l-1]),d=e),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var m="chordal"===this.type?.5:.25,v=Math.pow(h.distanceToSquared(f),m),g=Math.pow(f.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(d),m);g<1e-4&&(g=1),v<1e-4&&(v=g),y<1e-4&&(y=g),n.initNonuniformCatmullRom(h.x,f.x,p.x,d.x,v,g,y),r.initNonuniformCatmullRom(h.y,f.y,p.y,d.y,v,g,y),i.initNonuniformCatmullRom(h.z,f.z,p.z,d.z,v,g,y)}else if("catmullrom"===this.type){var _=void 0!==this.tension?this.tension:.5;n.initCatmullRom(h.x,f.x,p.x,d.x,_),r.initCatmullRom(h.y,f.y,p.y,d.y,_),i.initCatmullRom(h.z,f.z,p.z,d.z,_)}var b=new o.Vector3(n.calc(u),r.calc(u),i.calc(u));return b})}(),o.ClosedSplineCurve3=function(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3."),o.CatmullRomCurve3.call(this,t),this.type="catmullrom",this.closed=!0},o.ClosedSplineCurve3.prototype=Object.create(o.CatmullRomCurve3.prototype),o.BoxGeometry=function(t,e,n,r,i,a){o.Geometry.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new o.BoxBufferGeometry(t,e,n,r,i,a)),this.mergeVertices()},o.BoxGeometry.prototype=Object.create(o.Geometry.prototype),o.BoxGeometry.prototype.constructor=o.BoxGeometry,o.CubeGeometry=o.BoxGeometry,o.BoxBufferGeometry=function(t,e,n,r,i,a){function s(t,e,n){var r=0;return r+=(t+1)*(e+1)*2,r+=(t+1)*(n+1)*2,r+=(n+1)*(e+1)*2}function u(t,e,n){var r=0;return r+=t*e*2,r+=t*n*2,r+=n*e*2,6*r}function l(t,e,n,r,i,a,s,u,l,h,f){for(var x=a/l,E=s/h,C=a/2,S=s/2,M=u/2,P=l+1,T=h+1,O=0,A=0,R=new o.Vector3,L=0;L<T;L++)for(var I=L*E-S,k=0;k<P;k++){var D=k*x-C;R[t]=D*r,R[e]=I*i,R[n]=M,d[g]=R.x,d[g+1]=R.y,d[g+2]=R.z,R[t]=0,R[e]=0,R[n]=u>0?1:-1,m[g]=R.x,m[g+1]=R.y,m[g+2]=R.z,v[y]=k/l,v[y+1]=1-L/h,g+=3,y+=2,O+=1}for(L=0;L<h;L++)for(k=0;k<l;k++){var j=b+k+P*L,N=b+k+P*(L+1),B=b+(k+1)+P*(L+1),F=b+(k+1)+P*L;p[_]=j,p[_+1]=N,p[_+2]=F,p[_+3]=N,p[_+4]=B,p[_+5]=F,_+=6,A+=6}c.addGroup(w,A,f),w+=A,b+=O}o.BufferGeometry.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};var c=this;r=Math.floor(r)||1,i=Math.floor(i)||1,a=Math.floor(a)||1;var h=s(r,i,a),f=u(r,i,a),p=new(f>65535?Uint32Array:Uint16Array)(f),d=new Float32Array(3*h),m=new Float32Array(3*h),v=new Float32Array(2*h),g=0,y=0,_=0,b=0,w=0;l("z","y","x",-1,-1,n,e,t,a,i,0),l("z","y","x",1,-1,n,e,-t,a,i,1),l("x","z","y",1,1,t,n,e,r,a,2),l("x","z","y",1,-1,t,n,-e,r,a,3),l("x","y","z",1,-1,t,e,n,r,i,4),l("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(new o.BufferAttribute(p,1)),this.addAttribute("position",new o.BufferAttribute(d,3)),this.addAttribute("normal",new o.BufferAttribute(m,3)),this.addAttribute("uv",new o.BufferAttribute(v,2))},o.BoxBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.BoxBufferGeometry.prototype.constructor=o.BoxBufferGeometry,o.CircleGeometry=function(t,e,n,r){o.Geometry.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new o.CircleBufferGeometry(t,e,n,r))},o.CircleGeometry.prototype=Object.create(o.Geometry.prototype),o.CircleGeometry.prototype.constructor=o.CircleGeometry,o.CircleBufferGeometry=function(t,e,n,r){o.BufferGeometry.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||50,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i=e+2,a=new Float32Array(3*i),s=new Float32Array(3*i),u=new Float32Array(2*i);s[2]=1,u[0]=.5,u[1]=.5;for(var l=0,c=3,h=2;l<=e;l++,c+=3,h+=2){var f=n+l/e*r;a[c]=t*Math.cos(f),a[c+1]=t*Math.sin(f),s[c+2]=1,u[h]=(a[c]/t+1)/2,u[h+1]=(a[c+1]/t+1)/2}for(var p=[],c=1;c<=e;c++)p.push(c,c+1,0);this.setIndex(new o.BufferAttribute(new Uint16Array(p),1)),this.addAttribute("position",new o.BufferAttribute(a,3)),this.addAttribute("normal",new o.BufferAttribute(s,3)),this.addAttribute("uv",new o.BufferAttribute(u,2)),this.boundingSphere=new o.Sphere(new o.Vector3,t)},o.CircleBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.CircleBufferGeometry.prototype.constructor=o.CircleBufferGeometry,o.CylinderBufferGeometry=function(t,e,n,r,i,a,s,u){function l(){var t=(r+1)*(i+1);return a===!1&&(t+=(r+1)*d+r*d),t}function c(){var t=r*i*2*3;return a===!1&&(t+=r*d*3),t}function h(){var a,l,c=new o.Vector3,h=new o.Vector3,f=0,d=(e-t)/n;for(l=0;l<=i;l++){var m=[],v=l/i,M=v*(e-t)+t;for(a=0;a<=r;a++){var P=a/r;h.x=M*Math.sin(P*u+s),h.y=-v*n+C,h.z=M*Math.cos(P*u+s),y.setXYZ(w,h.x,h.y,h.z),c.copy(h),(0===t&&0===l||0===e&&l===i)&&(c.x=Math.sin(P*u+s),c.z=Math.cos(P*u+s)),c.setY(Math.sqrt(c.x*c.x+c.z*c.z)*d).normalize(),_.setXYZ(w,c.x,c.y,c.z),b.setXY(w,P,1-v),m.push(w),w++}E.push(m)}for(a=0;a<r;a++)for(l=0;l<i;l++){var T=E[l][a],O=E[l+1][a],A=E[l+1][a+1],R=E[l][a+1];g.setX(x,T),x++,g.setX(x,O),x++,g.setX(x,R),x++,g.setX(x,O),x++,g.setX(x,A),x++,g.setX(x,R),x++,f+=6}p.addGroup(S,f,0),S+=f}function f(n){var i,a,l,c=new o.Vector2,h=new o.Vector3,f=0,d=n===!0?t:e,m=n===!0?1:-1;for(a=w,i=1;i<=r;i++)y.setXYZ(w,0,C*m,0),_.setXYZ(w,0,m,0),c.x=.5,c.y=.5,b.setXY(w,c.x,c.y),w++;for(l=w,i=0;i<=r;i++){var v=i/r,E=v*u+s,M=Math.cos(E),P=Math.sin(E);h.x=d*P,h.y=C*m,h.z=d*M,y.setXYZ(w,h.x,h.y,h.z),_.setXYZ(w,0,m,0),c.x=.5*M+.5,c.y=.5*P*m+.5,b.setXY(w,c.x,c.y),w++}for(i=0;i<r;i++){var T=a+i,O=l+i;n===!0?(g.setX(x,O),x++,g.setX(x,O+1),x++,g.setX(x,T),x++):(g.setX(x,O+1),x++,g.setX(x,O),x++,g.setX(x,T),x++),f+=3}p.addGroup(S,f,n===!0?1:2),S+=f}o.BufferGeometry.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:u};var p=this;t=void 0!==t?t:20,e=void 0!==e?e:20,n=void 0!==n?n:100,r=Math.floor(r)||8,i=Math.floor(i)||1,a=void 0!==a&&a,s=void 0!==s?s:0,u=void 0!==u?u:2*Math.PI;var d=0;a===!1&&(t>0&&d++,e>0&&d++);var m=l(),v=c(),g=new o.BufferAttribute(new(v>65535?Uint32Array:Uint16Array)(v),1),y=new o.BufferAttribute(new Float32Array(3*m),3),_=new o.BufferAttribute(new Float32Array(3*m),3),b=new o.BufferAttribute(new Float32Array(2*m),2),w=0,x=0,E=[],C=n/2,S=0;h(),a===!1&&(t>0&&f(!0),e>0&&f(!1)),this.setIndex(g),this.addAttribute("position",y),this.addAttribute("normal",_),this.addAttribute("uv",b)},o.CylinderBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.CylinderBufferGeometry.prototype.constructor=o.CylinderBufferGeometry,o.CylinderGeometry=function(t,e,n,r,i,a,s,u){o.Geometry.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:u},this.fromBufferGeometry(new o.CylinderBufferGeometry(t,e,n,r,i,a,s,u)),this.mergeVertices()},o.CylinderGeometry.prototype=Object.create(o.Geometry.prototype),o.CylinderGeometry.prototype.constructor=o.CylinderGeometry,o.ConeBufferGeometry=function(t,e,n,r,i,a,s){o.CylinderBufferGeometry.call(this,0,t,e,n,r,i,a,s),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,thetaStart:a,thetaLength:s}},o.ConeBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.ConeBufferGeometry.prototype.constructor=o.ConeBufferGeometry,o.ConeGeometry=function(t,e,n,r,i,a,s){o.CylinderGeometry.call(this,0,t,e,n,r,i,a,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:s}},o.ConeGeometry.prototype=Object.create(o.CylinderGeometry.prototype),o.ConeGeometry.prototype.constructor=o.ConeGeometry,o.EdgesGeometry=function(t,e){function n(t,e){return t-e}o.BufferGeometry.call(this),e=void 0!==e?e:1;var r,i=Math.cos(o.Math.DEG2RAD*e),a=[0,0],s={},u=["a","b","c"];t instanceof o.BufferGeometry?(r=new o.Geometry,r.fromBufferGeometry(t)):r=t.clone(),r.mergeVertices(),r.computeFaceNormals();for(var l=r.vertices,c=r.faces,h=0,f=c.length;h<f;h++)for(var p=c[h],d=0;d<3;d++){a[0]=p[u[d]],a[1]=p[u[(d+1)%3]],a.sort(n);var m=a.toString();void 0===s[m]?s[m]={vert1:a[0],vert2:a[1],face1:h,face2:void 0}:s[m].face2=h}var v=[];for(var m in s){var g=s[m];if(void 0===g.face2||c[g.face1].normal.dot(c[g.face2].normal)<=i){var y=l[g.vert1];v.push(y.x),v.push(y.y),v.push(y.z),y=l[g.vert2],v.push(y.x),v.push(y.y),v.push(y.z)}}this.addAttribute("position",new o.BufferAttribute(new Float32Array(v),3))},o.EdgesGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.EdgesGeometry.prototype.constructor=o.EdgesGeometry,o.ExtrudeGeometry=function(t,e){return"undefined"==typeof t?void(t=[]):(o.Geometry.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),void this.computeFaceNormals())},o.ExtrudeGeometry.prototype=Object.create(o.Geometry.prototype),o.ExtrudeGeometry.prototype.constructor=o.ExtrudeGeometry,o.ExtrudeGeometry.prototype.addShapeList=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r];this.addShape(i,e)}},o.ExtrudeGeometry.prototype.addShape=function(t,e){function n(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function r(t,e,n){var r,i,a=1,s=t.x-e.x,u=t.y-e.y,l=n.x-t.x,c=n.y-t.y,h=s*s+u*u,f=s*c-u*l;if(Math.abs(f)>Number.EPSILON){var p=Math.sqrt(h),d=Math.sqrt(l*l+c*c),m=e.x-u/p,v=e.y+s/p,g=n.x-c/d,y=n.y+l/d,_=((g-m)*c-(y-v)*l)/(s*c-u*l);r=m+s*_-t.x,i=v+u*_-t.y;var b=r*r+i*i;if(b<=2)return new o.Vector2(r,i);a=Math.sqrt(b/2)}else{var w=!1;s>Number.EPSILON?l>Number.EPSILON&&(w=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(w=!0):Math.sign(u)===Math.sign(c)&&(w=!0),w?(r=-u,i=s,a=Math.sqrt(h)):(r=s,i=u,a=Math.sqrt(h/2))}return new o.Vector2(r/a,i/a)}function i(){if(b){var t=0,e=G*t;for(X=0;X<H;X++)z=D[X],l(z[2]+e,z[1]+e,z[0]+e);for(t=x+2*_,e=G*t,X=0;X<H;X++)z=D[X],l(z[0]+e,z[1]+e,z[2]+e)}else{for(X=0;X<H;X++)z=D[X],l(z[2],z[1],z[0]);for(X=0;X<H;X++)z=D[X],l(z[0]+G*x,z[1]+G*x,z[2]+G*x)}}function a(){var t=0;for(s(j,t),t+=j.length,P=0,T=I.length;P<T;P++)M=I[P],s(M,t),t+=M.length}function s(t,e){var n,r;for(X=t.length;--X>=0;){n=X,r=X-1,r<0&&(r=t.length-1);var i=0,o=x+2*_;for(i=0;i<o;i++){var a=G*i,s=G*(i+1),u=e+n+a,l=e+r+a,h=e+r+s,f=e+n+s;c(u,l,h,f,t,i,o,n,r)}}}function u(t,e,n){O.vertices.push(new o.Vector3(t,e,n))}function l(t,e,n){t+=A,e+=A,n+=A,O.faces.push(new o.Face3(t,e,n,null,null,0));var r=S.generateTopUV(O,t,e,n);O.faceVertexUvs[0].push(r)}function c(t,e,n,r,i,a,s,u,l){t+=A,e+=A,n+=A,r+=A,O.faces.push(new o.Face3(t,e,r,null,null,1)),O.faces.push(new o.Face3(e,n,r,null,null,1));var c=S.generateSideWallUV(O,t,e,n,r);O.faceVertexUvs[0].push([c[0],c[1],c[3]]),O.faceVertexUvs[0].push([c[1],c[2],c[3]])}var h,f,p,d,m,v=void 0!==e.amount?e.amount:100,g=void 0!==e.bevelThickness?e.bevelThickness:6,y=void 0!==e.bevelSize?e.bevelSize:g-2,_=void 0!==e.bevelSegments?e.bevelSegments:3,b=void 0===e.bevelEnabled||e.bevelEnabled,w=void 0!==e.curveSegments?e.curveSegments:12,x=void 0!==e.steps?e.steps:1,E=e.extrudePath,C=!1,S=void 0!==e.UVGenerator?e.UVGenerator:o.ExtrudeGeometry.WorldUVGenerator;E&&(h=E.getSpacedPoints(x),C=!0,b=!1,f=void 0!==e.frames?e.frames:new o.TubeGeometry.FrenetFrames(E,x,(!1)),p=new o.Vector3,d=new o.Vector3,m=new o.Vector3),b||(_=0,g=0,y=0);var M,P,T,O=this,A=this.vertices.length,R=t.extractPoints(w),L=R.shape,I=R.holes,k=!o.ShapeUtils.isClockWise(L);if(k){for(L=L.reverse(),P=0,T=I.length;P<T;P++)M=I[P],o.ShapeUtils.isClockWise(M)&&(I[P]=M.reverse());k=!1}var D=o.ShapeUtils.triangulateShape(L,I),j=L;for(P=0,T=I.length;P<T;P++)M=I[P],L=L.concat(M);for(var N,B,F,U,V,z,G=L.length,H=D.length,W=[],X=0,q=j.length,Y=q-1,K=X+1;X<q;X++,Y++,K++)Y===q&&(Y=0),K===q&&(K=0),W[X]=r(j[X],j[Y],j[K]);var Z,J=[],Q=W.concat();for(P=0,T=I.length;P<T;P++){for(M=I[P],Z=[],X=0,q=M.length,Y=q-1,K=X+1;X<q;X++,Y++,K++)Y===q&&(Y=0),K===q&&(K=0),Z[X]=r(M[X],M[Y],M[K]);J.push(Z),Q=Q.concat(Z)}for(N=0;N<_;N++){for(F=N/_,U=g*(1-F),B=y*Math.sin(F*Math.PI/2),X=0,q=j.length;X<q;X++)V=n(j[X],W[X],B),u(V.x,V.y,-U);for(P=0,T=I.length;P<T;P++)for(M=I[P],Z=J[P],X=0,q=M.length;X<q;X++)V=n(M[X],Z[X],B),u(V.x,V.y,-U)}for(B=y,X=0;X<G;X++)V=b?n(L[X],Q[X],B):L[X],C?(d.copy(f.normals[0]).multiplyScalar(V.x),p.copy(f.binormals[0]).multiplyScalar(V.y),m.copy(h[0]).add(d).add(p),u(m.x,m.y,m.z)):u(V.x,V.y,0);var $;for($=1;$<=x;$++)for(X=0;X<G;X++)V=b?n(L[X],Q[X],B):L[X],C?(d.copy(f.normals[$]).multiplyScalar(V.x),p.copy(f.binormals[$]).multiplyScalar(V.y),m.copy(h[$]).add(d).add(p),u(m.x,m.y,m.z)):u(V.x,V.y,v/x*$);for(N=_-1;N>=0;N--){for(F=N/_,U=g*(1-F),B=y*Math.sin(F*Math.PI/2),X=0,q=j.length;X<q;X++)V=n(j[X],W[X],B),u(V.x,V.y,v+U);for(P=0,T=I.length;P<T;P++)for(M=I[P],Z=J[P],X=0,q=M.length;X<q;X++)V=n(M[X],Z[X],B),C?u(V.x,V.y+h[x-1].y,h[x-1].x+U):u(V.x,V.y,v+U)}i(),a()},o.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(t,e,n,r){var i=t.vertices,a=i[e],s=i[n],u=i[r];return[new o.Vector2(a.x,a.y),new o.Vector2(s.x,s.y),new o.Vector2(u.x,u.y)]},generateSideWallUV:function(t,e,n,r,i){var a=t.vertices,s=a[e],u=a[n],l=a[r],c=a[i];return Math.abs(s.y-u.y)<.01?[new o.Vector2(s.x,1-s.z),new o.Vector2(u.x,1-u.z),new o.Vector2(l.x,1-l.z),new o.Vector2(c.x,1-c.z)]:[new o.Vector2(s.y,1-s.z),new o.Vector2(u.y,1-u.z),new o.Vector2(l.y,1-l.z),new o.Vector2(c.y,1-c.z)]}},o.ShapeGeometry=function(t,e){o.Geometry.call(this),this.type="ShapeGeometry",Array.isArray(t)===!1&&(t=[t]),this.addShapeList(t,e),this.computeFaceNormals()},o.ShapeGeometry.prototype=Object.create(o.Geometry.prototype),o.ShapeGeometry.prototype.constructor=o.ShapeGeometry,o.ShapeGeometry.prototype.addShapeList=function(t,e){for(var n=0,r=t.length;n<r;n++)this.addShape(t[n],e);return this},o.ShapeGeometry.prototype.addShape=function(t,e){void 0===e&&(e={});var n,r,i,a=void 0!==e.curveSegments?e.curveSegments:12,s=e.material,u=void 0===e.UVGenerator?o.ExtrudeGeometry.WorldUVGenerator:e.UVGenerator,l=this.vertices.length,c=t.extractPoints(a),h=c.shape,f=c.holes,p=!o.ShapeUtils.isClockWise(h);if(p){for(h=h.reverse(),n=0,r=f.length;n<r;n++)i=f[n],o.ShapeUtils.isClockWise(i)&&(f[n]=i.reverse());p=!1}var d=o.ShapeUtils.triangulateShape(h,f);for(n=0,r=f.length;n<r;n++)i=f[n],h=h.concat(i);var m,v,g=h.length,y=d.length;for(n=0;n<g;n++)m=h[n],this.vertices.push(new o.Vector3(m.x,m.y,0));for(n=0;n<y;n++){v=d[n];var _=v[0]+l,b=v[1]+l,w=v[2]+l;this.faces.push(new o.Face3(_,b,w,null,null,s)),this.faceVertexUvs[0].push(u.generateTopUV(this,_,b,w))}},o.LatheBufferGeometry=function(t,e,n,r){o.BufferGeometry.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=o.Math.clamp(r,0,2*Math.PI);var i,a,s,u=(e+1)*t.length,l=e*t.length*2*3,c=new o.BufferAttribute(new(l>65535?Uint32Array:Uint16Array)(l),1),h=new o.BufferAttribute(new Float32Array(3*u),3),f=new o.BufferAttribute(new Float32Array(2*u),2),p=0,d=0,m=(1/(t.length-1),1/e),v=new o.Vector3,g=new o.Vector2;for(a=0;a<=e;a++){var y=n+a*m*r,_=Math.sin(y),b=Math.cos(y);for(s=0;s<=t.length-1;s++)v.x=t[s].x*_,v.y=t[s].y,v.z=t[s].x*b,h.setXYZ(p,v.x,v.y,v.z),g.x=a/e,g.y=s/(t.length-1),f.setXY(p,g.x,g.y),p++}for(a=0;a<e;a++)for(s=0;s<t.length-1;s++){i=s+a*t.length;var w=i,x=i+t.length,E=i+t.length+1,C=i+1;c.setX(d,w),d++,c.setX(d,x),d++,c.setX(d,C),d++,c.setX(d,x),d++,c.setX(d,E),d++,c.setX(d,C),d++}if(this.setIndex(c),this.addAttribute("position",h),this.addAttribute("uv",f),this.computeVertexNormals(),r===2*Math.PI){var S=this.attributes.normal.array,M=new o.Vector3,P=new o.Vector3,T=new o.Vector3;for(i=e*t.length*3,a=0,s=0;a<t.length;a++,s+=3)M.x=S[s+0],M.y=S[s+1],M.z=S[s+2],P.x=S[i+s+0],P.y=S[i+s+1],P.z=S[i+s+2],T.addVectors(M,P).normalize(),S[s+0]=S[i+s+0]=T.x,S[s+1]=S[i+s+1]=T.y,S[s+2]=S[i+s+2]=T.z}},o.LatheBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.LatheBufferGeometry.prototype.constructor=o.LatheBufferGeometry,o.LatheGeometry=function(t,e,n,r){o.Geometry.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new o.LatheBufferGeometry(t,e,n,r)),this.mergeVertices()},o.LatheGeometry.prototype=Object.create(o.Geometry.prototype),o.LatheGeometry.prototype.constructor=o.LatheGeometry,o.PlaneGeometry=function(t,e,n,r){o.Geometry.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new o.PlaneBufferGeometry(t,e,n,r))},o.PlaneGeometry.prototype=Object.create(o.Geometry.prototype),o.PlaneGeometry.prototype.constructor=o.PlaneGeometry,o.PlaneBufferGeometry=function(t,e,n,r){o.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};for(var i=t/2,a=e/2,s=Math.floor(n)||1,u=Math.floor(r)||1,l=s+1,c=u+1,h=t/s,f=e/u,p=new Float32Array(l*c*3),d=new Float32Array(l*c*3),m=new Float32Array(l*c*2),v=0,g=0,y=0;y<c;y++)for(var _=y*f-a,b=0;b<l;b++){var w=b*h-i;p[v]=w,p[v+1]=-_,d[v+2]=1,m[g]=b/s,m[g+1]=1-y/u,v+=3,g+=2}v=0;for(var x=new(p.length/3>65535?Uint32Array:Uint16Array)(s*u*6),y=0;y<u;y++)for(var b=0;b<s;b++){var E=b+l*y,C=b+l*(y+1),S=b+1+l*(y+1),M=b+1+l*y;x[v]=E,x[v+1]=C,x[v+2]=M,x[v+3]=C,x[v+4]=S,x[v+5]=M,v+=6}this.setIndex(new o.BufferAttribute(x,1)),this.addAttribute("position",new o.BufferAttribute(p,3)),this.addAttribute("normal",new o.BufferAttribute(d,3)),this.addAttribute("uv",new o.BufferAttribute(m,2))},o.PlaneBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.PlaneBufferGeometry.prototype.constructor=o.PlaneBufferGeometry,o.RingBufferGeometry=function(t,e,n,r,i,a){o.BufferGeometry.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},t=t||20,e=e||50,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):1;var s,u,l,c=(n+1)*(r+1),h=n*r*2*3,f=new o.BufferAttribute(new(h>65535?Uint32Array:Uint16Array)(h),1),p=new o.BufferAttribute(new Float32Array(3*c),3),d=new o.BufferAttribute(new Float32Array(3*c),3),m=new o.BufferAttribute(new Float32Array(2*c),2),v=0,g=0,y=t,_=(e-t)/r,b=new o.Vector3,w=new o.Vector2;for(u=0;u<=r;u++){for(l=0;l<=n;l++)s=i+l/n*a,b.x=y*Math.cos(s),b.y=y*Math.sin(s),p.setXYZ(v,b.x,b.y,b.z),d.setXYZ(v,0,0,1),w.x=(b.x/e+1)/2,w.y=(b.y/e+1)/2,m.setXY(v,w.x,w.y),v++;y+=_}for(u=0;u<r;u++){var x=u*(n+1);for(l=0;l<n;l++){s=l+x;var E=s,C=s+n+1,S=s+n+2,M=s+1;f.setX(g,E),g++,f.setX(g,C),g++,f.setX(g,S),g++,f.setX(g,E),g++,f.setX(g,S),g++,f.setX(g,M),g++}}this.setIndex(f),this.addAttribute("position",p),this.addAttribute("normal",d),this.addAttribute("uv",m)},o.RingBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.RingBufferGeometry.prototype.constructor=o.RingBufferGeometry,o.RingGeometry=function(t,e,n,r,i,a){o.Geometry.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new o.RingBufferGeometry(t,e,n,r,i,a))},o.RingGeometry.prototype=Object.create(o.Geometry.prototype),o.RingGeometry.prototype.constructor=o.RingGeometry,o.SphereGeometry=function(t,e,n,r,i,a,s){o.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new o.SphereBufferGeometry(t,e,n,r,i,a,s))},o.SphereGeometry.prototype=Object.create(o.Geometry.prototype),o.SphereGeometry.prototype.constructor=o.SphereGeometry,o.SphereBufferGeometry=function(t,e,n,r,i,a,s){o.BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},t=t||50,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,a=void 0!==a?a:0,s=void 0!==s?s:Math.PI;for(var u=a+s,l=(e+1)*(n+1),c=new o.BufferAttribute(new Float32Array(3*l),3),h=new o.BufferAttribute(new Float32Array(3*l),3),f=new o.BufferAttribute(new Float32Array(2*l),2),p=0,d=[],m=new o.Vector3,v=0;v<=n;v++){for(var g=[],y=v/n,_=0;_<=e;_++){var b=_/e,w=-t*Math.cos(r+b*i)*Math.sin(a+y*s),x=t*Math.cos(a+y*s),E=t*Math.sin(r+b*i)*Math.sin(a+y*s);m.set(w,x,E).normalize(),c.setXYZ(p,w,x,E),h.setXYZ(p,m.x,m.y,m.z),f.setXY(p,b,1-y),g.push(p),p++}d.push(g)}for(var C=[],v=0;v<n;v++)for(var _=0;_<e;_++){var S=d[v][_+1],M=d[v][_],P=d[v+1][_],T=d[v+1][_+1];(0!==v||a>0)&&C.push(S,M,T),(v!==n-1||u<Math.PI)&&C.push(M,P,T)}this.setIndex(new(c.count>65535?o.Uint32Attribute:o.Uint16Attribute)(C,1)),this.addAttribute("position",c),this.addAttribute("normal",h),this.addAttribute("uv",f),this.boundingSphere=new o.Sphere(new o.Vector3,t)},o.SphereBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.SphereBufferGeometry.prototype.constructor=o.SphereBufferGeometry,o.TextGeometry=function(t,e){e=e||{};var n=e.font;if(n instanceof o.Font==!1)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new o.Geometry;var r=n.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),o.ExtrudeGeometry.call(this,r,e),this.type="TextGeometry"},o.TextGeometry.prototype=Object.create(o.ExtrudeGeometry.prototype),o.TextGeometry.prototype.constructor=o.TextGeometry,o.TorusBufferGeometry=function(t,e,n,r,i){o.BufferGeometry.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},t=t||100,e=e||40,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var a,s,u=(n+1)*(r+1),l=n*r*2*3,c=new(l>65535?Uint32Array:Uint16Array)(l),h=new Float32Array(3*u),f=new Float32Array(3*u),p=new Float32Array(2*u),d=0,m=0,v=0,g=new o.Vector3,y=new o.Vector3,_=new o.Vector3;for(a=0;a<=n;a++)for(s=0;s<=r;s++){var b=s/r*i,w=a/n*Math.PI*2;y.x=(t+e*Math.cos(w))*Math.cos(b),y.y=(t+e*Math.cos(w))*Math.sin(b),y.z=e*Math.sin(w),h[d]=y.x,h[d+1]=y.y,h[d+2]=y.z,g.x=t*Math.cos(b),g.y=t*Math.sin(b),_.subVectors(y,g).normalize(),f[d]=_.x,f[d+1]=_.y,f[d+2]=_.z,p[m]=s/r,p[m+1]=a/n,d+=3,m+=2}for(a=1;a<=n;a++)for(s=1;s<=r;s++){var x=(r+1)*a+s-1,E=(r+1)*(a-1)+s-1,C=(r+1)*(a-1)+s,S=(r+1)*a+s;c[v]=x,c[v+1]=E,c[v+2]=S,c[v+3]=E,c[v+4]=C,c[v+5]=S,v+=6}this.setIndex(new o.BufferAttribute(c,1)),this.addAttribute("position",new o.BufferAttribute(h,3)),this.addAttribute("normal",new o.BufferAttribute(f,3)),this.addAttribute("uv",new o.BufferAttribute(p,2))},o.TorusBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.TorusBufferGeometry.prototype.constructor=o.TorusBufferGeometry,o.TorusGeometry=function(t,e,n,r,i){o.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new o.TorusBufferGeometry(t,e,n,r,i))},o.TorusGeometry.prototype=Object.create(o.Geometry.prototype),o.TorusGeometry.prototype.constructor=o.TorusGeometry,o.TorusKnotBufferGeometry=function(t,e,n,r,i,a){function s(t,e,n,r,i){var o=Math.cos(t),a=Math.sin(t),s=n/e*t,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}o.BufferGeometry.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:a},t=t||100,e=e||40,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,a=a||3;var u,l,c=(r+1)*(n+1),h=r*n*2*3,f=new o.BufferAttribute(new(h>65535?Uint32Array:Uint16Array)(h),1),p=new o.BufferAttribute(new Float32Array(3*c),3),d=new o.BufferAttribute(new Float32Array(3*c),3),m=new o.BufferAttribute(new Float32Array(2*c),2),v=0,g=0,y=new o.Vector3,_=new o.Vector3,b=new o.Vector2,w=new o.Vector3,x=new o.Vector3,E=new o.Vector3,C=new o.Vector3,S=new o.Vector3;for(u=0;u<=n;++u){var M=u/n*i*Math.PI*2;for(s(M,i,a,t,w),s(M+.01,i,a,t,x),C.subVectors(x,w),S.addVectors(x,w),E.crossVectors(C,S),S.crossVectors(E,C),E.normalize(),S.normalize(),l=0;l<=r;++l){var P=l/r*Math.PI*2,T=-e*Math.cos(P),O=e*Math.sin(P);y.x=w.x+(T*S.x+O*E.x),y.y=w.y+(T*S.y+O*E.y),y.z=w.z+(T*S.z+O*E.z),p.setXYZ(v,y.x,y.y,y.z),_.subVectors(y,w).normalize(),d.setXYZ(v,_.x,_.y,_.z),b.x=u/n,b.y=l/r,m.setXY(v,b.x,b.y),v++}}for(l=1;l<=n;l++)for(u=1;u<=r;u++){var A=(r+1)*(l-1)+(u-1),R=(r+1)*l+(u-1),L=(r+1)*l+u,I=(r+1)*(l-1)+u;f.setX(g,A),g++,f.setX(g,R),g++,f.setX(g,I),g++,f.setX(g,R),g++,f.setX(g,L),g++,f.setX(g,I),g++}this.setIndex(f),this.addAttribute("position",p),this.addAttribute("normal",d),this.addAttribute("uv",m)},o.TorusKnotBufferGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.TorusKnotBufferGeometry.prototype.constructor=o.TorusKnotBufferGeometry,o.TorusKnotGeometry=function(t,e,n,r,i,a,s){o.Geometry.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:a},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new o.TorusKnotBufferGeometry(t,e,n,r,i,a)),this.mergeVertices()},o.TorusKnotGeometry.prototype=Object.create(o.Geometry.prototype),o.TorusKnotGeometry.prototype.constructor=o.TorusKnotGeometry,o.TubeGeometry=function(t,e,n,r,i,a){function s(t,e,n){return A.vertices.push(new o.Vector3(t,e,n))-1}o.Geometry.call(this),this.type="TubeGeometry",this.parameters={path:t,segments:e,radius:n,radialSegments:r,closed:i,taper:a},e=e||64,n=n||1,r=r||8,i=i||!1,a=a||o.TubeGeometry.NoTaper;var u,l,c,h,f,p,d,m,v,g,y,_,b,w,x,E,C,S,M,P,T,O=[],A=this,R=e+1,L=new o.Vector3,I=new o.TubeGeometry.FrenetFrames(t,e,i),k=I.tangents,D=I.normals,j=I.binormals;for(this.tangents=k,this.normals=D,this.binormals=j,g=0;g<R;g++)for(O[g]=[],h=g/(R-1),v=t.getPointAt(h),u=k[g],l=D[g],c=j[g],p=n*a(h),y=0;y<r;y++)f=y/r*2*Math.PI,d=-p*Math.cos(f),m=p*Math.sin(f),L.copy(v),L.x+=d*l.x+m*c.x,L.y+=d*l.y+m*c.y,L.z+=d*l.z+m*c.z,O[g][y]=s(L.x,L.y,L.z);for(g=0;g<e;g++)for(y=0;y<r;y++)_=i?(g+1)%e:g+1,b=(y+1)%r,w=O[g][y],x=O[_][y],E=O[_][b],C=O[g][b],S=new o.Vector2(g/e,y/r),M=new o.Vector2((g+1)/e,y/r),P=new o.Vector2((g+1)/e,(y+1)/r),T=new o.Vector2(g/e,(y+1)/r),this.faces.push(new o.Face3(w,x,C)),this.faceVertexUvs[0].push([S,M,T]),this.faces.push(new o.Face3(x,E,C)),this.faceVertexUvs[0].push([M.clone(),P,T.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},o.TubeGeometry.prototype=Object.create(o.Geometry.prototype),o.TubeGeometry.prototype.constructor=o.TubeGeometry,o.TubeGeometry.NoTaper=function(t){return 1},o.TubeGeometry.SinusoidalTaper=function(t){return Math.sin(Math.PI*t)},o.TubeGeometry.FrenetFrames=function(t,e,n){function r(){d[0]=new o.Vector3,m[0]=new o.Vector3,a=Number.MAX_VALUE,s=Math.abs(p[0].x),u=Math.abs(p[0].y),l=Math.abs(p[0].z),s<=a&&(a=s,f.set(1,0,0)),u<=a&&(a=u,f.set(0,1,0)),l<=a&&f.set(0,0,1),v.crossVectors(p[0],f).normalize(),d[0].crossVectors(p[0],v),m[0].crossVectors(p[0],d[0])}var i,a,s,u,l,c,h,f=new o.Vector3,p=[],d=[],m=[],v=new o.Vector3,g=new o.Matrix4,y=e+1;for(this.tangents=p,this.normals=d,this.binormals=m,c=0;c<y;c++)h=c/(y-1),p[c]=t.getTangentAt(h),p[c].normalize();for(r(),c=1;c<y;c++)d[c]=d[c-1].clone(),m[c]=m[c-1].clone(),v.crossVectors(p[c-1],p[c]),v.length()>Number.EPSILON&&(v.normalize(),i=Math.acos(o.Math.clamp(p[c-1].dot(p[c]),-1,1)),d[c].applyMatrix4(g.makeRotationAxis(v,i))),m[c].crossVectors(p[c],d[c]);if(n)for(i=Math.acos(o.Math.clamp(d[0].dot(d[y-1]),-1,1)),i/=y-1,p[0].dot(v.crossVectors(d[0],d[y-1]))>0&&(i=-i),c=1;c<y;c++)d[c].applyMatrix4(g.makeRotationAxis(p[c],i*c)),m[c].crossVectors(p[c],d[c])},o.PolyhedronGeometry=function(t,e,n,r){function i(t){var e=t.normalize().clone();e.index=h.vertices.push(e)-1;var n=u(t)/2/Math.PI+.5,r=l(t)/Math.PI+.5;return e.uv=new o.Vector2(n,1-r),e}function a(t,e,n){var r=new o.Face3(t.index,e.index,n.index,[t.clone(),e.clone(),n.clone()]);h.faces.push(r),b.copy(t).add(e).add(n).divideScalar(3);var i=u(b);h.faceVertexUvs[0].push([c(t.uv,t,i),c(e.uv,e,i),c(n.uv,n,i)])}function s(t,e){for(var n=Math.pow(2,e),r=i(h.vertices[t.a]),o=i(h.vertices[t.b]),s=i(h.vertices[t.c]),u=[],l=0;l<=n;l++){u[l]=[];for(var c=i(r.clone().lerp(s,l/n)),f=i(o.clone().lerp(s,l/n)),p=n-l,d=0;d<=p;d++)0===d&&l===n?u[l][d]=c:u[l][d]=i(c.clone().lerp(f,d/p))}for(var l=0;l<n;l++)for(var d=0;d<2*(n-l)-1;d++){var m=Math.floor(d/2);d%2===0?a(u[l][m+1],u[l+1][m],u[l][m]):a(u[l][m+1],u[l+1][m+1],u[l+1][m])}}function u(t){return Math.atan2(t.z,-t.x)}function l(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}function c(t,e,n){return n<0&&1===t.x&&(t=new o.Vector2(t.x-1,t.y)),0===e.x&&0===e.z&&(t=new o.Vector2(n/2/Math.PI+.5,t.y)),t.clone()}o.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1,r=r||0;for(var h=this,f=0,p=t.length;f<p;f+=3)i(new o.Vector3(t[f],t[f+1],t[f+2]));for(var d=this.vertices,m=[],f=0,v=0,p=e.length;f<p;f+=3,v++){var g=d[e[f]],y=d[e[f+1]],_=d[e[f+2]];m[v]=new o.Face3(g.index,y.index,_.index,[g.clone(),y.clone(),_.clone()]);
}for(var b=new o.Vector3,f=0,p=m.length;f<p;f++)s(m[f],r);for(var f=0,p=this.faceVertexUvs[0].length;f<p;f++){var w=this.faceVertexUvs[0][f],x=w[0].x,E=w[1].x,C=w[2].x,S=Math.max(x,E,C),M=Math.min(x,E,C);S>.9&&M<.1&&(x<.2&&(w[0].x+=1),E<.2&&(w[1].x+=1),C<.2&&(w[2].x+=1))}for(var f=0,p=this.vertices.length;f<p;f++)this.vertices[f].multiplyScalar(n);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new o.Sphere(new o.Vector3,n)},o.PolyhedronGeometry.prototype=Object.create(o.Geometry.prototype),o.PolyhedronGeometry.prototype.constructor=o.PolyhedronGeometry,o.DodecahedronGeometry=function(t,e){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];o.PolyhedronGeometry.call(this,i,a,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}},o.DodecahedronGeometry.prototype=Object.create(o.PolyhedronGeometry.prototype),o.DodecahedronGeometry.prototype.constructor=o.DodecahedronGeometry,o.IcosahedronGeometry=function(t,e){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];o.PolyhedronGeometry.call(this,r,i,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}},o.IcosahedronGeometry.prototype=Object.create(o.PolyhedronGeometry.prototype),o.IcosahedronGeometry.prototype.constructor=o.IcosahedronGeometry,o.OctahedronGeometry=function(t,e){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];o.PolyhedronGeometry.call(this,n,r,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}},o.OctahedronGeometry.prototype=Object.create(o.PolyhedronGeometry.prototype),o.OctahedronGeometry.prototype.constructor=o.OctahedronGeometry,o.TetrahedronGeometry=function(t,e){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];o.PolyhedronGeometry.call(this,n,r,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}},o.TetrahedronGeometry.prototype=Object.create(o.PolyhedronGeometry.prototype),o.TetrahedronGeometry.prototype.constructor=o.TetrahedronGeometry,o.ParametricGeometry=function(t,e,n){o.Geometry.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n};var r,i,a,s,u,l=this.vertices,c=this.faces,h=this.faceVertexUvs[0],f=e+1;for(r=0;r<=n;r++)for(u=r/n,i=0;i<=e;i++)s=i/e,a=t(s,u),l.push(a);var p,d,m,v,g,y,_,b;for(r=0;r<n;r++)for(i=0;i<e;i++)p=r*f+i,d=r*f+i+1,m=(r+1)*f+i+1,v=(r+1)*f+i,g=new o.Vector2(i/e,r/n),y=new o.Vector2((i+1)/e,r/n),_=new o.Vector2((i+1)/e,(r+1)/n),b=new o.Vector2(i/e,(r+1)/n),c.push(new o.Face3(p,d,v)),h.push([g,y,b]),c.push(new o.Face3(d,m,v)),h.push([y.clone(),_,b.clone()]);this.computeFaceNormals(),this.computeVertexNormals()},o.ParametricGeometry.prototype=Object.create(o.Geometry.prototype),o.ParametricGeometry.prototype.constructor=o.ParametricGeometry,o.WireframeGeometry=function(t){function e(t,e){return t-e}o.BufferGeometry.call(this);var n=[0,0],r={},i=["a","b","c"];if(t instanceof o.Geometry){for(var a=t.vertices,s=t.faces,u=0,l=new Uint32Array(6*s.length),c=0,h=s.length;c<h;c++)for(var f=s[c],p=0;p<3;p++){n[0]=f[i[p]],n[1]=f[i[(p+1)%3]],n.sort(e);var d=n.toString();void 0===r[d]&&(l[2*u]=n[0],l[2*u+1]=n[1],r[d]=!0,u++)}for(var m=new Float32Array(2*u*3),c=0,h=u;c<h;c++)for(var p=0;p<2;p++){var v=a[l[2*c+p]],g=6*c+3*p;m[g+0]=v.x,m[g+1]=v.y,m[g+2]=v.z}this.addAttribute("position",new o.BufferAttribute(m,3))}else if(t instanceof o.BufferGeometry)if(null!==t.index){var y=t.index.array,a=t.attributes.position,_=t.groups,u=0;0===_.length&&t.addGroup(0,y.length);for(var l=new Uint32Array(2*y.length),b=0,w=_.length;b<w;++b)for(var x=_[b],E=x.start,C=x.count,c=E,S=E+C;c<S;c+=3)for(var p=0;p<3;p++){n[0]=y[c+p],n[1]=y[c+(p+1)%3],n.sort(e);var d=n.toString();void 0===r[d]&&(l[2*u]=n[0],l[2*u+1]=n[1],r[d]=!0,u++)}for(var m=new Float32Array(2*u*3),c=0,h=u;c<h;c++)for(var p=0;p<2;p++){var g=6*c+3*p,M=l[2*c+p];m[g+0]=a.getX(M),m[g+1]=a.getY(M),m[g+2]=a.getZ(M)}this.addAttribute("position",new o.BufferAttribute(m,3))}else{for(var a=t.attributes.position.array,u=a.length/3,P=u/3,m=new Float32Array(2*u*3),c=0,h=P;c<h;c++)for(var p=0;p<3;p++){var g=18*c+6*p,T=9*c+3*p;m[g+0]=a[T],m[g+1]=a[T+1],m[g+2]=a[T+2];var M=9*c+3*((p+1)%3);m[g+3]=a[M],m[g+4]=a[M+1],m[g+5]=a[M+2]}this.addAttribute("position",new o.BufferAttribute(m,3))}},o.WireframeGeometry.prototype=Object.create(o.BufferGeometry.prototype),o.WireframeGeometry.prototype.constructor=o.WireframeGeometry,o.AxisHelper=function(t){t=t||1;var e=new Float32Array([0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),r=new o.BufferGeometry;r.addAttribute("position",new o.BufferAttribute(e,3)),r.addAttribute("color",new o.BufferAttribute(n,3));var i=new o.LineBasicMaterial({vertexColors:o.VertexColors});o.LineSegments.call(this,r,i)},o.AxisHelper.prototype=Object.create(o.LineSegments.prototype),o.AxisHelper.prototype.constructor=o.AxisHelper,o.ArrowHelper=function(){var t=new o.BufferGeometry;t.addAttribute("position",new o.Float32Attribute([0,0,0,0,1,0],3));var e=new o.CylinderBufferGeometry(0,.5,1,5,1);return e.translate(0,-.5,0),function(n,r,i,a,s,u){o.Object3D.call(this),void 0===a&&(a=16776960),void 0===i&&(i=1),void 0===s&&(s=.2*i),void 0===u&&(u=.2*s),this.position.copy(r),this.line=new o.Line(t,new o.LineBasicMaterial({color:a})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new o.Mesh(e,new o.MeshBasicMaterial({color:a})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(i,s,u)}}(),o.ArrowHelper.prototype=Object.create(o.Object3D.prototype),o.ArrowHelper.prototype.constructor=o.ArrowHelper,o.ArrowHelper.prototype.setDirection=function(){var t,e=new o.Vector3;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),o.ArrowHelper.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},o.ArrowHelper.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},o.BoxHelper=function(t,e){void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new o.BufferGeometry;i.setIndex(new o.BufferAttribute(n,1)),i.addAttribute("position",new o.BufferAttribute(r,3)),o.LineSegments.call(this,i,new o.LineBasicMaterial({color:e})),void 0!==t&&this.update(t)},o.BoxHelper.prototype=Object.create(o.LineSegments.prototype),o.BoxHelper.prototype.constructor=o.BoxHelper,o.BoxHelper.prototype.update=function(){var t=new o.Box3;return function(e){if(e instanceof o.Box3?t.copy(e):t.setFromObject(e),!t.isEmpty()){var n=t.min,r=t.max,i=this.geometry.attributes.position,a=i.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=n.x,a[4]=r.y,a[5]=r.z,a[6]=n.x,a[7]=n.y,a[8]=r.z,a[9]=r.x,a[10]=n.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=n.z,a[15]=n.x,a[16]=r.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=r.x,a[22]=n.y,a[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),o.BoundingBoxHelper=function(t,e){var n=void 0!==e?e:8947848;this.object=t,this.box=new o.Box3,o.Mesh.call(this,new o.BoxGeometry(1,1,1),new o.MeshBasicMaterial({color:n,wireframe:!0}))},o.BoundingBoxHelper.prototype=Object.create(o.Mesh.prototype),o.BoundingBoxHelper.prototype.constructor=o.BoundingBoxHelper,o.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},o.CameraHelper=function(t){function e(t,e,r){n(t,r),n(e,r)}function n(t,e){r.vertices.push(new o.Vector3),r.colors.push(new o.Color(e)),void 0===a[t]&&(a[t]=[]),a[t].push(r.vertices.length-1)}var r=new o.Geometry,i=new o.LineBasicMaterial({color:16777215,vertexColors:o.FaceColors}),a={},s=16755200,u=16711680,l=43775,c=16777215,h=3355443;e("n1","n2",s),e("n2","n4",s),e("n4","n3",s),e("n3","n1",s),e("f1","f2",s),e("f2","f4",s),e("f4","f3",s),e("f3","f1",s),e("n1","f1",s),e("n2","f2",s),e("n3","f3",s),e("n4","f4",s),e("p","n1",u),e("p","n2",u),e("p","n3",u),e("p","n4",u),e("u1","u2",l),e("u2","u3",l),e("u3","u1",l),e("c","t",c),e("p","c",h),e("cn1","cn2",h),e("cn3","cn4",h),e("cf1","cf2",h),e("cf3","cf4",h),o.LineSegments.call(this,r,i),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()},o.CameraHelper.prototype=Object.create(o.LineSegments.prototype),o.CameraHelper.prototype.constructor=o.CameraHelper,o.CameraHelper.prototype.update=function(){function t(t,o,a,s){r.set(o,a,s).unproject(i);var u=n[t];if(void 0!==u)for(var l=0,c=u.length;l<c;l++)e.vertices[u[l]].copy(r)}var e,n,r=new o.Vector3,i=new o.Camera;return function(){e=this.geometry,n=this.pointMap;var r=1,o=1;i.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-r,-o,-1),t("n2",r,-o,-1),t("n3",-r,o,-1),t("n4",r,o,-1),t("f1",-r,-o,1),t("f2",r,-o,1),t("f3",-r,o,1),t("f4",r,o,1),t("u1",.7*r,1.1*o,-1),t("u2",.7*-r,1.1*o,-1),t("u3",0,2*o,-1),t("cf1",-r,0,1),t("cf2",r,0,1),t("cf3",0,-o,1),t("cf4",0,o,1),t("cn1",-r,0,-1),t("cn2",r,0,-1),t("cn3",0,-o,-1),t("cn4",0,o,-1),e.verticesNeedUpdate=!0}}(),o.DirectionalLightHelper=function(t,e){o.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,void 0===e&&(e=1);var n=new o.BufferGeometry;n.addAttribute("position",new o.Float32Attribute([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new o.LineBasicMaterial({fog:!1});this.add(new o.Line(n,r)),n=new o.BufferGeometry,n.addAttribute("position",new o.Float32Attribute([0,0,0,0,0,1],3)),this.add(new o.Line(n,r)),this.update()},o.DirectionalLightHelper.prototype=Object.create(o.Object3D.prototype),o.DirectionalLightHelper.prototype.constructor=o.DirectionalLightHelper,o.DirectionalLightHelper.prototype.dispose=function(){var t=this.children[0],e=this.children[1];t.geometry.dispose(),t.material.dispose(),e.geometry.dispose(),e.material.dispose()},o.DirectionalLightHelper.prototype.update=function(){var t=new o.Vector3,e=new o.Vector3,n=new o.Vector3;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t);var r=this.children[0],i=this.children[1];r.lookAt(n),r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.lookAt(n),i.scale.z=n.length()}}(),o.EdgesHelper=function(t,e,n){var r=void 0!==e?e:16777215;o.LineSegments.call(this,new o.EdgesGeometry(t.geometry,n),new o.LineBasicMaterial({color:r})),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},o.EdgesHelper.prototype=Object.create(o.LineSegments.prototype),o.EdgesHelper.prototype.constructor=o.EdgesHelper,o.FaceNormalsHelper=function(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16776960,a=void 0!==r?r:1,s=0,u=this.object.geometry;u instanceof o.Geometry?s=u.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new o.BufferGeometry,c=new o.Float32Attribute(2*s*3,3);l.addAttribute("position",c),o.LineSegments.call(this,l,new o.LineBasicMaterial({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()},o.FaceNormalsHelper.prototype=Object.create(o.LineSegments.prototype),o.FaceNormalsHelper.prototype.constructor=o.FaceNormalsHelper,o.FaceNormalsHelper.prototype.update=function(){var t=new o.Vector3,e=new o.Vector3,n=new o.Matrix3;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,l=0,c=s.length;l<c;l++){var h=s[l],f=h.normal;t.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),e.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),i.setXYZ(u,t.x,t.y,t.z),u+=1,i.setXYZ(u,e.x,e.y,e.z),u+=1}return i.needsUpdate=!0,this}}(),o.GridHelper=function(t,e,n,r){e=e||1,n=new o.Color(void 0!==n?n:4473924),r=new o.Color(void 0!==r?r:8947848);for(var i=e/2,a=2*t/e,s=[],u=[],l=0,c=0,h=-t;l<=e;l++,h+=a){s.push(-t,0,h,t,0,h),s.push(h,0,-t,h,0,t);var f=l===i?n:r;f.toArray(u,c),c+=3,f.toArray(u,c),c+=3,f.toArray(u,c),c+=3,f.toArray(u,c),c+=3}var p=new o.BufferGeometry;p.addAttribute("position",new o.Float32Attribute(s,3)),p.addAttribute("color",new o.Float32Attribute(u,3));var d=new o.LineBasicMaterial({vertexColors:o.VertexColors});o.LineSegments.call(this,p,d)},o.GridHelper.prototype=Object.create(o.LineSegments.prototype),o.GridHelper.prototype.constructor=o.GridHelper,o.GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},o.HemisphereLightHelper=function(t,e){o.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new o.Color,new o.Color];var n=new o.SphereGeometry(e,4,2);n.rotateX(-Math.PI/2);for(var r=0,i=8;r<i;r++)n.faces[r].color=this.colors[r<4?0:1];var a=new o.MeshBasicMaterial({vertexColors:o.FaceColors,wireframe:!0});this.lightSphere=new o.Mesh(n,a),this.add(this.lightSphere),this.update()},o.HemisphereLightHelper.prototype=Object.create(o.Object3D.prototype),o.HemisphereLightHelper.prototype.constructor=o.HemisphereLightHelper,o.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},o.HemisphereLightHelper.prototype.update=function(){var t=new o.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),o.PointLightHelper=function(t,e){this.light=t,this.light.updateMatrixWorld();var n=new o.SphereBufferGeometry(e,4,2),r=new o.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),o.Mesh.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1},o.PointLightHelper.prototype=Object.create(o.Mesh.prototype),o.PointLightHelper.prototype.constructor=o.PointLightHelper,o.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},o.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},o.SkeletonHelper=function(t){this.bones=this.getBoneList(t);for(var e=new o.Geometry,n=0;n<this.bones.length;n++){var r=this.bones[n];r.parent instanceof o.Bone&&(e.vertices.push(new o.Vector3),e.vertices.push(new o.Vector3),e.colors.push(new o.Color(0,0,1)),e.colors.push(new o.Color(0,1,0)))}e.dynamic=!0;var i=new o.LineBasicMaterial({vertexColors:o.VertexColors,depthTest:!1,depthWrite:!1,transparent:!0});o.LineSegments.call(this,e,i),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()},o.SkeletonHelper.prototype=Object.create(o.LineSegments.prototype),o.SkeletonHelper.prototype.constructor=o.SkeletonHelper,o.SkeletonHelper.prototype.getBoneList=function(t){var e=[];t instanceof o.Bone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,this.getBoneList(t.children[n]));return e},o.SkeletonHelper.prototype.update=function(){for(var t=this.geometry,e=(new o.Matrix4).getInverse(this.root.matrixWorld),n=new o.Matrix4,r=0,i=0;i<this.bones.length;i++){var a=this.bones[i];a.parent instanceof o.Bone&&(n.multiplyMatrices(e,a.matrixWorld),t.vertices[r].setFromMatrixPosition(n),n.multiplyMatrices(e,a.parent.matrixWorld),t.vertices[r+1].setFromMatrixPosition(n),r+=2)}t.verticesNeedUpdate=!0,t.computeBoundingSphere()},o.SpotLightHelper=function(t){o.Object3D.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;for(var e=new o.BufferGeometry,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,i=1,a=32;r<a;r++,i++){var s=r/a*Math.PI*2,u=i/a*Math.PI*2;n.push(Math.cos(s),Math.sin(s),1,Math.cos(u),Math.sin(u),1)}e.addAttribute("position",new o.Float32Attribute(n,3));var l=new o.LineBasicMaterial({fog:!1});this.cone=new o.LineSegments(e,l),this.add(this.cone),this.update()},o.SpotLightHelper.prototype=Object.create(o.Object3D.prototype),o.SpotLightHelper.prototype.constructor=o.SpotLightHelper,o.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},o.SpotLightHelper.prototype.update=function(){var t=new o.Vector3,e=new o.Vector3;return function(){var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),o.VertexNormalsHelper=function(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16711680,a=void 0!==r?r:1,s=0,u=this.object.geometry;u instanceof o.Geometry?s=3*u.faces.length:u instanceof o.BufferGeometry&&(s=u.attributes.normal.count);var l=new o.BufferGeometry,c=new o.Float32Attribute(2*s*3,3);l.addAttribute("position",c),o.LineSegments.call(this,l,new o.LineBasicMaterial({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()},o.VertexNormalsHelper.prototype=Object.create(o.LineSegments.prototype),o.VertexNormalsHelper.prototype.constructor=o.VertexNormalsHelper,o.VertexNormalsHelper.prototype.update=function(){var t=new o.Vector3,e=new o.Vector3,n=new o.Matrix3;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,a=this.geometry.attributes.position,s=this.object.geometry;if(s instanceof o.Geometry)for(var u=s.vertices,l=s.faces,c=0,h=0,f=l.length;h<f;h++)for(var p=l[h],d=0,m=p.vertexNormals.length;d<m;d++){var v=u[p[r[d]]],g=p.vertexNormals[d];t.copy(v).applyMatrix4(i),e.copy(g).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),a.setXYZ(c,t.x,t.y,t.z),c+=1,a.setXYZ(c,e.x,e.y,e.z),c+=1}else if(s instanceof o.BufferGeometry)for(var y=s.attributes.position,_=s.attributes.normal,c=0,d=0,m=y.count;d<m;d++)t.set(y.getX(d),y.getY(d),y.getZ(d)).applyMatrix4(i),e.set(_.getX(d),_.getY(d),_.getZ(d)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),a.setXYZ(c,t.x,t.y,t.z),c+=1,a.setXYZ(c,e.x,e.y,e.z),c+=1;return a.needsUpdate=!0,this}}(),o.WireframeHelper=function(t,e){var n=void 0!==e?e:16777215;o.LineSegments.call(this,new o.WireframeGeometry(t.geometry),new o.LineBasicMaterial({color:n})),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1},o.WireframeHelper.prototype=Object.create(o.LineSegments.prototype),o.WireframeHelper.prototype.constructor=o.WireframeHelper,o.ImmediateRenderObject=function(t){o.Object3D.call(this),this.material=t,this.render=function(t){}},o.ImmediateRenderObject.prototype=Object.create(o.Object3D.prototype),o.ImmediateRenderObject.prototype.constructor=o.ImmediateRenderObject,o.MorphBlendMesh=function(t,e){o.Mesh.call(this,t,e),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,r="__default",i=0,a=n-1,s=n/1;this.createAnimation(r,i,a,s),this.setAnimationWeight(r,1)},o.MorphBlendMesh.prototype=Object.create(o.Mesh.prototype),o.MorphBlendMesh.prototype.constructor=o.MorphBlendMesh,o.MorphBlendMesh.prototype.createAnimation=function(t,e,n,r){var i={start:e,end:n,length:n-e+1,fps:r,duration:(n-e)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[t]=i,this.animationsList.push(i)},o.MorphBlendMesh.prototype.autoCreateAnimations=function(t){for(var e,n=/([a-z]+)_?(\d+)/i,r={},i=this.geometry,o=0,a=i.morphTargets.length;o<a;o++){var s=i.morphTargets[o],u=s.name.match(n);if(u&&u.length>1){var l=u[1];r[l]||(r[l]={start:1/0,end:-(1/0)});var c=r[l];o<c.start&&(c.start=o),o>c.end&&(c.end=o),e||(e=l)}}for(var l in r){var c=r[l];this.createAnimation(l,c.start,c.end,t)}this.firstAnimation=e},o.MorphBlendMesh.prototype.setAnimationDirectionForward=function(t){var e=this.animationsMap[t];e&&(e.direction=1,e.directionBackwards=!1)},o.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(t){var e=this.animationsMap[t];e&&(e.direction=-1,e.directionBackwards=!0)},o.MorphBlendMesh.prototype.setAnimationFPS=function(t,e){var n=this.animationsMap[t];n&&(n.fps=e,n.duration=(n.end-n.start)/n.fps)},o.MorphBlendMesh.prototype.setAnimationDuration=function(t,e){var n=this.animationsMap[t];n&&(n.duration=e,n.fps=(n.end-n.start)/n.duration)},o.MorphBlendMesh.prototype.setAnimationWeight=function(t,e){var n=this.animationsMap[t];n&&(n.weight=e)},o.MorphBlendMesh.prototype.setAnimationTime=function(t,e){var n=this.animationsMap[t];n&&(n.time=e)},o.MorphBlendMesh.prototype.getAnimationTime=function(t){var e=0,n=this.animationsMap[t];return n&&(e=n.time),e},o.MorphBlendMesh.prototype.getAnimationDuration=function(t){var e=-1,n=this.animationsMap[t];return n&&(e=n.duration),e},o.MorphBlendMesh.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("THREE.MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},o.MorphBlendMesh.prototype.stopAnimation=function(t){var e=this.animationsMap[t];e&&(e.active=!1)},o.MorphBlendMesh.prototype.update=function(t){for(var e=0,n=this.animationsList.length;e<n;e++){var r=this.animationsList[e];if(r.active){var i=r.duration/r.length;r.time+=r.direction*t,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var a=r.start+o.Math.clamp(Math.floor(r.time/i),0,r.length-1),s=r.weight;a!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*s,this.morphTargetInfluences[a]=0,r.lastFrame=r.currentFrame,r.currentFrame=a);var u=r.time%i/i;r.directionBackwards&&(u=1-u),r.currentFrame!==r.lastFrame?(this.morphTargetInfluences[r.currentFrame]=u*s,this.morphTargetInfluences[r.lastFrame]=(1-u)*s):this.morphTargetInfluences[r.currentFrame]=s}}}},function(t,e,n){"use strict";function r(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function i(t){this.message=t,this.stack=""}function o(t){function e(e,n,r,o,a,s,u){o=o||M,s=s||r;if(null==n[r]){var l=x[a];return e?new i("Required "+l+" `"+s+"` was not specified in "+("`"+o+"`.")):null}return t(n,r,o,a,s)}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function a(t){function e(e,n,r,o,a,s){var u=e[n],l=y(u);if(l!==t){var c=x[o],h=_(u);return new i("Invalid "+c+" `"+a+"` of type "+("`"+h+"` supplied to `"+r+"`, expected ")+("`"+t+"`."))}return null}return o(e)}function s(){return o(C.thatReturns(null))}function u(t){function e(e,n,r,o,a){if("function"!=typeof t)return new i("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=e[n];if(!Array.isArray(s)){var u=x[o],l=y(s);return new i("Invalid "+u+" `"+a+"` of type "+("`"+l+"` supplied to `"+r+"`, expected an array."))}for(var c=0;c<s.length;c++){var h=t(s,c,r,o,a+"["+c+"]",E);if(h instanceof Error)return h}return null}return o(e)}function l(){function t(t,e,n,r,o){var a=t[e];if(!w.isValidElement(a)){var s=x[r],u=y(a);return new i("Invalid "+s+" `"+o+"` of type "+("`"+u+"` supplied to `"+n+"`, expected a single ReactElement."))}return null}return o(t)}function c(t){function e(e,n,r,o,a){if(!(e[n]instanceof t)){var s=x[o],u=t.name||M,l=b(e[n]);return new i("Invalid "+s+" `"+a+"` of type "+("`"+l+"` supplied to `"+r+"`, expected ")+("instance of `"+u+"`."))}return null}return o(e)}function h(t){function e(e,n,o,a,s){for(var u=e[n],l=0;l<t.length;l++)if(r(u,t[l]))return null;var c=x[a],h=JSON.stringify(t);return new i("Invalid "+c+" `"+s+"` of value `"+u+"` "+("supplied to `"+o+"`, expected one of "+h+"."))}return Array.isArray(t)?o(e):C.thatReturnsNull}function f(t){function e(e,n,r,o,a){if("function"!=typeof t)return new i("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=e[n],u=y(s);if("object"!==u){var l=x[o];return new i("Invalid "+l+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an object."))}for(var c in s)if(s.hasOwnProperty(c)){var h=t(s,c,r,o,a+"."+c,E);if(h instanceof Error)return h}return null}return o(e)}function p(t){function e(e,n,r,o,a){for(var s=0;s<t.length;s++){var u=t[s];if(null==u(e,n,r,o,a,E))return null}var l=x[o];return new i("Invalid "+l+" `"+a+"` supplied to "+("`"+r+"`."))}return Array.isArray(t)?o(e):C.thatReturnsNull}function d(){function t(t,e,n,r,o){if(!v(t[e])){var a=x[r];return new i("Invalid "+a+" `"+o+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return o(t)}function m(t){function e(e,n,r,o,a){var s=e[n],u=y(s);if("object"!==u){var l=x[o];return new i("Invalid "+l+" `"+a+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `object`."))}for(var c in t){var h=t[c];if(h){var f=h(s,c,r,o,a+"."+c,E);if(f)return f}}return null}return o(e)}function v(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(v);if(null===t||w.isValidElement(t))return!0;var e=S(t);if(!e)return!1;var n,r=e.call(t);if(e!==t.entries){for(;!(n=r.next()).done;)if(!v(n.value))return!1}else for(;!(n=r.next()).done;){var i=n.value;if(i&&!v(i[1]))return!1}return!0;default:return!1}}function g(t,e){return"symbol"===t||("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}function y(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":g(e,t)?"symbol":e}function _(t){var e=y(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function b(t){return t.constructor&&t.constructor.name?t.constructor.name:M}var w=n(15),x=n(41),E=n(84),C=n(17),S=n(155),M=(n(5),"<<anonymous>>"),P={array:a("array"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),symbol:a("symbol"),any:s(),arrayOf:u,element:l(),instanceOf:c,node:d(),objectOf:f,oneOf:h,oneOfType:p,shape:m};i.prototype=Error.prototype,t.exports=P},function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;u=new Error(e.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}t.exports=r},function(t,e){"use strict";function n(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var i=new Error(n);throw i.name="Invariant Violation",i.framesToPop=1,i}t.exports=n},[415,17],3,function(t,e){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(o){return!1}}var i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=r()?Object.assign:function(t,e){for(var r,a,s=n(t),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var l in r)i.call(r,l)&&(s[l]=r[l]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(r);for(var c=0;c<a.length;c++)o.call(r,a[c])&&(s[a[c]]=r[a[c]])}}return s}},function(t,e,n){"use strict";function r(t){for(var e;e=t._renderedComponent;)t=e;return t}function i(t,e){var n=r(t);n._hostNode=e,e[m]=n}function o(t){var e=t._hostNode;e&&(delete e[m],t._hostNode=null)}function a(t,e){if(!(t._flags&d.hasCachedChildNodes)){var n=t._renderedChildren,o=e.firstChild;t:for(var a in n)if(n.hasOwnProperty(a)){var s=n[a],u=r(s)._domID;if(0!==u){for(;null!==o;o=o.nextSibling)if(1===o.nodeType&&o.getAttribute(p)===String(u)||8===o.nodeType&&o.nodeValue===" react-text: "+u+" "||8===o.nodeType&&o.nodeValue===" react-empty: "+u+" "){i(s,o);continue t}c("32",u)}}t._flags|=d.hasCachedChildNodes}}function s(t){if(t[m])return t[m];for(var e=[];!t[m];){if(e.push(t),!t.parentNode)return null;t=t.parentNode}for(var n,r;t&&(r=t[m]);t=e.pop())n=r,e.length&&a(r,t);return n}function u(t){var e=s(t);return null!=e&&e._hostNode===t?e:null}function l(t){if(void 0===t._hostNode?c("33"):void 0,t._hostNode)return t._hostNode;for(var e=[];!t._hostNode;)e.push(t),t._hostParent?void 0:c("34"),t=t._hostParent;for(;e.length;t=e.pop())a(t,t._hostNode);return t._hostNode}var c=n(4),h=n(32),f=n(134),p=(n(3),h.ID_ATTRIBUTE_NAME),d=f,m="__reactInternalInstance$"+Math.random().toString(36).slice(2),v={getClosestInstanceFromNode:s,getInstanceFromNode:u,getNodeFromInstance:l,precacheChildNodes:a,precacheNode:i,uncacheNode:o};t.exports=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t.constructor&&(t.constructor.name||t.constructor.displayName)?t.constructor.name||t.constructor.displayName:p}function o(t){function e(e,n,r,i,o,a){var s=i||p,u=a||r;if(void 0===n[r]){var l=c.default[o];return e?new f.default("Required "+l+" `"+u+"`"+(" was not specified in `"+s+"`.")):null}for(var h=arguments.length,d=Array(h>6?h-6:0),m=6;m<h;m++)d[m-6]=arguments[m];return t.apply(void 0,[n,r,s,o,u].concat(d))}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function a(t){function e(e,r,o,a,s){for(var u=arguments.length,l=Array(u>5?u-5:0),h=5;h<u;h++)l[h-5]=arguments[h];var d=n.apply(void 0,[e,r,o,a,s].concat(l));if(null!==d){var m=c.default[a],v=t.name||t.displayName||p,g=i(e[r]);return new f.default("Invalid "+m+" `"+s+"` of type "+("`"+g+"` supplied to `"+o+"`, expected ")+("instance of `"+v+"`."))}return d}var n=u.default.instanceOf(t),r=o(e),a=""+(t.displayName||t.name||t._type||t);return r.toString=function(){return"``` "+a+" ```"},r.isRequired.toString=function(){return r.toString()+" *``` required ```*"},r.displayName=a,r.isRequired.displayName=a,r}var s=n(2),u=r(s),l=n(41),c=r(l),h=n(125),f=r(h),p="<<anonymous>>";t.exports=a},function(t,e,n){"use strict";t.exports=n(342)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);
t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=n(1),f=r(h),p=n(6),d=r(p),m=n(2),v=r(m),g=n(14),y=r(g),_=n(53),b=r(_),w=n(9),x=r(w),E=(0,b.default)(s=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasName(),n.hasProp("vertices",{type:v.default.arrayOf((0,x.default)(f.default.Vector3)),update:function(t,e,n){n&&t.vertices!==e&&(t.vertices=e,t.verticesNeedUpdate=!0)},updateInitial:!0,default:[]}),n.hasProp("colors",{type:v.default.arrayOf((0,x.default)(f.default.Color)),update:function(t,e,n){n&&t.colors!==e&&(t.colors=e,t.colorsNeedUpdate=!0)},updateInitial:!0,default:[]}),n.hasProp("faceVertexUvs",{type:v.default.arrayOf(v.default.arrayOf(v.default.arrayOf(f.default.Vector2))),update:function(t,e,n){n&&t.faceVertexUvs!==e&&(t.faceVertexUvs=e,t.uvsNeedUpdate=!0)},updateInitial:!0,default:[]}),n.hasProp("faces",{type:v.default.arrayOf((0,x.default)(f.default.Face3)),update:function(t,e,n){n&&t.faces!==e&&(t.faces=e,t.verticesNeedUpdate=!0,t.elementsNeedUpdate=!0)},updateInitial:!0,default:[]}),n.hasProp("dynamic",{type:v.default.bool,update:function(t,e){t.dynamic=!!e},default:!1}),n}return a(e,t),l(e,[{key:"setParent",value:function(t,n){(0,d.default)(n instanceof f.default.Mesh||n instanceof f.default.Points||n instanceof f.default.Line,"Parent is not a mesh"),(0,d.default)(void 0===n.geometry,"Parent already has a geometry"),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n),n.geometry=t}},{key:"applyInitialProps",value:function(t,n){t.userData=u({},t.userData),n.hasOwnProperty("dynamic")&&(t.dynamic=!!n.dynamic),t.userData._remountAfterPropsUpdate=!1,c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n)}},{key:"unmount",value:function(t){var n=t.userData.markup.parentMarkup.threeObject;(n instanceof f.default.Mesh||n instanceof f.default.Points)&&n.geometry===t&&(n.geometry=void 0),t.dispose(),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;t.userData.events.emit("highlight",{uuid:t.uuid,boundingBoxFunc:function(){var t=new f.default.Box3;return t.setFromObject(e),[t]}})}},{key:"getBoundingBoxes",value:function(t){var e=t.userData.markup.parentMarkup.threeObject,n=new f.default.Box3;return n.setFromObject(e),[n]}},{key:"hideHighlight",value:function(t){t.userData.events.emit("hideHighlight")}}]),e}(y.default))||s;t.exports=E},function(t,e,n){"use strict";var r=null;t.exports={debugTool:r}},function(t,e){"use strict";var n=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(6),u=r(s),l=n(59),c=(r(l),n(31)),h=r(c),f=n(188),p=r(f),d=n(2),m=r(d),v=n(152),g=(r(v),n(115)),y=(r(g),p.default.EventEmitter),_=function(){function t(e){i(this,t),this.react3RendererInstance=e,this.propUpdates={},this.propDeletes={},this.propDefaults={},this._initialOnly={},this._updateInitial=[],this._simpleProperties=[],this.propTypes={},this._hasName=!1}return a(t,[{key:"hasEvent",value:function(t){this._hasEvents=!0,this.hasProp(t,{type:m.default.func,updateInitial:!0,update:function(e,n){e.userData._eventCallbacks[t]=n},default:null})}},{key:"removeProp",value:function(t){(0,u.default)(this.propTypes.hasOwnProperty(t),"The property %s has not been defined",t);var e=this._simpleProperties.indexOf(t);e!==-1&&this._simpleProperties.splice(e,1),delete this.propTypes[t],delete this.propDeletes[t],delete this.propUpdates[t],delete this.propDefaults[t];var n=this._updateInitial.indexOf(t);n!==-1&&this._updateInitial.splice(n,1),delete this._initialOnly[t]}},{key:"hasProp",value:function(t,e){var n=this;if((0,u.default)(e.hasOwnProperty("type"),"The information should include a `type` property"),(0,u.default)(!this.propTypes.hasOwnProperty(t)||e.override,"The property %s has already been defined",t),e.override){var r=this._simpleProperties.indexOf(t);r!==-1&&this._simpleProperties.splice(r,1)}this.propTypes[t]=e.type,e.hasOwnProperty("simple")?(this.registerSimpleProperties([t]),e.hasOwnProperty("default")&&(this.propDeletes[t]=function(r){n.propUpdates[t](r,e.default,!0)},this.propDefaults[t]=e.default)):(e.hasOwnProperty("update")&&(this.propUpdates[t]=e.update),e.hasOwnProperty("default")?((0,u.default)(e.hasOwnProperty("update"),"The information should include a `update` property if it has a `default` property"),this.propDeletes[t]=function(t){e.update(t,e.default,!0)},this.propDefaults[t]=e.default):(0,u.default)(e.update===this.triggerRemount,"The type information for "+this.constructor.name+"."+t+" should include a `default` property if it's not going to trigger remount"),e.hasOwnProperty("remove")&&(0,u.default)(!1,"Bad 'remove' info for "+this.constructor.name+"."+t),e.hasOwnProperty("updateInitial")&&((0,u.default)(e.hasOwnProperty("update"),"The information should include a `update` property if it has a`updateInitial` property"),this._updateInitial.indexOf(t)===-1&&this._updateInitial.push(t)),e.initialOnly&&(0,u.default)(e.hasOwnProperty("updateInitial"),"The information should include a `updateInitial` property if it has an `initialOnly` property"),this._initialOnly[t]=e.initialOnly)}},{key:"hasName",value:function(){var t=this;this._hasName=!0,this.hasProp("name",{type:m.default.string,update:function(e,n){t._updateName(e,n)},default:""})}},{key:"_updateName",value:function(t,e){var n=t.name;t.name=e,t.userData.events.emit("rename",{oldName:n,nextName:e});var r=t.userData.markup;r._rootInstance&&r._rootInstance.objectRenamed(t,n,e)}},{key:"placeRemountTrigger",value:function(t,e){t.userData._triggerRemount=e}},{key:"applyInitialProps",value:function(t,e){var n=this,r=new y;this._hasName&&e.name&&(t.name=e.name),this._hasEvents&&(t.userData._eventCallbacks={}),r.on("resource.added",function(e){var n=t.userData.markup.childrenMarkup,r=o({},e,{distance:e.distance+1});n.forEach(function(t){return t.threeObject.userData.events.emit("resource.added",r)})}),r.on("resource.removed",function(e){var n=t.userData.markup.childrenMarkup,r=o({},e,{distance:e.distance+1});n.forEach(function(t){return t.threeObject.userData.events.emit("resource.removed",r)})}),t.userData.events=r,t.userData._descriptor=this,this._updateInitial.forEach(function(r){if(e.hasOwnProperty(r))n.propUpdates[r](t,e[r],!0);else{var i=void 0;n.propDefaults.hasOwnProperty(r)&&(i=n.propDefaults[r]),n.propUpdates[r](t,i,!1)}}),this._simpleProperties.forEach(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})}},{key:"construct",value:function(t){(0,u.default)(!1,"Missing constructor!")}},{key:"addChildren",value:function(t,e){(0,u.default)(!1,"Cannot add children to "+this.constructor.name+"!")}},{key:"addChild",value:function(t,e,n){(0,u.default)(!1,"Cannot add child to "+this.constructor.name+"!")}},{key:"moveChild",value:function(){(0,u.default)(!1,"Cannot move children in "+this.constructor.name+"!")}},{key:"removeChild",value:function(t,e){(0,u.default)(!1,"Cannot remove children in "+this.constructor.name+"!")}},{key:"setParent",value:function(t,e){var n=e.userData.markup;n&&n._rootInstance&&n._rootInstance.objectMounted(t)}},{key:"componentWillUnmount",value:function(t){}},{key:"unmount",value:function(t){var e=t.userData.markup;e._rootInstance&&e._rootInstance.objectRemoved(t),this._hasEvents&&delete t.userData._eventCallbacks,t.userData.events.emit("dispose",{object:t}),t.userData.events.removeAllListeners()}},{key:"removedFromParent",value:function(t){delete t.userData.events}},{key:"deleteProperty",value:function(t,e){this.propDeletes[e]&&this.propDeletes[e](t)}},{key:"updateProperty",value:function(t,e,n){this._initialOnly[e]?this.triggerRemount(t):this.propUpdates[e]?this.propUpdates[e](t,n,!0):((0,h.default)(!1,"updating prop "+e+" ( "+n+" ) for "+this.constructor.name),this.triggerRemount(t))}},{key:"highlight",value:function(t){}},{key:"hideHighlight",value:function(t){}},{key:"useSimpleUpdates",value:function(t){for(var e=0;e<t.length;++e){var n=t[e];this.propUpdates[n]=this._updateSimple.bind(this,n)}}},{key:"_updateSimple",value:function(t,e,n){e[t]=n}},{key:"registerSimpleProperties",value:function(t){var e=this;t.forEach(function(t){e._simpleProperties.indexOf(t)===-1&&e._simpleProperties.push(t)}),this.useSimpleUpdates(t)}},{key:"getBoundingBoxes",value:function(t){return[]}},{key:"triggerRemount",value:function(t){t.userData._triggerRemount&&(t.userData._triggerRemount(),delete t.userData._triggerRemount)}},{key:"beginPropertyUpdates",value:function(t){}},{key:"completePropertyUpdates",value:function(t){}},{key:"beginChildUpdates",value:function(t){}},{key:"completeChildUpdates",value:function(t){}}]),t}();t.exports=_},function(t,e,n){"use strict";function r(t){return void 0!==t.ref}function i(t){return void 0!==t.key}var o=n(7),a=n(20),s=(n(5),n(151),Object.prototype.hasOwnProperty),u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,l={key:!0,ref:!0,__self:!0,__source:!0},c=function(t,e,n,r,i,o,a){var s={$$typeof:u,type:t,key:e,ref:n,props:a,_owner:o};return s};c.createElement=function(t,e,n){var o,u={},h=null,f=null,p=null,d=null;if(null!=e){r(e)&&(f=e.ref),i(e)&&(h=""+e.key),p=void 0===e.__self?null:e.__self,d=void 0===e.__source?null:e.__source;for(o in e)s.call(e,o)&&!l.hasOwnProperty(o)&&(u[o]=e[o])}var m=arguments.length-2;if(1===m)u.children=n;else if(m>1){for(var v=Array(m),g=0;g<m;g++)v[g]=arguments[g+2];u.children=v}if(t&&t.defaultProps){var y=t.defaultProps;for(o in y)void 0===u[o]&&(u[o]=y[o])}return c(t,h,f,p,d,a.current,u)},c.createFactory=function(t){var e=c.createElement.bind(null,t);return e.type=t,e},c.cloneAndReplaceKey=function(t,e){var n=c(t.type,e,t.ref,t._self,t._source,t._owner,t.props);return n},c.cloneElement=function(t,e,n){var u,h=o({},t.props),f=t.key,p=t.ref,d=t._self,m=t._source,v=t._owner;if(null!=e){r(e)&&(p=e.ref,v=a.current),i(e)&&(f=""+e.key);var g;t.type&&t.type.defaultProps&&(g=t.type.defaultProps);for(u in e)s.call(e,u)&&!l.hasOwnProperty(u)&&(void 0===e[u]&&void 0!==g?h[u]=g[u]:h[u]=e[u])}var y=arguments.length-2;if(1===y)h.children=n;else if(y>1){for(var _=Array(y),b=0;b<y;b++)_[b]=arguments[b+2];h.children=_}return c(t.type,f,p,d,m,v,h)},c.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===u},c.REACT_ELEMENT_TYPE=u,t.exports=c},function(t,e,n){"use strict";function r(t){return"[object Array]"===E.call(t)}function i(t){return"[object ArrayBuffer]"===E.call(t)}function o(t){return"undefined"!=typeof FormData&&t instanceof FormData}function a(t){var e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function s(t){return"string"==typeof t}function u(t){return"number"==typeof t}function l(t){return"undefined"==typeof t}function c(t){return null!==t&&"object"==typeof t}function h(t){return"[object Date]"===E.call(t)}function f(t){return"[object File]"===E.call(t)}function p(t){return"[object Blob]"===E.call(t)}function d(t){return"[object Function]"===E.call(t)}function m(t){return c(t)&&d(t.pipe)}function v(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}function g(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function y(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function _(t,e){if(null!==t&&"undefined"!=typeof t)if("object"==typeof t||r(t)||(t=[t]),r(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function b(){function t(t,n){"object"==typeof e[n]&&"object"==typeof t?e[n]=b(e[n],t):e[n]=t}for(var e={},n=0,r=arguments.length;n<r;n++)_(arguments[n],t);return e}function w(t,e,n){return _(e,function(e,r){n&&"function"==typeof e?t[r]=x(e,n):t[r]=e}),t}var x=n(99),E=Object.prototype.toString;t.exports={isArray:r,isArrayBuffer:i,isFormData:o,isArrayBufferView:a,isString:s,isNumber:u,isObject:c,isUndefined:l,isDate:h,isFile:f,isBlob:p,isFunction:d,isStream:m,isURLSearchParams:v,isStandardBrowserEnv:y,forEach:_,merge:b,extend:w,trim:g}},function(t,e){"use strict";function n(t){return function(){return t}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(t){return t},t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n){t.splice(n,0,t.splice(e,1)[0])}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(1),h=r(c),f=n(6),p=(r(f),n(2)),d=r(p),m=n(14),v=r(m),g=n(9),y=r(g),_=function(t){function e(t){function n(t){return function(e,n){e[t].copy(n)}}i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.hasName(),r.hasProp("position",{type:(0,y.default)(h.default.Vector3),update:function(t,e){t.position.copy(e),t.userData._lookAt&&t.lookAt(t.userData._lookAt)},default:new h.default.Vector3}),r.hasProp("rotation",{type:(0,y.default)(h.default.Euler),update:function(t,e){t.rotation.copy(e)},default:new h.default.Euler}),r.hasProp("quaternion",{type:(0,y.default)(h.default.Quaternion),update:n("quaternion"),default:new h.default.Quaternion}),r.hasProp("scale",{type:(0,y.default)(h.default.Vector3),update:n("scale"),default:new h.default.Vector3(1,1,1)}),r.hasProp("lookAt",{type:(0,y.default)(h.default.Vector3),update:function(t,e){t.userData._lookAt=e,e&&t.lookAt(e)},default:void 0}),["frustumCulled","visible"].forEach(function(t){r.hasProp(t,{type:d.default.bool,simple:!0,default:!0})}),r.hasProp("renderOrder",{type:d.default.number,simple:!0}),r.hasProp("castShadow",{type:d.default.bool,simple:!0,default:!1}),r.hasProp("receiveShadow",{type:d.default.bool,updateInitial:!0,update:function(t,e){t.receiveShadow=e,t.material&&(t.material.needsUpdate=!0)},default:!1}),r}return a(e,t),u(e,[{key:"construct",value:function(){return new h.default.Object3D}},{key:"applyInitialProps",value:function(t,n){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),n.position&&t.position.copy(n.position),n.scale&&t.scale.copy(n.scale),n.rotation&&t.rotation.copy(n.rotation),n.quaternion&&t.quaternion.copy(n.quaternion),n.lookAt&&(t.userData._lookAt=n.lookAt,t.lookAt(n.lookAt))}},{key:"addChildren",value:function(t,e){e.forEach(function(e){t.add(e)})}},{key:"addChild",value:function(t,e,n){t.add(e),this.moveChild(t,e,n,t.children.length-1)}},{key:"removeChild",value:function(t,e){t.remove(e)}},{key:"moveChild",value:function(t,e,n,r){s(t.children,t.children.indexOf(e),n)}},{key:"highlight",value:function(t){var e=this;t.userData.events.emit("highlight",{uuid:t.uuid,boundingBoxFunc:function(){return e.getBoundingBoxes(t)}})}},{key:"getBoundingBoxes",value:function(t){var e=new h.default.Box3;return e.setFromObject(t),[e]}},{key:"hideHighlight",value:function(t){t.userData.events.emit("hideHighlight")}}]),e}(v.default);t.exports=_},function(t,e,n){"use strict";function r(){P.ReactReconcileTransaction&&w?void 0:c("123")}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=f.getPooled(),this.reconcileTransaction=P.ReactReconcileTransaction.getPooled(!0)}function o(t,e,n,i,o,a){r(),w.batchedUpdates(t,e,n,i,o,a)}function a(t,e){return t._mountOrder-e._mountOrder}function s(t){var e=t.dirtyComponentsLength;e!==g.length?c("124",e,g.length):void 0,g.sort(a),y++;for(var n=0;n<e;n++){var r=g[n],i=r._pendingCallbacks;r._pendingCallbacks=null;var o;if(d.logTopLevelRenders){var s=r;r._currentElement.props===r._renderedComponent._currentElement&&(s=r._renderedComponent),o="React update: "+s.getName(),console.time(o)}if(m.performUpdateIfNecessary(r,t.reconcileTransaction,y),o&&console.timeEnd(o),i)for(var u=0;u<i.length;u++)t.callbackQueue.enqueue(i[u],r.getPublicInstance())}}function u(t){return r(),w.isBatchingUpdates?(g.push(t),void(null==t._updateBatchNumber&&(t._updateBatchNumber=y+1))):void w.batchedUpdates(u,t)}function l(t,e){w.isBatchingUpdates?void 0:c("125"),_.enqueue(t,e),b=!0}var c=n(4),h=n(7),f=n(130),p=n(28),d=n(138),m=n(29),v=n(43),g=(n(3),[]),y=0,_=f.getPooled(),b=!1,w=null,x={initialize:function(){this.dirtyComponentsLength=g.length},close:function(){this.dirtyComponentsLength!==g.length?(g.splice(0,this.dirtyComponentsLength),S()):g.length=0}},E={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},C=[x,E];h(i.prototype,v.Mixin,{getTransactionWrappers:function(){return C},destructor:function(){this.dirtyComponentsLength=null,f.release(this.callbackQueue),this.callbackQueue=null,P.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,n){return v.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,n)}}),p.addPoolingTo(i);var S=function(){for(;g.length||b;){if(g.length){var t=i.getPooled();t.perform(s,null,t),i.release(t)}if(b){b=!1;var e=_;_=f.getPooled(),e.notifyAll(),f.release(e)}}},M={injectReconcileTransaction:function(t){t?void 0:c("126"),P.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){t?void 0:c("127"),"function"!=typeof t.batchedUpdates?c("128"):void 0,"boolean"!=typeof t.isBatchingUpdates?c("129"):void 0,w=t}},P={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:u,flushBatchedUpdates:S,injection:M,asap:l};t.exports=P},function(t,e){"use strict";var n={current:null};t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=n(1),f=r(h),p=n(6),d=r(p),m=n(2),v=r(m),g=n(14),y=r(g),_=n(53),b=r(_),w=n(35),x=r(w),E=n(9),C=r(E),S=(0,b.default)(s=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._invalidChild=function(t){return n.invalidChildInternal(t)},n.hasProp("slot",{type:v.default.string,updateInitial:!0,update:function(t,e,n){n?t.userData._materialSlot=e:t.userData._materialSlot="material"},default:"material"}),n.hasProp("transparent",{type:v.default.bool,simple:!0}),n.hasProp("alphaTest",{type:v.default.number,updateInitial:!0,update:function(t,e){t.alphaTest=e,t.needsUpdate=!0},default:0}),n.hasProp("side",{type:v.default.oneOf([f.default.FrontSide,f.default.BackSide,f.default.DoubleSide]),updateInitial:!0,update:function(t,e){t.side=e},default:f.default.FrontSide}),n.hasProp("opacity",{type:v.default.number,simple:!0}),n.hasProp("visible",{type:v.default.bool,simple:!0,default:!0}),n._colors=[],n}return a(e,t),l(e,[{key:"getMaterialDescription",value:function(t){var e={};return this._colors.forEach(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),t.hasOwnProperty("side")&&(e.side=t.side),e}},{key:"hasColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"color",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777215;this._colors.push(t),this.hasProp(t,{type:v.default.oneOfType([(0,C.default)(f.default.Color),v.default.number,v.default.string]),update:function(e,n){e[t].set(n)},default:e})}},{key:"hasWireframe",value:function(){this.hasProp("wireframe",{type:v.default.bool,simple:!0,default:!1}),this.hasProp("wireframeLinewidth",{type:v.default.number,simple:!0,default:1})}},{key:"construct",value:function(){return new f.default.Material({})}},{key:"applyInitialProps",value:function(t,n){t.userData=u({},t.userData),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n)}},{key:"setParent",value:function(t,n){(0,d.default)(n instanceof f.default.Mesh||n instanceof f.default.Points||n instanceof f.default.Sprite||n instanceof f.default.Line,"Parent is not a mesh"),(0,d.default)(void 0===n[t.userData._materialSlot]||null===n[t.userData._materialSlot],"Parent already has a "+t.userData._materialSlot+" defined"),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n),n[t.userData._materialSlot]=t}},{key:"unmount",value:function(t){var n=t.userData.markup.parentMarkup.threeObject;if(n instanceof f.default.Mesh||n instanceof f.default.Sprite||n instanceof f.default.Line||n instanceof f.default.Points){var r=t.userData._materialSlot;n[r]===t&&(n[r]=void 0)}t.dispose(),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;t.userData.events.emit("highlight",{uuid:t.uuid,boundingBoxFunc:function(){var t=new f.default.Box3;return e&&e.geometry&&e.geometry.computeBoundingBox&&e.geometry.computeBoundingBox(),t.setFromObject(e),[t]}})}},{key:"getBoundingBoxes",value:function(t){var e=new f.default.Box3,n=t.userData.markup.parentMarkup.threeObject;return n&&n.geometry&&n.geometry.computeBoundingBox&&n.geometry.computeBoundingBox(),e.setFromObject(n),[e]}},{key:"hideHighlight",value:function(t){t.userData.events.emit("hideHighlight")}},{key:"addChildren",value:function(t,e){(0,d.default)(0===e.filter(this._invalidChild).length,"Material children can only be textures or texture resource references!")}},{key:"addChild",value:function(t,e){this.addChildren(t,[e])}},{key:"moveChild",value:function(){}},{key:"removeChild",value:function(){}},{key:"invalidChildInternal",value:function(t){var e=!(t instanceof f.default.Texture||t instanceof x.default);return e}}]),e}(y.default))||s;t.exports=S},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=r(a),u=function(){function t(){i(this,t),this.uuid=s.default.Math.generateUUID(),this.userData={}}return o(t,[{key:"performAction",value:function(t){}}]),t}();t.exports=u},function(t,e,n){"use strict";var r=n(44),i=r({bubbled:null,captured:null}),o=r({topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null}),a={topLevelTypes:o,PropagationPhases:i};t.exports=a},function(t,e,n){"use strict";function r(t,e,n,r){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n;var i=this.constructor.Interface;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s?this[o]=s(n):"target"===o?this.target=r:this[o]=n[o]}var u=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;return u?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}var i=n(7),o=n(28),a=n(17),s=(n(5),"function"==typeof Proxy,["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),u={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),r.Interface=u,r.augmentClass=function(t,e){var n=this,r=function(){};r.prototype=n.prototype;var a=new r;i(a,t.prototype),t.prototype=a,t.prototype.constructor=t,t.Interface=i({},n.Interface,e),t.augmentClass=n.augmentClass,o.addPoolingTo(t,o.fourArgumentPooler)},o.addPoolingTo(r,o.fourArgumentPooler),t.exports=r},function(t,e){"use strict";function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e,n){if(!e(t))throw h("error","uncaught at check",n),new Error(n)}function i(t,e){var n=t.indexOf(e);n>=0&&t.splice(n,1)}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=p({},t),n=new Promise(function(t,n){e.resolve=t,e.reject=n});return e.promise=n,e}function a(t){for(var e=[],n=0;n<t;n++)e.push(o());return e}function s(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0,r=new Promise(function(r){n=setTimeout(function(){return r(e)},t)});return r[y]=function(){return clearTimeout(n)},r}function u(){var t,e=!0,r=void 0,i=void 0;return t={},n(t,v,!0),n(t,"isRunning",function(){return e}),n(t,"result",function(){return r}),n(t,"error",function(){return i}),n(t,"setRunning",function(t){return e=t}),n(t,"setResult",function(t){return r=t}),n(t,"setError",function(t){return i=t}),t}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return++t}}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments[3],i={name:n,next:t,throw:e,return:E};return r&&(i[g]=!0),"undefined"!=typeof Symbol&&(i[Symbol.iterator]=function(){return i}),i}function h(t,e,n){"undefined"==typeof window?console.log("redux-saga "+t+": "+e+"\n"+(n&&n.stack||n)):console[t](e,n)}function f(t){return function(e){var n=Object.defineProperty(e,_,{value:!0});return t(n)}}Object.defineProperty(e,"__esModule",{value:!0});var p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.check=r,e.remove=i,e.deferred=o,e.arrayOfDeffered=a,e.delay=s,e.createMockTask=u,e.autoInc=l,e.makeIterator=c,e.log=h,e.wrapSagaDispatch=f;var m=e.sym=function(t){return"@@redux-saga/"+t},v=e.TASK=m("TASK"),g=e.HELPER=m("HELPER"),y=(e.MATCH=m("MATCH"),e.CANCEL=m("cancelPromise")),_=e.SAGA_ACTION=m("SAGA_ACTION"),b=e.konst=function(t){return function(){return t}},w=(e.kTrue=b(!0),e.kFalse=b(!1),e.noop=function(){},e.ident=function(t){return t},e.is={undef:function(t){return null===t||void 0===t},notUndef:function(t){return null!==t&&void 0!==t},func:function(t){return"function"==typeof t},number:function(t){return"number"==typeof t},array:Array.isArray,promise:function(t){return t&&w.func(t.then)},iterator:function(t){return t&&w.func(t.next)&&w.func(t.throw)},task:function(t){return t&&t[v]},observable:function(t){return t&&w.func(t.subscribe)},buffer:function(t){return t&&w.func(t.isEmpty)&&w.func(t.take)&&w.func(t.put)},pattern:function(t){return t&&("string"==typeof t||"symbol"===("undefined"==typeof t?"undefined":d(t))||w.func(t)||w.array(t));
},channel:function(t){return t&&w.func(t.take)&&w.func(t.close)},helper:function(t){return t&&t[g]}}),x=(e.uid=l(),function(t){throw t}),E=function(t){return{value:t,done:!0}};e.internalErr=function(t){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+t+"\n")}},function(t,e){"use strict";var n=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return e;return null};t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.connect=e.Provider=void 0;var i=n(217),o=r(i),a=n(218),s=r(a);e.Provider=o.default,e.connect=s.default},function(t,e,n){"use strict";var r=n(4),i=(n(3),function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)}),o=function(t,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,t,e),r}return new n(t,e)},a=function(t,e,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,t,e,n),i}return new r(t,e,n)},s=function(t,e,n,r){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,t,e,n,r),o}return new i(t,e,n,r)},u=function(t,e,n,r,i){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,t,e,n,r,i),a}return new o(t,e,n,r,i)},l=function(t){var e=this;t instanceof e?void 0:r("25"),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},c=10,h=i,f=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||h,n.poolSize||(n.poolSize=c),n.release=l,n},p={addPoolingTo:f,oneArgumentPooler:i,twoArgumentPooler:o,threeArgumentPooler:a,fourArgumentPooler:s,fiveArgumentPooler:u};t.exports=p},function(t,e,n){"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=n(147),o=(n(12),n(5),{mountComponent:function(t,e,n,i,o,a){var s=t.mountComponent(e,n,i,o,a);return t._currentElement&&null!=t._currentElement.ref&&e.getReactMountReady().enqueue(r,t),s},getHostNode:function(t){return t.getHostNode()},unmountComponent:function(t,e){i.detachRefs(t,t._currentElement),t.unmountComponent(e)},receiveComponent:function(t,e,n,o){var a=t._currentElement;if(e!==a||o!==t._context){var s=i.shouldUpdateRefs(a,e);s&&i.detachRefs(t,a),t.receiveComponent(e,n,o),s&&t._currentElement&&null!=t._currentElement.ref&&n.getReactMountReady().enqueue(r,t)}},performUpdateIfNecessary:function(t,e,n){t._updateBatchNumber===n&&t.performUpdateIfNecessary(e)}});t.exports=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(14),d=r(p),m=n(117),v=r(m),g=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"setParent",value:function(t,n){(0,f.default)(n instanceof c.default.Path||n instanceof v.default,"Shape action commands (%s) can only be added to shapes, paths or holes.",this.constructor.name),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n)}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.highlight(e)}},{key:"getBoundingBoxes",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;return e.userData._descriptor.getBoundingBoxes(e)}}]),e}(d.default);t.exports=g},[415,127],function(t,e,n){"use strict";function r(t,e){return(t&e)===e}var i=n(4),o=(n(3),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(t){var e=o,n=t.Properties||{},a=t.DOMAttributeNamespaces||{},u=t.DOMAttributeNames||{},l=t.DOMPropertyNames||{},c=t.DOMMutationMethods||{};t.isCustomAttribute&&s._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var h in n){s.properties.hasOwnProperty(h)?i("48",h):void 0;var f=h.toLowerCase(),p=n[h],d={attributeName:f,attributeNamespace:null,propertyName:h,mutationMethod:null,mustUseProperty:r(p,e.MUST_USE_PROPERTY),hasBooleanValue:r(p,e.HAS_BOOLEAN_VALUE),hasNumericValue:r(p,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(p,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(p,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(d.hasBooleanValue+d.hasNumericValue+d.hasOverloadedBooleanValue<=1?void 0:i("50",h),u.hasOwnProperty(h)){var m=u[h];d.attributeName=m}a.hasOwnProperty(h)&&(d.attributeNamespace=a[h]),l.hasOwnProperty(h)&&(d.propertyName=l[h]),c.hasOwnProperty(h)&&(d.mutationMethod=c[h]),s.properties[h]=d}}}),a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<s._isCustomAttributeFunctions.length;e++){var n=s._isCustomAttributeFunctions[e];if(n(t))return!0}return!1},injection:o};t.exports=s},function(t,e){"use strict";var n={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}};t.exports=n},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){m&&p&&(m=!1,p.length?d=p.concat(d):v=-1,d.length&&s())}function s(){if(!m){var t=i(a);m=!0;for(var e=d.length;e;){for(p=d,d=[];++v<e;)p&&p[v].run();v=-1,e=d.length}p=null,m=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,h,f=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var p,d=[],m=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||m||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(1),a=r(o),s=function t(e){i(this,t),this.uuid=a.default.Math.generateUUID(),this.resourceId=e,this.userData={}};t.exports=s},function(t,e,n){"use strict";function r(t){if(v){var e=t.node,n=t.children;if(n.length)for(var r=0;r<n.length;r++)g(e,n[r],null);else null!=t.html?h(e,t.html):null!=t.text&&p(e,t.text)}}function i(t,e){t.parentNode.replaceChild(e.node,t),r(e)}function o(t,e){v?t.children.push(e):t.node.appendChild(e.node)}function a(t,e){v?t.html=e:h(t.node,e)}function s(t,e){v?t.text=e:p(t.node,e)}function u(){return this.node.nodeName}function l(t){return{node:t,children:[],html:null,text:null,toString:u}}var c=n(77),h=n(63),f=n(85),p=n(159),d=1,m=11,v="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),g=f(function(t,e,n){e.node.nodeType===m||e.node.nodeType===d&&"object"===e.node.nodeName.toLowerCase()&&(null==e.node.namespaceURI||e.node.namespaceURI===c.html)?(r(e),t.insertBefore(e.node,n)):(t.insertBefore(e.node,n),r(e))});l.insertTreeBefore=g,l.replaceChildWithTree=i,l.queueChild=o,l.queueHTML=a,l.queueText=s,t.exports=l},function(t,e,n){"use strict";var r={};t.exports=r},function(t,e,n){"use strict";var r=n(4),i=n(55),o=n(78),a=n(82),s=n(150),u=n(154),l=(n(3),{}),c=null,h=function(t,e){t&&(o.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t))},f=function(t){return h(t,!0)},p=function(t){return h(t,!1)},d=function(t){return"."+t._rootNodeID},m={injection:{injectEventPluginOrder:i.injectEventPluginOrder,injectEventPluginsByName:i.injectEventPluginsByName},putListener:function(t,e,n){"function"!=typeof n?r("94",e,typeof n):void 0;var o=d(t),a=l[e]||(l[e]={});a[o]=n;var s=i.registrationNameModules[e];s&&s.didPutListener&&s.didPutListener(t,e,n)},getListener:function(t,e){var n=l[e],r=d(t);return n&&n[r]},deleteListener:function(t,e){var n=i.registrationNameModules[e];n&&n.willDeleteListener&&n.willDeleteListener(t,e);var r=l[e];if(r){var o=d(t);delete r[o]}},deleteAllListeners:function(t){var e=d(t);for(var n in l)if(l.hasOwnProperty(n)&&l[n][e]){var r=i.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(t,n),delete l[n][e]}},extractEvents:function(t,e,n,r){for(var o,a=i.plugins,u=0;u<a.length;u++){var l=a[u];if(l){var c=l.extractEvents(t,e,n,r);c&&(o=s(o,c))}}return o},enqueueEvents:function(t){t&&(c=s(c,t))},processEventQueue:function(t){var e=c;c=null,t?u(e,f):u(e,p),c?r("95"):void 0,a.rethrowCaughtError()},__purge:function(){l={}},__getListenerBank:function(){return l}};t.exports=m},function(t,e,n){"use strict";function r(t,e,n){var r=e.dispatchConfig.phasedRegistrationNames[n];return _(t,r)}function i(t,e,n){var i=e?y.bubbled:y.captured,o=r(t,n,i);o&&(n._dispatchListeners=v(n._dispatchListeners,o),n._dispatchInstances=v(n._dispatchInstances,t))}function o(t){t&&t.dispatchConfig.phasedRegistrationNames&&m.traverseTwoPhase(t._targetInst,i,t)}function a(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst,n=e?m.getParentInstance(e):null;m.traverseTwoPhase(n,i,t)}}function s(t,e,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=_(t,r);i&&(n._dispatchListeners=v(n._dispatchListeners,i),n._dispatchInstances=v(n._dispatchInstances,t))}}function u(t){t&&t.dispatchConfig.registrationName&&s(t._targetInst,null,t)}function l(t){g(t,o)}function c(t){g(t,a)}function h(t,e,n,r){m.traverseEnterLeave(n,r,s,t,e)}function f(t){g(t,u)}var p=n(23),d=n(38),m=n(78),v=n(150),g=n(154),y=(n(5),p.PropagationPhases),_=d.getListener,b={accumulateTwoPhaseDispatches:l,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:f,accumulateEnterLeaveDispatches:h};t.exports=b},function(t,e,n){"use strict";function r(t){var e=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+e.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var i=e.call(t);return r.test(i)}catch(o){return!1}}function i(t){return"."+t}function o(t){return parseInt(t.substr(1),10)}function a(t){if(E)return g.get(t);var e=i(t);return _[e]}function s(t){if(E)g.delete(t);else{var e=i(t);delete _[e]}}function u(t,e,n){var r={element:e,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0};if(E)g.set(t,r);else{var o=i(t);_[o]=r}}function l(t){if(E)y.add(t);else{var e=i(t);b[e]=!0}}function c(t){if(E)y.delete(t);else{var e=i(t);delete b[e]}}function h(){return E?Array.from(g.keys()):Object.keys(_).map(o)}function f(){return E?Array.from(y.keys()):Object.keys(b).map(o)}function p(t){var e=a(t);if(e){var n=e.childIDs;s(t),n.forEach(p)}}function d(t,e,n){return"\n    in "+t+(e?" (at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+")":n?" (created by "+n+")":"")}function m(t){return null==t?"#empty":"string"==typeof t||"number"==typeof t?"#text":"string"==typeof t.type?t.type:t.type.displayName||t.type.name||"Unknown"}function v(t){var e,n=S.getDisplayName(t),r=S.getElement(t),i=S.getOwnerID(t);return i&&(e=S.getDisplayName(i)),d(n,r&&r._source,e)}var g,y,_,b,w=n(4),x=n(20),E=(n(3),n(5),"function"==typeof Array.from&&"function"==typeof Map&&r(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&r(Map.prototype.keys)&&"function"==typeof Set&&r(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&r(Set.prototype.keys));E?(g=new Map,y=new Set):(_={},b={});var C=[],S={onSetChildren:function(t,e){var n=a(t);n.childIDs=e;for(var r=0;r<e.length;r++){var i=e[r],o=a(i);o?void 0:w("140"),null==o.childIDs&&"object"==typeof o.element&&null!=o.element?w("141"):void 0,o.isMounted?void 0:w("71"),null==o.parentID&&(o.parentID=t),o.parentID!==t?w("142",i,o.parentID,t):void 0}},onBeforeMountComponent:function(t,e,n){u(t,e,n)},onBeforeUpdateComponent:function(t,e){var n=a(t);n&&n.isMounted&&(n.element=e)},onMountComponent:function(t){var e=a(t);e.isMounted=!0;var n=0===e.parentID;n&&l(t)},onUpdateComponent:function(t){var e=a(t);e&&e.isMounted&&e.updateCount++},onUnmountComponent:function(t){var e=a(t);if(e){e.isMounted=!1;var n=0===e.parentID;n&&c(t)}C.push(t)},purgeUnmountedComponents:function(){if(!S._preventPurging){for(var t=0;t<C.length;t++){var e=C[t];p(e)}C.length=0}},isMounted:function(t){var e=a(t);return!!e&&e.isMounted},getCurrentStackAddendum:function(t){var e="";if(t){var n=t.type,r="function"==typeof n?n.displayName||n.name:n,i=t._owner;e+=d(r||"Unknown",t._source,i&&i.getName())}var o=x.current,a=o&&o._debugID;return e+=S.getStackAddendumByID(a)},getStackAddendumByID:function(t){for(var e="";t;)e+=v(t),t=S.getParentID(t);return e},getChildIDs:function(t){var e=a(t);return e?e.childIDs:[]},getDisplayName:function(t){var e=S.getElement(t);return e?m(e):null},getElement:function(t){var e=a(t);return e?e.element:null},getOwnerID:function(t){var e=S.getElement(t);return e&&e._owner?e._owner._debugID:null},getParentID:function(t){var e=a(t);return e?e.parentID:null},getSource:function(t){var e=a(t),n=e?e.element:null,r=null!=n?n._source:null;return r},getText:function(t){var e=S.getElement(t);return"string"==typeof e?e:"number"==typeof e?""+e:null},getUpdateCount:function(t){var e=a(t);return e?e.updateCount:0},getRegisteredIDs:h,getRootIDs:f};t.exports=S},function(t,e,n){"use strict";var r={};t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(24),o=n(88),a={view:function(t){if(t.view)return t.view;var e=o(t);if(e.window===e)return e;var n=e.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(t){return t.detail||0}};i.augmentClass(r,a),t.exports=r},function(t,e,n){"use strict";var r=n(4),i=(n(3),{reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,n,i,o,a,s,u){this.isInTransaction()?r("27"):void 0;var l,c;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),c=t.call(e,n,i,o,a,s,u),l=!1}finally{try{if(l)try{this.closeAll(0)}catch(h){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(t){for(var e=this.transactionWrappers,n=t;n<e.length;n++){var r=e[n];try{this.wrapperInitData[n]=o.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(i){}}}},closeAll:function(t){this.isInTransaction()?void 0:r("28");for(var e=this.transactionWrappers,n=t;n<e.length;n++){var i,a=e[n],s=this.wrapperInitData[n];try{i=!0,s!==o.OBSERVED_ERROR&&a.close&&a.close.call(this,s),i=!1}finally{if(i)try{this.closeAll(n+1)}catch(u){}}}this.wrapperInitData.length=0}}),o={Mixin:i,OBSERVED_ERROR:{}};t.exports=o},function(t,e,n){"use strict";var r=n(3),i=function(t){var e,n={};t instanceof Object&&!Array.isArray(t)?void 0:r(!1);for(e in t)t.hasOwnProperty(e)&&(n[e]=e);return n};t.exports=i},function(t,e){"use strict";function n(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function r(t,e){if(n(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(!i.call(e,r[a])||!n(t[r[a]],e[r[a]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.setCladding=e.setRoofing=e.setFrameWidth=e.setFrameHeight=e.setLength=e.setRoomPosition=e.setHasRoom=e.setFrameData=e.makeFramesAsync=e.getTotalsAsync=e.getData=e.setData=void 0;var i=n(93),o=r(i),a=e.setData=function(t){return{type:"SET_DATA",payload:t}};e.getData=function(){return function(t){var e=window.location.hash.match(/\d+/)[0];o.default.get("https://build-os.com/p/"+e+".json").then(function(e){t(a(e.data))}).catch(function(t){console.log(t)})}},e.getTotalsAsync=function(t){return{type:"GET_TOTALS_ASYNC",payload:t}},e.makeFramesAsync=function(t){return{type:"MAKE_FRAMES_ASYNC",payload:t}},e.setFrameData=function(t){return{type:"SET_FRAME_DATA",payload:t}},e.setHasRoom=function(t){return{type:"SET_HAS_ROOM",payload:t}},e.setRoomPosition=function(t){return{type:"SET_ROOM_POSITION",payload:t}},e.setLength=function(t){return{type:"SET_LENGTH",payload:t}},e.setFrameHeight=function(t){return{type:"SET_FRAME_HEIGHT",payload:t}},e.setFrameWidth=function(t){return{type:"SET_FRAME_WIDTH",payload:t}},e.setRoofing=function(t){return{type:"SET_ROOFING",payload:t}},e.setCladding=function(t){return{type:"SET_CLADDING",payload:t}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n){M.default.unmountComponent(t,n)}function u(t){return t&&t[pt.default]||""}function l(t){return t?t.userData&&t.userData.markup&&t.userData.markup.childrenMarkup[0]||null:null}function c(t){return"function"==typeof t&&"undefined"!=typeof t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}var h,f,p,d,m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=n(1),y=r(g),_=n(15),b=r(_),w=n(33),x=r(w),E=n(366),C=r(E),S=n(29),M=r(S),P=n(19),T=r(P),O=n(20),A=r(O),R=n(60),L=r(R),I=n(58),k=r(I),D=n(140),j=r(D),N=n(146),B=r(N),F=n(136),U=r(F),V=n(56),z=(r(V),n(65)),G=r(z),H=n(89),W=r(H),X=n(64),q=r(X),Y=n(12),K=(r(Y),n(128)),Z=r(K),J=n(6),Q=r(J),$=n(31),tt=(r($),n(253)),et=r(tt),nt=n(331),rt=r(nt),it=n(251),ot=r(it),at=n(113),st=r(at),ut=n(250),lt=r(ut),ct=n(114),ht=r(ct),ft=n(75),pt=r(ft),dt=n(126),mt=(r(dt),void 0),vt=(f=h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),v(e,[{key:"render",value:function(){return this.props}}]),e}(k.default),h.isReactComponent={},f),gt=(d=p=function(){function t(){var e=this;if(i(this,t),this.instantiateChild=function(t,n,r,i){var o=void 0===t[r];null!==n&&o&&(t[r]=e.instantiateReactComponent(n,!0))},this.findNodeHandle=function(t){var n=st.default.getRenderedHostOrTextFromComponent(t);if(!n||!n._threeObject)return null;var r=st.default.getMarkupFromInstance(n);return e._highlightCache=r,e._highlightElement},this.nativeTagToRootNodeID=function(){return 0},this.hostTagToRootNodeID=function(){return 0},this.batchedMountComponentIntoNode=function(t,n,r,i){var o=T.default.ReactReconcileTransaction.getPooled(!r);o.perform(e.mountComponentIntoNode,null,t,n,o,r,i),T.default.ReactReconcileTransaction.release(o)},this.mountComponentIntoNode=function(t,n,r,i,o){var a=M.default.mountComponent(t,r,null,(0,et.default)(t,n),o,0);t._renderedComponent._topLevelWrapper=t,e._mountImageIntoNode(a,n,t,i,r)},this._instancesByReactRootID={},this.nextMountID=1,this.globalIdCounter=1,this.nextReactRootIndex=0,this.threeElementDescriptors=new lt.default(this).descriptors,this._highlightElement=document.createElement("div"),this._highlightCache=null,"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"https://build-os.com",REACT_APP_BEAVER_HOST:"https://beaver.build-os.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&(this._agent=null,this._onHideHighlightFromInspector=function(){if(e._highlightCache&&e._highlightCache.threeObject.userData.react3internalComponent){var t=e._highlightCache.threeObject.userData.react3internalComponent;t.hideHighlight(),e._highlightCache=null}},this._onHighlightFromInspector=function(t){if(t.node===e._highlightElement&&e._highlightCache&&e._highlightCache.threeObject.userData.react3internalComponent){var n=e._highlightCache.threeObject.userData.react3internalComponent;n.highlightComponent()}},this._hookAgent=function(t){e._agent=t,t.on("highlight",e._onHighlightFromInspector),t.on("hideHighlight",e._onHideHighlightFromInspector)},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject)){this._devToolsRendererDefinition={CurrentOwner:A.default,InstanceHandles:C.default,Mount:this,Reconciler:M.default,TextComponent:ot.default};var n=function(t){e._reactDevtoolsRendererId=t.id,e._rendererListenerCleanup(),delete e._rendererListenerCleanup};if(this._rendererListenerCleanup=__REACT_DEVTOOLS_GLOBAL_HOOK__.sub("renderer",n),__REACT_DEVTOOLS_GLOBAL_HOOK__.inject(this._devToolsRendererDefinition),"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.reactDevtoolsAgent&&__REACT_DEVTOOLS_GLOBAL_HOOK__.reactDevtoolsAgent){var r=__REACT_DEVTOOLS_GLOBAL_HOOK__.reactDevtoolsAgent;this._hookAgent(r)}else this._devtoolsCallbackCleanup=__REACT_DEVTOOLS_GLOBAL_HOOK__.sub("react-devtools",function(t){e._devtoolsCallbackCleanup(),e._hookAgent(t)})}}return v(t,[{key:"updateChildren",value:function(t,e,n,r,i,o,a,s,u){if(!e&&!t)return null;if(e)for(var l=Object.keys(e),c=0;c<l.length;++c){var h=l[c],f=t&&t[h],p=f&&f._currentElement,d=e[h];if(null!==f&&void 0!==f&&(0,q.default)(p,d))if(M.default.receiveComponent(f,d,i,s),f._forceRemountOfComponent){r[h]=f.getHostMarkup(),M.default.unmountComponent(f,!1);var m=this.instantiateReactComponent(d,!0);e[h]=m;var v=M.default.mountComponent(m,i,o,a,s,u);n.push(v)}else e[h]=f;else{f&&(r[h]=f.getHostMarkup(),M.default.unmountComponent(f,!1));var g=this.instantiateReactComponent(d,!0);e[h]=g;var y=M.default.mountComponent(g,i,o,a,s,u);n.push(y)}}if(t)for(var _=Object.keys(t),b=0;b<_.length;++b){var w=_[b];if(!e||!e.hasOwnProperty(w)){var x=t[w];r[w]=x.getHostMarkup(),M.default.unmountComponent(x,!1)}}return e}},{key:"getElementDescriptor",value:function(t){return this.threeElementDescriptors[t]}}],[{key:"findTHREEObject",value:function(t){if(null===t)return null;if(t instanceof y.default.Object3D||t instanceof HTMLCanvasElement)return t;if(x.default.has(t)){var e=x.default.get(t);return e=(0,W.default)(e),e?st.default.getMarkupFromInstance(e).threeObject:null}return null!==t.render&&"function"==typeof t.render&&(0,Q.default)(!1),(0,Q.default)(!1),null}}]),v(t,[{key:"instantiateChildren",value:function(t,e,n,r){if(null===t)return null;var i={};return(0,G.default)(t,this.instantiateChild,i),i}},{key:"containsChild",value:function(t,e){for(var n=t.userData.markup.childrenMarkup,r=0;r<n.length;r++)if(n[r]===e)return!0;return!1}},{key:"_mountImageIntoNode",value:function(t,e,n,r,i){e.userData||((0,Q.default)(e instanceof HTMLCanvasElement,"The root container can only be a THREE.js object (with an userData property) or HTMLCanvasElement."),e.userData={_createdByReact3:!0});var o=t,a={threeObject:e,parentMarkup:null,childrenMarkup:[o],toJSON:function(){return"---MARKUP---"}};Object.assign(e.userData,{object3D:e,toJSON:function(){return"---USERDATA---"},markup:a}),o.parentMarkup=a;var s=this.threeElementDescriptors[o.elementType];s.setParent(o.threeObject,a.threeObject),o.threeObject.mountedIntoRoot();var u=e.userData.markup.childrenMarkup[0];st.default.precacheMarkup(n,u)}},{key:"render",value:function(t,e,n){return this._renderSubtreeIntoContainer(null,t,e,n)}},{key:"getHostRootInstanceInContainer",value:function(t){var e=l(t),n=e&&st.default.getInstanceFromMarkup(e);return n&&!n._hostParent?n:null}},{key:"getTopLevelWrapperInContainer",value:function(t){var e=this.getHostRootInstanceInContainer(t);return e&&(0,Q.default)(!!e._hostContainerInfo,"Root should have native container info %s"," but it does not"),e?e._hostContainerInfo._topLevelWrapper:null}},{key:"_renderSubtreeIntoContainer",value:function(t,e,n,r){var i=this;b.default.isValidElement(e)||(0,Q.default)(!1);var o=(0,b.default)(vt,null,null,null,null,null,e),a=void 0;if(t){var s=x.default.get(t);a=s._processChildContext(s._context)}else a=Z.default;var c=this.getTopLevelWrapperInContainer(n);if(c){var h=c._currentElement,f=h.props;if((0,q.default)(f,e)){var p=function(){var t=c._renderedComponent.getPublicInstance(),e=r&&function(){r.call(t)};return i._updateRootComponent(c,o,a,n,e),{v:t}}();if("object"===("undefined"==typeof p?"undefined":m(p)))return p.v}this.unmountComponentAtNode(n)}var d=l(n),v=d&&!!u(d),g=v&&!c,y=this._renderNewRootComponent(o,n,g,a)._renderedComponent.getPublicInstance();return r&&r.call(y),y}},{key:"dispose",value:function(){for(var t=Object.keys(this._instancesByReactRootID),e=0;e<t.length;++e)this.unmountComponentAtNode(this._instancesByReactRootID[t[e]].getHostMarkup().parentMarkup.threeObject);delete this._instancesByReactRootID,delete this._highlightElement,this.nextMountID=1,this.nextReactRootIndex=0,"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"https://build-os.com",REACT_APP_BEAVER_HOST:"https://beaver.build-os.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&(this._devtoolsCallbackCleanup&&(this._devtoolsCallbackCleanup(),delete this._devtoolsCallbackCleanup),this._rendererListenerCleanup&&(this._rendererListenerCleanup(),delete this._rendererListenerCleanup),this._devToolsRendererDefinition&&(this._agent&&(this._agent.onUnmounted(this._devToolsRendererDefinition),this._agent.removeListener("highlight",this._onHighlightFromInspector),this._agent.removeListener("hideHighlight",this._onHideHighlightFromInspector)),this._reactDevtoolsRendererId&&(delete __REACT_DEVTOOLS_GLOBAL_HOOK__._renderers[this._reactDevtoolsRendererId],delete this._reactDevtoolsRendererId),delete this._devToolsRendererDefinition,delete this._agent),delete this._onHighlightFromInspector,delete this._onHideHighlightFromInspector,delete this._hookAgent)}},{key:"_updateRootComponent",value:function(t,e,n,r,i){return L.default.enqueueElementInternal(t,e,n),i&&L.default.enqueueCallbackInternal(t,i),t}},{key:"hasNonRootReactChild",value:function(t){var e=l(t);if(e){var n=st.default.getInstanceFromMarkup(e);return!(!n||!n._hostParent)}return!1}},{key:"unmountComponentAtNode",value:function(t){var e=this.getTopLevelWrapperInContainer(t);if(!e){this.hasNonRootReactChild(t),!!(t&&t.userData&&t.userData.markup&&t.userData.markup[pt.default]);return!1}return delete this._instancesByReactRootID[e._instance.rootID],T.default.batchedUpdates(s,e,t,!1),t&&t.userData&&t.userData._createdByReact3&&delete t.userData,!0}},{key:"getReactRootID",value:function(t){var e=l(t);return e&&this.getID(e)}},{key:"instantiateReactComponent",value:function(t,e){var n=void 0,r=t,i=null===r||r===!1;if(i)n=new ot.default(b.default.createElement("object3D",{visible:!1}),this);else if("object"===("undefined"==typeof r?"undefined":m(r))){var o=r;if((!o||"function"!=typeof o.type&&"string"!=typeof o.type)&&(null==o.type?(0,Q.default)(o.type,mt(o._owner)):(0,Q.default)(m(o.type),mt(o._owner))),"string"==typeof o.type)n=new ot.default(o,this);else if(c(o.type)){var a=o.type;n=new a(o),n.getHostNode||(n.getHostNode=n.getNativeNode)}else n=new ht.default(o,this)}else"string"==typeof r||"number"==typeof r?(0,Q.default)(!1):(0,Q.default)(!1);n._mountIndex=0,n._mountImage=null;return n}},{key:"_renderNewRootComponent",value:function(t,e,n,r){var i=this.instantiateReactComponent(t,!1);T.default.ReactReconcileTransaction||(j.default.Updates.injectReconcileTransaction(B.default),j.default.Updates.injectBatchingStrategy(U.default));T.default.batchedUpdates(this.batchedMountComponentIntoNode,i,e,n,r);var o=i._instance.rootID;return this._instancesByReactRootID[o]=i,i}},{key:"createReactRootID",value:function(){return this.nextReactRootIndex++}},{key:"getID",value:function(t){return u(t)}}]),t}(),p.eventDispatcher=new rt.default,d);t.exports=gt},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=r(a),u=function(){function t(){i(this,t),this.userData={},this.name=null,this.value=null,this.type=null,this.uuid=s.default.Math.generateUUID()}return o(t,[{key:"setValue",value:function(t){this.value=t,this.userData.events.emit("valueChanged",t)}}]),t}();t.exports=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(2),u=r(s),l=n(11),c=r(l),h=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["radius","detail"].forEach(function(t){n.hasProp(t,{type:u.default.number.isRequired,update:n.triggerRemount,default:void 0})}),n}return a(e,t),e}(c.default);t.exports=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,u,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=n(1),f=r(h),p=n(2),d=r(p),m=n(31),v=(r(m),n(18)),g=r(v),y=n(9),_=r(y),b=function(){var t=new f.default.Vector3,e=new f.default.Vector3;return function(n){n.updateMatrixWorld(),t.setFromMatrixPosition(n.matrixWorld),n.target.position.copy(e.set(0,0,1).applyQuaternion(n.quaternion).add(t)),n.target.updateMatrixWorld()}}(),w=(u=s=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.removeProp("receiveShadow"),n._hasColor=!1,n._hasDirection=!1,n.hasProp("updatesRefreshAllMaterials",{type:d.default.bool,updateInitial:!0,update:function(t,e){t.userData._updatesRefreshAllMaterials=e},default:!1}),n.hasProp("shadowBias",{type:d.default.number,updateInitial:!0,update:function(t,e,n){n&&(t.shadow.bias=e)},default:e.defaultShadowBias}),n.hasProp("shadowDarkness",{type:d.default.number,simple:!0,default:.5}),n.hasProp("shadowMapWidth",{type:d.default.number,updateInitial:!0,update:function(t,e,n){n&&(t.shadow.mapSize.x=e)},default:512}),n.hasProp("shadowMapHeight",{type:d.default.number,updateInitial:!0,update:function(t,e,n){n&&(t.shadow.mapSize.y=e)},default:512}),n.hasProp("shadowCameraNear",{type:d.default.number,updateInitial:!0,update:function(t,e,n){n&&(t.shadow.camera.near=e)},default:e.defaultShadowCameraNear}),n.hasProp("shadowCameraFar",{type:d.default.number,updateInitial:!0,update:function(t,e,n){n&&(t.shadow.camera.far=e)},default:e.defaultShadowCameraFar}),n.hasProp("castShadow",{override:!0,type:d.default.bool,update:n.triggerRemount,default:!1}),n}return a(e,t),l(e,[{key:"hasDirection",value:function(){this._hasDirection=!0,this.removeProp("position"),this.removeProp("rotation"),this.removeProp("quaternion"),this.removeProp("lookAt"),this.hasProp("position",{type:(0,_.default)(f.default.Vector3),update:function(t,e){t.position.copy(e),t.userData._lookAt&&t.lookAt(t.userData._lookAt),t.userData._needsDirectionUpdate=!0},default:new f.default.Vector3}),this.hasProp("rotation",{type:(0,_.default)(f.default.Euler),update:function(t,e){t.rotation.copy(e),t.userData._needsDirectionUpdate=!0},default:new f.default.Euler}),this.hasProp("quaternion",{type:(0,_.default)(f.default.Quaternion),update:function(t,e){t.quaternion.copy(e),t.userData._needsDirectionUpdate=!0},default:new f.default.Quaternion}),this.hasProp("lookAt",{type:(0,_.default)(f.default.Vector3),update:function(t,e){t.userData._lookAt=e,e&&(t.lookAt(e),t.userData._needsDirectionUpdate=!0)},default:void 0})}},{key:"completePropertyUpdates",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"completePropertyUpdates",this).call(this,t),t.userData._needsDirectionUpdate&&(t.userData._needsDirectionUpdate=!1,b(t))}},{key:"hasColor",value:function(){this._hasColor=!0,this.hasProp("color",{type:d.default.oneOfType([(0,_.default)(f.default.Color),d.default.number,d.default.string]),update:function(t,e){t.color.set(e)},default:16777215})}},{key:"applyInitialProps",value:function(t,n){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),n.hasOwnProperty("castShadow")&&(t.castShadow=n.castShadow),this._hasDirection&&(t.userData._needsDirectionUpdate=!1,(n.position||n.lookAt||n.rotation||n.quaternion)&&b(t))}},{key:"unmount",value:function(t){this.updateAllMaterials(t),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"setParent",value:function(t,n){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n),this.updateAllMaterials(t)}},{key:"updateAllMaterials",value:function(t){var e=t.userData.markup._rootInstance;if(e&&!e._willUnmount){e.allMaterialsNeedUpdate()}}}]),e}(g.default),s.defaultShadowCameraNear=.5,s.defaultShadowCameraFar=500,s.defaultShadowBias=0,u);t.exports=w},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(35),d=r(p),m=n(18),v=r(m),g=function(t){function e(){var t,n,r,a;i(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),r._invalidChild=function(t){var e=!(t instanceof c.default.Material||t instanceof d.default||t instanceof c.default.Geometry||t instanceof c.default.BufferGeometry);return e},a=n,o(r,a)}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.hasOwnProperty("geometry")?t.geometry:void 0,n=t.hasOwnProperty("material")?t.material:void 0,r=new c.default.Mesh(e,n);return e||(r.geometry.dispose(),r.geometry=void 0),n||(r.material.dispose(),r.material=void 0),r}},{key:"addChildren",value:function(t,e){(0,f.default)(0===e.filter(this._invalidChild).length,!1)}},{key:"addChild",value:function(t,e){this.addChildren(t,[e])}},{key:"moveChild",value:function(){}},{key:"getBoundingBoxes",value:function(t){return t.geometry&&t.geometry.computeBoundingBox&&t.geometry.computeBoundingBox(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getBoundingBoxes",this).call(this,t)}}]),e}(v.default);t.exports=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(6),c=r(l),h=n(2),f=r(h),p=n(14),d=r(p),m=n(35),v=r(m),g=n(47),y=(r(g),function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._addedIntoRoot=function(t){for(var e=t.userData.markup.parentMarkup,r=0;e;){var i=e.threeObject.userData._resources;if(i){var o=t.resourceId,a=i.resourceMap[o];a&&n._addResource(t,{id:o,distance:r,resource:a})}r++,e=e.threeObject.userData.markup.parentMarkup}n._updateResource(t)},n.hasProp("resourceId",{type:f.default.string.isRequired,update:n.triggerRemount,default:""}),n}return a(e,t),s(e,[{key:"construct",value:function(t){return(0,c.default)(t.hasOwnProperty("resourceId"),'A resource type must have a property named "resourceId"!'),new v.default(t.resourceId)}},{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),t.userData.resourceMap=[],t.userData._eventCleanupQueue=[],t.userData._chosenResource=void 0,t.userData._debug=n.debug||!1,t.userData.events.once("addedIntoRoot",this._addedIntoRoot)}},{key:"unmount",value:function(t){t.userData._eventCleanupQueue.forEach(function(t){t()}),delete t.userData._eventCleanupQueue,delete t.userData.resourceMap,this.updateChosenResource(t,null),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"updateChosenResource",value:function(t,e){var n=t.userData._chosenResource;n!==e&&(t.userData._chosenResource=e,this.resourceUpdated(t,e,n))}},{key:"setParent",value:function(t,n){var r=n[t.userData._propertySlot];(0,c.default)(void 0===r||null===r,"Parent already has a "+t.userData._propertySlot+" defined"),(0,c.default)(0===t.userData._eventCleanupQueue.length,"Changing parents?"),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n);var i=n.userData.markup,o=this._onResourceAdded.bind(this,t),a=this._onResourceRemoved.bind(this,t),s=i.threeObject.userData.events;s.on("resource.added",o),s.on("resource.removed",a),t.userData._eventCleanupQueue.push(function(){s.removeListener("resource.added",o),s.removeListener("resource.removed",a)})}},{key:"_onResourceAdded",value:function(t,e){t.resourceId===e.id&&(this._addResource(t,e),this._updateResource(t))}},{key:"_addResource",value:function(t,e){var n=t.userData.resourceMap,r=void 0;for(r=0;r<n.length;++r){if(n[r].distance===e.distance)return void(n[r].resource!==e.resource&&(n[r].resource=e.resource));if(n[r].distance>e.distance)break}n.splice(r,0,{distance:e.distance,resource:e.resource})}},{key:"_onResourceRemoved",value:function(t,e){if(t.resourceId===e.id){for(var n=t.userData.resourceMap,r=0;r<n.length;++r)if(n[r].distance===e.distance)return void(n[r].resource===e.resource&&(n.splice(r,1),this._updateResource(t)));(0,c.default)(!1,"This resource was not in this map?")}}},{key:"applyToSlot",value:function(t,e,n){var r=t.userData._propertySlot;e[r]=n}},{key:"resourceUpdated",value:function(t,e,n){var r=t.userData.markup.parentMarkup&&t.userData.markup.parentMarkup.threeObject||void 0;if(r&&(this.applyToSlot(t,r,e),null===e||e.userData._references.push(r),n)){var i=n.userData._references.indexOf(r);(0,c.default)(i!==-1,"Bad reference count for resource"),n.userData._references.splice(i,1)}}},{key:"_updateResource",value:function(t){var e=t.userData.resourceMap,n=null;e.length>0&&(n=e[0].resource),this.updateChosenResource(t,n)}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.highlight(e)}},{key:"hideHighlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.hideHighlight(e)}}]),e}(d.default));t.exports=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){var e,n,r=(n=e=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.isResource=!0,n.hasProp("resourceId",{type:d.default.string,updateInitial:!0,initialOnly:!0,update:function(t,e,n){n&&(t.userData._resourceId=e,t.userData._hasReferences||(t.userData._hasReferences=!0,t.userData._references=[]))},default:""}),n}return a(e,t),u(e,[{key:"applyInitialProps",value:function(t,n){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n)}},{key:"setParent",value:function(t,n){n instanceof v.default?((0,h.default)(!!t.userData._resourceId),y.default.prototype.setParent.call(this,t,n)):l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n)}},{key:"highlight",value:function(t){var n=void 0;return t.userData._resourceId?t.userData.events.emit("highlight",{uuid:t.uuid,boundingBoxFunc:function(){return t.userData._references.reduce(function(t,e){var n=e.userData._descriptor.getBoundingBoxes(e);return(0,h.default)(n.length>0),t.concat(n)},[])}}):n=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"highlight",this).call(this,t),n}},{key:"hideHighlight",value:function(t){var n=void 0;return t.userData._resourceId?t.userData.events.emit("hideHighlight"):n=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"hideHighlight",this).call(this,t),n}}]),e}(t),e.displayName=""+(t.displayName||t.name),n);return r}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(6),h=r(c),f=n(31),p=(r(f),n(2)),d=r(p),m=n(72),v=r(m),g=n(14),y=r(g);t.exports=s},function(t,e){"use strict";var n={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},r={getHostProps:function(t,e){if(!e.disabled)return e;var r={};for(var i in e)!n[i]&&e.hasOwnProperty(i)&&(r[i]=e[i]);return r}};t.exports=r},function(t,e,n){"use strict";function r(){if(s)for(var t in u){var e=u[t],n=s.indexOf(t);if(n>-1?void 0:a("96",t),!l.plugins[n]){e.extractEvents?void 0:a("97",t),l.plugins[n]=e;var r=e.eventTypes;for(var o in r)i(r[o],e,o)?void 0:a("98",o,t)}}}function i(t,e,n){l.eventNameDispatchConfigs.hasOwnProperty(n)?a("99",n):void 0,l.eventNameDispatchConfigs[n]=t;var r=t.phasedRegistrationNames;if(r){for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];o(s,e,n)}return!0}return!!t.registrationName&&(o(t.registrationName,e,n),!0)}function o(t,e,n){l.registrationNameModules[t]?a("100",t):void 0,l.registrationNameModules[t]=e,l.registrationNameDependencies[t]=e.eventTypes[n].dependencies}var a=n(4),s=(n(3),null),u={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(t){s?a("101"):void 0,s=Array.prototype.slice.call(t),r()},injectEventPluginsByName:function(t){var e=!1;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];u.hasOwnProperty(n)&&u[n]===i||(u[n]?a("102",n):void 0,u[n]=i,e=!0)}e&&r()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return l.registrationNameModules[e.registrationName]||null;for(var n in e.phasedRegistrationNames)if(e.phasedRegistrationNames.hasOwnProperty(n)){var r=l.registrationNameModules[e.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){s=null;for(var t in u)u.hasOwnProperty(t)&&delete u[t];l.plugins.length=0;var e=l.eventNameDispatchConfigs;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var r=l.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};t.exports=l},function(t,e){"use strict";function n(t){var e=/[=:]/g,n={"=":"=0",":":"=2"},r=(""+t).replace(e,function(t){return n[t]});return"$"+r}function r(t){var e=/(=0|=2)/g,n={"=0":"=","=2":":"},r="."===t[0]&&"$"===t[1]?t.substring(2):t.substring(1);return(""+r).replace(e,function(t){return n[t]})}var i={escape:n,unescape:r};t.exports=i},function(t,e,n){"use strict";function r(t){return Object.prototype.hasOwnProperty.call(t,v)||(t[v]=d++,f[t[v]]={}),f[t[v]]}var i,o=n(7),a=n(23),s=n(55),u=n(363),l=n(149),c=n(390),h=n(90),f={},p=!1,d=0,m={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},v="_reactListenersID"+String(Math.random()).slice(2),g=o({},u,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=t}},setEnabled:function(t){g.ReactEventListener&&g.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var n=e,i=r(n),o=s.registrationNameDependencies[t],u=a.topLevelTypes,l=0;l<o.length;l++){var c=o[l];i.hasOwnProperty(c)&&i[c]||(c===u.topWheel?h("wheel")?g.ReactEventListener.trapBubbledEvent(u.topWheel,"wheel",n):h("mousewheel")?g.ReactEventListener.trapBubbledEvent(u.topWheel,"mousewheel",n):g.ReactEventListener.trapBubbledEvent(u.topWheel,"DOMMouseScroll",n):c===u.topScroll?h("scroll",!0)?g.ReactEventListener.trapCapturedEvent(u.topScroll,"scroll",n):g.ReactEventListener.trapBubbledEvent(u.topScroll,"scroll",g.ReactEventListener.WINDOW_HANDLE):c===u.topFocus||c===u.topBlur?(h("focus",!0)?(g.ReactEventListener.trapCapturedEvent(u.topFocus,"focus",n),g.ReactEventListener.trapCapturedEvent(u.topBlur,"blur",n)):h("focusin")&&(g.ReactEventListener.trapBubbledEvent(u.topFocus,"focusin",n),g.ReactEventListener.trapBubbledEvent(u.topBlur,"focusout",n)),i[u.topBlur]=!0,i[u.topFocus]=!0):m.hasOwnProperty(c)&&g.ReactEventListener.trapBubbledEvent(c,m[c],n),i[c]=!0)}},trapBubbledEvent:function(t,e,n){return g.ReactEventListener.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return g.ReactEventListener.trapCapturedEvent(t,e,n)},ensureScrollValueMonitoring:function(){if(void 0===i&&(i=document.createEvent&&"pageX"in document.createEvent("MouseEvent")),!i&&!p){var t=l.refreshScrollValues;g.ReactEventListener.monitorScrollValue(t),p=!0}}});t.exports=g},function(t,e,n){"use strict";function r(t,e,n){this.props=t,this.context=e,this.refs=a,this.updater=n||o}var i=n(4),o=n(83),a=(n(151),n(37));n(3),n(5);r.prototype.isReactComponent={},r.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t?i("85"):void 0,this.updater.enqueueSetState(this,t),e&&this.updater.enqueueCallback(this,e,"setState")},r.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t,"forceUpdate")};t.exports=r},function(t,e,n){"use strict";var r=n(44),i=r({prop:null,context:null,childContext:null});t.exports=i},function(t,e,n){"use strict";function r(t){u.enqueueUpdate(t)}function i(t){var e=typeof t;if("object"!==e)return e;var n=t.constructor&&t.constructor.name||e,r=Object.keys(t);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function o(t,e){var n=s.get(t);if(!n){return null}return n}var a=n(4),s=(n(20),n(33)),u=(n(12),n(19)),l=(n(3),n(5),{isMounted:function(t){var e=s.get(t);return!!e&&!!e._renderedComponent},enqueueCallback:function(t,e,n){l.validateCallback(e,n);var i=o(t);return i?(i._pendingCallbacks?i._pendingCallbacks.push(e):i._pendingCallbacks=[e],void r(i)):null},enqueueCallbackInternal:function(t,e){t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e],r(t)},enqueueForceUpdate:function(t){var e=o(t,"forceUpdate");e&&(e._pendingForceUpdate=!0,r(e))},enqueueReplaceState:function(t,e){var n=o(t,"replaceState");n&&(n._pendingStateQueue=[e],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(t,e){var n=o(t,"setState");if(n){var i=n._pendingStateQueue||(n._pendingStateQueue=[]);i.push(e),r(n)}},enqueueElementInternal:function(t,e,n){t._pendingElement=e,t._context=n,r(t)},validateCallback:function(t,e){t&&"function"!=typeof t?a("122",e,i(t)):void 0}});t.exports=l},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(42),o=n(149),a=n(87),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+o.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+o.currentScrollTop}};i.augmentClass(r,s),t.exports=r},function(t,e){"use strict";function n(t){var e=""+t,n=i.exec(e);if(!n)return e;var r,o="",a=0,s=0;for(a=n.index;a<e.length;a++){switch(e.charCodeAt(a)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==a&&(o+=e.substring(s,a)),s=a+1,o+=r}return s!==a?o+e.substring(s,a):o}function r(t){return"boolean"==typeof t||"number"==typeof t?""+t:n(t)}var i=/["'&<>]/;t.exports=r},function(t,e,n){"use strict";var r,i=n(13),o=n(77),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,u=n(85),l=u(function(t,e){if(t.namespaceURI!==o.svg||"innerHTML"in t)t.innerHTML=e;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+e+"</svg>";for(var n=r.firstChild.childNodes,i=0;i<n.length;i++)t.appendChild(n[i])}});if(i.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(l=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),a.test(e)||"<"===e[0]&&s.test(e)){t.innerHTML=String.fromCharCode(65279)+e;var n=t.firstChild;1===n.data.length?t.removeChild(n):n.deleteData(0,1)}else t.innerHTML=e}),c=null}t.exports=l},function(t,e){"use strict";function n(t,e){var n=null===t||t===!1,r=null===e||e===!1;if(n||r)return n===r;var i=typeof t,o=typeof e;return"string"===i||"number"===i?"string"===o||"number"===o:"object"===o&&t.type===e.type&&t.key===e.key}t.exports=n},function(t,e,n){"use strict";function r(t,e){return t&&"object"==typeof t&&null!=t.key?l.escape(t.key):e.toString(36)}function i(t,e,n,o){var f=typeof t;if("undefined"!==f&&"boolean"!==f||(t=null),null===t||"string"===f||"number"===f||s.isValidElement(t))return n(o,t,""===e?c+r(t,0):e),1;var p,d,m=0,v=""===e?c:e+h;if(Array.isArray(t))for(var g=0;g<t.length;g++)p=t[g],d=v+r(p,g),m+=i(p,d,n,o);else{var y=u(t);if(y){var _,b=y.call(t);if(y!==t.entries)for(var w=0;!(_=b.next()).done;)p=_.value,d=v+r(p,w++),m+=i(p,d,n,o);else for(;!(_=b.next()).done;){var x=_.value;x&&(p=x[1],d=v+l.escape(x[0])+h+r(p,0),m+=i(p,d,n,o))}}else if("object"===f){var E="",C=String(t);a("31","[object Object]"===C?"object with keys {"+Object.keys(t).join(", ")+"}":C,E)}}return m}function o(t,e,n){return null==t?0:i(t,"",e,n)}var a=n(4),s=(n(20),n(15)),u=n(155),l=(n(3),n(56)),c=(n(5),"."),h=":";t.exports=o},function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments[1],n=new Array(t),r=0,i=0,s=0,c=function(e){n[i]=e,i=(i+1)%t,r++},h=function(){if(0!=r){var e=n[s];return n[s]=null,r--,s=(s+1)%t,e}},f=function(){for(var t=[];r;)t.push(h());return t};return{isEmpty:function(){return 0==r},put:function(h){if(r<t)c(h);else{var p=void 0;switch(e){case a:throw new Error(o);case u:n[i]=h,i=(i+1)%t,s=i;break;case l:p=2*t,n=f(),r=n.length,i=n.length,s=0,n.length=p,t=p,c(h)}}},take:h,flush:f}}Object.defineProperty(e,"__esModule",{value:!0}),e.buffers=e.BUFFER_OVERFLOW=void 0;var i=n(25),o=e.BUFFER_OVERFLOW="Channel's Buffer overflow!",a=1,s=2,u=3,l=4,c={isEmpty:i.kTrue,put:i.noop,take:i.noop};e.buffers={none:function(){return c},fixed:function(t){return r(t,a)},dropping:function(t){return r(t,s)},sliding:function(t){return r(t,u)},expanding:function(t){return r(t,l)}}},function(t,e,n){"use strict";function r(){function t(t){return n.push(t),function(){return(0,u.remove)(n,t)}}function e(t){for(var e=n.slice(),r=0,i=e.length;r<i;r++)e[r](t)}var n=[];return{subscribe:t,emit:e}}function i(){function t(){if(a&&s.length)throw(0,u.internalErr)("Cannot have a closed channel with pending takers");if(s.length&&!o.isEmpty())throw(0,u.internalErr)("Cannot have pending takers with non empty buffer")}function e(e){if(t(),(0,u.check)(e,u.is.notUndef,d),!a){if(!s.length)return o.put(e);for(var n=0;n<s.length;n++){var r=s[n];if(!r[u.MATCH]||r[u.MATCH](e))return s.splice(n,1),r(e)}}}function n(e){t(),(0,u.check)(e,u.is.func,"channel.take's callback must be a function"),a&&o.isEmpty()?e(h):o.isEmpty()?(s.push(e),e.cancel=function(){return(0,u.remove)(s,e)}):e(o.take())}function r(e){return t(),(0,u.check)(e,u.is.func,"channel.flush' callback must be a function"),a&&o.isEmpty()?void e(h):void e(o.flush())}function i(){if(t(),!a&&(a=!0,s.length)){var e=s;s=[];for(var n=0,r=e.length;n<r;n++)e[n](h)}}var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.buffers.fixed(),a=!1,s=[];return(0,u.check)(o,u.is.buffer,p),{take:n,put:e,flush:r,close:i,get __takers__(){return s},get __closed__(){return a}}}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.buffers.none(),n=arguments[2];arguments.length>2&&(0,u.check)(n,u.is.func,"Invalid match function passed to eventChannel");var r=i(e),o=t(function(t){f(t)?r.close():n&&!n(t)||r.put(t)});if(!u.is.func(o))throw new Error("in eventChannel: subscribe should return a function to unsubscribe");return{take:r.take,flush:r.flush,close:function(){r.__closed__||(r.close(),o())}}}function a(t){var e=o(t);return s({},e,{take:function(t,n){arguments.length>1&&((0,u.check)(n,u.is.func,"channel.take's matcher argument must be a function"),t[u.MATCH]=n),e.take(t)}})}Object.defineProperty(e,"__esModule",{value:!0}),e.UNDEFINED_INPUT_ERROR=e.INVALID_BUFFER=e.isEnd=e.END=void 0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.emitter=r,e.channel=i,e.eventChannel=o,e.stdChannel=a;var u=n(25),l=n(66),c="@@redux-saga/CHANNEL_END",h=e.END={type:c},f=e.isEnd=function(t){return t&&t.type===c},p=e.INVALID_BUFFER="invalid buffer passed to channel factory function",d=e.UNDEFINED_INPUT_ERROR="Saga was provided with an undefined action"},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&(0,w.check)(arguments[0],w.is.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),w.is.pattern(t))return D(E,{pattern:t});if(w.is.channel(t))return D(E,{channel:t});throw new Error("take(patternOrChannel): argument "+String(t)+" is not valid channel or a valid pattern")}function o(){var t=i.apply(void 0,arguments);return t[E].maybe=!0,t}function a(t,e){return arguments.length>1?((0,w.check)(t,w.is.notUndef,"put(channel, action): argument channel is undefined"),(0,w.check)(t,w.is.channel,"put(channel, action): argument "+t+" is not a valid channel"),(0,w.check)(e,w.is.notUndef,"put(channel, action): argument action is undefined")):((0,w.check)(t,w.is.notUndef,"put(action): argument action is undefined"),e=t,t=null),D(C,{channel:t,action:e})}function s(t){return D(S,t)}function u(t,e,n){(0,w.check)(e,w.is.notUndef,t+": argument fn is undefined");var r=null;if(w.is.array(e)){var i=e,o=b(i,2);r=o[0],e=o[1]}else if(e.fn){var a=e;r=a.context,e=a.fn}return(0,w.check)(e,w.is.func,t+": argument "+e+" is not a function"),{context:r,fn:e,args:n}}function l(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return D(M,u("call",t,n))}function c(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return D(M,u("apply",{context:t,fn:e},n))}function h(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return D(P,u("cps",t,n))}function f(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return D(T,u("fork",t,n))}function p(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=f.apply(void 0,[t].concat(n));return i[T].detached=!0,i}function d(t){if((0,w.check)(t,w.is.notUndef,"join(task): argument task is undefined"),!j(t))throw new Error("join(task): argument "+t+" is not a valid Task object \n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)");
return D(O,t)}function m(t){if((0,w.check)(t,w.is.notUndef,"cancel(task): argument task is undefined"),!j(t))throw new Error("cancel(task): argument "+t+" is not a valid Task object \n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)");return D(A,t)}function v(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return 0===arguments.length?t=w.ident:((0,w.check)(t,w.is.notUndef,"select(selector,[...]): argument selector is undefined"),(0,w.check)(t,w.is.func,"select(selector,[...]): argument "+t+" is not a function")),D(R,{selector:t,args:n})}function g(t,e){return(0,w.check)(t,w.is.notUndef,"actionChannel(pattern,...): argument pattern is undefined"),arguments.length>1&&((0,w.check)(e,w.is.notUndef,"actionChannel(pattern, buffer): argument buffer is undefined"),(0,w.check)(e,w.is.notUndef,"actionChannel(pattern, buffer): argument "+e+" is not a valid buffer")),D(L,{pattern:t,buffer:e})}function y(){return D(I,{})}function _(t){return(0,w.check)(t,w.is.channel,"flush(channel): argument "+t+" is not valid channel"),D(k,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.asEffect=void 0;var b=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.take=i,e.takem=o,e.put=a,e.race=s,e.call=l,e.apply=c,e.cps=h,e.fork=f,e.spawn=p,e.join=d,e.cancel=m,e.select=v,e.actionChannel=g,e.cancelled=y,e.flush=_;var w=n(25),x=(0,w.sym)("IO"),E="TAKE",C="PUT",S="RACE",M="CALL",P="CPS",T="FORK",O="JOIN",A="CANCEL",R="SELECT",L="ACTION_CHANNEL",I="CANCELLED",k="FLUSH",D=function(t,e){var n;return n={},r(n,x,!0),r(n,t,e),n};a.sync=function(){var t=a.apply(void 0,arguments);return t[C].sync=!0,t};var j=function(t){return t[w.TASK]};e.asEffect={take:function(t){return t&&t[x]&&t[E]},put:function(t){return t&&t[x]&&t[C]},race:function(t){return t&&t[x]&&t[S]},call:function(t){return t&&t[x]&&t[M]},cps:function(t){return t&&t[x]&&t[P]},fork:function(t){return t&&t[x]&&t[T]},join:function(t){return t&&t[x]&&t[O]},cancel:function(t){return t&&t[x]&&t[A]},select:function(t){return t&&t[x]&&t[R]},actionChannel:function(t){return t&&t[x]&&t[L]},cancelled:function(t){return t&&t[x]&&t[I]},flush:function(t){return t&&t[x]&&t[k]}}},function(t,e,n){function r(t){if(!a(t)||i(t)!=s)return!1;var e=o(t);if(null===e)return!0;var n=h.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}var i=n(207),o=n(209),a=n(214),s="[object Object]",u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=c.call(Object);t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.SCALE=e.DEGS_TO_RADS=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(10),s=r(a),u=n(1),l=r(u),c=e.DEGS_TO_RADS=Math.PI/180,h=e.SCALE=.005,f=function(){function t(){i(this,t)}return o(t,[{key:"createShape",value:function(t,e,n,r,i,o,a,s,u){var c=new l.default.ShapeGeometry(t),h=new l.default.MeshBasicMaterial({color:e,side:l.default.DoubleSide,overdraw:!0}),f=new l.default.Mesh(c,h);return f.position.set(n,r,i),f.rotation.set(o,a,s),f.scale.set(u,u,u),f}},{key:"transformSVGPath",value:function(t){function e(){for(var e,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,o=!1;b<w&&(n=t.charCodeAt(b),n===m||n===v);)b++;for(e=n===y?b++:b;b<w;)if(n=t.charCodeAt(b),p<=n&&n<=d)b++;else{if(n!==g)return r=t.substring(e,b),(o?parseFloat(r):parseInt(r))*i;b++,o=!0}return r=t.substring(e),(o?parseFloat(r):parseInt(r))*i}function n(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function r(){for(var e;b<w&&(e=t.charCodeAt(b),e===m||e===v);)b++;return e=t.charCodeAt(b),e===y||p<=e&&e<=d}var i,o,a,u,f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],p=48,d=57,m=44,v=32,g=46,y=45,_=f?[]:new l.default.Shape,b=1,w=t.length,x=0,E=0,C=0,S=0,M=null,P=null,T=0,O=0,A=0,R=0,L=0,I=0,k=0,D=0,j=0;for(i=t[0];b<=w;){switch(u=!0,i){case"M":x=e(),E=e(),f?_.push(s.default.createElement("moveTo",{x:x,y:E,key:n()})):_.moveTo(x,E),i="L";break;case"m":x+=e(),E+=e(),f?_.push(s.default.createElement("moveTo",{x:x,y:E})):_.moveTo(x,E),i="l";break;case"Z":case"z":u=!1,x===M&&E===P||(f?_.push(s.default.createElement("lineTo",{x:M,y:P,key:n()})):_.lineTo(M,P));break;case"L":case"H":case"V":C="V"===i?x:e(),S="H"===i?E:e(),f?_.push(s.default.createElement("lineTo",{x:C,y:S,key:n()})):_.lineTo(C,S),x=C,E=S;break;case"l":case"h":case"v":C="v"===i?x:x+e(),S="h"===i?E:E+e(),f?_.push(s.default.createElement("lineTo",{x:C,y:S,key:n()})):_.lineTo(C,S),x=C,E=S;break;case"C":T=e(),A=e();case"S":"S"===i&&(T=2*x-O,A=2*E-R),O=e(),R=e(),C=e(),S=e(),f?_.push(s.default.createElement("bezierCurveTo",{cp1X:T,cp1Y:A,cp2X:O,cp2Y:R,x:C,y:S,key:n()})):_.bezierCurveTo(T,A,O,R,C,S),x=C,E=S;break;case"c":T=x+e(),A=E+e();case"s":"s"===i&&(T=2*x-O,A=2*E-R),O=x+e(),R=E+e(),C=x+e(),S=E+e(),f?_.push(s.default.createElement("bezierCurveTo",{cp1X:T,cp1Y:A,cp2X:O,cp2Y:R,x:C,y:S,key:n()})):_.bezierCurveTo(T,A,O,R,C,S),x=C,E=S;break;case"Q":T=e(),A=e();case"T":"T"===i&&(T=2*x-T,A=2*E-A),C=e(),S=e(),f?_.push(s.default.createElement("quadraticCurveTo",{cpX:T,cpY:A,x:C,y:S,key:n()})):_.quadraticCurveTo(T,A,C,S),x=C,E=S;break;case"q":T=x+e(),A=E+e();case"t":"t"===i&&(T=2*x-T,A=2*E-A),C=x+e(),S=E+e(),f?_.push(s.default.createElement("quadraticCurveTo",{cpX:T,cpY:A,x:C,y:S,key:n()})):_.quadraticCurveTo(T,A,C,S),x=C,E=S;break;case"A":L=e(),I=e(),k=e()*c,D=e(),j=e(),C=e(),S=e(),L!==I&&console.warn("Forcing elliptical arc to be a circular one :(",L,I),T=Math.cos(k)*(x-C)/2+Math.sin(k)*(E-S)/2,A=-Math.sin(k)*(x-C)/2+Math.cos(k)*(E-S)/2;var N=Math.sqrt((L*L*I*I-L*L*A*A-I*I*T*T)/(L*L*A*A+I*I*T*T));D===j&&(N=-N),O=N*L*A/I,R=N*-I*T/L,o=Math.cos(k)*O-Math.sin(k)*R+(x+C)/2,a=Math.sin(k)*O+Math.cos(k)*R+(E+S)/2;var B=new l.default.Vector2(1,0),F=new l.default.Vector2((T-O)/L,(A-R)/I),U=Math.acos(B.dot(F)/B.length()/F.length());B.x*F.y-B.y*F.x<0&&(U=-U),B.x=(-T-O)/L,B.y=(-A-R)/I;var V=Math.acos(F.dot(B)/F.length()/B.length());F.x*B.y-F.y*B.x<0&&(V=-V),!j&&V>0&&(V-=2*Math.PI),j&&V<0&&(V+=2*Math.PI),f?_.push(s.default.createElement("absArc",{x:o,y:a,radius:L,startAngle:U,endAngle:U+V,clockwise:j,key:n()})):_.absarc(o,a,L,U,U+V,j),x=C,E=S;break;default:throw new Error("weird path command: "+i)}null===M&&(M=x,P=E),u&&r()||(i=t[b++])}return _}}]),t}();e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.roofingTotalSelector=e.roofingAreaSelector=e.roofingMaterialSelector=e.roofingColorSelector=e.claddingTotalSelector=e.claddingAreaSelector=e.claddingMaterialSelector=e.claddingColorSelector=e.frameBoxCountSelector=e.bayCountSelector=e.buildingAreaSelector=e.frameSelector=void 0;var i=n(404),o=n(1),a=r(o),s=n(108),u=function(t){return t.building.length},l=function(t){return t.frame.width},c=function(t){return t.frame.height},h=(e.frameSelector=(0,i.createSelector)(l,c,function(t,e){return(0,s.outer)(t,e)}),e.buildingAreaSelector=(0,i.createSelector)(u,l,function(t,e){return t*e}),e.bayCountSelector=(0,i.createSelector)(u,function(t){return Math.ceil(t/1.2)})),f=(e.frameBoxCountSelector=(0,i.createSelector)(h,function(t){return t+1}),{CLADDING:{RECYCLED_PLASTIC:{cost:20,color:"#5A554F",material:new a.default.MeshLambertMaterial({color:"#5A554F",side:a.default.DoubleSide,opacity:.8,transparent:!0})},LARCH:{cost:40,color:"#B7A98A",material:new a.default.MeshLambertMaterial({color:"#B7A98A",side:a.default.DoubleSide,opacity:.8,transparent:!0})},WEATHERBOARD:{cost:25,color:"#C3C5C0",material:new a.default.MeshLambertMaterial({color:"#C3C5C0",side:a.default.DoubleSide,opacity:.8,transparent:!0})},NONE:{cost:0,color:"red",material:new a.default.MeshLambertMaterial({color:"#000000",side:a.default.DoubleSide,transparent:!0,opacity:0})}},ROOFING:{STEEL:{cost:25,color:"#B8B7BF",material:new a.default.MeshLambertMaterial({color:"#B8B7BF",side:a.default.DoubleSide,opacity:.8,transparent:!0})},EPDM:{cost:15,color:"#5B5D5C",material:new a.default.MeshLambertMaterial({color:"#5B5D5C",side:a.default.DoubleSide,opacity:.8,transparent:!0})},NONE:{cost:0,color:"red",material:new a.default.MeshLambertMaterial({color:"#000000",side:a.default.DoubleSide,transparent:!0,opacity:0})}}}),p=function(t){return t.building.cladding},d=function(t){return t.building.roofing},m=(e.claddingColorSelector=(0,i.createSelector)(p,function(t){return f.CLADDING[t].color}),e.claddingMaterialSelector=(0,i.createSelector)(p,function(t){return f.CLADDING[t].material}),e.claddingAreaSelector=(0,i.createSelector)(u,l,c,function(t,e,n){return 2*(e*n+t*n)})),v=(e.claddingTotalSelector=(0,i.createSelector)(m,p,function(t,e){return t*f.CLADDING[e].cost}),e.roofingColorSelector=(0,i.createSelector)(d,function(t){return f.ROOFING[t].color}),e.roofingMaterialSelector=(0,i.createSelector)(d,function(t){return f.ROOFING[t].material}),e.roofingAreaSelector=(0,i.createSelector)(u,l,c,function(t,e,n){return Math.hypot(e/2,n/2)*t*2}));e.roofingTotalSelector=(0,i.createSelector)(v,d,function(t,e){return t*f.ROOFING[e].cost})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(1),u=r(s),l=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.visible=!1,t.resourceMap={},t.resourceIds=[],t}return a(e,t),e}(u.default.Object3D);t.exports=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(1),a=r(o),s=function t(){i(this,t),this.userData={},this.uniforms={},this.uuid=a.default.Math.generateUUID()};t.exports=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(11),h=r(c),f=function(t){function e(){var t,n,r,a;i(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),r.updateCacheAndReplace=function(t,e,n){e.userData._propsCache[t]=n,e.userData._wantPropertyOverwrite=!0},a=n,o(r,a)}return a(e,t),u(e,[{key:"beginPropertyUpdates",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginPropertyUpdates",this).call(this,t),t.userData._wantPropertyOverwrite=!1}},{key:"completePropertyUpdates",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"completePropertyUpdates",this).call(this,t),t.userData._wantPropertyOverwrite&&(t.userData._wantPropertyOverwrite=!1,t.copy(this.construct(t.userData._propsCache)))}},{key:"applyInitialProps",value:function(t,n){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),t.userData._propsCache=s({},n)}}]),e}(h.default);t.exports=f},function(t,e){"use strict";t.exports="data-reactid"},function(t,e,n){"use strict";function r(t,e){return Array.isArray(e)&&(e=e[1]),e?e.nextSibling:t.firstChild}function i(t,e,n){c.insertTreeBefore(t,e,n)}function o(t,e,n){Array.isArray(e)?s(t,e[0],e[1],n):v(t,e,n)}function a(t,e){if(Array.isArray(e)){var n=e[1];e=e[0],u(t,e,n),t.removeChild(n)}t.removeChild(e)}function s(t,e,n,r){for(var i=e;;){var o=i.nextSibling;if(v(t,i,r),i===n)break;i=o}}function u(t,e,n){for(;;){var r=e.nextSibling;if(r===n)break;t.removeChild(r)}}function l(t,e,n){var r=t.parentNode,i=t.nextSibling;i===e?n&&v(r,document.createTextNode(n),i):n?(m(i,n),u(r,i,e)):u(r,t,e)}var c=n(36),h=n(337),f=n(144),p=(n(8),n(12),n(85)),d=n(63),m=n(159),v=p(function(t,e,n){t.insertBefore(e,n)}),g=h.dangerouslyReplaceNodeWithMarkup,y={dangerouslyReplaceNodeWithMarkup:g,replaceDelimitedText:l,processUpdates:function(t,e){for(var n=0;n<e.length;n++){var s=e[n];switch(s.type){case f.INSERT_MARKUP:i(t,s.content,r(t,s.afterNode));break;case f.MOVE_EXISTING:o(t,s.fromNode,r(t,s.afterNode));break;case f.SET_MARKUP:d(t,s.content);break;case f.TEXT_CONTENT:m(t,s.content);break;case f.REMOVE_NODE:a(t,s.fromNode)}}}};t.exports=y},function(t,e){"use strict";var n={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};t.exports=n},function(t,e,n){"use strict";function r(t){return t===y.topMouseUp||t===y.topTouchEnd||t===y.topTouchCancel}function i(t){return t===y.topMouseMove||t===y.topTouchMove}function o(t){return t===y.topMouseDown||t===y.topTouchStart}function a(t,e,n,r){var i=t.type||"unknown-event";t.currentTarget=_.getNodeFromInstance(r),e?v.invokeGuardedCallbackWithCatch(i,n,t):v.invokeGuardedCallback(i,n,t),t.currentTarget=null}function s(t,e){var n=t._dispatchListeners,r=t._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!t.isPropagationStopped();i++)a(t,e,n[i],r[i]);else n&&a(t,e,n,r);t._dispatchListeners=null,t._dispatchInstances=null}function u(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e)){for(var r=0;r<e.length&&!t.isPropagationStopped();r++)if(e[r](t,n[r]))return n[r]}else if(e&&e(t,n))return n;return null}function l(t){var e=u(t);return t._dispatchInstances=null,t._dispatchListeners=null,e}function c(t){var e=t._dispatchListeners,n=t._dispatchInstances;Array.isArray(e)?d("103"):void 0,t.currentTarget=e?_.getNodeFromInstance(n):null;var r=e?e(t):null;return t.currentTarget=null,t._dispatchListeners=null,t._dispatchInstances=null,r}function h(t){return!!t._dispatchListeners}var f,p,d=n(4),m=n(23),v=n(82),g=(n(3),n(5),{injectComponentTree:function(t){f=t},injectTreeTraversal:function(t){p=t}}),y=m.topLevelTypes,_={isEndish:r,isMoveish:i,isStartish:o,executeDirectDispatch:c,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:l,hasDispatches:h,getInstanceFromNode:function(t){return f.getInstanceFromNode(t)},getNodeFromInstance:function(t){return f.getNodeFromInstance(t)},isAncestor:function(t,e){return p.isAncestor(t,e)},getLowestCommonAncestor:function(t,e){return p.getLowestCommonAncestor(t,e)},getParentInstance:function(t){return p.getParentInstance(t)},traverseTwoPhase:function(t,e,n){return p.traverseTwoPhase(t,e,n)},traverseEnterLeave:function(t,e,n,r,i){return p.traverseEnterLeave(t,e,n,r,i)},injection:g};t.exports=_},function(t,e,n){"use strict";function r(t){null!=t.checkedLink&&null!=t.valueLink?s("87"):void 0}function i(t){r(t),null!=t.value||null!=t.onChange?s("88"):void 0}function o(t){r(t),null!=t.checked||null!=t.onChange?s("89"):void 0}function a(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}var s=n(4),u=n(2),l=n(59),c=n(84),h=(n(3),n(5),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),f={value:function(t,e,n){return!t[e]||h[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e,n){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:u.func},p={},d={checkPropTypes:function(t,e,n){for(var r in f){if(f.hasOwnProperty(r))var i=f[r](e,r,t,l.prop,null,c);if(i instanceof Error&&!(i.message in p)){p[i.message]=!0;a(n)}}},getValue:function(t){return t.valueLink?(i(t),t.valueLink.value):t.value},getChecked:function(t){return t.checkedLink?(o(t),t.checkedLink.value):t.checked},executeOnChange:function(t,e){return t.valueLink?(i(t),t.valueLink.requestChange(e.target.value)):t.checkedLink?(o(t),t.checkedLink.requestChange(e.target.checked)):t.onChange?t.onChange.call(void 0,e):void 0}};t.exports=d},function(t,e,n){"use strict";function r(t){return(""+t).replace(b,"$&/")}function i(t,e){this.func=t,this.context=e,this.count=0}function o(t,e,n){var r=t.func,i=t.context;r.call(i,e,t.count++)}function a(t,e,n){if(null==t)return t;var r=i.getPooled(e,n);g(t,o,r),i.release(r)}function s(t,e,n,r){this.result=t,this.keyPrefix=e,this.func=n,this.context=r,this.count=0}function u(t,e,n){var i=t.result,o=t.keyPrefix,a=t.func,s=t.context,u=a.call(s,e,t.count++);Array.isArray(u)?l(u,i,n,v.thatReturnsArgument):null!=u&&(m.isValidElement(u)&&(u=m.cloneAndReplaceKey(u,o+(!u.key||e&&e.key===u.key?"":r(u.key)+"/")+n)),i.push(u))}function l(t,e,n,i,o){var a="";null!=n&&(a=r(n)+"/");var l=s.getPooled(e,a,i,o);g(t,u,l),s.release(l)}function c(t,e,n){if(null==t)return t;var r=[];return l(t,r,null,e,n),r}function h(t,e,n){return null}function f(t,e){return g(t,h,null)}function p(t){var e=[];return l(t,e,null,v.thatReturnsArgument),e}var d=n(28),m=n(15),v=n(17),g=n(65),y=d.twoArgumentPooler,_=d.fourArgumentPooler,b=/\/+/g;i.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},d.addPoolingTo(i,y),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},d.addPoolingTo(s,_);var w={forEach:a,map:c,mapIntoWithKeyPrefixInternal:l,count:f,toArray:p};t.exports=w},function(t,e,n){"use strict";var r=n(4),i=(n(3),!1),o={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){i?r("104"):void 0,o.replaceNodeWithMarkup=t.replaceNodeWithMarkup,o.processChildrenUpdates=t.processChildrenUpdates,i=!0}}};t.exports=o},function(t,e,n){"use strict";function r(t,e,n,r){try{return e(n,r)}catch(o){return void(null===i&&(i=o))}}var i=null,o={invokeGuardedCallback:r,invokeGuardedCallbackWithCatch:r,rethrowCaughtError:function(){if(i){var t=i;throw i=null,t}}};t.exports=o},function(t,e,n){"use strict";function r(t,e){}var i=(n(5),{isMounted:function(t){return!1},enqueueCallback:function(t,e){},enqueueForceUpdate:function(t){r(t,"forceUpdate")},enqueueReplaceState:function(t,e){r(t,"replaceState")},enqueueSetState:function(t,e){r(t,"setState")}});t.exports=i},function(t,e){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";t.exports=n},function(t,e){"use strict";var n=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t};t.exports=n},function(t,e){"use strict";function n(t){var e,n=t.keyCode;return"charCode"in t?(e=t.charCode,0===e&&13===n&&(e=13)):e=n,e>=32||13===e?e:0}t.exports=n},function(t,e){"use strict";function n(t){var e=this,n=e.nativeEvent;if(n.getModifierState)return n.getModifierState(t);var r=i[t];return!!r&&!!n[r]}function r(t){return n}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=r},function(t,e){"use strict";function n(t){var e=t.target||t.srcElement||window;return e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}t.exports=n},function(t,e,n){"use strict";function r(t){for(var e;(e=t._renderedNodeType)===i.COMPOSITE;)t=t._renderedComponent;return e===i.HOST?t._renderedComponent:e===i.EMPTY?null:void 0}var i=n(145);t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!o.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&i&&"wheel"===t&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,o=n(13);o.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=r},function(t,e,n){"use strict";var r=(n(7),n(17)),i=(n(5),r);t.exports=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.compose=e.applyMiddleware=e.bindActionCreators=e.combineReducers=e.createStore=void 0;var i=n(165),o=r(i),a=n(403),s=r(a),u=n(402),l=r(u),c=n(401),h=r(c),f=n(164),p=r(f),d=n(166);r(d);e.createStore=o.default,e.combineReducers=s.default,e.bindActionCreators=l.default,e.applyMiddleware=h.default,e.compose=p.default},function(t,e,n){t.exports=n(167)},function(t,e,n){"use strict";var r=n(16),i=n(173),o=n(176),a=n(182),s=n(180),u=n(97),l="undefined"!=typeof window&&window.btoa||n(175);t.exports=function(t){return new Promise(function(e,c){var h=t.data,f=t.headers;r.isFormData(h)&&delete f["Content-Type"];var p=new XMLHttpRequest,d="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||s(t.url)||(p=new window.XDomainRequest,d="onload",m=!0,p.onprogress=function(){},p.ontimeout=function(){}),t.auth){var v=t.auth.username||"",g=t.auth.password||"";f.Authorization="Basic "+l(v+":"+g)}if(p.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p[d]=function(){if(p&&(4===p.readyState||m)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,r=t.responseType&&"text"!==t.responseType?p.response:p.responseText,o={data:r,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:n,config:t,request:p};i(e,c,o),p=null}},p.onerror=function(){c(u("Network Error",t)),p=null},p.ontimeout=function(){c(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED")),p=null},r.isStandardBrowserEnv()){var y=n(178),_=(t.withCredentials||s(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;_&&(f[t.xsrfHeaderName]=_)}if("setRequestHeader"in p&&r.forEach(f,function(t,e){"undefined"==typeof h&&"content-type"===e.toLowerCase()?delete f[e]:p.setRequestHeader(e,t)}),t.withCredentials&&(p.withCredentials=!0),t.responseType)try{p.responseType=t.responseType}catch(b){if("json"!==p.responseType)throw b}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){p&&(p.abort(),c(t),p=null)}),void 0===h&&(h=null),p.send(h)})}},function(t,e){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";var r=n(172);t.exports=function(t,e,n,i){var o=new Error(t);return r(o,e,n,i)}},function(t,e,n){(function(e){"use strict";function r(t,e){!o.isUndefined(t)&&o.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function i(){var t;return"undefined"!=typeof XMLHttpRequest?t=n(94):"undefined"!=typeof e&&(t=n(94)),t}var o=n(16),a=n(181),s=/^\)\]\}',?\n/,u={"Content-Type":"application/x-www-form-urlencoded"};t.exports={adapter:i(),transformRequest:[function(t,e){return a(e,"Content-Type"),o.isFormData(t)||o.isArrayBuffer(t)||o.isStream(t)||o.isFile(t)||o.isBlob(t)?t:o.isArrayBufferView(t)?t.buffer:o.isURLSearchParams(t)?(r(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):o.isObject(t)?(r(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t){t=t.replace(s,"");try{t=JSON.parse(t)}catch(e){}}return t}],headers:{common:{Accept:"application/json, text/plain, */*"},patch:o.merge(u),post:o.merge(u),put:o.merge(u)},timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}}}).call(e,n(34))},function(t,e){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(17),i={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!0),{remove:function(){t.removeEventListener(e,n,!0)}}):{remove:r}},registerDefault:function(){}};t.exports=i},function(t,e){"use strict";function n(t){try{t.focus()}catch(e){}}t.exports=n},function(t,e){"use strict";function n(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(t){return document.body}}t.exports=n},function(t,e,n){var r=n(213),i=r.Symbol;t.exports=i},function(t,e,n){var r;(function(t,i){(function(){function o(t,e){return t.set(e[0],e[1]),t}function a(t,e){return t.add(e),t}function s(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function u(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function l(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function c(t,e){for(var n=null==t?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}function h(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function f(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function p(t,e){var n=null==t?0:t.length;return!!n&&C(t,e,0)>-1}function d(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function m(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function v(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function g(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function y(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function _(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function b(t){return t.split("")}function w(t){return t.match(Ge)||[]}function x(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function E(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function C(t,e,n){return e===e?J(t,e,n):E(t,M,n)}function S(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function M(t){return t!==t}function P(t,e){var n=null==t?0:t.length;return n?L(t,e)/n:Nt}function T(t){return function(e){return null==e?it:e[t]}}function O(t){return function(e){return null==t?it:t[e]}}function A(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function R(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function L(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==it&&(n=n===it?o:n+o)}return n}function I(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function k(t,e){return m(e,function(e){return[e,t[e]]})}function D(t){return function(e){return t(e)}}function j(t,e){return m(e,function(e){return t[e]})}function N(t,e){return t.has(e)}function B(t,e){for(var n=-1,r=t.length;++n<r&&C(e,t[n],0)>-1;);return n}function F(t,e){for(var n=t.length;n--&&C(e,t[n],0)>-1;);return n}function U(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function V(t){return"\\"+nr[t]}function z(t,e){return null==t?it:t[e]}function G(t){return qn.test(t)}function H(t){return Yn.test(t)}function W(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function X(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function q(t,e){return function(n){return t(e(n))}}function Y(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==ht||(t[n]=ht,o[i++]=n)}return o}function K(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Z(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function J(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Q(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function $(t){return G(t)?et(t):_r(t)}function tt(t){return G(t)?nt(t):b(t)}function et(t){for(var e=Wn.lastIndex=0;Wn.test(t);)++e;return e}function nt(t){return t.match(Wn)||[]}function rt(t){return t.match(Xn)||[]}var it,ot="4.17.2",at=200,st="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ut="Expected a function",lt="__lodash_hash_undefined__",ct=500,ht="__lodash_placeholder__",ft=1,pt=2,dt=4,mt=1,vt=2,gt=1,yt=2,_t=4,bt=8,wt=16,xt=32,Et=64,Ct=128,St=256,Mt=512,Pt=30,Tt="...",Ot=800,At=16,Rt=1,Lt=2,It=3,kt=1/0,Dt=9007199254740991,jt=1.7976931348623157e308,Nt=NaN,Bt=4294967295,Ft=Bt-1,Ut=Bt>>>1,Vt=[["ary",Ct],["bind",gt],["bindKey",yt],["curry",bt],["curryRight",wt],["flip",Mt],["partial",xt],["partialRight",Et],["rearg",St]],zt="[object Arguments]",Gt="[object Array]",Ht="[object AsyncFunction]",Wt="[object Boolean]",Xt="[object Date]",qt="[object DOMException]",Yt="[object Error]",Kt="[object Function]",Zt="[object GeneratorFunction]",Jt="[object Map]",Qt="[object Number]",$t="[object Null]",te="[object Object]",ee="[object Promise]",ne="[object Proxy]",re="[object RegExp]",ie="[object Set]",oe="[object String]",ae="[object Symbol]",se="[object Undefined]",ue="[object WeakMap]",le="[object WeakSet]",ce="[object ArrayBuffer]",he="[object DataView]",fe="[object Float32Array]",pe="[object Float64Array]",de="[object Int8Array]",me="[object Int16Array]",ve="[object Int32Array]",ge="[object Uint8Array]",ye="[object Uint8ClampedArray]",_e="[object Uint16Array]",be="[object Uint32Array]",we=/\b__p \+= '';/g,xe=/\b(__p \+=) '' \+/g,Ee=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ce=/&(?:amp|lt|gt|quot|#39);/g,Se=/[&<>"']/g,Me=RegExp(Ce.source),Pe=RegExp(Se.source),Te=/<%-([\s\S]+?)%>/g,Oe=/<%([\s\S]+?)%>/g,Ae=/<%=([\s\S]+?)%>/g,Re=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Le=/^\w*$/,Ie=/^\./,ke=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,De=/[\\^$.*+?()[\]{}|]/g,je=RegExp(De.source),Ne=/^\s+|\s+$/g,Be=/^\s+/,Fe=/\s+$/,Ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ve=/\{\n\/\* \[wrapped with (.+)\] \*/,ze=/,? & /,Ge=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,He=/\\(\\)?/g,We=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xe=/\w*$/,qe=/^[-+]0x[0-9a-f]+$/i,Ye=/^0b[01]+$/i,Ke=/^\[object .+?Constructor\]$/,Ze=/^0o[0-7]+$/i,Je=/^(?:0|[1-9]\d*)$/,Qe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$e=/($^)/,tn=/['\n\r\u2028\u2029\\]/g,en="\\ud800-\\udfff",nn="\\u0300-\\u036f",rn="\\ufe20-\\ufe2f",on="\\u20d0-\\u20ff",an=nn+rn+on,sn="\\u2700-\\u27bf",un="a-z\\xdf-\\xf6\\xf8-\\xff",ln="\\xac\\xb1\\xd7\\xf7",cn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hn="\\u2000-\\u206f",fn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pn="A-Z\\xc0-\\xd6\\xd8-\\xde",dn="\\ufe0e\\ufe0f",mn=ln+cn+hn+fn,vn="['’]",gn="["+en+"]",yn="["+mn+"]",_n="["+an+"]",bn="\\d+",wn="["+sn+"]",xn="["+un+"]",En="[^"+en+mn+bn+sn+un+pn+"]",Cn="\\ud83c[\\udffb-\\udfff]",Sn="(?:"+_n+"|"+Cn+")",Mn="[^"+en+"]",Pn="(?:\\ud83c[\\udde6-\\uddff]){2}",Tn="[\\ud800-\\udbff][\\udc00-\\udfff]",On="["+pn+"]",An="\\u200d",Rn="(?:"+xn+"|"+En+")",Ln="(?:"+On+"|"+En+")",In="(?:"+vn+"(?:d|ll|m|re|s|t|ve))?",kn="(?:"+vn+"(?:D|LL|M|RE|S|T|VE))?",Dn=Sn+"?",jn="["+dn+"]?",Nn="(?:"+An+"(?:"+[Mn,Pn,Tn].join("|")+")"+jn+Dn+")*",Bn="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Fn="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Un=jn+Dn+Nn,Vn="(?:"+[wn,Pn,Tn].join("|")+")"+Un,zn="(?:"+[Mn+_n+"?",_n,Pn,Tn,gn].join("|")+")",Gn=RegExp(vn,"g"),Hn=RegExp(_n,"g"),Wn=RegExp(Cn+"(?="+Cn+")|"+zn+Un,"g"),Xn=RegExp([On+"?"+xn+"+"+In+"(?="+[yn,On,"$"].join("|")+")",Ln+"+"+kn+"(?="+[yn,On+Rn,"$"].join("|")+")",On+"?"+Rn+"+"+In,On+"+"+kn,Fn,Bn,bn,Vn].join("|"),"g"),qn=RegExp("["+An+en+an+dn+"]"),Yn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zn=-1,Jn={};
Jn[fe]=Jn[pe]=Jn[de]=Jn[me]=Jn[ve]=Jn[ge]=Jn[ye]=Jn[_e]=Jn[be]=!0,Jn[zt]=Jn[Gt]=Jn[ce]=Jn[Wt]=Jn[he]=Jn[Xt]=Jn[Yt]=Jn[Kt]=Jn[Jt]=Jn[Qt]=Jn[te]=Jn[re]=Jn[ie]=Jn[oe]=Jn[ue]=!1;var Qn={};Qn[zt]=Qn[Gt]=Qn[ce]=Qn[he]=Qn[Wt]=Qn[Xt]=Qn[fe]=Qn[pe]=Qn[de]=Qn[me]=Qn[ve]=Qn[Jt]=Qn[Qt]=Qn[te]=Qn[re]=Qn[ie]=Qn[oe]=Qn[ae]=Qn[ge]=Qn[ye]=Qn[_e]=Qn[be]=!0,Qn[Yt]=Qn[Kt]=Qn[ue]=!1;var $n={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},tr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},er={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rr=parseFloat,ir=parseInt,or="object"==typeof t&&t&&t.Object===Object&&t,ar="object"==typeof self&&self&&self.Object===Object&&self,sr=or||ar||Function("return this")(),ur="object"==typeof e&&e&&!e.nodeType&&e,lr=ur&&"object"==typeof i&&i&&!i.nodeType&&i,cr=lr&&lr.exports===ur,hr=cr&&or.process,fr=function(){try{return hr&&hr.binding&&hr.binding("util")}catch(t){}}(),pr=fr&&fr.isArrayBuffer,dr=fr&&fr.isDate,mr=fr&&fr.isMap,vr=fr&&fr.isRegExp,gr=fr&&fr.isSet,yr=fr&&fr.isTypedArray,_r=T("length"),br=O($n),wr=O(tr),xr=O(er),Er=function t(e){function n(t){if(uu(t)&&!bf(t)&&!(t instanceof b)){if(t instanceof i)return t;if(_c.call(t,"__wrapped__"))return oa(t)}return new i(t)}function r(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=it}function b(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Bt,this.__views__=[]}function O(){var t=new b(this.__wrapped__);return t.__actions__=Vi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Vi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Vi(this.__views__),t}function J(){if(this.__filtered__){var t=new b(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function et(){var t=this.__wrapped__.value(),e=this.__dir__,n=bf(t),r=e<0,i=n?t.length:0,o=To(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,f=0,p=Kc(u,this.__takeCount__);if(!n||i<at||i==u&&p==u)return xi(t,this.__actions__);var d=[];t:for(;u--&&f<p;){l+=e;for(var m=-1,v=t[l];++m<h;){var g=c[m],y=g.iteratee,_=g.type,b=y(v);if(_==Lt)v=b;else if(!b){if(_==Rt)continue t;break t}}d[f++]=v}return d}function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ge(){this.__data__=oh?oh(null):{},this.size=0}function en(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function nn(t){var e=this.__data__;if(oh){var n=e[t];return n===lt?it:n}return _c.call(e,t)?e[t]:it}function rn(t){var e=this.__data__;return oh?e[t]!==it:_c.call(e,t)}function on(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=oh&&e===it?lt:e,this}function an(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function sn(){this.__data__=[],this.size=0}function un(t){var e=this.__data__,n=kn(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Ic.call(e,n,1),--this.size,!0}function ln(t){var e=this.__data__,n=kn(e,t);return n<0?it:e[n][1]}function cn(t){return kn(this.__data__,t)>-1}function hn(t,e){var n=this.__data__,r=kn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function fn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function pn(){this.size=0,this.__data__={hash:new nt,map:new(eh||an),string:new nt}}function dn(t){var e=Co(this,t).delete(t);return this.size-=e?1:0,e}function mn(t){return Co(this,t).get(t)}function vn(t){return Co(this,t).has(t)}function gn(t,e){var n=Co(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function yn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new fn;++e<n;)this.add(t[e])}function _n(t){return this.__data__.set(t,lt),this}function bn(t){return this.__data__.has(t)}function wn(t){var e=this.__data__=new an(t);this.size=e.size}function xn(){this.__data__=new an,this.size=0}function En(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Cn(t){return this.__data__.get(t)}function Sn(t){return this.__data__.has(t)}function Mn(t,e){var n=this.__data__;if(n instanceof an){var r=n.__data__;if(!eh||r.length<at-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new fn(r)}return n.set(t,e),this.size=n.size,this}function Pn(t,e){var n=bf(t),r=!n&&_f(t),i=!n&&!r&&xf(t),o=!n&&!r&&!i&&Pf(t),a=n||r||i||o,s=a?I(t.length,fc):[],u=s.length;for(var l in t)!e&&!_c.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||jo(l,u))||s.push(l);return s}function Tn(t){var e=t.length;return e?t[ri(0,e-1)]:it}function On(t,e){return ea(Vi(t),Un(e,0,t.length))}function An(t){return ea(Vi(t))}function Rn(t,e,n,r){return t===it||Ys(t,vc[n])&&!_c.call(r,n)?e:t}function Ln(t,e,n){(n===it||Ys(t[e],n))&&(n!==it||e in t)||Bn(t,e,n)}function In(t,e,n){var r=t[e];_c.call(t,e)&&Ys(r,n)&&(n!==it||e in t)||Bn(t,e,n)}function kn(t,e){for(var n=t.length;n--;)if(Ys(t[n][0],e))return n;return-1}function Dn(t,e,n,r){return gh(t,function(t,i,o){e(r,t,n(t),o)}),r}function jn(t,e){return t&&zi(e,Gu(e),t)}function Nn(t,e){return t&&zi(e,Hu(e),t)}function Bn(t,e,n){"__proto__"==e&&Nc?Nc(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Fn(t,e){for(var n=-1,r=e.length,i=oc(r),o=null==t;++n<r;)i[n]=o?it:Uu(t,e[n]);return i}function Un(t,e,n){return t===t&&(n!==it&&(t=t<=n?t:n),e!==it&&(t=t>=e?t:e)),t}function Vn(t,e,n,r,i,o){var a,s=e&ft,u=e&pt,c=e&dt;if(n&&(a=i?n(t,r,i,o):n(t)),a!==it)return a;if(!su(t))return t;var h=bf(t);if(h){if(a=Ro(t),!s)return Vi(t,a)}else{var f=Oh(t),p=f==Kt||f==Zt;if(xf(t))return Oi(t,s);if(f==te||f==zt||p&&!i){if(a=u||p?{}:Lo(t),!s)return u?Hi(t,Nn(a,t)):Gi(t,jn(a,t))}else{if(!Qn[f])return i?t:{};a=Io(t,f,Vn,s)}}o||(o=new wn);var d=o.get(t);if(d)return d;o.set(t,a);var m=c?u?bo:_o:u?Hu:Gu,v=h?it:m(t);return l(v||t,function(r,i){v&&(i=r,r=t[i]),In(a,i,Vn(r,e,n,i,t,o))}),a}function zn(t){var e=Gu(t);return function(n){return Wn(n,t,e)}}function Wn(t,e,n){var r=n.length;if(null==t)return!r;for(t=cc(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===it&&!(i in t)||!o(a))return!1}return!0}function Xn(t,e,n){if("function"!=typeof t)throw new pc(ut);return Lh(function(){t.apply(it,n)},e)}function qn(t,e,n,r){var i=-1,o=p,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=m(e,D(n))),r?(o=d,a=!1):e.length>=at&&(o=N,a=!1,e=new yn(e));t:for(;++i<s;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h===h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else o(e,h,r)||u.push(c)}return u}function Yn(t,e){var n=!0;return gh(t,function(t,r,i){return n=!!e(t,r,i)}),n}function $n(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===it?a===a&&!_u(a):n(a,s)))var s=a,u=o}return u}function tr(t,e,n,r){var i=t.length;for(n=Su(n),n<0&&(n=-n>i?0:i+n),r=r===it||r>i?i:Su(r),r<0&&(r+=i),r=n>r?0:Mu(r);n<r;)t[n++]=e;return t}function er(t,e){var n=[];return gh(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function nr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Do),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?nr(s,e-1,n,r,i):v(i,s):r||(i[i.length]=s)}return i}function or(t,e){return t&&_h(t,e,Gu)}function ar(t,e){return t&&bh(t,e,Gu)}function ur(t,e){return f(e,function(e){return iu(t[e])})}function lr(t,e){e=Pi(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[na(e[n++])];return n&&n==r?t:it}function hr(t,e,n){var r=e(t);return bf(t)?r:v(r,n(t))}function fr(t){return null==t?t===it?se:$t:(t=cc(t),jc&&jc in t?Po(t):Ko(t))}function _r(t,e){return t>e}function Er(t,e){return null!=t&&_c.call(t,e)}function Sr(t,e){return null!=t&&e in cc(t)}function Mr(t,e,n){return t>=Kc(e,n)&&t<Yc(e,n)}function Pr(t,e,n){for(var r=n?d:p,i=t[0].length,o=t.length,a=o,s=oc(o),u=1/0,l=[];a--;){var c=t[a];a&&e&&(c=m(c,D(e))),u=Kc(c.length,u),s[a]=!n&&(e||i>=120&&c.length>=120)?new yn(a&&c):it}c=t[0];var h=-1,f=s[0];t:for(;++h<i&&l.length<u;){var v=c[h],g=e?e(v):v;if(v=n||0!==v?v:0,!(f?N(f,g):r(l,g,n))){for(a=o;--a;){var y=s[a];if(!(y?N(y,g):r(t[a],g,n)))continue t}f&&f.push(g),l.push(v)}}return l}function Tr(t,e,n,r){return or(t,function(t,i,o){e(r,n(t),i,o)}),r}function Or(t,e,n){e=Pi(e,t),t=Jo(t,e);var r=null==t?t:t[na(Ca(e))];return null==r?it:s(r,t,n)}function Ar(t){return uu(t)&&fr(t)==zt}function Rr(t){return uu(t)&&fr(t)==ce}function Lr(t){return uu(t)&&fr(t)==Xt}function Ir(t,e,n,r,i){return t===e||(null==t||null==e||!su(t)&&!uu(e)?t!==t&&e!==e:kr(t,e,n,r,Ir,i))}function kr(t,e,n,r,i,o){var a=bf(t),s=bf(e),u=Gt,l=Gt;a||(u=Oh(t),u=u==zt?te:u),s||(l=Oh(e),l=l==zt?te:l);var c=u==te,h=l==te,f=u==l;if(f&&xf(t)){if(!xf(e))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new wn),a||Pf(t)?mo(t,e,n,r,i,o):vo(t,e,u,n,r,i,o);if(!(n&mt)){var p=c&&_c.call(t,"__wrapped__"),d=h&&_c.call(e,"__wrapped__");if(p||d){var m=p?t.value():t,v=d?e.value():e;return o||(o=new wn),i(m,v,n,r,o)}}return!!f&&(o||(o=new wn),go(t,e,n,r,i,o))}function Dr(t){return uu(t)&&Oh(t)==Jt}function jr(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=cc(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var u=s[0],l=t[u],c=s[1];if(a&&s[2]){if(l===it&&!(u in t))return!1}else{var h=new wn;if(r)var f=r(l,c,u,t,e,h);if(!(f===it?Ir(c,l,mt|vt,r,h):f))return!1}}return!0}function Nr(t){if(!su(t)||Vo(t))return!1;var e=iu(t)?Sc:Ke;return e.test(ra(t))}function Br(t){return uu(t)&&fr(t)==re}function Fr(t){return uu(t)&&Oh(t)==ie}function Ur(t){return uu(t)&&au(t.length)&&!!Jn[fr(t)]}function Vr(t){return"function"==typeof t?t:null==t?Il:"object"==typeof t?bf(t)?qr(t[0],t[1]):Xr(t):Vl(t)}function zr(t){if(!zo(t))return qc(t);var e=[];for(var n in cc(t))_c.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Gr(t){if(!su(t))return Yo(t);var e=zo(t),n=[];for(var r in t)("constructor"!=r||!e&&_c.call(t,r))&&n.push(r);return n}function Hr(t,e){return t<e}function Wr(t,e){var n=-1,r=Ks(t)?oc(t.length):[];return gh(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Xr(t){var e=So(t);return 1==e.length&&e[0][2]?Ho(e[0][0],e[0][1]):function(n){return n===t||jr(n,t,e)}}function qr(t,e){return Bo(t)&&Go(e)?Ho(na(t),e):function(n){var r=Uu(n,t);return r===it&&r===e?zu(n,t):Ir(e,r,mt|vt)}}function Yr(t,e,n,r,i){t!==e&&_h(e,function(o,a){if(su(o))i||(i=new wn),Kr(t,e,a,n,Yr,r,i);else{var s=r?r(t[a],o,a+"",t,e,i):it;s===it&&(s=o),Ln(t,a,s)}},Hu)}function Kr(t,e,n,r,i,o,a){var s=t[n],u=e[n],l=a.get(u);if(l)return void Ln(t,n,l);var c=o?o(s,u,n+"",t,e,a):it,h=c===it;if(h){var f=bf(u),p=!f&&xf(u),d=!f&&!p&&Pf(u);c=u,f||p||d?bf(s)?c=s:Zs(s)?c=Vi(s):p?(h=!1,c=Oi(u,!0)):d?(h=!1,c=ji(u,!0)):c=[]:vu(u)||_f(u)?(c=s,_f(s)?c=Tu(s):(!su(s)||r&&iu(s))&&(c=Lo(u))):h=!1}h&&(a.set(u,c),i(c,u,r,o,a),a.delete(u)),Ln(t,n,c)}function Zr(t,e){var n=t.length;if(n)return e+=e<0?n:0,jo(e,n)?t[e]:it}function Jr(t,e,n){var r=-1;e=m(e.length?e:[Il],D(Eo()));var i=Wr(t,function(t,n,i){var o=m(e,function(e){return e(t)});return{criteria:o,index:++r,value:t}});return R(i,function(t,e){return Bi(t,e,n)})}function Qr(t,e){return t=cc(t),$r(t,e,function(e,n){return zu(t,n)})}function $r(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=lr(t,a);n(s,a)&&li(o,Pi(a,t),s)}return o}function ti(t){return function(e){return lr(e,t)}}function ei(t,e,n,r){var i=r?S:C,o=-1,a=e.length,s=t;for(t===e&&(e=Vi(e)),n&&(s=m(t,D(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&Ic.call(s,u,1),Ic.call(t,u,1);return t}function ni(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;jo(i)?Ic.call(t,i,1):_i(t,i)}}return t}function ri(t,e){return t+zc(Qc()*(e-t+1))}function ii(t,e,n,r){for(var i=-1,o=Yc(Vc((e-t)/(n||1)),0),a=oc(o);o--;)a[r?o:++i]=t,t+=n;return a}function oi(t,e){var n="";if(!t||e<1||e>Dt)return n;do e%2&&(n+=t),e=zc(e/2),e&&(t+=t);while(e);return n}function ai(t,e){return Ih(Zo(t,e,Il),t+"")}function si(t){return Tn(nl(t))}function ui(t,e){var n=nl(t);return ea(n,Un(e,0,n.length))}function li(t,e,n,r){if(!su(t))return t;e=Pi(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=na(e[i]),l=n;if(i!=a){var c=s[u];l=r?r(c,u,s):it,l===it&&(l=su(c)?c:jo(e[i+1])?[]:{})}In(s,u,l),s=s[u]}return t}function ci(t){return ea(nl(t))}function hi(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=oc(i);++r<i;)o[r]=t[r+e];return o}function fi(t,e){var n;return gh(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function pi(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=Ut){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!_u(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return di(t,e,Il,n)}function di(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!==e,s=null===e,u=_u(e),l=e===it;i<o;){var c=zc((i+o)/2),h=n(t[c]),f=h!==it,p=null===h,d=h===h,m=_u(h);if(a)var v=r||d;else v=l?d&&(r||f):s?d&&f&&(r||!p):u?d&&f&&!p&&(r||!m):!p&&!m&&(r?h<=e:h<e);v?i=c+1:o=c}return Kc(o,Ft)}function mi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ys(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function vi(t){return"number"==typeof t?t:_u(t)?Nt:+t}function gi(t){if("string"==typeof t)return t;if(bf(t))return m(t,gi)+"";if(_u(t))return mh?mh.call(t):"";var e=t+"";return"0"==e&&1/t==-kt?"-0":e}function yi(t,e,n){var r=-1,i=p,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=d;else if(o>=at){var l=e?null:Sh(t);if(l)return K(l);a=!1,i=N,u=new yn}else u=e?[]:s;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(c)}else i(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s}function _i(t,e){return e=Pi(e,t),t=Jo(t,e),null==t||delete t[na(Ca(e))]}function bi(t,e,n,r){return li(t,e,n(lr(t,e)),r)}function wi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?hi(t,r?0:o,r?o+1:i):hi(t,r?o+1:0,r?i:o)}function xi(t,e){var n=t;return n instanceof b&&(n=n.value()),g(e,function(t,e){return e.func.apply(e.thisArg,v([t],e.args))},n)}function Ei(t,e,n){var r=t.length;if(r<2)return r?yi(t[0]):[];for(var i=-1,o=oc(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=qn(o[i]||a,t[s],e,n));return yi(nr(o,1),e,n)}function Ci(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:it;n(a,t[r],s)}return a}function Si(t){return Zs(t)?t:[]}function Mi(t){return"function"==typeof t?t:Il}function Pi(t,e){return bf(t)?t:Bo(t,e)?[t]:kh(Au(t))}function Ti(t,e,n){var r=t.length;return n=n===it?r:n,!e&&n>=r?t:hi(t,e,n)}function Oi(t,e){if(e)return t.slice();var n=t.length,r=Oc?Oc(n):new t.constructor(n);return t.copy(r),r}function Ai(t){var e=new t.constructor(t.byteLength);return new Tc(e).set(new Tc(t)),e}function Ri(t,e){var n=e?Ai(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Li(t,e,n){var r=e?n(X(t),ft):X(t);return g(r,o,new t.constructor)}function Ii(t){var e=new t.constructor(t.source,Xe.exec(t));return e.lastIndex=t.lastIndex,e}function ki(t,e,n){var r=e?n(K(t),ft):K(t);return g(r,a,new t.constructor)}function Di(t){return dh?cc(dh.call(t)):{}}function ji(t,e){var n=e?Ai(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ni(t,e){if(t!==e){var n=t!==it,r=null===t,i=t===t,o=_u(t),a=e!==it,s=null===e,u=e===e,l=_u(e);if(!s&&!l&&!o&&t>e||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function Bi(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Ni(i[r],o[r]);if(u){if(r>=s)return u;var l=n[r];return u*("desc"==l?-1:1)}}return t.index-e.index}function Fi(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,l=Yc(o-a,0),c=oc(u+l),h=!r;++s<u;)c[s]=e[s];for(;++i<a;)(h||i<o)&&(c[n[i]]=t[i]);for(;l--;)c[s++]=t[i++];return c}function Ui(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,l=e.length,c=Yc(o-s,0),h=oc(c+l),f=!r;++i<c;)h[i]=t[i];for(var p=i;++u<l;)h[p+u]=e[u];for(;++a<s;)(f||i<o)&&(h[p+n[a]]=t[i++]);return h}function Vi(t,e){var n=-1,r=t.length;for(e||(e=oc(r));++n<r;)e[n]=t[n];return e}function zi(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):it;u===it&&(u=t[s]),i?Bn(n,s,u):In(n,s,u)}return n}function Gi(t,e){return zi(t,Ph(t),e)}function Hi(t,e){return zi(t,Th(t),e)}function Wi(t,e){return function(n,r){var i=bf(n)?u:Dn,o=e?e():{};return i(n,t,Eo(r,2),o)}}function Xi(t){return ai(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:it,a=i>2?n[2]:it;for(o=t.length>3&&"function"==typeof o?(i--,o):it,a&&No(n[0],n[1],a)&&(o=i<3?it:o,i=1),e=cc(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function qi(t,e){return function(n,r){if(null==n)return n;if(!Ks(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=cc(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function Yi(t){return function(e,n,r){for(var i=-1,o=cc(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(n(o[u],u,o)===!1)break}return e}}function Ki(t,e,n){function r(){var e=this&&this!==sr&&this instanceof r?o:t;return e.apply(i?n:this,arguments)}var i=e&gt,o=Qi(t);return r}function Zi(t){return function(e){e=Au(e);var n=G(e)?tt(e):it,r=n?n[0]:e.charAt(0),i=n?Ti(n,1).join(""):e.slice(1);return r[t]()+i}}function Ji(t){return function(e){return g(Tl(ul(e).replace(Gn,"")),t,"")}}function Qi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=vh(t.prototype),r=t.apply(n,e);return su(r)?r:n}}function $i(t,e,n){function r(){for(var o=arguments.length,a=oc(o),u=o,l=xo(r);u--;)a[u]=arguments[u];var c=o<3&&a[0]!==l&&a[o-1]!==l?[]:Y(a,l);if(o-=c.length,o<n)return co(t,e,no,r.placeholder,it,a,c,it,it,n-o);var h=this&&this!==sr&&this instanceof r?i:t;return s(h,this,a)}var i=Qi(t);return r}function to(t){return function(e,n,r){var i=cc(e);if(!Ks(e)){var o=Eo(n,3);e=Gu(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:it}}function eo(t){return yo(function(e){var n=e.length,r=n,o=i.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new pc(ut);if(o&&!s&&"wrapper"==wo(a))var s=new i([],(!0))}for(r=s?r:n;++r<n;){a=e[r];var u=wo(a),l="wrapper"==u?Mh(a):it;s=l&&Uo(l[0])&&l[1]==(Ct|bt|xt|St)&&!l[4].length&&1==l[9]?s[wo(l[0])].apply(s,l[3]):1==a.length&&Uo(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&bf(r)&&r.length>=at)return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function no(t,e,n,r,i,o,a,s,u,l){function c(){for(var g=arguments.length,y=oc(g),_=g;_--;)y[_]=arguments[_];if(d)var b=xo(c),w=U(y,b);if(r&&(y=Fi(y,r,i,d)),o&&(y=Ui(y,o,a,d)),g-=w,d&&g<l){var x=Y(y,b);return co(t,e,no,c.placeholder,n,y,x,s,u,l-g)}var E=f?n:this,C=p?E[t]:t;return g=y.length,s?y=Qo(y,s):m&&g>1&&y.reverse(),h&&u<g&&(y.length=u),this&&this!==sr&&this instanceof c&&(C=v||Qi(C)),C.apply(E,y)}var h=e&Ct,f=e&gt,p=e&yt,d=e&(bt|wt),m=e&Mt,v=p?it:Qi(t);return c}function ro(t,e){return function(n,r){return Tr(n,t,e(r),{})}}function io(t,e){return function(n,r){var i;if(n===it&&r===it)return e;if(n!==it&&(i=n),r!==it){if(i===it)return r;"string"==typeof n||"string"==typeof r?(n=gi(n),r=gi(r)):(n=vi(n),r=vi(r)),i=t(n,r)}return i}}function oo(t){return yo(function(e){return e=m(e,D(Eo())),ai(function(n){var r=this;return t(e,function(t){return s(t,r,n)})})})}function ao(t,e){e=e===it?" ":gi(e);var n=e.length;if(n<2)return n?oi(e,t):e;var r=oi(e,Vc(t/$(e)));return G(e)?Ti(tt(r),0,t).join(""):r.slice(0,t)}function so(t,e,n,r){function i(){for(var e=-1,u=arguments.length,l=-1,c=r.length,h=oc(c+u),f=this&&this!==sr&&this instanceof i?a:t;++l<c;)h[l]=r[l];for(;u--;)h[l++]=arguments[++e];return s(f,o?n:this,h)}var o=e&gt,a=Qi(t);return i}function uo(t){return function(e,n,r){return r&&"number"!=typeof r&&No(e,n,r)&&(n=r=it),e=Cu(e),n===it?(n=e,e=0):n=Cu(n),r=r===it?e<n?1:-1:Cu(r),ii(e,n,r,t)}}function lo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Pu(e),n=Pu(n)),t(e,n)}}function co(t,e,n,r,i,o,a,s,u,l){var c=e&bt,h=c?a:it,f=c?it:a,p=c?o:it,d=c?it:o;e|=c?xt:Et,e&=~(c?Et:xt),e&_t||(e&=~(gt|yt));var m=[t,e,i,p,h,d,f,s,u,l],v=n.apply(it,m);return Uo(t)&&Rh(v,m),v.placeholder=r,$o(v,t,e)}function ho(t){var e=lc[t];return function(t,n){if(t=Pu(t),n=Kc(Su(n),292)){var r=(Au(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return r=(Au(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function fo(t){return function(e){var n=Oh(e);return n==Jt?X(e):n==ie?Z(e):k(e,t(e))}}function po(t,e,n,r,i,o,a,s){var u=e&yt;if(!u&&"function"!=typeof t)throw new pc(ut);var l=r?r.length:0;if(l||(e&=~(xt|Et),r=i=it),a=a===it?a:Yc(Su(a),0),s=s===it?s:Su(s),l-=i?i.length:0,e&Et){var c=r,h=i;r=i=it}var f=u?it:Mh(t),p=[t,e,n,r,i,c,h,o,a,s];if(f&&Xo(p,f),t=p[0],e=p[1],n=p[2],r=p[3],i=p[4],s=p[9]=null==p[9]?u?0:t.length:Yc(p[9]-l,0),!s&&e&(bt|wt)&&(e&=~(bt|wt)),e&&e!=gt)d=e==bt||e==wt?$i(t,e,s):e!=xt&&e!=(gt|xt)||i.length?no.apply(it,p):so(t,e,n,r);else var d=Ki(t,e,n);var m=f?wh:Rh;return $o(m(d,p),t,e)}function mo(t,e,n,r,i,o){var a=n&mt,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var c=-1,h=!0,f=n&vt?new yn:it;for(o.set(t,e),o.set(e,t);++c<s;){var p=t[c],d=e[c];if(r)var m=a?r(d,p,c,e,t,o):r(p,d,c,t,e,o);if(m!==it){if(m)continue;h=!1;break}if(f){if(!_(e,function(t,e){if(!N(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)})){h=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function vo(t,e,n,r,i,o,a){switch(n){case he:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ce:return!(t.byteLength!=e.byteLength||!o(new Tc(t),new Tc(e)));case Wt:case Xt:case Qt:return Ys(+t,+e);case Yt:return t.name==e.name&&t.message==e.message;case re:case oe:return t==e+"";case Jt:var s=X;case ie:var u=r&mt;if(s||(s=K),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=vt,a.set(t,e);var c=mo(s(t),s(e),r,i,o,a);return a.delete(t),c;case ae:if(dh)return dh.call(t)==dh.call(e)}return!1}function go(t,e,n,r,i,o){var a=n&mt,s=Gu(t),u=s.length,l=Gu(e),c=l.length;if(u!=c&&!a)return!1;for(var h=u;h--;){var f=s[h];if(!(a?f in e:_c.call(e,f)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var d=!0;o.set(t,e),o.set(e,t);for(var m=a;++h<u;){f=s[h];var v=t[f],g=e[f];if(r)var y=a?r(g,v,f,e,t,o):r(v,g,f,t,e,o);if(!(y===it?v===g||i(v,g,n,r,o):y)){d=!1;break}m||(m="constructor"==f)}if(d&&!m){var _=t.constructor,b=e.constructor;_!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(d=!1)}return o.delete(t),o.delete(e),d}function yo(t){return Ih(Zo(t,it,va),t+"")}function _o(t){return hr(t,Gu,Ph)}function bo(t){return hr(t,Hu,Th)}function wo(t){for(var e=t.name+"",n=sh[e],r=_c.call(sh,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function xo(t){var e=_c.call(n,"placeholder")?n:t;return e.placeholder}function Eo(){var t=n.iteratee||kl;return t=t===kl?Vr:t,arguments.length?t(arguments[0],arguments[1]):t}function Co(t,e){var n=t.__data__;return Fo(e)?n["string"==typeof e?"string":"hash"]:n.map}function So(t){for(var e=Gu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Go(i)]}return e}function Mo(t,e){var n=z(t,e);return Nr(n)?n:it}function Po(t){var e=_c.call(t,jc),n=t[jc];try{t[jc]=it;var r=!0}catch(i){}var o=xc.call(t);return r&&(e?t[jc]=n:delete t[jc]),o}function To(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Kc(e,t+a);break;case"takeRight":t=Yc(t,e-a)}}return{start:t,end:e}}function Oo(t){var e=t.match(Ve);return e?e[1].split(ze):[]}function Ao(t,e,n){e=Pi(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=na(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=null==t?0:t.length,!!i&&au(i)&&jo(a,i)&&(bf(t)||_f(t)))}function Ro(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&_c.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Lo(t){return"function"!=typeof t.constructor||zo(t)?{}:vh(Ac(t))}function Io(t,e,n,r){var i=t.constructor;switch(e){case ce:return Ai(t);case Wt:case Xt:return new i((+t));case he:return Ri(t,r);case fe:case pe:case de:case me:case ve:case ge:case ye:case _e:case be:return ji(t,r);case Jt:return Li(t,r,n);case Qt:case oe:return new i(t);case re:return Ii(t);case ie:return ki(t,r,n);case ae:return Di(t)}}function ko(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Ue,"{\n/* [wrapped with "+e+"] */\n")}function Do(t){return bf(t)||_f(t)||!!(kc&&t&&t[kc])}function jo(t,e){return e=null==e?Dt:e,!!e&&("number"==typeof t||Je.test(t))&&t>-1&&t%1==0&&t<e}function No(t,e,n){if(!su(n))return!1;var r=typeof e;return!!("number"==r?Ks(n)&&jo(e,n.length):"string"==r&&e in n)&&Ys(n[e],t)}function Bo(t,e){if(bf(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!_u(t))||(Le.test(t)||!Re.test(t)||null!=e&&t in cc(e))}function Fo(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Uo(t){var e=wo(t),r=n[e];if("function"!=typeof r||!(e in b.prototype))return!1;if(t===r)return!0;var i=Mh(r);return!!i&&t===i[0]}function Vo(t){return!!wc&&wc in t}function zo(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||vc;return t===n}function Go(t){return t===t&&!su(t)}function Ho(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==it||t in cc(n)))}}function Wo(t){var e=ks(t,function(t){return n.size===ct&&n.clear(),t}),n=e.cache;return e}function Xo(t,e){var n=t[1],r=e[1],i=n|r,o=i<(gt|yt|Ct),a=r==Ct&&n==bt||r==Ct&&n==St&&t[7].length<=e[8]||r==(Ct|St)&&e[7].length<=e[8]&&n==bt;if(!o&&!a)return t;r&gt&&(t[2]=e[2],i|=n&gt?0:_t);var s=e[3];if(s){var u=t[3];t[3]=u?Fi(u,s,e[4]):s,t[4]=u?Y(t[3],ht):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?Ui(u,s,e[6]):s,t[6]=u?Y(t[5],ht):e[6]),s=e[7],s&&(t[7]=s),r&Ct&&(t[8]=null==t[8]?e[8]:Kc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function qo(t,e,n,r,i,o){return su(t)&&su(e)&&(o.set(e,t),Yr(t,e,it,qo,o),o.delete(e)),t}function Yo(t){var e=[];if(null!=t)for(var n in cc(t))e.push(n);return e}function Ko(t){return xc.call(t)}function Zo(t,e,n){return e=Yc(e===it?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Yc(r.length-e,0),a=oc(o);++i<o;)a[i]=r[e+i];i=-1;for(var u=oc(e+1);++i<e;)u[i]=r[i];return u[e]=n(a),s(t,this,u)}}function Jo(t,e){return e.length<2?t:lr(t,hi(e,0,-1))}function Qo(t,e){for(var n=t.length,r=Kc(e.length,n),i=Vi(t);r--;){var o=e[r];t[r]=jo(o,n)?i[o]:it}return t}function $o(t,e,n){var r=e+"";return Ih(t,ko(r,ia(Oo(r),n)))}function ta(t){var e=0,n=0;return function(){var r=Zc(),i=At-(r-n);if(n=r,i>0){if(++e>=Ot)return arguments[0]}else e=0;return t.apply(it,arguments)}}function ea(t,e){var n=-1,r=t.length,i=r-1;for(e=e===it?r:e;++n<e;){var o=ri(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function na(t){if("string"==typeof t||_u(t))return t;var e=t+"";return"0"==e&&1/t==-kt?"-0":e}function ra(t){if(null!=t){try{return yc.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function ia(t,e){return l(Vt,function(n){var r="_."+n[0];e&n[1]&&!p(t,r)&&t.push(r)}),t.sort()}function oa(t){if(t instanceof b)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=Vi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function aa(t,e,n){e=(n?No(t,e,n):e===it)?1:Yc(Su(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=oc(Vc(r/e));i<r;)a[o++]=hi(t,i,i+=e);return a}function sa(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function ua(){var t=arguments.length;if(!t)return[];for(var e=oc(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return v(bf(n)?Vi(n):[n],nr(e,1))}function la(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:Su(e),hi(t,e<0?0:e,r)):[]}function ca(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:Su(e),e=r-e,hi(t,0,e<0?0:e)):[]}function ha(t,e){return t&&t.length?wi(t,Eo(e,3),!0,!0):[]}function fa(t,e){return t&&t.length?wi(t,Eo(e,3),!0):[]}function pa(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&No(t,e,n)&&(n=0,r=i),tr(t,e,n,r)):[]}function da(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Su(n);return i<0&&(i=Yc(r+i,0)),E(t,Eo(e,3),i)}function ma(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==it&&(i=Su(n),i=n<0?Yc(r+i,0):Kc(i,r-1)),E(t,Eo(e,3),i,!0)}function va(t){var e=null==t?0:t.length;return e?nr(t,1):[]}function ga(t){var e=null==t?0:t.length;return e?nr(t,kt):[]}function ya(t,e){var n=null==t?0:t.length;return n?(e=e===it?1:Su(e),nr(t,e)):[]}function _a(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function ba(t){return t&&t.length?t[0]:it}function wa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Su(n);return i<0&&(i=Yc(r+i,0)),C(t,e,i)}function xa(t){var e=null==t?0:t.length;return e?hi(t,0,-1):[]}function Ea(t,e){return null==t?"":Xc.call(t,e)}function Ca(t){var e=null==t?0:t.length;return e?t[e-1]:it}function Sa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==it&&(i=Su(n),i=i<0?Yc(r+i,0):Kc(i,r-1)),e===e?Q(t,e,i):E(t,M,i,!0)}function Ma(t,e){return t&&t.length?Zr(t,Su(e)):it}function Pa(t,e){return t&&t.length&&e&&e.length?ei(t,e):t}function Ta(t,e,n){return t&&t.length&&e&&e.length?ei(t,e,Eo(n,2)):t}function Oa(t,e,n){return t&&t.length&&e&&e.length?ei(t,e,it,n):t}function Aa(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Eo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return ni(t,i),n}function Ra(t){return null==t?t:$c.call(t)}function La(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&No(t,e,n)?(e=0,n=r):(e=null==e?0:Su(e),n=n===it?r:Su(n)),hi(t,e,n)):[]}function Ia(t,e){return pi(t,e)}function ka(t,e,n){return di(t,e,Eo(n,2))}function Da(t,e){var n=null==t?0:t.length;if(n){var r=pi(t,e);if(r<n&&Ys(t[r],e))return r}return-1}function ja(t,e){return pi(t,e,!0)}function Na(t,e,n){return di(t,e,Eo(n,2),!0)}function Ba(t,e){var n=null==t?0:t.length;if(n){
var r=pi(t,e,!0)-1;if(Ys(t[r],e))return r}return-1}function Fa(t){return t&&t.length?mi(t):[]}function Ua(t,e){return t&&t.length?mi(t,Eo(e,2)):[]}function Va(t){var e=null==t?0:t.length;return e?hi(t,1,e):[]}function za(t,e,n){return t&&t.length?(e=n||e===it?1:Su(e),hi(t,0,e<0?0:e)):[]}function Ga(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:Su(e),e=r-e,hi(t,e<0?0:e,r)):[]}function Ha(t,e){return t&&t.length?wi(t,Eo(e,3),!1,!0):[]}function Wa(t,e){return t&&t.length?wi(t,Eo(e,3)):[]}function Xa(t){return t&&t.length?yi(t):[]}function qa(t,e){return t&&t.length?yi(t,Eo(e,2)):[]}function Ya(t,e){return e="function"==typeof e?e:it,t&&t.length?yi(t,it,e):[]}function Ka(t){if(!t||!t.length)return[];var e=0;return t=f(t,function(t){if(Zs(t))return e=Yc(t.length,e),!0}),I(e,function(e){return m(t,T(e))})}function Za(t,e){if(!t||!t.length)return[];var n=Ka(t);return null==e?n:m(n,function(t){return s(e,it,t)})}function Ja(t,e){return Ci(t||[],e||[],In)}function Qa(t,e){return Ci(t||[],e||[],li)}function $a(t){var e=n(t);return e.__chain__=!0,e}function ts(t,e){return e(t),t}function es(t,e){return e(t)}function ns(){return $a(this)}function rs(){return new i(this.value(),this.__chain__)}function is(){this.__values__===it&&(this.__values__=Eu(this.value()));var t=this.__index__>=this.__values__.length,e=t?it:this.__values__[this.__index__++];return{done:t,value:e}}function os(){return this}function as(t){for(var e,n=this;n instanceof r;){var i=oa(n);i.__index__=0,i.__values__=it,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function ss(){var t=this.__wrapped__;if(t instanceof b){var e=t;return this.__actions__.length&&(e=new b(this)),e=e.reverse(),e.__actions__.push({func:es,args:[Ra],thisArg:it}),new i(e,this.__chain__)}return this.thru(Ra)}function us(){return xi(this.__wrapped__,this.__actions__)}function ls(t,e,n){var r=bf(t)?h:Yn;return n&&No(t,e,n)&&(e=it),r(t,Eo(e,3))}function cs(t,e){var n=bf(t)?f:er;return n(t,Eo(e,3))}function hs(t,e){return nr(gs(t,e),1)}function fs(t,e){return nr(gs(t,e),kt)}function ps(t,e,n){return n=n===it?1:Su(n),nr(gs(t,e),n)}function ds(t,e){var n=bf(t)?l:gh;return n(t,Eo(e,3))}function ms(t,e){var n=bf(t)?c:yh;return n(t,Eo(e,3))}function vs(t,e,n,r){t=Ks(t)?t:nl(t),n=n&&!r?Su(n):0;var i=t.length;return n<0&&(n=Yc(i+n,0)),yu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&C(t,e,n)>-1}function gs(t,e){var n=bf(t)?m:Wr;return n(t,Eo(e,3))}function ys(t,e,n,r){return null==t?[]:(bf(e)||(e=null==e?[]:[e]),n=r?it:n,bf(n)||(n=null==n?[]:[n]),Jr(t,e,n))}function _s(t,e,n){var r=bf(t)?g:A,i=arguments.length<3;return r(t,Eo(e,4),n,i,gh)}function bs(t,e,n){var r=bf(t)?y:A,i=arguments.length<3;return r(t,Eo(e,4),n,i,yh)}function ws(t,e){var n=bf(t)?f:er;return n(t,Ds(Eo(e,3)))}function xs(t){var e=bf(t)?Tn:si;return e(t)}function Es(t,e,n){e=(n?No(t,e,n):e===it)?1:Su(e);var r=bf(t)?On:ui;return r(t,e)}function Cs(t){var e=bf(t)?An:ci;return e(t)}function Ss(t){if(null==t)return 0;if(Ks(t))return yu(t)?$(t):t.length;var e=Oh(t);return e==Jt||e==ie?t.size:zr(t).length}function Ms(t,e,n){var r=bf(t)?_:fi;return n&&No(t,e,n)&&(e=it),r(t,Eo(e,3))}function Ps(t,e){if("function"!=typeof e)throw new pc(ut);return t=Su(t),function(){if(--t<1)return e.apply(this,arguments)}}function Ts(t,e,n){return e=n?it:e,e=t&&null==e?t.length:e,po(t,Ct,it,it,it,it,e)}function Os(t,e){var n;if("function"!=typeof e)throw new pc(ut);return t=Su(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=it),n}}function As(t,e,n){e=n?it:e;var r=po(t,bt,it,it,it,it,it,e);return r.placeholder=As.placeholder,r}function Rs(t,e,n){e=n?it:e;var r=po(t,wt,it,it,it,it,it,e);return r.placeholder=Rs.placeholder,r}function Ls(t,e,n){function r(e){var n=f,r=p;return f=p=it,y=e,m=t.apply(r,n)}function i(t){return y=t,v=Lh(s,e),_?r(t):m}function o(t){var n=t-g,r=t-y,i=e-n;return b?Kc(i,d-r):i}function a(t){var n=t-g,r=t-y;return g===it||n>=e||n<0||b&&r>=d}function s(){var t=uf();return a(t)?u(t):void(v=Lh(s,o(t)))}function u(t){return v=it,w&&f?r(t):(f=p=it,m)}function l(){v!==it&&Ch(v),y=0,f=g=p=v=it}function c(){return v===it?m:u(uf())}function h(){var t=uf(),n=a(t);if(f=arguments,p=this,g=t,n){if(v===it)return i(g);if(b)return v=Lh(s,e),r(g)}return v===it&&(v=Lh(s,e)),m}var f,p,d,m,v,g,y=0,_=!1,b=!1,w=!0;if("function"!=typeof t)throw new pc(ut);return e=Pu(e)||0,su(n)&&(_=!!n.leading,b="maxWait"in n,d=b?Yc(Pu(n.maxWait)||0,e):d,w="trailing"in n?!!n.trailing:w),h.cancel=l,h.flush=c,h}function Is(t){return po(t,Mt)}function ks(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new pc(ut);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ks.Cache||fn),n}function Ds(t){if("function"!=typeof t)throw new pc(ut);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function js(t){return Os(2,t)}function Ns(t,e){if("function"!=typeof t)throw new pc(ut);return e=e===it?e:Su(e),ai(t,e)}function Bs(t,e){if("function"!=typeof t)throw new pc(ut);return e=e===it?0:Yc(Su(e),0),ai(function(n){var r=n[e],i=Ti(n,0,e);return r&&v(i,r),s(t,this,i)})}function Fs(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new pc(ut);return su(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ls(t,e,{leading:r,maxWait:e,trailing:i})}function Us(t){return Ts(t,1)}function Vs(t,e){return df(Mi(e),t)}function zs(){if(!arguments.length)return[];var t=arguments[0];return bf(t)?t:[t]}function Gs(t){return Vn(t,dt)}function Hs(t,e){return e="function"==typeof e?e:it,Vn(t,dt,e)}function Ws(t){return Vn(t,ft|dt)}function Xs(t,e){return e="function"==typeof e?e:it,Vn(t,ft|dt,e)}function qs(t,e){return null==e||Wn(t,e,Gu(e))}function Ys(t,e){return t===e||t!==t&&e!==e}function Ks(t){return null!=t&&au(t.length)&&!iu(t)}function Zs(t){return uu(t)&&Ks(t)}function Js(t){return t===!0||t===!1||uu(t)&&fr(t)==Wt}function Qs(t){return uu(t)&&1===t.nodeType&&!vu(t)}function $s(t){if(null==t)return!0;if(Ks(t)&&(bf(t)||"string"==typeof t||"function"==typeof t.splice||xf(t)||Pf(t)||_f(t)))return!t.length;var e=Oh(t);if(e==Jt||e==ie)return!t.size;if(zo(t))return!zr(t).length;for(var n in t)if(_c.call(t,n))return!1;return!0}function tu(t,e){return Ir(t,e)}function eu(t,e,n){n="function"==typeof n?n:it;var r=n?n(t,e):it;return r===it?Ir(t,e,it,n):!!r}function nu(t){if(!uu(t))return!1;var e=fr(t);return e==Yt||e==qt||"string"==typeof t.message&&"string"==typeof t.name&&!vu(t)}function ru(t){return"number"==typeof t&&Wc(t)}function iu(t){if(!su(t))return!1;var e=fr(t);return e==Kt||e==Zt||e==Ht||e==ne}function ou(t){return"number"==typeof t&&t==Su(t)}function au(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Dt}function su(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function uu(t){return null!=t&&"object"==typeof t}function lu(t,e){return t===e||jr(t,e,So(e))}function cu(t,e,n){return n="function"==typeof n?n:it,jr(t,e,So(e),n)}function hu(t){return mu(t)&&t!=+t}function fu(t){if(Ah(t))throw new sc(st);return Nr(t)}function pu(t){return null===t}function du(t){return null==t}function mu(t){return"number"==typeof t||uu(t)&&fr(t)==Qt}function vu(t){if(!uu(t)||fr(t)!=te)return!1;var e=Ac(t);if(null===e)return!0;var n=_c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&yc.call(n)==Ec}function gu(t){return ou(t)&&t>=-Dt&&t<=Dt}function yu(t){return"string"==typeof t||!bf(t)&&uu(t)&&fr(t)==oe}function _u(t){return"symbol"==typeof t||uu(t)&&fr(t)==ae}function bu(t){return t===it}function wu(t){return uu(t)&&Oh(t)==ue}function xu(t){return uu(t)&&fr(t)==le}function Eu(t){if(!t)return[];if(Ks(t))return yu(t)?tt(t):Vi(t);if(Dc&&t[Dc])return W(t[Dc]());var e=Oh(t),n=e==Jt?X:e==ie?K:nl;return n(t)}function Cu(t){if(!t)return 0===t?t:0;if(t=Pu(t),t===kt||t===-kt){var e=t<0?-1:1;return e*jt}return t===t?t:0}function Su(t){var e=Cu(t),n=e%1;return e===e?n?e-n:e:0}function Mu(t){return t?Un(Su(t),0,Bt):0}function Pu(t){if("number"==typeof t)return t;if(_u(t))return Nt;if(su(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=su(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ne,"");var n=Ye.test(t);return n||Ze.test(t)?ir(t.slice(2),n?2:8):qe.test(t)?Nt:+t}function Tu(t){return zi(t,Hu(t))}function Ou(t){return Un(Su(t),-Dt,Dt)}function Au(t){return null==t?"":gi(t)}function Ru(t,e){var n=vh(t);return null==e?n:jn(n,e)}function Lu(t,e){return x(t,Eo(e,3),or)}function Iu(t,e){return x(t,Eo(e,3),ar)}function ku(t,e){return null==t?t:_h(t,Eo(e,3),Hu)}function Du(t,e){return null==t?t:bh(t,Eo(e,3),Hu)}function ju(t,e){return t&&or(t,Eo(e,3))}function Nu(t,e){return t&&ar(t,Eo(e,3))}function Bu(t){return null==t?[]:ur(t,Gu(t))}function Fu(t){return null==t?[]:ur(t,Hu(t))}function Uu(t,e,n){var r=null==t?it:lr(t,e);return r===it?n:r}function Vu(t,e){return null!=t&&Ao(t,e,Er)}function zu(t,e){return null!=t&&Ao(t,e,Sr)}function Gu(t){return Ks(t)?Pn(t):zr(t)}function Hu(t){return Ks(t)?Pn(t,!0):Gr(t)}function Wu(t,e){var n={};return e=Eo(e,3),or(t,function(t,r,i){Bn(n,e(t,r,i),t)}),n}function Xu(t,e){var n={};return e=Eo(e,3),or(t,function(t,r,i){Bn(n,r,e(t,r,i))}),n}function qu(t,e){return Yu(t,Ds(Eo(e)))}function Yu(t,e){if(null==t)return{};var n=m(bo(t),function(t){return[t]});return e=Eo(e),$r(t,n,function(t,n){return e(t,n[0])})}function Ku(t,e,n){e=Pi(e,t);var r=-1,i=e.length;for(i||(i=1,t=it);++r<i;){var o=null==t?it:t[na(e[r])];o===it&&(r=i,o=n),t=iu(o)?o.call(t):o}return t}function Zu(t,e,n){return null==t?t:li(t,e,n)}function Ju(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:li(t,e,n,r)}function Qu(t,e,n){var r=bf(t),i=r||xf(t)||Pf(t);if(e=Eo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:su(t)&&iu(o)?vh(Ac(t)):{}}return(i?l:or)(t,function(t,r,i){return e(n,t,r,i)}),n}function $u(t,e){return null==t||_i(t,e)}function tl(t,e,n){return null==t?t:bi(t,e,Mi(n))}function el(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:bi(t,e,Mi(n),r)}function nl(t){return null==t?[]:j(t,Gu(t))}function rl(t){return null==t?[]:j(t,Hu(t))}function il(t,e,n){return n===it&&(n=e,e=it),n!==it&&(n=Pu(n),n=n===n?n:0),e!==it&&(e=Pu(e),e=e===e?e:0),Un(Pu(t),e,n)}function ol(t,e,n){return e=Cu(e),n===it?(n=e,e=0):n=Cu(n),t=Pu(t),Mr(t,e,n)}function al(t,e,n){if(n&&"boolean"!=typeof n&&No(t,e,n)&&(e=n=it),n===it&&("boolean"==typeof e?(n=e,e=it):"boolean"==typeof t&&(n=t,t=it)),t===it&&e===it?(t=0,e=1):(t=Cu(t),e===it?(e=t,t=0):e=Cu(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Qc();return Kc(t+i*(e-t+rr("1e-"+((i+"").length-1))),e)}return ri(t,e)}function sl(t){return $f(Au(t).toLowerCase())}function ul(t){return t=Au(t),t&&t.replace(Qe,br).replace(Hn,"")}function ll(t,e,n){t=Au(t),e=gi(e);var r=t.length;n=n===it?r:Un(Su(n),0,r);var i=n;return n-=e.length,n>=0&&t.slice(n,i)==e}function cl(t){return t=Au(t),t&&Pe.test(t)?t.replace(Se,wr):t}function hl(t){return t=Au(t),t&&je.test(t)?t.replace(De,"\\$&"):t}function fl(t,e,n){t=Au(t),e=Su(e);var r=e?$(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return ao(zc(i),n)+t+ao(Vc(i),n)}function pl(t,e,n){t=Au(t),e=Su(e);var r=e?$(t):0;return e&&r<e?t+ao(e-r,n):t}function dl(t,e,n){t=Au(t),e=Su(e);var r=e?$(t):0;return e&&r<e?ao(e-r,n)+t:t}function ml(t,e,n){return n||null==e?e=0:e&&(e=+e),Jc(Au(t).replace(Be,""),e||0)}function vl(t,e,n){return e=(n?No(t,e,n):e===it)?1:Su(e),oi(Au(t),e)}function gl(){var t=arguments,e=Au(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function yl(t,e,n){return n&&"number"!=typeof n&&No(t,e,n)&&(e=n=it),(n=n===it?Bt:n>>>0)?(t=Au(t),t&&("string"==typeof e||null!=e&&!Sf(e))&&(e=gi(e),!e&&G(t))?Ti(tt(t),0,n):t.split(e,n)):[]}function _l(t,e,n){return t=Au(t),n=Un(Su(n),0,t.length),e=gi(e),t.slice(n,n+e.length)==e}function bl(t,e,r){var i=n.templateSettings;r&&No(t,e,r)&&(e=it),t=Au(t),e=Lf({},e,i,Rn);var o,a,s=Lf({},e.imports,i.imports,Rn),u=Gu(s),l=j(s,u),c=0,h=e.interpolate||$e,f="__p += '",p=hc((e.escape||$e).source+"|"+h.source+"|"+(h===Ae?We:$e).source+"|"+(e.evaluate||$e).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Zn+"]")+"\n";t.replace(p,function(e,n,r,i,s,u){return r||(r=i),f+=t.slice(c,u).replace(tn,V),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),f+="';\n";var m=e.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(we,""):f).replace(xe,"$1").replace(Ee,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=tp(function(){return uc(u,d+"return "+f).apply(it,l)});if(v.source=f,nu(v))throw v;return v}function wl(t){return Au(t).toLowerCase()}function xl(t){return Au(t).toUpperCase()}function El(t,e,n){if(t=Au(t),t&&(n||e===it))return t.replace(Ne,"");if(!t||!(e=gi(e)))return t;var r=tt(t),i=tt(e),o=B(r,i),a=F(r,i)+1;return Ti(r,o,a).join("")}function Cl(t,e,n){if(t=Au(t),t&&(n||e===it))return t.replace(Fe,"");if(!t||!(e=gi(e)))return t;var r=tt(t),i=F(r,tt(e))+1;return Ti(r,0,i).join("")}function Sl(t,e,n){if(t=Au(t),t&&(n||e===it))return t.replace(Be,"");if(!t||!(e=gi(e)))return t;var r=tt(t),i=B(r,tt(e));return Ti(r,i).join("")}function Ml(t,e){var n=Pt,r=Tt;if(su(e)){var i="separator"in e?e.separator:i;n="length"in e?Su(e.length):n,r="omission"in e?gi(e.omission):r}t=Au(t);var o=t.length;if(G(t)){var a=tt(t);o=a.length}if(n>=o)return t;var s=n-$(r);if(s<1)return r;var u=a?Ti(a,0,s).join(""):t.slice(0,s);if(i===it)return u+r;if(a&&(s+=u.length-s),Sf(i)){if(t.slice(s).search(i)){var l,c=u;for(i.global||(i=hc(i.source,Au(Xe.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var h=l.index;u=u.slice(0,h===it?s:h)}}else if(t.indexOf(gi(i),s)!=s){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r}function Pl(t){return t=Au(t),t&&Me.test(t)?t.replace(Ce,xr):t}function Tl(t,e,n){return t=Au(t),e=n?it:e,e===it?H(t)?rt(t):w(t):t.match(e)||[]}function Ol(t){var e=null==t?0:t.length,n=Eo();return t=e?m(t,function(t){if("function"!=typeof t[1])throw new pc(ut);return[n(t[0]),t[1]]}):[],ai(function(n){for(var r=-1;++r<e;){var i=t[r];if(s(i[0],this,n))return s(i[1],this,n)}})}function Al(t){return zn(Vn(t,ft))}function Rl(t){return function(){return t}}function Ll(t,e){return null==t||t!==t?e:t}function Il(t){return t}function kl(t){return Vr("function"==typeof t?t:Vn(t,ft))}function Dl(t){return Xr(Vn(t,ft))}function jl(t,e){return qr(t,Vn(e,ft))}function Nl(t,e,n){var r=Gu(e),i=ur(e,r);null!=n||su(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=ur(e,Gu(e)));var o=!(su(n)&&"chain"in n&&!n.chain),a=iu(t);return l(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Vi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,v([this.value()],arguments))})}),t}function Bl(){return sr._===this&&(sr._=Cc),this}function Fl(){}function Ul(t){return t=Su(t),ai(function(e){return Zr(e,t)})}function Vl(t){return Bo(t)?T(na(t)):ti(t)}function zl(t){return function(e){return null==t?it:lr(t,e)}}function Gl(){return[]}function Hl(){return!1}function Wl(){return{}}function Xl(){return""}function ql(){return!0}function Yl(t,e){if(t=Su(t),t<1||t>Dt)return[];var n=Bt,r=Kc(t,Bt);e=Eo(e),t-=Bt;for(var i=I(r,e);++n<t;)e(n);return i}function Kl(t){return bf(t)?m(t,na):_u(t)?[t]:Vi(kh(Au(t)))}function Zl(t){var e=++bc;return Au(t)+e}function Jl(t){return t&&t.length?$n(t,Il,_r):it}function Ql(t,e){return t&&t.length?$n(t,Eo(e,2),_r):it}function $l(t){return P(t,Il)}function tc(t,e){return P(t,Eo(e,2))}function ec(t){return t&&t.length?$n(t,Il,Hr):it}function nc(t,e){return t&&t.length?$n(t,Eo(e,2),Hr):it}function rc(t){return t&&t.length?L(t,Il):0}function ic(t,e){return t&&t.length?L(t,Eo(e,2)):0}e=null==e?sr:Cr.defaults(sr.Object(),e,Cr.pick(sr,Kn));var oc=e.Array,ac=e.Date,sc=e.Error,uc=e.Function,lc=e.Math,cc=e.Object,hc=e.RegExp,fc=e.String,pc=e.TypeError,dc=oc.prototype,mc=uc.prototype,vc=cc.prototype,gc=e["__core-js_shared__"],yc=mc.toString,_c=vc.hasOwnProperty,bc=0,wc=function(){var t=/[^.]+$/.exec(gc&&gc.keys&&gc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),xc=vc.toString,Ec=yc.call(cc),Cc=sr._,Sc=hc("^"+yc.call(_c).replace(De,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mc=cr?e.Buffer:it,Pc=e.Symbol,Tc=e.Uint8Array,Oc=Mc?Mc.allocUnsafe:it,Ac=q(cc.getPrototypeOf,cc),Rc=cc.create,Lc=vc.propertyIsEnumerable,Ic=dc.splice,kc=Pc?Pc.isConcatSpreadable:it,Dc=Pc?Pc.iterator:it,jc=Pc?Pc.toStringTag:it,Nc=function(){try{var t=Mo(cc,"defineProperty");return t({},"",{}),t}catch(e){}}(),Bc=e.clearTimeout!==sr.clearTimeout&&e.clearTimeout,Fc=ac&&ac.now!==sr.Date.now&&ac.now,Uc=e.setTimeout!==sr.setTimeout&&e.setTimeout,Vc=lc.ceil,zc=lc.floor,Gc=cc.getOwnPropertySymbols,Hc=Mc?Mc.isBuffer:it,Wc=e.isFinite,Xc=dc.join,qc=q(cc.keys,cc),Yc=lc.max,Kc=lc.min,Zc=ac.now,Jc=e.parseInt,Qc=lc.random,$c=dc.reverse,th=Mo(e,"DataView"),eh=Mo(e,"Map"),nh=Mo(e,"Promise"),rh=Mo(e,"Set"),ih=Mo(e,"WeakMap"),oh=Mo(cc,"create"),ah=ih&&new ih,sh={},uh=ra(th),lh=ra(eh),ch=ra(nh),hh=ra(rh),fh=ra(ih),ph=Pc?Pc.prototype:it,dh=ph?ph.valueOf:it,mh=ph?ph.toString:it,vh=function(){function t(){}return function(e){if(!su(e))return{};if(Rc)return Rc(e);t.prototype=e;var n=new t;return t.prototype=it,n}}();n.templateSettings={escape:Te,evaluate:Oe,interpolate:Ae,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=vh(r.prototype),i.prototype.constructor=i,b.prototype=vh(r.prototype),b.prototype.constructor=b,nt.prototype.clear=Ge,nt.prototype.delete=en,nt.prototype.get=nn,nt.prototype.has=rn,nt.prototype.set=on,an.prototype.clear=sn,an.prototype.delete=un,an.prototype.get=ln,an.prototype.has=cn,an.prototype.set=hn,fn.prototype.clear=pn,fn.prototype.delete=dn,fn.prototype.get=mn,fn.prototype.has=vn,fn.prototype.set=gn,yn.prototype.add=yn.prototype.push=_n,yn.prototype.has=bn,wn.prototype.clear=xn,wn.prototype.delete=En,wn.prototype.get=Cn,wn.prototype.has=Sn,wn.prototype.set=Mn;var gh=qi(or),yh=qi(ar,!0),_h=Yi(),bh=Yi(!0),wh=ah?function(t,e){return ah.set(t,e),t}:Il,xh=Nc?function(t,e){return Nc(t,"toString",{configurable:!0,enumerable:!1,value:Rl(e),writable:!0})}:Il,Eh=ai,Ch=Bc||function(t){return sr.clearTimeout(t)},Sh=rh&&1/K(new rh([,-0]))[1]==kt?function(t){return new rh(t)}:Fl,Mh=ah?function(t){return ah.get(t)}:Fl,Ph=Gc?q(Gc,cc):Gl,Th=Gc?function(t){for(var e=[];t;)v(e,Ph(t)),t=Ac(t);return e}:Gl,Oh=fr;(th&&Oh(new th(new ArrayBuffer(1)))!=he||eh&&Oh(new eh)!=Jt||nh&&Oh(nh.resolve())!=ee||rh&&Oh(new rh)!=ie||ih&&Oh(new ih)!=ue)&&(Oh=function(t){var e=fr(t),n=e==te?t.constructor:it,r=n?ra(n):"";if(r)switch(r){case uh:return he;case lh:return Jt;case ch:return ee;case hh:return ie;case fh:return ue}return e});var Ah=gc?iu:Hl,Rh=ta(wh),Lh=Uc||function(t,e){return sr.setTimeout(t,e)},Ih=ta(xh),kh=Wo(function(t){var e=[];return Ie.test(t)&&e.push(""),t.replace(ke,function(t,n,r,i){e.push(r?i.replace(He,"$1"):n||t)}),e}),Dh=ai(function(t,e){return Zs(t)?qn(t,nr(e,1,Zs,!0)):[]}),jh=ai(function(t,e){var n=Ca(e);return Zs(n)&&(n=it),Zs(t)?qn(t,nr(e,1,Zs,!0),Eo(n,2)):[]}),Nh=ai(function(t,e){var n=Ca(e);return Zs(n)&&(n=it),Zs(t)?qn(t,nr(e,1,Zs,!0),it,n):[]}),Bh=ai(function(t){var e=m(t,Si);return e.length&&e[0]===t[0]?Pr(e):[]}),Fh=ai(function(t){var e=Ca(t),n=m(t,Si);return e===Ca(n)?e=it:n.pop(),n.length&&n[0]===t[0]?Pr(n,Eo(e,2)):[]}),Uh=ai(function(t){var e=Ca(t),n=m(t,Si);return e="function"==typeof e?e:it,e&&n.pop(),n.length&&n[0]===t[0]?Pr(n,it,e):[]}),Vh=ai(Pa),zh=yo(function(t,e){var n=null==t?0:t.length,r=Fn(t,e);return ni(t,m(e,function(t){return jo(t,n)?+t:t}).sort(Ni)),r}),Gh=ai(function(t){return yi(nr(t,1,Zs,!0))}),Hh=ai(function(t){var e=Ca(t);return Zs(e)&&(e=it),yi(nr(t,1,Zs,!0),Eo(e,2))}),Wh=ai(function(t){var e=Ca(t);return e="function"==typeof e?e:it,yi(nr(t,1,Zs,!0),it,e)}),Xh=ai(function(t,e){return Zs(t)?qn(t,e):[]}),qh=ai(function(t){return Ei(f(t,Zs))}),Yh=ai(function(t){var e=Ca(t);return Zs(e)&&(e=it),Ei(f(t,Zs),Eo(e,2))}),Kh=ai(function(t){var e=Ca(t);return e="function"==typeof e?e:it,Ei(f(t,Zs),it,e)}),Zh=ai(Ka),Jh=ai(function(t){var e=t.length,n=e>1?t[e-1]:it;return n="function"==typeof n?(t.pop(),n):it,Za(t,n)}),Qh=yo(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return Fn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof b&&jo(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:es,args:[o],thisArg:it}),new i(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(it),t})):this.thru(o)}),$h=Wi(function(t,e,n){_c.call(t,n)?++t[n]:Bn(t,n,1)}),tf=to(da),ef=to(ma),nf=Wi(function(t,e,n){_c.call(t,n)?t[n].push(e):Bn(t,n,[e])}),rf=ai(function(t,e,n){var r=-1,i="function"==typeof e,o=Ks(t)?oc(t.length):[];return gh(t,function(t){o[++r]=i?s(e,t,n):Or(t,e,n)}),o}),of=Wi(function(t,e,n){Bn(t,n,e)}),af=Wi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),sf=ai(function(t,e){if(null==t)return[];var n=e.length;return n>1&&No(t,e[0],e[1])?e=[]:n>2&&No(e[0],e[1],e[2])&&(e=[e[0]]),Jr(t,nr(e,1),[])}),uf=Fc||function(){return sr.Date.now()},lf=ai(function(t,e,n){var r=gt;if(n.length){var i=Y(n,xo(lf));r|=xt}return po(t,r,e,n,i)}),cf=ai(function(t,e,n){var r=gt|yt;if(n.length){var i=Y(n,xo(cf));r|=xt}return po(e,r,t,n,i)}),hf=ai(function(t,e){return Xn(t,1,e)}),ff=ai(function(t,e,n){return Xn(t,Pu(e)||0,n)});ks.Cache=fn;var pf=Eh(function(t,e){e=1==e.length&&bf(e[0])?m(e[0],D(Eo())):m(nr(e,1),D(Eo()));var n=e.length;return ai(function(r){for(var i=-1,o=Kc(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return s(t,this,r)})}),df=ai(function(t,e){var n=Y(e,xo(df));return po(t,xt,it,e,n)}),mf=ai(function(t,e){var n=Y(e,xo(mf));return po(t,Et,it,e,n)}),vf=yo(function(t,e){return po(t,St,it,it,it,e)}),gf=lo(_r),yf=lo(function(t,e){return t>=e}),_f=Ar(function(){return arguments}())?Ar:function(t){return uu(t)&&_c.call(t,"callee")&&!Lc.call(t,"callee")},bf=oc.isArray,wf=pr?D(pr):Rr,xf=Hc||Hl,Ef=dr?D(dr):Lr,Cf=mr?D(mr):Dr,Sf=vr?D(vr):Br,Mf=gr?D(gr):Fr,Pf=yr?D(yr):Ur,Tf=lo(Hr),Of=lo(function(t,e){return t<=e}),Af=Xi(function(t,e){if(zo(e)||Ks(e))return void zi(e,Gu(e),t);for(var n in e)_c.call(e,n)&&In(t,n,e[n])}),Rf=Xi(function(t,e){zi(e,Hu(e),t)}),Lf=Xi(function(t,e,n,r){zi(e,Hu(e),t,r)}),If=Xi(function(t,e,n,r){zi(e,Gu(e),t,r)}),kf=yo(Fn),Df=ai(function(t){return t.push(it,Rn),s(Lf,it,t)}),jf=ai(function(t){return t.push(it,qo),s(Vf,it,t)}),Nf=ro(function(t,e,n){t[e]=n},Rl(Il)),Bf=ro(function(t,e,n){_c.call(t,e)?t[e].push(n):t[e]=[n]},Eo),Ff=ai(Or),Uf=Xi(function(t,e,n){Yr(t,e,n)}),Vf=Xi(function(t,e,n,r){Yr(t,e,n,r)}),zf=yo(function(t,e){var n={};if(null==t)return n;var r=!1;e=m(e,function(e){return e=Pi(e,t),r||(r=e.length>1),e}),zi(t,bo(t),n),r&&(n=Vn(n,ft|pt|dt));for(var i=e.length;i--;)_i(n,e[i]);return n}),Gf=yo(function(t,e){return null==t?{}:Qr(t,e)}),Hf=fo(Gu),Wf=fo(Hu),Xf=Ji(function(t,e,n){return e=e.toLowerCase(),t+(n?sl(e):e)}),qf=Ji(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Yf=Ji(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Kf=Zi("toLowerCase"),Zf=Ji(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Jf=Ji(function(t,e,n){return t+(n?" ":"")+$f(e)}),Qf=Ji(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),$f=Zi("toUpperCase"),tp=ai(function(t,e){try{return s(t,it,e)}catch(n){return nu(n)?n:new sc(n)}}),ep=yo(function(t,e){return l(e,function(e){e=na(e),Bn(t,e,lf(t[e],t))}),t}),np=eo(),rp=eo(!0),ip=ai(function(t,e){return function(n){return Or(n,t,e)}}),op=ai(function(t,e){return function(n){return Or(t,n,e)}}),ap=oo(m),sp=oo(h),up=oo(_),lp=uo(),cp=uo(!0),hp=io(function(t,e){return t+e},0),fp=ho("ceil"),pp=io(function(t,e){return t/e},1),dp=ho("floor"),mp=io(function(t,e){return t*e},1),vp=ho("round"),gp=io(function(t,e){return t-e},0);return n.after=Ps,n.ary=Ts,n.assign=Af,n.assignIn=Rf,n.assignInWith=Lf,n.assignWith=If,n.at=kf,n.before=Os,n.bind=lf,n.bindAll=ep,n.bindKey=cf,n.castArray=zs,n.chain=$a,n.chunk=aa,n.compact=sa,n.concat=ua,n.cond=Ol,n.conforms=Al,n.constant=Rl,n.countBy=$h,n.create=Ru,n.curry=As,n.curryRight=Rs,n.debounce=Ls,n.defaults=Df,n.defaultsDeep=jf,n.defer=hf,n.delay=ff,n.difference=Dh,n.differenceBy=jh,n.differenceWith=Nh,n.drop=la,n.dropRight=ca,n.dropRightWhile=ha,n.dropWhile=fa,n.fill=pa,n.filter=cs,n.flatMap=hs,n.flatMapDeep=fs,n.flatMapDepth=ps,n.flatten=va,n.flattenDeep=ga,n.flattenDepth=ya,n.flip=Is,n.flow=np,n.flowRight=rp,n.fromPairs=_a,n.functions=Bu,n.functionsIn=Fu,n.groupBy=nf,n.initial=xa,n.intersection=Bh,n.intersectionBy=Fh,n.intersectionWith=Uh,n.invert=Nf,n.invertBy=Bf,n.invokeMap=rf,n.iteratee=kl,n.keyBy=of,n.keys=Gu,n.keysIn=Hu,n.map=gs,n.mapKeys=Wu,n.mapValues=Xu,n.matches=Dl,n.matchesProperty=jl,n.memoize=ks,n.merge=Uf,n.mergeWith=Vf,n.method=ip,n.methodOf=op,n.mixin=Nl,n.negate=Ds,n.nthArg=Ul,n.omit=zf,n.omitBy=qu,n.once=js,n.orderBy=ys,n.over=ap,n.overArgs=pf,n.overEvery=sp,n.overSome=up,n.partial=df,n.partialRight=mf,n.partition=af,n.pick=Gf,n.pickBy=Yu,n.property=Vl,n.propertyOf=zl,n.pull=Vh,n.pullAll=Pa,n.pullAllBy=Ta,n.pullAllWith=Oa,n.pullAt=zh,n.range=lp,n.rangeRight=cp,n.rearg=vf,n.reject=ws,n.remove=Aa,n.rest=Ns,n.reverse=Ra,n.sampleSize=Es,n.set=Zu,n.setWith=Ju,n.shuffle=Cs,n.slice=La,n.sortBy=sf,n.sortedUniq=Fa,n.sortedUniqBy=Ua,n.split=yl,n.spread=Bs,n.tail=Va,n.take=za,n.takeRight=Ga,n.takeRightWhile=Ha,n.takeWhile=Wa,n.tap=ts,n.throttle=Fs,n.thru=es,n.toArray=Eu,n.toPairs=Hf,n.toPairsIn=Wf,n.toPath=Kl,n.toPlainObject=Tu,n.transform=Qu,n.unary=Us,n.union=Gh,n.unionBy=Hh,n.unionWith=Wh,n.uniq=Xa,n.uniqBy=qa,n.uniqWith=Ya,n.unset=$u,n.unzip=Ka,n.unzipWith=Za,n.update=tl,n.updateWith=el,n.values=nl,n.valuesIn=rl,n.without=Xh,n.words=Tl,n.wrap=Vs,n.xor=qh,n.xorBy=Yh,n.xorWith=Kh,n.zip=Zh,n.zipObject=Ja,n.zipObjectDeep=Qa,n.zipWith=Jh,n.entries=Hf,n.entriesIn=Wf,n.extend=Rf,n.extendWith=Lf,Nl(n,n),n.add=hp,n.attempt=tp,n.camelCase=Xf,n.capitalize=sl,n.ceil=fp,n.clamp=il,n.clone=Gs,n.cloneDeep=Ws,n.cloneDeepWith=Xs,n.cloneWith=Hs,n.conformsTo=qs,n.deburr=ul,n.defaultTo=Ll,n.divide=pp,n.endsWith=ll,n.eq=Ys,n.escape=cl,n.escapeRegExp=hl,n.every=ls,n.find=tf,n.findIndex=da,n.findKey=Lu,n.findLast=ef,n.findLastIndex=ma,n.findLastKey=Iu,n.floor=dp,n.forEach=ds,n.forEachRight=ms,n.forIn=ku,n.forInRight=Du,n.forOwn=ju,n.forOwnRight=Nu,n.get=Uu,n.gt=gf,n.gte=yf,n.has=Vu,n.hasIn=zu,n.head=ba,n.identity=Il,n.includes=vs,n.indexOf=wa,n.inRange=ol,n.invoke=Ff,n.isArguments=_f,n.isArray=bf,n.isArrayBuffer=wf,n.isArrayLike=Ks,n.isArrayLikeObject=Zs,n.isBoolean=Js,n.isBuffer=xf,n.isDate=Ef,n.isElement=Qs,n.isEmpty=$s,n.isEqual=tu,n.isEqualWith=eu,n.isError=nu,n.isFinite=ru,n.isFunction=iu,n.isInteger=ou,n.isLength=au,n.isMap=Cf,n.isMatch=lu,n.isMatchWith=cu,n.isNaN=hu,n.isNative=fu,n.isNil=du,n.isNull=pu,n.isNumber=mu,n.isObject=su,n.isObjectLike=uu,n.isPlainObject=vu,n.isRegExp=Sf,n.isSafeInteger=gu,n.isSet=Mf,n.isString=yu,n.isSymbol=_u,n.isTypedArray=Pf,n.isUndefined=bu,n.isWeakMap=wu,n.isWeakSet=xu,n.join=Ea,n.kebabCase=qf,n.last=Ca,n.lastIndexOf=Sa,n.lowerCase=Yf,n.lowerFirst=Kf,n.lt=Tf,n.lte=Of,n.max=Jl,n.maxBy=Ql,n.mean=$l,n.meanBy=tc,n.min=ec,n.minBy=nc,n.stubArray=Gl,n.stubFalse=Hl,n.stubObject=Wl,n.stubString=Xl,n.stubTrue=ql,n.multiply=mp,n.nth=Ma,n.noConflict=Bl,n.noop=Fl,n.now=uf,n.pad=fl,n.padEnd=pl,n.padStart=dl,n.parseInt=ml,n.random=al,n.reduce=_s,n.reduceRight=bs,n.repeat=vl,n.replace=gl,n.result=Ku,n.round=vp,n.runInContext=t,n.sample=xs,n.size=Ss,n.snakeCase=Zf,n.some=Ms,n.sortedIndex=Ia,n.sortedIndexBy=ka,n.sortedIndexOf=Da,n.sortedLastIndex=ja,n.sortedLastIndexBy=Na,n.sortedLastIndexOf=Ba,n.startCase=Jf,n.startsWith=_l,n.subtract=gp,n.sum=rc,n.sumBy=ic,n.template=bl,n.times=Yl,n.toFinite=Cu,n.toInteger=Su,n.toLength=Mu,n.toLower=wl,n.toNumber=Pu,n.toSafeInteger=Ou,n.toString=Au,n.toUpper=xl,n.trim=El,n.trimEnd=Cl,n.trimStart=Sl,n.truncate=Ml,n.unescape=Pl,n.uniqueId=Zl,n.upperCase=Qf,n.upperFirst=$f,n.each=ds,n.eachRight=ms,n.first=ba,Nl(n,function(){var t={};return or(n,function(e,r){_c.call(n.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),n.VERSION=ot,l(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),l(["drop","take"],function(t,e){b.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new b(this);n=n===it?1:Yc(Su(n),0);var i=this.clone();return r?i.__takeCount__=Kc(n,i.__takeCount__):i.__views__.push({size:Kc(n,Bt),type:t+(i.__dir__<0?"Right":"")}),i},b.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),l(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==Rt||n==It;b.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Eo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),l(["head","last"],function(t,e){var n="take"+(e?"Right":"");b.prototype[t]=function(){return this[n](1).value()[0]}}),l(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");b.prototype[t]=function(){return this.__filtered__?new b(this):this[n](1)}}),b.prototype.compact=function(){return this.filter(Il)},b.prototype.find=function(t){return this.filter(t).head()},b.prototype.findLast=function(t){return this.reverse().find(t)},b.prototype.invokeMap=ai(function(t,e){return"function"==typeof t?new b(this):this.map(function(n){return Or(n,t,e)})}),b.prototype.reject=function(t){return this.filter(Ds(Eo(t)))},b.prototype.slice=function(t,e){t=Su(t);var n=this;return n.__filtered__&&(t>0||e<0)?new b(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==it&&(e=Su(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},b.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},b.prototype.toArray=function(){return this.take(Bt)},or(b.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),a=n[o?"take"+("last"==e?"Right":""):e],s=o||/^find/.test(e);a&&(n.prototype[e]=function(){var e=this.__wrapped__,u=o?[1]:arguments,l=e instanceof b,c=u[0],h=l||bf(e),f=function(t){var e=a.apply(n,v([t],u));return o&&p?e[0]:e};h&&r&&"function"==typeof c&&1!=c.length&&(l=h=!1);var p=this.__chain__,d=!!this.__actions__.length,m=s&&!p,g=l&&!d;if(!s&&h){e=g?e:new b(this);var y=t.apply(e,u);return y.__actions__.push({func:es,args:[f],thisArg:it}),new i(y,p)}return m&&g?t.apply(this,u):(y=this.thru(f),m?o?y.value()[0]:y.value():y)})}),l(["pop","push","shift","sort","splice","unshift"],function(t){var e=dc[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(bf(n)?n:[],t)}return this[r](function(n){return e.apply(bf(n)?n:[],t)})}}),or(b.prototype,function(t,e){var r=n[e];if(r){var i=r.name+"",o=sh[i]||(sh[i]=[]);o.push({name:e,func:r})}}),sh[no(it,yt).name]=[{name:"wrapper",func:it}],b.prototype.clone=O,b.prototype.reverse=J,b.prototype.value=et,n.prototype.at=Qh,n.prototype.chain=ns,n.prototype.commit=rs,n.prototype.next=is,n.prototype.plant=as,n.prototype.reverse=ss,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=us,n.prototype.first=n.prototype.head,Dc&&(n.prototype[Dc]=os),n},Cr=Er();sr._=Cr,r=function(){return Cr}.call(e,n,e,i),!(r!==it&&(i.exports=r))}).call(this)}).call(e,function(){return this}(),n(110)(t))},function(t,e,n){var r,i,o=function(a,s){var u=a?a.window:n(414),l=u&&u.document;a=a||u;var c=new function(){function t(t,e,n,i,o){function a(r,a){a=a||(a=u(e,r))&&(a.get?a:a.value),"string"==typeof a&&"#"===a[0]&&(a=t[a.substring(1)]||a);var l,f="function"==typeof a,p=a,d=o||f&&!a.base?a&&a.get?r in t:t[r]:null;o&&d||(f&&d&&(a.base=d),f&&i!==!1&&(l=r.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(s[l[3].toLowerCase()+l[4]]=l[2]),p&&!f&&p.get&&"function"==typeof p.get&&c.isPlainObject(p)||(p={
value:p,writable:!0}),(u(t,r)||{configurable:!0}).configurable&&(p.configurable=!0,p.enumerable=n),h(t,r,p))}var s={};if(e){for(var l in e)e.hasOwnProperty(l)&&!r.test(l)&&a(l);for(var l in s){var f=s[l],p=t["set"+f],d=t["get"+f]||p&&t["is"+f];!d||i!==!0&&0!==d.length||a(l,{get:d,set:p})}}return t}function e(t,e,n){return t&&("length"in t&&!t.getLength&&"number"==typeof t.length?i:o).call(t,e,n=n||t),n}function n(t,e,n){for(var r=n,i=e.length;r<i;r++){var o=e[r];for(var a in o)o.hasOwnProperty(a)&&(t[a]=o[a])}return t}var r=/^(statics|enumerable|beans|preserve)$/,i=[].forEach||function(t,e){for(var n=0,r=this.length;n<r;n++)t.call(e,this[n],n,this)},o=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},a=Object.create||function(t){return{__proto__:t}},u=Object.getOwnPropertyDescriptor||function(t,e){var n=t.__lookupGetter__&&t.__lookupGetter__(e);return n?{get:n,set:t.__lookupSetter__(e),enumerable:!0,configurable:!0}:t.hasOwnProperty(e)?{value:t[e],enumerable:!0,configurable:!0,writable:!0}:null},l=Object.defineProperty||function(t,e,n){return(n.get||n.set)&&t.__defineGetter__?(n.get&&t.__defineGetter__(e,n.get),n.set&&t.__defineSetter__(e,n.set)):t[e]=n.value,t},h=function(t,e,n){return delete t[e],l(t,e,n)};return t(function(){n(this,arguments,0)},{inject:function(e){if(e){var n=e.statics===!0?e:e.statics,r=e.beans,i=e.preserve;n!==e&&t(this.prototype,e,e.enumerable,r,i),t(this,n,!0,r,i)}for(var o=1,a=arguments.length;o<a;o++)this.inject(arguments[o]);return this},extend:function(){for(var e,n,r,i=this,o=0,s=arguments.length;o<s&&(!e||!n);o++)r=arguments[o],e=e||r.initialize,n=n||r.prototype;return e=e||function(){i.apply(this,arguments)},n=e.prototype=n||a(this.prototype),h(n,"constructor",{value:e,writable:!0,configurable:!0}),t(e,this,!0),arguments.length&&this.inject.apply(e,arguments),e.base=i,e}},!0).inject({inject:function(){for(var e=0,n=arguments.length;e<n;e++){var r=arguments[e];r&&t(this,r,r.enumerable,r.beans,r.preserve)}return this},extend:function(){var t=a(this);return t.inject.apply(t,arguments)},each:function(t,n){return e(this,t,n)},set:function(){return n(this,arguments,0)},clone:function(){return new this.constructor(this)},statics:{each:e,create:a,define:h,describe:u,set:function(t){return n(t,arguments,1)},clone:function(t){return n(new t.constructor,arguments,0)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===c||"Object"===e.name)},pick:function(t,e){return t!==s?t:e}}})};t.exports=c,c.inject({toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+c.each(this,function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?d.instance.number(t):"string"===n?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return c.importJSON(t,this)},exportJSON:function(t){return c.exportJSON(this,t)},toJSON:function(){return c.serialize(this)},_set:function(t){if(t&&c.isPlainObject(t))return c.filter(this,t)},statics:{exports:{enumerable:!0},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!c.exports[n]&&(c.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){var n=t.length;if(n!==e.length)return!1;for(;n--;)if(!c.equals(t[n],e[n]))return!1}else{var r=Object.keys(t),n=r.length;if(n!==Object.keys(e).length)return!1;for(;n--;){var i=r[n];if(!e.hasOwnProperty(i)||!c.equals(t[i],e[i]))return!1}}return!0}return!1},read:function(t,e,n,r){if(this===c){var i=this.peek(t,e);return t.__index++,i}var o=this.prototype,a=o._readIndex,u=e||a&&t.__index||0;r||(r=t.length-u);var l=t[u];return l instanceof this||n&&n.readNull&&null==l&&r<=1?(a&&(t.__index=u+1),l&&n&&n.clone?l.clone():l):(l=c.create(this.prototype),a&&(l.__read=!0),l=l.initialize.apply(l,u>0||r<t.length?Array.prototype.slice.call(t,u,u+r):t)||l,a&&(t.__index=u+l.__read,l.__read=s),l)},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readAll:function(t,e,n){for(var r,i=[],o=e||0,a=t.length;o<a;o++)i.push(Array.isArray(r=t[o])?this.read(r,0,n):this.read(t,o,n,1));return i},readNamed:function(t,e,n,r,i){var o=this.getNamed(t,e),a=o!==s;if(a){var u=t._filtered;u||(u=t._filtered=c.create(t[0]),u._filtering=t[0]),u[e]=s}return this.read(a?[o]:t,n,r,i)},getNamed:function(t,e){var n=t[0];if(t._hasObject===s&&(t._hasObject=1===t.length&&c.isPlainObject(n)),t._hasObject)return e?n[e]:t._filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,n){for(var r=Object.keys(e._filtering||e),i=0,o=r.length;i<o;i++){var a=r[i];if(!n||!n[a]){var u=e[a];u!==s&&(t[a]=u)}}return t},isPlainValue:function(t,e){return this.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,r){e=e||{};var i,o=!r;if(o&&(e.formatter=new d(e.precision),r={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,r=this.references[n];if(!r){this.length++;var i=e.call(t),o=t._class;o&&i[0]!==o&&i.unshift(o),this.definitions[n]=i,r=this.references[n]=[n]}return r}}),t&&t._serialize){i=t._serialize(e,r);var a=t._class;!a||t._compactSerialize||!o&&n||i[0]===a||i.unshift(a)}else if(Array.isArray(t)){i=[];for(var s=0,u=t.length;s<u;s++)i[s]=c.serialize(t[s],e,n,r)}else if(c.isPlainObject(t)){i={};for(var l=Object.keys(t),s=0,u=l.length;s<u;s++){var h=l[s];i[h]=c.serialize(t[h],e,n,r)}}else i="number"==typeof t?e.formatter.number(t,e.precision):t;return o&&r.length>0?[["dictionary",r.definitions],i]:i},deserialize:function(t,e,n,r,i){var o=t,a=!n,s=a&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var u=t[0],l="dictionary"===u;if(1==t.length&&/^#/.test(u))return n.dictionary[u];u=c.exports[u],o=[];for(var h=u?1:0,f=t.length;h<f;h++)o.push(c.deserialize(t[h],e,n,l,s));if(u){var p=o;e?o=e(u,p,a||i):(o=c.create(u.prototype),u.apply(o,p))}}else if(c.isPlainObject(t)){o={},r&&(n.dictionary=o);for(var d in t)o[d]=c.deserialize(t[d],e,n)}return s?o[1]:o},exportJSON:function(t,e){var n=c.serialize(t,e);return e&&e.asString===!1?n:JSON.stringify(n)},importJSON:function(t,e){return c.deserialize("string"==typeof t?JSON.parse(t):t,function(t,n,r){var i=r&&e&&e.constructor===t,o=i?e:c.create(t.prototype);if(1===n.length&&o instanceof M&&(i||!(o instanceof T))){var a=n[0];c.isPlainObject(a)&&(a.insert=!1)}return(i?o._set:t).apply(o,n),i&&(e=null),o})},splice:function(t,e,n,r){var i=e&&e.length,o=n===s;n=o?t.length:n,n>t.length&&(n=t.length);for(var a=0;a<i;a++)e[a]._index=n+a;if(o)return t.push.apply(t,e),[];var u=[n,r];e&&u.push.apply(u,e);for(var l=t.splice.apply(t,u),a=0,c=l.length;a<c;a++)l[a]._index=s;for(var a=n+i,c=t.length;a<c;a++)t[a]._index=a;return l},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var h={on:function(t,e){if("string"!=typeof t)c.each(t,function(t,e){this.on(e,t)},this);else{var n=this._eventTypes,r=n&&n[t],i=this._callbacks=this._callbacks||{};i=i[t]=i[t]||[],i.indexOf(e)===-1&&(i.push(e),r&&r.install&&1===i.length&&r.install.call(this,t))}return this},off:function(t,e){if("string"!=typeof t)return void c.each(t,function(t,e){this.off(e,t)},this);var n,r=this._eventTypes,i=r&&r[t],o=this._callbacks&&this._callbacks[t];return o&&(!e||(n=o.indexOf(e))!==-1&&1===o.length?(i&&i.uninstall&&i.uninstall.call(this,t),delete this._callbacks[t]):n!==-1&&o.splice(n,1)),this},once:function(t,e){return this.on(t,function(){e.apply(this,arguments),this.off(t,e)})},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var r=[].slice.call(arguments,1),i=e&&e.target&&!e.currentTarget;n=n.slice(),i&&(e.currentTarget=this);for(var o=0,a=n.length;o<a;o++)if(n[o].apply(this,r)===!1){e&&e.stop&&e.stop();break}return i&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,r=t?"install":"uninstall";if(e)for(var i in n)if(n[i].length>0){var o=e[i],a=o&&o[r];a&&a.call(this,i)}},statics:{inject:function t(e){var n=e._events;if(n){var r={};c.each(n,function(t,n){var i="string"==typeof t,o=i?t:n,a=c.capitalize(o),s=o.substring(2).toLowerCase();r[s]=i?{}:t,o="_"+o,e["get"+a]=function(){return this[o]},e["set"+a]=function(t){var e=this[o];e&&this.off(s,e),t&&this.on(s,t),this[o]=t}}),e._eventTypes=r}return t.base.apply(this,arguments)}}},f=c.extend({_class:"PaperScope",initialize:function t(){o=this,this.settings=new c({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var n=at.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:st.nativeModes},at.release(n)}if(!this.agent){var r=a.navigator.userAgent.toLowerCase(),i=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],s="darwin"===i?"mac":i,u=e.agent=e.browser={platform:s};s&&(u[s]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,n,r,i){if(!u.chrome){var o="opera"===e?r:/^(node|trident)$/.test(e)?i:n;u.version=o,u.versionNumber=parseFloat(o),e="trident"===e?"msie":e,u.name=e,u[e]=!0}}),u.chrome&&delete u.webkit,u.atom&&delete u.chrome}},version:"0.10.2",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){o.PaperScript.execute(t,this,e),J.updateFocus()},install:function(t){var e=this;c.each(["project","view","tool"],function(n){c.define(t,n,{configurable:!0,get:function(){return e[n]}})});for(var n in this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return o=this,this.project=new S(t),this},createCanvas:function(t,e){return at.getCanvas(t,e)},activate:function(){o=this},clear:function(){for(var t=this.projects,e=this.tools,n=this.palettes,r=t.length-1;r>=0;r--)t[r].remove();for(var r=e.length-1;r>=0;r--)e[r].remove();for(var r=n.length-1;r>=0;r--)n[r].remove()},remove:function(){this.clear(),delete f._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),p=c.extend(h,{initialize:function(t){this._scope=o,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(c.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),d=c.extend({initialize:function(t){this.precision=c.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});d.instance=new d;var m=new function(){function t(t,e,n){return t<e?e:t>n?n:t}function e(t,e,n){function r(t){var e=134217729*t,n=t-e,r=n+e,i=t-r;return[r,i]}var i=e*e-t*n,a=e*e+t*n;if(3*o(i)<a){var s=r(t),u=r(e),l=r(n),c=e*e,h=u[0]*u[0]-c+2*u[0]*u[1]+u[1]*u[1],f=t*n,p=s[0]*l[0]-f+s[0]*l[1]+s[1]*l[0]+s[1]*l[1];i=c-f+(h-p)}return i}function n(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?s(2,-Math.round(u(t))):0}var r=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],i=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],o=Math.abs,a=Math.sqrt,s=Math.pow,u=Math.log2||function(t){return Math.log(t)*Math.LOG2E},l=1e-12,c=1.12e-16;return{TOLERANCE:1e-6,EPSILON:l,MACHINE_EPSILON:c,CURVETIME_EPSILON:4e-7,GEOMETRIC_EPSILON:2e-7,WINDING_EPSILON:2e-7,TRIGONOMETRIC_EPSILON:1e-7,CLIPPING_EPSILON:1e-9,KAPPA:4*(a(2)-1)/3,isZero:function(t){return t>=-l&&t<=l},clamp:t,integrate:function(t,e,n,o){for(var a=r[o-2],s=i[o-2],u=.5*(n-e),l=u+e,c=0,h=o+1>>1,f=1&o?s[c++]*t(l):0;c<h;){var p=u*a[c];f+=s[c++]*(t(l+p)+t(l-p))}return u*f},findRoot:function(t,e,n,r,i,a,s){for(var u=0;u<a;u++){var l=t(n),c=l/e(n),h=n-c;if(o(c)<s)return h;l>0?(i=n,n=h<=r?.5*(r+i):h):(r=n,n=h>=i?.5*(r+i):h)}return n},solveQuadratic:function(r,i,s,u,h,f){var p,d=1/0;if(o(r)<l){if(o(i)<l)return o(s)<l?-1:0;p=-s/i}else{i*=-.5;var m=e(r,i,s);if(m&&o(m)<c){var v=n(o(r),o(i),o(s));v&&(r*=v,i*=v,s*=v,m=e(r,i,s))}if(m>=-c){var g=m<0?0:a(m),y=i+(i<0?-g:g);0===y?(p=s/r,d=-p):(p=y/r,d=s/y)}}var _=0,b=null==h,w=h-l,x=f+l;return isFinite(p)&&(b||p>w&&p<x)&&(u[_++]=b?p:t(p,h,f)),d!==p&&isFinite(d)&&(b||d>w&&d<x)&&(u[_++]=b?d:t(d,h,f)),_},solveCubic:function(e,r,i,u,h,f,p){function d(t){v=t;var n=e*v;g=n+r,y=g*v+i,_=(n+g)*v+y,b=y*v+u}var v,g,y,_,b,w=n(o(e),o(r),o(i),o(u));if(w&&(e*=w,r*=w,i*=w,u*=w),o(e)<l)e=r,g=i,y=u,v=1/0;else if(o(u)<l)g=r,y=i,v=0;else{d(-(r/e)/3);var x=b/e,E=s(o(x),1/3),C=x<0?-1:1,S=-_/e,M=S>0?1.324717957244746*Math.max(E,a(S)):E,P=v-C*M;if(P!==v){do d(P),P=0===_?v:v-b/_/(1+c);while(C*P>C*v);o(e)*v*v>o(u/v)&&(y=-u/v,g=(y-i)/v)}}var T=m.solveQuadratic(e,g,y,h,f,p),O=null==f;return isFinite(v)&&(0===T||T>0&&v!==h[0]&&v!==h[1])&&(O||v>f-l&&v<p+l)&&(h[T++]=O?v:t(v,f,p)),T}}},v={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},g=c.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t;if("number"===n){var r="number"==typeof e;this.x=t,this.y=r?e:t,this.__read&&(this.__read=r?2:1)}else if("undefined"===n||null===t)this.x=this.y=0,this.__read&&(this.__read=null===t?1:0);else{var i="string"===n?t.split(/[\s,]+/)||[]:t;Array.isArray(i)?(this.x=i[0],this.y=i.length>1?i[1]:i[0]):"x"in i?(this.x=i.x,this.y=i.y):"width"in i?(this.x=i.width,this.y=i.height):"angle"in i?(this.x=i.length,this.y=0,this.setAngle(i.angle)):(this.x=this.y=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1)}},set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new g(this.x,this.y)},toString:function(){var t=d.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this.set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();m.isZero(n)&&this.getAngle(),this.set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=g.read(arguments),e=this.getLength()*t.getLength();if(m.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this.set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=g.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=g.read(arguments),e=t.x-this.x,n=t.y-this.y,r=e*e+n*n,i=c.read(arguments);return i?r:Math.sqrt(r)},normalize:function(t){t===s&&(t=1);var e=this.getLength(),n=0!==e?t/e:0,r=new g(this.x*n,this.y*n);return n>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,r=Math.sin(t),i=Math.cos(t);return n=new g(n.x*i-n.y*r,n.x*r+n.y*i),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=g.read(arguments);return new g(this.x+t.x,this.y+t.y)},subtract:function(){var t=g.read(arguments);return new g(this.x-t.x,this.y-t.y)},multiply:function(){var t=g.read(arguments);return new g(this.x*t.x,this.y*t.y)},divide:function(){var t=g.read(arguments);return new g(this.x/t.x,this.y/t.y)},modulo:function(){var t=g.read(arguments);return new g(this.x%t.x,this.y%t.y)},negate:function(){return new g((-this.x),(-this.y))},isInside:function(){return w.read(arguments).contains(this)},isClose:function(){var t=g.read(arguments),e=c.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=g.read(arguments);return g.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=g.read(arguments);return g.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){return m.isZero(this.x)&&m.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(){var t=g.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=g.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=g.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new g(t.x*e,t.y*e)},statics:{min:function(){var t=g.read(arguments),e=g.read(arguments);return new g(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=g.read(arguments),e=g.read(arguments);return new g(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new g(Math.random(),Math.random())},isCollinear:function(t,e,n,r){return Math.abs(t*r-e*n)<=1e-7*Math.sqrt((t*t+e*e)*(n*n+r*r))},isOrthogonal:function(t,e,n,r){return Math.abs(t*n+e*r)<=1e-7*Math.sqrt((t*t+e*e)*(n*n+r*r))}}},c.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new g(e(this.x),e(this.y))}},{})),y=g.extend({initialize:function(t,e,n,r){this._x=t,this._y=e,this._owner=n,this._setter=r},set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner.changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),_=c.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t;if("number"===n){var r="number"==typeof e;this.width=t,this.height=r?e:t,this.__read&&(this.__read=r?2:1)}else if("undefined"===n||null===t)this.width=this.height=0,this.__read&&(this.__read=null===t?1:0);else{var i="string"===n?t.split(/[\s,]+/)||[]:t;Array.isArray(i)?(this.width=i[0],this.height=i.length>1?i[1]:i[0]):"width"in i?(this.width=i.width,this.height=i.height):"x"in i?(this.width=i.x,this.height=i.y):(this.width=this.height=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1)}},set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new _(this.width,this.height)},toString:function(){var t=d.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=_.read(arguments);return new _(this.width+t.width,this.height+t.height)},subtract:function(){var t=_.read(arguments);return new _(this.width-t.width,this.height-t.height)},multiply:function(){var t=_.read(arguments);return new _(this.width*t.width,this.height*t.height)},divide:function(){var t=_.read(arguments);return new _(this.width/t.width,this.height/t.height)},modulo:function(){var t=_.read(arguments);return new _(this.width%t.width,this.height%t.height)},negate:function(){return new _((-this.width),(-this.height))},isZero:function(){return m.isZero(this.width)&&m.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new _(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new _(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new _(Math.random(),Math.random())}}},c.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new _(e(this.width),e(this.height))}},{})),b=_.extend({initialize:function(t,e,n,r){this._width=t,this._height=e,this._owner=n,this._setter=r},set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),w=c.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,n,r){var i=typeof t,o=0;if("number"===i?(this.x=t,this.y=e,this.width=n,this.height=r,o=4):"undefined"===i||null===t?(this.x=this.y=this.width=this.height=0,o=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3],o=1):t.x!==s||t.width!==s?(this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0,o=1):t.from===s&&t.to===s&&(this.x=this.y=this.width=this.height=0,this._set(t),o=1)),!o){var a=g.readNamed(arguments,"from"),u=c.peek(arguments);if(this.x=a.x,this.y=a.y,u&&u.x!==s||c.hasNamed(arguments,"to")){var l=g.readNamed(arguments,"to");this.width=l.x-a.x,this.height=l.y-a.y,this.width<0&&(this.x=l.x,this.width=-this.width),this.height<0&&(this.y=l.y,this.height=-this.height)}else{var h=_.read(arguments);this.width=h.width,this.height=h.height}o=arguments.__index}this.__read&&(this.__read=o)},set:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this},clone:function(){return new w(this.x,this.y,this.width,this.height)},equals:function(t){var e=c.isPlainValue(t)?w.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=d.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){var e=t?g:y;return new e(this.x,this.y,this,"setPoint")},setPoint:function(){var t=g.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){var e=t?_:b;return new e(this.width,this.height,this,"setSize")},setSize:function(){var t=_.read(arguments);this._fixX&&(this.x+=(this.width-t.width)*this._fixX),this._fixY&&(this.y+=(this.height-t.height)*this._fixY),this.width=t.width,this.height=t.height,this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(t){this._fixW||(this.width-=t-this.x),this.x=t,this._fixX=0},getTop:function(){return this.y},setTop:function(t){this._fixH||(this.height-=t-this.y),this.y=t,this._fixY=0},getRight:function(){return this.x+this.width},setRight:function(t){this._fixX!==s&&1!==this._fixX&&(this._fixW=0),this._fixW?this.x=t-this.width:this.width=t-this.x,this._fixX=1},getBottom:function(){return this.y+this.height},setBottom:function(t){this._fixY!==s&&1!==this._fixY&&(this._fixH=0),this._fixH?this.y=t-this.height:this.height=t-this.y,this._fixY=1},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(t){this.x=t-.5*this.width,this._fixX=.5},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(t){this.y=t-.5*this.height,this._fixY=.5},getCenter:function(t){var e=t?g:y;return new e(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=g.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==s||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(w.read(arguments)):this._containsPoint(g.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=w.read(arguments);return t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x+this.width&&t.y<this.y+this.height},touches:function(){var t=w.read(arguments);return t.x+t.width>=this.x&&t.y+t.height>=this.y&&t.x<=this.x+this.width&&t.y<=this.y+this.height},intersect:function(){var t=w.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),r=Math.min(this.x+this.width,t.x+t.width),i=Math.min(this.y+this.height,t.y+t.height);return new w(e,n,r-e,i-n)},unite:function(){var t=w.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x+t.width),i=Math.max(this.y+this.height,t.y+t.height);return new w(e,n,r-e,i-n)},include:function(){var t=g.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x),i=Math.max(this.y+this.height,t.y);return new w(e,n,r-e,i-n)},expand:function(){var t=_.read(arguments),e=t.width,n=t.height;return new w(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===s?t:e)-this.height)}},c.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var n=t.join(""),r=/^[RL]/.test(n);e>=4&&(t[1]+=r?"Y":"X");var i=t[r?0:1],o=t[r?1:0],a="get"+i,s="get"+o,u="set"+i,l="set"+o,c="get"+n,h="set"+n;this[c]=function(t){var e=t?g:y;return new e(this[a](),this[s](),this,h)},this[h]=function(){var t=g.read(arguments);this[u](t.x),this[l](t.y)}},{beans:!0})),x=w.extend({initialize:function(t,e,n,r,i,o){this.set(t,e,n,r,!0),this._owner=i,this._setter=o},set:function(t,e,n,r,i){return this._x=t,this._y=e,this._width=n,this._height=r,i||this._owner[this._setter](this),this}},new function(){var t=w.prototype;return c.each(["x","y","width","height"],function(t){var e=c.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}},c.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e.changeSelection&&e.changeSelection(2,t)}}))}),E=c.extend({_class:"Matrix",initialize:function t(e){var n=arguments.length,r=!0;if(6===n?this.set.apply(this,arguments):1===n?e instanceof t?this.set(e._a,e._b,e._c,e._d,e._tx,e._ty):Array.isArray(e)?this.set.apply(this,e):r=!1:0===n?this.reset():r=!1,!r)throw new Error("Unsupported matrix parameters")},set:function(t,e,n,r,i,o,a){return this._a=t,this._b=e,this._c=n,this._d=r,this._tx=i,this._ty=o,a||this._changed(),this},_serialize:function(t,e){return c.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new E(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=d.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,!0,c.pick(t,!0),e),this.isIdentity())},translate:function(){var t=g.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=g.read(arguments),e=g.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=g.read(arguments,1),n=e.x,r=e.y,i=Math.cos(t),o=Math.sin(t),a=n-n*i+r*o,s=r-n*o-r*i,u=this._a,l=this._b,c=this._c,h=this._d;return this._a=i*u+o*c,this._b=i*l+o*h,this._c=-o*u+i*c,this._d=-o*l+i*h,this._tx+=a*u+s*c,this._ty+=a*l+s*h,
this._changed(),this},shear:function(){var t=g.read(arguments),e=g.read(arguments,0,{readNull:!0});e&&this.translate(e);var n=this._a,r=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*n,this._d+=t.x*r,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=g.read(arguments),e=g.read(arguments,0,{readNull:!0}),n=Math.PI/180,r=new g(Math.tan(t.x*n),Math.tan(t.y*n));return this.shear(r,e)},append:function(t){if(t){var e=this._a,n=this._b,r=this._c,i=this._d,o=t._a,a=t._c,s=t._b,u=t._d,l=t._tx,c=t._ty;this._a=o*e+s*r,this._c=a*e+u*r,this._b=o*n+s*i,this._d=a*n+u*i,this._tx+=l*e+c*r,this._ty+=l*n+c*i,this._changed()}return this},prepend:function(t){if(t){var e=this._a,n=this._b,r=this._c,i=this._d,o=this._tx,a=this._ty,s=t._a,u=t._c,l=t._b,c=t._d,h=t._tx,f=t._ty;this._a=s*e+u*n,this._c=s*r+u*i,this._b=l*e+c*n,this._d=l*r+c*i,this._tx=s*o+u*a+h,this._ty=l*o+c*a+f,this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,r=this._d,i=this._tx,o=this._ty,a=t*r-e*n,s=null;return a&&!isNaN(a)&&isFinite(i)&&isFinite(o)&&(this._a=r/a,this._b=-e/a,this._c=-n/a,this._d=t/a,this._tx=(n*o-r*i)/a,this._ty=(e*i-t*o)/a,s=this),s},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new E(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(g.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var r=t.x,i=t.y;return e||(e=new g),e.set(r*this._a+i*this._c+this._tx,r*this._b+i*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var r=0,i=2*n;r<i;r+=2){var o=t[r],a=t[r+1];e[r]=o*this._a+a*this._c+this._tx,e[r+1]=o*this._b+a*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,r=e+t.width,i=n+t.height,o=[e,n,r,n,r,i,e,i];return this._transformCoordinates(o,o,4)},_transformBounds:function(t,e,n){for(var r=this._transformCorners(t),i=r.slice(0,2),o=i.slice(),a=2;a<8;a++){var s=r[a],u=1&a;s<i[u]?i[u]=s:s>o[u]&&(o[u]=s)}return e||(e=new w),e.set(i[0],i[1],o[0]-i[0],o[1]-i[1],n)},inverseTransform:function(){return this._inverseTransform(g.read(arguments))},_inverseTransform:function(t,e,n){var r=this._a,i=this._b,o=this._c,a=this._d,s=this._tx,u=this._ty,l=r*a-i*o,c=null;if(l&&!isNaN(l)&&isFinite(s)&&isFinite(u)){var h=t.x-this._tx,f=t.y-this._ty;e||(e=new g),c=e.set((h*a-f*o)/l,(f*r-h*i)/l,n)}return c},decompose:function(){var t,e,n,r=this._a,i=this._b,o=this._c,a=this._d,s=r*a-i*o,u=Math.sqrt,l=Math.atan2,c=180/Math.PI;if(0!==r||0!==i){var h=u(r*r+i*i);t=Math.acos(r/h)*(i>0?1:-1),e=[h,s/h],n=[l(r*o+i*a,h*h),0]}else if(0!==o||0!==a){var f=u(o*o+a*a);t=Math.asin(o/f)*(a>0?1:-1),e=[s/f,f],n=[0,l(r*o+i*a,f*f)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*c,scaling:new g(e),skewing:new g(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new g(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},c.each(["a","b","c","d","tx","ty"],function(t){var e=c.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}},{})),C=c.extend({_class:"Line",initialize:function(t,e,n,r,i){var o=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=r,o=i):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,o=n),o||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new g(this._px,this._py)},getVector:function(){return new g(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return C.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return C.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(C.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0))},isCollinear:function(t){return g.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return g.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,r,i,o,a,s,u,l){u||(n-=t,r-=e,a-=i,s-=o);var c=n*s-r*a;if(!m.isZero(c)){var h=t-i,f=e-o,p=(a*f-s*h)/c,d=(n*f-r*h)/c,v=1e-12,y=-v,_=1+v;if(l||y<p&&p<_&&y<d&&d<_)return l||(p=p<=0?0:p>=1?1:p),new g(t+p*n,e+p*r)}},getSide:function(t,e,n,r,i,o,a,s){a||(n-=t,r-=e);var u=i-t,l=o-e,c=u*r-l*n;return 0!==c||s||(c=(u*n+u*n)/(n*n+r*r),c>=0&&c<=1&&(c=0)),c<0?-1:c>0?1:0},getSignedDistance:function(t,e,n,r,i,o,a){return a||(n-=t,r-=e),0===n?r>0?i-t:t-i:0===r?n<0?o-e:e-o:((i-t)*r-(o-e)*n)/Math.sqrt(n*n+r*r)}}}),S=p.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){p.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Y(null,null,this),this._view=J.create(this,t||at.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return c.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var r=this._changes;if(r&&e){var i=this._changesById,o=e._id,a=i[o];a?a.flags|=t:r.push(i[o]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return 0===this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.initialize(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new T({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:R,match:function(n){var r=n._definition,i=r._id;return e[i]||(e[i]=!0,t.push(r)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var r=t[n],i=r._selection;1&i&&r.isInserted()?e.push(r):i||this._updateSelection(r)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(s,t)},insertLayer:function(t,e){if(e instanceof T){e._remove(!1,!0),c.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,n,r){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(s,new T(M.NO_INSERT),!0,!0)).insertChild(t,e,n),r&&e.activate&&e.activate(),e},getItems:function(t){return M._getItems(this,t)},getItem:function(t){return M._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return c.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var r in n){var i=n[r];for(var o in e){var a=e[o];a&&a!=n&&delete a[i._id]}i.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var r=this._children,i=new c({offset:new g(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new E],updateMatrix:!0}),o=0,a=r.length;o<a;o++)r[o].draw(t,i);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var s=this._selectionItems,u=this._scope.settings.handleSize,l=this._updateVersion;for(var h in s)s[h]._drawSelection(t,e,u,s,l);t.restore()}}}),M=c.extend(h,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=c.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new E,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}}},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return c.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var n=t&&c.isPlainObject(t),r=n&&t.internal===!0,i=this._matrix=new E,a=n&&t.project||o.project,u=o.settings;return this._id=r?null:v.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&u.applyMatrix,e&&i.translate(e),i._owner=this,this._style=new Y(a._currentStyle,this,a),r||n&&t.insert===!1||!u.insertItems&&(!n||t.insert!==!0)?this._setProject(a):(n&&t.parent||a)._insertItem(s,this,!0,!0),n&&t!==M.NO_INSERT&&c.filter(this,t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){function n(n){for(var o in n){var a=i[o];c.equals(a,"leading"===o?1.2*n.fontSize:n[o])||(r[o]=c.serialize(a,t,"data"!==o,e))}}var r={},i=this;return n(this._serializeFields),this instanceof P||n(this._style._defaults),[this._class,r]},_changed:function(t){var e=this._symbol,n=this._parent||e,r=this._project;8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=s),n&&40&t&&M._clearBoundsCache(n),2&t&&M._clearBoundsCache(this),r&&r._changed(t,this),e&&e._changed(t)},set:function(t){return t&&this._set(t),this},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var n=e._children,r=e._namedChildren;(r[t]=r[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||s,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},c.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=c.capitalize(t),t="_"+t;this["get"+e]=function(){return this[t]},this["set"+e]=function(e){e!=this[t]&&(this[t]=e,this._changed("_locked"===t?128:129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(129))}},changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,r=e.length;n<r;n++)e[n].setSelected(t);this.changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,r=t.length;n<r;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,r=e.length;n<r;n++)e[n].setFullySelected(t);this.changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,n=t?g:y;if(!e){var r=this._pivot;e=this._position=r?this._matrix._transformPoint(r):this.getBounds().getCenter(!0)}return new n(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(g.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(t){var e=this._pivot;if(e){var n=t?g:y;e=new n(e.x,e.y,this,"setPivot")}return e},setPivot:function(){this._pivot=g.read(arguments,0,{clone:!0,readNull:!0}),this._position=s}},c.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(e){return this.getBounds(e,t)}},{beans:!0,getBounds:function(t,e){var n=e||t instanceof E,r=c.set({},n?e:t,this._boundsOptions);r.stroke&&!this.getStrokeScaling()||(r.cacheItem=this);var i=this._getCachedBounds(n&&t,r);return 0===arguments.length?new x(i.x,i.y,i.width,i.height,this,"setBounds"):i},setBounds:function(){var t=w.read(arguments),e=this.getBounds(),n=this._matrix,r=new E,i=t.getCenter();r.translate(i),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.initialize(n._backup||(new E).translate(n.getTranslation())),e=this.getBounds()),r.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),i=e.getCenter(),r.translate(-i.x,-i.y),this.transform(r)},_getBounds:function(t,e){var n=this._children;return n&&0!==n.length?(M._updateBoundsCache(this,e.cacheItem),M._getBounds(n,t,e)):new w},_getCachedBounds:function(t,e){t=t&&t._orNullIfIdentity();var n=e.internal,r=e.cacheItem,i=n?null:this._matrix._orNullIfIdentity(),o=r&&(!t||t.equals(i))&&[e.stroke?1:0,e.handle?1:0,n?1:0].join("");if(M._updateBoundsCache(this._parent||this._symbol,r),o&&this._bounds&&o in this._bounds)return this._bounds[o].rect.clone();var a=this._getBounds(t||i,e);if(o){this._bounds||(this._bounds={});this._bounds[o]={rect:a.clone(),internal:e.internal}}return a},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,r=n?n.getViewMatrix().invert():t;return r&&r._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,r=t._boundsCache=t._boundsCache||{ids:{},list:[]};r.ids[n]||(r.list.push(e),r.ids[n]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=s;for(var n=0,r=e.list,i=r.length;n<i;n++){var o=r[n];o!==t&&(o._bounds=o._position=s,o._boundsCache&&M._clearBoundsCache(o))}}},_getBounds:function(t,e,n){var r=1/0,i=-r,o=r,a=i;n=n||{};for(var s=0,u=t.length;s<u;s++){var l=t[s];if(l._visible&&!l.isEmpty()){var c=l._getCachedBounds(e&&e.appended(l._matrix),n);r=Math.min(c.x,r),o=Math.min(c.y,o),i=Math.max(c.x+c.width,i),a=Math.max(c.y+c.height,a)}}return isFinite(r)?new w(r,o,i-r,a-o):new w}}}),{beans:!0,_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(t){var e=this._decompose(),n=e&&e.scaling,r=t?g:y;return n&&new r(n.x,n.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=g.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix,n=this._project._updateVersion;if(e&&e._updateVersion!==n&&(e=null),!e){e=this._globalMatrix=this._matrix.clone();var r=this._parent;r&&e.prepend(r.getGlobalMatrix(!0)),e._updateVersion=n}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,r=0,i=n&&n.length;r<i;r++)n[r]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof T)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t,e){this.removeChildren(),this.addChildren(t,e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return c.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(M.NO_INSERT),n=this._children,r=c.pick(t?t.insert:s,t===s||t===!0),i=c.pick(t?t.deep:s,!0);n&&e.copyAttributes(this),n&&!i||e.copyContent(this),n||e.copyAttributes(this),r&&e.insertAbove(this);var o=this._name,a=this._parent;if(o&&a){for(var n=a._children,u=o,l=1;n[o];)o=u+" "+l++;o!==u&&e.setName(o)}return e},copyContent:function(t){for(var e=t._children,n=0,r=e&&e.length;n<r;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,i=n.length;r<i;r++){var o=n[r];t.hasOwnProperty(o)&&(this[o]=t[o])}e||this._matrix.initialize(t._matrix),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var a=t._data,s=t._name;this._data=a?c.clone(a):null,s&&this.setName(s)},rasterize:function(t,e){var n=this.getStrokeBounds(),r=(t||this.getView().getResolution())/72,i=n.getTopLeft().floor(),o=n.getBottomRight().ceil(),a=new _(o.subtract(i)),u=new A(M.NO_INSERT);if(!a.isZero()){var l=at.getCanvas(a.multiply(r)),h=l.getContext("2d"),f=(new E).scale(r).translate(i.negate());h.save(),f.applyToContext(h),this.draw(h,new c({matrices:[f]})),h.restore(),u.setCanvas(l)}return u.transform((new E).translate(i.add(a.divide(2))).scale(1/r)),(e===s||e)&&u.insertAbove(this),u},contains:function(){return!!this._contains(this._matrix._inverseTransform(g.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return w.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new F.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof M&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(g.read(arguments),I.getOptions(arguments))}function e(){var t=g.read(arguments),e=I.getOptions(arguments),n=e.match,r=[];return e=c.set({},e,{match:function(t){n&&!n(t)||r.push(t)}}),this._hitTest(t,e),r}function n(t,e,n,r){var i=this._children;if(i)for(var o=i.length-1;o>=0;o--){var a=i[o],s=a!==r&&a._hitTest(t,e,n);if(s)return s}return null}return S.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){function r(t){return!d||t&&d(t)?t:null}function i(e,n){var r=h["get"+n]();if(t.subtract(r).divide(l).length<=1)return new I(e,m,{name:c.hyphenate(n),point:r})}if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var o=this._matrix,a=n?n.appended(o):this.getGlobalMatrix().prepend(this.getView()._matrix),s=this.getStrokeScaling()?null:a.inverted()._shiftless(),u=Math.max(e.tolerance,1e-6),l=e._tolerancePadding=new _(F._getStrokePadding(u,s));if(t=o._inverseTransform(t),!t||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(l.multiply(2))._containsPoint(t))return null;var h,f,p=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==c.hyphenate(this._class)||e.class&&!(this instanceof e.class)),d=e.match,m=this;if(p&&(e.center||e.bounds)&&this._parent){if(h=this.getInternalBounds(),e.center&&(f=i("center","Center")),!f&&e.bounds)for(var v=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],g=0;g<8&&!f;g++)f=i("bounds",v[g]);f=r(f)}return f||(f=this._hitTestChildren(t,e,a)||p&&r(this._hitTestSelf(t,e,a,s))||null),f&&f.point&&(f.point=o.transform(f.point)),f},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new I("fill",this)},matches:function(t,e){function n(t,e){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=e[r];if(c.isPlainObject(i)&&c.isPlainObject(o)){if(!n(i,o))return!1}else if(!c.equals(i,o))return!1}return!0}var r=typeof t;if("object"===r){for(var i in t)if(t.hasOwnProperty(i)&&!this.matches(i,t[i]))return!1;return!0}if("function"===r)return t(this);if("match"===t)return e(this);var o=/^(empty|editable)$/.test(t)?this["is"+c.capitalize(t)]():"type"===t?c.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;o=this._class}if("function"==typeof e)return!!e(o);if(e){if(e.test)return e.test(o);if(c.isPlainObject(e))return n(e,o)}return c.equals(o,e)},getItems:function(t){return M._getItems(this,t,this._matrix)},getItem:function(t){return M._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,r,i,o){if(!i){var a="object"==typeof n&&n,s=a&&a.overlapping,u=a&&a.inside,l=s||u,h=l&&w.read([l]);i={items:[],recursive:a&&a.recursive!==!1,inside:!!u,overlapping:!!s,rect:h,path:s&&new F.Rectangle({rectangle:h,insert:!1})},a&&(n=c.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var f=e._children,p=i.items,h=i.rect;r=h&&(r||new E);for(var d=0,m=f&&f.length;d<m;d++){var v=f[d],g=r&&r.appended(v._matrix),y=!0;if(h){var l=v.getBounds(g);if(!h.intersects(l))continue;h.contains(l)||i.overlapping&&(l.contains(h)||i.path.intersects(v,g))||(y=!1)}if(y&&v.matches(n)&&(p.push(v),o))break;if(i.recursive!==!1&&t(v,n,g,i,o),o&&p.length>0)break}return p}}},{importJSON:function(t){var e=c.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t,e){return this.insertChild(s,t,e)},insertChild:function(t,e,n){var r=e?this.insertChildren(t,[e],n):null;return r&&r[0]},addChildren:function(t,e){return this.insertChildren(this._children.length,t,e)},insertChildren:function(t,e,n,r){var i=this._children;if(i&&e&&e.length>0){e=Array.prototype.slice.apply(e);for(var o=e.length-1;o>=0;o--){var a=e[o];a&&(!r||a instanceof r)?a._remove(!1,!0):e.splice(o,1)}c.splice(i,e,t,0);for(var s=this._project,u=s._changes,o=0,l=e.length;o<l;o++){var a=e[o],h=a._name;a._parent=this,a._setProject(s,!0),h&&a.setName(h),u&&this._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e,n){var r=this;if(r!==t){var i=t&&t._getOwner();i?(r._remove(!1,!0),i._insertItem(t._index+e,r,n)):r=null}return r},insertAbove:function(t,e){return this._insertAt(t,1,e)},insertBelow:function(t,e){return this._insertAt(t,0,e)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(s,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",copyTo:function(t){return t._insertItem(s,this.clone(!1))},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,r=this._name,i=n[r],o=i?i.indexOf(this):-1;o!==-1&&(e[r]==this&&delete e[r],i.splice(o,1),i.length?e[r]=i[0]:delete n[r])}},_remove:function(t,e){var n=this._getOwner(),r=this._project,i=this._index;return!!n&&(null!=i&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),c.splice(n._children,null,i,1)),this._name&&this._removeNamed(),this._installEvents(!1),t&&r._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=c.pick(e,this._children.length);for(var n=c.splice(this._children,null,t,e-t),r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){return!this._children||0===this._children.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do e.unshift(t);while(t=t._parent);return e}for(var n=e(this),r=e(t),i=0,o=Math.min(n.length,r.length);i<o;i++)if(n[i]!=r[i])return n[i]._index<r[i]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return this._getOrder(t)===-1},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},c.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=(e?c:g).read(arguments),r=g.read(arguments,0,{readNull:!0});return this.transform((new E)[t](n,r||this.getPosition(!0)))}},{translate:function(){var t=new E;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n,r){t&&t.isIdentity()&&(t=null);var i=this._matrix,o=(e||this._applyMatrix)&&(!i.isIdentity()||t||e&&n&&this._children);if(!t&&!o)return this;if(t&&(!t.isInvertible()&&i.isInvertible()&&(i._backup=i.getValues()),i.prepend(t)),o=o&&this._transformContent(i,n,r)){var a=this._pivot,s=this._style,u=s.getFillColor(!0),l=s.getStrokeColor(!0);a&&i._transformPoint(a,a,!0),u&&u.transform(i),l&&l.transform(i),i.reset(!0),r&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,h=this._position;this._changed(9);var f=c&&t&&t.decompose();if(f&&!f.shearing&&f.rotation%90===0){for(var p in c){var d=c[p];if(o||!d.internal){var m=d.rect;t._transformBounds(m,m)}}var v=this._boundsGetter,m=c[v&&v.getBounds||v||"getBounds"];m&&(this._position=m.getCenter(!0)),this._bounds=c}else t&&h&&(this._position=t._transformPoint(h,h));return this},_transformContent:function(t,e,n){var r=this._children;if(r){for(var i=0,o=r.length;i<o;i++)r[i].transform(t,!0,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(g.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(g.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(g.read(arguments))},localToParent:function(){return this._matrix._transformPoint(g.read(arguments))},fitBounds:function(t,e){t=w.read(arguments);var n=this.getBounds(),r=n.height/n.width,i=t.height/t.width,o=(e?r>i:r<i)?t.width/n.width:t.height/n.height,a=new w(new g,new _(n.width*o,n.height*o));a.setCenter(t.getCenter()),this.setBounds(a)}}),{_setStyles:function(t,e,n){var r=this._style;if(r.hasFill()&&(t.fillStyle=r.getFillColor().toCanvasStyle(t)),r.hasStroke()){t.strokeStyle=r.getStrokeColor().toCanvasStyle(t),t.lineWidth=r.getStrokeWidth();var i=r.getStrokeJoin(),a=r.getStrokeCap(),s=r.getMiterLimit();if(i&&(t.lineJoin=i),a&&(t.lineCap=a),s&&(t.miterLimit=s),o.support.nativeDash){var u=r.getDashArray(),l=r.getDashOffset();u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=l):(t.mozDash=u,t.mozDashOffset=l))}}if(r.hasShadow()){var c=e.pixelRatio||1,h=n._shiftless().prepend((new E).scale(c,c)),f=h.transform(new g(r.getShadowBlur(),0)),p=h.transform(this.getShadowOffset());t.shadowColor=r.getShadowColor().toCanvasStyle(t),t.shadowBlur=f.getLength(),t.shadowOffsetX=p.x,t.shadowOffsetY=p.y}},draw:function(t,e,n){var r=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var i=e.matrices,o=e.viewMatrix,a=this._matrix,s=i[i.length-1].appended(a);if(s.isInvertible()){o=o?o.appended(s):s,i.push(s),e.updateMatrix&&(s._updateVersion=r,this._globalMatrix=s);var u,l,c,h=this._blendMode,f=this._opacity,p="normal"===h,d=st.nativeModes[h],m=p&&1===f||e.dontStart||e.clip||(d||p&&f<1)&&this._canComposite(),v=e.pixelRatio||1;if(!m){var g=this.getStrokeBounds(o);if(!g.width||!g.height)return;c=e.offset,l=e.offset=g.getTopLeft().floor(),u=t,t=at.getContext(g.getSize().ceil().add(1).multiply(v)),1!==v&&t.scale(v,v)}t.save();var y=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&o,_=!m&&e.clipItem,b=!y||_;if(m?(t.globalAlpha=f,d&&(t.globalCompositeOperation=h)):b&&t.translate(-l.x,-l.y),b&&(m?a:o).applyToContext(t),_&&e.clipItem.draw(t,e.extend({clip:!0})),y){t.setTransform(v,0,0,v,0,0);var w=e.offset;w&&t.translate(-w.x,-w.y)}this._draw(t,e,o,y),t.restore(),i.pop(),e.clip&&!e.dontFinish&&t.clip(),m||(st.process(h,t,u,f,l.subtract(c).multiply(v)),at.release(t),e.offset=c)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof U)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,r,i){var o=this._selection,a=1&o,s=2&o||a&&this._selectBounds,u=4&o;if(this._drawSelected||(a=!1),(a||s||u)&&this._isUpdated(i)){var l,c=this.getSelectedColor(!0)||(l=this.getLayer())&&l.getSelectedColor(!0),h=e.appended(this.getGlobalMatrix(!0)),f=n/2;if(t.strokeStyle=t.fillStyle=c?c.toCanvasStyle(t):"#009dec",a&&this._drawSelected(t,h,r),u){var p=this.getPosition(!0),d=p.x,m=p.y;t.beginPath(),t.arc(d,m,f,0,2*Math.PI,!0),t.stroke();for(var v=[[0,-1],[1,0],[0,1],[-1,0]],g=f,y=n+1,_=0;_<4;_++){var b=v[_],w=b[0],x=b[1];t.moveTo(d+w*g,m+x*g),t.lineTo(d+w*y,m+x*y),t.stroke()}}if(s){var E=h._transformCorners(this.getInternalBounds());t.beginPath();
for(var _=0;_<8;_++)t[0===_?"moveTo":"lineTo"](E[_],E[++_]);t.closePath(),t.stroke();for(var _=0;_<8;_++)t.fillRect(E[_]-f,E[++_]-f,n,n)}}},_canComposite:function(){return!1}},c.each(["down","drag","up","move"],function(t){this["removeOn"+c.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,r=this._project,i=r._removeSets=r._removeSets||{};i[n]=i[n]||{},i[n][this._id]=this}return this}})),P=M.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),1026&e&&(this._clipItem=s)},_getClipItem:function(){var t=this._clipItem;if(t===s){t=null;for(var e=this._children,n=0,r=e.length;n<r;n++)if(e[n]._clipMask){t=e[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var r=this._getClipItem();return r?r._getCachedBounds(e&&e.appended(r._matrix),c.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,r){var i=this._getClipItem();return(!i||i.contains(e))&&t.base.call(this,e,n,r,i)},_draw:function(t,e){var n=e.clip,r=!n&&this._getClipItem();e=e.extend({clipItem:r,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):r&&r.draw(t,e.extend({clip:!0}));for(var i=this._children,o=0,a=i.length;o<a;o++){var s=i[o];s!==r&&s.draw(t,e)}}}),T=P.extend({_class:"Layer",initialize:function(){P.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),O=M.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t){this._initialize(t)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&c.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new b(t.width,t.height,this,"setSize")},setSize:function(){var t=_.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,r=t.height;if("rectangle"===e){var i=_.min(this._radius,t.divide(2));this._radius.set(i.width,i.height)}else"circle"===e?(n=r=(n+r)/2,this._radius=n/2):"ellipse"===e&&this._radius.set(n/2,r/2);this._size.set(n,r),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new b(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size.set(n,n)}else if(t=_.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t.width,t.height),"rectangle"===e){var n=_.max(this._size,t.multiply(2));this._size.set(n.width,n.height)}else"ellipse"===e&&this._size.set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(F[c.capitalize(this._type)])({center:new g,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),o.settings.applyMatrix&&e.setApplyMatrix(!0),(t===s||t)&&e.insertAbove(this),e},toShape:"#clone",_draw:function(t,e,n,r){var i=this._style,o=i.hasFill(),a=i.hasStroke(),s=e.dontFinish||e.clip,u=!r;if(o||a||s){var l=this._type,c=this._radius,h="circle"===l;if(e.dontStart||t.beginPath(),u&&h)t.arc(0,0,c,0,2*Math.PI,!0);else{var f=h?c:c.width,p=h?c:c.height,d=this._size,m=d.width,v=d.height;if(u&&"rectangle"===l&&0===f&&0===p)t.rect(-m/2,-v/2,m,v);else{var g=m/2,y=v/2,_=.44771525016920644,b=f*_,w=p*_,x=[-g,-y+p,-g,-y+w,-g+b,-y,-g+f,-y,g-f,-y,g-b,-y,g,-y+w,g,-y+p,g,y-p,g,y-w,g-b,y,g-f,y,-g+f,y,-g+b,y,-g,y-w,-g,y-p];r&&r.transform(x,x,32),t.moveTo(x[0],x[1]),t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]),g!==f&&t.lineTo(x[8],x[9]),t.bezierCurveTo(x[10],x[11],x[12],x[13],x[14],x[15]),y!==p&&t.lineTo(x[16],x[17]),t.bezierCurveTo(x[18],x[19],x[20],x[21],x[22],x[23]),g!==f&&t.lineTo(x[24],x[25]),t.bezierCurveTo(x[26],x[27],x[28],x[29],x[30],x[31])}}t.closePath()}s||!o&&!a||(this._setStyles(t,e,n),o&&(t.fill(i.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new w(this._size).setCenter(0,0),r=this._style,i=e.stroke&&r.hasStroke()&&r.getStrokeWidth();return t&&(n=t._transformBounds(n)),i?n.expand(F._getStrokePadding(i,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var r=t._radius;if(!r.isZero())for(var i=t._size.divide(2),o=0;o<4;o++){var a=new g(1&o?1:-1,o>1?1:-1),s=a.multiply(i),u=s.subtract(a.multiply(r)),l=new w(s,u);if((n?l.expand(n):l).contains(e))return u}}function e(t,e,n,r){var i=t.divide(e);return(!r||i.quadrant===r)&&i.subtract(i.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if("rectangle"===this._type){var r=t(this,n);return r?n.subtract(r).divide(this._radius).getLength()<=1:e.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(r,i,o,a){var s=!1,u=this._style,l=i.stroke&&u.hasStroke(),c=i.fill&&u.hasFill();if(l||c){var h=this._type,f=this._radius,p=l?u.getStrokeWidth()/2:0,d=i._tolerancePadding.add(F._getStrokePadding(p,!u.getStrokeScaling()&&a));if("rectangle"===h){var m=d.multiply(2),v=t(this,r,m);if(v)s=e(r.subtract(v),f,d,v.getQuadrant());else{var g=new w(this._size).setCenter(0,0),y=g.expand(m),_=g.expand(m.negate());s=y._containsPoint(r)&&!_._containsPoint(r)}}else s=e(r,f,d)}return s?new I(l?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,r,i){var o=new O(c.getNamed(i));return o._type=t,o._size=n,o._radius=r,o.translate(e)}return{Circle:function(){var e=g.readNamed(arguments,"center"),n=c.readNamed(arguments,"radius");return t("circle",e,new _(2*n),n,arguments)},Rectangle:function(){var e=w.readNamed(arguments,"rectangle"),n=_.min(_.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),n,arguments)},Ellipse:function(){var e=O._readEllipse(arguments),n=e.radius;return t("ellipse",e.center,n.multiply(2),n,arguments)},_readEllipse:function(t){var e,n;if(c.hasNamed(t,"radius"))e=g.readNamed(t,"center"),n=_.readNamed(t,"radius");else{var r=w.readNamed(t,"rectangle");e=r.getCenter(!0),n=r.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),A=M.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},initialize:function(t,e){if(!this._initialize(t,e!==s&&g.read(arguments,1))){var n="string"==typeof t?l.getElementById(t):t;n?this.setImage(n):this.setSource(t)}this._size||(this._size=new _,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var r=at.getCanvas(t._size);r.getContext("2d").drawImage(n,0,0),this._setImage(r)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new b(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=_.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(at.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&at.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new g(0,0).transform(t),n=new g(1,0).transform(t).subtract(e),r=new g(0,1).transform(t).subtract(e);return new _(72/n.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){function e(t){var e=n.getView(),r=t&&t.type||"load";e&&n.responds(r)&&(o=e._scope,n.emit(r,new $(t)))}var n=this;this._setImage(t),this._loaded?setTimeout(e,0):t&&Z.add(t,{load:function(r){n._setImage(t),e(r)},error:e})},_setImage:function(t){this._canvas&&at.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new _(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var t=at.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){at.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new u.Image,n=this._crossOrigin;n&&(e.crossOrigin=n),e.src=t,this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=w.read(arguments),e=at.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=w.read(arguments),e=new A(M.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=g.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof B?(n=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new w(t):"x"in t&&(e=new w(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var r=32,i=Math.min(e.width,r),o=Math.min(e.height,r),a=A._sampleContext;a?a.clearRect(0,0,r+1,r+1):a=A._sampleContext=at.getContext(new _(r)),a.save();var s=(new E).scale(i/e.width,o/e.height).translate(-e.x,-e.y);s.applyToContext(a),n&&n.draw(a,new c({clip:!0,matrices:[s]})),this._matrix.applyToContext(a);var u=this.getElement(),l=this._size;u&&a.drawImage(u,-l.width/2,-l.height/2),a.restore();for(var h=a.getImageData(.5,.5,Math.ceil(i),Math.ceil(o)).data,f=[0,0,0],p=0,d=0,m=h.length;d<m;d+=4){var v=h[d+3];p+=v,v/=255,f[0]+=h[d]*v,f[1]+=h[d+1]*v,f[2]+=h[d+2]*v}for(var d=0;d<3;d++)f[d]/=p;return p?W.read(f):null},getPixel:function(){var t=g.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new W("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=g.read(arguments),e=W.read(arguments),n=e._convert("rgb"),r=e._alpha,i=this.getContext(!0),o=i.createImageData(1,1),a=o.data;a[0]=255*n[0],a[1]=255*n[1],a[2]=255*n[2],a[3]=null!=r?255*r:255,i.putImageData(o,t.x,t.y)},createImageData:function(){var t=_.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=w.read(arguments);return t.isEmpty()&&(t=new w(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=g.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new w(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new I("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),R=M.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==s&&g.read(arguments,1))||this.setDefinition(t instanceof L?t:new L(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n,r){var i=this._definition._item._hitTest(t,e,n);return i&&(i.item=this),i},_draw:function(t,e){this._definition._item.draw(t,e)}}),L=c.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=v.get(),this.project=o.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return c.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&M._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new g),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new R(this,t)},clone:function(){return new L(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),I=c.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&(n.enumerable=!0,this.inject(n))},statics:{getOptions:function(t){var e=t&&c.read(t);return c.set({type:null,tolerance:o.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),k=c.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,n,r,i,o){var a,u,l,c,h=arguments.length;0===h||(1===h?t&&"point"in t?(a=t.point,u=t.handleIn,l=t.handleOut,c=t.selection):a=t:null==t||"object"==typeof t?(a=t,u=e,l=n,c=r):(a=t!==s?[t,e]:null,u=n!==s?[n,r]:null,l=i!==s?[i,o]:null)),new D(a,this,"_point"),new D(u,this,"_handleIn"),new D(l,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(t,e){var n=this._point,r=this._selection,i=r||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return r&&i.push(r),c.serialize(i,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,r=e._curves,i=this._index;r&&(t&&t!==this._point&&t!==this._handleIn||!(n=i>0?r[i-1]:e._closed?r[r.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=r[i])||n._changed()),e._changed(25)}},getPoint:function(){return this._point},setPoint:function(){var t=g.read(arguments);this._point.set(t.x,t.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(){var t=g.read(arguments);this._handleIn.set(t.x,t.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(){var t=g.read(arguments);this._handleOut.set(t.x,t.y)},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},clearHandles:function(){this._handleIn.set(0,0),this._handleOut.set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(129))},changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this.changeSelection(7,t)},getIndex:function(){return this._index!==s?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new N(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,n){var r=t||{},i=r.type,o=r.factor,a=this.getPrevious(),u=this.getNext(),l=(a||this)._point,c=this._point,h=(u||this)._point,f=l.getDistance(c),p=c.getDistance(h);if(i&&"catmull-rom"!==i){if("geometric"!==i)throw new Error("Smoothing method '"+i+"' not supported.");if(a&&u){var d=l.subtract(h),m=o===s?.4:o,v=m*f/(f+p);e||this.setHandleIn(d.multiply(v)),n||this.setHandleOut(d.multiply(v-m))}}else{var y=o===s?.5:o,_=Math.pow(f,y),b=_*_,w=Math.pow(p,y),x=w*w;if(!e&&a){var E=2*x+3*w*_+b,C=3*w*(w+_);this.setHandleIn(0!==C?new g((x*l._x+E*c._x-b*h._x)/C-c._x,(x*l._y+E*c._y-b*h._y)/C-c._y):new g)}if(!n&&u){var E=2*b+3*_*w+x,C=3*_*(_+w);this.setHandleOut(0!==C?new g((b*h._x+E*c._x-x*l._x)/C-c._x,(b*h._y+E*c._y-x*l._y)/C-c._y):new g)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return 0===this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t._x,r=t._y;t.set(e._x,e._y),e.set(n,r)},reversed:function(){return new k(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new k(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var r=1-n,i=n,o=t._point,a=e._point,s=t._handleIn,u=e._handleIn,l=e._handleOut,c=t._handleOut;this._point.set(r*o._x+i*a._x,r*o._y+i*a._y,!0),this._handleIn.set(r*s._x+i*u._x,r*s._y+i*u._y,!0),this._handleOut.set(r*c._x+i*l._x,r*c._y+i*l._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var r=this._point,i=n&&this._handleIn.isZero()?null:this._handleIn,o=n&&this._handleOut.isZero()?null:this._handleOut,a=r._x,s=r._y,u=2;return e[0]=a,e[1]=s,i&&(e[u++]=i._x+a,e[u++]=i._y+s),o&&(e[u++]=o._x+a,e[u++]=o._y+s),t&&(t._transformCoordinates(e,e,u/2),a=e[0],s=e[1],n?(r._x=a,r._y=s,u=2,i&&(i._x=e[u++]-a,i._y=e[u++]-s),o&&(o._x=e[u++]-a,o._y=e[u++]-s)):(i||(e[u++]=a,e[u++]=s),o||(e[u++]=a,e[u++]=s))),e}}),D=g.extend({initialize:function(t,e,n){var r,i,o;if(t)if((r=t[0])!==s)i=t[1];else{var a=t;(r=a.x)===s&&(a=g.read(arguments),r=a.x),i=a.y,o=a.selected}else r=i=0;this._x=r,this._y=i,this._owner=e,e[n]=this,o&&this.setSelected(!0)},set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){return m.isZero(this._x)&&m.isZero(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner.changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),j=c.extend({_class:"Curve",initialize:function(t,e,n,r,i,o,a,s){var u,l,c,h,f,p,d=arguments.length;3===d?(this._path=t,u=e,l=n):0===d?(u=new k,l=new k):1===d?"segment1"in t?(u=new k(t.segment1),l=new k(t.segment2)):"point1"in t?(c=t.point1,f=t.handle1,p=t.handle2,h=t.point2):Array.isArray(t)&&(c=[t[0],t[1]],h=[t[6],t[7]],f=[t[2]-t[0],t[3]-t[1]],p=[t[4]-t[6],t[5]-t[7]]):2===d?(u=new k(t),l=new k(e)):4===d?(c=t,f=e,p=n,h=r):8===d&&(c=[t,e],h=[a,s],f=[n-t,r-e],p=[i-a,o-s]),this._segment1=u||new k(c,null,f),this._segment2=l||new k(h,p,null)},_serialize:function(t,e){return c.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=s},clone:function(){return new j(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;t=e.remove(),t&&this._segment1._handleOut.set(n.x,n.y)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){var t=g.read(arguments);this._segment1._point.set(t.x,t.y)},getPoint2:function(){return this._segment2._point},setPoint2:function(){var t=g.read(arguments);this._segment2._point.set(t.x,t.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){var t=g.read(arguments);this._segment1._handleOut.set(t.x,t.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){var t=g.read(arguments);this._segment2._handleIn.set(t.x,t.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return 0===this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return j.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new g(t[n],t[n+1]));return e},getLength:function(){return null==this._length&&(this._length=j.getLength(this.getValues(),0,1)),this._length},getArea:function(){return j.getArea(this.getValues())},getLine:function(){return new C(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new j(j.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return j.getLength(this.getValues(),t,e)},getIntersections:function(t){return j._getIntersections(this.getValues(),t&&t!==this?t.getValues():null,this,t,[],{})},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:t)},divideAtTime:function(t,e){var n=4e-7,r=1-n,i=null;if(t>=n&&t<=r){var o=j.subdivide(this.getValues(),t),a=o[0],s=o[1],u=e||this.hasHandles(),l=this._segment1,c=this._segment2,h=this._path;u&&(l._handleOut.set(a[2]-a[0],a[3]-a[1]),c._handleIn.set(s[4]-s[6],s[5]-s[7]));var f=a[6],p=a[7],d=new k(new g(f,p),u&&new g(a[4]-f,a[5]-p),u&&new g(s[2]-f,s[3]-p));h?(h.insert(l._index+1,d),i=this.getNext()):(this._segment2=d,this._changed(),i=new j(d,c))}return i},splitAt:function(t){return this._path?this._path.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===s?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===s?.5:e?t:this.getTimeAt(t))},reversed:function(){return new j(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut.set(0,0),this._segment2._handleIn.set(0,0)},statics:{getValues:function(t,e,n){var r=t._point,i=t._handleOut,o=e._handleIn,a=e._point,s=[r._x,r._y,r._x+i._x,r._y+i._y,a._x+o._x,a._y+o._y,a._x,a._y];return n&&n._transformCoordinates(s,s,4),s},subdivide:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],l=t[6],c=t[7];e===s&&(e=.5);var h=1-e,f=h*n+e*i,p=h*r+e*o,d=h*i+e*a,m=h*o+e*u,v=h*a+e*l,g=h*u+e*c,y=h*f+e*d,_=h*p+e*m,b=h*d+e*v,w=h*m+e*g,x=h*y+e*b,E=h*_+e*w;return[[n,r,f,p,y,_,x,E],[x,E,b,w,v,g,l,c]]},solveCubic:function(t,e,n,r,i,o){var a=t[e],s=t[e+2],u=t[e+4],l=t[e+6],c=0;if(!(a<n&&l<n&&s<n&&u<n||a>n&&l>n&&s>n&&u>n)){var h=3*(s-a),f=3*(u-s)-h,p=l-a-h-f;c=m.solveCubic(p,f,h,a-n,r,i,o)}return c},getTimeOf:function(t,e){var n=new g(t[0],t[1]),r=new g(t[6],t[7]),i=1e-12,o=e.isClose(n,i)?0:e.isClose(r,i)?1:null;if(null!==o)return o;for(var a=[e.x,e.y],s=[],u=2e-7,l=0;l<2;l++)for(var c=j.solveCubic(t,l,a[l],s,0,1),h=0;h<c;h++)if(o=s[h],e.isClose(j.getPoint(t,o),u))return o;return e.isClose(n,u)?0:e.isClose(r,u)?1:null},getNearestTime:function(t,e){function n(n){if(n>=0&&n<=1){var r=e.getDistance(j.getPoint(t,n),!0);if(r<f)return f=r,p=n,!0}}if(j.isStraight(t)){var r=t[0],i=t[1],o=t[6],a=t[7],s=o-r,u=a-i,l=s*s+u*u;if(0===l)return 0;var c=((e.x-r)*s+(e.y-i)*u)/l;return c<1e-12?0:c>.999999999999?1:j.getTimeOf(t,new g(r+c*s,i+c*u))}for(var h=100,f=1/0,p=0,d=0;d<=h;d++)n(d/h);for(var m=1/(2*h);m>4e-7;)n(p-m)||n(p+m)||(m/=2);return p},getPart:function(t,e,n){var r=e>n;if(r){var i=e;e=n,n=i}return e>0&&(t=j.subdivide(t,e)[1]),n<1&&(t=j.subdivide(t,(n-e)/(1-e))[0]),r?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=3*i-2*n-u,h=3*o-2*r-l,f=3*a-2*u-n,p=3*s-2*l-r;return Math.max(c*c,f*f)+Math.max(h*h,p*p)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7];return 3*((u-n)*(r+o)-(s-e)*(i+a)+i*(e-o)-r*(n-a)+u*(o+e/3)-s*(a+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),r=[0,0],i=0;i<2;i++)j._addBounds(t[i],t[i+2],t[i+4],t[i+6],i,0,e,n,r);return new w(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,r,i,o,a,s,u){function l(t,e){var n=t-e,r=t+e;n<a[i]&&(a[i]=n),r>s[i]&&(s[i]=r)}o/=2;var c=a[i]-o,h=s[i]+o;if(t<c||e<c||n<c||r<c||t>h||e>h||n>h||r>h)if(e<t!=e<r&&n<t!=n<r)l(t,o),l(r,o);else{var f=3*(e-n)-t+r,p=2*(t+n)-4*e,d=e-t,v=m.solveQuadratic(f,p,d,u),g=4e-7,y=1-g;l(r,0);for(var _=0;_<v;_++){var b=u[_],w=1-b;g<b&&b<y&&l(w*w*w*t+3*w*w*b*e+3*w*b*b*n+b*b*b*r,o)}}}}},c.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=F[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),c.each({isStraight:function(t,e,n){if(e.isZero()&&n.isZero())return!0;var r=t.getVector(),i=2e-7;if(r.isZero())return!1;if(t.getDistance(e)<i&&t.getDistance(n)<i){var o=r.dot(r),a=r.dot(e)/o,s=r.dot(n)/o;return a>=0&&a<=1&&s<=0&&s>=-1}return!1},isLinear:function(t,e,n){var r=t.getVector().divide(3);return e.equals(r)&&n.negate().equals(r)}},function(t,e){this[e]=function(){var e=this._segment1,n=this._segment2;return t(new C(e._point,n._point),e._handleOut,n._handleIn)},this.statics[e]=function(e){var n=e[0],r=e[1],i=e[6],o=e[7];return t(new C(n,r,i,o),new g(e[2]-n,e[3]-r),new g(e[4]-i,e[5]-o))}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-7},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-7}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new N(this,t):null},getTimeAt:function(t,e){return j.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(g.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return j.getTimeOf(this.getValues(),g.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=g.read(arguments),e=this.getValues(),n=j.getNearestTime(e,t),r=j.getPoint(e,n);return new N(this,n,r,null,t.getDistance(r))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return c.each(t,function(t){this[t+"At"]=function(e,n){var r=this.getValues();return j[t](r,n?e:j.getTimeAt(r,e))},this[t+"AtTime"]=function(e){return j[t](this.getValues(),e)}},{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=9*(r-o)+3*(s-e),c=6*(e+o)-12*r,h=3*(r-e),f=9*(i-a)+3*(u-n),p=6*(n+a)-12*i,d=3*(i-n);return function(t){var e=(l*t+c)*t+h,n=(f*t+p)*t+d;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,n,r){if(null==e||e<0||e>1)return null;var i=t[0],o=t[1],a=t[2],s=t[3],u=t[4],l=t[5],c=t[6],h=t[7],f=m.isZero;f(a-i)&&f(s-o)&&(a=i,s=o),f(u-c)&&f(l-h)&&(u=c,l=h);var p,d,v=3*(a-i),y=3*(u-a)-v,_=c-i-v-y,b=3*(s-o),w=3*(l-s)-b,x=h-o-b-w;if(0===n)p=0===e?i:1===e?c:((_*e+y)*e+v)*e+i,d=0===e?o:1===e?h:((x*e+w)*e+b)*e+o;else{var E=4e-7,C=1-E;if(e<E?(p=v,d=b):e>C?(p=3*(c-u),d=3*(h-l)):(p=(3*_*e+2*y)*e+v,d=(3*x*e+2*w)*e+b),r){0===p&&0===d&&(e<E||e>C)&&(p=u-a,d=l-s);var S=Math.sqrt(p*p+d*d);S&&(p/=S,d/=S)}if(3===n){var M=6*_*e+2*y,P=6*x*e+2*w,T=Math.pow(p*p+d*d,1.5);p=0!==T?(p*P-d*M)/T:0,d=0}}return 2===n?new g(d,(-p)):new g(p,d)}return{statics:{getLength:function(n,r,i,o){if(r===s&&(r=0),i===s&&(i=1),j.isStraight(n)){var a=n;i<1&&(a=j.subdivide(a,i)[0],r/=i),r>0&&(a=j.subdivide(a,r)[1]);var u=a[6]-a[0],l=a[7]-a[1];return Math.sqrt(u*u+l*l)}return m.integrate(o||t(n),r,i,e(r,i))},getTimeAt:function(n,r,i){function o(t){return g+=m.integrate(f,i,t,e(i,t)),i=t,g-r}if(i===s&&(i=r<0?1:0),0===r)return i;var a=Math.abs,u=1e-12,l=r>0,c=l?i:0,h=l?1:i,f=t(n),p=j.getLength(n,c,h,f),d=a(r)-p;if(a(d)<u)return l?h:c;if(d>u)return null;var v=r/p,g=0;return m.findRoot(o,f,i+v,c,h,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x}}}},new function(){function t(t,e,n,r,i,o,a,s,u,l,c){var h=!c&&e.excludeStart,f=!c&&e.excludeEnd,p=4e-7,d=1-p;if(null==i&&(i=j.getTimeOf(n,o)),null!==i&&i>=(h?p:0)&&i<=(f?d:1)&&(null==u&&(u=j.getTimeOf(a,l)),null!==u&&u>=(f?p:0)&&u<=(h?d:1))){var m=e.renormalize;if(m){var v=m(i,u);i=v[0],u=v[1]}var g=new N(r,i,o||j.getPoint(n,i),c),y=new N(s,u,l||j.getPoint(a,u),c),_=g.getPath()===y.getPath()&&g.getIndex()>y.getIndex(),b=_?y:g,w=e.include;g._intersection=y,y._intersection=g,w&&!w(b)||N.insert(t,b,!0)}}function e(i,o,a,s,u,l,c,h,f,p,d,m,v){if(++m>=48||++v>4096)return v;var g,y,_=o[0],b=o[1],w=o[6],x=o[7],E=C.getSignedDistance,S=E(_,b,w,x,o[2],o[3]),M=E(_,b,w,x,o[4],o[5]),P=S*M>0?.75:4/9,T=P*Math.min(0,S,M),O=P*Math.max(0,S,M),A=E(_,b,w,x,i[0],i[1]),R=E(_,b,w,x,i[2],i[3]),L=E(_,b,w,x,i[4],i[5]),I=E(_,b,w,x,i[6],i[7]),k=n(A,R,L,I),D=k[0],N=k[1];
if(0===S&&0===M&&0===A&&0===R&&0===L&&0===I||null==(g=r(D,N,T,O))||null==(y=r(D.reverse(),N.reverse(),T,O)))return v;var B=c+(h-c)*g,F=c+(h-c)*y;if(Math.max(p-f,F-B)<1e-9){var U=(B+F)/2,V=(f+p)/2;i=a.getValues(),o=s.getValues(),t(u,l,d?o:i,d?s:a,d?V:U,null,d?i:o,d?a:s,d?U:V,null)}else if(i=j.getPart(i,g,y),y-g>.8)if(F-B>p-f){var z=j.subdivide(i,.5),U=(B+F)/2;v=e(o,z[0],s,a,u,l,f,p,B,U,!d,m,v),v=e(o,z[1],s,a,u,l,f,p,U,F,!d,m,v)}else{var z=j.subdivide(o,.5),V=(f+p)/2;v=e(z[0],i,s,a,u,l,f,V,B,F,!d,m,v),v=e(z[1],i,s,a,u,l,V,p,B,F,!d,m,v)}else v=e(o,i,s,a,u,l,f,p,B,F,!d,m,v);return v}function n(t,e,n,r){var i,o=[0,t],a=[1/3,e],s=[2/3,n],u=[1,r],l=e-(2*t+r)/3,c=n-(t+2*r)/3;if(l*c<0)i=[[o,a,u],[o,s,u]];else{var h=l/c;i=[h>=2?[o,a,u]:h<=.5?[o,s,u]:[o,a,s,u],[o,u]]}return(l||c)<0?i.reverse():i}function r(t,e,n,r){return t[0][1]<n?i(t,!0,n):e[0][1]>r?i(e,!1,r):t[0][0]}function i(t,e,n){for(var r=t[0][0],i=t[0][1],o=1,a=t.length;o<a;o++){var s=t[o][0],u=t[o][1];if(e?u>=n:u<=n)return u===n?s:r+(n-i)*(s-r)/(u-i);r=s,i=u}return null}function o(e,n,r,i,o,a){for(var s=j.isStraight(e),u=s?n:e,l=s?e:n,c=l[0],h=l[1],f=l[6],p=l[7],d=f-c,v=p-h,g=Math.atan2(-v,d),y=Math.sin(g),_=Math.cos(g),b=[],w=0;w<8;w+=2){var x=u[w]-c,E=u[w+1]-h;b.push(x*_-E*y,x*y+E*_)}for(var C=[],S=j.solveCubic(b,1,0,C,0,1),w=0;w<S;w++){var M=C[w],P=j.getPoint(u,M),T=j.getTimeOf(l,P);if(null!==T){var O=j.getPoint(l,T),A=s?T:M,R=s?M:T;(!a.excludeEnd||R>m.CURVETIME_EPSILON)&&t(o,a,e,r,A,s?O:P,n,i,R,s?P:O)}}}function a(e,n,r,i,o,a){var s=C.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);s&&t(o,a,e,r,null,s,n,i,null,s)}return{statics:{_getIntersections:function(n,r,i,s,u,l){if(!r)return j._getSelfIntersection(n,i,u,l);var c=2e-7,h=n[0],f=n[1],p=n[6],d=n[7],m=r[0],v=r[1],y=r[6],_=r[7],b=(3*n[2]+h)/4,w=(3*n[3]+f)/4,x=(3*n[4]+p)/4,E=(3*n[5]+d)/4,C=(3*r[2]+m)/4,S=(3*r[3]+v)/4,M=(3*r[4]+y)/4,P=(3*r[5]+_)/4,T=Math.min,O=Math.max;if(!(O(h,b,x,p)+c>T(m,C,M,y)&&T(h,b,x,p)-c<O(m,C,M,y)&&O(f,w,E,d)+c>T(v,S,P,_)&&T(f,w,E,d)-c<O(v,S,P,_)))return u;var A=j.getOverlaps(n,r);if(A){for(var R=0;R<2;R++){var L=A[R];t(u,l,n,i,L[0],null,r,s,L[1],null,!0)}return u}var I=j.isStraight(n),k=j.isStraight(r),D=I&&k,N=u.length;if((D?a:I||k?o:e)(n,r,i,s,u,l,0,1,0,1,0,0,0),D&&u.length>N)return u;var B=new g(h,f),F=new g(p,d),U=new g(m,v),V=new g(y,_);return B.isClose(U,c)&&t(u,l,n,i,0,B,r,s,0,U),!l.excludeStart&&B.isClose(V,c)&&t(u,l,n,i,0,B,r,s,1,V),!l.excludeEnd&&F.isClose(U,c)&&t(u,l,n,i,1,F,r,s,0,U),F.isClose(V,c)&&t(u,l,n,i,1,F,r,s,1,V),u},_getSelfIntersection:function(t,e,n,r){var i=t[0],o=t[1],a=t[2],s=t[3],u=t[4],l=t[5],c=t[6],h=t[7],f=new C(i,o,c,h,(!1)),p=f.getSide(new g(a,s),!0),d=f.getSide(new g(u,l),!0);if(p===d){var v=(i-u)*(s-h)+(a-c)*(l-o);if(v*p>0)return n}var y=c-3*u+3*a-i,_=u-2*a+i,b=a-i,w=h-3*l+3*s-o,x=l-2*s+o,E=s-o,S=w*b-y*E,M=w*_-y*x,P=x*b-_*E;if(S*S-4*M*P<0){var T,O=[],A=m.solveCubic(y*y+w*w,3*(y*_+w*x),2*(_*_+x*x)+y*b+w*E,_*b+x*E,O,0,1);if(A>0){for(var R=0,L=0;R<A;R++){var I=Math.abs(e.getCurvatureAtTime(O[R]));I>L&&(L=I,T=O[R])}var k=j.subdivide(t,T);r.excludeEnd=!0,r.renormalize=function(t,e){return[t*T,e*(1-T)+T]},j._getIntersections(k[0],k[1],e,e,n,r)}}return n},getOverlaps:function(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var r=Math.abs,i=4e-7,o=2e-7,a=j.isStraight(t),s=j.isStraight(e),u=a&&s,l=n(t)<n(e),c=l?e:t,h=l?t:e,f=new C(c[0],c[1],c[6],c[7]);if(f.getDistance(new g(h[0],h[1]))<o&&f.getDistance(new g(h[6],h[7]))<o)!u&&f.getDistance(new g(c[2],c[3]))<o&&f.getDistance(new g(c[4],c[5]))<o&&f.getDistance(new g(h[2],h[3]))<o&&f.getDistance(new g(h[4],h[5]))<o&&(a=s=u=!0);else if(u)return null;if(a^s)return null;for(var p=[t,e],d=[],m=0,v=0;m<2&&d.length<2;m+=0===v?0:1,v=1^v){var y=j.getTimeOf(p[1^m],new g(p[m][0===v?0:6],p[m][0===v?1:7]));if(null!=y){var _=0===m?[v,y]:[y,v];(0===d.length||r(_[0]-d[0][0])>i&&r(_[1]-d[0][1])>i)&&d.push(_)}if(1===m&&0===d.length)break}if(2!==d.length)d=null;else if(!u){var b=j.getPart(t,d[0][0],d[1][0]),w=j.getPart(e,d[0][1],d[1][1]);(r(w[2]-b[2])>o||r(w[3]-b[3])>o||r(w[4]-b[4])>o||r(w[5]-b[5])>o)&&(d=null)}return d}}}}),N=c.extend({_class:"CurveLocation",beans:!0,initialize:function(t,e,n,r,i){if(e>.9999996){var o=t.getNext();o&&(e=0,t=o)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=r,this._distance=i,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this.getCurve(),e=this._segment;if(!e){var n=this.getTime();0===n?e=t._segment1:1===n?e=t._segment2:null!=n&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){function t(t){var e=t&&t.getCurve();if(e&&null!=(n._time=e.getTimeOf(n._point)))return n._setCurve(e),n._segment=t,e}var e=this._path,n=this;return e&&e._version!==this._version&&(this._time=this._curve=this._offset=null),this._curve||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var r=e.getCurves(),i=0;i<n;i++)t+=r[i].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this.getCurve(),e=this.getTime();return null!=e&&t&&t.getPartLength(0,e)},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=null;return t&&(e=t.divideAtTime(this.getTime()),e&&this._setSegment(e._segment1)),e},split:function(){var t=this.getCurve();return t?t.splitAtTime(this.getTime()):null},equals:function(t,e){var n=this===t,r=2e-7;if(!n&&t instanceof N&&this.getPath()===t.getPath()&&this.getPoint().isClose(t.getPoint(),r)){var i=this.getCurve(),o=t.getCurve(),a=Math.abs,s=a((i.isLast()&&o.isFirst()?-1:i.getIndex())+this.getTime()-((o.isLast()&&i.isFirst()?-1:o.getIndex())+t.getTime()));n=(s<4e-7||(s=a(this.getOffset()-t.getOffset()))<r||a(this.getPath().getLength()-s)<r)&&(e||!this._intersection&&!t._intersection||this._intersection&&this._intersection.equals(t._intersection,!0))}return n},toString:function(){var t=[],e=this.getPoint(),n=d.instance;e&&t.push("point: "+e);var r=this.getIndex();null!=r&&t.push("index: "+r);var i=this.getTime();return null!=i&&t.push("time: "+n.number(i)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){function t(t,e,n){return e<n?t>e&&t<n:t>e||t<n}var e=this._intersection;if(!e)return!1;var n=this.getTime(),r=e.getTime(),i=4e-7,o=1-i,a=n>i&&n<o,s=r>i&&r<o;if(a&&s)return!this.isTouching();var u=this.getCurve(),l=n<=i?u.getPrevious():u,c=e.getCurve(),h=r<=i?c.getPrevious():c;if(n>=o&&(u=u.getNext()),r>=o&&(c=c.getNext()),!(l&&u&&h&&c))return!1;var f=[];a||f.push(l.getLength(),u.getLength()),s||f.push(h.getLength(),c.getLength());var p=this.getPoint(),d=Math.min.apply(Math,f)/64,m=a?u.getTangentAtTime(n):u.getPointAt(d).subtract(p),v=a?m.negate():l.getPointAt(-d).subtract(p),g=s?c.getTangentAtTime(r):c.getPointAt(d).subtract(p),y=s?g.negate():h.getPointAt(-d).subtract(p),_=v.getAngle(),b=m.getAngle(),w=y.getAngle(),x=g.getAngle();return!!(a?t(_,w,x)^t(b,w,x)&&t(_,x,w)^t(b,x,w):t(w,_,b)^t(x,_,b)&&t(w,b,_)^t(x,b,_))},hasOverlap:function(){return!!this._overlap}},c.each(j._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}},{preserve:!0}),new function(){function t(t,e,n){function r(n,r){for(var o=n+r;o>=-1&&o<=i;o+=r){var a=t[(o%i+i)%i];if(!e.getPoint().isClose(a.getPoint(),2e-7))break;if(e.equals(a))return a}return null}for(var i=t.length,o=0,a=i-1;o<=a;){var s,u=o+a>>>1,l=t[u];if(n&&(s=e.equals(l)?l:r(u,-1)||r(u,1)))return e._overlap&&(s._overlap=s._intersection._overlap=!0),s;var c=e.getPath(),h=l.getPath(),f=c===h?e.getIndex()+e.getTime()-(l.getIndex()+l.getTime()):c._id-h._id;f<0?a=u-1:o=u+1}return t.splice(o,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),r=e.length-1;r>=0;r--)t(n,e[r]._intersection,!1);return n}}}}),B=M.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,initialize:function(){},statics:{create:function(t){var e=(t&&t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t)?U:F;return new e(t)}},_asPathItem:function(){return this},setPathData:function(t){function e(t,e){var n=+r[t];return s&&(n+=u[e]),n}function n(t){return new g(e(t,"x"),e(t+1,"y"))}var r,i,o,a=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),s=!1,u=new g,l=new g;this.clear();for(var c=0,h=a&&a.length;c<h;c++){var f=a[c],p=f[0],d=p.toLowerCase();r=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var m=r&&r.length;switch(s=p===d,"z"!==i||/[mz]/.test(d)||this.moveTo(u=l),d){case"m":case"l":for(var v="m"===d,y=0;y<m;y+=2)this[0===y&&v?"moveTo":"lineTo"](u=n(y));o=u,v&&(l=u);break;case"h":case"v":for(var b="h"===d?"x":"y",y=0;y<m;y++)u[b]=e(y,b),this.lineTo(u);o=u;break;case"c":for(var y=0;y<m;y+=6)this.cubicCurveTo(n(y),o=n(y+2),u=n(y+4));break;case"s":for(var y=0;y<m;y+=4)this.cubicCurveTo(/[cs]/.test(i)?u.multiply(2).subtract(o):u,o=n(y),u=n(y+2)),i=d;break;case"q":for(var y=0;y<m;y+=4)this.quadraticCurveTo(o=n(y),u=n(y+2));break;case"t":for(var y=0;y<m;y+=2)this.quadraticCurveTo(o=/[qt]/.test(i)?u.multiply(2).subtract(o):u,u=n(y)),i=d;break;case"a":for(var y=0;y<m;y+=7)this.arcTo(u=n(y+5),new _((+r[y]),(+r[y+1])),+r[y+2],+r[y+4],+r[y+3]);break;case"z":this.closePath(1e-12)}i=d}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))&&this._getWinding(t);return!!("evenodd"===this.getFillRule()?1&e:e)},getIntersections:function(t,e,n,r){var i=this===t||!t,o=this._matrix._orNullIfIdentity(),a=i?o:(n||t._matrix)._orNullIfIdentity();if(!i&&!this.getBounds(o).touches(t.getBounds(a)))return[];for(var s,t,u=this.getCurves(),l=i?u:t.getCurves(),c=u.length,h=i?c:l.length,f=[],p=[],d=0;d<h;d++)f[d]=l[d].getValues(a);for(var d=0;d<c;d++){var m=u[d],v=i?f[d]:m.getValues(o),g=m.getPath();g!==t&&(t=g,s=[],p.push(s)),i&&j._getSelfIntersection(v,m,s,{include:e,excludeStart:1===c&&m.getPoint1().equals(m.getPoint2())});for(var y=i?d+1:0;y<h;y++){if(r&&s.length)return s;var _=l[y];j._getIntersections(v,f[y],m,_,s,{include:e,excludeStart:i&&m.getPrevious()===_,excludeEnd:i&&m.getNext()===_})}}s=[];for(var d=0,b=p.length;d<b;d++)s.push.apply(s,p[d]);return s},getCrossings:function(t){return this.getIntersections(t,function(t){return t._overlap||t.isCrossing()})},getNearestLocation:function(){for(var t=g.read(arguments),e=this.getCurves(),n=1/0,r=null,i=0,o=e.length;i<o;i++){var a=e[i].getNearestLocation(t);a._distance<n&&(n=a._distance,r=a)}return r},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var r=!this._children,i=r?"_segments":"_children",o=t[i],a=e[i],s=this[i];if(!o||!a||o.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var u=s.length,l=a.length;if(u<l)for(var c=r?k:F,h=u;h<l;h++)this.add(new c);else u>l&&this[r?"removeSegments":"removeChildren"](l,u);for(var h=0;h<l;h++)s[h].interpolate(o[h],a[h],n);r&&(this.setClosed(t._closed),this._changed(9))}}),F=B.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==s||t.x===s&&t.point===s?null:arguments;e&&e.length>0?this.setSegments(e):(this._curves=s,this._segmentSelection=0,e||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&c.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed;var e=t._clockwise;e!==s&&(this._clockwise=e)},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=this._clockwise=this._monoCurves=s,16&e)this._version++;else if(this._curves)for(var n=0,r=this._curves.length;n<r;n++)this._curves[n]._changed()}else 32&e&&(this._bounds=s)},getStyle:function(){var t=this._parent;return(t instanceof U?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected();this._segments.length=0,this._segmentSelection=0,this._curves=s,t&&t.length>0&&this._add(k.readAll(t)),e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var r=0;r<n;r++)t[r]=new j(this,e[r],e[r+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new j(this,this._segments[e-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(t,e){function n(e,n){e._transformCoordinates(t,m),r=m[0],i=m[1],v?(g.push("M"+p.pair(r,i)),v=!1):(s=m[2],u=m[3],s===r&&u===i&&l===o&&c===a?n||g.push("l"+p.pair(r-o,i-a)):g.push("c"+p.pair(l-o,c-a)+" "+p.pair(s-o,u-a)+" "+p.pair(r-o,i-a))),o=r,a=i,l=m[4],c=m[5]}var r,i,o,a,s,u,l,c,h=this._segments,f=h.length,p=new d(e),m=new Array(6),v=!0,g=[];if(0===f)return"";for(var y=0;y<f;y++)n(h[y]);return this._closed&&f>0&&(n(h[0],!0),g.push("z")),g.join("")},isEmpty:function(){return 0===this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),r=0,i=e.length;r<i;r++)e[r]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,r=this._curves,i=t.length,o=null==e,e=o?n.length:e,a=0;a<i;a++){var s=t[a];s._path&&(s=t[a]=s.clone()),s._path=this,s._index=e+a,s._selection&&this._updateSelection(s,0,s._selection)}if(o)n.push.apply(n,t);else{n.splice.apply(n,[e,0].concat(t));for(var a=e+i,u=n.length;a<u;a++)n[a]._index=a}if(r){var l=this._countCurves(),c=e>0&&e+i-1===l?e-1:e,h=c,f=Math.min(c+i,l);t._curves&&(r.splice.apply(r,[c,0].concat(t._curves)),h+=t._curves.length);for(var a=h;a<f;a++)r.splice(a,0,new j(this,null,null));this._adjustCurves(c,f)}return this._changed(25),t},_adjustCurves:function(t,e){for(var n,r=this._segments,i=this._curves,o=t;o<e;o++)n=i[o],n._path=this,n._segment1=r[o],n._segment2=r[o+1]||r[0],n._changed();(n=i[this._closed&&0===t?r.length-1:t-1])&&(n._segment2=r[t]||r[0],n._changed()),(n=i[e])&&(n._segment1=r[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(k.readAll(arguments)):this._add([k.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(k.readAll(arguments,1),t):this._add([k.read(arguments,1)],t)[0]},addSegment:function(){return this._add([k.read(arguments)])[0]},insertSegment:function(t){return this._add([k.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(k.readAll(t))},insertSegments:function(t,e){return this._add(k.readAll(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=c.pick(e,this._segments.length);var r=this._segments,i=this._curves,o=r.length,a=r.splice(t,e-t),s=a.length;if(!s)return a;for(var u=0;u<s;u++){var l=a[u];l._selection&&this._updateSelection(l,l._selection,0),l._index=l._path=null}for(var u=t,h=r.length;u<h;u++)r[u]._index=u;if(i){for(var f=t>0&&e===o+(this._closed?1:0)?t-1:t,i=i.splice(f,s),u=i.length-1;u>=0;u--)i[u]._path=null;n&&(a._curves=i.slice(1)),this._adjustCurves(f,f)}return this._changed(25),a},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,r=t.length;n<r;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(t){var e=t===s,n=this._area;if(!e||null==n){var r=this._segments,i=r.length,o=e?this._closed:t,a=i-1;n=0;for(var u=0,l=o?i:a;u<l;u++)n+=j.getArea(j.getValues(r[u],r[u<a?u+1:0]));e&&(this._area=n)}return n},isClockwise:function(){return this._clockwise!==s?this._clockwise:this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse(),this._clockwise=t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,r=t?7:0;this._segmentSelection=r*n;for(var i=0;i<n;i++)e[i]._selection=r},_updateSelection:function(t,e,n){t._selection=n;var r=this._segmentSelection+=n-e;r>0&&this.setSelected(!0)},splitAt:function(t){var e="number"==typeof t?this.getLocationAt(t):t,n=e&&e.index,r=e&&e.time,i=4e-7,o=1-i;r>=o&&(n++,r=0);var a=this.getCurves();if(n>=0&&n<a.length){r>=i&&a[n++].divideAtTime(r);var s,u=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):(s=new F(M.NO_INSERT),s.insertAbove(this,!0),s.copyAttributes(this)),s._add(u,0),this.addSegment(u[0]),s}return null},split:function(t,e){var n,r=e===s?t:(n=this.getCurves()[t])&&n.getLocationAtTime(e);return null!=r?this.splitAt(r):null},join:function(t,e){var n=e||0;if(t&&t!==this){var r=t._segments,i=this.getLastSegment(),o=t.getLastSegment();if(!o)return this;i&&i._point.isClose(o._point,n)&&t.reverse();var a=t.getFirstSegment();if(i&&i._point.isClose(a._point,n))i.setHandleOut(a._handleOut),this._add(r.slice(1));else{var s=this.getFirstSegment();s&&s._point.isClose(a._point,n)&&t.reverse(),o=t.getLastSegment(),s&&s._point.isClose(o._point,n)?(s.setHandleIn(o._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}t._closed&&this._add([r[0]]),t.remove()}var u=this.getFirstSegment(),l=this.getLastSegment();return u!==l&&u._point.isClose(l._point,n)&&(u.setHandleIn(l._handleIn),l.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,r=n?2e-7:0,i=e.length-1;i>=0;i--){var o=e[i];!o.hasHandles()&&(o.getLength()<r||n&&o.isCollinear(o.getNext()))&&o.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r,n._index=t}this._curves=null,this._clockwise!==s&&(this._clockwise=!this._clockwise),this._changed(9)},flatten:function(t){for(var e=new V(this,t||.25,256,(!0)),n=e.parts,r=n.length,i=[],o=0;o<r;o++)i.push(new k(n[o].curve.slice(0,2)));!this._closed&&r>0&&i.push(new k(n[r-1].curve.slice(6))),this.setSegments(i)},simplify:function(t){var e=new z(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){function e(t,e){var r=t&&t.index;if(null!=r){var i=t.path;if(i&&i!==n)throw new Error(t._class+" "+r+" of "+i+" is not part of "+n);e&&t instanceof j&&r++}else r="number"==typeof t?t:e;return Math.min(r<0&&u?r%a:r<0?r+a:r,a-1)}var n=this,r=t||{},i=r.type||"asymmetric",o=this._segments,a=o.length,u=this._closed,l=u&&r.from===s&&r.to===s,c=e(r.from,0),h=e(r.to,a-1);if(c>h)if(u)c-=a;else{var f=c;c=h,h=f}if(/^(?:asymmetric|continuous)$/.test(i)){var p="asymmetric"===i,d=Math.min,m=h-c+1,v=m-1,g=l?d(m,4):1,y=g,_=g,b=[];if(u||(y=d(1,c),_=d(1,a-h-1)),v+=y+_,v<=1)return;for(var w=0,x=c-y;w<=v;w++,x++)b[w]=o[(x<0?x+a:x)%a]._point;for(var E=b[0]._x+2*b[1]._x,C=b[0]._y+2*b[1]._y,S=2,M=v-1,P=[E],T=[C],O=[S],A=[],R=[],w=1;w<v;w++){var L=w<M,I=L?1:p?1:2,k=L?4:p?2:7,D=L?4:p?3:8,N=L?2:p?0:1,B=I/S;S=O[w]=k-B,E=P[w]=D*b[w]._x+N*b[w+1]._x-B*E,C=T[w]=D*b[w]._y+N*b[w+1]._y-B*C}A[M]=P[M]/O[M],R[M]=T[M]/O[M];for(var w=v-2;w>=0;w--)A[w]=(P[w]-A[w+1])/O[w],R[w]=(T[w]-R[w+1])/O[w];A[v]=(3*b[v]._x-A[M])/2,R[v]=(3*b[v]._y-R[M])/2;for(var w=y,F=v-_,x=c;w<=F;w++,x++){var U=o[x<0?x+a:x],V=U._point,z=A[w]-V._x,G=R[w]-V._y;(l||w<F)&&U.setHandleOut(z,G),(l||w>y)&&U.setHandleIn(-z,-G)}}else for(var w=c;w<=h;w++)o[w<0?w+a:w].smooth(r,!l&&w===c,!l&&w===h)},toShape:function(t){function e(t,e){var n=c[t],r=n.getNext(),i=c[e],o=i.getNext();return n._handleOut.isZero()&&r._handleIn.isZero()&&i._handleOut.isZero()&&o._handleIn.isZero()&&r._point.subtract(n._point).isCollinear(o._point.subtract(i._point))}function n(t){var e=c[t],n=e.getPrevious(),r=e.getNext();return n._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&r._handleIn.isZero()&&e._point.subtract(n._point).isOrthogonal(r._point.subtract(e._point))}function r(t){var e=c[t],n=e.getNext(),r=e._handleOut,i=n._handleIn,o=.5522847498307936;if(r.isOrthogonal(i)){var a=e._point,s=n._point,u=new C(a,r,(!0)).intersect(new C(s,i,(!0)),!0);return u&&m.isZero(r.getLength()/u.subtract(a).getLength()-o)&&m.isZero(i.getLength()/u.subtract(s).getLength()-o)}return!1}function i(t,e){return c[t]._point.getDistance(c[e]._point)}if(!this._closed)return null;var o,a,u,l,c=this._segments;if(!this.hasHandles()&&4===c.length&&e(0,2)&&e(1,3)&&n(1)?(o=O.Rectangle,a=new _(i(0,3),i(0,1)),l=c[1]._point.add(c[2]._point).divide(2)):8===c.length&&r(0)&&r(2)&&r(4)&&r(6)&&e(1,5)&&e(3,7)?(o=O.Rectangle,a=new _(i(1,6),i(0,3)),u=a.subtract(new _(i(0,7),i(1,2))).divide(2),l=c[3]._point.add(c[4]._point).divide(2)):4===c.length&&r(0)&&r(1)&&r(2)&&r(3)&&(m.isZero(i(0,2)-i(1,3))?(o=O.Circle,u=i(0,2)/2):(o=O.Ellipse,u=new _(i(2,0)/2,i(3,1)/2)),l=c[1]._point),o){var h=this.getPosition(!0),f=new o({center:h,size:a,radius:u,insert:!1});return f.copyAttributes(this,!0),f._matrix.prepend(this._matrix),f.rotate(l.subtract(h).getAngle()+90),(t===s||t)&&f.insertAbove(this),f}return null},toPath:"#clone",_hitTestSelf:function(t,e,n,r){function i(e,n){return t.subtract(e).divide(n).length<=1}function o(t,n,r){if(!e.selected||n.isSelected()){var o=t._point;if(n!==o&&(n=n.add(o)),i(n,w))return new I(r,m,{segment:t,point:n})}}function a(t,n){return(n||e.segments)&&o(t,t._point,"segment")||!n&&e.handles&&(o(t,t._handleIn,"handle-in")||o(t,t._handleOut,"handle-out"))}function s(t){f.add(t)}function u(e){if(("round"!==l||"round"!==c)&&(f=new F({internal:!0,closed:!0}),_||e._index>0&&e._index<y-1?"round"!==l&&(e._handleIn.isZero()||e._handleOut.isZero())&&F._addBevelJoin(e,l,S,h,null,r,s,!0):"round"!==c&&F._addSquareCap(e,c,S,null,r,s,!0),!f.isEmpty())){var n;return f.contains(t)||(n=f.getNearestLocation(t))&&i(n.getPoint(),b)}return i(e._point,w)}var l,c,h,f,p,d,m=this,v=this.getStyle(),g=this._segments,y=g.length,_=this._closed,b=e._tolerancePadding,w=b,x=e.stroke&&v.hasStroke(),E=e.fill&&v.hasFill(),C=e.curves,S=x?v.getStrokeWidth()/2:E&&e.tolerance>0||C?0:null;if(null!==S&&(S>0?(l=v.getStrokeJoin(),c=v.getStrokeCap(),h=S*v.getMiterLimit(),w=w.add(F._getStrokePadding(S,r))):l=c="round"),!e.ends||e.segments||_){if(e.segments||e.handles)for(var M=0;M<y;M++)if(d=a(g[M]))return d}else if(d=a(g[0],!0)||a(g[y-1],!0))return d;if(null!==S){if(p=this.getNearestLocation(t)){var P=p.getTime();0===P||1===P&&y>1?u(p.getSegment())||(p=null):i(p.getPoint(),w)||(p=null)}if(!p&&"miter"===l&&y>1)for(var M=0;M<y;M++){var T=g[M];if(t.getDistance(T._point)<=h&&u(T)){p=T.getLocation();break}}}return!p&&E&&this._contains(t)||p&&!x&&!C?new I("fill",this):p?new I(x?"stroke":"curve",this,{location:p,point:p.getPoint()}):null}},c.each(j._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}},{beans:!1,getLocationOf:function(){for(var t=g.read(arguments),e=this.getCurves(),n=0,r=e.length;n<r;n++){var i=e[n].getLocationOf(t);if(i)return i}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){for(var e=this.getCurves(),n=0,r=0,i=e.length;r<i;r++){var o=n,a=e[r];if(n+=a.getLength(),n>t)return a.getLocationAt(t-o)}return e.length>0&&t<=this.getLength()?new N(e[e.length-1],1):null}}),new function(){function t(t,e,n,r){function i(e){var n=u[e],r=u[e+1];o==n&&a==r||(t.beginPath(),t.moveTo(o,a),t.lineTo(n,r),t.stroke(),t.beginPath(),t.arc(n,r,s,0,2*Math.PI,!0),t.fill())}for(var o,a,s=r/2,u=new Array(6),l=0,c=e.length;l<c;l++){var h=e[l],f=h._selection;if(h._transformCoordinates(n,u),o=u[0],a=u[1],2&f&&i(2),4&f&&i(4),t.fillRect(o-s,a-s,r,r),!(1&f)){var p=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(o-s+1,a-s+1,r-2,r-2),t.fillStyle=p}}}function e(t,e,n){function r(e){if(n)e._transformCoordinates(n,d),i=d[0],o=d[1];else{var r=e._point;i=r._x,o=r._y}if(m)t.moveTo(i,o),m=!1;else{if(n)u=d[2],l=d[3];else{var f=e._handleIn;u=i+f._x,l=o+f._y}u===i&&l===o&&c===a&&h===s?t.lineTo(i,o):t.bezierCurveTo(c,h,u,l,i,o)}if(a=i,s=o,n)c=d[4],h=d[5];else{var f=e._handleOut;c=a+f._x,h=s+f._y}}for(var i,o,a,s,u,l,c,h,f=e._segments,p=f.length,d=new Array(6),m=!0,v=0;v<p;v++)r(f[v]);e._closed&&p>0&&r(f[0])}return{_draw:function(t,n,r,i){function a(t){return f[(t%p+p)%p]}var s=n.dontStart,u=n.dontFinish||n.clip,l=this.getStyle(),c=l.hasFill(),h=l.hasStroke(),f=l.getDashArray(),p=!o.support.nativeDash&&h&&f&&f.length;if(s||t.beginPath(),(c||h&&!p||u)&&(e(t,this,i),this._closed&&t.closePath()),!u&&(c||h)&&(this._setStyles(t,n,r),c&&(t.fill(l.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),h)){if(p){s||t.beginPath();var d,m=new V(this,.25,32,(!1),i),v=m.length,g=-l.getDashOffset(),y=0;for(g%=v;g>0;)g-=a(y--)+a(y--);for(;g<v;)d=g+a(y++),(g>0||d>0)&&m.drawPart(t,Math.max(g,0),Math.max(d,0)),g=d+a(y++)}t.stroke()}},_drawSelected:function(n,r){n.beginPath(),e(n,this,r),n.stroke(),t(n,this._segments,r,o.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(0===e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new k(g.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new k(g.read(arguments))])},cubicCurveTo:function(){var e=g.read(arguments),n=g.read(arguments),r=g.read(arguments),i=t(this);i.setHandleOut(e.subtract(i._point)),this._add([new k(r,n.subtract(r))])},quadraticCurveTo:function(){var e=g.read(arguments),n=g.read(arguments),r=t(this)._point;this.cubicCurveTo(e.add(r.subtract(e).multiply(1/3)),e.add(n.subtract(e).multiply(1/3)),n)},curveTo:function(){var e=g.read(arguments),n=g.read(arguments),r=c.pick(c.read(arguments),.5),i=1-r,o=t(this)._point,a=e.subtract(o.multiply(i*i)).subtract(n.multiply(r*r)).divide(2*r*i);if(a.isNaN())throw new Error("Cannot put a curve through points with parameter = "+r);this.quadraticCurveTo(a,n)},arcTo:function(){var e,n,r,i,o,a=t(this),s=a._point,u=g.read(arguments),l=c.peek(arguments),h=c.pick(l,!0);if("boolean"==typeof h)var f=s.add(u).divide(2),e=f.add(f.subtract(s).rotate(h?-90:90));else if(c.remain(arguments)<=2)e=u,u=g.read(arguments);else{var p=_.read(arguments),d=m.isZero;if(d(p.width)||d(p.height))return this.lineTo(u);var v=c.read(arguments),h=!!c.read(arguments),y=!!c.read(arguments),f=s.add(u).divide(2),b=s.subtract(f).rotate(-v),w=b.x,x=b.y,S=Math.abs,M=S(p.width),P=S(p.height),T=M*M,O=P*P,A=w*w,R=x*x,L=Math.sqrt(A/T+R/O);if(L>1&&(M*=L,P*=L,T=M*M,O=P*P),L=(T*O-T*R-O*A)/(T*R+O*A),S(L)<1e-12&&(L=0),L<0)throw new Error("Cannot create an arc with the given arguments");n=new g(M*x/P,-P*w/M).multiply((y===h?-1:1)*Math.sqrt(L)).rotate(v).add(f),o=(new E).translate(n).rotate(v).scale(M,P),i=o._inverseTransform(s),r=i.getDirectedAngle(o._inverseTransform(u)),!h&&r>0?r-=360:h&&r<0&&(r+=360)}if(e){var I=new C(s.add(e).divide(2),e.subtract(s).rotate(90),(!0)),D=new C(e.add(u).divide(2),u.subtract(e).rotate(90),(!0)),j=new C(s,u),N=j.getSide(e);if(n=I.intersect(D,!0),!n){if(!N)return this.lineTo(u);throw new Error("Cannot create an arc with the given arguments")}i=s.subtract(n),r=i.getDirectedAngle(u.subtract(n));var B=j.getSide(n);0===B?r=N*Math.abs(r):N===B&&(r+=r<0?360:-360)}for(var F=Math.abs(r),U=F>=360?4:Math.ceil(F/90),V=r/U,z=V*Math.PI/360,G=4/3*Math.sin(z)/(1+Math.cos(z)),H=[],W=0;W<=U;W++){var b=u,X=null;if(W<U&&(X=i.rotate(90).multiply(G),o?(b=o._transformPoint(i),X=o._transformPoint(i.add(X)).subtract(b)):b=n.add(i)),0===W)a.setHandleOut(X);else{var q=i.rotate(-90).multiply(G);o&&(q=o._transformPoint(i.add(q)).subtract(b)),H.push(new k(b,q,X))}i=i.rotate(V)}this._add(H)},lineBy:function(){var e=g.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=g.read(arguments),n=g.read(arguments),r=c.read(arguments),i=t(this)._point;this.curveTo(i.add(e),i.add(n),r)},cubicCurveBy:function(){var e=g.read(arguments),n=g.read(arguments),r=g.read(arguments),i=t(this)._point;this.cubicCurveTo(i.add(e),i.add(n),i.add(r))},quadraticCurveBy:function(){var e=g.read(arguments),n=g.read(arguments),r=t(this)._point;this.quadraticCurveTo(r.add(e),r.add(n))},arcBy:function(){var e=t(this)._point,n=e.add(g.read(arguments)),r=c.pick(c.peek(arguments),!0);"boolean"==typeof r?this.arcTo(n,r):this.arcTo(n,e.add(g.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var n=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return F[n](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,r,i,o){function a(t){t._transformCoordinates(r,u);for(var e=0;e<2;e++)j._addBounds(l[e],l[e+4],u[e+2],u[e],e,o?o[e]:0,c,h,f);var n=l;l=u,u=n}var s=t[0];if(!s)return new w;for(var u=new Array(6),l=s._transformCoordinates(r,new Array(6)),c=l.slice(0,2),h=c.slice(),f=new Array(2),p=1,d=t.length;p<d;p++)a(t[p]);return e&&a(s),new w(c[0],c[1],h[0]-c[0],h[1]-c[1])},getStrokeBounds:function(t,e,n,r,i){function o(t){d=d.include(t)}function a(t){d=d.unite(b.setCenter(t._point.transform(r)))}function s(t,e){var n=t._handleIn,i=t._handleOut;"round"===e||!n.isZero()&&!i.isZero()&&n.isCollinear(i)?a(t):F._addBevelJoin(t,e,m,y,r,f,o)}function u(t,e){"round"===e?a(t):F._addSquareCap(t,e,m,r,f,o)}var l=n.getStyle(),c=l.hasStroke(),h=l.getStrokeWidth(),f=c&&n._getStrokeMatrix(r,i),p=c&&F._getStrokePadding(h,f),d=F.getBounds(t,e,n,r,i,p);if(!c)return d;for(var m=h/2,v=l.getStrokeJoin(),g=l.getStrokeCap(),y=m*l.getMiterLimit(),b=new w(new _(p)),x=t.length-(e?0:1),E=1;E<x;E++)s(t[E],v);return e?s(t[0],v):x>0&&(u(t[0],g),u(t[t.length-1],g)),d},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new g(t,0).transform(e),r=new g(0,t).transform(e),i=n.getAngleInRadians(),o=n.getLength(),a=r.getLength(),s=Math.sin(i),u=Math.cos(i),l=Math.tan(i),c=Math.atan2(a*l,o),h=Math.atan2(a,l*o);return[Math.abs(o*Math.cos(c)*u+a*Math.sin(c)*s),Math.abs(a*Math.sin(h)*u+o*Math.cos(h)*s)]},_addBevelJoin:function(t,e,n,r,i,o,a,s){var u=t.getCurve(),l=u.getPrevious(),c=u.getPointAtTime(0),h=l.getNormalAtTime(1),f=u.getNormalAtTime(0),p=h.getDirectedAngle(f)<0?-n:n;if(h.setLength(p),f.setLength(p),i&&i._transformPoint(c,c),o&&(o._transformPoint(h,h),o._transformPoint(f,f)),s&&(a(c),
a(c.add(h))),"miter"===e){var d=new C(c.add(h),new g((-h.y),h.x),(!0)).intersect(new C(c.add(f),new g((-f.y),f.x),(!0)),!0);if(d&&c.getDistance(d)<=r&&(a(d),!s))return}s||a(c.add(h)),a(c.add(f))},_addSquareCap:function(t,e,n,r,i,o,a){var s=t._point,u=t.getLocation(),l=u.getNormal().multiply(n);r&&r._transformPoint(s,s),i&&i._transformPoint(l,l),a&&(o(s.subtract(l)),o(s.add(l))),"square"===e&&(s=s.add(l.rotate(0===u.getTime()?-90:90))),o(s.add(l)),o(s.subtract(l))},getHandleBounds:function(t,e,n,r,i){var o,a,s=n.getStyle(),u=i.stroke&&s.hasStroke();if(u){var l=n._getStrokeMatrix(r,i),c=s.getStrokeWidth()/2,h=c;"miter"===s.getStrokeJoin()&&(h=c*s.getMiterLimit()),"square"===s.getStrokeCap()&&(h=Math.max(h,c*Math.sqrt(2))),o=F._getStrokePadding(c,l),a=F._getStrokePadding(h,l)}for(var f=new Array(6),p=1/0,d=-p,m=p,v=d,g=0,y=t.length;g<y;g++){var _=t[g];_._transformCoordinates(r,f);for(var b=0;b<6;b+=2){var x=0===b?a:o,E=x?x[0]:0,C=x?x[1]:0,S=f[b],M=f[b+1],P=S-E,T=S+E,O=M-C,A=M+C;P<p&&(p=P),T>d&&(d=T),O<m&&(m=O),A>v&&(v=A)}}return new w(p,m,d-p,v-m)}}});F.inject({statics:new function(){function t(t,e,n){var r=c.getNamed(n),i=new F(r&&r.insert===!1&&M.NO_INSERT);return i._add(t),i._closed=e,i.set(r)}function e(e,n,i){for(var o=new Array(4),a=0;a<4;a++){var s=r[a];o[a]=new k(s._point.multiply(n).add(e),s._handleIn.multiply(n),s._handleOut.multiply(n))}return t(o,!0,i)}var n=.5522847498307936,r=[new k([-1,0],[0,n],[0,-n]),new k([0,-1],[-n,0],[n,0]),new k([1,0],[0,-n],[0,n]),new k([0,1],[n,0],[-n,0])];return{Line:function(){return t([new k(g.readNamed(arguments,"from")),new k(g.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=g.readNamed(arguments,"center"),n=c.readNamed(arguments,"radius");return e(t,new _(n),arguments)},Rectangle:function(){var e,r=w.readNamed(arguments,"rectangle"),i=_.readNamed(arguments,"radius",0,{readNull:!0}),o=r.getBottomLeft(!0),a=r.getTopLeft(!0),s=r.getTopRight(!0),u=r.getBottomRight(!0);if(!i||i.isZero())e=[new k(o),new k(a),new k(s),new k(u)];else{i=_.min(i,r.getSize(!0).divide(2));var l=i.width,c=i.height,h=l*n,f=c*n;e=[new k(o.add(l,0),null,[-h,0]),new k(o.subtract(0,c),[0,f]),new k(a.add(0,c),null,[0,-f]),new k(a.add(l,0),[-h,0],null),new k(s.subtract(l,0),null,[h,0]),new k(s.add(0,c),[0,-f],null),new k(u.subtract(0,c),null,[0,f]),new k(u.subtract(l,0),[h,0])]}return t(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=O._readEllipse(arguments);return e(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=g.readNamed(arguments,"from"),e=g.readNamed(arguments,"through"),n=g.readNamed(arguments,"to"),r=c.getNamed(arguments),i=new F(r&&r.insert===!1&&M.NO_INSERT);return i.moveTo(t),i.arcTo(e,n),i.set(r)},RegularPolygon:function(){for(var e=g.readNamed(arguments,"center"),n=c.readNamed(arguments,"sides"),r=c.readNamed(arguments,"radius"),i=360/n,o=n%3===0,a=new g(0,o?-r:r),s=o?-1:.5,u=new Array(n),l=0;l<n;l++)u[l]=new k(e.add(a.rotate((l+s)*i)));return t(u,!0,arguments)},Star:function(){for(var e=g.readNamed(arguments,"center"),n=2*c.readNamed(arguments,"points"),r=c.readNamed(arguments,"radius1"),i=c.readNamed(arguments,"radius2"),o=360/n,a=new g(0,(-1)),s=new Array(n),u=0;u<n;u++)s[u]=new k(e.add(a.rotate(o*u).multiply(u%2?i:r)));return t(s,!0,arguments)}}}});var U=B.extend({_class:"CompoundPath",_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n,r){for(var i=n.length-1;i>=0;i--){var o=n[i];o instanceof U&&(n=n.slice(),n.splice.apply(n,[i,1].concat(o.removeChildren())),o.remove())}n=t.base.call(this,e,n,r,F);for(var i=0,a=!r&&n&&n.length;i<a;i++){var o=n[i];o._clockwise===s&&o.setClockwise(0===o._index)}return n},reduce:function t(e){for(var n=this._children,r=n.length-1;r>=0;r--){var i=n[r].reduce(e);i.isEmpty()&&i.remove()}if(0===n.length){var i=new F(M.NO_INSERT);return i.copyAttributes(this),i.insertAbove(this),this.remove(),i}return t.base.call(this)},isClockwise:function(){var t=this.getFirstChild();return t&&t.isClockwise()},setClockwise:function(t){this.isClockwise()^!!t&&this.reverse()},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,r=t.length;n<r;n++)e.push.apply(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getFirstCurve()},getArea:function(){for(var t=this._children,e=0,n=0,r=t.length;n<r;n++)e+=t[n].getArea();return e}},{beans:!0,getPathData:function(t,e){for(var n=this._children,r=[],i=0,o=n.length;i<o;i++){var a=n[i],s=a._matrix;r.push(a.getPathData(t&&!s.isIdentity()?t.appended(s):t,e))}return r.join(" ")}},{_hitTestChildren:function t(e,n,r){return t.base.call(this,e,n.class===F||"path"===n.type?n:c.set({},n,{fill:!1}),r)},_draw:function(t,e,n,r){var i=this._children;if(0!==i.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var o=0,a=i.length;o<a;o++)i[o].draw(t,e,r);if(!e.clip){this._setStyles(t,e,n);var s=this._style;s.hasFill()&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),s.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var r=this._children,i=0,o=r.length;i<o;i++){var a=r[i],s=a._matrix;n[a._id]||a._drawSelected(t,s.isIdentity()?e:e.appended(s))}}},new function(){function t(t,e){var n=t._children;if(e&&0===n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return c.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}},{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new F(M.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),r=g.read(arguments);this.moveTo(n?r.add(n._point):r)},closePath:function(e){t(this,!0).closePath(e)}})},c.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var n,r=this._children,i=0,o=r.length;i<o;i++)n=r[i][t](e)||n;return n}},{}));B.inject(new function(){function t(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?n.resolveCrossings():n}function e(t,e,n,r,i){var o=new t(M.NO_INSERT);return o.addChildren(e,!0),n&&(o=o.reduce({simplify:!0})),o.insertAbove(i&&r.isSibling(i)&&r.getIndex()<i.getIndex()?i:r),o.copyAttributes(r,!0),o}function n(n,i,a){function c(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];m.push.apply(m,r._segments),v.push.apply(v,r._getMonoCurves()),r._overlapsOnly=r._validOverlapsOnly=!0}}var h=l[a];if(h[a]=!0,!n._children&&!n._closed)return r(n,i,h);var f=t(n,!0),p=i&&n!==i&&t(i,!0);p&&(h.subtract||h.exclude)^(p.isClockwise()^f.isClockwise())&&p.reverse();var d=o(N.expand(f.getCrossings(p))),m=[],v=[];c(f._children||[f]),p&&c(p._children||[p]);for(var g=0,y=d.length;g<y;g++)s(d[g]._segment,f,p,v,h);for(var g=0,y=m.length;g<y;g++){var _=m[g],b=_._intersection;if(null==_._winding&&s(_,f,p,v,h),!b||!b._overlap){var w=_._path;w._overlapsOnly=!1,h[_._winding]&&(w._validOverlapsOnly=!1)}}return e(U,u(m,h),!0,n,i)}function r(n,r,i){function o(t){if(s.contains(t.getPointAt(t.getLength()/2))^l)return c.unshift(t),!0}if(!r||!r._children&&!r._closed||!i.subtract&&!i.intersect)return null;for(var a=t(n,!1),s=t(r,!1),u=a.getCrossings(s),l=i.subtract,c=[],h=u.length-1;h>=0;h--){var f=u[h].split();f&&(o(f)&&f.getFirstSegment().setHandleIn(0,0),a.getLastSegment().setHandleOut(0,0))}return o(a),e(P,c,!1,n,r)}function i(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function o(t,e){for(var n,r,o=e&&[],a=4e-7,s=1-a,u=!1,l=[],c=t.length-1;c>=0;c--){var h=t[c];if(e){if(!e(h))continue;o.unshift(h)}var f,p=h._curve,d=h._time,m=d;if(p!==n?u=!p.hasHandles():r>=a&&r<=s&&(d/=r),d<a)f=p._segment1;else if(d>s)f=p._segment2;else{var v=p.divideAtTime(d,!0);u&&l.push(p,v),f=v._segment1}h._setSegment(f);var g=f._intersection,y=h._intersection;if(g){i(g,y);for(var _=g;_;)i(_._intersection,g),_=_._next}else f._intersection=y;n=p,r=m}for(var c=0,b=l.length;c<b;c++)l[c].clearHandles();return o||t}function a(t,e,n){var r=2e-7,i=t.x,o=t.y,s=0,u=0,l=e.length,c=[],h=Math.abs;if(n){for(var f=-(1/0),p=1/0,d=o-r,m=o+r,v=0;v<l;v++)for(var y=e[v].values,_=j.solveCubic(y,0,i,c,0,1),b=_-1;b>=0;b--){var w=j.getPoint(y,c[b]).y;w<d&&w>f?f=w:w>m&&w<p&&(p=w)}f=(f+o)/2,p=(p+o)/2,f>-(1/0)&&(s=a(new g(i,f),e).winding),p<1/0&&(u=a(new g(i,p),e).winding)}else{for(var x,E,C=i-r,S=i+r,M=0,P=0,T=!1,v=0;v<l;v++){var O=e[v],A=O.winding,y=O.values,R=y[1],L=y[7];if(O.last&&(x=O.last.winding,E=O.last.values[6],T=!1),o>=R&&o<=L||o>=L&&o<=R)if(A){var I=o===R?y[0]:o===L?y[6]:1===j.solveCubic(y,1,o,c,0,1)?j.getPoint(y,c[0]).x:null;null!=I&&(I>=C&&I<=S?T=!0:o===R&&A===x||o===R&&(i-I)*(i-E)<0||(I<C?s+=A:I>S&&(u+=A))),x=A,E=y[6]}else(i-y[0])*(i-y[6])<=0&&(T=!0);T&&(v>=l-1||e[v+1].last)&&(M+=1,P-=1)}0===s&&0===u&&(s=M,u=P)}return{winding:Math.max(h(s),h(u)),contour:!s^!u}}function s(t,e,n,r,i){var o,s=[],u=t,l=0;do{var c=t.getCurve(),h=c.getLength();s.push({segment:t,curve:c,length:h}),l+=h,t=t.getNext()}while(t&&!t._intersection&&t!==u);for(var h=l/2,f=0,p=s.length;f<p;f++){var d=s[f],m=d.length;if(h<=m){var c=d.curve,v=c._path,g=v._parent,y=c.getTimeAt(h),_=c.getPointAtTime(y),b=Math.abs(c.getTangentAtTime(y).y)<1e-7;g instanceof U&&(v=g),o=i.subtract&&n&&(v===e&&n._getWinding(_,b)||v===n&&!e._getWinding(_,b))?{winding:0}:a(_,r,b);break}h-=m}for(var f=s.length-1;f>=0;f--){var w=s[f].segment;w._winding=o.winding,w._contour=o.contour}}function u(t,e){function n(t,n){return!(!t||t._visited||!(!e||e[t._winding]||!n&&e.unite&&t._contour))}function r(t){return t===o||t===a}function i(t,i){if(!t._next)return t;for(;t;){var o=t._segment,a=o.getNext(),s=a&&a._intersection;if(o!==i&&(r(o)||r(a)||!o._visited&&!a._visited&&(!e||n(o)&&(n(a)||s&&n(s._segment)))))return t;t=t._next}return null}for(var o,a,s=[],u=0,l=t.length;u<l;u++){var h,f=null,p=!1,d=t[u],v=d._intersection;if(!d._visited&&d._path._overlapsOnly){var g=d._path,y=v._segment._path,_=g._segments,b=y._segments;if(c.equals(_,b)){(e.unite||e.intersect)&&g.getArea()&&s.push(g.clone(!1));for(var w=0,x=_.length;w<x;w++)_[w]._visited=b[w]._visited=!0}}if(n(d,!0)&&(d._path._validOverlapsOnly||!v||!v._overlap)){for(o=a=null;;){v=v&&i(v,d)||v;var E=v&&v._segment;if(r(d)?p=!0:E&&(r(E)?(p=!0,d=E):n(E,n(d,!0))&&(e&&(e.intersect||e.subtract)&&(d._visited=!0),d=E)),p||d._visited){d._visited=!0;break}if(d._path._validOverlapsOnly&&!n(d))break;f||(f=new F(M.NO_INSERT),o=d,a=E);var C=d.getNext();f.add(new k(d._point,h,C&&d._handleOut)),d._visited=!0,d=C||d._path.getFirstSegment(),h=C&&C._handleIn,v=d._intersection}if(p)f.firstSegment.setHandleIn(h),f.setClosed(!0);else if(f){var S=f.getArea(!0);Math.abs(S)>=2e-7&&console.error("Boolean operation resulted in open path","segments =",f._segments.length,"length =",f.getLength(),"area=",S),f=null}f&&(f._segments.length>8||!m.isZero(f.getArea()))&&(s.push(f),f=null)}}return s}var l={unite:{1:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0}};return{_getWinding:function(t,e){return a(t,this._getMonoCurves(),e).winding},unite:function(t){return n(this,t,"unite")},intersect:function(t){return n(this,t,"intersect")},subtract:function(t){return n(this,t,"subtract")},exclude:function(t){return n(this,t,"exclude")},divide:function(t){return e(P,[this.subtract(t),this.intersect(t)],!0,this,t)},resolveCrossings:function(){function t(t){var e=t&&t._intersection;return e&&e._overlap}var e=this._children,n=e||[this],r=!1,i=!1,a=this.getIntersections(null,function(t){return t._overlap&&(r=!0)||t.isCrossing()&&(i=!0)});if(a=N.expand(a),r)for(var s=o(a,function(t){return t._overlap}),l=s.length-1;l>=0;l--){var h=s[l]._segment,f=h.getPrevious(),p=h.getNext();if(h._path&&t(f)&&t(p)){h.remove(),f._handleOut.set(0,0),p._handleIn.set(0,0);var d=f.getCurve();d.isStraight()&&0===d.getLength()&&f.remove()}}i&&(o(a,r&&function(t){var e=t.getCurve(),n=t._intersection._curve,r=t._segment;return!!(e&&n&&e._path&&n._path)||void(r&&(r._intersection=null))}),n=u(c.each(n,function(t){this.push.apply(this,t._segments)},[])));var m,v=n.length;if(v>1){n=n.slice().sort(function(t,e){return e.getBounds().getArea()-t.getBounds().getArea()});for(var g=n[0],y=[g],_={},b="nonzero"===this.getFillRule(),w=b&&c.each(n,function(t){this.push(t.isClockwise()?1:-1)},[]),l=1;l<v;l++){for(var x=n[l],E=x.getInteriorPoint(),C=!1,S=null,P=!1,T=l-1;T>=0&&!S;T--)if(n[T].contains(E)){if(b&&!C&&(w[l]+=w[T],w[l]&&w[T])){P=_[l]=!0;break}C=!0,S=!_[T]&&n[T]}P||(x.setClockwise(S?!S.isClockwise():g.isClockwise()),y.push(x))}n=y,v=y.length}return v>1&&e?(n!==e&&this.setChildren(n,!0),m=this):1!==v||e||(n[0]!==this&&this.setSegments(n[0].removeSegments()),m=this),m||(m=new U(M.NO_INSERT),m.addChildren(n,!0),m=m.reduce(),m.copyAttributes(this),this.replaceWith(m)),m}}}),F.inject({_getMonoCurves:function(){function t(t){var e=t[1],i=t[7],o=Math.abs((e-i)/(t[0]-t[6]))<2e-7?0:e>i?-1:1,a={values:t,winding:o};r.push(a),o&&(n=a)}function e(e){if(0!==j.getLength(e)){var n=e[1],r=e[3],i=e[5],o=e[7];if(j.isStraight(e)||n>=r==r>=i&&r>=i==i>=o)t(e);else{var a=3*(r-i)-n+o,s=2*(n+i)-4*r,u=r-n,l=4e-7,c=1-l,h=[],f=m.solveQuadratic(a,s,u,h,l,c);if(f<1)t(e);else{h.sort();var p=h[0],d=j.subdivide(e,p);t(d[0]),f>1&&(p=(h[1]-p)/(1-p),d=j.subdivide(d[1],p),t(d[0])),t(d[1])}}}}var n,r=this._monoCurves;if(!r){r=this._monoCurves=[];for(var i=this.getCurves(),o=this._segments,a=0,s=i.length;a<s;a++)e(i[a].getValues());if(!this._closed&&o.length>1){var u=o[o.length-1]._point,l=o[0]._point,c=u._x,h=u._y,f=l._x,p=l._y;e([c,h,c,h,f,p,f,p])}r.length>0&&(r[0].last=n)}return r},getInteriorPoint:function(){var t=this.getBounds(),e=t.getCenter(!0);if(!this.contains(e)){for(var n=this._getMonoCurves(),r=[],i=e.y,o=[],a=0,s=n.length;a<s;a++){var u=n[a].values;if(1===n[a].winding&&i>u[1]&&i<=u[7]||i>=u[7]&&i<u[1])for(var l=j.solveCubic(u,1,i,r,0,1),c=l-1;c>=0;c--)o.push(j.getPoint(u,r[c]).x)}o.sort(function(t,e){return t-e}),e.x=(o[0]+o[1])/2}return e}}),U.inject({_getMonoCurves:function(){for(var t=this._children,e=[],n=0,r=t.length;n<r;n++)e.push.apply(e,t[n]._getMonoCurves());return e}});var V=c.extend({_class:"PathIterator",initialize:function(t,e,n,r,i){function o(t,e){var n=j.getValues(t,e,i);u.push(n),a(n,t._index,0,1)}function a(t,n,i,o){if(!(o-i>h)||r&&j.isStraight(t)||j.isFlatEnough(t,e||.25)){var s=t[6]-t[0],u=t[7]-t[1],f=Math.sqrt(s*s+u*u);f>0&&(c+=f,l.push({offset:c,curve:t,index:n,time:o}))}else{var p=j.subdivide(t,.5),d=(i+o)/2;a(p[0],n,i,d),a(p[1],n,d,o)}}for(var s,u=[],l=[],c=0,h=1/(n||32),f=t._segments,p=f[0],d=1,m=f.length;d<m;d++)s=f[d],o(p,s),p=s;t._closed&&o(s,f[0]),this.curves=u,this.parts=l,this.length=c,this.index=0},_get:function(t){for(var e,n=this.index;e=n,!(0===n||this.parts[--n].offset<t););for(var r=this.parts.length;e<r;e++){var i=this.parts[e];if(i.offset>=t){this.index=e;var o=this.parts[e-1],a=o&&o.index===i.index?o.time:0,s=o?o.offset:0;return{index:i.index,time:a+(i.time-a)*(t-s)/(i.offset-s)}}}var i=this.parts[this.parts.length-1];return{index:i.index,time:1}},drawPart:function(t,e,n){for(var r=this._get(e),i=this._get(n),o=r.index,a=i.index;o<=a;o++){var s=j.getPart(this.curves[o],o===r.index?r.time:0,o===i.index?i.time:1);o===r.index&&t.moveTo(s[0],s[1]),t.bezierCurveTo.apply(t,s.slice(2))}}},c.each(j._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this._get(e);return j[t](this.curves[n.index],n.time)}},{})),z=c.extend({initialize:function(t){for(var e,n=this.points=[],r=t._segments,i=t._closed,o=0,a=r.length;o<a;o++){var s=r[o].point;e&&e.equals(s)||n.push(e=s.clone())}i&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=i},fit:function(t){var e=this.points,n=e.length,r=null;return n>0&&(r=[new k(e[0])],n>1&&(this.fitCubic(r,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(t,e,n,r,i,o){var a=this.points;if(r-n===1){var s=a[n],u=a[r],l=s.getDistance(u)/3;return void this.addCurve(t,[s,s.add(i.normalize(l)),u.add(o.normalize(l)),u])}for(var c,h=this.chordLengthParameterize(n,r),f=Math.max(e,e*e),p=!0,d=0;d<=4;d++){var m=this.generateBezier(n,r,h,i,o),v=this.findMaxError(n,r,m,h);if(v.error<e&&p)return void this.addCurve(t,m);if(c=v.index,v.error>=f)break;p=this.reparameterize(n,r,h,m),f=v.error}var g=a[c-1].subtract(a[c+1]);this.fitCubic(t,e,n,c,i,g),this.fitCubic(t,e,c,r,g.negate(),o)},addCurve:function(t,e){var n=t[t.length-1];n.setHandleOut(e[1].subtract(e[0])),t.push(new k(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,r,i){for(var o=1e-12,a=Math.abs,s=this.points,u=s[t],l=s[e],c=[[0,0],[0,0]],h=[0,0],f=0,p=e-t+1;f<p;f++){var d=n[f],m=1-d,v=3*d*m,g=m*m*m,y=v*m,_=v*d,b=d*d*d,w=r.normalize(y),x=i.normalize(_),E=s[t+f].subtract(u.multiply(g+y)).subtract(l.multiply(_+b));c[0][0]+=w.dot(w),c[0][1]+=w.dot(x),c[1][0]=c[0][1],c[1][1]+=x.dot(x),h[0]+=w.dot(E),h[1]+=x.dot(E)}var C,S,M=c[0][0]*c[1][1]-c[1][0]*c[0][1];if(a(M)>o){var P=c[0][0]*h[1]-c[1][0]*h[0],T=h[0]*c[1][1]-h[1]*c[0][1];C=T/M,S=P/M}else{var O=c[0][0]+c[0][1],A=c[1][0]+c[1][1];C=S=a(O)>o?h[0]/O:a(A)>o?h[1]/A:0}var R,L,I=l.getDistance(u),k=o*I;if(C<k||S<k)C=S=I/3;else{var D=l.subtract(u);R=r.normalize(C),L=i.normalize(S),R.dot(D)-L.dot(D)>I*I&&(C=S=I/3,R=L=null)}return[u,u.add(R||r.normalize(C)),l.add(L||i.normalize(S)),l]},reparameterize:function(t,e,n,r){for(var i=t;i<=e;i++)n[i-t]=this.findRoot(r,this.points[i],n[i-t]);for(var i=1,o=n.length;i<o;i++)if(n[i]<=n[i-1])return!1;return!0},findRoot:function(t,e,n){for(var r=[],i=[],o=0;o<=2;o++)r[o]=t[o+1].subtract(t[o]).multiply(3);for(var o=0;o<=1;o++)i[o]=r[o+1].subtract(r[o]).multiply(2);var a=this.evaluate(3,t,n),s=this.evaluate(2,r,n),u=this.evaluate(1,i,n),l=a.subtract(e),c=s.dot(s)+l.dot(u);return Math.abs(c)<1e-6?n:n-l.dot(s)/c},evaluate:function(t,e,n){for(var r=e.slice(),i=1;i<=t;i++)for(var o=0;o<=t-i;o++)r[o]=r[o].multiply(1-n).add(r[o+1].multiply(n));return r[0]},chordLengthParameterize:function(t,e){for(var n=[0],r=t+1;r<=e;r++)n[r-t]=n[r-t-1]+this.points[r].getDistance(this.points[r-1]);for(var r=1,i=e-t;r<=i;r++)n[r]/=n[i];return n},findMaxError:function(t,e,n,r){for(var i=Math.floor((e-t+1)/2),o=0,a=t+1;a<e;a++){var s=this.evaluate(3,n,r[a-t]),u=s.subtract(this.points[a]),l=u.x*u.x+u.y*u.y;l>=o&&(o=l,i=a)}return{error:o,index:i}}}),G=M.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&c.isPlainObject(t)&&t.x===s&&t.y===s;this._initialize(e&&t,!e&&g.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),H=G.extend({_class:"PointText",initialize:function(){G.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new y(t.x,t.y,this,"setPoint")},setPoint:function(){var t=g.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var r=this._lines,i=this._style,o=i.hasFill(),a=i.hasStroke(),s=i.getLeading(),u=t.shadowColor;t.font=i.getFontStyle(),t.textAlign=i.getJustification();for(var l=0,c=r.length;l<c;l++){t.shadowColor=u;var h=r[l];o&&(t.fillText(h,0,0),t.shadowColor="rgba(0,0,0,0)"),a&&t.strokeText(h,0,0),t.translate(0,s)}}},_getBounds:function(t,e){var n=this._style,r=this._lines,i=r.length,o=n.getJustification(),a=n.getLeading(),s=this.getView().getTextWidth(n.getFontStyle(),r),u=0;"left"!==o&&(u-=s/("center"===o?2:1));var l=new w(u,i?-.75*a:0,s,i*a);return t?t._transformBounds(l,l):l}}),W=c.extend(new function(){function t(t){var n,r=t.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(r){n=[0,0,0];for(var o=0;o<3;o++){var a=r[o+1];n[o]=parseInt(1==a.length?a+a:a,16)/255}}else if(r=t.match(/^rgba?\((.*)\)$/)){n=r[1].split(",");for(var o=0,s=n.length;o<s;o++){var a=+n[o];n[o]=o<3?a/255:a}}else if(u){var l=i[t];if(!l){e||(e=at.getContext(1,1),e.globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var c=e.getImageData(0,0,1,1).data;l=i[t]=[c[0]/255,c[1]/255,c[2]/255]}n=l.slice()}else n=[0,0,0];return n}var e,n={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},r={},i={},o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],a={"rgb-hsb":function(t,e,n){var r=Math.max(t,e,n),i=Math.min(t,e,n),o=r-i,a=0===o?0:60*(r==t?(e-n)/o+(e<n?6:0):r==e?(n-t)/o+2:(t-e)/o+4);return[a,0===r?0:o/r,r]},"hsb-rgb":function(t,e,n){t=(t/60%6+6)%6;var r=Math.floor(t),i=t-r,r=o[r],a=[n,n*(1-e),n*(1-e*i),n*(1-e*(1-i))];return[a[r[0]],a[r[1]],a[r[2]]]},"rgb-hsl":function(t,e,n){var r=Math.max(t,e,n),i=Math.min(t,e,n),o=r-i,a=0===o,s=a?0:60*(r==t?(e-n)/o+(e<n?6:0):r==e?(n-t)/o+2:(t-e)/o+4),u=(r+i)/2,l=a?0:u<.5?o/(r+i):o/(2-r-i);return[s,l,u]},"hsl-rgb":function(t,e,n){if(t=(t/360%1+1)%1,0===e)return[n,n,n];for(var r=[t+1/3,t,t-1/3],i=n<.5?n*(1+e):n+e-n*e,o=2*n-i,a=[],s=0;s<3;s++){var u=r[s];u<0&&(u+=1),u>1&&(u-=1),a[s]=6*u<1?o+6*(i-o)*u:2*u<1?i:3*u<2?o+(i-o)*(2/3-u)*6:o}return a},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return c.each(n,function(t,e){r[e]=[],c.each(t,function(t,i){var o=c.capitalize(t),a=/^(hue|saturation)$/.test(t),s=r[e][i]="gradient"===t?function(t){var e=this._components[0];return t=X.read(Array.isArray(t)?t:arguments,0,{readNull:!0}),e!==t&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===e?function(){return g.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+o]=function(){return this._type===e||a&&/^hs[bl]$/.test(this._type)?this._components[i]:this._convert(e)[i]},this["set"+o]=function(t){this._type===e||a&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),this._properties=n[e],this._type=e),this._components[i]=s.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function e(i){var o,a,s,u,l=Array.prototype.slice,c=arguments,h=this.__read,f=0;Array.isArray(i)&&(c=i,i=c[0]);var p=null!=i&&typeof i;if("string"===p&&i in n&&(o=i,i=c[1],Array.isArray(i)?(a=i,s=c[2]):(h&&(f=1),c=l.call(c,1),p=typeof i)),!a){if(u="number"===p?c:"object"===p&&null!=i.length?i:null){o||(o=u.length>=3?"rgb":"gray");var d=n[o].length;s=u[d],h&&(f+=u===arguments?d+(null!=s?1:0):1),u.length>d&&(u=l.call(u,0,d))}else if("string"===p)o="rgb",a=t(i),4===a.length&&(s=a[3],a.length--);else if("object"===p)if(i.constructor===e){if(o=i._type,a=i._components.slice(),s=i._alpha,"gradient"===o)for(var m=1,v=a.length;m<v;m++){var g=a[m];g&&(a[m]=g.clone())}}else if(i.constructor===X)o="gradient",u=c;else{o="hue"in i?"lightness"in i?"hsl":"hsb":"gradient"in i||"stops"in i||"radial"in i?"gradient":"gray"in i?"gray":"rgb";var y=n[o],_=r[o];this._components=a=[];for(var m=0,v=y.length;m<v;m++){var b=i[y[m]];null==b&&0===m&&"gradient"===o&&"stops"in i&&(b={stops:i.stops,radial:i.radial}),b=_[m].call(this,b),null!=b&&(a[m]=b)}s=i.alpha}h&&o&&(f=1)}if(this._type=o||"rgb",!a){this._components=a=[];for(var _=r[this._type],m=0,v=_.length;m<v;m++){var b=_[m].call(this,u&&u[m]);null!=b&&(a[m]=b)}}this._components=a,this._properties=n[this._type],this._alpha=s,h&&(this.__read=f)},_set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return c.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=a[this._type+"-"+t])?e.apply(this,this._components):a["rgb-"+t].apply(this,a[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new W(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=n[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=c.isPlainValue(t,!0)?W.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this._alpha===e._alpha&&c.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,r=d.instance,i=0,o=t.length;i<o;i++){var a=this._components[i];null!=a&&e.push(t[i]+": "+(n?a:r.number(a)))}return null!=this._alpha&&e.push("alpha: "+r.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(t<0?0:t>1?1:t))}var n=this._convert("rgb"),r=t||null==this._alpha?1:this._alpha;return n=[e(n[0]),e(n[1]),e(n[2])],r<1&&n.push(r<0?0:r),t?"#"+((1<<24)+(n[0]<<16)+(n[1]<<8)+n[2]).toString(16).slice(1):(4==n.length?"rgba(":"rgb(")+n.join(",")+")"},toCanvasStyle:function(t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var e,n=this._components,r=n[0],i=r._stops,o=n[1],a=n[2];if(r._radial){var s=a.getDistance(o),u=n[3];if(u){var l=u.subtract(o);l.getLength()>s&&(u=o.add(l.normalize(s-.1)))}var c=u||o;e=t.createRadialGradient(c.x,c.y,0,o.x,o.y,s)}else e=t.createLinearGradient(o.x,o.y,a.x,a.y);for(var h=0,f=i.length;h<f;h++){var p=i[h];e.addColorStop(p._offset||h/(f-1),p._color.toCanvasStyle())}return this._canvasStyle=e},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,r=e.length;n<r;n++){var i=e[n];t._transformPoint(i,i,!0)}this._changed()}},statics:{_types:n,random:function(){var t=Math.random;return new W(t(),t(),t())}}})},new function(){var t={add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}};return c.each(t,function(t,e){this[e]=function(e){e=W.read(arguments);for(var n=this._type,r=this._components,i=e._convert(n),o=0,a=r.length;o<a;o++)i[o]=t(r[o],i[o]);return new W(n,i,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),X=c.extend({_class:"Gradient",initialize:function(t,e){this._id=v.get(),t&&this._set(t)&&(t=e=null),this._stops||this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return c.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;e!=-1&&(this._owners.splice(e,1),0===this._owners.length&&(this._owners=s))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new X(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var n=0,r=e.length;n<r;n++)e[n]._owner=s;e=this._stops=q.readAll(t,0,{clone:!0});for(var n=0,r=e.length;n<r;n++)e[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,r=e.length;if(r===n.length){for(var i=0;i<r;i++)if(!e[i].equals(n[i]))return!1;return!0}}return!1}}),q=c.extend({_class:"GradientStop",initialize:function(t,e){var n=t,r=e;"object"==typeof t&&e===s&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],r=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,r=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(r)},clone:function(){return new q(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,r=this._offset;return c.serialize(null==r?[n]:[n,r],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=W.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Y=c.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new g,selectedColor:null},e=c.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=c.set({},e,{fillColor:new W}),r={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},i={beans:!0},a={_class:"Style",beans:!0,initialize:function(r,i,a){this._values={},this._owner=i,this._project=i&&i._project||a||o.project,this._defaults=!i||i instanceof P?e:i instanceof G?n:t,r&&this.set(r)}};return c.each(e,function(t,e){var n=/Color$/.test(e),o="shadowOffset"===e,u=c.capitalize(e),l=r[e],h="set"+u,f="get"+u;a[h]=function(t){var r=this._owner,i=r&&r._children;if(i&&i.length>0&&!(r instanceof U))for(var o=0,a=i.length;o<a;o++)i[o]._style[h](t);else if(e in this._defaults){var u=this._values[e];u!==t&&(n&&(u&&u._owner!==s&&(u._owner=s),t&&t.constructor===W&&(t._owner&&(t=t.clone()),t._owner=r)),this._values[e]=t,r&&r._changed(l||65))}},a[f]=function(t){var r,i=this._owner,a=i&&i._children;if(e in this._defaults&&(!a||0===a.length||t||i instanceof U)){var r=this._values[e];if(r===s)r=this._defaults[e],r&&r.clone&&(r=r.clone());else{var u=n?W:o?g:null;!u||r&&r.constructor===u||(this._values[e]=r=u.read([r],0,{readNull:!0,clone:!0}),r&&n&&(r._owner=i))}}else if(a)for(var l=0,h=a.length;l<h;l++){var p=a[l]._style[f]();if(0===l)r=p;else if(!c.equals(r,p))return s}return r},i[f]=function(t){return this._style[f](t)},i[h]=function(t){this._style[h](t)}}),c.each({Font:"FontFamily",WindingRule:"FillRule"},function(t,e){var n="get"+e,r="set"+e;a[n]=i[n]="#get"+t,a[r]=i[r]="#set"+t}),M.inject(i),a},{set:function(t){var e=t instanceof Y,n=e?t._values:t;if(n)for(var r in n)if(r in this._defaults){var i=n[r];this[r]=i&&e&&i.clone?i.clone():i}},equals:function(t){return t===this||t&&this._class===t._class&&c.equals(this._values,t._values)||!1},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily();
},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),K=new function(){function t(t,e,n,r){for(var i=["","webkit","moz","Moz","ms","o"],o=e[0].toUpperCase()+e.substring(1),a=0;a<6;a++){var s=i[a],u=s?s+o:e;if(u in t){if(!n)return t[u];t[u]=r;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,r=t.ownerDocument,i=r.body,o=r.documentElement;try{n=t.getBoundingClientRect()}catch(a){n={left:0,top:0,width:0,height:0}}var s=n.left-(o.clientLeft||i.clientLeft||0),u=n.top-(o.clientTop||i.clientTop||0);if(!e){var l=r.defaultView;s+=l.pageXOffset||o.scrollLeft||i.scrollLeft,u+=l.pageYOffset||o.scrollTop||i.scrollTop}return new w(s,u,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,r=e.documentElement;return new w(0,0,n.innerWidth||r.clientWidth,n.innerHeight||r.clientHeight)},getOffset:function(t,e){return K.getBounds(t,e).getPoint()},getSize:function(t){return K.getBounds(t,!0).getSize()},isInvisible:function(t){return K.getSize(t).equals(new _(0,0))},isInView:function(t){return!K.isInvisible(t)&&K.getViewportBounds(t).intersects(K.getBounds(t,!0))},isInserted:function(t){return l.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,r){if("object"==typeof n)for(var i in n)t(e,i,!0,n[i]);else t(e,n,!0,r)}}},Z={add:function(t,e){if(t)for(var n in e)for(var r=e[n],i=n.split(/[\s,]+/g),o=0,a=i.length;o<a;o++)t.addEventListener(i[o],r,!1)},remove:function(t,e){if(t)for(var n in e)for(var r=e[n],i=n.split(/[\s,]+/g),o=0,a=i.length;o<a;o++)t.removeEventListener(i[o],r,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new g(e.pageX||e.clientX+l.documentElement.scrollLeft,e.pageY||e.clientY+l.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return Z.getPoint(t).subtract(K.getOffset(e||Z.getTarget(t)))}};Z.requestAnimationFrame=new function(){function t(){var e=i;i=[];for(var o=0,a=e.length;o<a;o++)e[o]();r=n&&i.length,r&&n(t)}var e,n=K.getPrefixed(u,"requestAnimationFrame"),r=!1,i=[];return function(o){i.push(o),n?r||(n(t),r=!0):e||(e=setInterval(t,1e3/60))}};var J=c.extend(h,{_class:"View",initialize:function t(e,n){function r(t){return n[t]||parseInt(n.getAttribute(t),10)}function i(){var t=K.getSize(n);return t.isNaN()||t.isZero()?new _(r("width"),r("height")):t}var a;if(u&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="view-"+t._id++),Z.add(n,this._viewEvents);var s="none";if(K.setPrefixed(n.style,{userDrag:s,userSelect:s,touchCallout:s,contentZooming:s,tapHighlightColor:"rgba(0,0,0,0)"}),f.hasAttribute(n,"resize")){var c=this;Z.add(u,this._windowEvents={resize:function(){c.setViewSize(i())}})}if(a=i(),f.hasAttribute(n,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var h=this._stats.domElement,p=h.style,d=K.getOffset(n);p.position="absolute",p.left=d.x+"px",p.top=d.y+"px",l.body.appendChild(h)}}else a=new _(n),n=null;this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new E)._owner=this,this._zoom=1,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!o.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;J._focused===this&&(J._focused=null),J._views.splice(J._views.indexOf(this),1),delete J._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Z.remove(this._element,this._viewEvents),Z.remove(u,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:c.each(M._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Z.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;K.getPrefixed(l,"hidden")&&"true"!==f.getAttribute(e,"keepalive")||!K.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){o=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new c({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new c(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=null},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new b(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=_.read(arguments),e=t.width,n=t.height,r=t.subtract(this._viewSize);r.isZero()||(this._setElementSize(e,n),this._viewSize.set(e,n),this.emit("resize",{size:t,delta:r}),this._changed(),this._autoUpdate&&this.requestUpdate())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new w(new g,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=g.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){return this._zoom},setZoom:function(t){this.transform((new E).scale(t/this._zoom,this.getCenter())),this._zoom=t},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},isVisible:function(){return K.isInView(this._element)},isInserted:function(){return K.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var r=n.parentNode,i=l.createElement("div");i.style.fontSize=t,r.appendChild(i),e=parseFloat(K.getStyles(i).fontSize),r.removeChild(i)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},c.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=(e?c:g).read(arguments),r=g.read(arguments,0,{readNull:!0});return this.transform((new E)[t](n,r||this.getCenter(!0)))}},{translate:function(){var t=new E;return this.transform(t.translate.apply(t,arguments))},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(g.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(g.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(g.read(arguments))},getEventPoint:function(t){return this.viewToProject(Z.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){l&&"string"==typeof e&&(e=l.getElementById(e));var n=u?Q:J;return new n(t,e)}}},new function(){function t(t){var e=Z.getTarget(t);return e.getAttribute&&J._viewsById[e.getAttribute("id")]}function e(){var t=J._focused;if(!t||!t.isVisible())for(var e=0,n=J._views.length;e<n;e++)if((t=J._views[e]).isVisible()){J._focused=s=t;break}}function n(t,e,n){t._handleMouseEvent("mousemove",e,n)}function r(t,e,n,r,i,o,a){function s(t,n){if(t.responds(n)){if(u||(u=new nt(n,r,i,e||t,o?i.subtract(o):null)),t.emit(n,u)&&(P=!0,u.prevented&&(T=!0),u.stopped))return l=!0}else{var a=O[n];if(a)return s(t,a)}}for(var u,l=!1;t&&t!==a&&!s(t,n);)t=t._parent;return l}function i(t,e,n,i,o,a){return t._project.removeOn(n),T=P=!1,E&&r(E,null,n,i,o,a)||e&&e!==E&&!e.isDescendant(E)&&r(e,null,O[n]||n,i,o,a,E)||r(t,E||e||t,n,i,o,a)}if(u){var a,s,c,h,f,p=!1,d=!1,m=u.navigator;m.pointerEnabled||m.msPointerEnabled?(c="pointerdown MSPointerDown",h="pointermove MSPointerMove",f="pointerup pointercancel MSPointerUp MSPointerCancel"):(c="touchstart",h="touchmove",f="touchend touchcancel","ontouchstart"in u&&m.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(c+=" mousedown",h+=" mousemove",f+=" mouseup"));var v={},g={mouseout:function(t){var e=J._focused,r=Z.getRelatedTarget(t);if(e&&(!r||"HTML"===r.nodeName)){var i=Z.getOffset(t,e._element),o=i.x,a=Math.abs,s=a(o),u=1<<25,l=s-u;i.x=a(l)<s?l*(o<0?-1:1):o,n(e,t,e.viewToProject(i))}},scroll:e};v[c]=function(e){var n=J._focused=t(e);p||(p=!0,n._handleMouseEvent("mousedown",e))},g[h]=function(r){var i=J._focused;if(!d){var o=t(r);o?i!==o&&(i&&n(i,r),a||(a=i),i=J._focused=s=o):s&&s===i&&(a&&!a.isInserted()&&(a=null),i=J._focused=a,a=null,e())}i&&n(i,r)},g[c]=function(){d=!0},g[f]=function(t){var e=J._focused;e&&p&&e._handleMouseEvent("mouseup",t),d=p=!1},Z.add(l,g),Z.add(u,{load:e});var y,_,b,w,x,E,C,S,M,P=!1,T=!1,O={doubleclick:"click",mousedrag:"mousemove"},A=!1,R={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:v,_handleMouseEvent:function(t,e,n){function o(t){return a.virtual[t]||c.responds(t)||l&&l.responds(t)}var a=this._itemEvents,s=a.native[t],u="mousemove"===t,l=this._scope.tool,c=this;u&&p&&o("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var h=this.getBounds().contains(n),f=s&&h&&c._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),d=f&&f.item||null,m=!1,v={};v[t.substr(5)]=!0,s&&d!==x&&(x&&r(x,null,"mouseleave",e,n),d&&r(d,null,"mouseenter",e,n),x=d),A^h&&(r(this,null,h?"mouseenter":"mouseleave",e,n),y=h?this:null,m=!0),!h&&!v.drag||n.equals(b)||(i(this,d,u?t:"mousemove",e,n,b),m=!0),A=h,(v.down&&h||v.up&&_)&&(i(this,d,t,e,n,_),v.down?(M=d===C&&Date.now()-S<300,w=C=d,E=!T&&d,_=n):v.up&&(T||d!==w||(S=Date.now(),i(this,d,M?"doubleclick":"click",e,n,_),M=!1),w=E=null),A=!1,m=!0),b=n,m&&l&&(P=l._handleMouseEvent(t,e,n,v)||P),(P&&!v.move||v.down&&o("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,r){function i(i){i.responds(t)&&(o=s,i.emit(t,a=a||new tt(t,e,n,r)))}var a,s=this._scope,u=s.tool;this.isVisible()&&(i(this),u&&u.responds(t)&&i(u))},_countItemEvent:function(t,e){var n=this._itemEvents,r=n.native,i=n.virtual;for(var o in R)r[o]=(r[o]||0)+(R[o][t]||0)*e;i[t]=(i[t]||0)+e},statics:{updateFocus:e}}}}),Q=J.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof u.HTMLCanvasElement)){var n=_.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+[].slice.call(arguments,1));e=at.getCanvas(n)}var r=this._context=e.getContext("2d");if(r.save(),this._pixelRatio=1,!/^off|false$/.test(f.getAttribute(e,"hidpi"))){var i=u.devicePixelRatio||1,o=K.getPrefixed(r,"backingStorePixelRatio")||1;this._pixelRatio=i/o}J.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var r=this._pixelRatio;if(t.base.call(this,e*r,n*r),1!==r){var i=this._element,o=this._context;if(!f.hasAttribute(i,"resize")){var a=i.style;a.width=e+"px",a.height=n+"px"}o.restore(),o.save(),o.scale(r,r)}},getPixelSize:function t(e){var n,r=o.agent;if(r&&r.firefox)n=t.base.call(this,e);else{var i=this._context,a=i.font;i.font=e+" serif",n=parseFloat(i.font),i.font=a}return n},getTextWidth:function(t,e){var n=this._context,r=n.font,i=0;n.font=t;for(var o=0,a=e.length;o<a;o++)i=Math.max(i,n.measureText(e[o]).width);return n.font=r,i},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),$=c.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return et.modifiers}}),tt=$.extend({_class:"KeyEvent",initialize:function(t,e,n,r){this.type=t,this.event=e,this.key=n,this.character=r},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),et=new function(){function t(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e?String.fromCharCode(t.keyCode):e,i[e]||(e.length>1?c.hyphenate(e):e.toLowerCase())}function e(t,r,i,a){var u,l=J._focused;if(s[r]=t,t?h[r]=i:delete h[r],r.length>1&&(u=c.camelize(r))in f){f[u]=t;var p=o&&o.agent;if("meta"===u&&p&&p.mac)if(t)n={};else{for(var d in n)d in h&&e(!1,d,n[d],a);n=null}}else t&&n&&(n[r]=i);l&&l._handleKeyEvent(t?"keydown":"keyup",a,r,i)}var n,r,i={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},a={tab:"\t",space:" ",enter:"\r"},s={},h={},f=new c({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=o&&o.agent;return t&&t.mac?this.meta:this.control}}});return Z.add(l,{keydown:function(n){var i=t(n),s=o&&o.agent;i.length>1||s&&s.chrome&&(n.altKey||s.mac&&n.metaKey||!s.mac&&n.ctrlKey)?e(!0,i,a[i]||(i.length>1?"":i),n):r=i},keypress:function(n){if(r){var i=t(n),o=n.charCode,a=o>=32?String.fromCharCode(o):i.length>1?"":i;i!==r&&(i=a.toLowerCase()),e(!0,i,a,n),r=null}},keyup:function(n){var r=t(n);r in h&&e(!1,r,h[r],n)}}),Z.add(u,{blur:function(t){for(var n in h)e(!1,n,h[n],t)}}),{modifiers:f,isDown:function(t){return!!s[t]}}},nt=$.extend({_class:"MouseEvent",initialize:function(t,e,n,r,i){this.type=t,this.event=e,this.point=n,this.target=r,this.delta=i},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),rt=$.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t?t:e?e.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),it=p.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){p.call(this),this._moveCount=-1,this._downCount=-1,this._set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,r){function i(t,e){var i=n,o=s?f._point:f._downPoint||i;if(s){if(f._moveCount&&i.equals(o))return!1;if(o&&(null!=t||null!=e)){var a=i.subtract(o),u=a.getLength();if(u<(t||0))return!1;e&&(i=o.add(a.normalize(Math.min(u,e))))}f._moveCount++}return f._point=i,f._lastPoint=o||i,r.down&&(f._moveCount=-1,f._downPoint=i,f._downCount++),!0}function a(){u&&(h=f.emit(t,new rt(f,t,e))||h)}o=this._scope,r.drag&&!this.responds(t)&&(t="mousemove");var s=r.move||r.drag,u=this.responds(t),l=this.minDistance,c=this.maxDistance,h=!1,f=this;if(r.down)i(),a();else if(r.up)i(null,c),a();else if(u)for(;i(l,c);)a();return h}}),ot={request:function(t){var e=new u.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,c.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var n=e.status;0===n||200===n?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var n=e.status,r='Could not load "'+t.url+'" (Status: '+n+")";if(!t.onError)throw new Error(r);t.onError(r,n)},e.send(null)}},at={canvases:[],getCanvas:function(t,e){if(!u)return null;var n,r=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=l.createElement("canvas"),r=!1);var i=n.getContext("2d");if(!i)throw new Error("Canvas "+n+" is unable toprovide a 2D context.");return n.width===t&&n.height===e?r&&i.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),i.save(),n},getContext:function(t,e){var n=this.getCanvas(t,e);return n?n.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},st=new function(){function t(t,e,n){return.2989*t+.587*e+.114*n}function e(e,n,r,i){var o=i-t(e,n,r);p=e+o,d=n+o,m=r+o;var i=t(p,d,m),a=v(p,d,m),s=g(p,d,m);if(a<0){var u=i-a;p=i+(p-i)*i/u,d=i+(d-i)*i/u,m=i+(m-i)*i/u}if(s>255){var l=255-i,c=s-i;p=i+(p-i)*l/c,d=i+(d-i)*l/c,m=i+(m-i)*l/c}}function n(t,e,n){return g(t,e,n)-v(t,e,n)}function r(t,e,n,r){var i,o=[t,e,n],a=g(t,e,n),s=v(t,e,n);s=s===t?0:s===e?1:2,a=a===t?0:a===e?1:2,i=0===v(s,a)?1===g(s,a)?2:1:0,o[a]>o[s]?(o[i]=(o[i]-o[s])*r/(o[a]-o[s]),o[a]=r):o[i]=o[a]=0,o[s]=0,p=o[0],d=o[1],m=o[2]}var i,o,a,s,u,l,h,f,p,d,m,v=Math.min,g=Math.max,y=Math.abs,_={multiply:function(){p=u*i/255,d=l*o/255,m=h*a/255},screen:function(){p=u+i-u*i/255,d=l+o-l*o/255,m=h+a-h*a/255},overlay:function(){p=u<128?2*u*i/255:255-2*(255-u)*(255-i)/255,d=l<128?2*l*o/255:255-2*(255-l)*(255-o)/255,m=h<128?2*h*a/255:255-2*(255-h)*(255-a)/255},"soft-light":function(){var t=i*u/255;p=t+u*(255-(255-u)*(255-i)/255-t)/255,t=o*l/255,d=t+l*(255-(255-l)*(255-o)/255-t)/255,t=a*h/255,m=t+h*(255-(255-h)*(255-a)/255-t)/255},"hard-light":function(){p=i<128?2*i*u/255:255-2*(255-i)*(255-u)/255,d=o<128?2*o*l/255:255-2*(255-o)*(255-l)/255,m=a<128?2*a*h/255:255-2*(255-a)*(255-h)/255},"color-dodge":function(){p=0===u?0:255===i?255:v(255,255*u/(255-i)),d=0===l?0:255===o?255:v(255,255*l/(255-o)),m=0===h?0:255===a?255:v(255,255*h/(255-a))},"color-burn":function(){p=255===u?255:0===i?0:g(0,255-255*(255-u)/i),d=255===l?255:0===o?0:g(0,255-255*(255-l)/o),m=255===h?255:0===a?0:g(0,255-255*(255-h)/a)},darken:function(){p=u<i?u:i,d=l<o?l:o,m=h<a?h:a},lighten:function(){p=u>i?u:i,d=l>o?l:o,m=h>a?h:a},difference:function(){p=u-i,p<0&&(p=-p),d=l-o,d<0&&(d=-d),m=h-a,m<0&&(m=-m)},exclusion:function(){p=u+i*(255-u-u)/255,d=l+o*(255-l-l)/255,m=h+a*(255-h-h)/255},hue:function(){r(i,o,a,n(u,l,h)),e(p,d,m,t(u,l,h))},saturation:function(){r(u,l,h,n(i,o,a)),e(p,d,m,t(u,l,h))},luminosity:function(){e(u,l,h,t(i,o,a))},color:function(){e(i,o,a,t(u,l,h))},add:function(){p=v(u+i,255),d=v(l+o,255),m=v(h+a,255)},subtract:function(){p=g(u-i,0),d=g(l-o,0),m=g(h-a,0)},average:function(){p=(u+i)/2,d=(l+o)/2,m=(h+a)/2},negation:function(){p=255-y(255-i-u),d=255-y(255-o-l),m=255-y(255-a-h)}},b=this.nativeModes=c.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),w=at.getContext(1,1);w&&(c.each(_,function(t,e){var n="darken"===e,r=!1;w.save();try{w.fillStyle=n?"#300":"#a00",w.fillRect(0,0,1,1),w.globalCompositeOperation=e,w.globalCompositeOperation===e&&(w.fillStyle=n?"#a00":"#300",w.fillRect(0,0,1,1),r=w.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(i){}w.restore(),b[e]=r}),at.release(w)),this.process=function(t,e,n,r,c){var v=e.canvas,g="normal"===t;if(g||b[t])n.save(),n.setTransform(1,0,0,1,0,0),n.globalAlpha=r,g||(n.globalCompositeOperation=t),n.drawImage(v,c.x,c.y),n.restore();else{var y=_[t];if(!y)return;for(var w=n.getImageData(c.x,c.y,v.width,v.height),x=w.data,E=e.getImageData(0,0,v.width,v.height).data,C=0,S=x.length;C<S;C+=4){i=E[C],u=x[C],o=E[C+1],l=x[C+1],a=E[C+2],h=x[C+2],s=E[C+3],f=x[C+3],y();var M=s*r/255,P=1-M;x[C]=M*p+P*u,x[C+1]=M*d+P*l,x[C+2]=M*m+P*h,x[C+3]=s*r+P*f}n.putImageData(w,c.x,c.y)}}},ut=new function(){function t(t,e,i){return n(l.createElementNS(r,t),e,i)}function e(t,e){var n=a[e],r=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===r?null:r}function n(t,e,n){for(var r in e){var i=e[r],o=a[r];"number"==typeof i&&n&&(i=n.number(i)),o?t.setAttributeNS(o,r,i):t.setAttribute(r,i)}return t}var r="http://www.w3.org/2000/svg",i="http://www.w3.org/2000/xmlns",o="http://www.w3.org/1999/xlink",a={href:o,xlink:i,xmlns:i+"/","xmlns:xlink":i+"/"};return{svg:r,xmlns:i,xlink:o,create:t,get:e,set:n}},lt=c.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof B||t instanceof O||t instanceof G)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var n=c.capitalize(e),r=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:r,fromSVG:r&&c.each(r,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+n,set:"set"+n}},{});return new function(){function t(t,e,n){var r=new c,i=t.getTranslation();if(e){t=t._shiftless();var o=t._inverseTransform(i);r[n?"cx":"x"]=o.x,r[n?"cy":"y"]=o.y,i=null}if(!t.isIdentity()){var a=t.decompose();if(a){var s=[],u=a.rotation,l=a.scaling,h=a.skewing;i&&!i.isZero()&&s.push("translate("+b.point(i)+")"),u&&s.push("rotate("+b.number(u)+")"),m.isZero(l.x-1)&&m.isZero(l.y-1)||s.push("scale("+b.point(l)+")"),h&&h.x&&s.push("skewX("+b.number(h.x)+")"),h&&h.y&&s.push("skewY("+b.number(h.y)+")"),r.transform=s.join(" ")}else r.transform="matrix("+t.getValues().join(",")+")"}return r}function e(e,n){for(var r=t(e._matrix),i=e._children,o=ut.create("g",r,b),a=0,s=i.length;a<s;a++){var u=i[a],l=y(u,n);if(l)if(u.isClipMask()){var c=ut.create("clipPath");c.appendChild(l),p(u,c,"clip"),ut.set(o,{"clip-path":"url(#"+c.id+")"})}else o.appendChild(l)}return o}function n(e,n){var r=t(e._matrix,!0),i=e.getSize(),o=e.getImage();return r.x-=i.width/2,r.y-=i.height/2,r.width=i.width,r.height=i.height,r.href=n.embedImages===!1&&o&&o.src||e.toDataURL(),ut.create("image",r,b)}function r(e,n){var r=n.matchShapes;if(r){var o=e.toShape(!1);if(o)return i(o,n)}var a,s=e._segments,u=s.length,l=t(e._matrix);if(r&&u>=2&&!e.hasHandles())if(u>2){a=e._closed?"polygon":"polyline";for(var c=[],h=0;h<u;h++)c.push(b.point(s[h]._point));l.points=c.join(" ")}else{a="line";var f=s[0]._point,p=s[1]._point;l.set({x1:f.x,y1:f.y,x2:p.x,y2:p.y})}else a="path",l.d=e.getPathData(null,n.precision);return ut.create(a,l,b)}function i(e){var n=e._type,r=e._radius,i=t(e._matrix,!0,"rectangle"!==n);if("rectangle"===n){n="rect";var o=e._size,a=o.width,s=o.height;i.x-=a/2,i.y-=s/2,i.width=a,i.height=s,r.isZero()&&(r=null)}return r&&("circle"===n?i.r=r:(i.rx=r.width,i.ry=r.height)),ut.create(n,i,b)}function o(e,n){var r=t(e._matrix),i=e.getPathData(null,n.precision);return i&&(r.d=i),ut.create("path",r,b)}function a(e,n){var r=t(e._matrix,!0),i=e._definition,o=f(i,"symbol"),a=i._item,s=a.getBounds();return o||(o=ut.create("symbol",{viewBox:b.rectangle(s)}),o.appendChild(y(a,n)),p(i,o,"symbol")),r.href="#"+o.id,r.x+=s.x,r.y+=s.y,r.width=s.width,r.height=s.height,r.overflow="visible",ut.create("use",r,b)}function s(t){var e=f(t,"color");if(!e){var n,r=t.getGradient(),i=r._radial,o=t.getOrigin(),a=t.getDestination();if(i){n={cx:o.x,cy:o.y,r:o.getDistance(a)};var s=t.getHighlight();s&&(n.fx=s.x,n.fy=s.y)}else n={x1:o.x,y1:o.y,x2:a.x,y2:a.y};n.gradientUnits="userSpaceOnUse",e=ut.create((i?"radial":"linear")+"Gradient",n,b);for(var u=r._stops,l=0,c=u.length;l<c;l++){var h=u[l],d=h._color,m=d.getAlpha();n={offset:h._offset||l/(c-1)},d&&(n["stop-color"]=d.toCSS(!0)),m<1&&(n["stop-opacity"]=m),e.appendChild(ut.create("stop",n,b))}p(t,e,"color")}return"url(#"+e.id+")"}function l(e){var n=ut.create("text",t(e._matrix,!0),b);return n.textContent=e._content,n}function h(t,e,n){var r={},i=!n&&t.getParent(),o=[];return null!=t._name&&(r.id=t._name),c.each(lt,function(e){var n=e.get,a=e.type,u=t[n]();if(e.exportFilter?e.exportFilter(t,u):!i||!c.equals(i[n](),u)){if("color"===a&&null!=u){var l=u.getAlpha();l<1&&(r[e.attribute+"-opacity"]=l)}"style"===a?o.push(e.attribute+": "+u):r[e.attribute]=null==u?"none":"color"===a?u.gradient?s(u,t):u.toCSS(!0):"array"===a?u.join(","):"lookup"===a?e.toSVG[u]:u}}),o.length&&(r.style=o.join(";")),1===r.opacity&&delete r.opacity,t._visible||(r.visibility="hidden"),ut.set(e,r,b)}function f(t,e){x||(x={ids:{},svgs:{}});var n=t._id||t.__id||(t.__id=v.get("svg"));return t&&x.svgs[e+"-"+n]}function p(t,e,n){x||f();var r=x.ids[n]=(x.ids[n]||0)+1;e.id=n+"-"+r,x.svgs[n+"-"+(t._id||t.__id)]=e}function g(t,e){var n=t,r=null;if(x){n="svg"===t.nodeName.toLowerCase()&&t;for(var i in x.svgs)r||(n||(n=ut.create("svg"),n.appendChild(t)),r=n.insertBefore(ut.create("defs"),n.firstChild)),r.appendChild(x.svgs[i]);x=null}return e.asString?(new u.XMLSerializer).serializeToString(n):n}function y(t,e,n){var r=C[t._class],i=r&&r(t,e);if(i){var o=e.onExport;o&&(i=o(t,i,e)||i);var a=JSON.stringify(t._data);a&&"{}"!==a&&"null"!==a&&i.setAttribute("data-paper-data",a)}return i&&h(t,i,n)}function _(t){return t||(t={}),b=new d(t.precision),t}var b,x,C={Group:e,Layer:e,Raster:n,Path:r,Shape:i,CompoundPath:o,SymbolItem:a,PointText:l};M.inject({exportSVG:function(t){return t=_(t),g(y(this,t,!0),t)}}),S.inject({exportSVG:function(e){e=_(e);var n=this._children,r=this.getView(),i=c.pick(e.bounds,"view"),o=e.matrix||"view"===i&&r._matrix,a=o&&E.read([o]),s="view"===i?new w([0,0],r.getViewSize()):"content"===i?M._getBounds(n,a,{stroke:!0}):w.read([i],0,{readNull:!0}),u={version:"1.1",xmlns:ut.svg,"xmlns:xlink":ut.xlink};s&&(u.width=s.width,u.height=s.height,(s.x||s.y)&&(u.viewBox=b.rectangle(s)));var l=ut.create("svg",u,b),h=l;a&&!a.isIdentity()&&(h=l.appendChild(ut.create("g",t(a),b)));for(var f=0,p=n.length;f<p;f++)h.appendChild(y(n[f],e,!0));return g(l,e)}})},new function(){function t(t,e,n,r,i){var o=ut.get(t,e),a=null==o?r?null:n?"":0:n?o:parseFloat(o);return/%\s*$/.test(o)?a/100*(i?1:C[/x|^width/.test(e)?"width":"height"]):a}function e(e,n,r,i,o){return n=t(e,n||"x",!1,i,o),r=t(e,r||"y",!1,i,o),!i||null!=n&&null!=r?new g(n,r):null}function n(e,n,r,i,o){return n=t(e,n||"width",!1,i,o),r=t(e,r||"height",!1,i,o),!i||null!=n&&null!=r?new _(n,r):null}function r(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?y(t)||t:"lookup"===e?n[t]:t}function i(t,e,n,r){var i=t.childNodes,o="clippath"===e,a="defs"===e,s=new P,u=s._project,l=u._currentStyle,c=[];if(o||a||(s=v(s,t,r),u._currentStyle=s._style.clone()),r)for(var h=t.querySelectorAll("defs"),f=0,p=h.length;f<p;f++)b(h[f],n,!1);for(var f=0,p=i.length;f<p;f++){var d,m=i[f];1!==m.nodeType||/^defs$/i.test(m.nodeName)||!(d=b(m,n,!1))||d instanceof L||c.push(d)}return s.addChildren(c),o&&(s=v(s.reduce(),t,r)),u._currentStyle=l,(o||a)&&(s.remove(),s=null),s}function a(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),r=[],i=0,o=n.length;i<o;i+=2)r.push(new g(parseFloat(n[i]),parseFloat(n[i+1])));var a=new F(r);return"polygon"===e&&a.closePath(),a}function h(t){return B.create(t.getAttribute("d"))}function f(n,r){var i,o=(t(n,"href",!0)||"").substring(1),a="radialgradient"===r;if(o)i=T[o].getGradient(),i._radial^a&&(i=i.clone(),i._radial=a);else{for(var s=n.childNodes,u=[],l=0,c=s.length;l<c;l++){var h=s[l];1===h.nodeType&&u.push(v(new q,h))}i=new X(u,a)}var f,p,d,m="userSpaceOnUse"!==t(n,"gradientUnits",!0);a?(f=e(n,"cx","cy",!1,m),p=f.add(t(n,"r",!1,!1,m),0),d=e(n,"fx","fy",!0,m)):(f=e(n,"x1","y1",!1,m),p=e(n,"x2","y2",!1,m));var g=v(new W(i,f,p,d),n);return g._scaleToBounds=m,null}function p(t,e,n,r){if(t.transform){for(var i=(r.getAttribute(n)||"").split(/\)\s*/g),o=new E,a=0,s=i.length;a<s;a++){var u=i[a];if(!u)break;for(var l=u.split(/\(\s*/),c=l[0],h=l[1].split(/[\s,]+/g),f=0,p=h.length;f<p;f++)h[f]=parseFloat(h[f]);switch(c){case"matrix":o.append(new E(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":o.rotate(h[0],h[1],h[2]);break;case"translate":o.translate(h[0],h[1]);break;case"scale":o.scale(h);break;case"skewX":o.skew(h[0],0);break;case"skewY":o.skew(0,h[0])}}t.transform(o)}}function d(t,e,n){var r="fill-opacity"===n?"getFillColor":"getStrokeColor",i=t[r]&&t[r]();i&&i.setAlpha(parseFloat(e))}function m(t,e,n){var r=t.attributes[e],i=r&&r.value;if(!i){var o=c.camelize(e);i=t.style[o],i||n.node[o]===n.parent[o]||(i=n.node[o])}return i?"none"===i?null:i:s}function v(t,e,n){var r=e.parentNode,i={node:K.getStyles(e)||{},parent:!n&&!/^defs$/i.test(r.tagName)&&K.getStyles(r)||{}};return c.each(I,function(n,r){var o=m(e,r,i);t=o!==s&&n(t,o,r,e,i)||t}),t}function y(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),n=e&&T[e[1].replace(u.location.href.split("#")[0]+"#","")];return n&&n._scaleToBounds&&(n=n.clone(),n._scaleToBounds=!0),n}function b(t,e,r){var i,a,s,u=t.nodeName.toLowerCase(),h="#document"!==u,f=l.body;r&&h&&(C=n(t,null,null,!0)||o.getView().getSize(),i=ut.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),a=t.parentNode,s=t.nextSibling,i.appendChild(t),f.appendChild(i));var p=o.settings,d=p.applyMatrix,m=p.insertItems;p.applyMatrix=!1,p.insertItems=!1;var g=R[u],y=g&&g(t,u,e,r)||null;if(p.insertItems=m,p.applyMatrix=d,y){!h||y instanceof P||(y=v(y,t,r));var _=e.onImport,b=h&&t.getAttribute("data-paper-data");
_&&(y=_(t,y,e)||y),e.expandShapes&&y instanceof O&&(y.remove(),y=y.toPath()),b&&(y._data=JSON.parse(b))}return i&&(f.removeChild(i),a&&(s?a.insertBefore(t,s):a.appendChild(t))),r&&(T={},y&&c.pick(e.applyMatrix,d)&&y.matrix.apply(!0,!0)),y}function x(t,e,n){function r(r){try{var l="object"==typeof r?r:(new u.DOMParser).parseFromString(r,"image/svg+xml");if(!l.nodeName)throw l=null,new Error("Unsupported SVG source: "+t);o=a,c=b(l,e,!0),e&&e.insert===!1||n._insertItem(s,c);var h=e.onLoad;h&&h(c,r)}catch(f){i(f)}}function i(t,n){var r=e.onError;if(!r)throw new Error(t);r(t,n)}if(!t)return null;e="function"==typeof e?{onLoad:e}:e||{};var a=o,c=null;if("string"!=typeof t||/^.*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var h=new FileReader;return h.onload=function(){r(h.result)},h.onerror=function(){i(h.error)},h.readAsText(t)}r(t)}else{var f=l.getElementById(t);f?r(f):ot.request({url:t,async:!0,onLoad:r,onError:i})}return c}var C,T={},R={"#document":function(t,e,n,r){for(var i=t.childNodes,o=0,a=i.length;o<a;o++){var s=i[o];if(1===s.nodeType)return b(s,n,r)}},g:i,svg:i,clippath:i,polygon:a,polyline:a,path:h,lineargradient:f,radialgradient:f,image:function(r){var i=new A(t(r,"href",!0));return i.on("load",function(){var t=n(r);this.setSize(t);var i=this._matrix._transformPoint(e(r).add(t.divide(2)));this.translate(i)}),i},symbol:function(t,e,n,r){return new L(i(t,e,n,r),(!0))},defs:i,use:function(n){var r=(t(n,"href",!0)||"").substring(1),i=T[r],o=e(n);return i?i instanceof L?i.place(o):i.clone().translate(o):null},circle:function(n){return new O.Circle(e(n,"cx","cy"),t(n,"r"))},ellipse:function(t){return new O.Ellipse({center:e(t,"cx","cy"),radius:n(t,"rx","ry")})},rect:function(t){return new O.Rectangle(new w(e(t),n(t)),n(t,"rx","ry"))},line:function(t){return new F.Line(e(t,"x1","y1"),e(t,"x2","y2"))},text:function(t){var n=new H(e(t).add(e(t,"dx","dy")));return n.setContent(t.textContent.trim()||""),n}},I=c.set(c.each(lt,function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](r(n,t.type,t.fromSVG)),"color"===t.type)){var i=e[t.get]();if(i){if(i._scaleToBounds){var o=e.getBounds();i.transform((new E).translate(o.getPoint()).scale(o.getSize()))}e instanceof O&&i.transform((new E).translate(e.getPosition(!0).negate()))}}}},{}),{id:function(t,e){T[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var n=y(e);if(n){if(n=n.clone(),n.setClipMask(!0),!(t instanceof P))return new P(n,t);t.insertChild(0,n)}},gradientTransform:p,transform:p,"fill-opacity":d,"stroke-opacity":d,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,i,o,a){var s,u,l=new w(r(e,"array")),c=n(o,null,null,!0);if(t instanceof P){var h=c?c.divide(l.getSize()):1,u=(new E).scale(h).translate(l.getPoint().negate());s=t}else t instanceof L&&(c&&l.setSize(c),s=t._item);if(s){if("visible"!==m(o,"overflow",a)){var f=new O.Rectangle(l);f.setClipMask(!0),s.addChild(f)}u&&s.transform(u)}}});M.inject({importSVG:function(t,e){return x(t,e,this)}}),S.inject({importSVG:function(t,e){return this.activate(),x(t,e,this)}})},c.exports.PaperScript=function(){function e(t,e,n){var r=y[e];if(t&&t[r]){var i=t[r](n);return"!="===e?!i:i}switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"==":return t==n;case"!=":return t!=n}}function n(t,e){var n=b[t];if(n&&e&&e[n])return e[n]();switch(t){case"+":return+e;case"-":return-e}}function r(t,e){return v.acorn.parse(t,e)}function i(t,e){function n(t){for(var e=0,n=p.length;e<n;e++){var r=p[e];if(r[0]>=t)break;t+=r[1]}return t}function i(e){return t.substring(n(e.range[0]),n(e.range[1]))}function a(e,r){return t.substring(n(e.range[1]),n(r.range[0]))}function s(e,r){for(var i=n(e.range[0]),o=n(e.range[1]),a=0,s=p.length-1;s>=0;s--)if(i>p[s][0]){a=s+1;break}p.splice(a,0,[i,r.length-o+i]),t=t.substring(0,i)+r+t.substring(o)}function c(t,e){if(t){for(var n in t)if("range"!==n&&"loc"!==n){var r=t[n];if(Array.isArray(r))for(var o=0,u=r.length;o<u;o++)c(r[o],t);else r&&"object"==typeof r&&c(r,t)}switch(t.type){case"UnaryExpression":if(t.operator in b&&"Literal"!==t.argument.type){var l=i(t.argument);s(t,'$__("'+t.operator+'", '+l+")")}break;case"BinaryExpression":if(t.operator in y&&"Literal"!==t.left.type){var h=i(t.left),f=i(t.right),p=a(t.left,t.right),d=t.operator;s(t,"__$__("+h+","+p.replace(new RegExp("\\"+d),'"'+d+'"')+", "+f+")")}break;case"UpdateExpression":case"AssignmentExpression":var m=e&&e.type;if(!("ForStatement"===m||"BinaryExpression"===m&&/^[=!<>]/.test(e.operator)||"MemberExpression"===m&&e.computed))if("UpdateExpression"===t.type){var l=i(t.argument),v="__$__("+l+', "'+t.operator[0]+'", 1)',g=l+" = "+v;t.prefix||"AssignmentExpression"!==m&&"VariableDeclarator"!==m||(i(e.left||e.id)===l&&(g=v),g=l+"; "+g),s(t,g)}else if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){var h=i(t.left),f=i(t.right);s(t,h+" = __$__("+h+', "'+t.operator[0]+'", '+f+")")}}}}function h(t){var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var r=31&t;t>>=5,t&&(r|=32),e+=n[r]}return e}if(!t)return"";e=e||{};var f,p=[],d=e.url||"",m=o.agent,v=m.versionNumber,g=!1,_=e.sourceMaps,w=e.source||t,x=/\r\n|\n|\r/gm,E=e.offset||0;if(_&&(m.chrome&&v>=30||m.webkit&&v>=537.76||m.firefox&&v>=23||m.node)){if(m.node)E-=2;else if(u&&d&&!u.location.href.indexOf(d)){var C=l.getElementsByTagName("html")[0].innerHTML;E=C.substr(0,C.indexOf(t)+1).match(x).length+1}g=E>0&&!(m.chrome&&v>=36||m.safari&&v>=600||m.firefox&&v>=40||m.node);var S=["AA"+h(g?0:E)+"A"];S.length=(t.match(x)||[]).length+1+(g?E:0),f={version:3,file:d,names:[],mappings:S.join(";AACA"),sourceRoot:"",sources:[d],sourcesContent:[w]}}return c(r(t,{ranges:!0})),f&&(g&&(t=new Array(E+1).join("\n")+t),/^(inline|both)$/.test(_)&&(t+="\n//# sourceMappingURL=data:application/json;base64,"+u.btoa(unescape(encodeURIComponent(JSON.stringify(f))))),t+="\n//# sourceURL="+(d||"paperscript")),{url:d,source:w,code:t,map:f}}function a(t,r,a){function s(e,n){for(var r in e)!n&&/^_/.test(r)||!new RegExp("([\\b\\s\\W]|^)"+r.replace(/\$/g,"\\$")+"\\b").test(t)||(m.push(r),v.push(e[r]))}o=r;var u,h=r.getView(),f=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new it:null,p=f?f._events:[],d=["onFrame","onResize"].concat(p),m=[],v=[],y="object"==typeof t?t:i(t,a);t=y.code,s({__$__:e,$__:n,paper:r,view:h,tool:f},!0),s(r),d=c.each(d,function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(m.push(e),this.push(e+": "+e))},[]).join(", "),d&&(t+="\nreturn { "+d+" };");var _=o.agent;if(l&&(_.chrome||_.firefox&&_.versionNumber<40)){var b=l.createElement("script"),w=l.head||l.getElementsByTagName("head")[0];_.firefox&&(t="\n"+t),b.appendChild(l.createTextNode("paper._execute = function("+m+") {"+t+"\n}")),w.appendChild(b),u=o._execute,delete o._execute,w.removeChild(b)}else u=Function(m,t);var x=u.apply(r,v)||{};return c.each(p,function(t){var e=x[t];e&&(f[t]=e)}),h&&(x.onResize&&h.setOnResize(x.onResize),h.emit("resize",{size:h.size,delta:new g}),x.onFrame&&h.setOnFrame(x.onFrame),h.requestUpdate()),y}function s(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==f.getAttribute(t,"ignore")){var e=f.getAttribute(t,"canvas"),n=l.getElementById(e),r=t.src||t.getAttribute("data-src"),i=f.hasAttribute(t,"async"),o="data-paper-scope";if(!n)throw new Error('Unable to find canvas with id "'+e+'"');var s=f.get(n.getAttribute(o))||(new f).setup(n);return n.setAttribute(o,s._id),r?ot.request({url:r,async:i,mimeType:"text/plain",onLoad:function(t){a(t,s,r)}}):a(t.innerHTML,s,t.baseURI),t.setAttribute("data-paper-ignore","true"),s}}function h(){c.each(l&&l.getElementsByTagName("script"),s)}function p(t){return t?s(t):h()}var d,m,v=this;!function(e,n){return"object"==typeof d&&"object"==typeof t?n(d):"function"==typeof m&&m.amd?m(["exports"],n):void n(e.acorn||(e.acorn={}))}(this,function(t){"use strict";function e(t){ht=t||{};for(var e in mt)Object.prototype.hasOwnProperty.call(ht,e)||(ht[e]=mt[e]);dt=ht.sourceFile||null}function n(t,e){var n=vt(ft,t);e+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=n,r.raisedAt=gt,r}function r(t){function e(t){if(1==t.length)return n+="return str === "+JSON.stringify(t[0])+";";n+="switch(str){";for(var e=0;e<t.length;++e)n+="case "+JSON.stringify(t[e])+":";n+="return true}return false;"}t=t.split(" ");var n="",r=[];t:for(var i=0;i<t.length;++i){for(var o=0;o<r.length;++o)if(r[o][0].length==t[i].length){r[o].push(t[i]);continue t}r.push([t[i]])}if(r.length>3){r.sort(function(t,e){return e.length-t.length}),n+="switch(str.length){";for(var i=0;i<r.length;++i){var a=r[i];n+="case "+a[0].length+":",e(a)}n+="}"}else e(t);return new Function("str",n)}function i(){this.line=St,this.column=gt-Mt}function o(){St=1,gt=Mt=0,Ct=!0,l()}function a(t,e){_t=gt,ht.locations&&(wt=new i),xt=t,l(),Et=e,Ct=t.beforeExpr}function s(){var t=ht.onComment&&ht.locations&&new i,e=gt,r=ft.indexOf("*/",gt+=2);if(-1===r&&n(gt-2,"Unterminated comment"),gt=r+2,ht.locations){Ze.lastIndex=e;for(var o;(o=Ze.exec(ft))&&o.index<gt;)++St,Mt=o.index+o[0].length}ht.onComment&&ht.onComment(!0,ft.slice(e+2,r),e,gt,t,ht.locations&&new i)}function u(){for(var t=gt,e=ht.onComment&&ht.locations&&new i,n=ft.charCodeAt(gt+=2);pt>gt&&10!==n&&13!==n&&8232!==n&&8233!==n;)++gt,n=ft.charCodeAt(gt);ht.onComment&&ht.onComment(!1,ft.slice(t+2,gt),t,gt,e,ht.locations&&new i)}function l(){for(;pt>gt;){var t=ft.charCodeAt(gt);if(32===t)++gt;else if(13===t){++gt;var e=ft.charCodeAt(gt);10===e&&++gt,ht.locations&&(++St,Mt=gt)}else if(10===t||8232===t||8233===t)++gt,ht.locations&&(++St,Mt=gt);else if(t>8&&14>t)++gt;else if(47===t){var e=ft.charCodeAt(gt+1);if(42===e)s();else{if(47!==e)break;u()}}else if(160===t)++gt;else{if(!(t>=5760&&He.test(String.fromCharCode(t))))break;++gt}}}function c(){var t=ft.charCodeAt(gt+1);return t>=48&&57>=t?C(!0):(++gt,a(be))}function h(){var t=ft.charCodeAt(gt+1);return Ct?(++gt,w()):61===t?b(Ce,2):b(xe,1)}function f(){var t=ft.charCodeAt(gt+1);return 61===t?b(Ce,2):b(je,1)}function p(t){var e=ft.charCodeAt(gt+1);return e===t?b(124===t?Pe:Te,2):61===e?b(Ce,2):b(124===t?Oe:Re,1)}function d(){var t=ft.charCodeAt(gt+1);return 61===t?b(Ce,2):b(Ae,1)}function m(t){var e=ft.charCodeAt(gt+1);return e===t?45==e&&62==ft.charCodeAt(gt+2)&&Ke.test(ft.slice(Tt,gt))?(gt+=3,u(),l(),_()):b(Se,2):61===e?b(Ce,2):b(De,1)}function v(t){var e=ft.charCodeAt(gt+1),n=1;return e===t?(n=62===t&&62===ft.charCodeAt(gt+2)?3:2,61===ft.charCodeAt(gt+n)?b(Ce,n+1):b(ke,n)):33==e&&60==t&&45==ft.charCodeAt(gt+2)&&45==ft.charCodeAt(gt+3)?(gt+=4,u(),l(),_()):(61===e&&(n=61===ft.charCodeAt(gt+2)?3:2),b(Ie,n))}function g(t){var e=ft.charCodeAt(gt+1);return 61===e?b(Le,61===ft.charCodeAt(gt+2)?3:2):b(61===t?Ee:Me,1)}function y(t){switch(t){case 46:return c();case 40:return++gt,a(me);case 41:return++gt,a(ve);case 59:return++gt,a(ye);case 44:return++gt,a(ge);case 91:return++gt,a(he);case 93:return++gt,a(fe);case 123:return++gt,a(pe);case 125:return++gt,a(de);case 58:return++gt,a(_e);case 63:return++gt,a(we);case 48:var e=ft.charCodeAt(gt+1);if(120===e||88===e)return E();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return C(!1);case 34:case 39:return S(t);case 47:return h(t);case 37:case 42:return f();case 124:case 38:return p(t);case 94:return d();case 43:case 45:return m(t);case 60:case 62:return v(t);case 61:case 33:return g(t);case 126:return b(Me,1)}return!1}function _(t){if(t?gt=yt+1:yt=gt,ht.locations&&(bt=new i),t)return w();if(gt>=pt)return a(Bt);var e=ft.charCodeAt(gt);if(Je(e)||92===e)return T();var r=y(e);if(r===!1){var o=String.fromCharCode(e);if("\\"===o||qe.test(o))return T();n(gt,"Unexpected character '"+o+"'")}return r}function b(t,e){var n=ft.slice(gt,gt+e);gt+=e,a(t,n)}function w(){for(var t,e,r="",i=gt;;){gt>=pt&&n(i,"Unterminated regular expression");var o=ft.charAt(gt);if(Ke.test(o)&&n(i,"Unterminated regular expression"),t)t=!1;else{if("["===o)e=!0;else if("]"===o&&e)e=!1;else if("/"===o&&!e)break;t="\\"===o}++gt}var r=ft.slice(i,gt);++gt;var s=P();s&&!/^[gmsiy]*$/.test(s)&&n(i,"Invalid regexp flag");try{var u=new RegExp(r,s)}catch(l){l instanceof SyntaxError&&n(i,l.message),n(l)}return a(Dt,u)}function x(t,e){for(var n=gt,r=0,i=0,o=null==e?1/0:e;o>i;++i){var a,s=ft.charCodeAt(gt);if(a=s>=97?s-97+10:s>=65?s-65+10:s>=48&&57>=s?s-48:1/0,a>=t)break;++gt,r=r*t+a}return gt===n||null!=e&&gt-n!==e?null:r}function E(){gt+=2;var t=x(16);return null==t&&n(yt+2,"Expected hexadecimal number"),Je(ft.charCodeAt(gt))&&n(gt,"Identifier directly after number"),a(kt,t)}function C(t){var e=gt,r=!1,i=48===ft.charCodeAt(gt);t||null!==x(10)||n(e,"Invalid number"),46===ft.charCodeAt(gt)&&(++gt,x(10),r=!0);var o=ft.charCodeAt(gt);69!==o&&101!==o||(o=ft.charCodeAt(++gt),43!==o&&45!==o||++gt,null===x(10)&&n(e,"Invalid number"),r=!0),Je(ft.charCodeAt(gt))&&n(gt,"Identifier directly after number");var s,u=ft.slice(e,gt);return r?s=parseFloat(u):i&&1!==u.length?/[89]/.test(u)||Lt?n(e,"Invalid number"):s=parseInt(u,8):s=parseInt(u,10),a(kt,s)}function S(t){gt++;for(var e="";;){gt>=pt&&n(yt,"Unterminated string constant");var r=ft.charCodeAt(gt);if(r===t)return++gt,a(jt,e);if(92===r){r=ft.charCodeAt(++gt);var i=/^[0-7]+/.exec(ft.slice(gt,gt+3));for(i&&(i=i[0]);i&&parseInt(i,8)>255;)i=i.slice(0,-1);if("0"===i&&(i=null),++gt,i)Lt&&n(gt-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(i,8)),gt+=i.length-1;else switch(r){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(M(2));break;case 117:e+=String.fromCharCode(M(4));break;case 85:e+=String.fromCharCode(M(8));break;case 116:e+="\t";break;case 98:e+="\b";break;case 118:e+="\v";break;case 102:e+="\f";break;case 48:e+="\0";break;case 13:10===ft.charCodeAt(gt)&&++gt;case 10:ht.locations&&(Mt=gt,++St);break;default:e+=String.fromCharCode(r)}}else 13!==r&&10!==r&&8232!==r&&8233!==r||n(yt,"Unterminated string constant"),e+=String.fromCharCode(r),++gt}}function M(t){var e=x(16,t);return null===e&&n(yt,"Bad character escape sequence"),e}function P(){Be=!1;for(var t,e=!0,r=gt;;){var i=ft.charCodeAt(gt);if(Qe(i))Be&&(t+=ft.charAt(gt)),++gt;else{if(92!==i)break;Be||(t=ft.slice(r,gt)),Be=!0,117!=ft.charCodeAt(++gt)&&n(gt,"Expecting Unicode escape sequence \\uXXXX"),++gt;var o=M(4),a=String.fromCharCode(o);a||n(gt-1,"Invalid Unicode escape"),(e?Je(o):Qe(o))||n(gt-4,"Invalid Unicode escape"),t+=a}e=!1}return Be?t:ft.slice(r,gt)}function T(){var t=P(),e=Nt;return!Be&&Ge(t)&&(e=ce[t]),a(e,t)}function O(){Pt=yt,Tt=_t,Ot=wt,_()}function A(t){if(Lt=t,gt=yt,ht.locations)for(;Mt>gt;)Mt=ft.lastIndexOf("\n",Mt-2)+1,--St;l(),_()}function R(){this.type=null,this.start=yt,this.end=null}function L(){this.start=bt,this.end=null,null!==dt&&(this.source=dt)}function I(){var t=new R;return ht.locations&&(t.loc=new L),ht.directSourceFile&&(t.sourceFile=ht.directSourceFile),ht.ranges&&(t.range=[yt,0]),t}function k(t){var e=new R;return e.start=t.start,ht.locations&&(e.loc=new L,e.loc.start=t.loc.start),ht.ranges&&(e.range=[t.range[0],0]),e}function D(t,e){return t.type=e,t.end=Tt,ht.locations&&(t.loc.end=Ot),ht.ranges&&(t.range[1]=Tt),t}function j(t){return ht.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function N(t){return xt===t?(O(),!0):void 0}function B(){return!ht.strictSemicolons&&(xt===Bt||xt===de||Ke.test(ft.slice(Tt,yt)))}function F(){N(ye)||B()||V()}function U(t){xt===t?O():V()}function V(){n(yt,"Unexpected token")}function z(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&n(t.start,"Assigning to rvalue"),Lt&&"Identifier"===t.type&&ze(t.name)&&n(t.start,"Assigning to "+t.name+" in strict mode")}function G(t){Pt=Tt=gt,ht.locations&&(Ot=new i),At=Lt=null,Rt=[],_();var e=t||I(),n=!0;for(t||(e.body=[]);xt!==Bt;){var r=H();e.body.push(r),n&&j(r)&&A(!0),n=!1}return D(e,"Program")}function H(){(xt===xe||xt===Ce&&"/="==Et)&&_(!0);var t=xt,e=I();switch(t){case Ft:case zt:O();var r=t===Ft;N(ye)||B()?e.label=null:xt!==Nt?V():(e.label=ct(),F());for(var i=0;i<Rt.length;++i){var o=Rt[i];if(null==e.label||o.name===e.label.name){if(null!=o.kind&&(r||"loop"===o.kind))break;if(e.label&&r)break}}return i===Rt.length&&n(e.start,"Unsyntactic "+t.keyword),D(e,r?"BreakStatement":"ContinueStatement");case Gt:return O(),F(),D(e,"DebuggerStatement");case Wt:return O(),Rt.push($e),e.body=H(),Rt.pop(),U(ne),e.test=W(),F(),D(e,"DoWhileStatement");case Yt:if(O(),Rt.push($e),U(me),xt===ye)return q(e,null);if(xt===ee){var a=I();return O(),K(a,!0),D(a,"VariableDeclaration"),1===a.declarations.length&&N(le)?Y(e,a):q(e,a)}var a=Z(!1,!0);return N(le)?(z(a),Y(e,a)):q(e,a);case Kt:return O(),ut(e,!0);case Zt:return O(),e.test=W(),e.consequent=H(),e.alternate=N(Xt)?H():null,D(e,"IfStatement");case Jt:return At||ht.allowReturnOutsideFunction||n(yt,"'return' outside of function"),O(),N(ye)||B()?e.argument=null:(e.argument=Z(),F()),D(e,"ReturnStatement");case Qt:O(),e.discriminant=W(),e.cases=[],U(pe),Rt.push(tn);for(var s,u;xt!=de;)if(xt===Ut||xt===Ht){var l=xt===Ut;s&&D(s,"SwitchCase"),e.cases.push(s=I()),s.consequent=[],O(),l?s.test=Z():(u&&n(Pt,"Multiple default clauses"),u=!0,s.test=null),U(_e)}else s||V(),s.consequent.push(H());return s&&D(s,"SwitchCase"),O(),Rt.pop(),D(e,"SwitchStatement");case $t:return O(),Ke.test(ft.slice(Tt,yt))&&n(Tt,"Illegal newline after throw"),e.argument=Z(),F(),D(e,"ThrowStatement");case te:if(O(),e.block=X(),e.handler=null,xt===Vt){var c=I();O(),U(me),c.param=ct(),Lt&&ze(c.param.name)&&n(c.param.start,"Binding "+c.param.name+" in strict mode"),U(ve),c.guard=null,c.body=X(),e.handler=D(c,"CatchClause")}return e.guardedHandlers=It,e.finalizer=N(qt)?X():null,e.handler||e.finalizer||n(e.start,"Missing catch or finally clause"),D(e,"TryStatement");case ee:return O(),K(e),F(),D(e,"VariableDeclaration");case ne:return O(),e.test=W(),Rt.push($e),e.body=H(),Rt.pop(),D(e,"WhileStatement");case re:return Lt&&n(yt,"'with' in strict mode"),O(),e.object=W(),e.body=H(),D(e,"WithStatement");case pe:return X();case ye:return O(),D(e,"EmptyStatement");default:var h=Et,f=Z();if(t===Nt&&"Identifier"===f.type&&N(_e)){for(var i=0;i<Rt.length;++i)Rt[i].name===h&&n(f.start,"Label '"+h+"' is already declared");var p=xt.isLoop?"loop":xt===Qt?"switch":null;return Rt.push({name:h,kind:p}),e.body=H(),Rt.pop(),e.label=f,D(e,"LabeledStatement")}return e.expression=f,F(),D(e,"ExpressionStatement")}}function W(){U(me);var t=Z();return U(ve),t}function X(t){var e,n=I(),r=!0,i=!1;for(n.body=[],U(pe);!N(de);){var o=H();n.body.push(o),r&&t&&j(o)&&(e=i,A(i=!0)),r=!1}return i&&!e&&A(!1),D(n,"BlockStatement")}function q(t,e){return t.init=e,U(ye),t.test=xt===ye?null:Z(),U(ye),t.update=xt===ve?null:Z(),U(ve),t.body=H(),Rt.pop(),D(t,"ForStatement")}function Y(t,e){return t.left=e,t.right=Z(),U(ve),t.body=H(),Rt.pop(),D(t,"ForInStatement")}function K(t,e){for(t.declarations=[],t.kind="var";;){var r=I();if(r.id=ct(),Lt&&ze(r.id.name)&&n(r.id.start,"Binding "+r.id.name+" in strict mode"),r.init=N(Ee)?Z(!0,e):null,t.declarations.push(D(r,"VariableDeclarator")),!N(ge))break}return t}function Z(t,e){var n=J(e);if(!t&&xt===ge){var r=k(n);for(r.expressions=[n];N(ge);)r.expressions.push(J(e));return D(r,"SequenceExpression")}return n}function J(t){var e=Q(t);if(xt.isAssign){var n=k(e);return n.operator=Et,n.left=e,O(),n.right=J(t),z(e),D(n,"AssignmentExpression")}return e}function Q(t){var e=$(t);if(N(we)){var n=k(e);return n.test=e,n.consequent=Z(!0),U(_e),n.alternate=Z(!0,t),D(n,"ConditionalExpression")}return e}function $(t){return tt(et(),-1,t)}function tt(t,e,n){var r=xt.binop;if(null!=r&&(!n||xt!==le)&&r>e){var i=k(t);i.left=t,i.operator=Et;var o=xt;O(),i.right=tt(et(),r,n);var a=D(i,o===Pe||o===Te?"LogicalExpression":"BinaryExpression");return tt(a,e,n)}return t}function et(){if(xt.prefix){var t=I(),e=xt.isUpdate;return t.operator=Et,t.prefix=!0,Ct=!0,O(),t.argument=et(),e?z(t.argument):Lt&&"delete"===t.operator&&"Identifier"===t.argument.type&&n(t.start,"Deleting local variable in strict mode"),D(t,e?"UpdateExpression":"UnaryExpression")}for(var r=nt();xt.postfix&&!B();){var t=k(r);t.operator=Et,t.prefix=!1,t.argument=r,z(r),O(),r=D(t,"UpdateExpression")}return r}function nt(){return rt(it())}function rt(t,e){if(N(be)){var n=k(t);return n.object=t,n.property=ct(!0),n.computed=!1,rt(D(n,"MemberExpression"),e)}if(N(he)){var n=k(t);return n.object=t,n.property=Z(),n.computed=!0,U(fe),rt(D(n,"MemberExpression"),e)}if(!e&&N(me)){var n=k(t);return n.callee=t,n.arguments=lt(ve,!1),rt(D(n,"CallExpression"),e)}return t}function it(){switch(xt){case oe:var t=I();return O(),D(t,"ThisExpression");case Nt:return ct();case kt:case jt:case Dt:var t=I();return t.value=Et,t.raw=ft.slice(yt,_t),O(),D(t,"Literal");case ae:case se:case ue:var t=I();return t.value=xt.atomValue,t.raw=xt.keyword,O(),D(t,"Literal");case me:var e=bt,n=yt;O();var r=Z();return r.start=n,r.end=_t,ht.locations&&(r.loc.start=e,r.loc.end=wt),ht.ranges&&(r.range=[n,_t]),U(ve),r;case he:var t=I();return O(),t.elements=lt(fe,!0,!0),D(t,"ArrayExpression");case pe:return at();case Kt:var t=I();return O(),ut(t,!1);case ie:return ot();default:V()}}function ot(){var t=I();return O(),t.callee=rt(it(),!0),N(me)?t.arguments=lt(ve,!1):t.arguments=It,D(t,"NewExpression")}function at(){var t=I(),e=!0,r=!1;for(t.properties=[],O();!N(de);){if(e)e=!1;else if(U(ge),ht.allowTrailingCommas&&N(de))break;var i,o={key:st()},a=!1;if(N(_e)?(o.value=Z(!0),i=o.kind="init"):ht.ecmaVersion>=5&&"Identifier"===o.key.type&&("get"===o.key.name||"set"===o.key.name)?(a=r=!0,i=o.kind=o.key.name,o.key=st(),xt!==me&&V(),o.value=ut(I(),!1)):V(),"Identifier"===o.key.type&&(Lt||r))for(var s=0;s<t.properties.length;++s){var u=t.properties[s];if(u.key.name===o.key.name){var l=i==u.kind||a&&"init"===u.kind||"init"===i&&("get"===u.kind||"set"===u.kind);l&&!Lt&&"init"===i&&"init"===u.kind&&(l=!1),l&&n(o.key.start,"Redefinition of property")}}t.properties.push(o)}return D(t,"ObjectExpression")}function st(){return xt===kt||xt===jt?it():ct(!0)}function ut(t,e){xt===Nt?t.id=ct():e?V():t.id=null,t.params=[];var r=!0;for(U(me);!N(ve);)r?r=!1:U(ge),t.params.push(ct());var i=At,o=Rt;if(At=!0,Rt=[],t.body=X(!0),At=i,Rt=o,Lt||t.body.body.length&&j(t.body.body[0]))for(var a=t.id?-1:0;a<t.params.length;++a){var s=0>a?t.id:t.params[a];if((Ve(s.name)||ze(s.name))&&n(s.start,"Defining '"+s.name+"' in strict mode"),a>=0)for(var u=0;a>u;++u)s.name===t.params[u].name&&n(s.start,"Argument name clash in strict mode")}return D(t,e?"FunctionDeclaration":"FunctionExpression")}function lt(t,e,n){for(var r=[],i=!0;!N(t);){if(i)i=!1;else if(U(ge),e&&ht.allowTrailingCommas&&N(t))break;n&&xt===ge?r.push(null):r.push(Z(!0))}return r}function ct(t){var e=I();return t&&"everywhere"==ht.forbidReserved&&(t=!1),xt===Nt?(!t&&(ht.forbidReserved&&(3===ht.ecmaVersion?Fe:Ue)(Et)||Lt&&Ve(Et))&&-1==ft.slice(yt,_t).indexOf("\\")&&n(yt,"The keyword '"+Et+"' is reserved"),e.name=Et):t&&xt.keyword?e.name=xt.keyword:V(),Ct=!1,O(),D(e,"Identifier")}t.version="0.5.0";var ht,ft,pt,dt;t.parse=function(t,n){return ft=String(t),pt=ft.length,e(n),o(),G(ht.program)};var mt=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},vt=t.getLineInfo=function(t,e){for(var n=1,r=0;;){Ze.lastIndex=r;var i=Ze.exec(t);if(!(i&&i.index<e))break;++n,r=i.index+i[0].length}return{line:n,column:e-r}};t.tokenize=function(t,n){function r(t){return Tt=_t,_(t),i.start=yt,i.end=_t,i.startLoc=bt,i.endLoc=wt,i.type=xt,i.value=Et,i}ft=String(t),pt=ft.length,e(n),o();var i={};return r.jumpTo=function(t,e){if(gt=t,ht.locations){St=1,Mt=Ze.lastIndex=0;for(var n;(n=Ze.exec(ft))&&n.index<t;)++St,Mt=n.index+n[0].length}Ct=e,l()},r};var gt,yt,_t,bt,wt,xt,Et,Ct,St,Mt,Pt,Tt,Ot,At,Rt,Lt,It=[],kt={type:"num"},Dt={type:"regexp"},jt={type:"string"},Nt={type:"name"},Bt={type:"eof"},Ft={keyword:"break"},Ut={keyword:"case",beforeExpr:!0},Vt={keyword:"catch"},zt={keyword:"continue"},Gt={keyword:"debugger"},Ht={keyword:"default"},Wt={keyword:"do",isLoop:!0},Xt={keyword:"else",beforeExpr:!0},qt={keyword:"finally"},Yt={keyword:"for",isLoop:!0},Kt={keyword:"function"},Zt={keyword:"if"},Jt={keyword:"return",beforeExpr:!0},Qt={keyword:"switch"},$t={keyword:"throw",beforeExpr:!0},te={keyword:"try"},ee={keyword:"var"},ne={keyword:"while",isLoop:!0},re={keyword:"with"},ie={keyword:"new",beforeExpr:!0},oe={keyword:"this"},ae={keyword:"null",atomValue:null},se={keyword:"true",atomValue:!0},ue={keyword:"false",atomValue:!1},le={keyword:"in",binop:7,beforeExpr:!0},ce={break:Ft,case:Ut,catch:Vt,continue:zt,debugger:Gt,default:Ht,do:Wt,else:Xt,finally:qt,for:Yt,function:Kt,if:Zt,return:Jt,switch:Qt,throw:$t,try:te,var:ee,while:ne,with:re,null:ae,true:se,false:ue,new:ie,in:le,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:oe,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},he={type:"[",beforeExpr:!0},fe={type:"]"},pe={type:"{",beforeExpr:!0},de={type:"}"},me={type:"(",beforeExpr:!0},ve={type:")"},ge={type:",",beforeExpr:!0},ye={type:";",beforeExpr:!0},_e={type:":",beforeExpr:!0},be={type:"."},we={type:"?",beforeExpr:!0},xe={binop:10,beforeExpr:!0},Ee={isAssign:!0,beforeExpr:!0},Ce={isAssign:!0,beforeExpr:!0},Se={postfix:!0,prefix:!0,isUpdate:!0},Me={prefix:!0,beforeExpr:!0},Pe={binop:1,beforeExpr:!0},Te={binop:2,beforeExpr:!0},Oe={binop:3,beforeExpr:!0},Ae={binop:4,beforeExpr:!0},Re={binop:5,beforeExpr:!0},Le={binop:6,beforeExpr:!0},Ie={binop:7,beforeExpr:!0},ke={binop:8,beforeExpr:!0},De={binop:9,prefix:!0,beforeExpr:!0},je={binop:10,beforeExpr:!0};t.tokTypes={bracketL:he,bracketR:fe,braceL:pe,braceR:de,parenL:me,parenR:ve,comma:ge,semi:ye,colon:_e,dot:be,question:we,slash:xe,eq:Ee,name:Nt,eof:Bt,num:kt,regexp:Dt,string:jt};for(var Ne in ce)t.tokTypes["_"+Ne]=ce[Ne];var Be,Fe=r("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ue=r("class enum extends super const export import"),Ve=r("implements interface let package private protected public static yield"),ze=r("eval arguments"),Ge=r("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),He=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,We="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Xe="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",qe=new RegExp("["+We+"]"),Ye=new RegExp("["+We+Xe+"]"),Ke=/[\n\r\u2028\u2029]/,Ze=/\r\n|[\n\r\u2028\u2029]/g,Je=t.isIdentifierStart=function(t){return 65>t?36===t:91>t||(97>t?95===t:123>t||t>=170&&qe.test(String.fromCharCode(t)))},Qe=t.isIdentifierChar=function(t){return 48>t?36===t:58>t||!(65>t)&&(91>t||(97>t?95===t:123>t||t>=170&&Ye.test(String.fromCharCode(t))))},$e={kind:"loop"},tn={kind:"switch"}});var y={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},b={"-":"__negate","+":null},w=c.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(t){this["__"+t]="#"+t},{});return g.inject(w),_.inject(w),W.inject(w),u&&("complete"===l.readyState?setTimeout(h):Z.add(u,{load:h})),{compile:i,execute:a,load:p,parse:r}}.call(this),o=new(f.inject(c.exports,{enumerable:!0,Base:c,Numerical:m,Key:et,DomEvent:Z,DomElement:K,document:l,window:u,Symbol:L,PlacedSymbol:R})),o.agent.node&&n(413)(o),r=o,i="function"==typeof r?r.call(e,n,e,t):r,!(i!==s&&(t.exports=i)),o}.call(this,"object"==typeof self?self:null)},function(t,e,n){"use strict";e.__esModule=!0;var r=n(10);e.default=r.PropTypes.shape({subscribe:r.PropTypes.func.isRequired,dispatch:r.PropTypes.func.isRequired,getState:r.PropTypes.func.isRequired})},function(t,e){"use strict";function n(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw new Error(t)}catch(e){}}e.__esModule=!0,e.default=n},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.frameBox=e.outer=e.door=void 0;var o=n(105),a=i(o),s=n(223),u=r(s),l=n(104);i(l);a.default.setup();var c=function(t,e){var n=100*t,r=100*e;return[[0,r],[n/2,.6*r],[n/2,0],[-n/2,0],[-n/2,.6*r]]};e.door=function(){var t=[[1,1],[1,0],[0,0],[0,1]],e=u.connectPoints(t);return u.svg(e)},e.outer=function(t,e){var n=c(t,e),r=(u.connectPoints(n),u.offsetPoints(n,16.5)),i=u.connectPoints(r);return u.svg(i)},e.frameBox=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:11,r=c(t,e),i=u.connectPoints(r),o=u.offsetPoints(r,-n),a=u.connectPoints(o),s=u.offsetPoints(r,n),l=u.connectPoints(s),h=[],f=[],p=[];i.curves.map(function(t){for(var e=void 0,n=t.length/2,r=15,i=[],o=1;o<n/r;o++)e=t.getPointAt(15*o),i.push(e);for(var a=[],s=1;s<n/r;s++)e=t.getPointAt(t.length-15*s),a.push(e);i=i.concat(a.reverse());var l=i[i.length/2-1],c=i[i.length/2],d=l.subtract(c),m=d.length;e=c.add(d.multiply(.5)),m<=r+10&&i.splice(i.length/2-1,2),i.splice(i.length/2,0,e);for(var v=1;v<i.length;v++){if(e=i[v],v%2===1){var g=u.fill(u.rectangle(e.x-10,e.y-16,20,32),"#000");g.rotate(t.segment1.point.subtract(t.segment2.point).angle),h.push(g);var y=u.rectangle(e.x-4,e.y-13,8,26);y.rotate(t.segment1.point.subtract(t.segment2.point).angle),y.transformContent=!0;var _=u.fill(u.rectangle(e.x-6,e.y-10,12,20),"blue");_.rotate(t.segment1.point.subtract(t.segment2.point).angle),_.transformContent=!0,f.push(u.intersect([y,_]))}if(4===v||v===i.length-5){var b=u.rectangle(e.x,e.y-30,1,60);b.transformContent=!0,b.rotate(t.segment1.point.subtract(t.segment2.point).angle),p.push(b)}}return!0});var d=u.unite([u.compound([a,l]),h]),m=u.unite(f);d=u.intersect([d,m]);var v="";return u.chunkArray(p,function(t){var e=u.connectPoints([t[0].segments[0].point,t[1].segments[0].point,t[1].segments[1].point,t[1].segments[1].point.multiply(1.5),t[0].segments[1].point.multiply(1.5),t[0].segments[1].point]),n=u.divide(e,d);
v+=u.svg(n,!1)}),v}},function(t,e,n){"use strict";function r(){}function i(t){try{return t.then}catch(e){return g=e,y}}function o(t,e){try{return t(e)}catch(n){return g=n,y}}function a(t,e,n){try{t(e,n)}catch(r){return g=r,y}}function s(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,t!==r&&m(t,this)}function u(t,e,n){return new t.constructor(function(i,o){var a=new s(r);a.then(i,o),l(t,new d(e,n,a))})}function l(t,e){for(;3===t._81;)t=t._65;return s._10&&s._10(t),0===t._81?0===t._45?(t._45=1,void(t._54=e)):1===t._45?(t._45=2,void(t._54=[t._54,e])):void t._54.push(e):void c(t,e)}function c(t,e){v(function(){var n=1===t._81?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._81?h(e.promise,t._65):f(e.promise,t._65));var r=o(n,t._65);r===y?f(e.promise,g):h(e.promise,r)})}function h(t,e){if(e===t)return f(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=i(e);if(n===y)return f(t,g);if(n===t.then&&e instanceof s)return t._81=3,t._65=e,void p(t);if("function"==typeof n)return void m(n.bind(e),t)}t._81=1,t._65=e,p(t)}function f(t,e){t._81=2,t._65=e,s._97&&s._97(t,e),p(t)}function p(t){if(1===t._45&&(l(t,t._54),t._54=null),2===t._45){for(var e=0;e<t._54.length;e++)l(t,t._54[e]);t._54=null}}function d(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function m(t,e){var n=!1,r=a(t,function(t){n||(n=!0,h(e,t))},function(t){n||(n=!0,f(e,t))});n||r!==y||(n=!0,f(e,g))}var v=n(222),g=null,y={};t.exports=s,s._10=null,s._97=null,s._61=r,s.prototype.then=function(t,e){if(this.constructor!==s)return u(this,t,e);var n=new s(r);return l(this,new d(t,e,n)),n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=r(a),u=function(){function t(){i(this,t),this.userData={},this.uuid=s.default.Math.generateUUID()}return o(t,[{key:"setup",value:function(t){}},{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),t}();t.exports=u},function(t,e){"use strict";var n={hasCachedChildMarkups:1};t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){for(var e=t,n=e._renderedComponent;n;)e=n,n=e._renderedComponent;return e}function o(t,e){(0,f.default)(!!e,"Markup is null!");var n=i(t);n._hostMarkup=e,e[g]=n}function a(t){var e=t._hostMarkup;e&&(delete e[g],t._hostMarkup=null)}function s(t,e){if(0===(t._flags&d.default.hasCachedChildMarkups)){var n=t._renderedChildren,r=Object.keys(n),a=e.childrenMarkup;t:for(var s=0;s<r.length;++s){var u=r[s],l=n[u],c=i(l)._hostID;if(0!==c){for(var h=0;h<a.length;++h){var p=a[h];if(p[v.default]===c){o(l,p);continue t}}(0,f.default)(!1)}}t._flags|=d.default.hasCachedChildMarkups}}function u(t){if(t[g])return t[g];for(var e=t,n=[];!e[g];){if(n.push(e),!e.parentMarkup)return null;e=e.parentMarkup}for(var r=void 0,i=e[g];i&&(r=i,n.length);)s(i,e),e=n.pop(),i=e[g];return r}function l(t){var e=u(t);return null!==e&&e._hostMarkup===t?e:null}function c(t){if((0,f.default)(void 0!==t._hostMarkup),t._hostMarkup)return t._hostMarkup;for(var e=t,n=[];!e._hostMarkup;)n.push(e),(0,f.default)(e._hostParent,"React3 tree root should always have a node reference."),e=e._hostParent;for(;n.length;e=n.pop())s(e,e._hostMarkup);return e._hostMarkup}var h=n(6),f=r(h),p=n(112),d=r(p),m=n(75),v=r(m),g="__react3InternalInstance$"+Math.random().toString(36).slice(2);t.exports={getMarkupFromInstance:c,getInstanceFromMarkup:l,precacheMarkup:o,uncacheMarkup:a,precacheChildMarkups:s,getClosestInstanceFromMarkup:u,getRenderedHostOrTextFromComponent:i}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){}function u(t){return!!t.prototype&&t.prototype.isReactComponent}function l(t){return!(!t.prototype||!t.prototype.isPureReactComponent)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d=n(133),m=r(d),v=n(15),g=r(v),y=n(20),_=(r(y),n(6)),b=r(_),w=n(33),x=r(w),E=n(12),C=(r(E),n(128)),S=r(C),M=n(31),P=(r(M),n(126)),T=(r(P),function t(){a(this,t)});T.prototype=p({},T.prototype,m.default.Mixin);var O={ImpureClass:0,PureClass:1,StatelessFunctional:2},A=function(){function t(){a(this,t)}return f(t,[{key:"render",value:function(){var t=x.default.get(this)._currentElement.type,e=t(this.props,this.context,this.updater);return s(t,e),e}}]),t}(),R=function(t){function e(t,n){a(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._react3RendererInstance=n,r.construct(t),r}return o(e,t),f(e,[{key:"getHostMarkup",value:function(){return h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getHostNode",this).call(this)}},{key:"construct",value:function(t){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"construct",this).call(this,t),this._threeObject=null}},{key:"_updateRenderedComponent",value:function(t,n){h(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_updateRenderedComponent",this).call(this,t,n),this._threeObject=this._renderedComponent._threeObject}},{key:"_instantiateReactComponent",value:function(t,e){return this._react3RendererInstance.instantiateReactComponent(t,e)}},{key:"_replaceNodeWithMarkup",value:function(t,e){var n=t.parentMarkup,r=n.childrenMarkup,i=r.indexOf(t);(0,b.default)(i!==-1);var o=n.threeObject.userData.react3internalComponent,a=t.threeObject.userData.react3internalComponent;o.removeChild(a,t);var s=e.threeObject.userData.react3internalComponent;s._mountIndex=i,o.createChild(s,null,e)}},{key:"mountComponent",value:function(t,e,n,r){this._context=r,this._mountOrder=this._react3RendererInstance.nextMountID++,this._hostParent=e,this._hostContainerInfo=n;var i=this._currentElement.props,o=this._processContext(r),a=this._currentElement.type,h=t.getUpdateQueue(),f=u(a),p=this._constructComponent(f,i,o,h),d=void 0;f||null!=p&&null!=p.render?l(a)?this._compositeType=O.PureClass:this._compositeType=O.ImpureClass:(d=p,s(a,d),(0,b.default)(null===p||p===!1||g.default.isValidElement(p),"%s(...): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",a.displayName||a.name||"Component"),p=new A(a),this._compositeType=O.StatelessFunctional);p.props=i,p.context=o,p.refs=S.default,p.updater=h,this._instance=p,x.default.set(p,this);var m=p.state;void 0===m&&(p.state=m=null),("object"!==("undefined"==typeof m?"undefined":c(m))||Array.isArray(m))&&(0,b.default)(!1),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var v=this.performInitialMount(d,e,n,t,r);return p.componentDidMount&&t.getReactMountReady().enqueue(p.componentDidMount,p),v}},{key:"_constructComponent",value:function(t,e,n,r){return this._constructComponentWithoutOwner(t,e,n,r)}},{key:"_constructComponentWithoutOwner",value:function(t,e,n,r){var i=this._currentElement.type,o=void 0;return o=t?new i(e,n,r):i(e,n,r)}},{key:"attachRef",value:function(t,e){var n=this.getPublicInstance(),r=n.refs===S.default?n.refs={}:n.refs;r[t]=e.getPublicInstance()}}]),e}(T);t.exports=R},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o,a,s,u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(1),h=r(c),f=n(6),p=r(f),d=n(31),m=(r(d),n(19)),v=r(m),g=n(118),y=r(g),_=n(111),b=r(_),w=n(47),x=(r(w),n(72)),E=r(x),C=n(124),S=r(C),M=n(332),P=r(M),T=["gammaInput","gammaOutput"],O=(a=o=function(){function t(e,n){var r=this;i(this,t),s.call(this);var o=e.mainCamera,a=e.onAnimate,l=e.onRecreateCanvas,c=e.onRendererUpdated,f=e.onManualRenderTriggerCreated,p=e.forceManualRender;this._parameters=u({},e),this._rendererInstance=n,this._mounted=!1,this._willUnmount=!1,this._scene=null,this._mainCameraName=o,this._viewports=[],this._modules=[],this._resourceContainers=[],this._recreateCanvasCallback=l,this._rendererUpdatedCallback=c,this._manualRenderTriggerCallback=f,this._forceManualRender=p,this._warnedAboutManualRendering=!1,this._canvas=null,this._onAnimate=a,this._objectsByUUID={},this._materials=[],this._geometries=[],this._textures=[],this._objectsByName={},this._lastRenderMode=null,this._renderTrigger=function(t){t?r._render():null===r._renderRequest&&(r._renderRequest=requestAnimationFrame(r._render))},this.uuid=h.default.Math.generateUUID(),this.userData={},"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"https://build-os.com",REACT_APP_BEAVER_HOST:"https://beaver.build-os.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&(this._highlightScene=new h.default.Scene,this._highlightGeometry=new h.default.BoxGeometry(1,1,1),this._highlightMaterial=new h.default.MeshBasicMaterial({color:255,transparent:!0,opacity:.4}),this._highlightObjectId=null,this._getHighlightBoundingBox=null,this._hideHighlight=function(){r._highlightObjectId=null,r._getHighlightBoundingBox=null},this._objectHighlighted=function(t){var e=t.uuid,n=t.boundingBoxFunc,i=void 0;r._highlightObjectId&&(i=r._objectsByUUID[r._highlightObjectId],i.userData.events.removeListener("hideHighlight",r._hideHighlight)),r._highlightObjectId=e,r._getHighlightBoundingBox=n,i=r._objectsByUUID[e],i.userData.events.once("hideHighlight",r._hideHighlight)})}return l(t,[{key:"_createRenderer",value:function(){if(this._canvas){var t=this._parameters,e={canvas:this._canvas,precision:t.precision,alpha:t.alpha,premultipliedAlpha:t.premultipliedAlpha,antialias:t.antialias,stencil:t.stencil,preserveDrawingBuffer:t.preserveDrawingBuffer,depth:t.depth,logarithmicDepthBuffer:t.logarithmicDepthBuffer};this._renderer=(0,P.default)()?new h.default.WebGLRenderer(e):new h.default.CanvasRenderer(e),this._rendererUpdatedCallback&&this._rendererUpdatedCallback(this._renderer);var n=this._renderer;t.hasOwnProperty("pixelRatio")&&n.setPixelRatio(t.pixelRatio),t.hasOwnProperty("sortObjects")&&(n.sortObjects=t.sortObjects);var r=t.hasOwnProperty("clearColor"),i=t.hasOwnProperty("clearAlpha");if(r||i){var o=void 0;o=r?t.clearColor:new h.default.Color(0),i?n.setClearColor(o,t.clearAlpha):n.setClearColor(o)}t.hasOwnProperty("shadowMapEnabled")&&(n.shadowMap.enabled=t.shadowMapEnabled),t.hasOwnProperty("shadowMapType")&&(n.shadowMap.type=t.shadowMapType),t.hasOwnProperty("shadowMapCullFace")&&(n.shadowMap.cullFace=t.shadowMapCullFace),t.hasOwnProperty("shadowMapDebug")&&(n.shadowMap.debug=t.shadowMapDebug),T.forEach(function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),n.setSize(t.width,t.height)}}},{key:"initialize",value:function(){this.userData.events.on("animate",this._callOnAnimate),this._forceManualRender?this._renderRequest=null:this._renderRequest=requestAnimationFrame(this._render),this._manualRenderTriggerCallback&&this._manualRenderTriggerCallback(this._renderTrigger)}},{key:"getObjectsByName",value:function(t){var e=this._objectsByName[t],n=void 0;return e?!function(){var t=e.values;n=Object.keys(t).map(function(e){return t[e]})}():n=[],n}},{key:"addAnimateListener",value:function(t){this.userData.events.on("animate",t)}},{key:"removeAnimateListener",value:function(t){this.userData.events.removeListener("animate",t)}},{key:"addBeforeRenderListener",value:function(t){this.userData.events.on("preRender",t)}},{key:"removeBeforeRenderListener",value:function(t){this.userData.events.removeListener("preRender",t)}},{key:"addChildren",value:function(t){for(var e=0;e<t.length;++e){var n=t[e];n instanceof h.default.Scene?this.setScene(n):n instanceof y.default?this.addViewport(n):n instanceof b.default?this.addModule(n):n instanceof E.default?this.addResourceContainer(n):(0,p.default)(!1,"The react3 component should only contain <viewport/>s or <scene/>s or <resources/>.")}}},{key:"removeChild",value:function(t){t instanceof h.default.Scene?this._scene===t&&this.setScene(null):t instanceof y.default?this.removeViewport(t):t instanceof b.default?this.removeModule(t):t instanceof E.default?this.removeResourceContainer(t):(0,p.default)(!1,"The react3 component should only contain <viewport/>s or <scene/>s, <module/>s or <resources/>.")}},{key:"_renderScene",value:function(t){if(this._renderer.render(this._scene,t),"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"https://build-os.com",REACT_APP_BEAVER_HOST:"https://beaver.build-os.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&null!==this._highlightObjectId){var e=this._getHighlightBoundingBox(),n=this._highlightScene,r=n.children.length-e.length;if(r>0)for(var i=0;i<r;i++)n.remove(n.children[0]);else if(r<0)for(var o=0;o<-r;o++)n.add(new h.default.Mesh(this._highlightGeometry,this._highlightMaterial));for(var a=0;a<e.length;++a){var s=e[a],u=s.min.clone().add(s.max).multiplyScalar(.5),l=s.max.clone().sub(s.min),c=n.children[a];c.position.copy(u),c.scale.copy(l)}var f=this._renderer.autoClear;this._renderer.autoClear=!1,this._renderer.render(n,t),this._renderer.autoClear=f}}},{key:"setScene",value:function(t){this._scene=t}},{key:"addViewport",value:function(t){this._viewports.push(t)}},{key:"removeViewport",value:function(t){var e=this._viewports.indexOf(t);this._viewports.splice(e,1)}},{key:"addResourceContainer",value:function(t){this._resourceContainers.push(t)}},{key:"removeResourceContainer",value:function(t){var e=this._resourceContainers.indexOf(t);this._resourceContainers.splice(e,1)}},{key:"addModule",value:function(t){this._modules.push(t)}},{key:"removeModule",value:function(t){var e=this._modules.indexOf(t);this._modules.splice(e,1)}},{key:"updateWidth",value:function(t){this._parameters.width=t,this._renderer&&this._renderer.setSize(this._parameters.width,this._parameters.height)}},{key:"updateOnRecreateCanvas",value:function(t,e){this._recreateCanvasCallback=e}},{key:"updateOnRendererUpdated",value:function(t){this._rendererUpdatedCallback=t}},{key:"updateOnManualRenderTriggerCreated",value:function(t){this._manualRenderTriggerCallback=t,t&&this._manualRenderTriggerCallback(this._renderTrigger)}},{key:"updateForceManualRender",value:function(t){this._forceManualRender!==t&&(this._forceManualRender=t,t?(cancelAnimationFrame(this._renderRequest),this._renderRequest=null):this._renderRequest=requestAnimationFrame(this._render))}},{key:"updateHeight",value:function(t){this._parameters.height=t,this._renderer&&this._renderer.setSize(this._parameters.width,this._parameters.height)}},{key:"updatePixelRatio",value:function(t){this._parameters.pixelRatio=t,this._renderer&&(this._renderer.setPixelRatio(t),this._renderer.setSize(this._parameters.width,this._parameters.height))}},{key:"updateSortObjects",value:function(t){this._parameters.sortObjects=t,this._renderer&&(this._renderer.sortObjects=t)}},{key:"updateAntialias",value:function(t){this._parameters.antialias=t,this._renderer&&this.refreshRenderer()}},{key:"updatePrecision",value:function(t){this._parameters.precision=t,this._renderer&&this.refreshRenderer()}},{key:"updateAlpha",value:function(t){this._parameters.alpha=t,this._renderer&&this.refreshRenderer()}},{key:"updatePremultipliedAlpha",value:function(t){this._parameters.premultipliedAlpha=t,this._renderer&&this.refreshRenderer()}},{key:"updateStencil",value:function(t){this._parameters.stencil=t,this._renderer&&this.refreshRenderer()}},{key:"updatePreserveDrawingBuffer",value:function(t){this._parameters.preserveDrawingBuffer=t,this._renderer&&this.refreshRenderer()}},{key:"updateDepth",value:function(t){this._parameters.depth=t,this._renderer&&this.refreshRenderer()}},{key:"updateLogarithmicDepthBuffer",value:function(t){this._parameters.logarithmicDepthBuffer=t,this._renderer&&this.refreshRenderer()}},{key:"updateShadowMapEnabled",value:function(t){this._parameters.shadowMapEnabled=t,this._renderer&&(this._renderer.shadowMap.enabled=t,this.allMaterialsNeedUpdate(!0))}},{key:"updateShadowMapType",value:function(t){this._parameters.shadowMapType=t,this._renderer&&(this._renderer.shadowMap.type=t,this.allMaterialsNeedUpdate(!0))}},{key:"updateShadowMapCullFace",value:function(t){this._parameters.shadowMapCullFace=t,this._renderer&&(this._renderer.shadowMap.cullFace=t,this.allMaterialsNeedUpdate(!0))}},{key:"updateShadowMapDebug",value:function(t){this._parameters.shadowMapDebug=t,this._renderer&&(this._renderer.shadowMap.debug=t,this.allMaterialsNeedUpdate(!0))}},{key:"updateCanvas",value:function(t){if(this._canvas=t,this._renderer){this.disposeResourcesAndRenderer();var e=this._renderer.extensions.get("WEBGL_lose_context");e&&e.loseContext()}this._createRenderer()}},{key:"updateGammaInput",value:function(t){this._parameters.gammaInput=t,this._renderer&&(this._renderer.gammaInput=t,this.allMaterialsNeedUpdate(!0))}},{key:"updateGammaOutput",value:function(t){this._parameters.gammaOutput=t,this._renderer&&(this._renderer.gammaOutput=t,this.allMaterialsNeedUpdate(!0))}},{key:"updateContext",value:function(t){this._parameters.context=t}},{key:"updateMainCamera",value:function(t){this._parameters.mainCamera=t,this._mainCameraName=t}},{key:"updateOnAnimate",value:function(t){this._parameters.onAnimate=t,this._onAnimate=t}},{key:"updateClearColor",value:function(t){this._parameters.clearColor=t,this._renderer&&(this._parameters.hasOwnProperty("clearAlpha")?this._renderer.setClearColor(t,this._parameters.clearAlpha):this._renderer.setClearColor(t))}},{key:"updateClearAlpha",value:function(t){var e=this._parameters;if(void 0===t?delete e.clearAlpha:e.clearAlpha=t,this._renderer){var n=void 0;n=e.hasOwnProperty("clearColor")?e.clearColor:new h.default.Color(0),void 0!==t?this._renderer.setClearColor(n,t):this._renderer.setClearColor(n)}}},{key:"refreshRenderer",value:function(){this.disposeResourcesAndRenderer();var t=this._renderer.extensions.get("WEBGL_lose_context");delete this._renderer,this._rendererUpdatedCallback&&this._rendererUpdatedCallback(null),this.userData.events.removeListener("animate",this._callOnAnimate),this.userData.events.removeAllListeners(),null!==this._renderRequest&&(cancelAnimationFrame(this._renderRequest),this._renderRequest=null),t&&this._canvas?(t.loseContext(),this._recreateCanvasCallback()):this._recreateCanvasCallback()}},{key:"disposeResourcesAndRenderer",value:function(){for(var t=0;t<this._materials.length;++t){var e=this._materials[t];e.dispose()}for(var n=0;n<this._geometries.length;++n){var r=this._geometries[n];r.dispose()}for(var i=0;i<this._textures.length;++i){var o=this._textures[i];o.dispose()}this._renderer.dispose()}},{key:"willUnmount",value:function(){this._willUnmount=!0}},{key:"unmount",value:function(){if(this._mounted=!1,null!==this._renderRequest&&(cancelAnimationFrame(this._renderRequest),this._renderRequest=null),this.userData.events.removeListener("animate",this._callOnAnimate),this.userData.events.removeAllListeners(),delete this._rendererInstance,this._renderer){var t=this._renderer.extensions.get("WEBGL_lose_context");t&&t.loseContext(),this.disposeResourcesAndRenderer(),delete this._renderer,this._rendererUpdatedCallback&&this._rendererUpdatedCallback(null)}delete this._parameters,(0,p.default)(0===Object.keys(this._objectsByUUID).length,"Failed to cleanup some child objects for React3DInstance"),delete this._objectsByUUID,delete this._viewports,delete this._scene,"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"https://build-os.com",REACT_APP_BEAVER_HOST:"https://beaver.build-os.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&(delete this._highlightScene,delete this._highlightObjectId,delete this._getHighlightBoundingBox)}},{key:"objectMounted",value:function(t){(0,p.default)(!this._objectsByUUID[t.uuid],"There already is an object with this uuid in the react 3d instance."),this._objectsByUUID[t.uuid]=t,t.userData.markup._rootInstance=this,this._addObjectWithName(t.name,t),"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"https://build-os.com",REACT_APP_BEAVER_HOST:"https://beaver.build-os.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&t.userData.events.on("highlight",this._objectHighlighted),t.userData.events.emit("addedIntoRoot",t);var e=t,n=e.userData.markup.childrenMarkup;t instanceof h.default.Material&&this._materials.push(t),(t instanceof h.default.Geometry||t instanceof h.default.BufferGeometry)&&this._geometries.push(t),t instanceof h.default.Texture&&this._textures.push(t);for(var r=0;r<n.length;++r){var i=n[r];this.objectMounted(i.threeObject)}}},{key:"allMaterialsNeedUpdate",value:function(t){this._materials.forEach(function(e){t?e.dispose():e.needsUpdate=!0})}},{key:"objectRenamed",value:function(t,e,n){this._removeObjectWithName(e,t),this._addObjectWithName(n,t)}},{key:"_addObjectWithName",value:function(t,e){this._objectsByName[t]||(this._objectsByName[t]={count:0,values:{}}),this._objectsByName[t].values[e.uuid]=e,this._objectsByName[t].count++}},{key:"_removeObjectWithName",value:function(t,e){(0,p.default)(this._objectsByName[t]&&this._objectsByName[t].values[e.uuid]===e,"The object's name changed somehow?'"),delete this._objectsByName[t].values[e.uuid],this._objectsByName[t].count--,0===this._objectsByName[t].count&&delete this._objectsByName[t]}},{key:"objectRemoved",value:function(t){(0,p.default)(this._objectsByUUID[t.uuid]===t,"The removed object does not belong here!?"),"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"https://build-os.com",REACT_APP_BEAVER_HOST:"https://beaver.build-os.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&(this._highlightObjectId===t.uuid&&(this._highlightObjectId=null),t.userData.events.removeListener("highlight",this._objectHighlighted),t.userData.events.removeListener("hideHighlight",this._hideHighlight)),delete this._objectsByUUID[t.uuid],t instanceof h.default.Material&&this._materials.splice(this._materials.indexOf(t),1),(t instanceof h.default.Geometry||t instanceof h.default.BufferGeometry)&&this._geometries.splice(this._geometries.indexOf(t),1),t instanceof h.default.Texture&&this._textures.splice(this._textures.indexOf(t),1),this._removeObjectWithName(t.name,t),delete t.userData.markup._rootInstance}},{key:"mountedIntoRoot",value:function(){this._mounted=!0,this.objectMounted(this)}}]),t}(),s=function(){var t=this;this._callOnAnimate=function(){t._onAnimate&&v.default.batchedUpdates(t._onAnimate)},this._render=function(){for(var e=0;e<t._modules.length;++e)t._modules[e].update();if(t._forceManualRender?t._renderRequest=null:t._renderRequest=requestAnimationFrame(t._render),t.userData.events.emit("animate"),t._scene&&t._mounted&&t._renderer){var n=null;if(t._mainCameraName){var r=t._objectsByName[t._mainCameraName];if(r&&r.count>0){var i=r.values;n=i[Object.keys(i)[0]]}}n?("camera"!==t._lastRenderMode&&(t._renderer.autoClear=!0,t._renderer.setViewport(0,0,t._parameters.width,t._parameters.height),t._lastRenderMode="camera"),S.default.current=n,t.userData.events.emit("preRender"),t._renderScene(n),S.default.current=null):t._viewports.length>0&&("viewport"!==t._lastRenderMode&&(t._renderer.autoClear=!1,t._lastRenderMode="viewport"),t._renderer.clear(),t._viewports.forEach(function(e){var n=null;if(e.cameraName){var r=t._objectsByName[e.cameraName];if(r&&r.count>0){var i=r.values;n=i[Object.keys(i)[0]]}}n&&(e.onBeforeRender&&v.default.batchedUpdates(e.onBeforeRender),t._renderer.setViewport(e.x,e.y,e.width,e.height),S.default.current=n,t.userData.events.emit("preRender"),t._renderScene(n),S.default.current=null)}))}}},a);t.exports=O},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=n(35),u=r(s),l=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),e}(u.default);t.exports=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(22),h=r(c),f=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.path=new l.default.Path,t}return a(e,t),s(e,[{key:"performAction",value:function(t){t.holes.push(this.path)}}]),e}(h.default);t.exports=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(1),a=r(o),s=function t(e){i(this,t),this.userData={},this.uuid=a.default.Math.generateUUID(),this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.cameraName=e.cameraName,this.onBeforeRender=e.onBeforeRender};t.exports=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(6),d=r(p),m=n(11),v=r(m),g=n(116),y=r(g),_=n(9),b=r(_),w=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n._invalidChild=function(t){return!(t instanceof c.default.Shape||t instanceof y.default)},n.hasProp("shapes",{type:f.default.arrayOf((0,b.default)(c.default.Shape)),updateInitial:!0,update:function(t,e){t.userData._shapesFromProps=e||[],t.userData._needsToRefreshGeometry=!0},default:[]});var r=["curveSegments","material","UVGenerator"],a=[f.default.number,f.default.number,f.default.shape({generateTopUV:f.default.func,generateSideWallUV:f.default.func})];return r.forEach(function(t,e){n.hasProp(t,{type:a[e],update:function(e,n){void 0===n?delete e.userData._options[t]:e.userData._options[t]=n,e.userData._needsToRefreshGeometry=!0},default:void 0})}),n}return a(e,t),s(e,[{key:"completePropertyUpdates",value:function(t){t.userData._needsToRefreshGeometry&&(this.refreshGeometry(t),t.userData._needsToRefreshGeometry=!1)}},{key:"construct",value:function(){return new c.default.BufferGeometry}},{key:"getOptions",value:function(t){var e={};return["curveSegments","material","UVGenerator"].forEach(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}},{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),t.userData._shapeCache=[],t.userData._options=this.getOptions(n),t.userData._resourceListenerCleanupFunctions=[],t.userData._needsToRefreshGeometry=!1,n.children||this.refreshGeometry(t)}},{key:"addChildren",value:function(t,e){var n=this;(0,d.default)(0===e.filter(this._invalidChild).length,!1);var r=[];
e.forEach(function(e){e instanceof y.default?!function(){var i=r.length,o=function(e){t.userData._shapeCache[i]=e,n.refreshGeometry(t)};o.target=e;var a=function n(){e.userData.events.removeListener("resource.set",o),t.userData._resourceListenerCleanupFunctions.splice(t.userData._resourceListenerCleanupFunctions.indexOf(n),1)};t.userData._resourceListenerCleanupFunctions.push(a),e.userData.events.on("resource.set",o),e.userData.events.once("dispose",function(){a()}),r.push(null)}():r.push(e)}),t.userData._shapeCache=r,this.refreshGeometry(t)}},{key:"addChild",value:function(t){this.triggerRemount(t)}},{key:"moveChild",value:function(t){this.triggerRemount(t)}},{key:"removeChild",value:function(t){this.triggerRemount(t)}},{key:"unmount",value:function(t){return t.userData._resourceListenerCleanupFunctions.forEach(function(t){t()}),delete t.userData._options,delete t.userData._resourceListenerCleanupFunctions,delete t.userData._shapesFromProps,u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}}]),e}(v.default);t.exports=w},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(1),h=r(c),f=n(6),p=r(f),d=n(2),m=r(d),v=n(14),g=r(v),y=n(22),_=r(y),b=n(9),w=r(b),x=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._invalidChild=function(t){var e=!(t instanceof _.default);return e},n.hasProp("points",{type:m.default.arrayOf((0,w.default)(h.default.Vector2)),update:n.triggerRemount,default:[]}),n}return a(e,t),u(e,[{key:"applyInitialProps",value:function(t,n){return t.userData=s({},t.userData),t.uuid=h.default.Math.generateUUID(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n)}},{key:"addChildren",value:function(t,e){var n=this;(0,p.default)(0===e.filter(this._invalidChild).length,!1),e.forEach(function(e){n.performChildAction(t,e)})}},{key:"performChildAction",value:function(t,e){e.performAction(t)}},{key:"addChild",value:function(t){this.triggerRemount(t)}},{key:"moveChild",value:function(t){this.triggerRemount(t)}},{key:"removeChild",value:function(t){this.triggerRemount(t)}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.highlight(e)}},{key:"getBoundingBoxes",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;return e.userData._descriptor.getBoundingBoxes(e)}}]),e}(g.default);t.exports=x},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(21),d=r(p),m=n(73),v=r(m),g=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["vertexShader","fragmentShader"].forEach(function(t){n.hasProp(t,{type:f.default.string.isRequired,update:n.triggerRemount})}),n.hasProp("uniforms",{type:f.default.any,simple:!0,default:void 0}),n.hasWireframe(),n}return a(e,t),s(e,[{key:"getMaterialDescription",value:function(t){var n=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getMaterialDescription",this).call(this,t);return t.hasOwnProperty("uniforms")&&(n.uniforms=t.uniforms),t.hasOwnProperty("vertexShader")&&(n.vertexShader=t.vertexShader),t.hasOwnProperty("fragmentShader")&&(n.fragmentShader=t.fragmentShader),n}},{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new c.default.ShaderMaterial(e)}},{key:"invalidChildInternal",value:function(t){var n=!(t instanceof v.default||u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"invalidChildInternal",this).call(this,t));return n}},{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),n.hasOwnProperty("uniforms")||(t.uniforms=void 0)}}]),e}(d.default);t.exports=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=(r(l),n(18)),h=r(c),f=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n)}},{key:"setParent",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n)}},{key:"unmount",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"beginPropertyUpdates",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"beginPropertyUpdates",this).call(this,t),t.userData._needsProjectionMatrixUpdate=!1}},{key:"completePropertyUpdates",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"completePropertyUpdates",this).call(this,t),t.userData._needsProjectionMatrixUpdate&&(t.userData._needsProjectionMatrixUpdate=!1,t.updateProjectionMatrix(),t.userData.events.emit("updateProjectionMatrix"))}}]),e}(h.default);t.exports=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(52),d=r(p),m=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),t.userData._propertySlot="geometry"}},{key:"setParent",value:function(t,n){(0,f.default)(n instanceof c.default.Mesh||n instanceof c.default.Points||n instanceof c.default.Line,"Parent is not a mesh"),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n)}}]),e}(d.default);t.exports=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o,a,s=n(1),u=(r(s),a=o=function t(){i(this,t)},o.current=null,a);t.exports=u},function(t,e){"use strict";function n(t){this.message=t,this.stack=""}n.prototype=Error.prototype,t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){return!h&&(a.default.debugTool.removeHook(u.default),a.default.debugTool.removeHook(c.default),h=!0,!0)}var o=n(12),a=r(o),s=n(361),u=r(s),l=n(355),c=r(l),h=!1;i.restore=function(){h=!1,a.default.debugTool.addHook(u.default),a.default.debugTool.addHook(c.default)},t.exports=i},17,37,function(t,e){"use strict";function n(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(t){i.forEach(function(e){r[n(e,t)]=r[t]})});var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},a={isUnitlessNumber:r,shorthandPropertyExpansions:o};t.exports=a},function(t,e,n){"use strict";function r(){this._callbacks=null,this._contexts=null}var i=n(4),o=n(7),a=n(28);n(3);o(r.prototype,{enqueue:function(t,e){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(e)},notifyAll:function(){var t=this._callbacks,e=this._contexts;if(t){t.length!==e.length?i("24"):void 0,this._callbacks=null,this._contexts=null;for(var n=0;n<t.length;n++)t[n].call(e[n]);t.length=0,e.length=0}},checkpoint:function(){return this._callbacks?this._callbacks.length:0},rollback:function(t){this._callbacks&&(this._callbacks.length=t,this._contexts.length=t)},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),a.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";function r(t){return!!l.hasOwnProperty(t)||!u.hasOwnProperty(t)&&(s.test(t)?(l[t]=!0,!0):(u[t]=!0,!1))}function i(t,e){return null==e||t.hasBooleanValue&&!e||t.hasNumericValue&&isNaN(e)||t.hasPositiveNumericValue&&e<1||t.hasOverloadedBooleanValue&&e===!1}var o=n(32),a=(n(8),n(12),n(392)),s=(n(5),new RegExp("^["+o.ATTRIBUTE_NAME_START_CHAR+"]["+o.ATTRIBUTE_NAME_CHAR+"]*$")),u={},l={},c={createMarkupForID:function(t){return o.ID_ATTRIBUTE_NAME+"="+a(t)},setAttributeForID:function(t,e){t.setAttribute(o.ID_ATTRIBUTE_NAME,e)},createMarkupForRoot:function(){return o.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(t){t.setAttribute(o.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(t,e){var n=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(n){if(i(n,e))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&e===!0?r+'=""':r+"="+a(e)}return o.isCustomAttribute(t)?null==e?"":t+"="+a(e):null},createMarkupForCustomAttribute:function(t,e){return r(t)&&null!=e?t+"="+a(e):""},setValueForProperty:function(t,e,n){var r=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(r){var a=r.mutationMethod;if(a)a(t,n);else{if(i(r,n))return void this.deleteValueForProperty(t,e);if(r.mustUseProperty)t[r.propertyName]=n;else{var s=r.attributeName,u=r.attributeNamespace;u?t.setAttributeNS(u,s,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&n===!0?t.setAttribute(s,""):t.setAttribute(s,""+n)}}}else if(o.isCustomAttribute(e))return void c.setValueForAttribute(t,e,n)},setValueForAttribute:function(t,e,n){if(r(e)){null==n?t.removeAttribute(e):t.setAttribute(e,""+n)}},deleteValueForAttribute:function(t,e){t.removeAttribute(e)},deleteValueForProperty:function(t,e){var n=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(n){var r=n.mutationMethod;if(r)r(t,void 0);else if(n.mustUseProperty){var i=n.propertyName;n.hasBooleanValue?t[i]=!1:t[i]=""}else t.removeAttribute(n.attributeName)}else o.isCustomAttribute(e)&&t.removeAttribute(e)}};t.exports=c},function(t,e,n){"use strict";function r(t,e){var n=x.hasOwnProperty(e)?x[e]:null;C.hasOwnProperty(e)&&(n!==b.OVERRIDE_BASE?h("73",e):void 0),t&&(n!==b.DEFINE_MANY&&n!==b.DEFINE_MANY_MERGED?h("74",e):void 0)}function i(t,e){if(e){"function"==typeof e?h("75"):void 0,d.isValidElement(e)?h("76"):void 0;var n=t.prototype,i=n.__reactAutoBindPairs;e.hasOwnProperty(_)&&E.mixins(t,e.mixins);for(var o in e)if(e.hasOwnProperty(o)&&o!==_){var a=e[o],l=n.hasOwnProperty(o);if(r(l,o),E.hasOwnProperty(o))E[o](t,a);else{var c=x.hasOwnProperty(o),f="function"==typeof a,p=f&&!c&&!l&&e.autobind!==!1;if(p)i.push(o,a),n[o]=a;else if(l){var m=x[o];!c||m!==b.DEFINE_MANY_MERGED&&m!==b.DEFINE_MANY?h("77",m,o):void 0,m===b.DEFINE_MANY_MERGED?n[o]=s(n[o],a):m===b.DEFINE_MANY&&(n[o]=u(n[o],a))}else n[o]=a}}}else;}function o(t,e){if(e)for(var n in e){var r=e[n];if(e.hasOwnProperty(n)){var i=n in E;i?h("78",n):void 0;var o=n in t;o?h("79",n):void 0,t[n]=r}}}function a(t,e){t&&e&&"object"==typeof t&&"object"==typeof e?void 0:h("80");for(var n in e)e.hasOwnProperty(n)&&(void 0!==t[n]?h("81",n):void 0,t[n]=e[n]);return t}function s(t,e){return function(){var n=t.apply(this,arguments),r=e.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return a(i,n),a(i,r),i}}function u(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function l(t,e){var n=e.bind(t);return n}function c(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t[r]=l(t,i)}}var h=n(4),f=n(7),p=n(58),d=n(15),m=(n(59),n(41),n(83)),v=n(37),g=(n(3),n(44)),y=n(26),_=(n(5),y({mixins:null})),b=g({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),w=[],x={mixins:b.DEFINE_MANY,statics:b.DEFINE_MANY,propTypes:b.DEFINE_MANY,contextTypes:b.DEFINE_MANY,childContextTypes:b.DEFINE_MANY,getDefaultProps:b.DEFINE_MANY_MERGED,getInitialState:b.DEFINE_MANY_MERGED,getChildContext:b.DEFINE_MANY_MERGED,render:b.DEFINE_ONCE,componentWillMount:b.DEFINE_MANY,componentDidMount:b.DEFINE_MANY,componentWillReceiveProps:b.DEFINE_MANY,shouldComponentUpdate:b.DEFINE_ONCE,componentWillUpdate:b.DEFINE_MANY,componentDidUpdate:b.DEFINE_MANY,componentWillUnmount:b.DEFINE_MANY,updateComponent:b.OVERRIDE_BASE},E={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)i(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=f({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=f({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=s(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=f({},t.propTypes,e)},statics:function(t,e){o(t,e)},autobind:function(){}},C={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t),e&&this.updater.enqueueCallback(this,e,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},S=function(){};f(S.prototype,p.prototype,C);var M={createClass:function(t){var e=function(t,n,r){this.__reactAutoBindPairs.length&&c(this),this.props=t,this.context=n,this.refs=v,this.updater=r||m,this.state=null;var i=this.getInitialState?this.getInitialState():null;"object"!=typeof i||Array.isArray(i)?h("82",e.displayName||"ReactCompositeComponent"):void 0,this.state=i};e.prototype=new S,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],w.forEach(i.bind(null,e)),i(e,t),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),e.prototype.render?void 0:h("83");for(var n in x)e.prototype[n]||(e.prototype[n]=null);return e},injection:{injectMixin:function(t){w.push(t)}}};t.exports=M},function(t,e,n){"use strict";function r(t){}function i(t,e){}function o(t){return!(!t.prototype||!t.prototype.isReactComponent)}function a(t){return!(!t.prototype||!t.prototype.isPureReactComponent)}var s=n(4),u=n(7),l=n(81),c=n(20),h=n(15),f=n(82),p=n(33),d=(n(12),n(145)),m=(n(59),n(29)),v=n(152),g=n(37),y=(n(3),n(45)),_=n(64),b=(n(5),{ImpureClass:0,PureClass:1,StatelessFunctional:2});r.prototype.render=function(){var t=p.get(this)._currentElement.type,e=t(this.props,this.context,this.updater);return i(t,e),e};var w=1,x={construct:function(t){this._currentElement=t,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(t,e,n,u){this._context=u,this._mountOrder=w++,this._hostParent=e,this._hostContainerInfo=n;var l,c=this._currentElement.props,f=this._processContext(u),d=this._currentElement.type,m=t.getUpdateQueue(),v=o(d),y=this._constructComponent(v,c,f,m);v||null!=y&&null!=y.render?a(d)?this._compositeType=b.PureClass:this._compositeType=b.ImpureClass:(l=y,i(d,l),null===y||y===!1||h.isValidElement(y)?void 0:s("105",d.displayName||d.name||"Component"),y=new r(d),this._compositeType=b.StatelessFunctional);y.props=c,y.context=f,y.refs=g,y.updater=m,this._instance=y,p.set(y,this);var _=y.state;void 0===_&&(y.state=_=null),"object"!=typeof _||Array.isArray(_)?s("106",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var x;return x=y.unstable_handleError?this.performInitialMountWithErrorHandling(l,e,n,t,u):this.performInitialMount(l,e,n,t,u),y.componentDidMount&&t.getReactMountReady().enqueue(y.componentDidMount,y),x},_constructComponent:function(t,e,n,r){return this._constructComponentWithoutOwner(t,e,n,r)},_constructComponentWithoutOwner:function(t,e,n,r){var i,o=this._currentElement.type;return i=t?new o(e,n,r):o(e,n,r)},performInitialMountWithErrorHandling:function(t,e,n,r,i){var o,a=r.checkpoint();try{o=this.performInitialMount(t,e,n,r,i)}catch(s){r.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(a),o=this.performInitialMount(t,e,n,r,i)}return o},performInitialMount:function(t,e,n,r,i){var o=this._instance;o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===t&&(t=this._renderValidatedComponent());var a=d.getType(t);this._renderedNodeType=a;var s=this._instantiateReactComponent(t,a!==d.EMPTY);this._renderedComponent=s;var u=0,l=m.mountComponent(s,r,e,n,this._processChildContext(i),u);return l},getHostNode:function(){return m.getHostNode(this._renderedComponent)},unmountComponent:function(t){if(this._renderedComponent){var e=this._instance;if(e.componentWillUnmount&&!e._calledComponentWillUnmount)if(e._calledComponentWillUnmount=!0,t){var n=this.getName()+".componentWillUnmount()";f.invokeGuardedCallback(n,e.componentWillUnmount.bind(e))}else e.componentWillUnmount();this._renderedComponent&&(m.unmountComponent(this._renderedComponent,t),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,p.remove(e)}},_maskContext:function(t){var e=this._currentElement.type,n=e.contextTypes;if(!n)return g;var r={};for(var i in n)r[i]=t[i];return r},_processContext:function(t){var e=this._maskContext(t);return e},_processChildContext:function(t){var e=this._currentElement.type,n=this._instance,r=n.getChildContext&&n.getChildContext();if(r){"object"!=typeof e.childContextTypes?s("107",this.getName()||"ReactCompositeComponent"):void 0;for(var i in r)i in e.childContextTypes?void 0:s("108",this.getName()||"ReactCompositeComponent",i);return u({},t,r)}return t},_checkContextTypes:function(t,e,n){v(t,e,n,this.getName(),null,this._debugID)},receiveComponent:function(t,e,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(e,r,t,i,n)},performUpdateIfNecessary:function(t){null!=this._pendingElement?m.receiveComponent(this,this._pendingElement,t,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(t,e,n,r,i){var o=this._instance;null==o?s("136",this.getName()||"ReactCompositeComponent"):void 0;var a,u=!1;this._context===i?a=o.context:(a=this._processContext(i),u=!0);var l=e.props,c=n.props;e!==n&&(u=!0),u&&o.componentWillReceiveProps&&o.componentWillReceiveProps(c,a);var h=this._processPendingState(c,a),f=!0;this._pendingForceUpdate||(o.shouldComponentUpdate?f=o.shouldComponentUpdate(c,h,a):this._compositeType===b.PureClass&&(f=!y(l,c)||!y(o.state,h))),this._updateBatchNumber=null,f?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,c,h,a,t,i)):(this._currentElement=n,this._context=i,o.props=c,o.state=h,o.context=a)},_processPendingState:function(t,e){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var o=u({},i?r[0]:n.state),a=i?1:0;a<r.length;a++){var s=r[a];u(o,"function"==typeof s?s.call(n,o,t,e):s)}return o},_performComponentUpdate:function(t,e,n,r,i,o){var a,s,u,l=this._instance,c=Boolean(l.componentDidUpdate);c&&(a=l.props,s=l.state,u=l.context),l.componentWillUpdate&&l.componentWillUpdate(e,n,r),this._currentElement=t,this._context=o,l.props=e,l.state=n,l.context=r,this._updateRenderedComponent(i,o),c&&i.getReactMountReady().enqueue(l.componentDidUpdate.bind(l,a,s,u),l)},_updateRenderedComponent:function(t,e){var n=this._renderedComponent,r=n._currentElement,i=this._renderValidatedComponent();if(_(r,i))m.receiveComponent(n,i,t,this._processChildContext(e));else{var o=m.getHostNode(n);m.unmountComponent(n,!1);var a=d.getType(i);this._renderedNodeType=a;var s=this._instantiateReactComponent(i,a!==d.EMPTY);this._renderedComponent=s;var u=0,l=m.mountComponent(s,t,this._hostParent,this._hostContainerInfo,this._processChildContext(e),u);this._replaceNodeWithMarkup(o,l,n)}},_replaceNodeWithMarkup:function(t,e,n){l.replaceNodeWithMarkup(t,e,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var t=this._instance,e=t.render();return e},_renderValidatedComponent:function(){var t;if(this._compositeType!==b.StatelessFunctional){c.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{c.current=null}}else t=this._renderValidatedComponentWithoutOwnerOrContext();return null===t||t===!1||h.isValidElement(t)?void 0:s("109",this.getName()||"ReactCompositeComponent"),t},attachRef:function(t,e){var n=this.getPublicInstance();null==n?s("110"):void 0;var r=e.getPublicInstance(),i=n.refs===g?n.refs={}:n.refs;i[t]=r},detachRef:function(t){var e=this.getPublicInstance().refs;delete e[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){var t=this._instance;return this._compositeType===b.StatelessFunctional?null:t},_instantiateReactComponent:null},E={Mixin:x};t.exports=E},function(t,e){"use strict";var n={hasCachedChildNodes:1};t.exports=n},function(t,e,n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var t=this._currentElement.props,e=u.getValue(t);null!=e&&i(this,Boolean(t.multiple),e)}}function i(t,e,n){var r,i,o=l.getNodeFromInstance(t).options;if(e){for(r={},i=0;i<n.length;i++)r[""+n[i]]=!0;for(i=0;i<o.length;i++){var a=r.hasOwnProperty(o[i].value);o[i].selected!==a&&(o[i].selected=a)}}else{for(r=""+n,i=0;i<o.length;i++)if(o[i].value===r)return void(o[i].selected=!0);o.length&&(o[0].selected=!0)}}function o(t){var e=this._currentElement.props,n=u.executeOnChange(e,t);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),c.asap(r,this),n}var a=n(7),s=n(54),u=n(79),l=n(8),c=n(19),h=(n(5),!1),f={getHostProps:function(t,e){return a({},s.getHostProps(t,e),{onChange:t._wrapperState.onChange,value:void 0})},mountWrapper:function(t,e){var n=u.getValue(e);t._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:e.defaultValue,listeners:null,onChange:o.bind(t),wasMultiple:Boolean(e.multiple)},void 0===e.value||void 0===e.defaultValue||h||(h=!0)},getSelectValueContext:function(t){return t._wrapperState.initialValue},postUpdateWrapper:function(t){var e=t._currentElement.props;t._wrapperState.initialValue=void 0;var n=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=Boolean(e.multiple);var r=u.getValue(e);null!=r?(t._wrapperState.pendingUpdate=!1,i(t,Boolean(e.multiple),r)):n!==Boolean(e.multiple)&&(null!=e.defaultValue?i(t,Boolean(e.multiple),e.defaultValue):i(t,Boolean(e.multiple),e.multiple?[]:""))}};t.exports=f},function(t,e,n){"use strict";function r(){this.reinitializeTransaction()}var i=n(7),o=n(19),a=n(43),s=n(17),u={initialize:s,close:function(){f.isBatchingUpdates=!1}},l={initialize:s,close:o.flushBatchedUpdates.bind(o)},c=[l,u];i(r.prototype,a.Mixin,{getTransactionWrappers:function(){return c}});var h=new r,f={isBatchingUpdates:!1,batchedUpdates:function(t,e,n,r,i,o){var a=f.isBatchingUpdates;f.isBatchingUpdates=!0,a?t(e,n,r,i,o):h.perform(t,null,e,n,r,i,o)}};t.exports=f},function(t,e){"use strict";var n,r={injectEmptyComponentFactory:function(t){n=t}},i={create:function(t){return n(t)}};i.injection=r,t.exports=i},function(t,e){"use strict";var n={logTopLevelRenders:!1};t.exports=n},function(t,e,n){"use strict";function r(t){return u?void 0:a("111",t.type),new u(t)}function i(t){return new c(t)}function o(t){return t instanceof c}var a=n(4),s=n(7),u=(n(3),null),l={},c=null,h={injectGenericComponentClass:function(t){u=t},injectTextComponentClass:function(t){c=t},injectComponentClasses:function(t){s(l,t)}},f={createInternalComponent:r,createInstanceForText:i,isTextComponent:o,injection:h};t.exports=f},function(t,e,n){"use strict";var r=n(32),i=n(38),o=n(78),a=n(81),s=n(132),u=n(137),l=n(57),c=n(139),h=n(19),f={Component:a.injection,Class:s.injection,DOMProperty:r.injection,EmptyComponent:u.injection,EventPluginHub:i.injection,EventPluginUtils:o.injection,EventEmitter:l.injection,HostComponent:c.injection,Updates:h.injection};t.exports=f},function(t,e,n){"use strict";function r(t){return o(document.documentElement,t)}var i=n(357),o=n(191),a=n(101),s=n(102),u={hasSelectionCapabilities:function(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)},getSelectionInformation:function(){var t=s();return{focusedElem:t,selectionRange:u.hasSelectionCapabilities(t)?u.getSelection(t):null}},restoreSelection:function(t){var e=s(),n=t.focusedElem,i=t.selectionRange;e!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,i),a(n))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=i.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,r=e.end;if(void 0===r&&(r=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(r,t.value.length);else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()}else i.setOffsets(t,e)}};t.exports=u},function(t,e,n){"use strict";function r(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r))return r;return t.length===e.length?-1:n}function i(t){return t?t.nodeType===k?t.documentElement:t.firstChild:null}function o(t){return t.getAttribute&&t.getAttribute(R)||""}function a(t,e,n,r,i){var o;if(w.logTopLevelRenders){var a=t._currentElement.props,s=a.type;o="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(o)}var u=C.mountComponent(t,n,null,y(t,e),i,0);o&&console.timeEnd(o),t._renderedComponent._topLevelWrapper=t,F._mountImageIntoNode(u,e,t,r,n)}function s(t,e,n,r){var i=M.ReactReconcileTransaction.getPooled(!n&&_.useCreateElement);i.perform(a,null,t,e,i,n,r),M.ReactReconcileTransaction.release(i)}function u(t,e,n){for(C.unmountComponent(t,n),e.nodeType===k&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild);
}function l(t){var e=i(t);if(e){var n=g.getInstanceFromNode(e);return!(!n||!n._hostParent)}}function c(t){return!(!t||t.nodeType!==I&&t.nodeType!==k&&t.nodeType!==D)}function h(t){var e=i(t),n=e&&g.getInstanceFromNode(e);return n&&!n._hostParent?n:null}function f(t){var e=h(t);return e?e._hostContainerInfo._topLevelWrapper:null}var p=n(4),d=n(36),m=n(32),v=n(57),g=(n(20),n(8)),y=n(349),_=n(352),b=n(15),w=n(138),x=n(33),E=(n(12),n(367)),C=n(29),S=n(60),M=n(19),P=n(37),T=n(157),O=(n(3),n(63)),A=n(64),R=(n(5),m.ID_ATTRIBUTE_NAME),L=m.ROOT_ATTRIBUTE_NAME,I=1,k=9,D=11,j={},N=1,B=function(){this.rootID=N++};B.prototype.isReactComponent={},B.prototype.render=function(){return this.props};var F={TopLevelWrapper:B,_instancesByReactRootID:j,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,n,r,i){return F.scrollMonitor(r,function(){S.enqueueElementInternal(t,e,n),i&&S.enqueueCallbackInternal(t,i)}),t},_renderNewRootComponent:function(t,e,n,r){c(e)?void 0:p("37"),v.ensureScrollValueMonitoring();var i=T(t,!1);M.batchedUpdates(s,i,e,n,r);var o=i._instance.rootID;return j[o]=i,i},renderSubtreeIntoContainer:function(t,e,n,r){return null!=t&&x.has(t)?void 0:p("38"),F._renderSubtreeIntoContainer(t,e,n,r)},_renderSubtreeIntoContainer:function(t,e,n,r){S.validateCallback(r,"ReactDOM.render"),b.isValidElement(e)?void 0:p("39","string"==typeof e?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof e?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a,s=b(B,null,null,null,null,null,e);if(t){var u=x.get(t);a=u._processChildContext(u._context)}else a=P;var c=f(n);if(c){var h=c._currentElement,d=h.props;if(A(d,e)){var m=c._renderedComponent.getPublicInstance(),v=r&&function(){r.call(m)};return F._updateRootComponent(c,s,a,n,v),m}F.unmountComponentAtNode(n)}var g=i(n),y=g&&!!o(g),_=l(n),w=y&&!c&&!_,E=F._renderNewRootComponent(s,n,w,a)._renderedComponent.getPublicInstance();return r&&r.call(E),E},render:function(t,e,n){return F._renderSubtreeIntoContainer(null,t,e,n)},unmountComponentAtNode:function(t){c(t)?void 0:p("40");var e=f(t);if(!e){l(t),1===t.nodeType&&t.hasAttribute(L);return!1}return delete j[e._instance.rootID],M.batchedUpdates(u,e,t,!1),!0},_mountImageIntoNode:function(t,e,n,o,a){if(c(e)?void 0:p("41"),o){var s=i(e);if(E.canReuseMarkup(t,s))return void g.precacheNode(n,s);var u=s.getAttribute(E.CHECKSUM_ATTR_NAME);s.removeAttribute(E.CHECKSUM_ATTR_NAME);var l=s.outerHTML;s.setAttribute(E.CHECKSUM_ATTR_NAME,u);var h=t,f=r(h,l),m=" (client) "+h.substring(f-20,f+20)+"\n (server) "+l.substring(f-20,f+20);e.nodeType===k?p("42",m):void 0}if(e.nodeType===k?p("43"):void 0,a.useCreateElement){for(;e.lastChild;)e.removeChild(e.lastChild);d.insertTreeBefore(e,t,null)}else O(e,t),g.precacheNode(n,e.firstChild)}};t.exports=F},function(t,e,n){"use strict";function r(t,e,n){return{type:f.INSERT_MARKUP,content:t,fromIndex:null,fromNode:null,toIndex:n,afterNode:e}}function i(t,e,n){return{type:f.MOVE_EXISTING,content:null,fromIndex:t._mountIndex,fromNode:p.getHostNode(t),toIndex:n,afterNode:e}}function o(t,e){return{type:f.REMOVE_NODE,content:null,fromIndex:t._mountIndex,fromNode:e,toIndex:null,afterNode:null}}function a(t){return{type:f.SET_MARKUP,content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(t){return{type:f.TEXT_CONTENT,content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function u(t,e){return e&&(t=t||[],t.push(e)),t}function l(t,e){h.processChildrenUpdates(t,e)}var c=n(4),h=n(81),f=(n(33),n(12),n(144)),p=(n(20),n(29)),d=n(343),m=(n(17),n(153)),v=(n(3),{Mixin:{_reconcilerInstantiateChildren:function(t,e,n){return d.instantiateChildren(t,e,n)},_reconcilerUpdateChildren:function(t,e,n,r,i,o){var a,s=0;return a=m(e,s),d.updateChildren(t,a,n,r,i,this,this._hostContainerInfo,o,s),a},mountChildren:function(t,e,n){var r=this._reconcilerInstantiateChildren(t,e,n);this._renderedChildren=r;var i=[],o=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],u=0,l=p.mountComponent(s,e,this,this._hostContainerInfo,n,u);s._mountIndex=o++,i.push(l)}return i},updateTextContent:function(t){var e=this._renderedChildren;d.unmountChildren(e,!1);for(var n in e)e.hasOwnProperty(n)&&c("118");var r=[s(t)];l(this,r)},updateMarkup:function(t){var e=this._renderedChildren;d.unmountChildren(e,!1);for(var n in e)e.hasOwnProperty(n)&&c("118");var r=[a(t)];l(this,r)},updateChildren:function(t,e,n){this._updateChildren(t,e,n)},_updateChildren:function(t,e,n){var r=this._renderedChildren,i={},o=[],a=this._reconcilerUpdateChildren(r,t,o,i,e,n);if(a||r){var s,c=null,h=0,f=0,d=0,m=null;for(s in a)if(a.hasOwnProperty(s)){var v=r&&r[s],g=a[s];v===g?(c=u(c,this.moveChild(v,m,h,f)),f=Math.max(v._mountIndex,f),v._mountIndex=h):(v&&(f=Math.max(v._mountIndex,f)),c=u(c,this._mountChildAtIndex(g,o[d],m,h,e,n)),d++),h++,m=p.getHostNode(g)}for(s in i)i.hasOwnProperty(s)&&(c=u(c,this._unmountChild(r[s],i[s])));c&&l(this,c),this._renderedChildren=a}},unmountChildren:function(t){var e=this._renderedChildren;d.unmountChildren(e,t),this._renderedChildren=null},moveChild:function(t,e,n,r){if(t._mountIndex<r)return i(t,e,n)},createChild:function(t,e,n){return r(n,e,t._mountIndex)},removeChild:function(t,e){return o(t,e)},_mountChildAtIndex:function(t,e,n,r,i,o){return t._mountIndex=r,this.createChild(t,n,e)},_unmountChild:function(t,e){var n=this.removeChild(t,e);return t._mountIndex=null,n}}});t.exports=v},function(t,e,n){"use strict";var r=n(44),i=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});t.exports=i},function(t,e,n){"use strict";var r=n(4),i=n(15),o=(n(3),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(t){return null===t||t===!1?o.EMPTY:i.isValidElement(t)?"function"==typeof t.type?o.COMPOSITE:o.HOST:void r("26",t)}});t.exports=o},function(t,e,n){"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.useCreateElement=t}var i=n(7),o=n(130),a=n(28),s=n(57),u=n(141),l=(n(12),n(43)),c=n(60),h={initialize:u.getSelectionInformation,close:u.restoreSelection},f={initialize:function(){var t=s.isEnabled();return s.setEnabled(!1),t},close:function(t){s.setEnabled(t)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},d=[h,f,p],m={getTransactionWrappers:function(){return d},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(t){this.reactMountReady.rollback(t)},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};i(r.prototype,l.Mixin,m),a.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";function r(t,e,n){"function"==typeof t?t(e.getPublicInstance()):o.addComponentAsRefTo(e,t,n)}function i(t,e,n){"function"==typeof t?t(null):o.removeComponentAsRefFrom(e,t,n)}var o=n(368),a={};a.attachRefs=function(t,e){if(null!==e&&e!==!1){var n=e.ref;null!=n&&r(n,t,e._owner)}},a.shouldUpdateRefs=function(t,e){var n=null===t||t===!1,r=null===e||e===!1;return n||r||e.ref!==t.ref||"string"==typeof e.ref&&e._owner!==t._owner},a.detachRefs=function(t,e){if(null!==e&&e!==!1){var n=e.ref;null!=n&&i(n,t,e._owner)}},t.exports=a},function(t,e){"use strict";t.exports="15.3.1"},function(t,e){"use strict";var n={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){n.currentScrollLeft=t.x,n.currentScrollTop=t.y}};t.exports=n},function(t,e,n){"use strict";function r(t,e){return null==e?i("30"):void 0,null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}var i=n(4);n(3);t.exports=r},function(t,e,n){"use strict";var r=!1;t.exports=r},function(t,e,n){(function(e){"use strict";function r(t,e,n,r,u,l){for(var c in t)if(t.hasOwnProperty(c)){var h;try{"function"!=typeof t[c]?i("84",r||"React class",o[n],c):void 0,h=t[c](e,c,r,n,null,a)}catch(f){h=f}if(h instanceof Error&&!(h.message in s)){s[h.message]=!0}}}var i=n(4),o=n(41),a=n(84),s=(n(3),n(5),{});t.exports=r}).call(e,n(34))},function(t,e,n){(function(e){"use strict";function r(t,e,n,r){if(t&&"object"==typeof t){var i=t,o=void 0===i[n];o&&null!=e&&(i[n]=e)}}function i(t,e){if(null==t)return t;var n={};return o(t,r,n),n}var o=(n(56),n(65));n(5);t.exports=i}).call(e,n(34))},function(t,e){"use strict";function n(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}t.exports=n},function(t,e){"use strict";function n(t){var e=t&&(r&&t[r]||t[i]);if("function"==typeof e)return e}var r="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";t.exports=n},function(t,e,n){"use strict";function r(){return!o&&i.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var i=n(13),o=null;t.exports=r},function(t,e,n){"use strict";function r(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}function i(t){return"function"==typeof t&&"undefined"!=typeof t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}function o(t,e){var n;if(null===t||t===!1)n=l.create(o);else if("object"==typeof t){var s=t;!s||"function"!=typeof s.type&&"string"!=typeof s.type?a("130",null==s.type?s.type:typeof s.type,r(s._owner)):void 0,"string"==typeof s.type?n=c.createInternalComponent(s):i(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new h(s)}else"string"==typeof t||"number"==typeof t?n=c.createInstanceForText(t):a("131",typeof t);return n._mountIndex=0,n._mountImage=null,n}var a=n(4),s=n(7),u=n(133),l=n(137),c=n(139),h=(n(3),n(5),function(t){this.construct(t)});s(h.prototype,u.Mixin,{_instantiateReactComponent:o});t.exports=o},function(t,e){"use strict";function n(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!r[t.type]:"textarea"===e}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=n},function(t,e,n){"use strict";var r=n(13),i=n(62),o=n(63),a=function(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e};r.canUseDOM&&("textContent"in document.documentElement||(a=function(t,e){o(t,i(e))})),t.exports=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(68);Object.defineProperty(e,"take",{enumerable:!0,get:function(){return r.take}}),Object.defineProperty(e,"takem",{enumerable:!0,get:function(){return r.takem}}),Object.defineProperty(e,"put",{enumerable:!0,get:function(){return r.put}}),Object.defineProperty(e,"race",{enumerable:!0,get:function(){return r.race}}),Object.defineProperty(e,"call",{enumerable:!0,get:function(){return r.call}}),Object.defineProperty(e,"apply",{enumerable:!0,get:function(){return r.apply}}),Object.defineProperty(e,"cps",{enumerable:!0,get:function(){return r.cps}}),Object.defineProperty(e,"fork",{enumerable:!0,get:function(){return r.fork}}),Object.defineProperty(e,"spawn",{enumerable:!0,get:function(){return r.spawn}}),Object.defineProperty(e,"join",{enumerable:!0,get:function(){return r.join}}),Object.defineProperty(e,"cancel",{enumerable:!0,get:function(){return r.cancel}}),Object.defineProperty(e,"select",{enumerable:!0,get:function(){return r.select}}),Object.defineProperty(e,"actionChannel",{enumerable:!0,get:function(){return r.actionChannel}}),Object.defineProperty(e,"cancelled",{enumerable:!0,get:function(){return r.cancelled}}),Object.defineProperty(e,"flush",{enumerable:!0,get:function(){return r.flush}})},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.effects=e.CANCEL=e.delay=e.throttle=e.takeLatest=e.takeEvery=e.buffers=e.channel=e.eventChannel=e.END=e.runSaga=void 0;var o=n(397);Object.defineProperty(e,"runSaga",{enumerable:!0,get:function(){return o.runSaga}});var a=n(67);Object.defineProperty(e,"END",{enumerable:!0,get:function(){return a.END}}),Object.defineProperty(e,"eventChannel",{enumerable:!0,get:function(){return a.eventChannel}}),Object.defineProperty(e,"channel",{enumerable:!0,get:function(){return a.channel}});var s=n(66);Object.defineProperty(e,"buffers",{enumerable:!0,get:function(){return s.buffers}});var u=n(398);Object.defineProperty(e,"takeEvery",{enumerable:!0,get:function(){return u.takeEvery}}),Object.defineProperty(e,"takeLatest",{enumerable:!0,get:function(){return u.takeLatest}}),Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return u.throttle}});var l=n(25);Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return l.delay}}),Object.defineProperty(e,"CANCEL",{enumerable:!0,get:function(){return l.CANCEL}});var c=n(396),h=i(c),f=n(160),p=r(f),d=n(399),m=r(d);e.default=h.default,e.effects=p,e.utils=m},function(t,e,n){"use strict";function r(t,e){for(var n in e){var r=e[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n,r)}return t}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return("*"===t?b.wildcard:h.is.array(t)?b.array:h.is.func(t)?b.predicate:b.default)(t)}function s(t,e,n){function r(t){o(),n(t,!0)}function i(t){a.push(t),t.cont=function(i,o){u||((0,h.remove)(a,t),t.cont=h.noop,o?r(i):(t===e&&(s=i),a.length||(u=!0,n(s))))}}function o(){u||(u=!0,a.forEach(function(t){t.cont=h.noop,t.cancel()}),a=[])}var a=[],s=void 0,u=!1;return i(e),{addTask:i,cancelAll:o,abort:r,getTasks:function(){return a},taskNames:function(){return a.map(function(t){return t.name})}}}function u(t){var e=t.context,n=t.fn,r=t.args;if(h.is.iterator(n))return n;var i=void 0,o=void 0;try{i=n.apply(e,r)}catch(a){o=a}return h.is.iterator(i)?i:o?(0,h.makeIterator)(function(){throw o}):(0,h.makeIterator)(function(){var t=void 0,e={done:!1,value:i},n=function(t){return{done:!0,value:t}};return function(r){return t?n(r):(t=!0,e)}}())}function l(t){return{fn:t}}function c(t){function e(){Q.isRunning&&!Q.isCancelled&&(Q.isCancelled=!0,b(_))}function n(){t._isRunning&&!t._isCancelled&&(t._isCancelled=!0,$.cancelAll(),w(_))}function b(e,n){if(!Q.isRunning)throw new Error("Trying to resume an already finished generator");try{var r=void 0;n?r=t.throw(e):e===_?(Q.isCancelled=!0,b.cancel(),r=h.is.func(t.return)?t.return(_):{done:!0,value:_}):r=e===y?h.is.func(t.return)?t.return():{done:!0}:t.next(e),r.done?(Q.isMainRunning=!1,Q.cont&&Q.cont(r.value)):x(r.value,G,"",b)}catch(i){Q.isCancelled&&K("error","uncaught at "+H,i.message),Q.isMainRunning=!1,Q.cont(i,!0)}}function w(e,n){t._isRunning=!1,Z.close(),n?(e instanceof Error&&(e.sagaStack="at "+H+" \n "+(e.sagaStack||e.stack)),J.cont||(K("error","uncaught",e.sagaStack||e.stack),e instanceof Error&&Y&&Y(e)),t._error=e,t._isAborted=!0,t._deferredEnd&&t._deferredEnd.reject(e)):(e===_&&v&&K("info",H+" has been cancelled",""),t._result=e,t._deferredEnd&&t._deferredEnd.resolve(e)),J.cont&&J.cont(e,n),J.joiners.forEach(function(t){return t.cb(e,n)}),J.joiners=null}function x(t,e){function n(t,e){a||(a=!0,i.cancel=h.noop,X&&(e?X.effectRejected(o,t):X.effectResolved(o,t)),i(t,e))}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments[3],o=(0,h.uid)();X&&X.effectTriggered({effectId:o,parentEffectId:e,label:r,effect:t});var a=void 0;n.cancel=h.noop,i.cancel=function(){if(!a){a=!0;try{n.cancel()}catch(t){K("error","uncaught at "+H,t.message)}n.cancel=h.noop,X&&X.effectCancelled(o)}};var s=void 0;return h.is.promise(t)?E(t,n):h.is.helper(t)?O(l(t),o,n):h.is.iterator(t)?C(t,o,H,n):h.is.array(t)?L(t,o,n):h.is.notUndef(s=p.asEffect.take(t))?S(s,n):h.is.notUndef(s=p.asEffect.put(t))?M(s,n):h.is.notUndef(s=p.asEffect.race(t))?I(s,o,n):h.is.notUndef(s=p.asEffect.call(t))?P(s,o,n):h.is.notUndef(s=p.asEffect.cps(t))?T(s,n):h.is.notUndef(s=p.asEffect.fork(t))?O(s,o,n):h.is.notUndef(s=p.asEffect.join(t))?A(s,n):h.is.notUndef(s=p.asEffect.cancel(t))?R(s,n):h.is.notUndef(s=p.asEffect.select(t))?k(s,n):h.is.notUndef(s=p.asEffect.actionChannel(t))?D(s,n):h.is.notUndef(s=p.asEffect.flush(t))?N(s,n):h.is.notUndef(s=p.asEffect.cancelled(t))?j(s,n):n(t)}function E(t,e){var n=t[h.CANCEL];"function"==typeof n&&(e.cancel=n),t.then(e,function(t){return e(t,!0)})}function C(t,e,n,r){c(t,F,U,V,z,e,n,r)}function S(t,e){var n=t.channel,r=t.pattern,i=t.maybe;n=n||Z;var o=function(t){return t instanceof Error?e(t,!0):e((0,d.isEnd)(t)&&!i?y:t)};try{n.take(o,a(r))}catch(s){return e(s,!0)}e.cancel=o.cancel}function M(t,e){var n=t.channel,r=t.action,i=t.sync;(0,f.asap)(function(){var t=void 0;try{t=(n?n.put:U)(r)}catch(o){if(n||i)return e(o,!0);K("error","uncaught at "+H,o.stack||o.message||o)}return i&&h.is.promise(t)?void E(t,e):e(t)})}function P(t,e,n){var r=t.context,i=t.fn,o=t.args,a=void 0;try{a=i.apply(r,o)}catch(s){return n(s,!0)}return h.is.promise(a)?E(a,n):h.is.iterator(a)?C(a,e,i.name,n):n(a)}function T(t,e){var n=t.context,r=t.fn,i=t.args;try{!function(){var t=function(t,n){return h.is.undef(t)?e(n):e(t,!0)};r.apply(n,i.concat(t)),t.cancel&&(e.cancel=function(){return t.cancel()})}()}catch(o){return e(o,!0)}}function O(t,e,n){var r=t.context,i=t.fn,o=t.args,a=t.detached,s=u({context:r,fn:i,args:o});try{(0,f.suspend)();var l=c(s,F,U,V,z,e,i.name,a?null:h.noop);a?n(l):s._isRunning?($.addTask(l),n(l)):s._error?$.abort(s._error):n(l)}finally{(0,f.flush)()}}function A(t,e){t.isRunning()?!function(){var n={task:J,cb:e};e.cancel=function(){return(0,h.remove)(t.joiners,n)},t.joiners.push(n)}():t.isAborted()?e(t.error(),!0):e(t.result())}function R(t,e){t.isRunning()&&t.cancel(),e()}function L(t,e,n){function r(){i===a.length&&(o=!0,n(a))}if(!t.length)return n([]);var i=0,o=void 0,a=Array(t.length),s=t.map(function(t,e){var s=function(t,s){o||(s||(0,d.isEnd)(t)||t===y||t===_?(n.cancel(),n(t,s)):(a[e]=t,i++,r()))};return s.cancel=h.noop,s});n.cancel=function(){o||(o=!0,s.forEach(function(t){return t.cancel()}))},t.forEach(function(t,n){return x(t,e,n,s[n])})}function I(t,e,n){var r=void 0,i=Object.keys(t),a={};i.forEach(function(t){var e=function(e,i){r||(i?(n.cancel(),n(e,!0)):(0,d.isEnd)(e)||e===y||e===_||(n.cancel(),r=!0,n(o({},t,e))))};e.cancel=h.noop,a[t]=e}),n.cancel=function(){r||(r=!0,i.forEach(function(t){return a[t].cancel()}))},i.forEach(function(n){r||x(t[n],e,n,a[n])})}function k(t,e){var n=t.selector,r=t.args;try{var o=n.apply(void 0,[V()].concat(i(r)));e(o)}catch(a){e(a,!0)}}function D(t,e){var n=t.pattern,r=t.buffer,i=a(n);i.pattern=n,e((0,d.eventChannel)(F,r||m.buffers.fixed(),i))}function j(t,e){e(!!Q.isCancelled)}function N(t,e){t.flush(e)}function B(t,e,i,a){var s,u,l;return i._deferredEnd=null,u={},o(u,h.TASK,!0),o(u,"id",t),o(u,"name",e),s="done",l={},l[s]=l[s]||{},l[s].get=function(){if(i._deferredEnd)return i._deferredEnd.promise;var t=(0,h.deferred)();return i._deferredEnd=t,i._isRunning||(i._error?t.reject(i._error):t.resolve(i._result)),t.promise},o(u,"cont",a),o(u,"joiners",[]),o(u,"cancel",n),o(u,"isRunning",function(){return i._isRunning}),o(u,"isCancelled",function(){return i._isCancelled}),o(u,"isAborted",function(){return i._isAborted}),o(u,"result",function(){return i._result}),o(u,"error",function(){return i._error}),r(u,l),u}var F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return h.noop},U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.noop,V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.noop,z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},G=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"anonymous",W=arguments[7];(0,h.check)(t,h.is.iterator,g);var X=z.sagaMonitor,q=z.logger,Y=z.onError,K=q||h.log,Z=(0,d.stdChannel)(F);b.cancel=h.noop;var J=B(G,H,t,W),Q={name:H,cancel:e,isRunning:!0},$=s(H,Q,w);return W&&(W.cancel=n),t._isRunning=!0,b(),J}Object.defineProperty(e,"__esModule",{value:!0}),e.TASK_CANCEL=e.CHANNEL_END=e.NOT_ITERATOR_ERROR=void 0,e.default=c;var h=n(25),f=n(163),p=n(68),d=n(67),m=n(66),v=!1,g=e.NOT_ITERATOR_ERROR="proc first argument (Saga function result) must be an iterator",y=e.CHANNEL_END={toString:function(){return"@@redux-saga/CHANNEL_END"}},_=e.TASK_CANCEL={toString:function(){return"@@redux-saga/TASK_CANCEL"}},b={wildcard:function(){return h.kTrue},default:function(t){return function(e){return e.type===t}},array:function(t){return function(e){return t.some(function(t){return t===e.type})}},predicate:function(t){return function(e){return t(e)}}}},function(t,e){"use strict";function n(t){try{i(),t()}finally{o()}}function r(t){s?a.push(t):n(t)}function i(){s++}function o(){s--,!s&&a.length&&n(a.shift())}Object.defineProperty(e,"__esModule",{value:!0}),e.asap=r,e.suspend=i,e.flush=o;var a=[],s=0},function(t,e){"use strict";function n(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0===e.length)return function(t){return t};if(1===e.length)return e[0];var r=e[e.length-1],i=e.slice(0,-1);return function(){return i.reduceRight(function(t,e){return e(t)},r.apply(void 0,arguments))}}e.__esModule=!0,e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){function r(){g===v&&(g=v.slice())}function o(){return m}function s(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return r(),g.push(t),function(){if(e){e=!1,r();var n=g.indexOf(t);g.splice(n,1)}}}function c(t){if(!(0,a.default)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(y)throw new Error("Reducers may not dispatch actions.");try{y=!0,m=d(m,t)}finally{y=!1}for(var e=v=g,n=0;n<e.length;n++)e[n]();return t}function h(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");d=t,c({type:l.INIT})}function f(){var t,e=s;return t={subscribe:function(t){function n(){t.next&&t.next(o())}if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");n();var r=e(n);return{unsubscribe:r}}},t[u.default]=function(){return this},t}var p;if("function"==typeof e&&"undefined"==typeof n&&(n=e,e=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(i)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var d=t,m=e,v=[],g=v,y=!1;return c({type:l.INIT}),p={dispatch:c,subscribe:s,getState:o,replaceReducer:h},p[u.default]=f,p}e.__esModule=!0,e.ActionTypes=void 0,e.default=i;var o=n(69),a=r(o),s=n(407),u=r(s),l=e.ActionTypes={INIT:"@@redux/INIT"}},function(t,e){"use strict";function n(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t);try{throw new Error(t)}catch(e){}}e.__esModule=!0,e.default=n},function(t,e,n){"use strict";function r(t){var e=new a(t),n=o(a.prototype.request,e);return i.extend(n,a.prototype,e),i.extend(n,e),n}var i=n(16),o=n(99),a=n(169),s=r();s.Axios=a,s.create=function(t){return r(t)},s.Cancel=n(95),s.CancelToken=n(168),s.isCancel=n(96),s.all=function(t){return Promise.all(t)},s.spread=n(183),t.exports=s,t.exports.default=s},function(t,e,n){"use strict";function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new i(t),e(n.reason))})}var i=n(95);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t,e=new r(function(e){t=e});return{token:e,cancel:t}},t.exports=r},function(t,e,n){"use strict";function r(t){this.defaults=o.merge(i,t),this.interceptors={request:new a,response:new a}}var i=n(98),o=n(16),a=n(170),s=n(171),u=n(179),l=n(177);r.prototype.request=function(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),t=o.merge(i,this.defaults,{method:"get"},t),t.baseURL&&!u(t.url)&&(t.url=l(t.baseURL,t.url));var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},o.forEach(["delete","get","head"],function(t){r.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){r.prototype[t]=function(e,n,r){return this.request(o.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=r},function(t,e,n){"use strict";function r(){this.handlers=[]}var i=n(16);r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e,n){"use strict";function r(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var i=n(16),o=n(174),a=n(96),s=n(98);t.exports=function(t){r(t),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]});var e=t.adapter||s.adapter;return e(t).then(function(e){return r(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return a(e)||(r(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e){"use strict";t.exports=function(t,e,n,r){return t.config=e,n&&(t.code=n),t.response=r,t}},function(t,e,n){"use strict";var r=n(97);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n)):t(n)}},function(t,e,n){"use strict";var r=n(16);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e){"use strict";function n(){this.message="String contains an invalid character"}function r(t){for(var e,r,o=String(t),a="",s=0,u=i;o.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&e>>8-s%1*8)){if(r=o.charCodeAt(s+=.75),r>255)throw new n;e=e<<8|r}return a}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=r},function(t,e,n){"use strict";function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(16);t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(i.isURLSearchParams(e))o=e.toString();else{var a=[];i.forEach(e,function(t,e){null!==t&&"undefined"!=typeof t&&(i.isArray(t)&&(e+="[]"),i.isArray(t)||(t=[t]),i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))}))}),o=a.join("&")}return o&&(t+=(t.indexOf("?")===-1?"?":"&")+o),t}},function(t,e){"use strict";t.exports=function(t,e){return t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,"")}},function(t,e,n){"use strict";var r=n(16);t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,n,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";var r=n(16);t.exports=r.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return e=t(window.location.href),function(n){var i=r.isString(n)?t(n):n;return i.protocol===e.protocol&&i.host===e.host}}():function(){return function(){return!0}}()},function(t,e,n){"use strict";var r=n(16);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(16);t.exports=function(t){var e,n,i,o={};return t?(r.forEach(t.split("\n"),function(t){i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e&&(o[e]=o[e]?o[e]+", "+n:n)}),o):o}},function(t,e){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e){function n(t,e,n){Qt.biginteger_used=1,null!=t&&("number"==typeof t?this.fromString(Math.floor(t).toString(),10):null==e&&"string"!=typeof t?this.fromString(t,256):(t.indexOf(".")!=-1&&(t=t.substring(0,t.indexOf("."))),this.fromString(t,e)))}function r(){return new n(null)}function i(t,e,n,r,i,o){for(var a=16383&e,s=e>>14;--o>=0;){var u=16383&this[t],l=this[t++]>>14,c=s*u+l*a;u=a*u+((16383&c)<<14)+n[r]+i,i=(u>>28)+(c>>14)+s*l,n[r++]=268435455&u}return i}function o(t){return re.charAt(t)}function a(t,e){var n=ie[t.charCodeAt(e)];return null==n?-1:n}function s(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function u(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+DV:this.t=0}function l(t){var e=r();return e.fromInt(t),e}function c(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var i=t.length,o=!1,s=0;--i>=0;){var u=8==r?255&t[i]:a(t,i);u<0?"-"==t.charAt(i)&&(o=!0):(o=!1,0==s?this[this.t++]=u:s+r>this.DB?(this[this.t-1]|=(u&(1<<this.DB-s)-1)<<s,this[this.t++]=u>>this.DB-s):this[this.t-1]|=u<<s,s+=r,s>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&n.ZERO.subTo(this,this)}function h(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function f(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,a="",s=this.t,u=this.DB-s*this.DB%e;if(s-- >0)for(u<this.DB&&(n=this[s]>>u)>0&&(i=!0,a=o(n));s>=0;)u<e?(n=(this[s]&(1<<u)-1)<<e-u,n|=this[--s]>>(u+=this.DB-e)):(n=this[s]>>(u-=e)&r,u<=0&&(u+=this.DB,--s)),n>0&&(i=!0),i&&(a+=o(n));return i?a:"0"}function p(){var t=r();return n.ZERO.subTo(this,t),t}function d(){return this.s<0?this.negate():this}function m(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(e=n-t.t,0!=e)return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0}function v(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function g(){return this.t<=0?0:this.DB*(this.t-1)+v(this[this.t-1]^this.s&this.DM)}function y(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,
e.s=this.s}function _(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function b(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+a+1]=this[n]>>i|s,s=(this[n]&o)<<r;for(n=a-1;n>=0;--n)e[n]=0;e[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function w(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)return void(e.t=0);var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)e[a-n-1]|=(this[a]&o)<<i,e[a-n]=this[a]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}function x(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()}function E(t,e){var r=this.abs(),i=t.abs(),o=r.t;for(e.t=o+i.t;--o>=0;)e[o]=0;for(o=0;o<i.t;++o)e[o+r.t]=r.am(0,i[o],e,o,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&n.ZERO.subTo(e,e)}function C(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function S(t,e,i){var o=t.abs();if(!(o.t<=0)){var a=this.abs();if(a.t<o.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=r());var s=r(),u=this.s,l=t.s,c=this.DB-v(o[o.t-1]);c>0?(o.lShiftTo(c,s),a.lShiftTo(c,i)):(o.copyTo(s),a.copyTo(i));var h=s.t,f=s[h-1];if(0!=f){var p=f*(1<<this.F1)+(h>1?s[h-2]>>this.F2:0),d=this.FV/p,m=(1<<this.F1)/p,g=1<<this.F2,y=i.t,_=y-h,b=null==e?r():e;for(s.dlShiftTo(_,b),i.compareTo(b)>=0&&(i[i.t++]=1,i.subTo(b,i)),n.ONE.dlShiftTo(h,b),b.subTo(s,s);s.t<h;)s[s.t++]=0;for(;--_>=0;){var w=i[--y]==f?this.DM:Math.floor(i[y]*d+(i[y-1]+g)*m);if((i[y]+=s.am(0,w,i,_,0,h))<w)for(s.dlShiftTo(_,b),i.subTo(b,i);i[y]<--w;)i.subTo(b,i)}null!=e&&(i.drShiftTo(h,e),u!=l&&n.ZERO.subTo(e,e)),i.t=h,i.clamp(),c>0&&i.rShiftTo(c,i),u<0&&n.ZERO.subTo(i,i)}}}function M(t){var e=r();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(n.ZERO)>0&&t.subTo(e,e),e}function P(t){this.m=t}function T(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function O(t){return t}function A(t){t.divRemTo(this.m,null,t)}function R(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function L(t,e){t.squareTo(e),this.reduce(e)}function I(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function k(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function D(t){var e=r();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(n.ZERO)>0&&this.m.subTo(e,e),e}function j(t){var e=r();return t.copyTo(e),this.reduce(e),e}function N(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function B(t,e){t.squareTo(e),this.reduce(e)}function F(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function U(){return 0==(this.t>0?1&this[0]:this.s)}function V(t,e){if(t>4294967295||t<1)return n.ONE;var i=r(),o=r(),a=e.convert(this),s=v(t)-1;for(a.copyTo(i);--s>=0;)if(e.sqrTo(i,o),(t&1<<s)>0)e.mulTo(o,a,i);else{var u=i;i=o,o=u}return e.revert(i)}function z(t,e){var n;return n=t<256||e.isEven()?new P(e):new k(e),this.exp(t,n)}function G(){var t=r();return this.copyTo(t),t}function H(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function W(){return 0==this.t?this.s:this[0]<<24>>24}function X(){return 0==this.t?this.s:this[0]<<16>>16}function q(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function Y(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function K(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),i=l(n),o=r(),a=r(),s="";for(this.divRemTo(i,o,a);o.signum()>0;)s=(n+a.intValue()).toString(t).substr(1)+s,o.divRemTo(i,o,a);return a.intValue().toString(t)+s}function Z(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),o=!1,s=0,u=0,l=0;l<t.length;++l){var c=a(t,l);c<0?"-"==t.charAt(l)&&0==this.signum()&&(o=!0):(u=e*u+c,++s>=r&&(this.dMultiply(i),this.dAddOffset(u,0),s=0,u=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(u,0)),o&&n.ZERO.subTo(this,this)}function J(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(n.ONE.shiftLeft(t-1),ot,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(n.ONE.shiftLeft(t-1),this);else{var i=[],o=7&t;i.length=(t>>3)+1,e.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}}function Q(){var t=this.t,e=[];e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function $(t){return 0==this.compareTo(t)}function tt(t){return this.compareTo(t)<0?this:t}function et(t){return this.compareTo(t)>0?this:t}function nt(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function rt(t,e){return t&e}function it(t){var e=r();return this.bitwiseTo(t,rt,e),e}function ot(t,e){return t|e}function at(t){var e=r();return this.bitwiseTo(t,ot,e),e}function st(t,e){return t^e}function ut(t){var e=r();return this.bitwiseTo(t,st,e),e}function lt(t,e){return t&~e}function ct(t){var e=r();return this.bitwiseTo(t,lt,e),e}function ht(){for(var t=r(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function ft(t){var e=r();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function pt(t){var e=r();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function dt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function mt(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+dt(this[t]);return this.s<0?this.t*this.DB:-1}function vt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function gt(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=vt(this[n]^e);return t}function yt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function _t(t,e){var r=n.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function bt(t){return this.changeBit(t,ot)}function wt(t){return this.changeBit(t,lt)}function xt(t){return this.changeBit(t,st)}function Et(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()}function Ct(t){var e=r();return this.addTo(t,e),e}function St(t){var e=r();return this.subTo(t,e),e}function Mt(t){var e=r();return this.multiplyTo(t,e),e}function Pt(){var t=r();return this.squareTo(t),t}function Tt(t){var e=r();return this.divRemTo(t,e,null),e}function Ot(t){var e=r();return this.divRemTo(t,null,e),e}function At(t){var e=r(),n=r();return this.divRemTo(t,e,n),new Array(e,n)}function Rt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Lt(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function It(){}function kt(t){return t}function Dt(t,e,n){t.multiplyTo(e,n)}function jt(t,e){t.squareTo(e)}function Nt(t){return this.exp(t,new It)}function Bt(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,t[r],n,r,0,this.t);for(i=Math.min(t.t,e);r<i;++r)this.am(0,t[r],n,r,0,e-r);n.clamp()}function Ft(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}function Ut(t){this.r2=r(),this.q3=r(),n.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Vt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=r();return t.copyTo(e),this.reduce(e),e}function zt(t){return t}function Gt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Ht(t,e){t.squareTo(e),this.reduce(e)}function Wt(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function Xt(t,e){var n,i,o=t.bitLength(),a=l(1);if(o<=0)return a;n=o<18?1:o<48?3:o<144?4:o<768?5:6,i=o<8?new P(e):e.isEven()?new Ut(e):new k(e);var s=[],u=3,c=n-1,h=(1<<n)-1;if(s[1]=i.convert(this),n>1){var f=r();for(i.sqrTo(s[1],f);u<=h;)s[u]=r(),i.mulTo(f,s[u-2],s[u]),u+=2}var p,d,m=t.t-1,g=!0,y=r();for(o=v(t[m])-1;m>=0;){for(o>=c?p=t[m]>>o-c&h:(p=(t[m]&(1<<o+1)-1)<<c-o,m>0&&(p|=t[m-1]>>this.DB+o-c)),u=n;0==(1&p);)p>>=1,--u;if((o-=u)<0&&(o+=this.DB,--m),g)s[p].copyTo(a),g=!1;else{for(;u>1;)i.sqrTo(a,y),i.sqrTo(y,a),u-=2;u>0?i.sqrTo(a,y):(d=a,a=y,y=d),i.mulTo(y,s[p],a)}for(;m>=0&&0==(t[m]&1<<o);)i.sqrTo(a,y),d=a,a=y,y=d,--o<0&&(o=this.DB-1,--m)}return i.revert(a)}function qt(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function Yt(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n}function Kt(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return n.ZERO;for(var r=t.clone(),i=this.clone(),o=l(1),a=l(0),s=l(0),u=l(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),e?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(i)>=0?(r.subTo(i,r),e&&o.subTo(s,o),a.subTo(u,a)):(i.subTo(r,i),e&&s.subTo(o,s),u.subTo(a,u))}return 0!=i.compareTo(n.ONE)?n.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}function Zt(t){var e,n=this.abs();if(1==n.t&&n[0]<=oe[oe.length-1]){for(e=0;e<oe.length;++e)if(n[0]==oe[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<oe.length;){for(var r=oe[e],i=e+1;i<oe.length&&r<ae;)r*=oe[i++];for(r=n.modInt(r);e<i;)if(r%oe[e++]==0)return!1}return n.millerRabin(t)}function Jt(t){var e=this.subtract(n.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var o=e.shiftRight(i);t=t+1>>1,t>oe.length&&(t=oe.length);for(var a=r(),s=0;s<t;++s){a.fromInt(oe[Math.floor(Math.random()*oe.length)]);var u=a.modPow(o,this);if(0!=u.compareTo(n.ONE)&&0!=u.compareTo(e)){for(var l=1;l++<i&&0!=u.compareTo(e);)if(u=u.modPowInt(2,this),0==u.compareTo(n.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0}var Qt={};Qt.biginteger_used=null;var $t;n.prototype.am=i,$t=28,n.prototype.DB=$t,n.prototype.DM=(1<<$t)-1,n.prototype.DV=1<<$t;var te=52;n.prototype.FV=Math.pow(2,te),n.prototype.F1=te-$t,n.prototype.F2=2*$t-te;var ee,ne,re="0123456789abcdefghijklmnopqrstuvwxyz",ie=[];for(ee="0".charCodeAt(0),ne=0;ne<=9;++ne)ie[ee++]=ne;for(ee="a".charCodeAt(0),ne=10;ne<36;++ne)ie[ee++]=ne;for(ee="A".charCodeAt(0),ne=10;ne<36;++ne)ie[ee++]=ne;P.prototype.convert=T,P.prototype.revert=O,P.prototype.reduce=A,P.prototype.mulTo=R,P.prototype.sqrTo=L,k.prototype.convert=D,k.prototype.revert=j,k.prototype.reduce=N,k.prototype.mulTo=F,k.prototype.sqrTo=B,n.prototype.copyTo=s,n.prototype.fromInt=u,n.prototype.fromString=c,n.prototype.clamp=h,n.prototype.dlShiftTo=y,n.prototype.drShiftTo=_,n.prototype.lShiftTo=b,n.prototype.rShiftTo=w,n.prototype.subTo=x,n.prototype.multiplyTo=E,n.prototype.squareTo=C,n.prototype.divRemTo=S,n.prototype.invDigit=I,n.prototype.isEven=U,n.prototype.exp=V,n.prototype.toString=f,n.prototype.negate=p,n.prototype.abs=d,n.prototype.compareTo=m,n.prototype.bitLength=g,n.prototype.mod=M,n.prototype.modPowInt=z,n.ZERO=l(0),n.ONE=l(1),It.prototype.convert=kt,It.prototype.revert=kt,It.prototype.mulTo=Dt,It.prototype.sqrTo=jt,Ut.prototype.convert=Vt,Ut.prototype.revert=zt,Ut.prototype.reduce=Gt,Ut.prototype.mulTo=Wt,Ut.prototype.sqrTo=Ht;var oe=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ae=(1<<26)/oe[oe.length-1];n.prototype.chunkSize=q,n.prototype.toRadix=K,n.prototype.fromRadix=Z,n.prototype.fromNumber=J,n.prototype.bitwiseTo=nt,n.prototype.changeBit=_t,n.prototype.addTo=Et,n.prototype.dMultiply=Rt,n.prototype.dAddOffset=Lt,n.prototype.multiplyLowerTo=Bt,n.prototype.multiplyUpperTo=Ft,n.prototype.modInt=Yt,n.prototype.millerRabin=Jt,n.prototype.clone=G,n.prototype.intValue=H,n.prototype.byteValue=W,n.prototype.shortValue=X,n.prototype.signum=Y,n.prototype.toByteArray=Q,n.prototype.equals=$,n.prototype.min=tt,n.prototype.max=et,n.prototype.and=it,n.prototype.or=at,n.prototype.xor=ut,n.prototype.andNot=ct,n.prototype.not=ht,n.prototype.shiftLeft=ft,n.prototype.shiftRight=pt,n.prototype.getLowestSetBit=mt,n.prototype.bitCount=gt,n.prototype.testBit=yt,n.prototype.setBit=bt,n.prototype.clearBit=wt,n.prototype.flipBit=xt,n.prototype.add=Ct,n.prototype.subtract=St,n.prototype.multiply=Mt,n.prototype.divide=Tt,n.prototype.remainder=Ot,n.prototype.divideAndRemainder=At,n.prototype.modPow=Xt,n.prototype.modInverse=Kt,n.prototype.pow=Nt,n.prototype.gcd=qt,n.prototype.isProbablePrime=Zt,n.prototype.square=Pt,Qt.Math_Abs_Int64=Qt.Math_Abs_Int32=Qt.Math_Abs_Double=function(t){return Math.abs(t)},Qt.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},Qt.Cast_Int32=function(t){return~~t},Qt.Cast_Int64=function(t){return t<0?Math.ceil(t):Math.floor(t)},Qt.Clear=function(t){t.length=0},Qt.MaxSteps=64,Qt.PI=3.141592653589793,Qt.PI2=6.283185307179586,Qt.IntPoint=function(){var t=arguments;1==t.length&&(this.X=t[0].X,this.Y=t[0].Y),2==t.length&&(this.X=t[0],this.Y=t[1])},Qt.IntRect=function(){var t=arguments;if(4==t.length){var e=t[0],n=t[1],r=t[2],i=t[3];this.left=e,this.top=n,this.right=r,this.bottom=i}else this.left=0,this.top=0,this.right=0,this.bottom=0},Qt.Polygon=function(){return[]},Qt.Polygons=function(){return[[]]},Qt.ExPolygon=function(){this.outer=null,this.holes=null},Qt.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},Qt.PolyType={ptSubject:0,ptClip:1},Qt.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},Qt.JoinType={jtSquare:0,jtRound:1,jtMiter:2},Qt.EdgeSide={esLeft:1,esRight:2},Qt.Protects={ipNone:0,ipLeft:1,ipRight:2,ipBoth:3},Qt.Direction={dRightToLeft:0,dLeftToRight:1},Qt.TEdge=function(){this.xbot=0,this.ybot=0,this.xcurr=0,this.ycurr=0,this.xtop=0,this.ytop=0,this.dx=0,this.deltaX=0,this.deltaY=0,this.tmpX=0,this.polyType=Qt.PolyType.ptSubject,this.side=null,this.windDelta=0,this.windCnt=0,this.windCnt2=0,this.outIdx=0,this.next=null,this.prev=null,this.nextInLML=null,this.nextInAEL=null,this.prevInAEL=null,this.nextInSEL=null,this.prevInSEL=null},Qt.IntersectNode=function(){this.edge1=null,this.edge2=null,this.pt=null,this.next=null},Qt.LocalMinima=function(){this.Y=0,this.leftBound=null,this.rightBound=null,this.next=null},Qt.Scanbeam=function(){this.Y=0,this.next=null},Qt.OutRec=function(){this.idx=0,this.isHole=!1,this.FirstLeft=null,this.AppendLink=null,this.pts=null,this.bottomPt=null},Qt.OutPt=function(){this.idx=0,this.pt=null,this.next=null,this.prev=null},Qt.JoinRec=function(){this.pt1a=null,this.pt1b=null,this.poly1Idx=0,this.pt2a=null,this.pt2b=null,this.poly2Idx=0},Qt.HorzJoinRec=function(){this.edge=null,this.savedIdx=0},Qt.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=[[]],this.m_UseFullRange=!1},Qt.ClipperBase.horizontal=-9007199254740992,Qt.ClipperBase.loRange=47453132,Qt.ClipperBase.hiRange=0xfffffffffffff,Qt.ClipperBase.PointsEqual=function(t,e){return t.X==e.X&&t.Y==e.Y},Qt.ClipperBase.prototype.PointIsVertex=function(t,e){var n=e;do{if(Qt.ClipperBase.PointsEqual(n.pt,t))return!0;n=n.next}while(n!=e);return!1},Qt.ClipperBase.prototype.PointInPolygon=function(t,e,r){var i=e,o=!1;if(r)do(i.pt.Y<=t.Y&&t.Y<i.prev.pt.Y||i.prev.pt.Y<=t.Y&&t.Y<i.pt.Y)&&new n(t.X-i.pt.X).compareTo(new n(i.prev.pt.X-i.pt.X).multiply(new n(t.Y-i.pt.Y)).divide(new n(i.prev.pt.Y-i.pt.Y)))<0&&(o=!o),i=i.next;while(i!=e);else do(i.pt.Y<=t.Y&&t.Y<i.prev.pt.Y||i.prev.pt.Y<=t.Y&&t.Y<i.pt.Y)&&t.X-i.pt.X<(i.prev.pt.X-i.pt.X)*(t.Y-i.pt.Y)/(i.prev.pt.Y-i.pt.Y)&&(o=!o),i=i.next;while(i!=e);return o},Qt.ClipperBase.prototype.SlopesEqual=function(){var t,e,r,i,o,a,s,u=arguments;return 3==u.length?(t=u[0],e=u[1],s=u[2],s?new n(t.deltaY).multiply(new n(e.deltaX)).toString()==new n(t.deltaX).multiply(new n(e.deltaY)).toString():t.deltaY*e.deltaX==t.deltaX*e.deltaY):4==u.length?(r=u[0],i=u[1],o=u[2],s=u[3],s?new n(r.Y-i.Y).multiply(new n(i.X-o.X)).toString()==new n(r.X-i.X).multiply(new n(i.Y-o.Y)).toString():(r.Y-i.Y)*(i.X-o.X)-(r.X-i.X)*(i.Y-o.Y)==0):5==u.length?(r=u[0],i=u[1],o=u[2],a=u[3],s=u[4],s?new n(r.Y-i.Y).multiply(new n(o.X-a.X)).toString()==new n(r.X-i.X).multiply(new n(o.Y-a.Y)).toString():(r.Y-i.Y)*(o.X-a.X)-(r.X-i.X)*(o.Y-a.Y)==0):void 0},Qt.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0;t<this.m_edges.length;++t){for(var e=0;e<this.m_edges[t].length;++e)this.m_edges[t][e]=null;Qt.Clear(this.m_edges[t])}Qt.Clear(this.m_edges),this.m_UseFullRange=!1},Qt.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!=this.m_MinimaList;){var t=this.m_MinimaList.next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},Qt.ClipperBase.prototype.AddPolygons=function(t,e){var n=!1,r=!1;if(!(t instanceof Array))return n;for(var i=0;i<t.length;++i)if(r=this.AddPolygon(t[i],e,!0),r&&"exceed"!=r)n=!0;else if("exceed"==r)break;return"exceed"==r&&Qt.Error("Coordinate exceeds range bounds in AddPolygons()."),n},Qt.ClipperBase.prototype.AddPolygon=function(t,e,n){if(!(t instanceof Array))return!1;var r=t.length;if(r<3)return!1;var i=new Qt.Polygon;i.push(new Qt.IntPoint(t[0].X,t[0].Y));var o,a=0,s=!1;for(o=1;o<r;++o){var u;if(u=this.m_UseFullRange?Qt.ClipperBase.hiRange:Qt.ClipperBase.loRange,Qt.Math_Abs_Int64(t[o].X)>u||Qt.Math_Abs_Int64(t[o].Y)>u){if(Qt.Math_Abs_Int64(t[o].X)>Qt.ClipperBase.hiRange||Qt.Math_Abs_Int64(t[o].Y)>Qt.ClipperBase.hiRange){if("undefined"!=typeof n)return"exceed";s=!0;break}u=Qt.ClipperBase.hiRange,this.m_UseFullRange=!0}Qt.ClipperBase.PointsEqual(i[a],t[o])||(a>0&&this.SlopesEqual(i[a-1],i[a],t[o],this.m_UseFullRange)?Qt.ClipperBase.PointsEqual(i[a-1],t[o])&&a--:a++,a<i.length?i[a]=t[o]:i.push(new Qt.IntPoint(t[o].X,t[o].Y)))}if(s&&"undefined"==typeof n&&Qt.Error("Coordinate exceeds range bounds in AddPolygon()"),a<2)return!1;for(r=a+1;r>2;){if(Qt.ClipperBase.PointsEqual(i[a],i[0]))a--;else if(Qt.ClipperBase.PointsEqual(i[0],i[1])||this.SlopesEqual(i[a],i[0],i[1],this.m_UseFullRange))i[0]=i[a--];else if(this.SlopesEqual(i[a-1],i[a],i[0],this.m_UseFullRange))a--;else{if(!this.SlopesEqual(i[0],i[1],i[2],this.m_UseFullRange))break;for(o=2;o<=a;++o)i[o-1]=i[o];a--}r--}if(r<3)return!1;var l=[];for(o=0;o<r;o++)l.push(new Qt.TEdge);for(this.m_edges.push(l),l[0].xcurr=i[0].X,l[0].ycurr=i[0].Y,this.InitEdge(l[r-1],l[0],l[r-2],i[r-1],e),o=r-2;o>0;--o)this.InitEdge(l[o],l[o+1],l[o-1],i[o],e);this.InitEdge(l[0],l[1],l[r-1],i[0],e);var c=l[0],h=c;do c.xcurr=c.xbot,c.ycurr=c.ybot,c.ytop<h.ytop&&(h=c),c=c.next;while(c!=l[0]);h.windDelta>0&&(h=h.next),h.dx==Qt.ClipperBase.horizontal&&(h=h.next),c=h;do c=this.AddBoundsToLML(c);while(c!=h);return!0},Qt.ClipperBase.prototype.InitEdge=function(t,e,n,r,i){t.next=e,t.prev=n,t.xcurr=r.X,t.ycurr=r.Y,t.ycurr>=t.next.ycurr?(t.xbot=t.xcurr,t.ybot=t.ycurr,t.xtop=t.next.xcurr,t.ytop=t.next.ycurr,t.windDelta=1):(t.xtop=t.xcurr,t.ytop=t.ycurr,t.xbot=t.next.xcurr,t.ybot=t.next.ycurr,t.windDelta=-1),this.SetDx(t),t.polyType=i,t.outIdx=-1},Qt.ClipperBase.prototype.SetDx=function(t){t.deltaX=t.xtop-t.xbot,t.deltaY=t.ytop-t.ybot,0==t.deltaY?t.dx=Qt.ClipperBase.horizontal:t.dx=t.deltaX/t.deltaY},Qt.ClipperBase.prototype.AddBoundsToLML=function(t){for(t.nextInLML=null,t=t.next;;){if(t.dx==Qt.ClipperBase.horizontal){if(t.next.ytop<t.ytop&&t.next.xbot>t.prev.xbot)break;t.xtop!=t.prev.xbot&&this.SwapX(t),t.nextInLML=t.prev}else{if(t.ycurr==t.prev.ycurr)break;t.nextInLML=t.prev}t=t.next}var e=new Qt.LocalMinima;for(e.next=null,e.Y=t.prev.ybot,t.dx==Qt.ClipperBase.horizontal?(t.xbot!=t.prev.xbot&&this.SwapX(t),e.leftBound=t.prev,e.rightBound=t):t.dx<t.prev.dx?(e.leftBound=t.prev,e.rightBound=t):(e.leftBound=t,e.rightBound=t.prev),e.leftBound.side=Qt.EdgeSide.esLeft,e.rightBound.side=Qt.EdgeSide.esRight,this.InsertLocalMinima(e);t.next.ytop!=t.ytop||t.next.dx==Qt.ClipperBase.horizontal;)t.nextInLML=t.next,t=t.next,t.dx==Qt.ClipperBase.horizontal&&t.xbot!=t.prev.xtop&&this.SwapX(t);return t.next},Qt.ClipperBase.prototype.InsertLocalMinima=function(t){if(null==this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!=e.next&&t.Y<e.next.Y;)e=e.next;t.next=e.next,e.next=t}},Qt.ClipperBase.prototype.PopLocalMinima=function(){null!=this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.next)},Qt.ClipperBase.prototype.SwapX=function(t){t.xcurr=t.xtop,t.xtop=t.xbot,t.xbot=t.xcurr},Qt.ClipperBase.prototype.Reset=function(){this.m_CurrentLM=this.m_MinimaList;for(var t=this.m_MinimaList;null!=t;){for(var e=t.leftBound;null!=e;)e.xcurr=e.xbot,e.ycurr=e.ybot,e.side=Qt.EdgeSide.esLeft,e.outIdx=-1,e=e.nextInLML;for(e=t.rightBound;null!=e;)e.xcurr=e.xbot,e.ycurr=e.ybot,e.side=Qt.EdgeSide.esRight,e.outIdx=-1,e=e.nextInLML;t=t.next}},Qt.ClipperBase.prototype.GetBounds=function(){var t=new Qt.IntRect,e=this.m_MinimaList;if(null==e)return t;for(t.left=e.leftBound.xbot,t.top=e.leftBound.ybot,t.right=e.leftBound.xbot,t.bottom=e.leftBound.ybot;null!=e;){e.leftBound.ybot>t.bottom&&(t.bottom=e.leftBound.ybot);for(var n=e.leftBound;;){for(var r=n;null!=n.nextInLML;)n.xbot<t.left&&(t.left=n.xbot),n.xbot>t.right&&(t.right=n.xbot),n=n.nextInLML;if(n.xbot<t.left&&(t.left=n.xbot),n.xbot>t.right&&(t.right=n.xbot),n.xtop<t.left&&(t.left=n.xtop),n.xtop>t.right&&(t.right=n.xtop),n.ytop<t.top&&(t.top=n.ytop),r!=e.leftBound)break;n=e.rightBound}e=e.next}return t},Qt.Clipper=function(){this.m_PolyOuts=null,this.m_ClipType=Qt.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectNodes=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=Qt.PolyFillType.pftEvenOdd,this.m_SubjFillType=Qt.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_HorizJoins=null,this.m_ReverseOutput=!1,this.m_UsingExPolygons=!1,Qt.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectNodes=null,this.m_ExecuteLocked=!1,this.m_PolyOuts=[],this.m_Joins=[],this.m_HorizJoins=[],this.m_ReverseOutput=!1,this.m_UsingExPolygons=!1},Qt.Clipper.prototype.Clear=function(){0!=this.m_edges.length&&(this.DisposeAllPolyPts(),Qt.ClipperBase.prototype.Clear.call(this))},Qt.Clipper.prototype.DisposeScanbeamList=function(){for(;null!=this.m_Scanbeam;){var t=this.m_Scanbeam.next;this.m_Scanbeam=null,this.m_Scanbeam=t}},Qt.Clipper.prototype.Reset=function(){Qt.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.DisposeAllPolyPts();for(var t=this.m_MinimaList;null!=t;)this.InsertScanbeam(t.Y),this.InsertScanbeam(t.leftBound.ytop),t=t.next},Qt.Clipper.prototype.get_ReverseSolution=function(){return this.m_ReverseOutput},Qt.Clipper.prototype.set_ReverseSolution=function(t){this.m_ReverseOutput=t},Qt.Clipper.prototype.InsertScanbeam=function(t){var e;if(null==this.m_Scanbeam)this.m_Scanbeam=new Qt.Scanbeam,this.m_Scanbeam.next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y)e=new Qt.Scanbeam,e.Y=t,e.next=this.m_Scanbeam,this.m_Scanbeam=e;else{for(var n=this.m_Scanbeam;null!=n.next&&t<=n.next.Y;)n=n.next;if(t==n.Y)return;e=new Qt.Scanbeam,e.Y=t,e.next=n.next,n.next=e}},Qt.Clipper.prototype.Execute=function(t,e,n,r){var i;return 2==arguments.length&&(n=Qt.PolyFillType.pftEvenOdd,r=Qt.PolyFillType.pftEvenOdd),e.hasOwnProperty("outer")?!this.m_ExecuteLocked&&(this.m_ExecuteLocked=!0,Qt.Clear(e),this.m_SubjFillType=n,this.m_ClipFillType=r,this.m_ClipType=t,this.m_UsingExPolygons=!0,i=this.ExecuteInternal(),i&&this.BuildResultEx(e),this.m_ExecuteLocked=!1,i):!this.m_ExecuteLocked&&(this.m_ExecuteLocked=!0,Qt.Clear(e),this.m_SubjFillType=n,this.m_ClipFillType=r,this.m_ClipType=t,this.m_UsingExPolygons=!1,i=this.ExecuteInternal(),i&&this.BuildResult(e),this.m_ExecuteLocked=!1,i)},Qt.Clipper.prototype.PolySort=function(t,e){if(t==e)return 0;if(null==t.pts||null==e.pts)return null==t.pts!=(null==e.pts)?null==t.pts?1:-1:0;var n,r;n=t.isHole?t.FirstLeft.idx:t.idx,r=e.isHole?e.FirstLeft.idx:e.idx;var i=n-r;return 0==i&&t.isHole!=e.isHole?t.isHole?1:-1:i},Qt.Clipper.prototype.FindAppendLinkEnd=function(t){for(;null!=t.AppendLink;)t=t.AppendLink;return t},Qt.Clipper.prototype.FixHoleLinkage=function(t){var e;e=null!=t.bottomPt?this.m_PolyOuts[t.bottomPt.idx].FirstLeft:t.FirstLeft,t==e&&Qt.Error("HoleLinkage error"),null!=e&&(null!=e.AppendLink&&(e=this.FindAppendLinkEnd(e)),e==t?e=null:e.isHole&&(this.FixHoleLinkage(e),e=e.FirstLeft)),t.FirstLeft=e,null==e&&(t.isHole=!1),t.AppendLink=null},Qt.Clipper.prototype.ExecuteInternal=function(){var t;try{if(this.Reset(),null==this.m_CurrentLM)return!0;var e=this.PopScanbeam();do{this.InsertLocalMinimaIntoAEL(e),Qt.Clear(this.m_HorizJoins),this.ProcessHorizontals();var n=this.PopScanbeam();if(t=this.ProcessIntersections(e,n),!t)break;this.ProcessEdgesAtTopOfScanbeam(n),e=n}while(null!=this.m_Scanbeam)}catch(r){t=!1}if(t){for(var i,o=0;o<this.m_PolyOuts.length;o++)i=this.m_PolyOuts[o],null!=i.pts&&(this.FixupOutPolygon(i),null!=i.pts&&(i.isHole&&this.m_UsingExPolygons&&this.FixHoleLinkage(i),(i.isHole^this.m_ReverseOutput)==this.Area(i,this.m_UseFullRange)>0&&this.ReversePolyPtLinks(i.pts)));this.JoinCommonEdges(),this.m_UsingExPolygons&&this.m_PolyOuts.sort(this.PolySort)}return Qt.Clear(this.m_Joins),Qt.Clear(this.m_HorizJoins),t},Qt.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y,e=this.m_Scanbeam;return this.m_Scanbeam=this.m_Scanbeam.next,e=null,t},Qt.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0;t<this.m_PolyOuts.length;++t)this.DisposeOutRec(t);Qt.Clear(this.m_PolyOuts)},Qt.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];null!=e.pts&&this.DisposeOutPts(e.pts),e=null,this.m_PolyOuts[t]=null},Qt.Clipper.prototype.DisposeOutPts=function(t){if(null!=t){var e=null;for(t.prev.next=null;null!=t;)e=t,t=t.next,e=null}},Qt.Clipper.prototype.AddJoin=function(t,e,n,r){var i=new Qt.JoinRec;n>=0?i.poly1Idx=n:i.poly1Idx=t.outIdx,i.pt1a=new Qt.IntPoint(t.xcurr,t.ycurr),i.pt1b=new Qt.IntPoint(t.xtop,t.ytop),r>=0?i.poly2Idx=r:i.poly2Idx=e.outIdx,i.pt2a=new Qt.IntPoint(e.xcurr,e.ycurr),i.pt2b=new Qt.IntPoint(e.xtop,e.ytop),this.m_Joins.push(i)},Qt.Clipper.prototype.AddHorzJoin=function(t,e){var n=new Qt.HorzJoinRec;n.edge=t,n.savedIdx=e,this.m_HorizJoins.push(n)},Qt.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(var e,n;null!=this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var r=this.m_CurrentLM.leftBound,i=this.m_CurrentLM.rightBound;if(this.InsertEdgeIntoAEL(r),this.InsertScanbeam(r.ytop),this.InsertEdgeIntoAEL(i),this.IsEvenOddFillType(r)?(r.windDelta=1,i.windDelta=1):i.windDelta=-r.windDelta,this.SetWindingCount(r),i.windCnt=r.windCnt,i.windCnt2=r.windCnt2,i.dx==Qt.ClipperBase.horizontal?(this.AddEdgeToSEL(i),this.InsertScanbeam(i.nextInLML.ytop)):this.InsertScanbeam(i.ytop),this.IsContributing(r)&&this.AddLocalMinPoly(r,i,new Qt.IntPoint(r.xcurr,this.m_CurrentLM.Y)),i.outIdx>=0&&i.dx==Qt.ClipperBase.horizontal)for(var o=0;o<this.m_HorizJoins.length;o++){e=new Qt.IntPoint,n=new Qt.IntPoint;var a=this.m_HorizJoins[o];(function(){e={Value:e},n={Value:n};var t=this.GetOverlapSegment(new Qt.IntPoint(a.edge.xbot,a.edge.ybot),new Qt.IntPoint(a.edge.xtop,a.edge.ytop),new Qt.IntPoint(i.xbot,i.ybot),new Qt.IntPoint(i.xtop,i.ytop),e,n);return e=e.Value,n=n.Value,t}).call(this)&&this.AddJoin(a.edge,i,a.savedIdx,-1)}if(r.nextInAEL!=i){i.outIdx>=0&&i.prevInAEL.outIdx>=0&&this.SlopesEqual(i.prevInAEL,i,this.m_UseFullRange)&&this.AddJoin(i,i.prevInAEL,-1,-1);var s=r.nextInAEL;for(e=new Qt.IntPoint(r.xcurr,r.ycurr);s!=i;)null==s&&Qt.Error("InsertLocalMinimaIntoAEL: missing rightbound!"),this.IntersectEdges(i,s,e,Qt.Protects.ipNone),s=s.nextInAEL}this.PopLocalMinima()}},Qt.Clipper.prototype.InsertEdgeIntoAEL=function(t){if(t.prevInAEL=null,t.nextInAEL=null,null==this.m_ActiveEdges)this.m_ActiveEdges=t;else if(this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.nextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.prevInAEL=t,this.m_ActiveEdges=t;else{for(var e=this.m_ActiveEdges;null!=e.nextInAEL&&!this.E2InsertsBeforeE1(e.nextInAEL,t);)e=e.nextInAEL;t.nextInAEL=e.nextInAEL,null!=e.nextInAEL&&(e.nextInAEL.prevInAEL=t),t.prevInAEL=e,e.nextInAEL=t}},Qt.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.xcurr==t.xcurr?e.dx>t.dx:e.xcurr<t.xcurr},Qt.Clipper.prototype.IsEvenOddFillType=function(t){return t.polyType==Qt.PolyType.ptSubject?this.m_SubjFillType==Qt.PolyFillType.pftEvenOdd:this.m_ClipFillType==Qt.PolyFillType.pftEvenOdd},Qt.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.polyType==Qt.PolyType.ptSubject?this.m_ClipFillType==Qt.PolyFillType.pftEvenOdd:this.m_SubjFillType==Qt.PolyFillType.pftEvenOdd},Qt.Clipper.prototype.IsContributing=function(t){var e,n;switch(t.polyType==Qt.PolyType.ptSubject?(e=this.m_SubjFillType,n=this.m_ClipFillType):(e=this.m_ClipFillType,n=this.m_SubjFillType),e){case Qt.PolyFillType.pftEvenOdd:case Qt.PolyFillType.pftNonZero:if(1!=Qt.Math_Abs_Int32(t.windCnt))return!1;break;case Qt.PolyFillType.pftPositive:if(1!=t.windCnt)return!1;break;default:if(t.windCnt!=-1)return!1}switch(this.m_ClipType){case Qt.ClipType.ctIntersection:switch(n){case Qt.PolyFillType.pftEvenOdd:case Qt.PolyFillType.pftNonZero:return 0!=t.windCnt2;case Qt.PolyFillType.pftPositive:
return t.windCnt2>0;default:return t.windCnt2<0}break;case Qt.ClipType.ctUnion:switch(n){case Qt.PolyFillType.pftEvenOdd:case Qt.PolyFillType.pftNonZero:return 0==t.windCnt2;case Qt.PolyFillType.pftPositive:return t.windCnt2<=0;default:return t.windCnt2>=0}break;case Qt.ClipType.ctDifference:if(t.polyType==Qt.PolyType.ptSubject)switch(n){case Qt.PolyFillType.pftEvenOdd:case Qt.PolyFillType.pftNonZero:return 0==t.windCnt2;case Qt.PolyFillType.pftPositive:return t.windCnt2<=0;default:return t.windCnt2>=0}else switch(n){case Qt.PolyFillType.pftEvenOdd:case Qt.PolyFillType.pftNonZero:return 0!=t.windCnt2;case Qt.PolyFillType.pftPositive:return t.windCnt2>0;default:return t.windCnt2<0}}return!0},Qt.Clipper.prototype.SetWindingCount=function(t){for(var e=t.prevInAEL;null!=e&&e.polyType!=t.polyType;)e=e.prevInAEL;if(null==e?(t.windCnt=t.windDelta,t.windCnt2=0,e=this.m_ActiveEdges):this.IsEvenOddFillType(t)?(t.windCnt=1,t.windCnt2=e.windCnt2,e=e.nextInAEL):(e.windCnt*e.windDelta<0?Qt.Math_Abs_Int32(e.windCnt)>1?e.windDelta*t.windDelta<0?t.windCnt=e.windCnt:t.windCnt=e.windCnt+t.windDelta:t.windCnt=e.windCnt+e.windDelta+t.windDelta:Qt.Math_Abs_Int32(e.windCnt)>1&&e.windDelta*t.windDelta<0?t.windCnt=e.windCnt:e.windCnt+t.windDelta==0?t.windCnt=e.windCnt:t.windCnt=e.windCnt+t.windDelta,t.windCnt2=e.windCnt2,e=e.nextInAEL),this.IsEvenOddAltFillType(t))for(;e!=t;)t.windCnt2=0==t.windCnt2?1:0,e=e.nextInAEL;else for(;e!=t;)t.windCnt2+=e.windDelta,e=e.nextInAEL},Qt.Clipper.prototype.AddEdgeToSEL=function(t){null==this.m_SortedEdges?(this.m_SortedEdges=t,t.prevInSEL=null,t.nextInSEL=null):(t.nextInSEL=this.m_SortedEdges,t.prevInSEL=null,this.m_SortedEdges.prevInSEL=t,this.m_SortedEdges=t)},Qt.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;if(this.m_SortedEdges=t,null!=this.m_ActiveEdges)for(this.m_SortedEdges.prevInSEL=null,t=t.nextInAEL;null!=t;)t.prevInSEL=t.prevInAEL,t.prevInSEL.nextInSEL=t,t.nextInSEL=null,t=t.nextInAEL},Qt.Clipper.prototype.SwapPositionsInAEL=function(t,e){var n,r;null==t.nextInAEL&&null==t.prevInAEL||null==e.nextInAEL&&null==e.prevInAEL||(t.nextInAEL==e?(n=e.nextInAEL,null!=n&&(n.prevInAEL=t),r=t.prevInAEL,null!=r&&(r.nextInAEL=e),e.prevInAEL=r,e.nextInAEL=t,t.prevInAEL=e,t.nextInAEL=n):e.nextInAEL==t?(n=t.nextInAEL,null!=n&&(n.prevInAEL=e),r=e.prevInAEL,null!=r&&(r.nextInAEL=t),t.prevInAEL=r,t.nextInAEL=e,e.prevInAEL=t,e.nextInAEL=n):(n=t.nextInAEL,r=t.prevInAEL,t.nextInAEL=e.nextInAEL,null!=t.nextInAEL&&(t.nextInAEL.prevInAEL=t),t.prevInAEL=e.prevInAEL,null!=t.prevInAEL&&(t.prevInAEL.nextInAEL=t),e.nextInAEL=n,null!=e.nextInAEL&&(e.nextInAEL.prevInAEL=e),e.prevInAEL=r,null!=e.prevInAEL&&(e.prevInAEL.nextInAEL=e)),null==t.prevInAEL?this.m_ActiveEdges=t:null==e.prevInAEL&&(this.m_ActiveEdges=e))},Qt.Clipper.prototype.SwapPositionsInSEL=function(t,e){var n,r;null==t.nextInSEL&&null==t.prevInSEL||null==e.nextInSEL&&null==e.prevInSEL||(t.nextInSEL==e?(n=e.nextInSEL,null!=n&&(n.prevInSEL=t),r=t.prevInSEL,null!=r&&(r.nextInSEL=e),e.prevInSEL=r,e.nextInSEL=t,t.prevInSEL=e,t.nextInSEL=n):e.nextInSEL==t?(n=t.nextInSEL,null!=n&&(n.prevInSEL=e),r=e.prevInSEL,null!=r&&(r.nextInSEL=t),t.prevInSEL=r,t.nextInSEL=e,e.prevInSEL=t,e.nextInSEL=n):(n=t.nextInSEL,r=t.prevInSEL,t.nextInSEL=e.nextInSEL,null!=t.nextInSEL&&(t.nextInSEL.prevInSEL=t),t.prevInSEL=e.prevInSEL,null!=t.prevInSEL&&(t.prevInSEL.nextInSEL=t),e.nextInSEL=n,null!=e.nextInSEL&&(e.nextInSEL.prevInSEL=e),e.prevInSEL=r,null!=e.prevInSEL&&(e.prevInSEL.nextInSEL=e)),null==t.prevInSEL?this.m_SortedEdges=t:null==e.prevInSEL&&(this.m_SortedEdges=e))},Qt.Clipper.prototype.AddLocalMaxPoly=function(t,e,n){this.AddOutPt(t,n),t.outIdx==e.outIdx?(t.outIdx=-1,e.outIdx=-1):t.outIdx<e.outIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},Qt.Clipper.prototype.AddLocalMinPoly=function(t,e,n){var r,i;e.dx==Qt.ClipperBase.horizontal||t.dx>e.dx?(this.AddOutPt(t,n),e.outIdx=t.outIdx,t.side=Qt.EdgeSide.esLeft,e.side=Qt.EdgeSide.esRight,r=t,i=r.prevInAEL==e?e.prevInAEL:r.prevInAEL):(this.AddOutPt(e,n),t.outIdx=e.outIdx,t.side=Qt.EdgeSide.esRight,e.side=Qt.EdgeSide.esLeft,r=e,i=r.prevInAEL==t?t.prevInAEL:r.prevInAEL),null!=i&&i.outIdx>=0&&Qt.Clipper.TopX(i,n.Y)==Qt.Clipper.TopX(r,n.Y)&&this.SlopesEqual(r,i,this.m_UseFullRange)&&this.AddJoin(r,i,-1,-1)},Qt.Clipper.prototype.CreateOutRec=function(){var t=new Qt.OutRec;return t.idx=-1,t.isHole=!1,t.FirstLeft=null,t.AppendLink=null,t.pts=null,t.bottomPt=null,t},Qt.Clipper.prototype.AddOutPt=function(t,e){var n,r,i=t.side==Qt.EdgeSide.esLeft;if(t.outIdx<0)n=this.CreateOutRec(),this.m_PolyOuts.push(n),n.idx=this.m_PolyOuts.length-1,t.outIdx=n.idx,r=new Qt.OutPt,n.pts=r,n.bottomPt=r,r.pt=e,r.idx=n.idx,r.next=r,r.prev=r,this.SetHoleState(t,n);else{n=this.m_PolyOuts[t.outIdx],r=n.pts;var o;if(i&&Qt.ClipperBase.PointsEqual(e,r.pt)||!i&&Qt.ClipperBase.PointsEqual(e,r.prev.pt))return;o=new Qt.OutPt,o.pt=e,o.idx=n.idx,o.pt.Y==n.bottomPt.pt.Y&&o.pt.X<n.bottomPt.pt.X&&(n.bottomPt=o),o.next=r,o.prev=r.prev,o.prev.next=o,r.prev=o,i&&(n.pts=o)}},Qt.Clipper.prototype.SwapPoints=function(t,e){var n=t.Value;t.Value=e.Value,e.Value=n},Qt.Clipper.prototype.GetOverlapSegment=function(t,e,n,r,i,o){return Qt.Math_Abs_Int64(t.X-e.X)>Qt.Math_Abs_Int64(t.Y-e.Y)?(t.X>e.X&&function(){t={Value:t},e={Value:e};var n=this.SwapPoints(t,e);return t=t.Value,e=e.Value,n}.call(this),n.X>r.X&&function(){n={Value:n},r={Value:r};var t=this.SwapPoints(n,r);return n=n.Value,r=r.Value,t}.call(this),t.X>n.X?i.Value=t:i.Value=n,e.X<r.X?o.Value=e:o.Value=r,i.Value.X<o.Value.X):(t.Y<e.Y&&function(){t={Value:t},e={Value:e};var n=this.SwapPoints(t,e);return t=t.Value,e=e.Value,n}.call(this),n.Y<r.Y&&function(){n={Value:n},r={Value:r};var t=this.SwapPoints(n,r);return n=n.Value,r=r.Value,t}.call(this),t.Y<n.Y?i.Value=t:i.Value=n,e.Y>r.Y?o.Value=e:o.Value=r,i.Value.Y>o.Value.Y)},Qt.Clipper.prototype.FindSegment=function(t,e,n){if(null==t.Value)return!1;var r=t.Value,i=new Qt.IntPoint(e.Value),o=new Qt.IntPoint(n.Value);do{if(this.SlopesEqual(i,o,t.Value.pt,t.Value.prev.pt,!0)&&this.SlopesEqual(i,o,t.Value.pt,!0)&&this.GetOverlapSegment(i,o,t.Value.pt,t.Value.prev.pt,e,n))return!0;t.Value=t.Value.next}while(t.Value!=r);return!1},Qt.Clipper.prototype.Pt3IsBetweenPt1AndPt2=function(t,e,n){return!(!Qt.ClipperBase.PointsEqual(t,n)&&!Qt.ClipperBase.PointsEqual(e,n))||(t.X!=e.X?t.X<n.X==n.X<e.X:t.Y<n.Y==n.Y<e.Y)},Qt.Clipper.prototype.InsertPolyPtBetween=function(t,e,n){var r=new Qt.OutPt;return r.pt=n,e==t.next?(t.next=r,e.prev=r,r.next=e,r.prev=t):(e.next=r,t.prev=r,r.next=t,r.prev=e),r},Qt.Clipper.prototype.SetHoleState=function(t,e){for(var n=!1,r=t.prevInAEL;null!=r;)r.outIdx>=0&&(n=!n,null==e.FirstLeft&&(e.FirstLeft=this.m_PolyOuts[r.outIdx])),r=r.prevInAEL;n&&(e.isHole=!0)},Qt.Clipper.prototype.GetDx=function(t,e){return t.Y==e.Y?Qt.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},Qt.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var n=t.prev;Qt.ClipperBase.PointsEqual(n.pt,t.pt)&&n!=t;)n=n.prev;var r=Qt.Math_Abs_Double(this.GetDx(t.pt,n.pt));for(n=t.next;Qt.ClipperBase.PointsEqual(n.pt,t.pt)&&n!=t;)n=n.next;var i=Qt.Math_Abs_Double(this.GetDx(t.pt,n.pt));for(n=e.prev;Qt.ClipperBase.PointsEqual(n.pt,e.pt)&&n!=e;)n=n.prev;var o=Qt.Math_Abs_Double(this.GetDx(e.pt,n.pt));for(n=e.next;Qt.ClipperBase.PointsEqual(n.pt,e.pt)&&n!=e;)n=n.next;var a=Qt.Math_Abs_Double(this.GetDx(e.pt,n.pt));return r>=o&&r>=a||i>=o&&i>=a},Qt.Clipper.prototype.GetBottomPt=function(t){for(var e=null,n=t.next;n!=t;)n.pt.Y>t.pt.Y?(t=n,e=null):n.pt.Y==t.pt.Y&&n.pt.X<=t.pt.X&&(n.pt.X<t.pt.X?(e=null,t=n):n.next!=t&&n.prev!=t&&(e=n)),n=n.next;if(null!=e)for(;e!=n;)for(this.FirstIsBottomPt(n,e)||(t=e),e=e.next;!Qt.ClipperBase.PointsEqual(e.pt,t.pt);)e=e.next;return t},Qt.Clipper.prototype.GetLowermostRec=function(t,e){var n=t.bottomPt,r=e.bottomPt;return n.pt.Y>r.pt.Y?t:n.pt.Y<r.pt.Y?e:n.pt.X<r.pt.X?t:n.pt.X>r.pt.X?e:n.next==n?e:r.next==r?t:this.FirstIsBottomPt(n,r)?t:e},Qt.Clipper.prototype.Param1RightOfParam2=function(t,e){do if(t=t.FirstLeft,t==e)return!0;while(null!=t);return!1},Qt.Clipper.prototype.AppendPolygon=function(t,e){var n,r=this.m_PolyOuts[t.outIdx],i=this.m_PolyOuts[e.outIdx];n=this.Param1RightOfParam2(r,i)?i:this.Param1RightOfParam2(i,r)?r:this.GetLowermostRec(r,i);var o,a,s=r.pts,u=s.prev,l=i.pts,c=l.prev;t.side==Qt.EdgeSide.esLeft?(e.side==Qt.EdgeSide.esLeft?(this.ReversePolyPtLinks(l),l.next=s,s.prev=l,u.next=c,c.prev=u,r.pts=c):(c.next=s,s.prev=c,l.prev=u,u.next=l,r.pts=l),o=Qt.EdgeSide.esLeft):(e.side==Qt.EdgeSide.esRight?(this.ReversePolyPtLinks(l),u.next=c,c.prev=u,l.next=s,s.prev=l):(u.next=l,l.prev=u,s.prev=c,c.next=s),o=Qt.EdgeSide.esRight),n==i&&(r.bottomPt=i.bottomPt,r.bottomPt.idx=r.idx,i.FirstLeft!=r&&(r.FirstLeft=i.FirstLeft),r.isHole=i.isHole),i.pts=null,i.bottomPt=null,i.AppendLink=r;var h=t.outIdx,f=e.outIdx;t.outIdx=-1,e.outIdx=-1;for(var p=this.m_ActiveEdges;null!=p;){if(p.outIdx==f){p.outIdx=h,p.side=o;break}p=p.nextInAEL}for(a=0;a<this.m_Joins.length;++a)this.m_Joins[a].poly1Idx==f&&(this.m_Joins[a].poly1Idx=h),this.m_Joins[a].poly2Idx==f&&(this.m_Joins[a].poly2Idx=h);for(a=0;a<this.m_HorizJoins.length;++a)this.m_HorizJoins[a].savedIdx==f&&(this.m_HorizJoins[a].savedIdx=h)},Qt.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!=t){var e,n;e=t;do n=e.next,e.next=e.prev,e.prev=n,e=n;while(e!=t)}},Qt.Clipper.SwapSides=function(t,e){var n=t.side;t.side=e.side,e.side=n},Qt.Clipper.SwapPolyIndexes=function(t,e){var n=t.outIdx;t.outIdx=e.outIdx,e.outIdx=n},Qt.Clipper.prototype.DoEdge1=function(t,e,n){this.AddOutPt(t,n),Qt.Clipper.SwapSides(t,e),Qt.Clipper.SwapPolyIndexes(t,e)},Qt.Clipper.prototype.DoEdge2=function(t,e,n){this.AddOutPt(e,n),Qt.Clipper.SwapSides(t,e),Qt.Clipper.SwapPolyIndexes(t,e)},Qt.Clipper.prototype.DoBothEdges=function(t,e,n){this.AddOutPt(t,n),this.AddOutPt(e,n),Qt.Clipper.SwapSides(t,e),Qt.Clipper.SwapPolyIndexes(t,e)},Qt.Clipper.prototype.IntersectEdges=function(t,e,n,r){var i=0==(Qt.Protects.ipLeft&r)&&null==t.nextInLML&&t.xtop==n.X&&t.ytop==n.Y,o=0==(Qt.Protects.ipRight&r)&&null==e.nextInLML&&e.xtop==n.X&&e.ytop==n.Y,a=t.outIdx>=0,s=e.outIdx>=0;if(t.polyType==e.polyType)if(this.IsEvenOddFillType(t)){var u=t.windCnt;t.windCnt=e.windCnt,e.windCnt=u}else t.windCnt+e.windDelta==0?t.windCnt=-t.windCnt:t.windCnt+=e.windDelta,e.windCnt-t.windDelta==0?e.windCnt=-e.windCnt:e.windCnt-=t.windDelta;else this.IsEvenOddFillType(e)?t.windCnt2=0==t.windCnt2?1:0:t.windCnt2+=e.windDelta,this.IsEvenOddFillType(t)?e.windCnt2=0==e.windCnt2?1:0:e.windCnt2-=t.windDelta;var l,c,h,f;t.polyType==Qt.PolyType.ptSubject?(l=this.m_SubjFillType,h=this.m_ClipFillType):(l=this.m_ClipFillType,h=this.m_SubjFillType),e.polyType==Qt.PolyType.ptSubject?(c=this.m_SubjFillType,f=this.m_ClipFillType):(c=this.m_ClipFillType,f=this.m_SubjFillType);var p,d;switch(l){case Qt.PolyFillType.pftPositive:p=t.windCnt;break;case Qt.PolyFillType.pftNegative:p=-t.windCnt;break;default:p=Qt.Math_Abs_Int32(t.windCnt)}switch(c){case Qt.PolyFillType.pftPositive:d=e.windCnt;break;case Qt.PolyFillType.pftNegative:d=-e.windCnt;break;default:d=Qt.Math_Abs_Int32(e.windCnt)}if(a&&s)i||o||0!=p&&1!=p||0!=d&&1!=d||t.polyType!=e.polyType&&this.m_ClipType!=Qt.ClipType.ctXor?this.AddLocalMaxPoly(t,e,n):this.DoBothEdges(t,e,n);else if(a)0!=d&&1!=d||this.m_ClipType==Qt.ClipType.ctIntersection&&e.polyType!=Qt.PolyType.ptSubject&&0==e.windCnt2||this.DoEdge1(t,e,n);else if(s)0!=p&&1!=p||this.m_ClipType==Qt.ClipType.ctIntersection&&t.polyType!=Qt.PolyType.ptSubject&&0==t.windCnt2||this.DoEdge2(t,e,n);else if(!(0!=p&&1!=p||0!=d&&1!=d||i||o)){var m,v;switch(h){case Qt.PolyFillType.pftPositive:m=t.windCnt2;break;case Qt.PolyFillType.pftNegative:m=-t.windCnt2;break;default:m=Qt.Math_Abs_Int32(t.windCnt2)}switch(f){case Qt.PolyFillType.pftPositive:v=e.windCnt2;break;case Qt.PolyFillType.pftNegative:v=-e.windCnt2;break;default:v=Qt.Math_Abs_Int32(e.windCnt2)}if(t.polyType!=e.polyType)this.AddLocalMinPoly(t,e,n);else if(1==p&&1==d)switch(this.m_ClipType){case Qt.ClipType.ctIntersection:m>0&&v>0&&this.AddLocalMinPoly(t,e,n);break;case Qt.ClipType.ctUnion:m<=0&&v<=0&&this.AddLocalMinPoly(t,e,n);break;case Qt.ClipType.ctDifference:(t.polyType==Qt.PolyType.ptClip&&m>0&&v>0||t.polyType==Qt.PolyType.ptSubject&&m<=0&&v<=0)&&this.AddLocalMinPoly(t,e,n);break;case Qt.ClipType.ctXor:this.AddLocalMinPoly(t,e,n)}else Qt.Clipper.SwapSides(t,e)}i!=o&&(i&&t.outIdx>=0||o&&e.outIdx>=0)&&(Qt.Clipper.SwapSides(t,e),Qt.Clipper.SwapPolyIndexes(t,e)),i&&this.DeleteFromAEL(t),o&&this.DeleteFromAEL(e)},Qt.Clipper.prototype.DeleteFromAEL=function(t){var e=t.prevInAEL,n=t.nextInAEL;null==e&&null==n&&t!=this.m_ActiveEdges||(null!=e?e.nextInAEL=n:this.m_ActiveEdges=n,null!=n&&(n.prevInAEL=e),t.nextInAEL=null,t.prevInAEL=null)},Qt.Clipper.prototype.DeleteFromSEL=function(t){var e=t.prevInSEL,n=t.nextInSEL;null==e&&null==n&&t!=this.m_SortedEdges||(null!=e?e.nextInSEL=n:this.m_SortedEdges=n,null!=n&&(n.prevInSEL=e),t.nextInSEL=null,t.prevInSEL=null)},Qt.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null==t.Value.nextInLML&&Qt.Error("UpdateEdgeIntoAEL: invalid call");var e=t.Value.prevInAEL,n=t.Value.nextInAEL;t.Value.nextInLML.outIdx=t.Value.outIdx,null!=e?e.nextInAEL=t.Value.nextInLML:this.m_ActiveEdges=t.Value.nextInLML,null!=n&&(n.prevInAEL=t.Value.nextInLML),t.Value.nextInLML.side=t.Value.side,t.Value.nextInLML.windDelta=t.Value.windDelta,t.Value.nextInLML.windCnt=t.Value.windCnt,t.Value.nextInLML.windCnt2=t.Value.windCnt2,t.Value=t.Value.nextInLML,t.Value.prevInAEL=e,t.Value.nextInAEL=n,t.Value.dx!=Qt.ClipperBase.horizontal&&this.InsertScanbeam(t.Value.ytop)},Qt.Clipper.prototype.ProcessHorizontals=function(){for(var t=this.m_SortedEdges;null!=t;)this.DeleteFromSEL(t),this.ProcessHorizontal(t),t=this.m_SortedEdges},Qt.Clipper.prototype.ProcessHorizontal=function(t){var e,n,r;t.xcurr<t.xtop?(n=t.xcurr,r=t.xtop,e=Qt.Direction.dLeftToRight):(n=t.xtop,r=t.xcurr,e=Qt.Direction.dRightToLeft);var i;i=null!=t.nextInLML?null:this.GetMaximaPair(t);for(var o=this.GetNextInAEL(t,e);null!=o;){var a=this.GetNextInAEL(o,e);if(null!=i||e==Qt.Direction.dLeftToRight&&o.xcurr<=r||e==Qt.Direction.dRightToLeft&&o.xcurr>=n){if(o.xcurr==t.xtop&&null==i){if(this.SlopesEqual(o,t.nextInLML,this.m_UseFullRange)){t.outIdx>=0&&o.outIdx>=0&&this.AddJoin(t.nextInLML,o,t.outIdx,-1);break}if(o.dx<t.nextInLML.dx)break}if(o==i)return e==Qt.Direction.dLeftToRight?this.IntersectEdges(t,o,new Qt.IntPoint(o.xcurr,t.ycurr),0):this.IntersectEdges(o,t,new Qt.IntPoint(o.xcurr,t.ycurr),0),void(i.outIdx>=0&&Qt.Error("ProcessHorizontal error"));o.dx!=Qt.ClipperBase.horizontal||this.IsMinima(o)||o.xcurr>o.xtop?e==Qt.Direction.dLeftToRight?this.IntersectEdges(t,o,new Qt.IntPoint(o.xcurr,t.ycurr),this.IsTopHorz(t,o.xcurr)?Qt.Protects.ipLeft:Qt.Protects.ipBoth):this.IntersectEdges(o,t,new Qt.IntPoint(o.xcurr,t.ycurr),this.IsTopHorz(t,o.xcurr)?Qt.Protects.ipRight:Qt.Protects.ipBoth):e==Qt.Direction.dLeftToRight?this.IntersectEdges(t,o,new Qt.IntPoint(o.xcurr,t.ycurr),this.IsTopHorz(t,o.xcurr)?Qt.Protects.ipLeft:Qt.Protects.ipBoth):this.IntersectEdges(o,t,new Qt.IntPoint(o.xcurr,t.ycurr),this.IsTopHorz(t,o.xcurr)?Qt.Protects.ipRight:Qt.Protects.ipBoth),this.SwapPositionsInAEL(t,o)}else if(e==Qt.Direction.dLeftToRight&&o.xcurr>r&&null==t.nextInSEL||e==Qt.Direction.dRightToLeft&&o.xcurr<n&&null==t.nextInSEL)break;o=a}null!=t.nextInLML?(t.outIdx>=0&&this.AddOutPt(t,new Qt.IntPoint(t.xtop,t.ytop)),function(){t={Value:t};var e=this.UpdateEdgeIntoAEL(t);return t=t.Value,e}.call(this)):(t.outIdx>=0&&this.IntersectEdges(t,i,new Qt.IntPoint(t.xtop,t.ycurr),Qt.Protects.ipBoth),this.DeleteFromAEL(i),this.DeleteFromAEL(t))},Qt.Clipper.prototype.IsTopHorz=function(t,e){for(var n=this.m_SortedEdges;null!=n;){if(e>=Math.min(n.xcurr,n.xtop)&&e<=Math.max(n.xcurr,n.xtop))return!1;n=n.nextInSEL}return!0},Qt.Clipper.prototype.GetNextInAEL=function(t,e){return e==Qt.Direction.dLeftToRight?t.nextInAEL:t.prevInAEL},Qt.Clipper.prototype.IsMinima=function(t){return null!=t&&t.prev.nextInLML!=t&&t.next.nextInLML!=t},Qt.Clipper.prototype.IsMaxima=function(t,e){return null!=t&&t.ytop==e&&null==t.nextInLML},Qt.Clipper.prototype.IsIntermediate=function(t,e){return t.ytop==e&&null!=t.nextInLML},Qt.Clipper.prototype.GetMaximaPair=function(t){return this.IsMaxima(t.next,t.ytop)&&t.next.xtop==t.xtop?t.next:t.prev},Qt.Clipper.prototype.ProcessIntersections=function(t,e){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t,e),null==this.m_IntersectNodes)return!0;if(!this.FixupIntersections())return!1;this.ProcessIntersectList()}catch(n){this.m_SortedEdges=null,this.DisposeIntersectNodes(),Qt.Error("ProcessIntersections error")}return!0},Qt.Clipper.prototype.BuildIntersectList=function(t,e){if(null!=this.m_ActiveEdges){var n=this.m_ActiveEdges;for(n.tmpX=Qt.Clipper.TopX(n,e),this.m_SortedEdges=n,this.m_SortedEdges.prevInSEL=null,n=n.nextInAEL;null!=n;)n.prevInSEL=n.prevInAEL,n.prevInSEL.nextInSEL=n,n.nextInSEL=null,n.tmpX=Qt.Clipper.TopX(n,e),n=n.nextInAEL;for(var r=!0;r&&null!=this.m_SortedEdges;){for(r=!1,n=this.m_SortedEdges;null!=n.nextInSEL;){var i=n.nextInSEL,o=new Qt.IntPoint;n.tmpX>i.tmpX&&function(){o={Value:o};var t=this.IntersectPoint(n,i,o);return o=o.Value,t}.call(this)?(o.Y>t&&(o.Y=t,o.X=Qt.Clipper.TopX(n,o.Y)),this.AddIntersectNode(n,i,o),this.SwapPositionsInSEL(n,i),r=!0):n=i}if(null==n.prevInSEL)break;n.prevInSEL.nextInSEL=null}this.m_SortedEdges=null}},Qt.Clipper.prototype.FixupIntersections=function(){if(null==this.m_IntersectNodes.next)return!0;this.CopyAELToSEL();for(var t=this.m_IntersectNodes,e=this.m_IntersectNodes.next;null!=e;){var n,r=t.edge1;if(r.prevInSEL==t.edge2)n=r.prevInSEL;else if(r.nextInSEL==t.edge2)n=r.nextInSEL;else{for(;null!=e&&e.edge1.nextInSEL!=e.edge2&&e.edge1.prevInSEL!=e.edge2;)e=e.next;if(null==e)return!1;this.SwapIntersectNodes(t,e),r=t.edge1,n=t.edge2}this.SwapPositionsInSEL(r,n),t=t.next,e=t.next}return this.m_SortedEdges=null,t.edge1.prevInSEL==t.edge2||t.edge1.nextInSEL==t.edge2},Qt.Clipper.prototype.ProcessIntersectList=function(){for(;null!=this.m_IntersectNodes;){var t=this.m_IntersectNodes.next;this.IntersectEdges(this.m_IntersectNodes.edge1,this.m_IntersectNodes.edge2,this.m_IntersectNodes.pt,Qt.Protects.ipBoth),this.SwapPositionsInAEL(this.m_IntersectNodes.edge1,this.m_IntersectNodes.edge2),this.m_IntersectNodes=null,this.m_IntersectNodes=t}};var se=function(t){return t<0?Math.ceil(t-.5):Math.floor(t+.5)};Qt.Clipper.Round=se,Qt.Clipper.TopX=function(t,e){return e==t.ytop?t.xtop:t.xbot+Qt.Clipper.Round(t.dx*(e-t.ybot))},Qt.Clipper.prototype.AddIntersectNode=function(t,e,n){var r=new Qt.IntersectNode;if(r.edge1=t,r.edge2=e,r.pt=n,r.next=null,null==this.m_IntersectNodes)this.m_IntersectNodes=r;else if(this.ProcessParam1BeforeParam2(r,this.m_IntersectNodes))r.next=this.m_IntersectNodes,this.m_IntersectNodes=r;else{for(var i=this.m_IntersectNodes;null!=i.next&&this.ProcessParam1BeforeParam2(i.next,r);)i=i.next;r.next=i.next,i.next=r}},Qt.Clipper.prototype.ProcessParam1BeforeParam2=function(t,e){var n;return t.pt.Y==e.pt.Y?t.edge1==e.edge1||t.edge2==e.edge1?(n=e.pt.X>t.pt.X,e.edge1.dx>0?!n:n):t.edge1==e.edge2||t.edge2==e.edge2?(n=e.pt.X>t.pt.X,e.edge2.dx>0?!n:n):e.pt.X>t.pt.X:t.pt.Y>e.pt.Y},Qt.Clipper.prototype.SwapIntersectNodes=function(t,e){var n=t.edge1,r=t.edge2,i=t.pt;t.edge1=e.edge1,t.edge2=e.edge2,t.pt=e.pt,e.edge1=n,e.edge2=r,e.pt=i},Qt.Clipper.prototype.IntersectPoint=function(t,e,n){var r,i;if(this.SlopesEqual(t,e,this.m_UseFullRange))return!1;if(0==t.dx)n.Value.X=t.xbot,e.dx==Qt.ClipperBase.horizontal?n.Value.Y=e.ybot:(i=e.ybot-e.xbot/e.dx,n.Value.Y=Qt.Clipper.Round(n.Value.X/e.dx+i));else if(0==e.dx)n.Value.X=e.xbot,t.dx==Qt.ClipperBase.horizontal?n.Value.Y=t.ybot:(r=t.ybot-t.xbot/t.dx,n.Value.Y=Qt.Clipper.Round(n.Value.X/t.dx+r));else{r=t.xbot-t.ybot*t.dx,i=e.xbot-e.ybot*e.dx;var o=(i-r)/(t.dx-e.dx);n.Value.Y=Qt.Clipper.Round(o),Qt.Math_Abs_Double(t.dx)<Qt.Math_Abs_Double(e.dx)?n.Value.X=Qt.Clipper.Round(t.dx*o+r):n.Value.X=Qt.Clipper.Round(e.dx*o+i)}return!(n.Value.Y<t.ytop||n.Value.Y<e.ytop)||(t.ytop>e.ytop?(n.Value.X=t.xtop,n.Value.Y=t.ytop,Qt.Clipper.TopX(e,t.ytop)<t.xtop):(n.Value.X=e.xtop,n.Value.Y=e.ytop,Qt.Clipper.TopX(t,e.ytop)>e.xtop))},Qt.Clipper.prototype.DisposeIntersectNodes=function(){for(;null!=this.m_IntersectNodes;){var t=this.m_IntersectNodes.next;this.m_IntersectNodes=null,this.m_IntersectNodes=t}},Qt.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e,n=this.m_ActiveEdges;null!=n;)if(this.IsMaxima(n,t)&&this.GetMaximaPair(n).dx!=Qt.ClipperBase.horizontal)e=n.prevInAEL,this.DoMaxima(n,t),n=null==e?this.m_ActiveEdges:e.nextInAEL;else{if(this.IsIntermediate(n,t)&&n.nextInLML.dx==Qt.ClipperBase.horizontal){if(n.outIdx>=0){this.AddOutPt(n,new Qt.IntPoint(n.xtop,n.ytop));for(var r=0;r<this.m_HorizJoins.length;++r){var i=new Qt.IntPoint,o=new Qt.IntPoint,a=this.m_HorizJoins[r];(function(){i={Value:i},o={Value:o};var t=this.GetOverlapSegment(new Qt.IntPoint(a.edge.xbot,a.edge.ybot),new Qt.IntPoint(a.edge.xtop,a.edge.ytop),new Qt.IntPoint(n.nextInLML.xbot,n.nextInLML.ybot),new Qt.IntPoint(n.nextInLML.xtop,n.nextInLML.ytop),i,o);return i=i.Value,o=o.Value,t}).call(this)&&this.AddJoin(a.edge,n.nextInLML,a.savedIdx,n.outIdx)}this.AddHorzJoin(n.nextInLML,n.outIdx)}(function(){n={Value:n};var t=this.UpdateEdgeIntoAEL(n);return n=n.Value,t}).call(this),this.AddEdgeToSEL(n)}else n.xcurr=Qt.Clipper.TopX(n,t),n.ycurr=t;n=n.nextInAEL}for(this.ProcessHorizontals(),n=this.m_ActiveEdges;null!=n;){if(this.IsIntermediate(n,t)){n.outIdx>=0&&this.AddOutPt(n,new Qt.IntPoint(n.xtop,n.ytop)),function(){n={Value:n};var t=this.UpdateEdgeIntoAEL(n);return n=n.Value,t}.call(this),e=n.prevInAEL;var s=n.nextInAEL;null!=e&&e.xcurr==n.xbot&&e.ycurr==n.ybot&&n.outIdx>=0&&e.outIdx>=0&&e.ycurr>e.ytop&&this.SlopesEqual(n,e,this.m_UseFullRange)?(this.AddOutPt(e,new Qt.IntPoint(n.xbot,n.ybot)),this.AddJoin(n,e,-1,-1)):null!=s&&s.xcurr==n.xbot&&s.ycurr==n.ybot&&n.outIdx>=0&&s.outIdx>=0&&s.ycurr>s.ytop&&this.SlopesEqual(n,s,this.m_UseFullRange)&&(this.AddOutPt(s,new Qt.IntPoint(n.xbot,n.ybot)),this.AddJoin(n,s,-1,-1))}n=n.nextInAEL}},Qt.Clipper.prototype.DoMaxima=function(t,e){for(var n=this.GetMaximaPair(t),r=t.xtop,i=t.nextInAEL;i!=n;)null==i&&Qt.Error("DoMaxima error"),this.IntersectEdges(t,i,new Qt.IntPoint(r,e),Qt.Protects.ipBoth),i=i.nextInAEL;t.outIdx<0&&n.outIdx<0?(this.DeleteFromAEL(t),this.DeleteFromAEL(n)):t.outIdx>=0&&n.outIdx>=0?this.IntersectEdges(t,n,new Qt.IntPoint(r,e),Qt.Protects.ipNone):Qt.Error("DoMaxima error")},Qt.Clipper.ReversePolygons=function(t){for(var e=t.length,n=0;n<e;n++)t[n]instanceof Array&&t[n].reverse()},Qt.Clipper.Orientation=function(t){return this.Area(t)>=0},Qt.Clipper.prototype.PointCount=function(t){if(null==t)return 0;var e=0,n=t;do e++,n=n.next;while(n!=t);return e},Qt.Clipper.prototype.BuildResult=function(t){Qt.Clear(t);for(var e,n=this.m_PolyOuts.length,r=0;r<n;r++)if(e=this.m_PolyOuts[r],null!=e.pts){var i=e.pts,o=this.PointCount(i);if(!(o<3)){for(var a=new Qt.Polygon(o),s=0;s<o;s++)a.push(i.pt),i=i.prev;t.push(a)}}},Qt.Clipper.prototype.BuildResultEx=function(t){Qt.Clear(t);for(var e=0;e<this.m_PolyOuts.length;){var n=this.m_PolyOuts[e++];if(null==n.pts)break;var r=n.pts,i=this.PointCount(r);if(!(i<3)){var o=new Qt.ExPolygon;o.outer=new Qt.Polygon,o.holes=new Qt.Polygons;for(var a=0;a<i;a++)o.outer.push(r.pt),r=r.prev;for(;e<this.m_PolyOuts.length&&(n=this.m_PolyOuts[e],null!=n.pts&&n.isHole);){var s=new Qt.Polygon;r=n.pts;do s.push(r.pt),r=r.prev;while(r!=n.pts);o.holes.push(s),e++}t.push(o)}}},Qt.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.pts=t.bottomPt;for(var n=t.bottomPt;;){if(n.prev==n||n.prev==n.next)return this.DisposeOutPts(n),t.pts=null,void(t.bottomPt=null);if(Qt.ClipperBase.PointsEqual(n.pt,n.next.pt)||this.SlopesEqual(n.prev.pt,n.pt,n.next.pt,this.m_UseFullRange)){e=null;var r=n;n==t.bottomPt&&(t.bottomPt=null),n.prev.next=n.next,n.next.prev=n.prev,n=n.prev,r=null}else{if(n==e)break;null==e&&(e=n),n=n.next}}null==t.bottomPt&&(t.bottomPt=this.GetBottomPt(n),t.bottomPt.idx=t.idx,t.pts=t.bottomPt)},Qt.Clipper.prototype.JoinPoints=function(t,e,n){e.Value=null,n.Value=null;var r=this.m_PolyOuts[t.poly1Idx],i=this.m_PolyOuts[t.poly2Idx];if(null==r||null==i)return!1;var o=r.pts,a=i.pts,s=t.pt2a,u=t.pt2b,l=t.pt1a,c=t.pt1b;if(!function(){o={Value:o},s={Value:s},u={Value:u};var t=this.FindSegment(o,s,u);return o=o.Value,s=s.Value,u=u.Value,t}.call(this))return!1;if(r==i){if(a=o.next,!function(){a={Value:a},l={Value:l},c={Value:c};var t=this.FindSegment(a,l,c);return a=a.Value,l=l.Value,c=c.Value,t}.call(this)||a==o)return!1}else if(!function(){a={Value:a},l={Value:l},c={Value:c};var t=this.FindSegment(a,l,c);return a=a.Value,l=l.Value,c=c.Value,t}.call(this))return!1;if(!function(){s={Value:s},u={Value:u};var t=this.GetOverlapSegment(s.Value,u.Value,l,c,s,u);return s=s.Value,u=u.Value,t}.call(this))return!1;var h,f,p=o.prev;return Qt.ClipperBase.PointsEqual(o.pt,s)?e.Value=o:Qt.ClipperBase.PointsEqual(p.pt,s)?e.Value=p:e.Value=this.InsertPolyPtBetween(o,p,s),Qt.ClipperBase.PointsEqual(o.pt,u)?n.Value=o:Qt.ClipperBase.PointsEqual(p.pt,u)?n.Value=p:e.Value==o||e.Value==p?n.Value=this.InsertPolyPtBetween(o,p,u):this.Pt3IsBetweenPt1AndPt2(o.pt,e.Value.pt,u)?n.Value=this.InsertPolyPtBetween(o,e.Value,u):n.Value=this.InsertPolyPtBetween(e.Value,p,u),p=a.prev,h=Qt.ClipperBase.PointsEqual(a.pt,s)?a:Qt.ClipperBase.PointsEqual(p.pt,s)?p:this.InsertPolyPtBetween(a,p,s),f=Qt.ClipperBase.PointsEqual(a.pt,u)?a:Qt.ClipperBase.PointsEqual(p.pt,u)?p:h==a||h==p?this.InsertPolyPtBetween(a,p,u):this.Pt3IsBetweenPt1AndPt2(a.pt,h.pt,u)?this.InsertPolyPtBetween(a,h,u):this.InsertPolyPtBetween(h,p,u),e.Value.next==n.Value&&h.prev==f?(e.Value.next=h,h.prev=e.Value,n.Value.prev=f,f.next=n.Value,!0):e.Value.prev==n.Value&&h.next==f&&(e.Value.prev=h,h.next=e.Value,n.Value.next=f,f.prev=n.Value,!0)},Qt.Clipper.prototype.FixupJoinRecs=function(t,e,n){for(var r=n;r<this.m_Joins.length;r++){var i=this.m_Joins[r];i.poly1Idx==t.poly1Idx&&this.PointIsVertex(i.pt1a,e)&&(i.poly1Idx=t.poly2Idx),i.poly2Idx==t.poly1Idx&&this.PointIsVertex(i.pt2a,e)&&(i.poly2Idx=t.poly2Idx)}},Qt.Clipper.prototype.JoinCommonEdges=function(){for(var t,e,n=0;n<this.m_Joins.length;n++){var r,i,o=this.m_Joins[n];if(function(){r={Value:r},i={Value:i};var t=this.JoinPoints(o,r,i);return r=r.Value,i=i.Value,t}.call(this)){var a=this.m_PolyOuts[o.poly1Idx],s=this.m_PolyOuts[o.poly2Idx];if(a==s){if(a.pts=this.GetBottomPt(r),a.bottomPt=a.pts,a.bottomPt.idx=a.idx,s=this.CreateOutRec(),this.m_PolyOuts.push(s),s.idx=this.m_PolyOuts.length-1,o.poly2Idx=s.idx,s.pts=this.GetBottomPt(i),s.bottomPt=s.pts,s.bottomPt.idx=s.idx,this.PointInPolygon(s.pts.pt,a.pts,this.m_UseFullRange))s.isHole=!a.isHole,s.FirstLeft=a,this.FixupJoinRecs(o,i,n+1),this.FixupOutPolygon(a),this.FixupOutPolygon(s),(s.isHole^this.m_ReverseOutput)==this.Area(s,this.m_UseFullRange)>0&&this.ReversePolyPtLinks(s.pts);else if(this.PointInPolygon(a.pts.pt,s.pts,this.m_UseFullRange)){if(s.isHole=a.isHole,a.isHole=!s.isHole,s.FirstLeft=a.FirstLeft,a.FirstLeft=s,this.FixupJoinRecs(o,i,n+1),this.FixupOutPolygon(a),this.FixupOutPolygon(s),(a.isHole^this.m_ReverseOutput)==this.Area(a,this.m_UseFullRange)>0&&this.ReversePolyPtLinks(a.pts),this.m_UsingExPolygons&&a.isHole)for(t=0;t<this.m_PolyOuts.length;++t)e=this.m_PolyOuts[t],e.isHole&&null!=e.bottomPt&&e.FirstLeft==a&&(e.FirstLeft=s)}else if(s.isHole=a.isHole,s.FirstLeft=a.FirstLeft,this.FixupJoinRecs(o,i,n+1),this.FixupOutPolygon(a),this.FixupOutPolygon(s),this.m_UsingExPolygons&&null!=s.pts)for(t=0;t<this.m_PolyOuts.length;++t)e=this.m_PolyOuts[t],e.isHole&&null!=e.bottomPt&&e.FirstLeft==a&&this.PointInPolygon(e.bottomPt.pt,s.pts,this.m_UseFullRange)&&(e.FirstLeft=s)}else{if(this.m_UsingExPolygons)for(t=0;t<this.m_PolyOuts.length;++t)this.m_PolyOuts[t].isHole&&null!=this.m_PolyOuts[t].bottomPt&&this.m_PolyOuts[t].FirstLeft==s&&(this.m_PolyOuts[t].FirstLeft=a);this.FixupOutPolygon(a),null!=a.pts&&(a.isHole=this.Area(a,this.m_UseFullRange)<0,a.isHole&&null==a.FirstLeft&&(a.FirstLeft=s.FirstLeft));var u=a.idx,l=s.idx;for(s.pts=null,s.bottomPt=null,s.AppendLink=a,t=n+1;t<this.m_Joins.length;t++){var c=this.m_Joins[t];c.poly1Idx==l&&(c.poly1Idx=u),c.poly2Idx==l&&(c.poly2Idx=u)}}}}},Qt.Clipper.FullRangeNeeded=function(t){for(var e=!1,n=0;n<t.length;n++)Qt.Math_Abs_Int64(t[n].X)>Qt.ClipperBase.hiRange||Qt.Math_Abs_Int64(t[n].Y)>Qt.ClipperBase.hiRange?Qt.Error("Coordinate exceeds range bounds in FullRangeNeeded()."):(Qt.Math_Abs_Int64(t[n].X)>Qt.ClipperBase.loRange||Qt.Math_Abs_Int64(t[n].Y)>Qt.ClipperBase.loRange)&&(e=!0);return e},Qt.Clipper.prototype.Area=Qt.Clipper.Area=function(){var t,e,r=arguments;if(1==r.length){var i=r[0],o=i.length-1;if(o<2)return 0;if(Qt.Clipper.FullRangeNeeded(i)){for(e=new n(i[o].X+i[0].X).multiply(new n(i[0].Y-i[o].Y)),t=1;t<=o;++t)e=e.add(new n(i[t-1].X+i[t].X).multiply(new n(i[t].Y-i[t-1].Y)));return parseFloat(e.toString())/2}var a=(i[o].X+i[0].X)*(i[0].Y-i[o].Y);for(t=1;t<=o;++t)a+=(i[t-1].X+i[t].X)*(i[t].Y-i[t-1].Y);return a/2}if(2==r.length){var s=r[0],u=r[1],l=s.pts;if(null==l)return 0;if(u){e=new n(n.ZERO);do e=e.add(new n(l.pt.X+l.prev.pt.X).multiply(new n(l.prev.pt.Y-l.pt.Y))),l=l.next;while(l!=s.pts);return parseFloat(e.toString())/2}e=0;do e+=(l.pt.X+l.prev.pt.X)*(l.prev.pt.Y-l.pt.Y),l=l.next;while(l!=s.pts);return e/2}},Qt.Clipper.BuildArc=function(t,e,n,r){var i=Math.sqrt(Qt.Math_Abs_Double(r))*Qt.Math_Abs_Double(n-e);i/=4,i<6&&(i=6),i>64&&(i=Qt.MaxSteps);for(var o=Qt.Cast_Int32(i),a=new Qt.Polygon,s=(n-e)/(o-1),u=e,l=0;l<o;++l)a.push(new Qt.IntPoint(t.X+Qt.Clipper.Round(Math.cos(u)*r),t.Y+Qt.Clipper.Round(Math.sin(u)*r))),u+=s;return a},Qt.Clipper.GetUnitNormal=function(t,e){var n=e.X-t.X,r=e.Y-t.Y;if(0==n&&0==r)return new Qt.Clipper.DoublePoint(0,0);var i=1/Math.sqrt(n*n+r*r);return n*=i,r*=i,new Qt.Clipper.DoublePoint(r,(-n))},Qt.Clipper.prototype.OffsetPolygons=function(t,e,n,r,i){var o=arguments;4==o.length?i=!0:3==o.length?(r=2,i=!0):2==o.length&&(n=Qt.JoinType.jtSquare,r=2,i=!0),isNaN(e)?Qt.Error("Delta is not a number"):isNaN(r)&&Qt.Error("MiterLimit is not a number");var a={};return new Qt.Clipper.PolyOffsetBuilder(t,a,e,n,r,i),a=a.Value?a.Value:[[]]},Qt.Clipper.prototype.SimplifyPolygon=function(t,e){var n=new Qt.Polygons,r=new Qt.Clipper;return r.AddPolygon(t,Qt.PolyType.ptSubject)&&r.Execute(Qt.ClipType.ctUnion,n,e,e),n},Qt.Clipper.prototype.SimplifyPolygons=function(t,e){var n=new Qt.Polygons,r=new Qt.Clipper;return r.AddPolygons(t,Qt.PolyType.ptSubject)&&r.Execute(Qt.ClipType.ctUnion,n,e,e),n};var ue,le=Qt.Clipper,ce=Qt.ClipperBase;if("undefined"==typeof Object.getOwnPropertyNames){for(ue in ce.prototype)"undefined"!=typeof le.prototype[ue]&&le.prototype[ue]!=Object.prototype[ue]||(le.prototype[ue]=ce.prototype[ue]);for(ue in ce)"undefined"==typeof le[ue]&&(le[ue]=ce[ue]);le.$baseCtor=ce}else{for(var he=Object.getOwnPropertyNames(ce.prototype),fe=0;fe<he.length;fe++)"undefined"==typeof Object.getOwnPropertyDescriptor(le.prototype,he[fe])&&Object.defineProperty(le.prototype,he[fe],Object.getOwnPropertyDescriptor(ce.prototype,he[fe]));for(ue in ce)"undefined"==typeof le[ue]&&(le[ue]=ce[ue]);le.$baseCtor=ce}Qt.Clipper.DoublePoint=function(t,e){this.X=t,this.Y=e},Qt.Clipper.PolyOffsetBuilder=function(t,e,n,r,i,o){if(this.pts=null,this.currentPoly=null,this.normals=null,this.delta=0,this.m_R=0,this.m_i=0,this.m_j=0,this.m_k=0,this.botPt=null,0==n)return void(e.Value=t);this.pts=t,this.delta=n;var a,s;if(o){for(var u=this.pts.length,l=0;l<u&&0==this.pts[l].length;)l++;if(l==u)return;for(this.botPt=this.pts[l][0],a=l;a<u;++a)for(this.UpdateBotPt(this.pts[a][0])&&(l=a),s=this.pts[a].length-1;s>0;s--)Qt.ClipperBase.PointsEqual(this.pts[a][s],this.pts[a][s-1])?this.pts[a].splice(s,1):this.UpdateBotPt(this.pts[a][s])&&(l=a);Qt.Clipper.Orientation(this.pts[l])||Qt.Clipper.ReversePolygons(this.pts)}i<=1&&(i=1);var c=2/(i*i);this.normals=[];e.Value=new Qt.Polygons,Qt.Clear(e.Value);var h;
for(this.m_i=0;this.m_i<this.pts.length;this.m_i++)if(h=this.pts[this.m_i].length,h>1&&this.pts[this.m_i][0].X==this.pts[this.m_i][h-1].X&&this.pts[this.m_i][0].Y==this.pts[this.m_i][h-1].Y&&h--,!(0==h||h<3&&n<=0))if(1!=h){for(Qt.Clear(this.normals),s=0;s<h-1;++s)this.normals.push(Qt.Clipper.GetUnitNormal(this.pts[this.m_i][s],this.pts[this.m_i][s+1]));for(this.normals.push(Qt.Clipper.GetUnitNormal(this.pts[this.m_i][h-1],this.pts[this.m_i][0])),this.currentPoly=new Qt.Polygon,this.m_k=h-1,this.m_j=0;this.m_j<h;++this.m_j){switch(r){case Qt.JoinType.jtMiter:this.m_R=1+(this.normals[this.m_j].X*this.normals[this.m_k].X+this.normals[this.m_j].Y*this.normals[this.m_k].Y),this.m_R>=c?this.DoMiter():this.DoSquare(i);break;case Qt.JoinType.jtRound:this.DoRound();break;case Qt.JoinType.jtSquare:this.DoSquare(1)}this.m_k=this.m_j}e.Value.push(this.currentPoly)}else{var f;f=Qt.Clipper.BuildArc(this.pts[this.m_i][h-1],0,Qt.PI2,n),e.Value.push(f)}var p=new Qt.Clipper;if(p.AddPolygons(e.Value,Qt.PolyType.ptSubject),n>0)p.Execute(Qt.ClipType.ctUnion,e.Value,Qt.PolyFillType.pftPositive,Qt.PolyFillType.pftPositive);else{var d=p.GetBounds(),m=new Qt.Polygon;if(m.push(new Qt.IntPoint(d.left-10,d.bottom+10)),m.push(new Qt.IntPoint(d.right+10,d.bottom+10)),m.push(new Qt.IntPoint(d.right+10,d.top-10)),m.push(new Qt.IntPoint(d.left-10,d.top-10)),p.AddPolygon(m,Qt.PolyType.ptSubject),p.Execute(Qt.ClipType.ctUnion,e.Value,Qt.PolyFillType.pftNegative,Qt.PolyFillType.pftNegative),e.Value.length>0)for(e.Value.splice(0,1),a=0;a<e.Value.length;a++)e.Value[a].reverse()}},Qt.Clipper.PolyOffsetBuilder.prototype.UpdateBotPt=function(t){return(t.Y>this.botPt.Y||t.Y==this.botPt.Y&&t.X<this.botPt.X)&&(this.botPt=t,!0)},Qt.Clipper.PolyOffsetBuilder.prototype.AddPoint=function(t){this.currentPoly.push(t)},Qt.Clipper.PolyOffsetBuilder.prototype.DoSquare=function(t){var e=new Qt.IntPoint(Qt.Cast_Int64(Qt.Clipper.Round(this.pts[this.m_i][this.m_j].X+this.normals[this.m_k].X*this.delta)),Qt.Cast_Int64(Qt.Clipper.Round(this.pts[this.m_i][this.m_j].Y+this.normals[this.m_k].Y*this.delta))),n=new Qt.IntPoint(Qt.Cast_Int64(Qt.Clipper.Round(this.pts[this.m_i][this.m_j].X+this.normals[this.m_j].X*this.delta)),Qt.Cast_Int64(Qt.Clipper.Round(this.pts[this.m_i][this.m_j].Y+this.normals[this.m_j].Y*this.delta)));if((this.normals[this.m_k].X*this.normals[this.m_j].Y-this.normals[this.m_j].X*this.normals[this.m_k].Y)*this.delta>=0){var r=Math.atan2(this.normals[this.m_k].Y,this.normals[this.m_k].X),i=Math.atan2(-this.normals[this.m_j].Y,-this.normals[this.m_j].X);r=Math.abs(i-r),r>Qt.PI&&(r=Qt.PI2-r);var o=Math.tan((Qt.PI-r)/4)*Math.abs(this.delta*t);e=new Qt.IntPoint(Qt.Cast_Int64(e.X-this.normals[this.m_k].Y*o),Qt.Cast_Int64(e.Y+this.normals[this.m_k].X*o)),this.AddPoint(e),n=new Qt.IntPoint(Qt.Cast_Int64(n.X+this.normals[this.m_j].Y*o),Qt.Cast_Int64(n.Y-this.normals[this.m_j].X*o)),this.AddPoint(n)}else this.AddPoint(e),this.AddPoint(this.pts[this.m_i][this.m_j]),this.AddPoint(n)},Qt.Clipper.PolyOffsetBuilder.prototype.DoMiter=function(){if((this.normals[this.m_k].X*this.normals[this.m_j].Y-this.normals[this.m_j].X*this.normals[this.m_k].Y)*this.delta>=0){var t=this.delta/this.m_R;this.AddPoint(new Qt.IntPoint(Qt.Cast_Int64(Qt.Clipper.Round(this.pts[this.m_i][this.m_j].X+(this.normals[this.m_k].X+this.normals[this.m_j].X)*t)),Qt.Cast_Int64(Qt.Clipper.Round(this.pts[this.m_i][this.m_j].Y+(this.normals[this.m_k].Y+this.normals[this.m_j].Y)*t))))}else{var e=new Qt.IntPoint(Qt.Cast_Int64(Qt.Clipper.Round(this.pts[this.m_i][this.m_j].X+this.normals[this.m_k].X*this.delta)),Qt.Cast_Int64(Qt.Clipper.Round(this.pts[this.m_i][this.m_j].Y+this.normals[this.m_k].Y*this.delta))),n=new Qt.IntPoint(Qt.Cast_Int64(Qt.Clipper.Round(this.pts[this.m_i][this.m_j].X+this.normals[this.m_j].X*this.delta)),Qt.Cast_Int64(Qt.Clipper.Round(this.pts[this.m_i][this.m_j].Y+this.normals[this.m_j].Y*this.delta)));this.AddPoint(e),this.AddPoint(this.pts[this.m_i][this.m_j]),this.AddPoint(n)}},Qt.Clipper.PolyOffsetBuilder.prototype.DoRound=function(){var t=new Qt.IntPoint(Qt.Clipper.Round(this.pts[this.m_i][this.m_j].X+this.normals[this.m_k].X*this.delta),Qt.Clipper.Round(this.pts[this.m_i][this.m_j].Y+this.normals[this.m_k].Y*this.delta)),e=new Qt.IntPoint(Qt.Clipper.Round(this.pts[this.m_i][this.m_j].X+this.normals[this.m_j].X*this.delta),Qt.Clipper.Round(this.pts[this.m_i][this.m_j].Y+this.normals[this.m_j].Y*this.delta));if(this.AddPoint(t),(this.normals[this.m_k].X*this.normals[this.m_j].Y-this.normals[this.m_j].X*this.normals[this.m_k].Y)*this.delta>=0){if(this.normals[this.m_j].X*this.normals[this.m_k].X+this.normals[this.m_j].Y*this.normals[this.m_k].Y<.985){var n=Math.atan2(this.normals[this.m_k].Y,this.normals[this.m_k].X),r=Math.atan2(this.normals[this.m_j].Y,this.normals[this.m_j].X);this.delta>0&&r<n?r+=Qt.PI2:this.delta<0&&r>n&&(r-=Qt.PI2);for(var i=Qt.Clipper.BuildArc(this.pts[this.m_i][this.m_j],n,r,this.delta),o=0;o<i.length;o++)this.AddPoint(i[o])}}else this.AddPoint(this.pts[this.m_i][this.m_j]);this.AddPoint(e)},Qt.Error=function(t){try{throw new Error(t)}catch(e){alert(e.message)}},Qt.Clone=function(t){if(!(t instanceof Array))return[];if(0==t.length)return[];if(1==t.length&&0==t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var n,r,i,o,a=t.length,s=[];for(r=0;r<a;r++){for(n=t[r].length,o=[],i=0;i<n;i++)o.push({X:t[r][i].X,Y:t[r][i].Y});s.push(o)}return e||(s=s[0]),s},Qt.Clean=function(t,e){if(!(t instanceof Array))return[];var n=t[0]instanceof Array,t=Qt.Clone(t);if("number"!=typeof e||null===e)return Qt.Error("Delta is not a number in Clean()."),t;if(0==t.length||1==t.length&&0==t[0].length||e<0)return t;n||(t=[t]);for(var r,i,o,a,s,u,l,c=t.length,h=[],f=0;f<c;f++)if(i=t[f],r=i.length,0!=r)if(r<3)o=i,h.push(o);else{for(o=i,a=e*e,s=i[0],u=1,l=1;l<r;l++)(i[l].X-s.X)*(i[l].X-s.X)+(i[l].Y-s.Y)*(i[l].Y-s.Y)<=a||(o[u]=i[l],s=i[l],u++);s=i[u-1],(i[0].X-s.X)*(i[0].X-s.X)+(i[0].Y-s.Y)*(i[0].Y-s.Y)<=a&&u--,u<r&&o.splice(u,r-u),o.length&&h.push(o)}return!n&&h.length?h=h[0]:n||0!=h.length?n&&0==h.length&&(h=[[]]):h=[],h},Qt.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return Qt.Error("Tolerance is not a number in Lighten()."),Qt.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||e<0)return Qt.Clone(t);t[0]instanceof Array||(t=[t]);var n,r,i,o,a,s,u,l,c,h,f,p,d,m,v,g=t.length,y=[];for(n=0;n<g;n++){for(i=t[n],o=0;o<1e6;o++){for(a=[],s=i.length,i[s-1].X!=i[0].X||i[s-1].Y!=i[0].Y?(p=1,i.push({X:i[0].X,Y:i[0].Y}),s=i.length):p=0,f=[],r=0;r<s-2;r++)u=i[r],c=i[r+1],l=i[r+2],d=l.X-u.X,m=l.Y-u.Y,h=0,0===d&&0===m||(v=Math.sqrt(d*d+m*m),h=Math.abs((c.X-u.X)*m-(c.Y-u.Y)*d)/v),h<=e&&(f[r+1]=1,r++);for(a.push({X:i[0].X,Y:i[0].Y}),r=1;r<s-1;r++)f[r]||a.push({X:i[r].X,Y:i[r].Y});if(a.push({X:i[s-1].X,Y:i[s-1].Y}),p&&i.pop(),!f.length)break;i=a}s=a.length,a[s-1].X==a[0].X&&a[s-1].Y==a[0].Y&&a.pop(),a.length>2&&y.push(a)}return!t[0]instanceof Array&&(y=y[0]),"undefined"==typeof y&&(y=[[]]),y},t.exports=Qt},function(t,e,n){t.exports=n(187),t.exports.color=n(186)},function(t,e){var n=t.exports=n||{};n.color=n.color||{},n.utils=n.utils||{},n.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var n=e.call(arguments),r=t.length-1;r>=0;r--)n=[t[r].apply(this,n)];return n[0]}},each:function(e,n,r){if(t&&e.forEach===t)e.forEach(n,r);else if(e.length===e.length+0){for(var i=0,o=e.length;i<o;i++)if(i in e&&n.call(r,e[i],i)===this.BREAK)return}else for(var i in e)if(n.call(r,e[i],i)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!==t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),n.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var n=e.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(n.utils.common),n.Color=n.color.Color=function(t,e,n,r){function i(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(a(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(a(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function o(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(s(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(s(this),this.__state.space="HSV"),this.__state[e]=t}})}function a(t,n,i){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,i);else{if("HSV"!==t.__state.space)throw"Corrupted color state";r.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function s(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);r.extend(t.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}var u=function(){if(this.__state=t.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),i(u.prototype,"r",2),i(u.prototype,"g",1),i(u.prototype,"b",0),o(u.prototype,"h"),o(u.prototype,"s"),o(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),u}(n.color.interpret=function(t,e){var n,r,i=function(){r=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(o,function(i){if(i.litmus(t))return e.each(i.conversions,function(i,o){if(n=i.read(t),r===!1&&n!==!1)return r=n,n.conversionName=o,n.conversion=i,e.BREAK}),e.BREAK}),r},o=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return i}(n.color.toString,n.utils.common),n.color.math=function(){var t;return{hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r,i,o=Math.min(t,e,n),a=Math.max(t,e,n),s=a-o;return 0==a?{h:NaN,s:0,v:0}:(i=s/a,r=t==a?(e-n)/s:e==a?2+(n-t)/s:4+(t-e)/s,r/=6,r<0&&(r+=1),{h:360*r,s:i,v:a/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,n,r){return r<<(t=8*n)|e&~(255<<t)}}}(),n.color.toString,n.utils.common)},function(t,e){var n=t.exports=n||{};n.gui=n.gui||{},n.utils=n.utils||{},n.controllers=n.controllers||{},n.dom=n.dom||{},n.color=n.color||{},n.utils.css=function(){return{load:function(t,e){e=e||document;var n=e.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,e.getElementsByTagName("head")[0].appendChild(n)},inject:function(t,e){e=e||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=t,e.getElementsByTagName("head")[0].appendChild(n)}}}(),n.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var n=e.call(arguments),r=t.length-1;r>=0;r--)n=[t[r].apply(this,n)];return n[0]}},each:function(e,n,r){if(t&&e.forEach===t)e.forEach(n,r);else if(e.length===e.length+0){for(var i=0,o=e.length;i<o;i++)if(i in e&&n.call(r,e[i],i)===this.BREAK)return}else for(var i in e)if(n.call(r,e[i],i)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!==t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return t===!1||t===!0},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),n.controllers.Controller=function(t){var e=function(t,e){this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0};return t.extend(e.prototype,{onChange:function(t){return this.__onChange=t,this},onFinishChange:function(t){return this.__onFinishChange=t,this},setValue:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),e}(n.utils.common),n.dom.dom=function(t){function e(e){if("0"===e||t.isUndefined(e))return 0;var n=e.match(i);return t.isNull(n)?0:parseFloat(n[1])}var n={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},r={};t.each(n,function(e,n){t.each(e,function(t){r[t]=n})});var i=/(\d+(\.\d+)?)px/,o={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(e,n,r){t.isUndefined(n)&&(n=!0),t.isUndefined(r)&&(r=!0),e.style.position="absolute",n&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,n,i,o){i=i||{};var a=r[n];if(!a)throw new Error("Event type "+n+" not supported.");var s=document.createEvent(a);switch(a){case"MouseEvents":var u=i.x||i.clientX||0,l=i.y||i.clientY||0;s.initMouseEvent(n,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,u,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=s.initKeyboardEvent||s.initKeyEvent;t.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(n,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(n,i.bubbles||!1,i.cancelable||!0)}t.defaults(s,o),e.dispatchEvent(s)},bind:function(t,e,n,r){return r=r||!1,t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on"+e,n),o},unbind:function(t,e,n,r){return r=r||!1,t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on"+e,n),o},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);n.indexOf(e)==-1&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return o},removeClass:function(t,e){if(e)if(void 0===t.className);else if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);r!=-1&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return o},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var n=getComputedStyle(t);return e(n["border-left-width"])+e(n["border-right-width"])+e(n["padding-left"])+e(n["padding-right"])+e(n.width)},getHeight:function(t){var n=getComputedStyle(t);return e(n["border-top-width"])+e(n["border-bottom-width"])+e(n["padding-top"])+e(n["padding-bottom"])+e(n.height)},getOffset:function(t){var e={left:0,top:0};if(t.offsetParent)do e.left+=t.offsetLeft,e.top+=t.offsetTop;while(t=t.offsetParent);return e},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};return o}(n.utils.common),n.controllers.OptionController=function(t,e,n){var r=function(t,i,o){r.superclass.call(this,t,i);var a=this;if(this.__select=document.createElement("select"),n.isArray(o)){var s={};n.each(o,function(t){s[t]=t}),o=s}n.each(o,function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),a.__select.appendChild(n)}),this.updateDisplay(),e.bind(this.__select,"change",function(){var t=this.options[this.selectedIndex].value;a.setValue(t)}),this.domElement.appendChild(this.__select)};return r.superclass=t,n.extend(r.prototype,t.prototype,{setValue:function(t){var e=r.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.NumberController=function(t,e){function n(t){return t=t.toString(),t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var r=function(t,i,o){r.superclass.call(this,t,i),o=o||{},this.__min=o.min,this.__max=o.max,this.__step=o.step,e.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=n(this.__impliedStep)};return r.superclass=t,e.extend(r.prototype,t.prototype,{setValue:function(t){return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&t%this.__step!=0&&(t=Math.round(t/this.__step)*this.__step),r.superclass.prototype.setValue.call(this,t)},min:function(t){return this.__min=t,this},max:function(t){return this.__max=t,this},step:function(t){return this.__step=t,this}}),r}(n.controllers.Controller,n.utils.common),n.controllers.NumberControllerBox=function(t,e,n){function r(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var i=function(t,r,o){function a(){var t=parseFloat(f.__input.value);n.isNaN(t)||f.setValue(t)}function s(){a(),f.__onFinishChange&&f.__onFinishChange.call(f,f.getValue())}function u(t){e.bind(window,"mousemove",l),e.bind(window,"mouseup",c),h=t.clientY}function l(t){var e=h-t.clientY;f.setValue(f.getValue()+e*f.__impliedStep),h=t.clientY}function c(){e.unbind(window,"mousemove",l),e.unbind(window,"mouseup",c)}this.__truncationSuspended=!1,i.superclass.call(this,t,r,o);var h,f=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"change",a),e.bind(this.__input,"blur",s),e.bind(this.__input,"mousedown",u),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&(f.__truncationSuspended=!0,this.blur(),f.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return i.superclass=t,n.extend(i.prototype,t.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():r(this.getValue(),this.__precision),i.superclass.prototype.updateDisplay.call(this)}}),i}(n.controllers.NumberController,n.dom.dom,n.utils.common),n.controllers.NumberControllerSlider=function(t,e,n,r,i){function o(t,e,n,r,i){return r+(i-r)*((t-e)/(n-e))}var a=function(t,n,r,i,s){function u(t){e.bind(window,"mousemove",l),e.bind(window,"mouseup",c),l(t)}function l(t){t.preventDefault();var n=e.getOffset(h.__background),r=e.getWidth(h.__background);return h.setValue(o(t.clientX,n.left,n.left+r,h.__min,h.__max)),!1}function c(){e.unbind(window,"mousemove",l),e.unbind(window,"mouseup",c),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}a.superclass.call(this,t,n,{min:r,max:i,step:s});var h=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),e.bind(this.__background,"mousedown",u),e.addClass(this.__background,"slider"),e.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return a.superclass=t,a.useDefaultStyles=function(){n.inject(i)},r.extend(a.prototype,t.prototype,{updateDisplay:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",a.superclass.prototype.updateDisplay.call(this)}}),a}(n.controllers.NumberController,n.dom.dom,n.utils.css,n.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),n.controllers.FunctionController=function(t,e,n){var r=function(t,n,i){r.superclass.call(this,t,n);var o=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===i?"Fire":i,e.bind(this.__button,"click",function(t){return t.preventDefault(),o.fire(),!1}),e.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=t,n.extend(r.prototype,t.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.BooleanController=function(t,e,n){var r=function(t,n){function i(){o.setValue(!o.__prev)}r.superclass.call(this,t,n);var o=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),e.bind(this.__checkbox,"change",i,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=t,n.extend(r.prototype,t.prototype,{setValue:function(t){var e=r.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var n=e.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(n.utils.common),n.color.interpret=function(t,e){var n,r,i=function(){r=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(o,function(i){if(i.litmus(t))return e.each(i.conversions,function(i,o){if(n=i.read(t),r===!1&&n!==!1)return r=n,n.conversionName=o,n.conversion=i,e.BREAK}),e.BREAK}),r},o=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return i}(n.color.toString,n.utils.common),n.GUI=n.gui.GUI=function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d){function m(t,e,n,o){if(void 0===e[n])throw new Error("Object "+e+' has no property "'+n+'"');var a;if(o.color)a=new c(e,n);else{var s=[e,n].concat(o.factoryArgs);a=r.apply(t,s)}o.before instanceof i&&(o.before=o.before.__li),y(t,a),p.addClass(a.domElement,"c");var u=document.createElement("span");p.addClass(u,"property-name"),u.innerHTML=a.property;var l=document.createElement("div");l.appendChild(u),l.appendChild(a.domElement);var h=v(t,l,o.before);return p.addClass(h,B.CLASS_CONTROLLER_ROW),p.addClass(h,typeof a.getValue()),g(t,h,a),t.__controllers.push(a),a}function v(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,params.before):t.__ul.appendChild(r),t.onResize(),r}function g(t,e,n){if(n.__li=e,n.__gui=t,d.extend(n,{options:function(e){return arguments.length>1?(n.remove(),m(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[d.toArray(arguments)]})):d.isArray(e)||d.isObject(e)?(n.remove(),m(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof u){var r=new s(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});d.each(["updateDisplay","onChange","onFinishChange"],function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(n,t),i.apply(r,t)}}),p.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof s){var i=function(e){return d.isNumber(n.__min)&&d.isNumber(n.__max)?(n.remove(),m(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):e};n.min=d.compose(i,n.min),n.max=d.compose(i,n.max)}else n instanceof o?(p.bind(e,"click",function(){p.fakeEvent(n.__checkbox,"click")}),p.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof a?(p.bind(e,"click",function(){p.fakeEvent(n.__button,"click")}),p.bind(e,"mouseover",function(){p.addClass(n.__button,"hover")}),p.bind(e,"mouseout",function(){p.removeClass(n.__button,"hover")})):n instanceof c&&(p.addClass(e,"color"),n.updateDisplay=d.compose(function(t){return e.style.borderLeftColor=n.__color.toString(),t},n.updateDisplay),n.updateDisplay());n.setValue=d.compose(function(e){return t.getRoot().__preset_select&&n.isModified()&&M(t.getRoot(),!0),e},n.setValue)}function y(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(r!=-1){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[e.property]=e,n.load&&n.load.remembered){var o,a=n.load.remembered;if(a[t.preset])o=a[t.preset];else{if(!a[I])return;o=a[I]}if(o[r]&&void 0!==o[r][e.property]){var s=o[r][e.property];e.initialValue=s,e.setValue(s)}}}}function _(t,e){return document.location.href+"."+e}function b(t){function e(){l.style.display=t.useLocalStorage?"block":"none"}var n=t.__save_row=document.createElement("li");p.addClass(t.domElement,"has-save"),t.__ul.insertBefore(n,t.__ul.firstChild),p.addClass(n,"save-row");var r=document.createElement("span");r.innerHTML="&nbsp;",p.addClass(r,"button gears");var i=document.createElement("span");i.innerHTML="Save",p.addClass(i,"button"),p.addClass(i,"save");var o=document.createElement("span");o.innerHTML="New",p.addClass(o,"button"),p.addClass(o,"save-as");var a=document.createElement("span");a.innerHTML="Revert",p.addClass(a,"button"),p.addClass(a,"revert");var s=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?d.each(t.load.remembered,function(e,n){C(t,n,n==t.preset)}):C(t,I,!1),p.bind(s,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),n.appendChild(s),n.appendChild(r),n.appendChild(i),n.appendChild(o),n.appendChild(a),k){var u=document.getElementById("dg-save-locally"),l=document.getElementById("dg-local-explain");u.style.display="block";var c=document.getElementById("dg-local-storage");"true"===localStorage.getItem(_(t,"isLocal"))&&c.setAttribute("checked","checked"),e(),p.bind(c,"change",function(){t.useLocalStorage=!t.useLocalStorage,
e()})}var h=document.getElementById("dg-new-constructor");p.bind(h,"keydown",function(t){!t.metaKey||67!==t.which&&67!=t.keyCode||T.hide()}),p.bind(r,"click",function(){h.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),T.show(),h.focus(),h.select()}),p.bind(i,"click",function(){t.save()}),p.bind(o,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),p.bind(a,"click",function(){t.revert()})}function w(t){function e(e){return e.preventDefault(),i=e.clientX,p.addClass(t.__closeButton,B.CLASS_DRAG),p.bind(window,"mousemove",n),p.bind(window,"mouseup",r),!1}function n(e){return e.preventDefault(),t.width+=i-e.clientX,t.onResize(),i=e.clientX,!1}function r(){p.removeClass(t.__closeButton,B.CLASS_DRAG),p.unbind(window,"mousemove",n),p.unbind(window,"mouseup",r)}t.__resize_handle=document.createElement("div"),d.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var i;p.bind(t.__resize_handle,"mousedown",e),p.bind(t.__closeButton,"mousedown",e),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function x(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function E(t,e){var n={};return d.each(t.__rememberedObjects,function(r,i){var o={},a=t.__rememberedObjectIndecesToControllers[i];d.each(a,function(t,n){o[n]=e?t.initialValue:t.getValue()}),n[i]=o}),n}function C(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function S(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value==t.preset&&(t.__preset_select.selectedIndex=e)}function M(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];e?n.innerHTML=n.value+"*":n.innerHTML=n.value}function P(t){0!=t.length&&h(function(){P(t)}),d.each(t,function(t){t.updateDisplay()})}t.inject(n);var T,O,A="dg",R=72,L=20,I="Default",k=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}(),D=!0,j=!1,N=[],B=function(t){function e(){localStorage.setItem(_(r,"gui"),JSON.stringify(r.getSaveObject()))}function n(){var t=r.getRoot();t.width+=1,d.defer(function(){t.width-=1})}var r=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),p.addClass(this.domElement,A),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=d.defaults(t,{autoPlace:!0,width:B.DEFAULT_WIDTH}),t=d.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),d.isUndefined(t.load)?t.load={preset:I}:t.preset&&(t.load.preset=t.preset),d.isUndefined(t.parent)&&t.hideable&&N.push(this),t.resizable=d.isUndefined(t.parent)&&t.resizable,t.autoPlace&&d.isUndefined(t.scrollable)&&(t.scrollable=!0);var i=k&&"true"===localStorage.getItem(_(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return r.parent?r.getRoot().preset:t.load.preset},set:function(e){r.parent?r.getRoot().preset=e:t.load.preset=e,S(this),r.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,x(r,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,a&&(a.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(e){t.closed=e,t.closed?p.addClass(r.__ul,B.CLASS_CLOSED):p.removeClass(r.__ul,B.CLASS_CLOSED),this.onResize(),r.__closeButton&&(r.__closeButton.innerHTML=e?B.TEXT_OPEN:B.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return i},set:function(t){k&&(i=t,t?p.bind(window,"unload",e):p.unbind(window,"unload",e),localStorage.setItem(_(r,"isLocal"),t))}}}),d.isUndefined(t.parent)){if(t.closed=!1,p.addClass(this.domElement,B.CLASS_MAIN),p.makeSelectable(this.domElement,!1),k&&i){r.useLocalStorage=!0;var o=localStorage.getItem(_(this,"gui"));o&&(t.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=B.TEXT_CLOSED,p.addClass(this.__closeButton,B.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),p.bind(this.__closeButton,"click",function(){r.closed=!r.closed})}else{void 0===t.closed&&(t.closed=!0);var a=document.createTextNode(t.name);p.addClass(a,"controller-name");var s=v(r,a),u=function(t){return t.preventDefault(),r.closed=!r.closed,!1};p.addClass(this.__ul,B.CLASS_CLOSED),p.addClass(s,"title"),p.bind(s,"click",u),t.closed||(this.closed=!1)}t.autoPlace&&(d.isUndefined(t.parent)&&(D&&(O=document.createElement("div"),p.addClass(O,A),p.addClass(O,B.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(O),D=!1),O.appendChild(this.domElement),p.addClass(this.domElement,B.CLASS_AUTO_PLACE)),this.parent||x(r,t.width)),p.bind(window,"resize",function(){r.onResize()}),p.bind(this.__ul,"webkitTransitionEnd",function(){r.onResize()}),p.bind(this.__ul,"transitionend",function(){r.onResize()}),p.bind(this.__ul,"oTransitionEnd",function(){r.onResize()}),this.onResize(),t.resizable&&w(this);r.getRoot();t.parent||n()};return B.toggleHide=function(){j=!j,d.each(N,function(t){t.domElement.style.zIndex=j?-999:999,t.domElement.style.opacity=j?0:1})},B.CLASS_AUTO_PLACE="a",B.CLASS_AUTO_PLACE_CONTAINER="ac",B.CLASS_MAIN="main",B.CLASS_CONTROLLER_ROW="cr",B.CLASS_TOO_TALL="taller-than-window",B.CLASS_CLOSED="closed",B.CLASS_CLOSE_BUTTON="close-button",B.CLASS_DRAG="drag",B.DEFAULT_WIDTH=245,B.TEXT_CLOSED="Close Controls",B.TEXT_OPEN="Open Controls",p.bind(window,"keydown",function(t){"text"===document.activeElement.type||t.which!==R&&t.keyCode!=R||B.toggleHide()},!1),d.extend(B.prototype,{add:function(t,e){return m(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return m(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.slice(this.__controllers.indexOf(t),1);var e=this;d.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&O.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new B(e);this.__folders[t]=n;var r=v(this,n.domElement);return p.addClass(r,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=p.getOffset(t.__ul).top,n=0;d.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(n+=p.getHeight(e))}),window.innerHeight-e-L<n?(p.addClass(t.domElement,B.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-L+"px"):(p.removeClass(t.domElement,B.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&d.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},remember:function(){if(d.isUndefined(T)&&(T=new f,T.domElement.innerHTML=e),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;d.each(Array.prototype.slice.call(arguments),function(e){0==t.__rememberedObjects.length&&b(t),t.__rememberedObjects.indexOf(e)==-1&&t.__rememberedObjects.push(e)}),this.autoPlace&&x(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=E(this)),t.folders={},d.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=E(this),M(this,!1)},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[I]=E(this,!0)),this.load.remembered[t]=E(this),this.preset=t,C(this,t,!0)},revert:function(t){d.each(this.__controllers,function(e){this.getRoot().load.remembered?y(t||this.getRoot(),e):e.setValue(e.initialValue)},this),d.each(this.__folders,function(t){t.revert(t)}),t||M(this.getRoot(),!1)},listen:function(t){var e=0==this.__listening.length;this.__listening.push(t),e&&P(this.__listening)}}),B}(n.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",n.controllers.factory=function(t,e,n,r,i,o,a){return function(s,u){var l=s[u];return a.isArray(arguments[2])||a.isObject(arguments[2])?new t(s,u,arguments[2]):a.isNumber(l)?a.isNumber(arguments[2])&&a.isNumber(arguments[3])?new n(s,u,arguments[2],arguments[3]):new e(s,u,{min:arguments[2],max:arguments[3]}):a.isString(l)?new r(s,u):a.isFunction(l)?new i(s,u,""):a.isBoolean(l)?new o(s,u):void 0}}(n.controllers.OptionController,n.controllers.NumberControllerBox,n.controllers.NumberControllerSlider,n.controllers.StringController=function(t,e,n){var r=function(t,n){function i(){a.setValue(a.__input.value)}function o(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}r.superclass.call(this,t,n);var a=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"keyup",i),e.bind(this.__input,"change",i),e.bind(this.__input,"blur",o),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=t,n.extend(r.prototype,t.prototype,{updateDisplay:function(){return e.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.FunctionController,n.controllers.BooleanController,n.utils.common),n.controllers.Controller,n.controllers.BooleanController,n.controllers.FunctionController,n.controllers.NumberControllerBox,n.controllers.NumberControllerSlider,n.controllers.OptionController,n.controllers.ColorController=function(t,e,n,r,i){function o(t,e,n,r){t.style.background="",i.each(u,function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "})}function a(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var s=function(t,u){function l(t){p(t),e.bind(window,"mousemove",p),e.bind(window,"mouseup",c)}function c(){e.unbind(window,"mousemove",p),e.unbind(window,"mouseup",c)}function h(){var t=r(this.value);t!==!1?(m.__color.__state=t,m.setValue(m.__color.toOriginal())):this.value=m.__color.toString()}function f(){e.unbind(window,"mousemove",d),e.unbind(window,"mouseup",f)}function p(t){t.preventDefault();var n=e.getWidth(m.__saturation_field),r=e.getOffset(m.__saturation_field),i=(t.clientX-r.left+document.body.scrollLeft)/n,o=1-(t.clientY-r.top+document.body.scrollTop)/n;return o>1?o=1:o<0&&(o=0),i>1?i=1:i<0&&(i=0),m.__color.v=o,m.__color.s=i,m.setValue(m.__color.toOriginal()),!1}function d(t){t.preventDefault();var n=e.getHeight(m.__hue_field),r=e.getOffset(m.__hue_field),i=1-(t.clientY-r.top+document.body.scrollTop)/n;return i>1?i=1:i<0&&(i=0),m.__color.h=360*i,m.setValue(m.__color.toOriginal()),!1}s.superclass.call(this,t,u),this.__color=new n(this.getValue()),this.__temp=new n(0);var m=this;this.domElement=document.createElement("div"),e.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",e.bind(this.__input,"keydown",function(t){13===t.keyCode&&h.call(this)}),e.bind(this.__input,"blur",h),e.bind(this.__selector,"mousedown",function(t){e.addClass(this,"drag").bind(window,"mouseup",function(t){e.removeClass(m.__selector,"drag")})});var v=document.createElement("div");i.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),i.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),i.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),i.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),i.extend(v.style,{width:"100%",height:"100%",background:"none"}),o(v,"top","rgba(0,0,0,0)","#000"),i.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),a(this.__hue_field),i.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),e.bind(this.__saturation_field,"mousedown",l),e.bind(this.__field_knob,"mousedown",l),e.bind(this.__hue_field,"mousedown",function(t){d(t),e.bind(window,"mousemove",d),e.bind(window,"mouseup",f)}),this.__saturation_field.appendChild(v),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};s.superclass=t,i.extend(s.prototype,t.prototype,{updateDisplay:function(){var t=r(this.getValue());if(t!==!1){var e=!1;i.each(n.COMPONENTS,function(n){if(!i.isUndefined(t[n])&&!i.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}},this),e&&i.extend(this.__color.__state,t)}i.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=this.__color.v<.5||this.__color.s>.5?255:0,s=255-a;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,o(this.__saturation_field,"left","#fff",this.__temp.toString()),i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+s+","+s+","+s+",.7)"})}});var u=["-moz-","-o-","-webkit-","-ms-",""];return s}(n.controllers.Controller,n.dom.dom,n.color.Color=function(t,e,n,r){function i(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(a(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(a(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function o(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(s(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(s(this),this.__state.space="HSV"),this.__state[e]=t}})}function a(t,n,i){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,i);else{if("HSV"!==t.__state.space)throw"Corrupted color state";r.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function s(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);r.extend(t.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}var u=function(){if(this.__state=t.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),i(u.prototype,"r",2),i(u.prototype,"g",1),i(u.prototype,"b",0),o(u.prototype,"h"),o(u.prototype,"s"),o(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),u}(n.color.interpret,n.color.math=function(){var t;return{hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r,i,o=Math.min(t,e,n),a=Math.max(t,e,n),s=a-o;return 0==a?{h:NaN,s:0,v:0}:(i=s/a,r=t==a?(e-n)/s:e==a?2+(n-t)/s:4+(t-e)/s,r/=6,r<0&&(r+=1),{h:360*r,s:i,v:a/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,n,r){return r<<(t=8*n)|e&~(255<<t)}}}(),n.color.toString,n.utils.common),n.color.interpret,n.utils.common),n.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}(),n.dom.CenteredDiv=function(t,e){var n=function(){this.backgroundElement=document.createElement("div"),e.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),t.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),e.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;t.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),e.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var e=this,n=function(){e.domElement.style.display="none",e.backgroundElement.style.display="none",t.unbind(e.domElement,"webkitTransitionEnd",n),t.unbind(e.domElement,"transitionend",n),t.unbind(e.domElement,"oTransitionEnd",n)};t.bind(this.domElement,"webkitTransitionEnd",n),t.bind(this.domElement,"transitionend",n),t.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-t.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-t.getHeight(this.domElement)/2+"px"},n}(n.dom.dom,n.utils.common),n.dom.dom,n.utils.common)},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(n=this._events[t],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),l=n.slice(),i=l.length,u=0;u<i;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){"use strict";function n(t){return t.replace(r,function(t,e){return e.toUpperCase()})}var r=/-(.)/g;t.exports=n},function(t,e,n){"use strict";function r(t){return i(t.replace(o,"ms-"))}var i=n(189),o=/^-ms-/;t.exports=r},function(t,e,n){"use strict";function r(t,e){return!(!t||!e)&&(t===e||!i(t)&&(i(e)?r(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}var i=n(199);t.exports=r},function(t,e,n){"use strict";function r(t){var e=t.length;if(Array.isArray(t)||"object"!=typeof t&&"function"!=typeof t?a(!1):void 0,"number"!=typeof e?a(!1):void 0,0===e||e-1 in t?void 0:a(!1),"function"==typeof t.callee?a(!1):void 0,t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(n){}for(var r=Array(e),i=0;i<e;i++)r[i]=t[i];return r}function i(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function o(t){return i(t)?Array.isArray(t)?t.slice():r(t):[t]}var a=n(3);t.exports=o},function(t,e,n){"use strict";function r(t){var e=t.match(c);return e&&e[1].toLowerCase()}function i(t,e){var n=l;l?void 0:u(!1);var i=r(t),o=i&&s(i);if(o){n.innerHTML=o[1]+t+o[2];for(var c=o[0];c--;)n=n.lastChild}else n.innerHTML=t;var h=n.getElementsByTagName("script");h.length&&(e?void 0:u(!1),a(h).forEach(e));for(var f=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return f}var o=n(13),a=n(192),s=n(194),u=n(3),l=o.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;t.exports=i},function(t,e,n){"use strict";function r(t){return a?void 0:o(!1),f.hasOwnProperty(t)||(t="*"),s.hasOwnProperty(t)||("*"===t?a.innerHTML="<link />":a.innerHTML="<"+t+"></"+t+">",s[t]=!a.firstChild),s[t]?f[t]:null}var i=n(13),o=n(3),a=i.canUseDOM?document.createElement("div"):null,s={},u=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],h=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],f={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],
legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:c,th:c},p=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];p.forEach(function(t){f[t]=h,s[t]=!0}),t.exports=r},function(t,e){"use strict";function n(t){return t===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}t.exports=n},function(t,e){"use strict";function n(t){return t.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;t.exports=n},function(t,e,n){"use strict";function r(t){return i(t).replace(o,"-ms-")}var i=n(196),o=/^ms-/;t.exports=r},function(t,e){"use strict";function n(t){return!(!t||!("function"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}t.exports=n},function(t,e,n){"use strict";function r(t){return i(t)&&3==t.nodeType}var i=n(198);t.exports=r},function(t,e){"use strict";function n(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}t.exports=n},function(t,e){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},i="function"==typeof Object.getOwnPropertySymbols;t.exports=function(t,e,o){if("string"!=typeof e){var a=Object.getOwnPropertyNames(e);i&&(a=a.concat(Object.getOwnPropertySymbols(e)));for(var s=0;s<a.length;++s)if(!(n[a[s]]||r[a[s]]||o&&o[a[s]]))try{t[a[s]]=e[a[s]]}catch(u){}}return t}},function(t,e,n){"use strict";var r=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;u=new Error(e.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};t.exports=r},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return a(n)?n:void 0}function i(t){return o(t)&&f.call(t)==s}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null!=t&&(i(t)?p.test(c.call(t)):n(t)&&u.test(t))}var s="[object Function]",u=/^\[object .+?Constructor\]$/,l=Object.prototype,c=Function.prototype.toString,h=l.hasOwnProperty,f=l.toString,p=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e){function n(t){return i(t)&&d.call(t,"callee")&&(!v.call(t,"callee")||m.call(t)==c)}function r(t){return null!=t&&a(t.length)&&!o(t)}function i(t){return u(t)&&r(t)}function o(t){var e=s(t)?m.call(t):"";return e==h||e==f}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=l}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return!!t&&"object"==typeof t}var l=9007199254740991,c="[object Arguments]",h="[object Function]",f="[object GeneratorFunction]",p=Object.prototype,d=p.hasOwnProperty,m=p.toString,v=p.propertyIsEnumerable;t.exports=n},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return s(n)?n:void 0}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=g}function o(t){return a(t)&&d.call(t)==l}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null!=t&&(o(t)?m.test(f.call(t)):n(t)&&c.test(t))}var u="[object Array]",l="[object Function]",c=/^\[object .+?Constructor\]$/,h=Object.prototype,f=Function.prototype.toString,p=h.hasOwnProperty,d=h.toString,m=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=r(Array,"isArray"),g=9007199254740991,y=v||function(t){return n(t)&&i(t.length)&&d.call(t)==u};t.exports=y},function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}function i(t){return null!=t&&a(y(t))}function o(t,e){return t="number"==typeof t||p.test(t)?+t:-1,e=null==e?g:e,t>-1&&t%1==0&&t<e}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=g}function s(t){for(var e=l(t),n=e.length,r=n&&t.length,i=!!r&&a(r)&&(f(t)||h(t)),s=-1,u=[];++s<n;){var c=e[s];(i&&o(c,r)||m.call(t,c))&&u.push(c)}return u}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(f(t)||h(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,s=Array(e),l=e>0;++r<e;)s[r]=r+"";for(var c in t)l&&o(c,e)||"constructor"==c&&(i||!m.call(t,c))||s.push(c);return s}var c=n(203),h=n(204),f=n(205),p=/^\d+$/,d=Object.prototype,m=d.hasOwnProperty,v=c(Object,"keys"),g=9007199254740991,y=r("length"),_=v?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&i(t)?s(t):u(t)?v(t):[]}:s;t.exports=_},function(t,e,n){function r(t){return null==t?void 0===t?u:s:(t=Object(t),l&&l in t?o(t):a(t))}var i=n(103),o=n(210),a=n(211),s="[object Null]",u="[object Undefined]",l=i?i.toStringTag:void 0;t.exports=r},function(t,e){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,function(){return this}())},function(t,e,n){var r=n(212),i=r(Object.getPrototypeOf,Object);t.exports=i},function(t,e,n){function r(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(i){}var o=s.call(t);return r&&(e?t[u]=n:delete t[u]),o}var i=n(103),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i?i.toStringTag:void 0;t.exports=r},function(t,e){function n(t){return i.call(t)}var r=Object.prototype,i=r.toString;t.exports=n},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e,n){var r=n(208),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e,n){t.exports=n(365).create},function(t,e,n){"use strict";t.exports=n(346)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0,e.default=void 0;var s=n(10),u=n(106),l=r(u),c=n(107),h=(r(c),function(t){function e(n,r){i(this,e);var a=o(this,t.call(this,n,r));return a.store=n.store,a}return a(e,t),e.prototype.getChildContext=function(){return{store:this.store}},e.prototype.render=function(){return s.Children.only(this.props.children)},e}(s.Component));e.default=h,h.propTypes={store:l.default.isRequired,children:s.PropTypes.element.isRequired},h.childContextTypes={store:l.default.isRequired}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){return t.displayName||t.name||"Component"}function u(t,e){try{return t.apply(e)}catch(n){return P.value=n,P}}function l(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=Boolean(t),f=t||C,d=void 0;d="function"==typeof e?e:e?(0,g.default)(e):S;var v=n||M,y=r.pure,_=void 0===y||y,b=r.withRef,x=void 0!==b&&b,O=_&&v!==M,A=T++;return function(t){function e(t,e,n){var r=v(t,e,n);return r}var n="Connect("+s(t)+")",r=function(r){function s(t,e){i(this,s);var a=o(this,r.call(this,t,e));a.version=A,a.store=t.store||e.store,(0,E.default)(a.store,'Could not find "store" in either the context or '+('props of "'+n+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+n+'".'));var u=a.store.getState();return a.state={storeState:u},a.clearCache(),a}return a(s,r),s.prototype.shouldComponentUpdate=function(){return!_||this.haveOwnPropsChanged||this.hasStoreStateChanged},s.prototype.computeStateProps=function(t,e){if(!this.finalMapStateToProps)return this.configureFinalMapState(t,e);var n=t.getState(),r=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,e):this.finalMapStateToProps(n);return r},s.prototype.configureFinalMapState=function(t,e){var n=f(t.getState(),e),r="function"==typeof n;return this.finalMapStateToProps=r?n:f,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,r?this.computeStateProps(t,e):n},s.prototype.computeDispatchProps=function(t,e){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(t,e);var n=t.dispatch,r=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,e):this.finalMapDispatchToProps(n);return r},s.prototype.configureFinalMapDispatch=function(t,e){var n=d(t.dispatch,e),r="function"==typeof n;return this.finalMapDispatchToProps=r?n:d,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,r?this.computeDispatchProps(t,e):n},s.prototype.updateStatePropsIfNeeded=function(){var t=this.computeStateProps(this.store,this.props);return(!this.stateProps||!(0,m.default)(t,this.stateProps))&&(this.stateProps=t,!0)},s.prototype.updateDispatchPropsIfNeeded=function(){var t=this.computeDispatchProps(this.store,this.props);return(!this.dispatchProps||!(0,m.default)(t,this.dispatchProps))&&(this.dispatchProps=t,!0)},s.prototype.updateMergedPropsIfNeeded=function(){var t=e(this.stateProps,this.dispatchProps,this.props);return!(this.mergedProps&&O&&(0,m.default)(t,this.mergedProps))&&(this.mergedProps=t,!0)},s.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},s.prototype.trySubscribe=function(){l&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},s.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},s.prototype.componentDidMount=function(){this.trySubscribe()},s.prototype.componentWillReceiveProps=function(t){_&&(0,m.default)(t,this.props)||(this.haveOwnPropsChanged=!0)},s.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},s.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},s.prototype.handleChange=function(){if(this.unsubscribe){var t=this.store.getState(),e=this.state.storeState;if(!_||e!==t){if(_&&!this.doStatePropsDependOnOwnProps){var n=u(this.updateStatePropsIfNeeded,this);if(!n)return;n===P&&(this.statePropsPrecalculationError=P.value),this.haveStatePropsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.setState({storeState:t})}}},s.prototype.getWrappedInstance=function(){return(0,E.default)(x,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},s.prototype.render=function(){var e=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,r=this.haveStatePropsBeenPrecalculated,i=this.statePropsPrecalculationError,o=this.renderedElement;if(this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1,this.haveStatePropsBeenPrecalculated=!1,this.statePropsPrecalculationError=null,i)throw i;var a=!0,s=!0;_&&o&&(a=n||e&&this.doStatePropsDependOnOwnProps,s=e&&this.doDispatchPropsDependOnOwnProps);var u=!1,l=!1;r?u=!0:a&&(u=this.updateStatePropsIfNeeded()),s&&(l=this.updateDispatchPropsIfNeeded());var f=!0;return f=!!(u||l||e)&&this.updateMergedPropsIfNeeded(),!f&&o?o:(x?this.renderedElement=(0,h.createElement)(t,c({},this.mergedProps,{ref:"wrappedInstance"})):this.renderedElement=(0,h.createElement)(t,this.mergedProps),this.renderedElement)},s}(h.Component);return r.displayName=n,r.WrappedComponent=t,r.contextTypes={store:p.default},r.propTypes={store:p.default},(0,w.default)(r,t)}}e.__esModule=!0;var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=l;var h=n(10),f=n(106),p=r(f),d=n(219),m=r(d),v=n(220),g=r(v),y=n(107),_=(r(y),n(69)),b=(r(_),n(201)),w=r(b),x=n(202),E=r(x),C=function(t){return{}},S=function(t){return{dispatch:t}},M=function(t,e,n){return c({},n,t,e)},P={value:null},T=0},function(t,e){"use strict";function n(t,e){if(t===e)return!0;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!i.call(e,n[o])||t[n[o]]!==e[n[o]])return!1;return!0}e.__esModule=!0,e.default=n},function(t,e,n){"use strict";function r(t){return function(e){return(0,i.bindActionCreators)(t,e)}}e.__esModule=!0,e.default=r;var i=n(92)},function(t,e,n){"undefined"==typeof Promise&&(n(248).enable(),window.Promise=n(247)),n(249),Object.assign=n(246)},function(t,e){(function(e){"use strict";function n(t){s.length||(a(),u=!0),s[s.length]=t}function r(){for(;l<s.length;){var t=l;if(l+=1,s[t].call(),l>c){for(var e=0,n=s.length-l;e<n;e++)s[e]=s[e+l];s.length-=l,l=0}}s.length=0,l=0,u=!1}function i(t){var e=1,n=new f(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}function o(t){return function(){function e(){clearTimeout(n),clearInterval(r),t()}var n=setTimeout(e,0),r=setInterval(e,50)}}t.exports=n;var a,s=[],u=!1,l=0,c=1024,h="undefined"!=typeof e?e:self,f=h.MutationObserver||h.WebKitMutationObserver;a="function"==typeof f?i(r):o(r),n.requestFlush=a,n.makeRequestCallFromTimer=o}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.intersect=e.chunkArray=e.divide=e.compound=e.clone=e.rectangle=e.circle=e.stroke=e.fill=e.unite=e.offsetPoints=e.svg=e.connectPoints=void 0;var i=n(105),o=r(i),a=n(184),s=r(a),u=n(104),l=r(u),c=(e.connectPoints=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000",!(arguments.length>3&&void 0!==arguments[3])||arguments[3]),n=new o.default.Path;n.moveTo(t[0]);for(var r=1;r<t.length;r++)n.lineTo(t[r]);return e&&n.closePath(),n},e.svg=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.exportSVG({asString:!1,bounds:null}).getAttribute("d");return e?n:'<path d="'+n+'" />'},e.offsetPoints=function(t,e){for(var n=new s.default.Clipper,r=[],i=0;i<t.length;i++)r.push({X:t[i][0],Y:t[i][1]});var o=n.OffsetPolygons([r],e,2,10,!0)[0];r=[];for(var a=0;a<o.length;a++)r.push([o[a].X,o[a].Y]);return r},e.unite=function(t){for(var e=l.default.flattenDeep(t),n=e[0],r=1;r<e.length;r++)n=n.unite(e[r]);return n},e.fill=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black";return t.fillColor=e,t},e.stroke=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black";return t.strokeColor=e,t},e.circle=function(t,e,n){return new o.default.Path.Circle(new o.default.Point(t,e),n)},e.rectangle=function(t,e,n,r){return new o.default.Path.Rectangle(t,e,n,r)},e.clone=function(t){return t.clone()});e.compound=function(t){var e=l.default.flattenDeep(t);return new o.default.CompoundPath({children:l.default.map(e,c)})},e.divide=function(t,e){return t.divide(e).children[1]},e.chunkArray=function(t,e){for(var n=0,r=t.length;n<r;n++)e.call(t,[t[n],n===t.length-1?t[0]:t[n+1]])},e.intersect=function(t){for(var e=l.default.flattenDeep(t),n=e[0],r=1;r<e.length;r++)n=n.subtract(e[r]);return n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(10),l=r(u),c=n(27),h=n(252),f=r(h),p=n(1),d=r(p),m=n(406),v=r(m),g=n(233),y=r(g),_=n(227),b=r(_),w=n(229),x=r(w),E=n(232),C=r(E),S=n(231),M=r(S),P=n(235),T=r(P),O=n(225),A=r(O),R=n(226),L=r(R),I=n(411),k=r(I),D=n(228),j=r(D),N=n(46),B=n(410)(d.default),F=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return window.showFrames=!1,r.cameraPosition=new d.default.Vector3(2.5,4,3),r.clippingHeight=2.5,r.clippingPlane=new d.default.Plane(new d.default.Vector3(0,(-1),0),r.clippingHeight),r.spotlightPosition=new d.default.Vector3((-20),20,10),r.spotlightLookAt=new d.default.Vector3(0,1,0),r.ambientLightPosition=new d.default.Vector3(0,5,0),r.balls=[],r.state={left:90,top:50,showMenu:!1,menuType:"ROOFING",mapVisible:!1},r.SELECTED=r.INTERSECTED=null,r.previousY=r.previousX=0,r.intersection=r.offset=new d.default.Vector3,r.plane=new d.default.Plane,r.mouse=new d.default.Vector2,r.raycaster=new d.default.Raycaster,r._onAnimate=r._onAnimate.bind(r),r.getRenderer=r.getRenderer.bind(r),r.onWindowResize=r.onWindowResize.bind(r),r.onMouseDown=r.onMouseDown.bind(r),r.onMouseMove=r.onMouseMove.bind(r),r.onRightClick=r.onRightClick.bind(r),r.onMouseUp=r.onMouseUp.bind(r),r.setMesh=r.setMesh.bind(r),r.setClippingHeight=r.setClippingHeight.bind(r),r.setLens=r.setLens.bind(r),r.switchControls=r.switchControls.bind(r),r.addBall=r.addBall.bind(r),r}return a(e,t),s(e,[{key:"addBall",value:function(t){this.balls.push(t)}},{key:"_onAnimate",value:function(){this.stats.update(),k.default.update(),this.controls.update()}},{key:"setClippingHeight",value:function(t){this.clippingPlane&&(this.clippingPlane.constant=t)}},{key:"switchControls",value:function(t){t?(this.refs.camera.position.set(0,10,0),this.controls.minPolarAngle=0,this.controls.maxPolarAngle=0,this.controls.enabled=!1):(this.controls.minPolarAngle=Math.PI/6,this.controls.maxPolarAngle=Math.PI/2.1,this.controls.enabled=!0)}},{key:"setLens",value:function(t){var e=new k.default.Tween(this.clippingPlane);switch(this.setState({mapVisible:!1}),t){case"GROUND":this.setState({mapVisible:!0}),this.switchControls(!0),e.to({constant:.01},100);break;case"BASIC":this.switchControls(!1),e.to({constant:2.5},200);break;case"CROSS":this.switchControls(!1),e.to({constant:.7},200);break;default:this.setClippingHeight(this.clippingHeight)}e.start()}},{key:"getRenderer",value:function(t){this.renderer=t,t.clippingPlanes=[this.clippingPlane]}},{key:"componentWillMount",value:function(){}},{key:"onWindowResize",value:function(){this.refs.camera.aspect=window.innerWidth/window.innerHeight,this.refs.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"onMouseMove",value:function(t){var e=this;if(this.mouse.x=t.clientX/this.renderer.domElement.width*2-1,this.mouse.y=2*-(t.clientY/this.renderer.domElement.height)+1,this.SELECTED&&this.plane.setFromNormalAndCoplanarPoint(this.refs.camera.getWorldDirection(this.plane.normal),this.SELECTED.position),this.balls.map(function(t){return t.refs.mesh===e.SELECTED?t.refs.mesh.material.color.setHex(3988304):t.refs.mesh.material.color.setHex(0)}),this.raycaster.setFromCamera(this.mouse,this.refs.camera),this.SELECTED&&this.raycaster.ray.intersectPlane(this.plane,this.intersection)){switch(this.SELECTED.position[this.SELECTED.name]=Math.min(Math.max(this.offset[this.SELECTED.name],.5),2),this.SELECTED.name){case"z":this.props.setLength(4*this.SELECTED.position[this.SELECTED.name]);break;case"y":this.props.setFrameData([]),this.props.setFrameHeight(2*this.SELECTED.position[this.SELECTED.name]),this.props.makeFramesAsync({width:this.props.width.toFixed(2),height:this.props.height.toFixed(2)});break;case"x":this.props.setFrameData([]),this.props.setFrameWidth(4*this.SELECTED.position[this.SELECTED.name]),this.props.makeFramesAsync({width:this.props.width.toFixed(2),height:this.props.height.toFixed(2)});break;default:console.log("NO")}this.props.getTotalsAsync({length:this.props.length,width:this.props.width,height:this.props.height})}var n=this.raycaster.intersectObjects(this.balls.map(function(t){return t.refs.mesh}));n.length>0?(n[0].object.material.color.setHex(3988304),this.SELECTED?this.renderer.domElement.style.cursor="-webkit-grabbing":this.renderer.domElement.style.cursor="-webkit-grab"):this.SELECTED||(this.renderer.domElement.style.cursor="auto")}},{key:"onMouseUp",value:function(t){this.SELECTED=null,this.controls.enabled=!0}},{key:"onMouseDown",value:function(t){this.raycaster.setFromCamera(this.mouse,this.refs.camera);var e=this.raycaster.intersectObjects(this.balls.map(function(t){return t.refs.mesh}));e.length>0&&(this.renderer.domElement.style.cursor="-webkit-grabbing",console.log(e[0]),this.controls.enabled=!1,this.SELECTED=e[0].object,this.SELECTED.object.material.color.setHex(16711680)),this.setState({showMenu:!1})}},{key:"onRightClick",value:function(t){console.log(t),console.log(this.buildingMesh),this.raycaster.setFromCamera(this.mouse,this.refs.camera);var e=this.raycaster.intersectObjects([this.buildingMesh]);e.length>0&&(console.log(),this.setState({left:t.clientX,top:t.clientY,showMenu:!0,menuType:e[0].face.normal.y>0?"ROOFING":"CLADDING"}))}},{key:"componentDidMount",value:function(){var t=document.getElementById("root"),e=document.getElementById("react-container"),n=new B(this.refs.camera,t);n.minPolarAngle=0,n.maxPolarAngle=Math.PI/2.1,n.maxDistance=9,n.minDistance=4,this.controls=n,this.stats=new v.default,window.addEventListener("resize",this.onWindowResize,!1),e.addEventListener("mousedown",this.onMouseDown,!1),e.addEventListener("mouseup",this.onMouseUp,!1),e.addEventListener("mousemove",this.onMouseMove,!1),e.addEventListener("contextmenu",this.onRightClick,!1)}},{key:"componentWillUnmount",value:function(){this.refs.controls.gui.destroy(),delete this.controls,delete this.stats}},{key:"setMesh",value:function(t){console.log("MESH",t),this.buildingMesh=t}},{key:"render",value:function(){var t=window.innerWidth,e=window.innerHeight;return l.default.createElement("div",{id:"container"},l.default.createElement("div",{id:"react-container"},l.default.createElement(f.default,{mainCamera:"camera",width:t,height:e,onAnimate:this._onAnimate,onRendererUpdated:this.getRenderer,shadowMapEnabled:!0,antialias:!0,clearColor:16185078},l.default.createElement("scene",null,l.default.createElement("perspectiveCamera",{name:"camera",ref:"camera",fov:75,aspect:t/e,near:.1,far:1e3,position:this.cameraPosition,lookAt:this.spotlightLookAt}),l.default.createElement("ambientLight",{position:this.ambientLightPosition,intensity:1}),l.default.createElement("spotLight",{position:this.spotlightPosition,lookAt:this.spotlightLookAt,castShadow:!0,intensity:.3}),l.default.createElement(L.default,{store:this.props.store,addBall:this.addBall}),l.default.createElement(b.default,{ref:"building",setMesh:this.setMesh,store:this.props.store,clippingPlane:this.clippingPlane}),l.default.createElement(C.default,{store:this.props.store,mapVisible:this.state.mapVisible}),l.default.createElement(M.default,null),l.default.createElement(A.default,{store:this.props.store}))),l.default.createElement(y.default,{store:this.props.store}),l.default.createElement(x.default,{store:this.props.store,clippingHeight:this.clippingHeight,setClippingHeight:this.setClippingHeight,ref:"controls"})),l.default.createElement(U,null),l.default.createElement(T.default,{setLens:this.setLens}),l.default.createElement(j.default,{left:this.state.left,top:this.state.top,store:this.props.store,showMenu:this.state.showMenu,menuType:this.state.menuType}))}}]),e}(l.default.Component),U=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){return!!window.location.hash.match("locked")&&l.default.createElement("div",{id:"locked-text"},l.default.createElement("img",{src:"https://image.flaticon.com/icons/svg/44/44594.svg",role:"presentation"}),"LOCKED")}}]),e}(l.default.Component),V=function(t){return{length:t.building.length,width:t.frame.width,height:t.frame.height}},z=function(t){return{getTotalsAsync:function(e){t((0,N.getTotalsAsync)(e))},setLength:function(e){t((0,N.setLength)(e))},setFrameHeight:function(e){t((0,N.setFrameHeight)(e))},setFrameWidth:function(e){t((0,N.setFrameWidth)(e))},makeFramesAsync:function(e){t((0,N.makeFramesAsync)(e))},setFrameData:function(e){t((0,N.setFrameData)(e))}}};e.default=(0,c.connect)(V,z)(F)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(10),l=r(u),c=n(27),h=n(1),f=(r(h),function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){return!1}}]),e}(l.default.Component)),p=function(t){return{length:t.building.length,width:t.frame.width}},d=function(t){return{}};e.default=(0,c.connect)(p,d)(f)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(10),l=r(u),c=n(1),h=r(c),f=n(27),p=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){if(window.location.hash.match("locked"))return!1;var t=[l.default.createElement(d,{name:"z",addBall:this.props.addBall,key:"front",linePoint:new h.default.Vector3(0,0,2),position:new h.default.Vector3(0,this.props.height,this.props.length)}),l.default.createElement(d,{name:"y",addBall:this.props.addBall,key:"mid",linePoint:new h.default.Vector3(0,2,0),position:new h.default.Vector3(0,this.props.height,0)}),l.default.createElement(d,{name:"x",addBall:this.props.addBall,key:"back",linePoint:new h.default.Vector3(2,0,0),position:new h.default.Vector3(this.props.width,.6*this.props.height,(-this.props.length))})];return l.default.createElement("group",null,t)}}]),e}(l.default.Component),d=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.state={selected:!1},r.setSelected=r.setSelected.bind(r),r}return a(e,t),s(e,[{key:"componentDidMount",value:function(){this.props.addBall(this)}},{key:"setSelected",value:function(t){this.setState({selected:t})}},{key:"render",value:function(){return l.default.createElement("group",null,l.default.createElement("line",{ref:"line"},l.default.createElement("geometry",{vertices:[this.props.linePoint.add(this.props.position),this.props.position]}),l.default.createElement("meshBasicMaterial",{color:0})),l.default.createElement("mesh",{ref:"mesh",position:this.props.position,name:this.props.name},l.default.createElement("sphereGeometry",{radius:.18,widthSegments:32,heightSegments:32}),l.default.createElement("meshBasicMaterial",{color:this.state.selected?3988304:0,side:h.default.DoubleSide})))}}]),e}(l.default.Component),m=function(t){return{length:t.building.length/4,height:t.frame.height/2,width:t.frame.width/4}},v=function(t){return{}};e.default=(0,f.connect)(m,v)(p)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(10),l=r(u),c=n(27),h=n(46),f=n(71),p=n(70),d=r(p),m=n(1),v=r(m),g=n(230),y=r(g),_=n(234),b=r(_),w=n(215),x=r(w),E=n(405),C=r(E),S=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"shouldComponentUpdate",value:function(t){return!(0,C.default)(this.props,t)}}]),e}(l.default.Component),M=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"componentWillMount",value:function(){this.props.getData()}},{key:"render",value:function(){return l.default.createElement("group",null,l.default.createElement(b.default,{
position:new v.default.Vector3(0,0,0),width:4,height:4,length:.1,color:16711680}),l.default.createElement(y.default,{position:new v.default.Vector3(.1,.45,-this.props.length/2-.1),width:.8,height:.8,length:.04,color:0}),l.default.createElement(y.default,{position:new v.default.Vector3((-.1),.45,this.props.length/2+.1),width:.8,height:.8,length:.04,color:0}),l.default.createElement(O,{bayCount:this.props.bayCount,length:this.props.length,frameData:this.props.frameData}),l.default.createElement(T,{path:this.props.frameSVG,setMesh:this.props.setMesh,claddingMaterial:this.props.claddingMaterial,roofingMaterial:this.props.roofingMaterial,bayCount:this.props.bayCount,length:this.props.length}),l.default.createElement(P,{roomPosition:this.props.roomPosition,path:this.props.frameSVG,bayCount:this.props.bayCount,hasRoom:this.props.hasRoom,length:this.props.length}))}}]),e}(S),P=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){if(!this.props.hasRoom)return!1;var t=this.props.length/this.props.bayCount,e=-this.props.length/2+t*this.props.roomPosition,n=(new d.default).transformSVGPath(this.props.path);return l.default.createElement("mesh",{position:new v.default.Vector3(0,0,e)},l.default.createElement("extrudeGeometry",{amount:2*t,bevelEnabled:!1},l.default.createElement("shape",null,n)),l.default.createElement("meshBasicMaterial",{color:"red",wireframe:!1,side:v.default.DoubleSide}))}}]),e}(S),T=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.doUpdates=r.doUpdates.bind(r),r}return a(e,t),s(e,[{key:"componentDidMount",value:function(){this.group=this.refs.group,this.doUpdates(this.props)}},{key:"doUpdates",value:function(t){for(var e=new v.default.ExtrudeGeometry(this.shape,{amount:t.length+.2,bevelEnabled:!1,steps:t.bayCount}),n=[t.claddingMaterial,t.roofingMaterial],r=0;r<e.faces.length;r++)e.faces[r].materialIndex=e.faces[r].normal.y>0?1:0;var i=new v.default.Mesh(e,new v.default.MeshFaceMaterial(n));i.castShadow=!0,i.position.setZ(-(t.length+.2)/2),this.group.children[0]=i,t.setMesh(i)}},{key:"componentWillReceiveProps",value:function(t){this.doUpdates(t)}},{key:"render",value:function(){return this.shape=(new d.default).transformSVGPath(this.props.path,!1),l.default.createElement("object3D",{ref:"group"})}}]),e}(S),O=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){this.frameboxes=[];for(var t=0;t<=this.props.bayCount;t++){var e=this.props.length/this.props.bayCount*t-this.props.length/2;this.frameboxes.push(l.default.createElement(A,{position:e,key:t,frameData:this.props.frameData}))}return l.default.createElement("group",null,this.frameboxes)}}]),e}(S),A=function(t){function e(t,n){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return a(e,t),s(e,[{key:"componentDidMount",value:function(){console.log("THING",this.props.frameData)}},{key:"render",value:function(){return this.frames=(0,x.default)({left:l.default.createElement(R,{position:-.05,frameData:this.props.frameData}),right:l.default.createElement(R,{position:.05,frameData:this.props.frameData})}),l.default.createElement("object3D",{position:new v.default.Vector3(0,0,this.props.position)},this.frames)}}]),e}(S),R=function(t){function e(t,n){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return a(e,t),s(e,[{key:"render",value:function(){var t=this;return l.default.createElement("group",null,this.props.frameData.map(function(e,n){return l.default.createElement(L,{path:e,position:t.props.position,key:n})}))}}]),e}(S),L=function(t){function e(t,n){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return a(e,t),s(e,[{key:"componentWillUpdate",value:function(){this.refs.mesh.visible=!0}},{key:"render",value:function(){var t=this.props.path;return this.shape=(new d.default).transformSVGPath(t),l.default.createElement("mesh",{position:new v.default.Vector3(0,0,this.props.position),ref:"mesh"},l.default.createElement("extrudeGeometry",{amount:4*p.SCALE,bevelEnabled:!1},l.default.createElement("shape",null,this.shape)),l.default.createElement("meshBasicMaterial",{color:"white",wireframe:!1}))}}]),e}(S),I=function(t){return{length:t.building.length/2,frameWidth:t.frame.width,frameHeight:t.frame.height,claddingMaterial:(0,f.claddingMaterialSelector)(t),roofingMaterial:(0,f.roofingMaterialSelector)(t),bayCount:(0,f.bayCountSelector)(t),frameSVG:(0,f.frameSelector)(t),hasRoom:t.building.hasRoom,roomPosition:t.building.roomPosition,frameData:t.frame.data}},k=function(t){return{getData:function(){t((0,h.getData)())}}};e.default=(0,c.connect)(I,k)(M)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(10),l=r(u),c=n(27),h=n(46),f=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this;if(0==this.props.showMenu)return!1;var e=void 0;return e="ROOFING"==this.props.menuType?l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("h3",null,"Roofing")),l.default.createElement("li",{onClick:function(){return t.props.setRoofing("STEEL")}},"Steel"),l.default.createElement("li",{onClick:function(){return t.props.setRoofing("EPDM")}},"EPDM"),l.default.createElement("li",{onClick:function(){return t.props.setRoofing("NONE")}},"None")):l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("h3",null,"Cladding")),l.default.createElement("li",{onClick:function(){return t.props.setCladding("RECYCLED_PLASTIC")}},"Recycled Plastic"),l.default.createElement("li",{onClick:function(){return t.props.setCladding("LARCH")}},"Larch"),l.default.createElement("li",{onClick:function(){return t.props.setCladding("WEATHERBOARD")}},"Weatherboard"),l.default.createElement("li",{onClick:function(){return t.props.setCladding("NONE")}},"None")),l.default.createElement("div",{id:"context-menu",style:{left:this.props.left+15+"px",top:this.props.top-35+"px"}},e)}}]),e}(l.default.Component),p=function(t){return{roofingMaterial:t.building.roofing,claddingMaterial:t.building.cladding}},d=function(t){return{setRoofing:function(e){t((0,h.setRoofing)(e))},setCladding:function(e){t((0,h.setCladding)(e))}}};e.default=(0,c.connect)(p,d)(f)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(10),l=r(u),c=n(27),h=n(46),f=n(71),p=n(185),d=r(p),m=function(t){function e(t,n){var r;i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));if(window.location.hash.match("locked"))return r=!1,o(a,r);var s=new d.default.GUI;s.closed=!0;var u={clippingHeight:a.props.clippingHeight,length:a.props.length,width:a.props.width,height:a.props.height,roofing:a.props.roofingMaterial,cladding:a.props.claddingMaterial,hasRoom:a.props.hasRoom,roomPosition:a.props.roomPosition},l={length:a.props.length,width:a.props.width,height:a.props.height},c=s.add(u,"clippingHeight",.1,2.5).step(.1);c.onChange(a.props.setClippingHeight),s.add(window,"showFrames");var h=s.addFolder("Dimensions"),f=h.add(u,"length",2,10).step(.3);f.onChange(function(t){a.props.setLength(t),a.props.getTotalsAsync(l)});var p=h.add(u,"width",2,4).step(.1);p.onChange(function(t){a.props.setWidth(t),a.props.getTotalsAsync(l)});var m=h.add(u,"height",2,4).step(.1);m.onChange(function(t){a.props.setHeight(t),a.props.getTotalsAsync(l)});var v=s.addFolder("Materials"),g=v.add(u,"roofing",{"STEEL (£25m²)":"STEEL","EPDM (£15m²)":"EPDM","NONE (£0)":"NONE"});g.onChange(a.props.setRoofing);var y=v.add(u,"cladding",{"RECYCLED PLASTIC (£20m²)":"RECYCLED_PLASTIC","LARCH (£40m²)":"LARCH","WEATHERBOARD (£25m²)":"WEATHERBOARD","NONE (£0)":"NONE"});y.onChange(a.props.setCladding);var _=s.addFolder("Room"),b=_.add(u,"hasRoom");b.onChange(a.props.setHasRoom);var w=_.add(u,"roomPosition",2,6).step(1);return w.onChange(function(t){return!(t>a.props.bayCount-4)&&void a.props.setRoomPosition(t)}),a}return a(e,t),s(e,[{key:"render",value:function(){return!1}}]),e}(l.default.Component),v=function(t){return{length:t.building.length,width:t.frame.width,height:t.frame.height,roofingMaterial:t.building.roofing,claddingMaterial:t.building.cladding,hasRoom:t.building.hasRoom,roomPosition:t.building.roomPosition,bayCount:(0,f.bayCountSelector)(t)}},g=function(t){return{setLength:function(e){t((0,h.setLength)(e))},getTotalsAsync:function(e){t((0,h.getTotalsAsync)(e))},setWidth:function(e){t((0,h.setFrameWidth)(e))},setHeight:function(e){t((0,h.setFrameHeight)(e))},setRoofing:function(e){t((0,h.setRoofing)(e))},setCladding:function(e){t((0,h.setCladding)(e))},setHasRoom:function(e){t((0,h.setHasRoom)(e))},setRoomPosition:function(e){t((0,h.setRoomPosition)(e))}}};e.default=(0,c.connect)(v,g)(m)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(10),l=r(u),c=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){return l.default.createElement("mesh",{position:this.props.position},l.default.createElement("boxGeometry",{width:this.props.width,height:this.props.height,depth:this.props.length}),l.default.createElement("meshBasicMaterial",{color:this.props.color}))}}]),e}(l.default.Component);e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(10),l=r(u),c=n(1),h=r(c),f=n(70),p=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"componentWillMount",value:function(){this.rotation=new h.default.Euler(270*f.DEGS_TO_RADS,0,0),this.position=new h.default.Vector3(0,(-.1),0)}},{key:"render",value:function(){return l.default.createElement("mesh",{rotation:this.rotation,position:this.position,receiveShadow:!1},l.default.createElement("meshBasicMaterial",{color:13421772,wireframe:!0,side:h.default.DoubleSide}),l.default.createElement("planeGeometry",{width:14,height:14,widthSegments:12,heightSegments:12}))}}]),e}(l.default.Component);e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(10),l=r(u),c=n(1),h=r(c),f=n(27),p=n(70),d=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"componentWillMount",value:function(){this.rotation=new h.default.Euler(270*p.DEGS_TO_RADS,0,0),this.position=new h.default.Vector3(0,(-.1),0),this.mapquestToken="MPklnE5qTp0V4UI8anLBAJjsEkf9ud82",this.imgSize=1024,this.mapZoom=18,this.mapIsPresent=this.mapIsPresent.bind(this)}},{key:"mapIsPresent",value:function(){return null!==this.props.textureURL}},{key:"render",value:function(){return!(!this.mapIsPresent()||!this.props.mapVisible)&&l.default.createElement("mesh",{rotation:this.rotation,position:this.position,receiveShadow:!0},l.default.createElement("meshBasicMaterial",{color:16185078,wireframe:!1,side:h.default.DoubleSide,transparent:!0,opacity:.5},l.default.createElement("texture",{url:this.props.textureURL})),l.default.createElement("planeGeometry",{width:50,height:50,widthSegments:1,heightSegments:1}))}}]),e}(l.default.Component),m=function(t){return{textureURL:t.data.static_map}};e.default=(0,f.connect)(m)(d)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(10),l=r(u),c=n(27),h=n(71),f=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){return l.default.createElement("div",{id:"hud"},l.default.createElement("p",null,"floor area: ",this.props.area.toFixed(1),"m²"),l.default.createElement("p",null,"roofing: ",this.props.roofArea.toFixed(1),"m² / £",parseInt(this.props.roofTotal,10)),l.default.createElement("p",null,"cladding: ",this.props.claddingArea.toFixed(1),"m² / £",parseInt(this.props.claddingTotal,10)),l.default.createElement("p",null,"frames: ",this.props.frameBoxCount),l.default.createElement("p",null,"total: £",this.props.total.toFixed(2)))}}]),e}(l.default.Component),p=function(t){return{total:t.building.total,area:(0,h.buildingAreaSelector)(t),roofArea:(0,h.roofingAreaSelector)(t),roofTotal:(0,h.roofingTotalSelector)(t),claddingArea:(0,h.claddingAreaSelector)(t),claddingTotal:(0,h.claddingTotalSelector)(t),frameBoxCount:(0,h.frameBoxCountSelector)(t)}},d=function(t){return{}};e.default=(0,c.connect)(p,d)(f)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(10),l=r(u),c=n(1),h=(r(c),function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return!1}}]),e}(l.default.Component));e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(10),l=r(u),c=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this;return l.default.createElement("div",{id:"lens-buttons"},l.default.createElement("ul",null,l.default.createElement("li",null,l.default.createElement("a",{onClick:function(){return t.props.setLens("GROUND")}},"Ground")),l.default.createElement("li",null,l.default.createElement("a",{onClick:function(){return t.props.setLens("CROSS")}},"Cross-Section")),l.default.createElement("li",null,l.default.createElement("a",{onClick:function(){return t.props.setLens("BASIC")}},"Basic"))))}}]),e}(l.default.Component);e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(10),o=r(i),a=n(216),s=r(a),u=n(92),l=n(161),c=r(l),h=n(240),f=r(h),p=n(224),d=r(p),m=n(400),v=r(m),g=n(241),y=r(g),_=(0,c.default)(),b=[(0,u.applyMiddleware)(_),(0,u.applyMiddleware)(v.default)];window.__REDUX_DEVTOOLS_EXTENSION__&&b.push(window.__REDUX_DEVTOOLS_EXTENSION__());var w=(0,u.createStore)(f.default,u.compose.apply(void 0,b));_.run(y.default),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__.updateStore(w),s.default.render(o.default.createElement(d.default,{store:w}),document.getElementById("root"))},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{roofing:"EPDM",cladding:"LARCH",length:5,hasRoom:!1,roomPosition:2,total:0},e=arguments[1];switch(e.type){case"SET_TOTAL":return n({},t,{total:e.payload});case"SET_LENGTH":return n({},t,{length:e.payload});case"SET_ROOFING":return n({},t,{roofing:e.payload});case"SET_CLADDING":return n({},t,{cladding:e.payload});case"SET_HAS_ROOM":return n({},t,{hasRoom:e.payload});case"SET_ROOM_POSITION":return n({},t,{roomPosition:e.payload});default:return t}};e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:0,site:[],static_map:"",costings:{total:0,categories:[]}},e=arguments[1];switch(e.type){case"SET_DATA":return e.payload;default:return t}};e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:3,height:3,data:[]},e=arguments[1];switch(e.type){case"SET_FRAME_DATA":return n({},t,{data:e.payload});case"SET_FRAME_WIDTH":return n({},t,{width:e.payload});case"SET_FRAME_HEIGHT":return n({},t,{height:e.payload});default:return t}};e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(92),o=n(237),a=r(o),s=n(238),u=r(s),l=n(239),c=r(l);e.default=(0,i.combineReducers)({data:u.default,frame:c.default,building:a.default})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e,n,r;return c.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,h.delay)(200);case 2:return e=window.location.hash.match(/\d+/)[0],n="https://beaver.build-os.com/basic/"+t.payload.width+"/"+t.payload.height,i.prev=4,i.next=7,(0,f.call)(m.default,n);case 7:return r=i.sent,i.next=10,(0,f.put)({type:"SET_FRAME_DATA",payload:r});case 10:i.next=14;break;case 12:i.prev=12,i.t0=i.catch(4);case 14:case"end":return i.stop()}},v[0],this,[[4,12]])}function o(){return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,h.takeLatest)("MAKE_FRAMES_ASYNC",i);case 2:case"end":return t.stop()}},v[1],this)}function a(t){var e,n,r;return c.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,h.delay)(200);case 2:return e=window.location.hash.match(/\d+/)[0],n="https://build-os.com/p/"+e+"/costings.json",i.prev=4,i.next=7,(0,f.call)(m.default,n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({costings:t.payload})});case 7:return r=i.sent,i.next=10,(0,f.put)({type:"SET_TOTAL",payload:r.total});case 10:i.next=14;break;case 12:i.prev=12,i.t0=i.catch(4);case 14:case"end":return i.stop()}},v[2],this,[[4,12]])}function s(){return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,h.takeLatest)("GET_TOTALS_ASYNC",a);case 2:case"end":return t.stop()}},v[3],this)}function u(){return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,[s(),o()];case 2:case"end":return t.stop()}},v[4],this)}Object.defineProperty(e,"__esModule",{value:!0});var l=n(243),c=r(l);e.makeFramesAsync=i,e.watchMakeFrames=o,e.getTotalsAsync=a,e.watchGetTotals=s,e.default=u;var h=n(161),f=n(395),p=n(93),d=(r(p),n(242)),m=r(d),v=(n(108),[i,o,a,s,u].map(c.default.mark))},function(t,e,n){"use strict";function r(t){return t.json()}function i(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e}function o(t,e){return fetch(t,e).then(i).then(r)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o,n(412)},function(t,e,n){t.exports=n(244)},function(t,e,n){(function(e){var r="object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this,i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(245),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(a){r.regeneratorRuntime=void 0}}).call(e,function(){return this}())},function(t,e,n){(function(e,n){!function(e){"use strict";function r(t,e,n,r){var i=Object.create((e||o).prototype),a=new d(r||[]);return i._invoke=h(t,n,a),i}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function o(){}function a(){}function s(){}function u(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){this.arg=t}function c(t){function e(n,r,o,a){var s=i(t[n],t,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c instanceof l?Promise.resolve(c.arg).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},a)}a(s.arg)}function r(t,n){function r(){return new Promise(function(r,i){e(t,n,r,i)})}return o=o?o.then(r,r):r()}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var o;this._invoke=r}function h(t,e,n){var r=C;return function(o,a){if(r===M)throw new Error("Generator is already running");if(r===P){if("throw"===o)throw a;return v()}for(;;){var s=n.delegate;if(s){if("return"===o||"throw"===o&&s.iterator[o]===g){n.delegate=null;var u=s.iterator.return;if(u){var l=i(u,s.iterator,a);if("throw"===l.type){o="throw",a=l.arg;continue}}if("return"===o)continue}var l=i(s.iterator[o],s.iterator,a);if("throw"===l.type){n.delegate=null,o="throw",a=l.arg;continue}o="next",a=g;var c=l.arg;if(!c.done)return r=S,c;n[s.resultName]=c.value,n.next=s.nextLoc,n.delegate=null}if("next"===o)n.sent=n._sent=a;else if("throw"===o){if(r===C)throw r=P,a;n.dispatchException(a)&&(o="next",a=g)}else"return"===o&&n.abrupt("return",a);r=M;var l=i(t,e,n);if("normal"===l.type){r=n.done?P:S;var c={value:l.arg,done:n.done};if(l.arg!==T)return c;n.delegate&&"next"===o&&(a=g)}else"throw"===l.type&&(r=P,o="throw",a=l.arg)}}}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function p(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function m(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(y.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=g,e.done=!0,e};return r.next=r}}return{next:v}}function v(){return{value:g,done:!0}}var g,y=Object.prototype.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},b=_.iterator||"@@iterator",w=_.toStringTag||"@@toStringTag",x="object"==typeof t,E=e.regeneratorRuntime;if(E)return void(x&&(t.exports=E));E=e.regeneratorRuntime=x?t.exports:{},E.wrap=r;var C="suspendedStart",S="suspendedYield",M="executing",P="completed",T={},O=s.prototype=o.prototype;a.prototype=O.constructor=s,s.constructor=a,s[w]=a.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,w in t||(t[w]="GeneratorFunction")),t.prototype=Object.create(O),t},E.awrap=function(t){return new l(t)},u(c.prototype),E.async=function(t,e,n,i){var o=new c(r(t,e,n,i));return E.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},u(O),O[b]=function(){return this},O[w]="Generator",O.toString=function(){return"[object Generator]"},E.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},E.values=m,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.tryEntries.forEach(p),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?this.next=i.finallyLoc:this.complete(o),T},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),p(n),T}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;p(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:m(t),resultName:e,nextLoc:n},T}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(34))},7,function(t,e,n){"use strict";function r(t){var e=new i(i._61);return e._81=1,e._65=t,e}var i=n(109);t.exports=i;var o=r(!0),a=r(!1),s=r(null),u=r(void 0),l=r(0),c=r("");i.resolve=function(t){
if(t instanceof i)return t;if(null===t)return s;if(void 0===t)return u;if(t===!0)return o;if(t===!1)return a;if(0===t)return l;if(""===t)return c;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new i(e.bind(t))}catch(n){return new i(function(t,e){e(n)})}return r(t)},i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,n){function r(a,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._81;)s=s._65;return 1===s._81?r(a,s._65):(2===s._81&&n(s._65),void s.then(function(t){r(a,t)},n))}var u=s.then;if("function"==typeof u){var l=new i(u.bind(s));return void l.then(function(t){r(a,t)},n)}}e[a]=s,0===--o&&t(e)}if(0===e.length)return t([]);for(var o=e.length,a=0;a<e.length;a++)r(a,e[a])})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){t.forEach(function(t){i.resolve(t).then(e,n)})})},i.prototype.catch=function(t){return this.then(null,t)}},function(t,e,n){"use strict";function r(){l=!1,s._10=null,s._97=null}function i(t){function e(e){(t.allRejections||a(h[e].error,t.whitelist||u))&&(h[e].displayId=c++,t.onUnhandled?(h[e].logged=!0,t.onUnhandled(h[e].displayId,h[e].error)):(h[e].logged=!0,o(h[e].displayId,h[e].error)))}function n(e){h[e].logged&&(t.onHandled?t.onHandled(h[e].displayId,h[e].error):h[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+h[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+h[e].displayId+".")))}t=t||{},l&&r(),l=!0;var i=0,c=0,h={};s._10=function(t){2===t._81&&h[t._72]&&(h[t._72].logged?n(t._72):clearTimeout(h[t._72].timeout),delete h[t._72])},s._97=function(t,n){0===t._45&&(t._72=i++,h[t._72]={displayId:null,error:n,timeout:setTimeout(e.bind(null,t._72),a(n,u)?100:2e3),logged:!1})}}function o(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):");var n=(e&&(e.stack||e))+"";n.split("\n").forEach(function(t){console.warn("  "+t)})}function a(t,e){return e.some(function(e){return t instanceof e})}var s=n(109),u=[ReferenceError,TypeError,RangeError],l=!1;e.disable=r,e.enable=i},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return m.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader;return e.readAsArrayBuffer(t),a(e)}function u(t){var e=new FileReader;return e.readAsText(t),a(e)}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(m.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(m.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(t){if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob?(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=o(this);return t?t:Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t){var e=t.toUpperCase();return v.indexOf(e)>-1?e:t}function h(t,e){e=e||{};var n=e.body;if(h.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=c(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function p(t){var e=new i,n=(t.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();e.append(r,i)}),e}function d(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof i?e.headers:new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var m={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];i||(i=[],this.map[t]=i),i.push(r)},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},i.prototype.getAll=function(t){return this.map[e(t)]||[]},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=[n(r)]},i.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},m.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this)},l.call(h.prototype),l.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},d.error=function(){var t=new d(null,{status:0,statusText:""});return t.type="error",t};var g=[301,302,303,307,308];d.redirect=function(t,e){if(g.indexOf(e)===-1)throw new RangeError("Invalid status code");return new d(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=h,t.Response=d,t.fetch=function(t,e){return new Promise(function(n,r){function i(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var o;o=h.prototype.isPrototypeOf(t)&&!e?t:new h(t,e);var a=new XMLHttpRequest;a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:p(a),url:i()},e="response"in a?a.response:a.responseText;n(new d(e,t))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials&&(a.withCredentials=!0),"responseType"in a&&m.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(324),a=r(o),s=n(310),u=r(s),l=n(330),c=r(l),h=n(322),f=r(h),p=n(18),d=r(p),m=n(314),v=r(m),g=n(312),y=r(g),_=n(313),b=r(_),w=n(311),x=r(w),E=n(51),C=r(E),S=n(319),M=r(S),P=n(320),T=r(P),O=n(321),A=r(O),R=n(323),L=r(R),I=n(293),k=r(I),D=n(294),j=r(D),N=n(296),B=r(N),F=n(295),U=r(F),V=n(326),z=r(V),G=n(123),H=r(G),W=n(327),X=r(W),q=n(329),Y=r(q),K=n(328),Z=r(K),J=n(268),Q=r(J),$=n(262),tt=r($),et=n(261),nt=r(et),rt=n(287),it=r(rt),ot=n(272),at=r(ot),st=n(273),ut=r(st),lt=n(274),ct=r(lt),ht=n(275),ft=r(ht),pt=n(269),dt=r(pt),mt=n(271),vt=r(mt),gt=n(288),yt=r(gt),_t=n(264),bt=r(_t),wt=n(263),xt=r(wt),Et=n(276),Ct=r(Et),St=n(265),Mt=r(St),Pt=n(270),Tt=r(Pt),Ot=n(290),At=r(Ot),Rt=n(291),Lt=r(Rt),It=n(267),kt=r(It),Dt=n(292),jt=r(Dt),Nt=n(266),Bt=r(Nt),Ft=n(289),Ut=r(Ft),Vt=n(277),zt=r(Vt),Gt=n(285),Ht=r(Gt),Wt=n(283),Xt=r(Wt),qt=n(282),Yt=r(qt),Kt=n(280),Zt=r(Kt),Jt=n(284),Qt=r(Jt),$t=n(278),te=r($t),ee=n(279),ne=r(ee),re=n(281),ie=r(re),oe=n(286),ae=r(oe),se=n(304),ue=r(se),le=n(299),ce=r(le),he=n(303),fe=r(he),pe=n(301),de=r(pe),me=n(121),ve=r(me),ge=n(305),ye=r(ge),_e=n(307),be=r(_e),we=n(325),xe=r(we),Ee=n(309),Ce=r(Ee),Se=n(308),Me=r(Se),Pe=n(297),Te=r(Pe),Oe=n(298),Ae=r(Oe),Re=n(300),Le=r(Re),Ie=n(302),ke=r(Ie),De=n(306),je=r(De),Ne=n(317),Be=r(Ne),Fe=n(316),Ue=r(Fe),Ve=n(315),ze=r(Ve),Ge=n(318),He=r(Ge),We=function t(e){i(this,t),this.react3RendererInstance=e,this.descriptors={react3:new a.default(e),module:new u.default(e),viewport:new c.default(e),scene:new f.default(e),object3D:new d.default(e),group:new v.default(e),orthographicCamera:new y.default(e),perspectiveCamera:new b.default(e),cubeCamera:new x.default(e),mesh:new C.default(e),line:new M.default(e),lineSegments:new T.default(e),points:new A.default(e),sprite:new L.default(e),meshBasicMaterial:new ce.default(e),meshPhongMaterial:new fe.default(e),meshLambertMaterial:new de.default(e),pointsMaterial:new ue.default(e),shaderMaterial:new ve.default(e),rawShaderMaterial:new ye.default(e),lineBasicMaterial:new Te.default(e),lineDashedMaterial:new Ae.default(e),meshDepthMaterial:new Le.default(e),meshNormalMaterial:new ke.default(e),spriteMaterial:new je.default(e),texture:new be.default(e),geometry:new Q.default(e),bufferGeometry:new tt.default(e),boxGeometry:new nt.default(e),sphereGeometry:new it.default(e),parametricGeometry:new at.default(e),planeBufferGeometry:new ut.default(e),planeGeometry:new ct.default(e),polyhedronGeometry:new ft.default(e),icosahedronGeometry:new dt.default(e),octahedronGeometry:new vt.default(e),tetrahedronGeometry:new yt.default(e),circleGeometry:new bt.default(e),circleBufferGeometry:new xt.default(e),ringGeometry:new Ct.default(e),cylinderGeometry:new Mt.default(e),latheGeometry:new Tt.default(e),torusGeometry:new At.default(e),torusKnotGeometry:new Lt.default(e),extrudeGeometry:new kt.default(e),tubeGeometry:new jt.default(e),dodecahedronGeometry:new Bt.default(e),textGeometry:new Ut.default(e),shapeGeometry:new zt.default(e),shape:new Ht.default(e),moveTo:new Xt.default(e),lineTo:new Yt.default(e),bezierCurveTo:new Zt.default(e),quadraticCurveTo:new Qt.default(e),absArc:new te.default(e),absEllipse:new ne.default(e),hole:new ie.default(e),splineThru:new ae.default(e),ambientLight:new k.default(e),directionalLight:new j.default(e),spotLight:new B.default(e),pointLight:new U.default(e),resources:new z.default(e),materialResource:new xe.default(e),geometryResource:new H.default(e),shapeGeometryResource:new X.default(e),textureResource:new Y.default(e),shapeResource:new Z.default(e),uniforms:new Ce.default(e),uniform:new Me.default(e),cameraHelper:new Be.default(e),axisHelper:new Ue.default(e),arrowHelper:new ze.default(e),gridHelper:new He.default(e)}};t.exports=We},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){return t}function s(t,e){console.log("deleteListener",t,e)}function u(t,e,n,r){console.log("enqueuePutListener",t,e,n,r)}function l(t,e,n){t.splice(n,0,t.splice(e,1)[0])}var c,h,f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p=n(29),d=r(p),m=n(143),v=r(m),g=n(6),y=r(g),_=n(127),b=r(_),w=n(153),x=r(w),E=n(20),C=(r(E),n(12)),S=(r(C),n(15)),M=r(S),P=n(147),T=r(P),O=n(112),A=r(O),R=n(75),L=r(R),I=n(114),k=r(I),D=n(113),j=r(D),N=function t(){var e=this;o(this,t),this.wantRemount=!1,this.onTrigger=function(){},this.trigger=function(){e.wantRemount=!0,e.onTrigger()}},B={},F=(b.default,b.default,function(t){return t.threeObject}),U=v.default.Mixin,V=(h=c=function(){function t(e,n){var r=this;o(this,t),this.updateChildren=U.updateChildren.bind(this),this._mountChildAtIndex=U._mountChildAtIndex.bind(this),this._unmountChild=U._unmountChild.bind(this),this.unmountChildren=U.unmountChildren.bind(this),this._currentElement=e,this._react3RendererInstance=n,this._elementType=e.type,this._renderedChildren=[],this._hostMarkup=null,this._hostParent=null,this._rootNodeID=0,this._hostID=0,this._hostContainerInfo=null,this._threeObject=null,this._topLevelWrapper=null,this._markup=null,this._nodeWithLegacyProperties=null,this._forceRemountOfComponent=!1,this._flags=0,this.threeElementDescriptor=n.threeElementDescriptors[e.type],this.threeElementDescriptor||(0,y.default)(!1),"true"==={NODE_ENV:"production",PUBLIC_URL:"/builder",REACT_APP_API_HOST:"https://build-os.com",REACT_APP_BEAVER_HOST:"https://beaver.build-os.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",REACT_APP_MAPBOX_MAP_ID:"mapbox.streets",REACT_APP_MAPQUEST_TOKEN:"MPklnE5qTp0V4UI8anLBAJjsEkf9ud82"}.ENABLE_REACT_ADDON_HOOKS&&(this.highlightComponent=function(){r.threeElementDescriptor.highlight(r._threeObject)},this.hideHighlight=function(){r.threeElementDescriptor.hideHighlight(r._threeObject)}),this.remountTrigger=new N,this.remountTrigger.onTrigger=function(){r._forceRemountOfComponent=!0}}return f(t,[{key:"getHostMarkup",value:function(){return this._markup}},{key:"getHostNode",value:function(){return this._markup}},{key:"mountComponent",value:function(t,e,n,r){var o;this._rootNodeID=this._react3RendererInstance.globalIdCounter++,this._hostID=n._idCounter++,this._hostParent=e,this._hostContainerInfo=n;var a=this._currentElement;this._threeObject=this.threeElementDescriptor.construct(a.props),this.threeElementDescriptor.applyInitialProps(this._threeObject,a.props),this.threeElementDescriptor.placeRemountTrigger(this._threeObject,this.remountTrigger.trigger);var s=a.props.children,u=void 0;u=s?this.mountChildren(s,t,r):[];var l=(o={},i(o,L.default,this._hostID),i(o,"_rootInstance",null),i(o,"elementType",a.type),i(o,"threeObject",this._threeObject),i(o,"parentMarkup",null),i(o,"childrenMarkup",u),i(o,"toJSON",function(){return"---MARKUP---"}),o);(0,y.default)(!!this._threeObject.userData),Object.assign(this._threeObject.userData,{object3D:this._threeObject,react3internalComponent:this,toJSON:function(){return"---USERDATA---"},markup:l});var c=this._react3RendererInstance.threeElementDescriptors;if(u&&u.length>0){this.threeElementDescriptor.addChildren(this._threeObject,u.map(F));for(var h=0;h<u.length;++h){var f=u[h],p=c[f.elementType];f.parentMarkup=l,p.setParent(f.threeObject,this._threeObject)}}return this._markup=l,j.default.precacheMarkup(this,this._markup),this._flags|=A.default.hasCachedChildMarkups,l}},{key:"_reconcilerInstantiateChildren",value:function(t,e,n){return this._react3RendererInstance.instantiateChildren(t,e,n,0)}},{key:"_reconcilerUpdateChildren",value:function(t,e,n,r,i,o){var a=void 0,s=0;return a=(0,x.default)(e,s),this._react3RendererInstance.updateChildren(t,a,n,r,i,this,this._hostContainerInfo,o,s),a}},{key:"mountChildren",value:function(t,e,n){var r=this._reconcilerInstantiateChildren(t,e,n);this._renderedChildren=r;var i=[],o=0;if(r)for(var a=Object.keys(r),s=0;s<a.length;++s){var u=a[s],l=r[u],c=0,h=d.default.mountComponent(l,e,this,this._hostContainerInfo,n,c);l._mountIndex=o,i.push(h),o++}return i}},{key:"moveChild",value:function(t,e,n){if(t._mountIndex!==e){this.threeElementDescriptor.moveChild(this._threeObject,t._threeObject,e,t._mountIndex);var r=this._markup;l(r.childrenMarkup,n,e)}}},{key:"receiveComponent",value:function(t,e,n){var r=this._currentElement;this._currentElement=t,this.updateComponent(e,r,t,n),this._forceRemountOfComponent&&(this._currentElement=null)}},{key:"updateComponent",value:function(t,e,n,r){var i=e.props,o=this._currentElement.props;e.type!==n.type&&(0,y.default)(!1),this._updateObjectProperties(i,o,t,r),this._forceRemountOfComponent||this._updateChildrenObjects(o,t,a(r,this))}},{key:"_updateChildrenObjects",value:function(t,e,n){var r=t.children||null;this.updateChildren(r,e,n)}},{key:"_updateObjectProperties",value:function(t,e,n){var r=this.remountTrigger;r.wantRemount=!1,this.threeElementDescriptor.beginPropertyUpdates(this._threeObject);for(var i=Object.keys(t),o=0;o<i.length;++o){var a=i[o];if(!e.hasOwnProperty(a)&&"children"!==a){if(r.wantRemount)break;B.hasOwnProperty(a)?t[a]&&s(this._rootNodeID,a):this.threeElementDescriptor.deleteProperty(this._threeObject,a)}}for(var l=Object.keys(e),c=0;c<l.length;++c){var h=l[c];if("children"!==h){if(r.wantRemount)break;var f=e[h],p=t[h];f!==p&&(B.hasOwnProperty(h)?f?u(this._rootNodeID,h,f,n):p&&s(this._rootNodeID,h):this.threeElementDescriptor.updateProperty(this._threeObject,h,f))}}this.threeElementDescriptor.completePropertyUpdates(this._threeObject)}},{key:"_removeAllChildRefs",value:function(){var t=this._renderedChildren;if(t)for(var e=Object.keys(t),n=0;n<e.length;++n){var r=e[n],i=t[r];i&&i._currentElement&&i._currentElement.ref&&(T.default.detachRefs(i,i._currentElement),i._currentElement=M.default.cloneElement(i._currentElement,{ref:null})),i._removeAllChildRefs()}}},{key:"unmountComponent",value:function(t){if(null!==this._threeObject&&this.threeElementDescriptor.componentWillUnmount(this._threeObject),this._forceRemountOfComponent&&this._removeAllChildRefs(),this.unmountChildren(t),j.default.uncacheMarkup(this),null!==this._threeObject&&this.threeElementDescriptor.unmount(this._threeObject),this._markup=null,this._rootNodeID=0,this._nodeWithLegacyProperties){var e=this._nodeWithLegacyProperties;e._reactInternalComponent=null,this._nodeWithLegacyProperties=null}}},{key:"emptyJson",value:function(){return"..."}},{key:"getPublicInstance",value:function(){return this._markup.threeObject}},{key:"_updateChildren",value:function(t,e,n){var r=this._renderedChildren,i={},o=[],a=this._reconcilerUpdateChildren(r,t,o,i,e,n);if(a||r){var s=this.remountTrigger;s.wantRemount=!1,this.threeElementDescriptor.beginChildUpdates(this._threeObject);var u=0,l=0,c=0;if(a)for(var h=Object.keys(a),f=0;f<h.length;++f){var p=h[f];if(!s.wantRemount){var d=r&&r[p],m=a[p];if(d===m)this.moveChild(d,u,l),l=Math.max(d._mountIndex,l),d._mountIndex=u;else{if(d){l=Math.max(d._mountIndex,l);var v=i[p];(0,y.default)(!!v,"Removed markup map should contain this child"),delete i[p],this._unmountChild(d,v)}s.wantRemount||(this._mountChildAtIndex(m,o[c],null,u,e,n),c++)}u++}}for(var g=Object.keys(i),_=0;_<g.length;++_){var b=g[_];this._unmountChild(r[b],i[b])}this._renderedChildren=a,this.threeElementDescriptor.completeChildUpdates(this._threeObject)}}},{key:"createChild",value:function(t,e,n){var r=t._mountIndex;this._markup.childrenMarkup.splice(r,0,n),n.parentMarkup=this._markup,this.threeElementDescriptor.addChild(this._threeObject,n.threeObject,r);var i=this._react3RendererInstance.threeElementDescriptors[n.elementType];i.setParent(n.threeObject,this._threeObject)}},{key:"removeChild",value:function(e,n){this.threeElementDescriptor.removeChild(this._threeObject,n.threeObject),e instanceof t?e.threeElementDescriptor.removedFromParent(n.threeObject):e instanceof k.default?n.threeObject.userData.react3internalComponent.threeElementDescriptor.removedFromParent(n.threeObject):(0,y.default)(!1);for(var r=this._markup.childrenMarkup,i=0;i<r.length;i++){var o=r[i];if(o.threeObject===n.threeObject)return r.splice(i,1),void delete o.parentMarkup}(0,y.default)(!1)}}]),t}(),c.displayName="React3Component",h);t.exports=V},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,u,l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=n(10),f=r(h),p=n(345),d=r(p),m=n(1),v=r(m),g=n(47),y=r(g),_=n(9),b=r(_),w=f.default.PropTypes,x=(u=s=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.shouldComponentUpdate=d.default.shouldComponentUpdate,r._onRecreateCanvas=function(){r.setState({canvasKey:r.state.canvasKey+1})},r._canvasRef=function(t){r._canvas=t,r.props.canvasRef&&r.props.canvasRef(t)},r.state={canvasKey:0},r}return a(e,t),c(e,[{key:"componentDidMount",value:function(){this.react3Renderer=new y.default,this._render()}},{key:"componentWillReceiveProps",value:function(t){var e=this.props;e.canvasRef!==t.canvasRef&&(e.canvasRef&&e.canvasRef(null),t.canvasRef&&t.canvasRef(this._canvas))}},{key:"componentDidUpdate",value:function(){this._render()}},{key:"componentWillUnmount",value:function(){this.react3Renderer.dispose(),delete this.react3Renderer}},{key:"_render",value:function(){var t=this._canvas,e=l({},this.props);delete e.canvasStyle,delete e.canvasRef,this.react3Renderer.render(f.default.createElement("react3",l({},e,{onRecreateCanvas:this._onRecreateCanvas}),this.props.children),t)}},{key:"render",value:function(){var t=this.state.canvasKey;return f.default.createElement("canvas",{ref:this._canvasRef,key:t,width:this.props.width,height:this.props.height,style:l({},this.props.canvasStyle,{width:this.props.width,height:this.props.height})})}}]),e}(f.default.Component),s.propTypes={context:w.string,width:w.number.isRequired,height:w.number.isRequired,children:w.any,canvasStyle:w.any,gammaInput:w.bool,gammaOutput:w.bool,sortObjects:w.bool,mainCamera:w.string,onAnimate:w.func,clearColor:w.oneOfType([(0,b.default)(v.default.Color),w.number,w.string]),shadowMapEnabled:w.bool,shadowMapType:w.oneOf([v.default.BasicShadowMap,v.default.PCFShadowMap,v.default.PCFSoftShadowMap]),shadowMapCullFace:w.oneOf([v.default.CullFaceNone,v.default.CullFaceBack,v.default.CullFaceFront,v.default.CullFaceFrontBack]),shadowMapDebug:w.bool,pixelRatio:w.number,antialias:w.oneOfType([w.bool,w.number]),canvasRef:w.func},s.defaultProps={context:"3d"},s.findTHREEObject=y.default.findTHREEObject,s.eventDispatcher=y.default.eventDispatcher,u);t.exports=x},function(t,e){"use strict";function n(t,e){var n={_topLevelWrapper:t,_idCounter:1};return n}t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=(r(u),n(22)),c=r(l),h=function(t){function e(t,n,r,a,s,u){i(this,e);var l=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.x=t,l.y=n,l.radius=r,l.startAngle=a,l.endAngle=s,l.clockwise=u,l}return a(e,t),s(e,[{key:"performAction",value:function(t){t.absarc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.clockwise)}}]),e}(c.default);t.exports=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=(r(u),n(22)),c=r(l),h=function(t){function e(t,n,r,a,s,u,l,c){i(this,e);var h=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return h.x=t,h.y=n,h.xRadius=r,h.yRadius=a,h.startAngle=s,h.endAngle=u,h.clockwise=l,h.rotation=c,h}return a(e,t),s(e,[{key:"performAction",value:function(t){t.absellipse(this.x,this.y,this.xRadius,this.yRadius,this.startAngle,this.endAngle,this.clockwise,this.rotation)}}]),e}(c.default);t.exports=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=(r(u),n(22)),c=r(l),h=function(t){function e(t,n,r,a,s,u){i(this,e);var l=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return l.cp1X=t,l.cp1Y=n,l.cp2X=r,l.cp2Y=a,l.aX=s,l.aY=u,l}return a(e,t),s(e,[{key:"performAction",value:function(t){t.bezierCurveTo(this.cp1X,this.cp1Y,this.cp2X,this.cp2Y,this.aX,this.aY)}}]),e}(c.default);t.exports=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=(r(u),n(22)),c=r(l),h=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.x=t,r.y=n,r}return a(e,t),s(e,[{key:"performAction",value:function(t){t.lineTo(this.x,this.y)}}]),e}(c.default);t.exports=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=(r(u),n(22)),c=r(l),h=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.x=t,r.y=n,r}return a(e,t),s(e,[{key:"performAction",value:function(t){t.moveTo(this.x,this.y)}}]),e}(c.default);t.exports=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=(r(u),n(22)),c=r(l),h=function(t){function e(t,n,r,a){i(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.cpX=t,
s.cpY=n,s.x=r,s.y=a,s}return a(e,t),s(e,[{key:"performAction",value:function(t){t.quadraticCurveTo(this.cpX,this.cpY,this.x,this.y)}}]),e}(c.default);t.exports=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=(r(u),n(22)),c=r(l),h=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.points=t,n}return a(e,t),s(e,[{key:"performAction",value:function(t){t.splineThru(this.points)}}]),e}(c.default);t.exports=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(11),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["width","height","depth"].forEach(function(t){n.hasProp(t,{type:h.default.number.isRequired,update:n.triggerRemount,default:1})}),["widthSegments","heightSegments","depthSegments"].forEach(function(t){n.hasProp(t,{type:h.default.number,update:n.triggerRemount,default:1})}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.width,n=t.height,r=t.depth,i=t.widthSegments,o=t.heightSegments,a=t.depthSegments;return new l.default.BoxGeometry(e,n,r,i,o,a)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(11),p=r(f),d=n(9),m=r(d),v=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["vertices","colors","faceVertexUvs","faces","dynamic"].forEach(function(t){n.removeProp(t)}),["position","normal","color"].forEach(function(t){n.hasProp(t,{type:h.default.oneOfType([(0,m.default)(l.default.BufferAttribute),(0,m.default)(l.default.InterleavedBufferAttribute)]),update:function(e,n){n?e.addAttribute(t,n):e.removeAttribute(t)},updateInitial:!0,default:void 0})}),n.hasProp("index",{type:h.default.oneOfType([(0,m.default)(l.default.BufferAttribute),(0,m.default)(l.default.InterleavedBufferAttribute)]),update:function(t,e){t.setIndex(e)},updateInitial:!0,default:void 0}),n}return a(e,t),s(e,[{key:"construct",value:function(){return new l.default.BufferGeometry}}]),e}(p.default);t.exports=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(74),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["radius","segments","thetaStart","thetaLength"].forEach(function(t){n.hasProp(t,{type:h.default.number,update:n.updateCacheAndReplace.bind(n,t),default:void 0})}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.radius,n=t.segments,r=t.thetaStart,i=t.thetaLength;return new l.default.CircleBufferGeometry(e,n,r,i)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(11),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["radius","segments","thetaStart","thetaLength"].forEach(function(t){n.hasProp(t,{type:h.default.number,update:n.triggerRemount,default:void 0})}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.radius,n=t.segments,r=t.thetaStart,i=t.thetaLength;return new l.default.CircleGeometry(e,n,r,i)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(11),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["radiusTop","radiusBottom","height","radialSegments","heightSegments","openEnded","thetaStart","thetaLength"].forEach(function(t){n.hasProp(t,{type:h.default.number,update:n.triggerRemount,default:void 0})}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.radiusTop,n=t.radiusBottom,r=t.height,i=t.radialSegments,o=t.heightSegments,a=t.openEnded,s=t.thetaStart,u=t.thetaLength;return new l.default.CylinderGeometry(e,n,r,i,o,a,s,u)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(11),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("radius",{type:h.default.number,update:n.triggerRemount,default:1}),n.hasProp("detail",{type:h.default.number,update:n.triggerRemount,default:0}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.radius,n=t.detail;return new l.default.DodecahedronGeometry(e,n)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(1),h=r(c),f=n(2),p=r(f),d=n(119),m=r(d),v=n(9),g=r(v),y=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.hasProp("settings",{type:p.default.any,update:function(t,e){t.userData._settings=e},updateInitial:!0,default:void 0}),["steps","amount","bevelThickness","bevelSize","bevelSegments","extrudeMaterial"].forEach(function(t){n.hasProp(t,{type:p.default.number,update:function(e,n){void 0===n?delete e.userData._options[t]:e.userData._options[t]=n,e.userData._needsToRefreshGeometry=!0},default:void 0})});var r=["bevelEnabled","extrudePath","frames"],a=[p.default.bool,(0,g.default)(h.default.CurvePath),(0,g.default)(h.default.TubeGeometry.FrenetFrames)];return r.forEach(function(t,e){n.hasProp(t,{type:a[e],update:function(e,n){void 0===n?delete e.userData._options[t]:e.userData._options[t]=n,e.userData._needsToRefreshGeometry=!0},default:void 0})}),n}return a(e,t),u(e,[{key:"refreshGeometry",value:function(t){var e=t.userData._shapeCache.filter(function(t){return!!t}).concat(t.userData._shapesFromProps);t.fromGeometry(new h.default.ExtrudeGeometry(e,s({},t.userData._options,t.userData._settings)))}},{key:"getOptions",value:function(t){var n=l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getOptions",this).call(this,t);return["steps","amount","bevelEnabled","bevelThickness","bevelSize","bevelSegments","extrudePath","frames","extrudeMaterial"].forEach(function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),n}}]),e}(m.default);t.exports=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(11),p=r(f),d=n(9),m=r(d),v=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("vertices",{override:!0,type:h.default.arrayOf((0,m.default)(l.default.Vector3)).isRequired,update:function(t,e){t.vertices!==e&&(t.vertices=e,t.verticesNeedUpdate=!0)},updateInitial:!0,default:[]}),n}return a(e,t),s(e,[{key:"construct",value:function(){return new l.default.Geometry}}]),e}(p.default);t.exports=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(49),h=r(c),f=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.radius,n=t.detail;return new l.default.IcosahedronGeometry(e,n)}}]),e}(h.default);t.exports=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(11),p=r(f),d=n(9),m=r(d),v=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["segments","phiStart","phiLength"].forEach(function(t){n.hasProp(t,{type:h.default.number,update:n.triggerRemount,default:void 0})}),n.hasProp("points",{type:h.default.arrayOf((0,m.default)(l.default.Vector2)).isRequired,update:n.triggerRemount,default:void 0}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.points,n=t.segments,r=t.phiStart,i=t.phiLength;return new l.default.LatheGeometry(e,n,r,i)}}]),e}(p.default);t.exports=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(49),h=r(c),f=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.radius,n=t.detail;return new l.default.OctahedronGeometry(e,n)}}]),e}(h.default);t.exports=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(11),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["slices","stacks"].forEach(function(t){n.hasProp(t,{type:h.default.number.isRequired,update:n.triggerRemount,default:void 0})}),n.hasProp("parametricFunction",{type:h.default.func.isRequired,update:n.triggerRemount,default:void 0}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.parametricFunction,n=t.slices,r=t.stacks;return new l.default.ParametricGeometry(e,n,r)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(74),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["width","height"].forEach(function(t){n.hasProp(t,{type:h.default.number.isRequired,update:n.updateCacheAndReplace.bind(n,t),default:1})}),["widthSegments","heightSegments"].forEach(function(t){n.hasProp(t,{type:h.default.number,update:n.triggerRemount,default:1})}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.width,n=t.height,r=t.widthSegments,i=t.heightSegments;return new l.default.PlaneBufferGeometry(e,n,r,i)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(11),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["width","height"].forEach(function(t){n.hasProp(t,{type:h.default.number.isRequired,update:n.triggerRemount,default:void 0})}),["widthSegments","heightSegments"].forEach(function(t){n.hasProp(t,{type:h.default.number,update:n.triggerRemount,default:1})}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.width,n=t.height,r=t.widthSegments,i=t.heightSegments;return new l.default.PlaneGeometry(e,n,r,i)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(49),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("vertices",{override:!0,type:h.default.arrayOf(h.default.number).isRequired,update:n.triggerRemount,default:void 0}),n.hasProp("indices",{type:h.default.arrayOf(h.default.number).isRequired,update:n.triggerRemount,default:void 0}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.vertices,n=t.indices,r=t.radius,i=t.detail;return new l.default.PolyhedronGeometry(e,n,r,i)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(11),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["innerRadius","outerRadius","thetaSegments","phiSegments","thetaStart","thetaLength"].forEach(function(t){n.hasProp(t,{type:h.default.number,update:n.triggerRemount,default:void 0})}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.innerRadius,n=t.outerRadius,r=t.thetaSegments,i=t.phiSegments,o=t.thetaStart,a=t.thetaLength;return new l.default.RingGeometry(e,n,r,i,o,a)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),c=r(l),h=n(119),f=r(h),p=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),u(e,[{key:"refreshGeometry",value:function(t){var e=t.userData._shapeCache.filter(function(t){return!!t}).concat(t.userData._shapesFromProps);t.fromGeometry(new c.default.ShapeGeometry(e,s({},t.userData._options)))}}]),e}(f.default);t.exports=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),l=r(u),c=n(30),h=r(c),f=n(254),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["x","y","radius","startAngle","endAngle"].forEach(function(t){n.hasProp(t,{type:l.default.number.isRequired,update:n.triggerRemount,default:0})}),n.hasProp("clockwise",{type:l.default.bool.isRequired,update:n.triggerRemount,default:!1}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.x,n=t.y,r=t.radius,i=t.startAngle,o=t.endAngle,a=t.clockwise;return new p.default(e,n,r,i,o,a)}}]),e}(h.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),l=r(u),c=n(30),h=r(c),f=n(255),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["x","y","xRadius","yRadius","startAngle","endAngle"].forEach(function(t){n.hasProp(t,{type:l.default.number.isRequired,update:n.triggerRemount,default:0})}),n.hasProp("clockwise",{type:l.default.bool,update:n.triggerRemount,default:!1}),n.hasProp("rotation",{type:l.default.number,update:n.triggerRemount,default:0}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.x,n=t.y,r=t.xRadius,i=t.yRadius,o=t.startAngle,a=t.endAngle,s=t.clockwise,u=t.rotation;return new p.default(e,n,r,i,o,a,s,u)}}]),e}(h.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),l=r(u),c=n(30),h=r(c),f=n(256),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["cp1X","cp1Y","cp2X","cp2Y","aX","aY"].forEach(function(t){n.hasProp(t,{type:l.default.number.isRequired,update:n.triggerRemount,default:0})}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.cp1X,n=t.cp1Y,r=t.cp2X,i=t.cp2Y,o=t.aX,a=t.aY;return new p.default(e,n,r,i,o,a)}}]),e}(h.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(120),d=r(p),m=n(117),v=r(m),g=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"construct",value:function(){return new v.default}},{key:"performChildAction",value:function(t,e){e.performAction(t.path)}},{key:"setParent",value:function(t,n){return(0,f.default)(n instanceof c.default.Shape,"Holes can only be added to shapes."),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n)}}]),e}(d.default);t.exports=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),l=r(u),c=n(30),h=r(c),f=n(257),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["x","y"].forEach(function(t){n.hasProp(t,{type:l.default.number.isRequired,update:n.triggerRemount,default:0})}),n}return a(e,t),s(e,[{key:"construct",value:function(t){return new p.default(t.x,t.y)}}]),e}(h.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),l=r(u),c=n(30),h=r(c),f=n(258),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["x","y"].forEach(function(t){n.hasProp(t,{type:l.default.number.isRequired,update:n.triggerRemount,default:0})}),n}return a(e,t),s(e,[{key:"construct",value:function(t){return new p.default(t.x,t.y)}}]),e}(h.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),l=r(u),c=n(30),h=r(c),f=n(259),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["cpX","cpY","x","y"].forEach(function(t){n.hasProp(t,{type:l.default.number.isRequired,update:n.triggerRemount,default:0})}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.cpX,n=t.cpY,r=t.x,i=t.y;return new p.default(e,n,r,i)}}]),e}(h.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),c=r(l),h=n(120),f=r(h),p=n(53),d=r(p),m=(0,d.default)(s=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),u(e,[{key:"construct",value:function(t){return t.hasOwnProperty("points")?new c.default.Shape(t.points):new c.default.Shape}}]),e}(f.default))||s;t.exports=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(30),p=r(f),d=n(260),m=r(d),v=n(9),g=r(v),y=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("points",{type:h.default.arrayOf((0,g.default)(l.default.Vector2)).isRequired,update:n.triggerRemount,default:[]}),n}return a(e,t),s(e,[{key:"construct",value:function(t){return new m.default(t.points)}}]),e}(p.default);t.exports=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(74),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("radius",{type:h.default.number,update:n.updateCacheAndReplace.bind(n,"radius"),default:void 0}),["widthSegments","heightSegments"].forEach(function(t){n.hasProp(t,{type:h.default.number,update:n.triggerRemount,default:void 0})}),["phiStart","phiLength","thetaStart","thetaLength"].forEach(function(t){n.hasProp(t,{type:h.default.number,update:n.updateCacheAndReplace.bind(n,t),default:void 0})}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.radius,n=t.widthSegments,r=t.heightSegments,i=t.phiStart,o=t.phiLength,a=t.thetaStart,s=t.thetaLength;return new l.default.SphereBufferGeometry(e,n,r,i,o,a,s)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(49),h=r(c),f=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.radius,n=t.detail;return new l.default.TetrahedronGeometry(e,n)}}]),e}(h.default);t.exports=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(11),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("text",{type:h.default.string.isRequired,update:n.triggerRemount,default:"TEXT MISSING"}),n.hasProp("font",{type:h.default.instanceOf(l.default.Font).isRequired,update:n.triggerRemount}),n.hasProp("size",{type:h.default.number.isRequired,update:n.triggerRemount}),n.hasProp("height",{type:h.default.number,update:n.triggerRemount,default:50}),n.hasProp("curveSegments",{type:h.default.number,update:n.triggerRemount,default:12}),n.hasProp("bevelEnabled",{type:h.default.bool,update:n.triggerRemount,default:!1}),n.hasProp("bevelThickness",{type:h.default.number,update:n.triggerRemount,default:10}),n.hasProp("bevelSize",{type:h.default.number,update:n.triggerRemount,default:8}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.text,n=t.font,r=t.size,i=t.height,o=t.curveSegments,a=t.bevelEnabled,s=t.bevelThickness,u=t.bevelSize;return new l.default.TextGeometry(e,{font:n,size:r,height:i,curveSegments:o,bevelEnabled:a,bevelThickness:s,bevelSize:u})}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(11),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["radius","tube","radialSegments","tubularSegments","arc"].forEach(function(t){n.hasProp(t,{type:h.default.number,update:n.triggerRemount,default:void 0})}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.radius,n=t.tube,r=t.radialSegments,i=t.tubularSegments,o=t.arc;return new l.default.TorusGeometry(e,n,r,i,o)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(11),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["radius","tube","tubularSegments","radialSegments","p","q","heightScale"].forEach(function(t){n.hasProp(t,{type:h.default.number,update:n.triggerRemount,default:void 0})}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.radius,n=t.tube,r=t.tubularSegments,i=t.radialSegments,o=t.p,a=t.q,s=t.heightScale;return new l.default.TorusKnotGeometry(e,n,r,i,o,a,s)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(11),p=r(f),d=n(9),m=r(d),v=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("path",{type:(0,m.default)(l.default.Curve).isRequired,update:n.triggerRemount}),n.hasProp("segments",{type:h.default.number,update:n.triggerRemount,default:64}),n.hasProp("radius",{type:h.default.number,update:n.triggerRemount,default:1}),n.hasProp("radiusSegments",{type:h.default.number,update:n.triggerRemount,default:8}),n.hasProp("closed",{type:h.default.bool,update:n.triggerRemount,default:!1}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.path,n=t.segments,r=t.radius,i=t.radiusSegments,o=t.closed;return new l.default.TubeGeometry(e,n,r,i,o)}}]),e}(p.default);t.exports=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(50),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("intensity",{type:h.default.number,simple:!0,default:1}),n.hasColor(),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.color,n=t.intensity;return new l.default.AmbientLight(e,n)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,u,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=n(1),f=r(h),p=n(2),d=r(p),m=n(50),v=r(m),g=(u=s=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("intensity",{type:d.default.number,simple:!0,default:1}),n.hasProp("shadowCameraLeft",{type:d.default.number,updateInitial:!0,update:function(t,e,n){n&&(t.shadow.camera.left=e)},default:e.defaultShadowCameraLeft}),n.hasProp("shadowCameraBottom",{type:d.default.number,updateInitial:!0,update:function(t,e,n){n&&(t.shadow.camera.bottom=e)},default:e.defaultShadowCameraBottom}),n.hasProp("shadowCameraRight",{type:d.default.number,updateInitial:!0,update:function(t,e,n){n&&(t.shadow.camera.right=e)},default:e.defaultShadowCameraRight}),n.hasProp("shadowCameraTop",{type:d.default.number,updateInitial:!0,update:function(t,e,n){n&&(t.shadow.camera.top=e)},default:e.defaultShadowCameraTop}),n.hasColor(),n.hasDirection(),n}return a(e,t),l(e,[{key:"construct",value:function(t){var e=t.color,n=t.intensity,r=new f.default.DirectionalLight(e,n);return r.position.set(0,0,0),r}},{key:"unmount",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}}]),e}(v.default),s.defaultShadowCameraLeft=-5,s.defaultShadowCameraRight=5,s.defaultShadowCameraTop=5,s.defaultShadowCameraBottom=-5,u);t.exports=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,u,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(1),h=r(c),f=n(2),p=r(f),d=n(50),m=r(d),v=(u=s=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasColor(),["intensity","decay"].forEach(function(t){n.hasProp(t,{type:p.default.number,simple:!0,default:1})}),n.hasProp("distance",{type:p.default.number,simple:!0,default:0}),n.hasProp("shadowCameraFov",{type:p.default.number,updateInitial:!0,update:function(t,e,n){n&&(t.shadow.camera.fov=e)},default:e.defaultShadowCameraFov}),n.hasProp("shadowCameraAspect",{type:p.default.number,updateInitial:!0,update:function(t,e,n){n&&(t.shadow.camera.aspect=e)},default:e.defaultShadowCameraAspect}),n.removeProp("lookAt"),n.removeProp("rotation"),n.removeProp("quaternion"),n}return a(e,t),l(e,[{key:"construct",value:function(t){var e=t.color,n=t.intensity,r=t.distance,i=t.decay;return new h.default.PointLight(e,n,r,i)}}]),e}(m.default),s.defaultShadowCameraFov=90,s.defaultShadowCameraAspect=1,u);t.exports=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(50),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r=[1,0,Math.PI/3,10,1,0];return["intensity","distance","angle","exponent","decay","penumbra"].forEach(function(t,e){n.hasProp(t,{type:h.default.number,simple:!0,default:r[e]})}),n.hasProp("shadowCameraFov",{type:h.default.number,updateInitial:!0,update:function(t,e,n){n&&(t.shadow.camera.fov=e)},default:50}),n.hasColor(),n.hasDirection(),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.color,n=t.intensity,r=t.distance,i=t.angle,o=t.exponent,a=t.decay;return new l.default.SpotLight(e,n,r,i,o,a)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(21),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasColor(),n.hasProp("linewidth",{type:h.default.number,simple:!0,default:1}),["linecap","linejoin"].forEach(function(t){n.hasProp(t,{type:h.default.oneOf(["round"]),simple:!0,default:"round"})}),n.hasProp("vertexColors",{type:h.default.oneOf([l.default.NoColors,l.default.FaceColors,l.default.VertexColors]),simple:!0,default:l.default.NoColors}),n.hasProp("fog",{type:h.default.bool,update:function(t,e,n){n&&(t.fog=e),t.needsUpdate=!0},updateInitial:!0,default:!0}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new l.default.LineBasicMaterial(e)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(21),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasColor(),["linewidth","scale","gapSize"].forEach(function(t){n.hasProp(t,{type:h.default.number,simple:!0,default:1})}),n.hasProp("dashSize",{type:h.default.number,simple:!0,default:3}),["linecap","linejoin"].forEach(function(t){n.hasProp(t,{type:h.default.oneOf(["round"]),simple:!0,default:"round"})}),n.hasProp("vertexColors",{type:h.default.oneOf([l.default.NoColors,l.default.FaceColors,l.default.VertexColors]),simple:!0,default:l.default.NoColors}),n.hasProp("fog",{type:h.default.bool,update:function(t,e,n){n&&(t.fog=e),t.needsUpdate=!0},updateInitial:!0,default:!0}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new l.default.LineDashedMaterial(e)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(21),h=r(c),f=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasColor(),n.hasWireframe(),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return t.hasOwnProperty("map")&&(e.map=t.map),new l.default.MeshBasicMaterial(e)}}]),e}(h.default);t.exports=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(21),h=r(c),f=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasWireframe(),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new l.default.MeshDepthMaterial(e)}}]),e}(h.default);t.exports=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r);
},l=n(1),c=r(l),h=n(21),f=r(h),p=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasColor(),n.hasColor("emissive",0),n.hasWireframe(),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new c.default.MeshLambertMaterial(e)}},{key:"getMaterialDescription",value:function(t){var n=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getMaterialDescription",this).call(this,t);return t.hasOwnProperty("shininess")&&(n.shininess=t.shininess),t.hasOwnProperty("map")&&(n.map=t.map),n}},{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),n.hasOwnProperty("map")||(t.map=void 0)}}]),e}(f.default);t.exports=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(21),h=r(c),f=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasWireframe(),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new l.default.MeshNormalMaterial(e)}}]),e}(h.default);t.exports=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(21),d=r(p),m=n(9),v=r(m),g=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasColor(),n.hasColor("specular",1118481),n.hasColor("emissive",0),n.hasWireframe(),n.hasProp("shininess",{type:f.default.number,simple:!0,default:30}),n.hasProp("metal",{type:f.default.bool,update:function(t,e){t.metal=e,t.needsUpdate=!0},default:!1}),["lightMapIntensity","aoMapIntensity","emissiveIntensity","bumpScale","displacementScale","reflectivity"].forEach(function(t){n.hasProp(t,{type:f.default.number,update:function(e,n){e[t]=n,e.needsUpdate=!0},default:1})}),["displacementBias"].forEach(function(t){n.hasProp(t,{type:f.default.number,update:function(e,n){e[t]=n,e.needsUpdate=!0},default:0})}),["refractionRatio"].forEach(function(t){n.hasProp(t,{type:f.default.number,update:function(e,n){e[t]=n,e.needsUpdate=!0},default:.98})}),n.hasProp("normalScale",{type:(0,v.default)(c.default.Vector2),update:function(t,e){t.normalScale.copy(e),t.needsUpdate=!0},default:new c.default.Vector2(1,1)}),n.hasProp("shading",{type:f.default.oneOf([c.default.FlatShading,c.default.SmoothShading]),update:function(t,e){t.shading=e,t.needsUpdate=!0},default:c.default.SmoothShading}),["skinning","morphTargets","morphNormals"].forEach(function(t){n.hasProp(t,{type:f.default.bool,update:function(e,n){e[t]=n,e.needsUpdate=!0},default:!1})}),n}return a(e,t),s(e,[{key:"getMaterialDescription",value:function(t){var n=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getMaterialDescription",this).call(this,t);return["shininess","lightMapIntensity","aoMapIntensity","emissiveIntensity","bumpScale","displacementScale","reflectivity","displacementBias","refractionRatio","normalScale","shading","skinning","morphTargets","morphNormals"].forEach(function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),n}},{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new c.default.MeshPhongMaterial(e)}}]),e}(d.default);t.exports=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(21),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasColor(),n.hasProp("size",{type:h.default.number,simple:!0,default:1}),n.hasProp("sizeAttenuation",{type:h.default.bool,update:function(t,e,n){n&&(t.sizeAttenuation=e),t.needsUpdate=!0},updateInitial:!0,default:!0}),n.hasProp("fog",{type:h.default.bool,update:function(t,e,n){n&&(t.fog=e),t.needsUpdate=!0},updateInitial:!0,default:!0}),n.hasProp("vertexColors",{type:h.default.oneOf([l.default.NoColors,l.default.FaceColors,l.default.VertexColors]),simple:!0,default:l.default.NoColors}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new l.default.PointsMaterial(e)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(121),h=r(c),f=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["alphaTest"].forEach(function(t){n.removeProp(t)}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new l.default.RawShaderMaterial(e)}}]),e}(h.default);t.exports=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(2),h=r(c),f=n(21),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasColor(),n.hasProp("rotation",{type:h.default.number,simple:!0,default:0}),n.hasProp("fog",{type:h.default.bool,update:function(t,e,n){n&&(t.fog=e),t.needsUpdate=!0},updateInitial:!0,default:!1}),n}return a(e,t),s(e,[{key:"construct",value:function(t){var e=this.getMaterialDescription(t);return new l.default.SpriteMaterial(e)}}]),e}(p.default);t.exports=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=n(1),f=r(h),p=n(6),d=r(p),m=n(2),v=r(m),g=n(53),y=r(g),_=n(14),b=r(_),w=n(48),x=r(w),E=n(47),C=(r(E),n(9)),S=r(C),M=(0,y.default)(s=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("repeat",{type:(0,S.default)(f.default.Vector2),updateInitial:!0,update:function(t,e){e?t.repeat.copy(e):t.repeat.set(1,1)},default:new f.default.Vector2(1,1)}),n.hasProp("offset",{type:(0,S.default)(f.default.Vector2),updateInitial:!0,update:function(t,e){e?t.offset.copy(e):t.offset.set(0,0)},default:new f.default.Vector2(0,0)}),["wrapS","wrapT"].forEach(function(t){n.hasProp(t,{type:v.default.oneOf([f.default.RepeatWrapping,f.default.ClampToEdgeWrapping,f.default.MirroredRepeatWrapping]),updateInitial:!0,update:function(e,n){e[t]=n,e.image&&(e.needsUpdate=!0)},default:f.default.ClampToEdgeWrapping})}),n.hasProp("anisotropy",{type:v.default.number,updateInitial:!0,update:function(t,e){t.anisotropy=e,t.image&&(t.needsUpdate=!0)},default:1}),n.hasProp("url",{type:v.default.string.isRequired,update:n.triggerRemount,default:""}),n.hasProp("crossOrigin",{type:v.default.string,update:n.triggerRemount,default:void 0}),["onLoad","onProgress","onError"].forEach(function(t){n.hasProp(t,{type:v.default.func,update:function(){},default:void 0})}),n.hasProp("magFilter",{type:v.default.oneOf([f.default.LinearFilter,f.default.NearestFilter]),update:function(t,e){t.magFilter=e,t.image&&(t.needsUpdate=!0)},default:f.default.LinearFilter}),n.hasProp("minFilter",{type:v.default.oneOf([f.default.LinearMipMapLinearFilter,f.default.NearestFilter,f.default.NearestMipMapNearestFilter,f.default.NearestMipMapLinearFilter,f.default.LinearFilter,f.default.LinearMipMapNearestFilter]),update:function(t,e){t.magFilter=e,t.image&&(t.needsUpdate=!0)},default:f.default.LinearMipMapLinearFilter}),n}return a(e,t),l(e,[{key:"construct",value:function(t){var e=void 0;if(t.hasOwnProperty("url")){var n=new f.default.TextureLoader;t.hasOwnProperty("crossOrigin")&&(n.crossOrigin=t.crossOrigin);var r=void 0,i=void 0,o=void 0;t.hasOwnProperty("onLoad")&&(r=t.onLoad),t.hasOwnProperty("onProgress")&&(i=t.onProgress),t.hasOwnProperty("onError")&&(o=t.onError),e=n.load(t.url,r,i,o)}else(0,d.default)(!1,"The texture needs a url property.");return e}},{key:"setParent",value:function(t,n){(0,d.default)(n instanceof f.default.Material||n instanceof x.default,"Parent is not a material or a uniform"),n instanceof f.default.Material?((0,d.default)(null===n.map||void 0===n.map,"Parent already has a texture"),n.map=t,n.needsUpdate=!0):n.setValue(t),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n)}},{key:"applyInitialProps",value:function(t,n){t.userData=u({},t.userData),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n)}},{key:"unmount",value:function(t){var n=t.userData.markup.parentMarkup.threeObject;n instanceof f.default.Material?n.map===t&&(n.map=null,n.needsUpdate=!0):n instanceof x.default&&n.value===t&&n.setValue(null),t.dispose(),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.highlight(e)}},{key:"hideHighlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.hideHighlight(e)}}]),e}(b.default))||s;t.exports=M},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(2),d=r(p),m=n(48),v=r(m),g=n(73),y=r(g),_=n(35),b=r(_),w=n(14),x=r(w),E=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._invalidChild=function(t){return n.invalidChildInternal(t)},n.hasProp("type",{type:d.default.string.isRequired,simple:!0}),n.hasProp("value",{type:d.default.any,update:function(t,e){t.setValue(e)},default:null}),n.hasProp("name",{type:d.default.string.isRequired,update:n.triggerRemount}),n}return a(e,t),s(e,[{key:"construct",value:function(){return new v.default}},{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),(0,f.default)(n.hasOwnProperty("name"),"The <uniform/> should have a 'name' property"),t.name=n.name,t.value=n.value}},{key:"setParent",value:function(t,n){(0,f.default)(n instanceof y.default,"Parent is not a Uniform Container (<uniforms/>)");var r=t.name;(0,f.default)(void 0===n[r],"Parent already has uniforms"),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n),n.uniforms[r]={type:t.type,value:t.value},t.userData._onValueChanged=function(t){n.uniforms[r].value=t},t.userData.events.on("valueChanged",t.userData._onValueChanged)}},{key:"addChildren",value:function(t,e){(0,f.default)(0===e.filter(this._invalidChild).length,"Uniform children can only be textures or resource references")}},{key:"addChild",value:function(t,e){this.addChildren(t,[e])}},{key:"removeChild",value:function(){}},{key:"invalidChildInternal",value:function(t){var e=!(t instanceof c.default.Texture||t instanceof b.default);return e}},{key:"unmount",value:function(t){t.userData.events.removeListener("valueChanged",t.userData._onValueChanged),delete t.userData._onValueChanged,u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.highlight(e)}},{key:"getBoundingBoxes",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;return e.userData._descriptor.getBoundingBoxes(e)}},{key:"hideHighlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.hideHighlight(e)}}]),e}(x.default);t.exports=E},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(14),d=r(p),m=n(73),v=r(m),g=n(48),y=r(g),_=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"construct",value:function(){return new v.default}},{key:"setParent",value:function(t,n){(0,f.default)(n instanceof c.default.ShaderMaterial,"Parent of <uniforms/> is not a shader material"),(0,f.default)(void 0===n.uniforms,"Parent already has uniforms"),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n),n.uniforms=t.uniforms}},{key:"addChildren",value:function(t,e){e.forEach(function(t){(0,f.default)(t instanceof y.default,"The <uniforms/> component can only have <uniform/> elements as children.")})}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.highlight(e)}},{key:"getBoundingBoxes",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;return e.userData._descriptor.getBoundingBoxes(e)}},{key:"hideHighlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.userData._descriptor.hideHighlight(e)}}]),e}(d.default);t.exports=_},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){return t.constructor&&t.constructor.name?t.constructor.name:"<<anonymous>>"}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(41),h=r(c),f=n(14),p=r(f),d=n(111),m=r(d),v=n(125),g=r(v),y=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r=function(t,e,n,r,i){var o=h.default[r];if(!t[e])return new g.default("Required "+o+" `"+i+"` "+("was not specified in `"+n+"`."));if(!(t[e].prototype instanceof m.default)){var a=s(t[e]);return new g.default("Invalid "+o+" `"+i+"` "+("of type `"+a+"` supplied to `"+n+"`, ")+"expected subclass of `Module`.")}};return r.toString=function(){return"``` subclass of ReactThreeRenderer.Module ``` *``` required ```*"},n.hasProp("descriptor",{type:r,update:n.triggerRemount,default:void 0}),n}return a(e,t),u(e,[{key:"construct",value:function(t){var e=t.descriptor;return new e}},{key:"applyInitialProps",value:function(t,n){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),t.setup(this.react3RendererInstance)}},{key:"unmount",value:function(t){t.dispose(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}}]),e}(p.default);t.exports=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),c=r(l),h=n(2),f=r(h),p=n(18),d=r(p),m=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.propTypes=s({},n.propTypes,{near:f.default.number,far:f.default.number,cubeResolution:f.default.number.isRequired}),n}return a(e,t),u(e,[{key:"construct",value:function(t){return new c.default.CubeCamera(t.near,t.far,t.cubeResolution)}}]),e}(d.default);t.exports=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),c=r(l),h=n(2),f=r(h),p=n(122),d=r(p),m=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.propTypes=s({},n.propTypes,{left:f.default.number.isRequired,right:f.default.number.isRequired,top:f.default.number.isRequired,bottom:f.default.number.isRequired,near:f.default.number,far:f.default.number}),n.propUpdates=s({},n.propUpdates,{left:n._updateAndRefreshProjection.bind(n,"left"),right:n._updateAndRefreshProjection.bind(n,"right"),top:n._updateAndRefreshProjection.bind(n,"top"),bottom:n._updateAndRefreshProjection.bind(n,"bottom"),fov:n._updateFov,far:n._updateFar}),n}return a(e,t),u(e,[{key:"_updateFov",value:function(t,e){t.fov=e,t.userData._needsProjectionMatrixUpdate=!0}},{key:"_updateFar",value:function(t,e){t.far=e,t.userData._needsProjectionMatrixUpdate=!0}},{key:"construct",value:function(t){return new c.default.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far)}},{key:"_updateAndRefreshProjection",value:function(t,e,n){e[t]=n,e.userData._needsProjectionMatrixUpdate=!0}}]),e}(d.default);t.exports=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),c=r(l),h=n(2),f=r(h),p=n(122),d=r(p),m=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.propTypes=s({},n.propTypes,{fov:f.default.number,aspect:f.default.number,near:f.default.number,far:f.default.number}),n.propUpdates=s({},n.propUpdates,{aspect:n._updateAspect,fov:n._updateFov,far:n._updateFar,near:n._updateNear}),n}return a(e,t),u(e,[{key:"construct",value:function(t){return new c.default.PerspectiveCamera(t.fov,t.aspect,t.near,t.far)}},{key:"_updateFov",value:function(t,e){t.fov=e,t.userData._needsProjectionMatrixUpdate=!0}},{key:"_updateNear",value:function(t,e){t.near=e,t.userData._needsProjectionMatrixUpdate=!0}},{key:"_updateFar",value:function(t,e){t.far=e,t.userData._needsProjectionMatrixUpdate=!0}},{key:"_updateAspect",value:function(t,e){t.aspect=e,t.userData._needsProjectionMatrixUpdate=!0}}]),e}(d.default);t.exports=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(18),h=r(c),f=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"construct",value:function(){return new l.default.Group}}]),e}(h.default);t.exports=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(18),d=r(p),m=n(9),v=r(m),g=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("origin",{type:(0,v.default)(c.default.Vector3).isRequired,update:function(t,e){t.position.copy(e)},default:void 0}),n.hasProp("dir",{type:(0,v.default)(c.default.Vector3).isRequired,update:function(t,e){t.setDirection(e)},default:void 0}),n.hasProp("color",{type:f.default.oneOfType([(0,v.default)(c.default.Color),f.default.number,f.default.string]),update:function(t,e){t.setColor(e)},default:16776960}),n.hasProp("length",{type:f.default.number,update:function(t,e){t.userData.lengthProps.length=e,t.userData.lengthsChanged=!0},default:1}),n.hasProp("headLength",{type:f.default.number,update:function(t,e){t.userData.lengthProps.headLength=e,t.userData.lengthsChanged=!0},default:void 0}),n.hasProp("headWidth",{type:f.default.number,update:function(t,e){t.userData.lengthProps.headWidth=e,t.userData.lengthsChanged=!0},default:void 0}),n}return a(e,t),s(e,[{key:"beginPropertyUpdates",value:function(t){t.userData.lengthsChanged=!1}},{key:"completePropertyUpdates",value:function(t){if(t.userData.lengthsChanged){t.userData.lengthsChanged=!1;var e=t.userData.lengthProps.length,n=t.userData.lengthProps,r=n.headLength,i=n.headWidth;void 0===r&&(r=.2*e),void 0===i&&(i=.2*r),t.setLength(e,r,i)}}},{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n);
var r=n.length,i=n.headLength,o=n.headWidth;t.userData.lengthProps={length:r,headLength:i,headWidth:o}}},{key:"construct",value:function(t){var e=t.dir,n=t.origin,r=t.length,i=t.color,o=t.headLength,a=t.headWidth;return new c.default.ArrowHelper(e,n,r,i,o,a)}},{key:"unmount",value:function(t){t.line&&(t.line.geometry.dispose(),t.line.material.dispose()),t.cone&&(t.cone.geometry.dispose(),t.cone.material.dispose()),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}}]),e}(d.default);t.exports=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(18),d=r(p),m=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("size",{type:f.default.number,update:n.triggerRemount,default:1}),n}return a(e,t),s(e,[{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n)}},{key:"construct",value:function(t){var e=t.size;return new c.default.AxisHelper(e)}},{key:"unmount",value:function(t){t.geometry.dispose(),t.material.dispose(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}}]),e}(d.default);t.exports=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(18),d=r(p),m=n(124),v=r(m),g=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("visible",{type:f.default.bool,override:!0,update:function(t,e){t.userData._visible=e,t.visible=t.userData._hasCamera&&e},updateInitial:!0,default:!0}),n.hasProp("cameraName",{type:f.default.string.isRequired,update:function(t,e){n._clearCameraEvents(t),t.userData._cameraName=e,n._startCameraFinder(t)},default:void 0}),n}return a(e,t),s(e,[{key:"construct",value:function(){return new c.default.CameraHelper(new c.default.PerspectiveCamera)}},{key:"applyInitialProps",value:function(t,n){var r=this;u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),t.userData._onCameraProjectionUpdate=function(){t.update()},t.userData._onCameraDispose=function(){r._startCameraFinder(t)},t.userData._onCameraRename=function(e){e.oldName===t.userData._cameraName&&r._startCameraFinder(t)},t.userData._onBeforeRender=function(){t.visible=t.userData._hasCamera&&t.userData._visible&&v.default.current!==t.userData._camera},t.userData._cameraName=n.cameraName,t.userData._visible=!n.hasOwnProperty("visible")||n.visible,t.userData.events.once("addedIntoRoot",function(){var e=t.userData.markup._rootInstance;e.addBeforeRenderListener(t.userData._onBeforeRender),r._startCameraFinder(t)})}},{key:"unmount",value:function(t){return this._clearCameraEvents(t),delete t.userData._onCameraProjectionUpdate,u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"_getCamera",value:function(t,e){var n=null;if(e){var r=t.getObjectsByName(e).filter(function(t){return t instanceof c.default.Camera});r.length>0&&(n=r[0])}return n}},{key:"_clearCameraEvents",value:function(t){t.userData._hasCamera&&(t.userData._camera.userData.events.removeListener("updateProjectionMatrix",t.userData._onCameraProjectionUpdate),t.userData._camera.userData.events.removeListener("dispose",t.userData._onCameraDispose),t.userData._camera.userData.events.removeListener("rename",t.userData._onCameraRename))}},{key:"_setCamera",value:function(t,e){var n=t.userData;if(n._camera!==e){this._clearCameraEvents(t),n._hasCamera=!0,n._camera=e,t.camera=e,t.matrix=e.matrixWorld,t.update(),t.visible=n._visible;var r=t.userData._camera.userData.events;r.on("rename",n._onCameraRename),r.on("updateProjectionMatrix",n._onCameraProjectionUpdate),r.once("dispose",n._onCameraDispose)}}},{key:"_startCameraFinder",value:function(t){var e=this;this._clearCameraEvents(t);var n=t.userData.markup&&t.userData.markup._rootInstance;if(n){t.userData._hasCamera=!1,t.userData._camera=null,t.camera=new c.default.PerspectiveCamera,t.visible=!1;var r=this._getCamera(n,t.userData._cameraName);r?this._setCamera(t,r):!function(){var r=function r(){var i=e._getCamera(n,t.userData._cameraName);i&&(n.removeAnimateListener(r),e._setCamera(t,i))};n.addAnimateListener(r)}()}}}]),e}(d.default);t.exports=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(18),d=r(p),m=n(9),v=r(m),g=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("size",{type:f.default.number.isRequired,update:n.triggerRemount,default:1}),n.hasProp("step",{type:f.default.number,update:n.triggerRemount,default:1}),n.hasProp("colorCenterLine",{type:f.default.oneOfType([(0,v.default)(c.default.Color),f.default.number,f.default.string]),update:n.triggerRemount,default:4473924}),n.hasProp("colorGrid",{type:f.default.oneOfType([(0,v.default)(c.default.Color),f.default.number,f.default.string]),update:n.triggerRemount,default:8947848}),n}return a(e,t),s(e,[{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n)}},{key:"construct",value:function(t){var e=t.size,n=t.step;return new c.default.GridHelper(e,n)}},{key:"unmount",value:function(t){t.geometry.dispose(),t.material.dispose(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}}]),e}(d.default);t.exports=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(51),h=r(c),f=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.hasOwnProperty("geometry")?t.geometry:void 0,n=t.hasOwnProperty("material")?t.material:void 0,r=new l.default.Line(e,n);return e||(r.geometry.dispose(),r.geometry=void 0),n||(r.material.dispose(),r.material=void 0),r}}]),e}(h.default);t.exports=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(51),h=r(c),f=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.hasOwnProperty("geometry")?t.geometry:void 0,n=t.hasOwnProperty("material")?t.material:void 0,r=new l.default.LineSegments(e,n);return e||(r.geometry.dispose(),r.geometry=void 0),n||(r.material.dispose(),r.material=void 0),r}}]),e}(h.default);t.exports=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(51),h=r(c),f=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"construct",value:function(){var t=new l.default.Points;return t.geometry.dispose(),t.material.dispose(),t.geometry=void 0,t.material=void 0,t}}]),e}(h.default);t.exports=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(18),f=r(h),p=n(9),d=r(p),m=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("fog",{type:(0,d.default)(c.default.Fog),simple:!0,default:void 0}),n}return a(e,t),s(e,[{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n)}},{key:"construct",value:function(){return new c.default.Scene}}]),e}(f.default);t.exports=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=r(u),c=n(6),h=r(c),f=n(18),p=r(f),d=n(35),m=r(d),v=function(t){function e(){var t,n,r,a;i(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),r._invalidChild=function(t){var e=!(t instanceof l.default.SpriteMaterial||t instanceof m.default);return e},a=n,o(r,a)}return a(e,t),s(e,[{key:"construct",value:function(t){var e=t.hasOwnProperty("material")?t.material:void 0,n=new l.default.Sprite(e);return e||(n.material.dispose(),n.material=void 0),n}},{key:"addChildren",value:function(t,e){(0,h.default)(0===e.filter(this._invalidChild).length,!1)}},{key:"addChild",value:function(t,e){this.addChildren(t,[e])}},{key:"moveChild",value:function(){}}]),e}(p.default);t.exports=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(2),f=r(h),p=n(31),d=(r(p),n(6)),m=r(d),v=n(14),g=r(v),y=n(115),_=r(y),b=n(9),w=r(b),x={gammaInput:{type:f.default.bool,default:!1},gammaOutput:{type:f.default.bool,default:!1},sortObjects:{type:f.default.bool,default:!0},context:{type:f.default.oneOf(["2d","3d"]).isRequired,default:"3d"},mainCamera:{type:f.default.string,default:void 0},onAnimate:{type:f.default.func,default:void 0},clearColor:{type:f.default.oneOfType([(0,w.default)(c.default.Color),f.default.number,f.default.string]),default:0},clearAlpha:{type:f.default.number,default:void 0},alpha:{type:f.default.bool,default:!1},shadowMapEnabled:{type:f.default.bool,default:!1},shadowMapType:{type:f.default.oneOf([c.default.BasicShadowMap,c.default.PCFShadowMap,c.default.PCFSoftShadowMap]),default:c.default.PCFShadowMap},shadowMapCullFace:{type:f.default.oneOf([c.default.CullFaceNone,c.default.CullFaceBack,c.default.CullFaceFront,c.default.CullFaceFrontBack]),default:c.default.CullFaceFront},shadowMapDebug:{type:f.default.bool,default:!1},onRecreateCanvas:{type:f.default.func.isRequired,default:void 0},pixelRatio:{type:f.default.number,default:1},width:{type:f.default.number.isRequired,default:1},height:{type:f.default.number.isRequired,default:1},precision:{type:f.default.oneOf(["highp","mediump","lowp"]),default:"highp"},premultipliedAlpha:{type:f.default.bool,default:!0},antialias:{type:f.default.oneOfType([f.default.bool,f.default.number]),default:!1},stencil:{type:f.default.bool,default:!0},preserveDrawingBuffer:{type:f.default.bool,default:!1},depth:{type:f.default.bool,default:!0},logarithmicDepthBuffer:{type:f.default.bool,default:!1},onRendererUpdated:{type:f.default.func,default:void 0},forceManualRender:{type:f.default.bool,default:!1},onManualRenderTriggerCreated:{type:f.default.func,default:void 0}},E=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return Object.keys(x).forEach(function(t){var e=x[t],r=t[0].toUpperCase()+t.substr(1),i="update"+r,o={type:e.type,update:function(t,e){t[i](e)}};e.hasOwnProperty("default")&&(o.default=e.default),n.hasProp(t,o)}),n}return a(e,t),s(e,[{key:"completePropertyUpdates",value:function(t){}},{key:"setParent",value:function(t,n){(0,m.default)(n instanceof HTMLCanvasElement,"The `react3` element can only be rendered into a canvas."),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n),t.updateCanvas(n)}},{key:"construct",value:function(t){return new _.default(t,this.react3RendererInstance)}},{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),t.initialize()}},{key:"addChildren",value:function(t,e){t.addChildren(e)}},{key:"addChild",value:function(t,e){t.addChildren([e])}},{key:"moveChild",value:function(){}},{key:"removeChild",value:function(t,e){t.removeChild(e)}},{key:"_updateOnRecreateCanvas",value:function(t,e){t.updateOnRecreateCanvas(e)}},{key:"_updateHeight",value:function(t,e){t.updateHeight(e)}},{key:"unmount",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t),t.unmount()}},{key:"componentWillUnmount",value:function(t){return t.willUnmount(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"componentWillUnmount",this).call(this,t)}}]),e}(g.default);t.exports=E},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(52),d=r(p),m=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),n.hasOwnProperty("slot")?t.userData._propertySlot=n.slot:t.userData._propertySlot="material"}},{key:"setParent",value:function(t,n){(0,f.default)(n instanceof c.default.Mesh||n instanceof c.default.Points||n instanceof c.default.Line,"Parent is not a mesh"),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n)}}]),e}(d.default);t.exports=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(14),d=r(p),m=n(72),v=r(m),g=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"construct",value:function(){return new v.default}},{key:"unmount",value:function(t){var n=t.userData.markup.parentMarkup,r=n.threeObject.userData.events;t.resourceIds.forEach(function(e){r.emit("resource.removed",{id:e,distance:0,resource:t.resourceMap[e]})}),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unmount",this).call(this,t)}},{key:"addChildren",value:function(t,e){e.forEach(function(e){var n=e.userData._resourceId;(0,f.default)(!!n),t.resourceIds.push(n),t.resourceMap[n]=e;var r=t.userData.markup.parentMarkup;r&&r.threeObject.userData.events.emit("resource.added",{id:n,distance:0,resource:e})})}},{key:"addChild",value:function(t,e){this.addChildren(t,[e])}},{key:"removeChild",value:function(t,e){var n=e.userData._resourceId;delete t.resourceIds[n];var r=t.userData.markup.parentMarkup;r&&r.threeObject.userData.events.emit("resource.removed",{id:n,distance:0,resource:e})}},{key:"setParent",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n);var r=n.userData.events;n.userData._resources=t,t.resourceIds.forEach(function(e){r.emit("resource.added",{id:e,distance:0,resource:t.resourceMap[e]})})}},{key:"highlight",value:function(t){var e=t.userData.markup.parentMarkup.threeObject;e.updateMatrixWorld&&e.traverse&&t.userData.events.emit("highlight",{uuid:t.uuid,boundingBoxFunc:function(){var t=new c.default.Box3;return t.setFromObject(e),[t]}})}},{key:"hideHighlight",value:function(t){t.userData.events.emit("hideHighlight")}},{key:"moveChild",value:function(){}}]),e}(d.default);t.exports=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(2),c=r(l),h=n(1),f=r(h),p=n(123),d=r(p),m=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.hasProp("type",{type:c.default.oneOf(["points","spacedPoints","shape"]).isRequired,update:n.triggerRemount,default:""}),n.hasProp("divisions",{type:c.default.number,update:n.triggerRemount,default:5}),n}return a(e,t),s(e,[{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),t.userData._divisions=n.divisions,t.userData._type=n.type}},{key:"applyToSlot",value:function(t,n,r){if(!r)return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyToSlot",this).call(this,t,n,null);var i=void 0;switch(t.userData._type){case"points":i=r.createPointsGeometry();break;case"spacedPoints":i=r.createSpacedPointsGeometry(t.userData._divisions);break;case"shape":i=new f.default.ShapeGeometry(r)}return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyToSlot",this).call(this,t,n,i)}}]),e}(d.default);t.exports=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(52),d=r(p),m=n(116),v=r(m),g=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),t.userData._remountOnUpdate=!0}},{key:"construct",value:function(t){return new v.default(t.resourceId)}},{key:"setParent",value:function(t,n){(0,f.default)(n instanceof c.default.ExtrudeGeometry||n instanceof c.default.BufferGeometry,"Parent is not an extrude geometry"),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n)}},{key:"applyToSlot",value:function(t,e,n){t.userData.events.emit("resource.set",n)}}]),e}(d.default);t.exports=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(1),c=r(l),h=n(6),f=r(h),p=n(52),d=r(p),m=n(48),v=r(m),g=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"applyInitialProps",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyInitialProps",this).call(this,t,n),t.userData._propertySlot="map"}},{key:"applyToSlot",value:function(t,n,r){n instanceof c.default.Material?(u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyToSlot",this).call(this,t,n,r),n.dispose()):n instanceof v.default?n.setValue(r):(0,f.default)(!1,"Parent is not a material or a uniform")}},{key:"setParent",value:function(t,n){n instanceof c.default.Material?u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n):n instanceof v.default?(t.userData._propertySlot="value",u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setParent",this).call(this,t,n)):(0,f.default)(!1,"Parent is not a material or a uniform")}}]),e}(d.default);t.exports=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");
}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),l=r(u),c=n(118),h=r(c),f=n(14),p=r(f),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return["x","y","width","height"].forEach(function(t){n.hasProp(t,{type:l.default.number.isRequired,simple:!0})}),n.hasProp("cameraName",{type:l.default.string.isRequired,simple:!0}),n}return a(e,t),s(e,[{key:"construct",value:function(t){return new h.default(t)}}]),e}(p.default);t.exports=d},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){n(this,t)}return r(t,[{key:"dispatchEvent",value:function(t,e){var n=t.userData._eventCallbacks,r=n&&n[e];if(r){for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];r.apply(void 0,o)}}}]),t}();t.exports=i},function(t,e){"use strict";t.exports=function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(e){return!1}}},function(t,e,n){"use strict";var r=n(8),i=n(101),o={focusDOMComponent:function(){i(r.getNodeFromInstance(this))}};t.exports=o},function(t,e,n){"use strict";function r(){var t=window.opera;return"object"==typeof t&&"function"==typeof t.version&&parseInt(t.version(),10)<=12}function i(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function o(t){switch(t){case T.topCompositionStart:return O.compositionStart;case T.topCompositionEnd:return O.compositionEnd;case T.topCompositionUpdate:return O.compositionUpdate}}function a(t,e){return t===T.topKeyDown&&e.keyCode===w}function s(t,e){switch(t){case T.topKeyUp:return b.indexOf(e.keyCode)!==-1;case T.topKeyDown:return e.keyCode!==w;case T.topKeyPress:case T.topMouseDown:case T.topBlur:return!0;default:return!1}}function u(t){var e=t.detail;return"object"==typeof e&&"data"in e?e.data:null}function l(t,e,n,r){var i,l;if(x?i=o(t):R?s(t,n)&&(i=O.compositionEnd):a(t,n)&&(i=O.compositionStart),!i)return null;S&&(R||i!==O.compositionStart?i===O.compositionEnd&&R&&(l=R.getData()):R=v.getPooled(r));var c=g.getPooled(i,e,n,r);if(l)c.data=l;else{var h=u(n);null!==h&&(c.data=h)}return d.accumulateTwoPhaseDispatches(c),c}function c(t,e){switch(t){case T.topCompositionEnd:return u(e);case T.topKeyPress:var n=e.which;return n!==M?null:(A=!0,P);case T.topTextInput:var r=e.data;return r===P&&A?null:r;default:return null}}function h(t,e){if(R){if(t===T.topCompositionEnd||s(t,e)){var n=R.getData();return v.release(R),R=null,n}return null}switch(t){case T.topPaste:return null;case T.topKeyPress:return e.which&&!i(e)?String.fromCharCode(e.which):null;case T.topCompositionEnd:return S?null:e.data;default:return null}}function f(t,e,n,r){var i;if(i=C?c(t,n):h(t,n),!i)return null;var o=y.getPooled(O.beforeInput,e,n,r);return o.data=i,d.accumulateTwoPhaseDispatches(o),o}var p=n(23),d=n(39),m=n(13),v=n(340),g=n(377),y=n(380),_=n(26),b=[9,13,27,32],w=229,x=m.canUseDOM&&"CompositionEvent"in window,E=null;m.canUseDOM&&"documentMode"in document&&(E=document.documentMode);var C=m.canUseDOM&&"TextEvent"in window&&!E&&!r(),S=m.canUseDOM&&(!x||E&&E>8&&E<=11),M=32,P=String.fromCharCode(M),T=p.topLevelTypes,O={beforeInput:{phasedRegistrationNames:{bubbled:_({onBeforeInput:null}),captured:_({onBeforeInputCapture:null})},dependencies:[T.topCompositionEnd,T.topKeyPress,T.topTextInput,T.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:_({onCompositionEnd:null}),captured:_({onCompositionEndCapture:null})},dependencies:[T.topBlur,T.topCompositionEnd,T.topKeyDown,T.topKeyPress,T.topKeyUp,T.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:_({onCompositionStart:null}),captured:_({onCompositionStartCapture:null})},dependencies:[T.topBlur,T.topCompositionStart,T.topKeyDown,T.topKeyPress,T.topKeyUp,T.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:_({onCompositionUpdate:null}),captured:_({onCompositionUpdateCapture:null})},dependencies:[T.topBlur,T.topCompositionUpdate,T.topKeyDown,T.topKeyPress,T.topKeyUp,T.topMouseDown]}},A=!1,R=null,L={eventTypes:O,extractEvents:function(t,e,n,r){return[l(t,e,n,r),f(t,e,n,r)]}};t.exports=L},function(t,e,n){"use strict";var r=n(129),i=n(13),o=(n(12),n(190),n(386)),a=n(197),s=n(200),u=(n(5),s(function(t){return a(t)})),l=!1,c="cssFloat";if(i.canUseDOM){var h=document.createElement("div").style;try{h.font=""}catch(f){l=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var p={createMarkupForStyles:function(t,e){var n="";for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];null!=i&&(n+=u(r)+":",n+=o(r,i,e)+";")}return n||null},setValueForStyles:function(t,e,n){var i=t.style;for(var a in e)if(e.hasOwnProperty(a)){var s=o(a,e[a],n);if("float"!==a&&"cssFloat"!==a||(a=c),s)i[a]=s;else{var u=l&&r.shorthandPropertyExpansions[a];if(u)for(var h in u)i[h]="";else i[a]=""}}}};t.exports=p},function(t,e,n){"use strict";function r(t){var e=t.nodeName&&t.nodeName.toLowerCase();return"select"===e||"input"===e&&"file"===t.type}function i(t){var e=C.getPooled(A.change,L,t,S(t));b.accumulateTwoPhaseDispatches(e),E.batchedUpdates(o,e)}function o(t){_.enqueueEvents(t),_.processEventQueue(!1)}function a(t,e){R=t,L=e,R.attachEvent("onchange",i)}function s(){R&&(R.detachEvent("onchange",i),R=null,L=null)}function u(t,e){if(t===O.topChange)return e}function l(t,e,n){t===O.topFocus?(s(),a(e,n)):t===O.topBlur&&s()}function c(t,e){R=t,L=e,I=t.value,k=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(R,"value",N),R.attachEvent?R.attachEvent("onpropertychange",f):R.addEventListener("propertychange",f,!1)}function h(){R&&(delete R.value,R.detachEvent?R.detachEvent("onpropertychange",f):R.removeEventListener("propertychange",f,!1),R=null,L=null,I=null,k=null)}function f(t){if("value"===t.propertyName){var e=t.srcElement.value;e!==I&&(I=e,i(t))}}function p(t,e){if(t===O.topInput)return e}function d(t,e,n){t===O.topFocus?(h(),c(e,n)):t===O.topBlur&&h()}function m(t,e){if((t===O.topSelectionChange||t===O.topKeyUp||t===O.topKeyDown)&&R&&R.value!==I)return I=R.value,L}function v(t){return t.nodeName&&"input"===t.nodeName.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)}function g(t,e){if(t===O.topClick)return e}var y=n(23),_=n(38),b=n(39),w=n(13),x=n(8),E=n(19),C=n(24),S=n(88),M=n(90),P=n(158),T=n(26),O=y.topLevelTypes,A={change:{phasedRegistrationNames:{bubbled:T({onChange:null}),captured:T({onChangeCapture:null})},dependencies:[O.topBlur,O.topChange,O.topClick,O.topFocus,O.topInput,O.topKeyDown,O.topKeyUp,O.topSelectionChange]}},R=null,L=null,I=null,k=null,D=!1;w.canUseDOM&&(D=M("change")&&(!("documentMode"in document)||document.documentMode>8));var j=!1;w.canUseDOM&&(j=M("input")&&(!("documentMode"in document)||document.documentMode>11));var N={get:function(){return k.get.call(this)},set:function(t){I=""+t,k.set.call(this,t)}},B={eventTypes:A,extractEvents:function(t,e,n,i){var o,a,s=e?x.getNodeFromInstance(e):window;if(r(s)?D?o=u:a=l:P(s)?j?o=p:(o=m,a=d):v(s)&&(o=g),o){var c=o(t,e);if(c){var h=C.getPooled(A.change,c,n,i);return h.type="change",b.accumulateTwoPhaseDispatches(h),h}}a&&a(t,s,e)}};t.exports=B},function(t,e,n){"use strict";var r=n(4),i=n(36),o=n(13),a=n(193),s=n(17),u=(n(3),{dangerouslyReplaceNodeWithMarkup:function(t,e){if(o.canUseDOM?void 0:r("56"),e?void 0:r("57"),"HTML"===t.nodeName?r("58"):void 0,"string"==typeof e){var n=a(e,s)[0];t.parentNode.replaceChild(n,t)}else i.replaceChildWithTree(t,e)}});t.exports=u},function(t,e,n){"use strict";var r=n(26),i=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({BeforeInputEventPlugin:null})];t.exports=i},function(t,e,n){"use strict";var r=n(23),i=n(39),o=n(8),a=n(61),s=n(26),u=r.topLevelTypes,l={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[u.topMouseOut,u.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[u.topMouseOut,u.topMouseOver]}},c={eventTypes:l,extractEvents:function(t,e,n,r){if(t===u.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(t!==u.topMouseOut&&t!==u.topMouseOver)return null;var s;if(r.window===r)s=r;else{var c=r.ownerDocument;s=c?c.defaultView||c.parentWindow:window}var h,f;if(t===u.topMouseOut){h=e;var p=n.relatedTarget||n.toElement;f=p?o.getClosestInstanceFromNode(p):null}else h=null,f=e;if(h===f)return null;var d=null==h?s:o.getNodeFromInstance(h),m=null==f?s:o.getNodeFromInstance(f),v=a.getPooled(l.mouseLeave,h,n,r);v.type="mouseleave",v.target=d,v.relatedTarget=m;var g=a.getPooled(l.mouseEnter,f,n,r);return g.type="mouseenter",g.target=m,g.relatedTarget=d,i.accumulateEnterLeaveDispatches(v,g,h,f),[v,g]}};t.exports=c},function(t,e,n){"use strict";function r(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var i=n(7),o=n(28),a=n(156);i(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,n=this._startText,r=n.length,i=this.getText(),o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);var s=e>1?1-e:void 0;return this._fallbackText=i.slice(t,s),this._fallbackText}}),o.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";var r=n(32),i=r.injection.MUST_USE_PROPERTY,o=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_NUMERIC_VALUE,s=r.injection.HAS_POSITIVE_NUMERIC_VALUE,u=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,l={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:o,allowTransparency:0,alt:0,async:o,autoComplete:0,autoPlay:o,capture:o,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:i|o,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:o,coords:0,crossOrigin:0,data:0,dateTime:0,default:o,defer:o,dir:0,disabled:o,download:u,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:o,formTarget:0,frameBorder:0,headers:0,height:0,hidden:o,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:o,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:i|o,muted:i|o,name:0,nonce:0,noValidate:o,open:o,optimum:0,pattern:0,placeholder:0,poster:0,preload:0,profile:0,radioGroup:0,readOnly:o,referrerPolicy:0,rel:0,required:o,reversed:o,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:o,scrolling:0,seamless:o,selected:i|o,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:o,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};t.exports=l},function(t,e,n){"use strict";var r=n(7),i=n(80),o=n(58),a=n(369),s=n(132),u=n(351),l=n(15),c=n(2),h=n(148),f=n(391),p=(n(5),l.createElement),d=l.createFactory,m=l.cloneElement,v=r,g={Children:{map:i.map,forEach:i.forEach,count:i.count,toArray:i.toArray,only:f},Component:o,PureComponent:a,createElement:p,cloneElement:m,isValidElement:l.isValidElement,PropTypes:c,createClass:s.createClass,createFactory:d,createMixin:function(t){return t},DOM:u,version:h,__spread:v};t.exports=g},function(t,e,n){(function(e){"use strict";function r(t,e,n,r){var i=void 0===t[n];null!=e&&i&&(t[n]=o(e,!0))}var i=n(29),o=n(157),a=(n(56),n(64)),s=n(65),u=(n(5),{instantiateChildren:function(t,e,n,i){if(null==t)return null;var o={};return s(t,r,o),o},updateChildren:function(t,e,n,r,s,u,l,c,h){if(e||t){var f,p;for(f in e)if(e.hasOwnProperty(f)){p=t&&t[f];var d=p&&p._currentElement,m=e[f];if(null!=p&&a(d,m))i.receiveComponent(p,m,s,c),e[f]=p;else{p&&(r[f]=i.getHostNode(p),i.unmountComponent(p,!1));var v=o(m,!0);e[f]=v;var g=i.mountComponent(v,s,u,l,c,h);n.push(g)}}for(f in t)!t.hasOwnProperty(f)||e&&e.hasOwnProperty(f)||(p=t[f],r[f]=i.getHostNode(p),i.unmountComponent(p,!1))}},unmountChildren:function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];i.unmountComponent(r,e)}}});t.exports=u}).call(e,n(34))},function(t,e,n){"use strict";var r=n(76),i=n(353),o={processChildrenUpdates:i.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};t.exports=o},function(t,e,n){"use strict";var r=n(394),i={shouldComponentUpdate:function(t,e){return r(this,t,e)}};t.exports=i},function(t,e,n){"use strict";var r=n(8),i=n(362),o=n(142),a=n(29),s=n(19),u=n(148),l=n(387),c=n(89),h=n(393);n(5);i.inject();var f={findDOMNode:l,render:o.render,unmountComponentAtNode:o.unmountComponentAtNode,version:u,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:h};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(t){return t._renderedComponent&&(t=c(t)),t?r.getNodeFromInstance(t):null}},Mount:o,Reconciler:a});t.exports=f},function(t,e,n){"use strict";var r=n(54),i={getHostProps:r.getHostProps};t.exports=i},function(t,e,n){"use strict";function r(t){if(t){var e=t._currentElement._owner||null;if(e){var n=e.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function i(t,e){e&&(J[t._tag]&&(null!=e.children||null!=e.dangerouslySetInnerHTML?m("137",t._tag,t._currentElement._owner?" Check the render method of "+t._currentElement._owner.getName()+".":""):void 0),null!=e.dangerouslySetInnerHTML&&(null!=e.children?m("60"):void 0,"object"==typeof e.dangerouslySetInnerHTML&&W in e.dangerouslySetInnerHTML?void 0:m("61")),null!=e.style&&"object"!=typeof e.style?m("62",r(t)):void 0)}function o(t,e,n,r){if(!(r instanceof D)){var i=t._hostContainerInfo,o=i._node&&i._node.nodeType===q,s=o?i._node:i._ownerDocument;V(e,s),r.getReactMountReady().enqueue(a,{inst:t,registrationName:e,listener:n})}}function a(){var t=this;C.putListener(t.inst,t.registrationName,t.listener)}function s(){var t=this;A.postMountWrapper(t)}function u(){var t=this;I.postMountWrapper(t)}function l(){var t=this;R.postMountWrapper(t)}function c(){var t=this;t._rootNodeID?void 0:m("63");var e=U(t);switch(e?void 0:m("64"),t._tag){case"iframe":case"object":t._wrapperState.listeners=[M.trapBubbledEvent(E.topLevelTypes.topLoad,"load",e)];break;case"video":case"audio":t._wrapperState.listeners=[];for(var n in Y)Y.hasOwnProperty(n)&&t._wrapperState.listeners.push(M.trapBubbledEvent(E.topLevelTypes[n],Y[n],e));break;case"source":t._wrapperState.listeners=[M.trapBubbledEvent(E.topLevelTypes.topError,"error",e)];break;case"img":t._wrapperState.listeners=[M.trapBubbledEvent(E.topLevelTypes.topError,"error",e),M.trapBubbledEvent(E.topLevelTypes.topLoad,"load",e)];break;case"form":t._wrapperState.listeners=[M.trapBubbledEvent(E.topLevelTypes.topReset,"reset",e),M.trapBubbledEvent(E.topLevelTypes.topSubmit,"submit",e)];break;case"input":case"select":case"textarea":t._wrapperState.listeners=[M.trapBubbledEvent(E.topLevelTypes.topInvalid,"invalid",e)]}}function h(){L.postUpdateWrapper(this)}function f(t){tt.call($,t)||(Q.test(t)?void 0:m("65",t),$[t]=!0)}function p(t,e){return t.indexOf("-")>=0||null!=e.is}function d(t){var e=t.type;f(e),this._currentElement=t,this._tag=e.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var m=n(4),v=n(7),g=n(333),y=n(335),_=n(36),b=n(77),w=n(32),x=n(131),E=n(23),C=n(38),S=n(55),M=n(57),P=n(347),T=n(134),O=n(8),A=n(354),R=n(356),L=n(135),I=n(359),k=(n(12),n(143)),D=n(370),j=(n(17),n(62)),N=(n(3),n(90),n(26)),B=(n(45),n(91),n(5),T),F=C.deleteListener,U=O.getNodeFromInstance,V=M.listenTo,z=S.registrationNameModules,G={string:!0,number:!0},H=N({style:null}),W=N({__html:null}),X={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},q=11,Y={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},K={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Z={listing:!0,pre:!0,textarea:!0},J=v({menuitem:!0},K),Q=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,$={},tt={}.hasOwnProperty,et=1;d.displayName="ReactDOMComponent",d.Mixin={mountComponent:function(t,e,n,r){this._rootNodeID=et++,this._domID=n._idCounter++,this._hostParent=e,this._hostContainerInfo=n;var o=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(c,this);break;case"button":o=P.getHostProps(this,o,e);break;case"input":A.mountWrapper(this,o,e),o=A.getHostProps(this,o),t.getReactMountReady().enqueue(c,this);break;case"option":R.mountWrapper(this,o,e),o=R.getHostProps(this,o);break;case"select":L.mountWrapper(this,o,e),o=L.getHostProps(this,o),t.getReactMountReady().enqueue(c,this);break;case"textarea":I.mountWrapper(this,o,e),o=I.getHostProps(this,o),t.getReactMountReady().enqueue(c,this)}i(this,o);var a,h;null!=e?(a=e._namespaceURI,h=e._tag):n._tag&&(a=n._namespaceURI,h=n._tag),(null==a||a===b.svg&&"foreignobject"===h)&&(a=b.html),a===b.html&&("svg"===this._tag?a=b.svg:"math"===this._tag&&(a=b.mathml)),this._namespaceURI=a;var f;if(t.useCreateElement){var p,d=n._ownerDocument;if(a===b.html)if("script"===this._tag){var m=d.createElement("div"),v=this._currentElement.type;m.innerHTML="<"+v+"></"+v+">",p=m.removeChild(m.firstChild)}else p=o.is?d.createElement(this._currentElement.type,o.is):d.createElement(this._currentElement.type);else p=d.createElementNS(a,this._currentElement.type);O.precacheNode(this,p),this._flags|=B.hasCachedChildNodes,this._hostParent||x.setAttributeForRoot(p),this._updateDOMProperties(null,o,t);var y=_(p);this._createInitialChildren(t,o,r,y),f=y}else{var w=this._createOpenTagMarkupAndPutListeners(t,o),E=this._createContentMarkup(t,o,r);f=!E&&K[this._tag]?w+"/>":w+">"+E+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(s,this),o.autoFocus&&t.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"textarea":t.getReactMountReady().enqueue(u,this),o.autoFocus&&t.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"select":o.autoFocus&&t.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"button":o.autoFocus&&t.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"option":t.getReactMountReady().enqueue(l,this)}return f},_createOpenTagMarkupAndPutListeners:function(t,e){var n="<"+this._currentElement.type;for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(null!=i)if(z.hasOwnProperty(r))i&&o(this,r,i,t);else{r===H&&(i&&(i=this._previousStyleCopy=v({},e.style)),i=y.createMarkupForStyles(i,this));var a=null;null!=this._tag&&p(this._tag,e)?X.hasOwnProperty(r)||(a=x.createMarkupForCustomAttribute(r,i)):a=x.createMarkupForProperty(r,i),a&&(n+=" "+a)}}return t.renderToStaticMarkup?n:(this._hostParent||(n+=" "+x.createMarkupForRoot()),n+=" "+x.createMarkupForID(this._domID))},_createContentMarkup:function(t,e,n){var r="",i=e.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&(r=i.__html);else{var o=G[typeof e.children]?e.children:null,a=null!=o?null:e.children;if(null!=o)r=j(o);else if(null!=a){var s=this.mountChildren(a,t,n);r=s.join("")}}return Z[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(t,e,n,r){var i=e.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&_.queueHTML(r,i.__html);else{var o=G[typeof e.children]?e.children:null,a=null!=o?null:e.children;if(null!=o)_.queueText(r,o);else if(null!=a)for(var s=this.mountChildren(a,t,n),u=0;u<s.length;u++)_.queueChild(r,s[u])}},receiveComponent:function(t,e,n){var r=this._currentElement;this._currentElement=t,this.updateComponent(e,r,t,n)},updateComponent:function(t,e,n,r){var o=e.props,a=this._currentElement.props;switch(this._tag){case"button":o=P.getHostProps(this,o),a=P.getHostProps(this,a);break;case"input":o=A.getHostProps(this,o),a=A.getHostProps(this,a);break;case"option":o=R.getHostProps(this,o),a=R.getHostProps(this,a);break;case"select":o=L.getHostProps(this,o),a=L.getHostProps(this,a);break;case"textarea":o=I.getHostProps(this,o),a=I.getHostProps(this,a)}switch(i(this,a),this._updateDOMProperties(o,a,t),this._updateDOMChildren(o,a,t,r),this._tag){case"input":A.updateWrapper(this);break;case"textarea":I.updateWrapper(this);break;case"select":t.getReactMountReady().enqueue(h,this)}},_updateDOMProperties:function(t,e,n){var r,i,a;for(r in t)if(!e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&null!=t[r])if(r===H){var s=this._previousStyleCopy;for(i in s)s.hasOwnProperty(i)&&(a=a||{},a[i]="");this._previousStyleCopy=null}else z.hasOwnProperty(r)?t[r]&&F(this,r):p(this._tag,t)?X.hasOwnProperty(r)||x.deleteValueForAttribute(U(this),r):(w.properties[r]||w.isCustomAttribute(r))&&x.deleteValueForProperty(U(this),r);for(r in e){var u=e[r],l=r===H?this._previousStyleCopy:null!=t?t[r]:void 0;if(e.hasOwnProperty(r)&&u!==l&&(null!=u||null!=l))if(r===H)if(u?u=this._previousStyleCopy=v({},u):this._previousStyleCopy=null,l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(a=a||{},a[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(a=a||{},a[i]=u[i])}else a=u;else if(z.hasOwnProperty(r))u?o(this,r,u,n):l&&F(this,r);else if(p(this._tag,e))X.hasOwnProperty(r)||x.setValueForAttribute(U(this),r,u);else if(w.properties[r]||w.isCustomAttribute(r)){var c=U(this);null!=u?x.setValueForProperty(c,r,u):x.deleteValueForProperty(c,r)}}a&&y.setValueForStyles(U(this),a,this)},_updateDOMChildren:function(t,e,n,r){var i=G[typeof t.children]?t.children:null,o=G[typeof e.children]?e.children:null,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,u=null!=i?null:t.children,l=null!=o?null:e.children,c=null!=i||null!=a,h=null!=o||null!=s;null!=u&&null==l?this.updateChildren(null,n,r):c&&!h&&this.updateTextContent(""),null!=o?i!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=l&&this.updateChildren(l,n,r)},getHostNode:function(){return U(this)},unmountComponent:function(t){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var e=this._wrapperState.listeners;if(e)for(var n=0;n<e.length;n++)e[n].remove();break;case"html":case"head":case"body":m("66",this._tag)}this.unmountChildren(t),O.uncacheNode(this),C.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return U(this)}},v(d.prototype,d.Mixin,k.Mixin),t.exports=d},function(t,e,n){"use strict";function r(t,e){var n={_topLevelWrapper:t,_idCounter:1,_ownerDocument:e?e.nodeType===i?e:e.ownerDocument:null,_node:e,_tag:e?e.nodeName.toLowerCase():null,_namespaceURI:e?e.namespaceURI:null};return n}var i=(n(91),9);t.exports=r},function(t,e,n){"use strict";var r=n(7),i=n(36),o=n(8),a=function(t){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(a.prototype,{mountComponent:function(t,e,n,r){var a=n._idCounter++;this._domID=a,this._hostParent=e,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(t.useCreateElement){var u=n._ownerDocument,l=u.createComment(s);return o.precacheNode(this,l),i(l)}return t.renderToStaticMarkup?"":"<!--"+s+"-->"},receiveComponent:function(){},getHostNode:function(){return o.getNodeFromInstance(this)},unmountComponent:function(){o.uncacheNode(this)}}),t.exports=a},function(t,e,n){"use strict";var r=n(15),i=r.createFactory,o={a:i("a"),abbr:i("abbr"),address:i("address"),area:i("area"),article:i("article"),aside:i("aside"),audio:i("audio"),b:i("b"),base:i("base"),bdi:i("bdi"),bdo:i("bdo"),big:i("big"),blockquote:i("blockquote"),body:i("body"),br:i("br"),button:i("button"),canvas:i("canvas"),caption:i("caption"),cite:i("cite"),code:i("code"),col:i("col"),colgroup:i("colgroup"),data:i("data"),datalist:i("datalist"),dd:i("dd"),del:i("del"),details:i("details"),dfn:i("dfn"),dialog:i("dialog"),div:i("div"),dl:i("dl"),dt:i("dt"),em:i("em"),embed:i("embed"),fieldset:i("fieldset"),figcaption:i("figcaption"),figure:i("figure"),footer:i("footer"),form:i("form"),h1:i("h1"),h2:i("h2"),h3:i("h3"),h4:i("h4"),h5:i("h5"),h6:i("h6"),head:i("head"),header:i("header"),hgroup:i("hgroup"),hr:i("hr"),html:i("html"),i:i("i"),iframe:i("iframe"),img:i("img"),input:i("input"),ins:i("ins"),kbd:i("kbd"),keygen:i("keygen"),label:i("label"),legend:i("legend"),li:i("li"),link:i("link"),main:i("main"),map:i("map"),mark:i("mark"),menu:i("menu"),menuitem:i("menuitem"),meta:i("meta"),meter:i("meter"),nav:i("nav"),noscript:i("noscript"),object:i("object"),ol:i("ol"),optgroup:i("optgroup"),option:i("option"),output:i("output"),p:i("p"),param:i("param"),picture:i("picture"),pre:i("pre"),progress:i("progress"),q:i("q"),rp:i("rp"),rt:i("rt"),ruby:i("ruby"),s:i("s"),samp:i("samp"),script:i("script"),section:i("section"),select:i("select"),small:i("small"),source:i("source"),span:i("span"),strong:i("strong"),style:i("style"),sub:i("sub"),summary:i("summary"),sup:i("sup"),table:i("table"),tbody:i("tbody"),td:i("td"),textarea:i("textarea"),tfoot:i("tfoot"),th:i("th"),thead:i("thead"),time:i("time"),title:i("title"),tr:i("tr"),track:i("track"),u:i("u"),ul:i("ul"),var:i("var"),video:i("video"),wbr:i("wbr"),circle:i("circle"),clipPath:i("clipPath"),defs:i("defs"),ellipse:i("ellipse"),g:i("g"),image:i("image"),line:i("line"),linearGradient:i("linearGradient"),mask:i("mask"),path:i("path"),pattern:i("pattern"),polygon:i("polygon"),polyline:i("polyline"),radialGradient:i("radialGradient"),rect:i("rect"),stop:i("stop"),svg:i("svg"),text:i("text"),tspan:i("tspan")};t.exports=o},function(t,e){"use strict";var n={useCreateElement:!0};t.exports=n},function(t,e,n){"use strict";var r=n(76),i=n(8),o={dangerouslyProcessChildrenUpdates:function(t,e){var n=i.getNodeFromInstance(t);r.processUpdates(n,e)}};t.exports=o},function(t,e,n){"use strict";function r(){this._rootNodeID&&f.updateWrapper(this)}function i(t){var e=this._currentElement.props,n=l.executeOnChange(e,t);h.asap(r,this);var i=e.name;if("radio"===e.type&&null!=i){for(var a=c.getNodeFromInstance(this),s=a;s.parentNode;)s=s.parentNode;for(var u=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),f=0;f<u.length;f++){var p=u[f];if(p!==a&&p.form===a.form){var d=c.getInstanceFromNode(p);d?void 0:o("90"),h.asap(r,d)}}}return n}var o=n(4),a=n(7),s=n(54),u=n(131),l=n(79),c=n(8),h=n(19),f=(n(3),n(5),{getHostProps:function(t,e){var n=l.getValue(e),r=l.getChecked(e),i=a({type:void 0,step:void 0,min:void 0,max:void 0},s.getHostProps(t,e),{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:t._wrapperState.initialValue,checked:null!=r?r:t._wrapperState.initialChecked,onChange:t._wrapperState.onChange});return i},mountWrapper:function(t,e){var n=e.defaultValue;t._wrapperState={initialChecked:null!=e.checked?e.checked:e.defaultChecked,initialValue:null!=e.value?e.value:n,listeners:null,onChange:i.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=e.checked;null!=n&&u.setValueForProperty(c.getNodeFromInstance(t),"checked",n||!1);var r=c.getNodeFromInstance(t),i=l.getValue(e);if(null!=i){var o=""+i;o!==r.value&&(r.value=o)}else null==e.value&&null!=e.defaultValue&&(r.defaultValue=""+e.defaultValue),null==e.checked&&null!=e.defaultChecked&&(r.defaultChecked=!!e.defaultChecked)},postMountWrapper:function(t){var e=t._currentElement.props,n=c.getNodeFromInstance(t);switch(e.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}});t.exports=f},function(t,e,n){"use strict";function r(t,e){null!=e&&("input"!==e.type&&"textarea"!==e.type&&"select"!==e.type||null==e.props||null!==e.props.value||i||(i=!0))}var i=(n(40),n(5),!1),o={onBeforeMountComponent:function(t,e){r(t,e)},onBeforeUpdateComponent:function(t,e){r(t,e)}};t.exports=o},function(t,e,n){"use strict";function r(t){var e="";return o.forEach(t,function(t){null!=t&&("string"==typeof t||"number"==typeof t?e+=t:u||(u=!0))}),e}var i=n(7),o=n(80),a=n(8),s=n(135),u=(n(5),!1),l={mountWrapper:function(t,e,n){var i=null;if(null!=n){var o=n;"optgroup"===o._tag&&(o=o._hostParent),null!=o&&"select"===o._tag&&(i=s.getSelectValueContext(o))}var a=null;if(null!=i){var u;if(u=null!=e.value?e.value+"":r(e.children),a=!1,Array.isArray(i)){for(var l=0;l<i.length;l++)if(""+i[l]===u){a=!0;break}}else a=""+i===u}t._wrapperState={selected:a}},postMountWrapper:function(t){var e=t._currentElement.props;if(null!=e.value){var n=a.getNodeFromInstance(t);n.setAttribute("value",e.value)}},getHostProps:function(t,e){var n=i({selected:void 0,children:void 0},e);null!=t._wrapperState.selected&&(n.selected=t._wrapperState.selected);var o=r(e.children);return o&&(n.children=o),n}};t.exports=l},function(t,e,n){"use strict";function r(t,e,n,r){return t===n&&e===r}function i(t){var e=document.selection,n=e.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(t),i.setEndPoint("EndToStart",n);var o=i.text.length,a=o+r;return{start:o,end:a}}function o(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var n=e.anchorNode,i=e.anchorOffset,o=e.focusNode,a=e.focusOffset,s=e.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(u){return null}var l=r(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),c=l?0:s.toString().length,h=s.cloneRange();h.selectNodeContents(t),h.setEnd(s.startContainer,s.startOffset);var f=r(h.startContainer,h.startOffset,h.endContainer,h.endOffset),p=f?0:h.toString().length,d=p+c,m=document.createRange();
m.setStart(n,i),m.setEnd(o,a);var v=m.collapsed;return{start:v?d:p,end:v?p:d}}function a(t,e){var n,r,i=document.selection.createRange().duplicate();void 0===e.end?(n=e.start,r=n):e.start>e.end?(n=e.end,r=e.start):(n=e.start,r=e.end),i.moveToElementText(t),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function s(t,e){if(window.getSelection){var n=window.getSelection(),r=t[c()].length,i=Math.min(e.start,r),o=void 0===e.end?i:Math.min(e.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=l(t,i),u=l(t,o);if(s&&u){var h=document.createRange();h.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(h),n.extend(u.node,u.offset)):(h.setEnd(u.node,u.offset),n.addRange(h))}}}var u=n(13),l=n(389),c=n(156),h=u.canUseDOM&&"selection"in document&&!("getSelection"in window),f={getOffsets:h?i:o,setOffsets:h?a:s};t.exports=f},function(t,e,n){"use strict";var r=n(4),i=n(7),o=n(76),a=n(36),s=n(8),u=n(62),l=(n(3),n(91),function(t){this._currentElement=t,this._stringText=""+t,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});i(l.prototype,{mountComponent:function(t,e,n,r){var i=n._idCounter++,o=" react-text: "+i+" ",l=" /react-text ";if(this._domID=i,this._hostParent=e,t.useCreateElement){var c=n._ownerDocument,h=c.createComment(o),f=c.createComment(l),p=a(c.createDocumentFragment());return a.queueChild(p,a(h)),this._stringText&&a.queueChild(p,a(c.createTextNode(this._stringText))),a.queueChild(p,a(f)),s.precacheNode(this,h),this._closingComment=f,p}var d=u(this._stringText);return t.renderToStaticMarkup?d:"<!--"+o+"-->"+d+"<!--"+l+"-->"},receiveComponent:function(t,e){if(t!==this._currentElement){this._currentElement=t;var n=""+t;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();o.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var t=this._commentNodes;if(t)return t;if(!this._closingComment)for(var e=s.getNodeFromInstance(this),n=e.nextSibling;;){if(null==n?r("67",this._domID):void 0,8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return t=[this._hostNode,this._closingComment],this._commentNodes=t,t},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),t.exports=l},function(t,e,n){"use strict";function r(){this._rootNodeID&&h.updateWrapper(this)}function i(t){var e=this._currentElement.props,n=u.executeOnChange(e,t);return c.asap(r,this),n}var o=n(4),a=n(7),s=n(54),u=n(79),l=n(8),c=n(19),h=(n(3),n(5),{getHostProps:function(t,e){null!=e.dangerouslySetInnerHTML?o("91"):void 0;var n=a({},s.getHostProps(t,e),{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue,onChange:t._wrapperState.onChange});return n},mountWrapper:function(t,e){var n=u.getValue(e),r=n;if(null==n){var a=e.defaultValue,s=e.children;null!=s&&(null!=a?o("92"):void 0,Array.isArray(s)&&(s.length<=1?void 0:o("93"),s=s[0]),a=""+s),null==a&&(a=""),r=a}t._wrapperState={initialValue:""+r,listeners:null,onChange:i.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=l.getNodeFromInstance(t),r=u.getValue(e);if(null!=r){var i=""+r;i!==n.value&&(n.value=i),null==e.defaultValue&&(n.defaultValue=i)}null!=e.defaultValue&&(n.defaultValue=e.defaultValue)},postMountWrapper:function(t){var e=l.getNodeFromInstance(t);e.value=e.textContent}});t.exports=h},function(t,e,n){"use strict";function r(t,e){"_hostNode"in t?void 0:u("33"),"_hostNode"in e?void 0:u("33");for(var n=0,r=t;r;r=r._hostParent)n++;for(var i=0,o=e;o;o=o._hostParent)i++;for(;n-i>0;)t=t._hostParent,n--;for(;i-n>0;)e=e._hostParent,i--;for(var a=n;a--;){if(t===e)return t;t=t._hostParent,e=e._hostParent}return null}function i(t,e){"_hostNode"in t?void 0:u("35"),"_hostNode"in e?void 0:u("35");for(;e;){if(e===t)return!0;e=e._hostParent}return!1}function o(t){return"_hostNode"in t?void 0:u("36"),t._hostParent}function a(t,e,n){for(var r=[];t;)r.push(t),t=t._hostParent;var i;for(i=r.length;i-- >0;)e(r[i],!1,n);for(i=0;i<r.length;i++)e(r[i],!0,n)}function s(t,e,n,i,o){for(var a=t&&e?r(t,e):null,s=[];t&&t!==a;)s.push(t),t=t._hostParent;for(var u=[];e&&e!==a;)u.push(e),e=e._hostParent;var l;for(l=0;l<s.length;l++)n(s[l],!0,i);for(l=u.length;l-- >0;)n(u[l],!1,o)}var u=n(4);n(3);t.exports={isAncestor:i,getLowestCommonAncestor:r,getParentInstance:o,traverseTwoPhase:a,traverseEnterLeave:s}},function(t,e,n){"use strict";function r(t,e){null!=e&&"string"==typeof e.type&&(e.type.indexOf("-")>=0||e.props.is||o(t,e))}var i,o=(n(32),n(55),n(40),n(5),function(t,e){var n=[];for(var r in e.props){var o=i(e.type,r,t);o||n.push(r)}n.map(function(t){return"`"+t+"`"}).join(", ");1===n.length||n.length>1}),a={onBeforeMountComponent:function(t,e){r(t,e)},onBeforeUpdateComponent:function(t,e){r(t,e)}};t.exports=a},function(t,e,n){"use strict";function r(){x||(x=!0,g.EventEmitter.injectReactEventListener(v),g.EventPluginHub.injectEventPluginOrder(a),g.EventPluginUtils.injectComponentTree(h),g.EventPluginUtils.injectTreeTraversal(p),g.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:w,EnterLeaveEventPlugin:s,ChangeEventPlugin:o,SelectEventPlugin:b,BeforeInputEventPlugin:i}),g.HostComponent.injectGenericComponentClass(c),g.HostComponent.injectTextComponentClass(d),g.DOMProperty.injectDOMPropertyConfig(u),g.DOMProperty.injectDOMPropertyConfig(_),g.EmptyComponent.injectEmptyComponentFactory(function(t){return new f(t)}),g.Updates.injectReconcileTransaction(y),g.Updates.injectBatchingStrategy(m),g.Component.injectEnvironment(l))}var i=n(334),o=n(336),a=n(338),s=n(339),u=n(341),l=n(344),c=n(348),h=n(8),f=n(350),p=n(360),d=n(358),m=n(136),v=n(364),g=n(140),y=n(146),_=n(372),b=n(373),w=n(374),x=!1;t.exports={inject:r}},function(t,e,n){"use strict";function r(t){i.enqueueEvents(t),i.processEventQueue(!1)}var i=n(38),o={handleTopLevel:function(t,e,n,o){var a=i.extractEvents(t,e,n,o);r(a)}};t.exports=o},function(t,e,n){"use strict";function r(t){for(;t._hostParent;)t=t._hostParent;var e=h.getNodeFromInstance(t),n=e.parentNode;return h.getClosestInstanceFromNode(n)}function i(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function o(t){var e=p(t.nativeEvent),n=h.getClosestInstanceFromNode(e),i=n;do t.ancestors.push(i),i=i&&r(i);while(i);for(var o=0;o<t.ancestors.length;o++)n=t.ancestors[o],m._handleTopLevel(t.topLevelType,n,t.nativeEvent,p(t.nativeEvent))}function a(t){var e=d(window);t(e)}var s=n(7),u=n(100),l=n(13),c=n(28),h=n(8),f=n(19),p=n(88),d=n(195);s(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(i,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(t){m._handleTopLevel=t},setEnabled:function(t){m._enabled=!!t},isEnabled:function(){return m._enabled},trapBubbledEvent:function(t,e,n){var r=n;return r?u.listen(r,e,m.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,n){var r=n;return r?u.capture(r,e,m.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=a.bind(null,t);u.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(m._enabled){var n=i.getPooled(t,e);try{f.batchedUpdates(o,n)}finally{i.release(n)}}}};t.exports=m},function(t,e,n){"use strict";var r=n(4),i=n(80),o=n(15),a=n(17),s=(n(3),n(5),{create:function(t){if("object"!=typeof t||!t||Array.isArray(t))return t;if(o.isValidElement(t))return t;1===t.nodeType?r("0"):void 0;var e=[];for(var n in t)i.mapIntoWithKeyPrefixInternal(t[n],e,n,a.thatReturnsArgument);return e}});t.exports=s},function(t,e,n){"use strict";function r(t){return f+t.toString(36)}function i(t,e){return t.charAt(e)===f||e===t.length}function o(t){return""===t||t.charAt(0)===f&&t.charAt(t.length-1)!==f}function a(t,e){return 0===e.indexOf(t)&&i(e,t.length)}function s(t){return t?t.substr(0,t.lastIndexOf(f)):""}function u(t,e){if(o(t)&&o(e)?void 0:h("112",t,e),a(t,e)?void 0:h("113",t,e),t===e)return t;var n,r=t.length+p;for(n=r;n<e.length&&!i(e,n);n++);return e.substr(0,n)}function l(t,e){var n=Math.min(t.length,e.length);if(0===n)return"";for(var r=0,a=0;a<=n;a++)if(i(t,a)&&i(e,a))r=a;else if(t.charAt(a)!==e.charAt(a))break;var s=t.substr(0,r);return o(s)?void 0:h("114",t,e,s),s}function c(t,e,n,r,i,o){t=t||"",e=e||"",t===e?h("115",t):void 0;var l=a(e,t);l||a(t,e)?void 0:h("116",t,e);for(var c=0,f=l?s:u,p=t;;p=f(p,e)){var m;if(i&&p===t||o&&p===e||(m=n(p,l,r)),m===!1||p===e)break;c++<d?void 0:h("117",t,e,p)}}var h=n(4),f=(n(3),"."),p=f.length,d=1e4,m={createReactRootID:function(t){return r(t)},createReactID:function(t,e){return t+e},getReactRootIDFromNodeID:function(t){if(t&&t.charAt(0)===f&&t.length>1){var e=t.indexOf(f,1);return e>-1?t.substr(0,e):t}return null},traverseEnterLeave:function(t,e,n,r,i){var o=l(t,e);o!==t&&c(t,o,n,r,!1,!0),o!==e&&c(o,e,n,i,!0,!1)},traverseTwoPhase:function(t,e,n){t&&(c("",t,e,n,!0,!1),c(t,"",e,n,!1,!0))},traverseTwoPhaseSkipTarget:function(t,e,n){t&&(c("",t,e,n,!0,!0),c(t,"",e,n,!0,!0))},traverseAncestors:function(t,e,n){c("",t,e,n,!0,!1)},getFirstCommonAncestorID:l,_getNextDescendantID:u,isAncestorIDOf:a,SEPARATOR:f};t.exports=m},function(t,e,n){"use strict";var r=n(385),i=/\/?>/,o=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=r(t);return o.test(t)?t:t.replace(i," "+a.CHECKSUM_ATTR_NAME+'="'+e+'"$&')},canReuseMarkup:function(t,e){var n=e.getAttribute(a.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var i=r(t);return i===n}};t.exports=a},function(t,e,n){"use strict";var r=n(4),i=(n(3),{isValidOwner:function(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)},addComponentAsRefTo:function(t,e,n){i.isValidOwner(n)?void 0:r("119"),n.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,n){i.isValidOwner(n)?void 0:r("120");var o=n.getPublicInstance();o&&o.refs[e]===t.getPublicInstance()&&n.detachRef(e)}});t.exports=i},function(t,e,n){"use strict";function r(t,e,n){this.props=t,this.context=e,this.refs=u,this.updater=n||s}function i(){}var o=n(7),a=n(58),s=n(83),u=n(37);i.prototype=a.prototype,r.prototype=new i,r.prototype.constructor=r,o(r.prototype,a.prototype),r.prototype.isPureReactComponent=!0,t.exports=r},function(t,e,n){"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.useCreateElement=!1,this.updateQueue=new s(this)}var i=n(7),o=n(28),a=n(43),s=(n(12),n(371)),u=[],l={enqueue:function(){}},c={getTransactionWrappers:function(){return u},getReactMountReady:function(){return l},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};i(r.prototype,a.Mixin,c),o.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){}var o=n(60),a=(n(43),n(5),function(){function t(e){r(this,t),this.transaction=e}return t.prototype.isMounted=function(t){return!1},t.prototype.enqueueCallback=function(t,e,n){this.transaction.isInTransaction()&&o.enqueueCallback(t,e,n)},t.prototype.enqueueForceUpdate=function(t){this.transaction.isInTransaction()?o.enqueueForceUpdate(t):i(t,"forceUpdate")},t.prototype.enqueueReplaceState=function(t,e){this.transaction.isInTransaction()?o.enqueueReplaceState(t,e):i(t,"replaceState")},t.prototype.enqueueSetState=function(t,e){this.transaction.isInTransaction()?o.enqueueSetState(t,e):i(t,"setState")},t}());t.exports=a},function(t,e){"use strict";var n={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},r={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},i={Properties:{},DOMAttributeNamespaces:{xlinkActuate:n.xlink,xlinkArcrole:n.xlink,xlinkHref:n.xlink,xlinkRole:n.xlink,xlinkShow:n.xlink,xlinkTitle:n.xlink,xlinkType:n.xlink,xmlBase:n.xml,xmlLang:n.xml,xmlSpace:n.xml},DOMAttributeNames:{}};Object.keys(r).forEach(function(t){i.Properties[t]=0,r[t]&&(i.DOMAttributeNames[t]=r[t])}),t.exports=i},function(t,e,n){"use strict";function r(t){if("selectionStart"in t&&l.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(t,e){if(w||null==y||y!==h())return null;var n=r(y);if(!b||!d(b,n)){b=n;var i=c.getPooled(g.select,_,t,e);return i.type="select",i.target=y,a.accumulateTwoPhaseDispatches(i),i}return null}var o=n(23),a=n(39),s=n(13),u=n(8),l=n(141),c=n(24),h=n(102),f=n(158),p=n(26),d=n(45),m=o.topLevelTypes,v=s.canUseDOM&&"documentMode"in document&&document.documentMode<=11,g={select:{phasedRegistrationNames:{bubbled:p({onSelect:null}),captured:p({onSelectCapture:null})},dependencies:[m.topBlur,m.topContextMenu,m.topFocus,m.topKeyDown,m.topMouseDown,m.topMouseUp,m.topSelectionChange]}},y=null,_=null,b=null,w=!1,x=!1,E=p({onSelect:null}),C={eventTypes:g,extractEvents:function(t,e,n,r){if(!x)return null;var o=e?u.getNodeFromInstance(e):window;switch(t){case m.topFocus:(f(o)||"true"===o.contentEditable)&&(y=o,_=e,b=null);break;case m.topBlur:y=null,_=null,b=null;break;case m.topMouseDown:w=!0;break;case m.topContextMenu:case m.topMouseUp:return w=!1,i(n,r);case m.topSelectionChange:if(v)break;case m.topKeyDown:case m.topKeyUp:return i(n,r)}return null},didPutListener:function(t,e,n){e===E&&(x=!0)}};t.exports=C},function(t,e,n){"use strict";function r(t){return"."+t._rootNodeID}var i=n(4),o=n(23),a=n(100),s=n(39),u=n(8),l=n(375),c=n(376),h=n(24),f=n(379),p=n(381),d=n(61),m=n(378),v=n(382),g=n(383),y=n(42),_=n(384),b=n(17),w=n(86),x=(n(3),n(26)),E=o.topLevelTypes,C={abort:{phasedRegistrationNames:{bubbled:x({onAbort:!0}),captured:x({onAbortCapture:!0})}},animationEnd:{phasedRegistrationNames:{bubbled:x({onAnimationEnd:!0}),captured:x({onAnimationEndCapture:!0})}},animationIteration:{phasedRegistrationNames:{bubbled:x({onAnimationIteration:!0}),captured:x({onAnimationIterationCapture:!0})}},animationStart:{phasedRegistrationNames:{bubbled:x({onAnimationStart:!0}),captured:x({onAnimationStartCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:x({onBlur:!0}),captured:x({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:x({onCanPlay:!0}),captured:x({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:x({onCanPlayThrough:!0}),captured:x({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:x({onClick:!0}),captured:x({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:x({onContextMenu:!0}),captured:x({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:x({onCopy:!0}),captured:x({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:x({onCut:!0}),captured:x({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:x({onDoubleClick:!0}),captured:x({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:x({onDrag:!0}),captured:x({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:x({onDragEnd:!0}),captured:x({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:x({onDragEnter:!0}),captured:x({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:x({onDragExit:!0}),captured:x({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:x({onDragLeave:!0}),captured:x({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:x({onDragOver:!0}),captured:x({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:x({onDragStart:!0}),captured:x({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:x({onDrop:!0}),captured:x({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:x({onDurationChange:!0}),captured:x({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:x({onEmptied:!0}),captured:x({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:x({onEncrypted:!0}),captured:x({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:x({onEnded:!0}),captured:x({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:x({onError:!0}),captured:x({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:x({onFocus:!0}),captured:x({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:x({onInput:!0}),captured:x({onInputCapture:!0})}},invalid:{phasedRegistrationNames:{bubbled:x({onInvalid:!0}),captured:x({onInvalidCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:x({onKeyDown:!0}),captured:x({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:x({onKeyPress:!0}),captured:x({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:x({onKeyUp:!0}),captured:x({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:x({onLoad:!0}),captured:x({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:x({onLoadedData:!0}),captured:x({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:x({onLoadedMetadata:!0}),captured:x({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:x({onLoadStart:!0}),captured:x({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:x({onMouseDown:!0}),captured:x({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:x({onMouseMove:!0}),captured:x({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:x({onMouseOut:!0}),captured:x({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:x({onMouseOver:!0}),captured:x({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:x({onMouseUp:!0}),captured:x({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:x({onPaste:!0}),captured:x({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:x({onPause:!0}),captured:x({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:x({onPlay:!0}),captured:x({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:x({onPlaying:!0}),captured:x({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:x({onProgress:!0}),captured:x({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:x({onRateChange:!0}),captured:x({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:x({onReset:!0}),captured:x({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:x({onScroll:!0}),captured:x({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:x({onSeeked:!0}),captured:x({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:x({onSeeking:!0}),captured:x({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:x({onStalled:!0}),captured:x({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:x({onSubmit:!0}),captured:x({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:x({onSuspend:!0}),captured:x({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:x({onTimeUpdate:!0}),captured:x({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:x({onTouchCancel:!0}),captured:x({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:x({onTouchEnd:!0}),captured:x({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:x({onTouchMove:!0}),captured:x({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:x({onTouchStart:!0}),captured:x({onTouchStartCapture:!0})}},transitionEnd:{phasedRegistrationNames:{bubbled:x({onTransitionEnd:!0}),captured:x({onTransitionEndCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:x({onVolumeChange:!0}),captured:x({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:x({onWaiting:!0}),captured:x({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:x({onWheel:!0}),captured:x({onWheelCapture:!0})}}},S={topAbort:C.abort,topAnimationEnd:C.animationEnd,topAnimationIteration:C.animationIteration,topAnimationStart:C.animationStart,topBlur:C.blur,topCanPlay:C.canPlay,topCanPlayThrough:C.canPlayThrough,topClick:C.click,topContextMenu:C.contextMenu,topCopy:C.copy,topCut:C.cut,topDoubleClick:C.doubleClick,topDrag:C.drag,topDragEnd:C.dragEnd,topDragEnter:C.dragEnter,topDragExit:C.dragExit,topDragLeave:C.dragLeave,topDragOver:C.dragOver,topDragStart:C.dragStart,topDrop:C.drop,topDurationChange:C.durationChange,topEmptied:C.emptied,topEncrypted:C.encrypted,topEnded:C.ended,topError:C.error,topFocus:C.focus,topInput:C.input,topInvalid:C.invalid,topKeyDown:C.keyDown,topKeyPress:C.keyPress,topKeyUp:C.keyUp,topLoad:C.load,topLoadedData:C.loadedData,topLoadedMetadata:C.loadedMetadata,topLoadStart:C.loadStart,topMouseDown:C.mouseDown,topMouseMove:C.mouseMove,topMouseOut:C.mouseOut,topMouseOver:C.mouseOver,topMouseUp:C.mouseUp,topPaste:C.paste,topPause:C.pause,topPlay:C.play,topPlaying:C.playing,topProgress:C.progress,topRateChange:C.rateChange,topReset:C.reset,topScroll:C.scroll,topSeeked:C.seeked,topSeeking:C.seeking,topStalled:C.stalled,topSubmit:C.submit,topSuspend:C.suspend,topTimeUpdate:C.timeUpdate,topTouchCancel:C.touchCancel,topTouchEnd:C.touchEnd,topTouchMove:C.touchMove,topTouchStart:C.touchStart,topTransitionEnd:C.transitionEnd,topVolumeChange:C.volumeChange,topWaiting:C.waiting,topWheel:C.wheel};for(var M in S)S[M].dependencies=[M];var P=x({onClick:null}),T={},O={eventTypes:C,extractEvents:function(t,e,n,r){var o=S[t];if(!o)return null;var a;switch(t){case E.topAbort:case E.topCanPlay:case E.topCanPlayThrough:case E.topDurationChange:case E.topEmptied:case E.topEncrypted:case E.topEnded:case E.topError:case E.topInput:case E.topInvalid:case E.topLoad:case E.topLoadedData:case E.topLoadedMetadata:case E.topLoadStart:case E.topPause:case E.topPlay:case E.topPlaying:case E.topProgress:case E.topRateChange:case E.topReset:case E.topSeeked:case E.topSeeking:case E.topStalled:case E.topSubmit:case E.topSuspend:case E.topTimeUpdate:case E.topVolumeChange:case E.topWaiting:a=h;break;case E.topKeyPress:if(0===w(n))return null;case E.topKeyDown:case E.topKeyUp:a=p;break;case E.topBlur:case E.topFocus:a=f;break;case E.topClick:if(2===n.button)return null;case E.topContextMenu:case E.topDoubleClick:case E.topMouseDown:case E.topMouseMove:case E.topMouseOut:case E.topMouseOver:case E.topMouseUp:a=d;break;case E.topDrag:case E.topDragEnd:case E.topDragEnter:case E.topDragExit:case E.topDragLeave:case E.topDragOver:case E.topDragStart:case E.topDrop:a=m;break;case E.topTouchCancel:case E.topTouchEnd:case E.topTouchMove:case E.topTouchStart:a=v;break;case E.topAnimationEnd:case E.topAnimationIteration:case E.topAnimationStart:a=l;break;case E.topTransitionEnd:a=g;break;case E.topScroll:a=y;break;case E.topWheel:a=_;break;case E.topCopy:case E.topCut:case E.topPaste:a=c}a?void 0:i("86",t);var u=a.getPooled(o,e,n,r);return s.accumulateTwoPhaseDispatches(u),u},didPutListener:function(t,e,n){if(e===P){var i=r(t),o=u.getNodeFromInstance(t);T[i]||(T[i]=a.listen(o,"click",b))}},willDeleteListener:function(t,e){if(e===P){var n=r(t);T[n].remove(),delete T[n]}}};t.exports=O},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(24),o={animationName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(24),o={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(24),o={data:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(61),o={dataTransfer:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(42),o={relatedTarget:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(24),o={data:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(42),o=n(86),a=n(388),s=n(87),u={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(t){return"keypress"===t.type?o(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?o(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};i.augmentClass(r,u),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(42),o=n(87),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};i.augmentClass(r,a),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(24),o={propertyName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(61),o={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,o),t.exports=r},function(t,e){"use strict";function n(t){for(var e=1,n=0,i=0,o=t.length,a=o&-4;i<a;){for(var s=Math.min(i+4096,a);i<s;i+=4)n+=(e+=t.charCodeAt(i))+(e+=t.charCodeAt(i+1))+(e+=t.charCodeAt(i+2))+(e+=t.charCodeAt(i+3));e%=r,n%=r}for(;i<o;i++)n+=e+=t.charCodeAt(i);return e%=r,n%=r,e|n<<16}var r=65521;t.exports=n},function(t,e,n){"use strict";function r(t,e,n){var r=null==e||"boolean"==typeof e||""===e;if(r)return"";var i=isNaN(e);if(i||0===e||o.hasOwnProperty(t)&&o[t])return""+e;if("string"==typeof e){e=e.trim()}return e+"px"}var i=n(129),o=(n(5),i.isUnitlessNumber);t.exports=r},function(t,e,n){"use strict";function r(t){if(null==t)return null;if(1===t.nodeType)return t;var e=a.get(t);return e?(e=s(e),e?o.getNodeFromInstance(e):null):void("function"==typeof t.render?i("44"):i("45",Object.keys(t)))}var i=n(4),o=(n(20),n(8)),a=n(33),s=n(89);n(3),n(5);t.exports=r},function(t,e,n){"use strict";function r(t){if(t.key){var e=o[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var n=i(t);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===t.type||"keyup"===t.type?a[t.keyCode]||"Unidentified":""}var i=n(86),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",
113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},function(t,e){"use strict";function n(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function i(t,e){for(var i=n(t),o=0,a=0;i;){if(3===i.nodeType){if(a=o+i.textContent.length,o<=e&&a>=e)return{node:i,offset:e-o};o=a}i=n(r(i))}}t.exports=i},function(t,e,n){"use strict";function r(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}function i(t){if(s[t])return s[t];if(!a[t])return t;var e=a[t];for(var n in e)if(e.hasOwnProperty(n)&&n in u)return s[t]=e[n];return""}var o=n(13),a={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},u={};o.canUseDOM&&(u=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),t.exports=i},function(t,e,n){"use strict";function r(t){return o.isValidElement(t)?void 0:i("143"),t}var i=n(4),o=n(15);n(3);t.exports=r},function(t,e,n){"use strict";function r(t){return'"'+i(t)+'"'}var i=n(62);t.exports=r},function(t,e,n){"use strict";var r=n(142);t.exports=r.renderSubtreeIntoContainer},function(t,e,n){"use strict";function r(t,e,n){return!i(t.props,e)||!i(t.state,n)}var i=n(45);t.exports=r},function(t,e,n){t.exports=n(160)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(){function t(t){function o(t,n,r){return(0,u.default)(t.apply(void 0,i(n)),f.subscribe,p,s,e,r,t.name)}var s=t.getState,h=t.dispatch;n=o;var f=(0,c.emitter)(),p=(0,a.wrapSagaDispatch)(h);return function(t){return function(e){r&&r.actionDispatched(e);var n=t(e);return e[a.SAGA_ACTION]?f.emit(e):(0,l.asap)(function(){return f.emit(e)}),n}}}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=void 0,r=e.sagaMonitor;if(a.is.func(e))throw new Error("Saga middleware no longer accept Generator functions. Use sagaMiddleware.run instead");if(e.logger&&!a.is.func(e.logger))throw new Error("`options.logger` passed to the Saga middleware is not a function!");if(e.onerror&&!a.is.func(e.onerror))throw new Error("`options.onerror` passed to the Saga middleware is not a function!");return t.run=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];(0,a.check)(n,a.is.notUndef,"Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware"),(0,a.check)(t,a.is.func,"sagaMiddleware.run(saga, ...args): saga argument must be a Generator function!");var s=(0,a.uid)();r&&r.effectTriggered({effectId:s,root:!0,parentEffectId:0,effect:{root:!0,saga:t,args:i}});var u=n(t,i,s);return r&&r.effectResolved(s,u),u},t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=n(25),s=n(162),u=r(s),l=n(163),c=n(67)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=e.subscribe,r=e.dispatch,i=e.getState,a=e.sagaMonitor,u=e.logger;(0,o.check)(t,o.is.iterator,"runSaga must be called on an iterator");var l=(0,o.uid)();a&&(r=(0,o.wrapSagaDispatch)(r),a.effectTriggered({effectId:l,root:!0,parentEffectId:0,effect:{root:!0,saga:t,args:[]}}));var c=(0,s.default)(t,n,r,i,{sagaMonitor:a,logger:u},l,t.name);return a&&a.effectResolved(l,c),c}Object.defineProperty(e,"__esModule",{value:!0}),e.runSaga=i;var o=n(25),a=n(162),s=r(a)},function(t,e,n){"use strict";function r(t,e){function n(e,n){if(o===d)return p;if(n)throw o=d,n;i&&i(e);var r=t[o](),a=u(r,3),s=a[0],l=a[1],c=a[2];return o=s,i=c,o===d?p:l}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",i=void 0,o=e;return(0,c.makeIterator)(n,function(t){return n(null,t)},r,!0)}function i(t){return Array.isArray(t)?String(t.map(function(t){return String(t)})):String(t)}function o(t,e){for(var n=arguments.length,o=Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];var s={done:!1,value:(0,h.take)(t)},u=function(t){return{done:!1,value:h.fork.apply(void 0,[e].concat(o,[t]))}},c=void 0,f=function(t){return c=t};return r({q1:function(){return["q2",s,f]},q2:function(){return c===l.END?[d]:["q1",u(c)]}},"q1","takeEvery("+i(t)+", "+e.name+")")}function a(t,e){for(var n=arguments.length,o=Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];var s={done:!1,value:(0,h.take)(t)},u=function(t){return{done:!1,value:h.fork.apply(void 0,[e].concat(o,[t]))}},c=function(t){return{done:!1,value:(0,h.cancel)(t)}},f=void 0,p=void 0,m=function(t){return f=t},v=function(t){return p=t};return r({q1:function(){return["q2",s,v]},q2:function(){return p===l.END?[d]:f?["q3",c(f)]:["q1",u(p),m]},q3:function(){return["q1",u(p),m]}},"q1","takeLatest("+i(t)+", "+e.name+")")}function s(t,e,n){for(var o=arguments.length,a=Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];var u=void 0,p=void 0,m={done:!1,value:(0,h.actionChannel)(e,f.buffers.sliding(1))},v=function(){return{done:!1,value:(0,h.take)(p,e)}},g=function(t){return{done:!1,value:h.fork.apply(void 0,[n].concat(a,[t]))}},y={done:!1,value:(0,h.call)(c.delay,t)},_=function(t){return u=t},b=function(t){return p=t};return r({q1:function(){return["q2",m,b]},q2:function(){return["q3",v(),_]},q3:function(){return u===l.END?[d]:["q4",g(u)]},q4:function(){return["q2",y]}},"q1","throttle("+i(e)+", "+n.name+")")}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.takeEvery=o,e.takeLatest=a,e.throttle=s;var l=n(67),c=n(25),h=n(68),f=n(66),p={done:!0,value:void 0},d={}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(25);Object.defineProperty(e,"TASK",{enumerable:!0,get:function(){return r.TASK}}),Object.defineProperty(e,"SAGA_ACTION",{enumerable:!0,get:function(){return r.SAGA_ACTION}}),Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return r.noop}}),Object.defineProperty(e,"is",{enumerable:!0,get:function(){return r.is}}),Object.defineProperty(e,"deferred",{enumerable:!0,get:function(){return r.deferred}}),Object.defineProperty(e,"arrayOfDeffered",{enumerable:!0,get:function(){return r.arrayOfDeffered}}),Object.defineProperty(e,"createMockTask",{enumerable:!0,get:function(){return r.createMockTask}});var i=n(68);Object.defineProperty(e,"CHANNEL_END",{enumerable:!0,get:function(){return i.CHANNEL_END}}),Object.defineProperty(e,"asEffect",{enumerable:!0,get:function(){return i.asEffect}})},function(t,e){"use strict";function n(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(i){return"function"==typeof i?i(n,r,t):e(i)}}}}e.__esModule=!0;var r=n();r.withExtraArgument=n,e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(n,r,i){var a=t(n,r,i),u=a.dispatch,l=[],c={getState:a.getState,dispatch:function(t){return u(t)}};return l=e.map(function(t){return t(c)}),u=s.default.apply(void 0,l)(a.dispatch),o({},a,{dispatch:u})}}}e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=i;var a=n(164),s=r(a)},function(t,e){"use strict";function n(t,e){return function(){return e(t.apply(void 0,arguments))}}function r(t,e){if("function"==typeof t)return n(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(t),i={},o=0;o<r.length;o++){var a=r[o],s=t[a];"function"==typeof s&&(i[a]=n(s,e))}return i}e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=e&&e.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function o(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:s.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+e+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var i="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:i}))throw new Error('Reducer "'+e+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function a(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var a=e[r];"function"==typeof t[a]&&(n[a]=t[a])}var s,u=Object.keys(n);try{o(n)}catch(l){s=l}return function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments[1];if(s)throw s;for(var r=!1,o={},a=0;a<u.length;a++){var l=u[a],c=n[l],h=t[l],f=c(h,e);if("undefined"==typeof f){var p=i(l,e);throw new Error(p)}o[l]=f,r=r||f!==h}return r?o:t}}e.__esModule=!0,e.default=a;var s=n(165),u=n(69),l=(r(u),n(166));r(l)},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){return t===e}function i(t){var e=arguments.length<=1||void 0===arguments[1]?r:arguments[1],n=null,i=null;return function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return null!==n&&n.length===o.length&&o.every(function(t,r){return e(t,n[r])})||(i=t.apply(void 0,o)),n=o,i}}function o(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every(function(t){return"function"==typeof t})){var n=e.map(function(t){return typeof t}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+n+"]"))}return e}function a(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return function(){for(var e=arguments.length,i=Array(e),a=0;a<e;a++)i[a]=arguments[a];var s=0,u=i.pop(),l=o(i),c=t.apply(void 0,[function(){return s++,u.apply(void 0,arguments)}].concat(r)),h=function(t,e){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var a=l.map(function(n){return n.apply(void 0,[t,e].concat(i))});return c.apply(void 0,n(a))};return h.resultFunc=u,h.recomputations=function(){return s},h.resetRecomputations=function(){return s=0},h}}function s(t){var e=arguments.length<=1||void 0===arguments[1]?u:arguments[1];if("object"!=typeof t)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof t);var n=Object.keys(t);return e(n.map(function(e){return t[e]}),function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce(function(t,e,r){return t[n[r]]=e,t},{})})}e.__esModule=!0,e.defaultMemoize=i,e.createSelectorCreator=a,e.createStructuredSelector=s;var u=e.createSelector=a(i)},function(t,e,n){"use strict";var r=n(206);t.exports=function(t,e,n,i){var o=n?n.call(i,t,e):void 0;if(void 0!==o)return!!o;if(t===e)return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var a=r(t),s=r(e),u=a.length;if(u!==s.length)return!1;i=i||null;for(var l=Object.prototype.hasOwnProperty.bind(e),c=0;c<u;c++){var h=a[c];if(!l(h))return!1;var f=t[h],p=e[h],d=n?n.call(i,f,p,h):void 0;if(d===!1||void 0===d&&f!==p)return!1}return!0}},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){var t=function(){function e(t){return i.appendChild(t.dom),t}function n(t){for(var e=0;e<i.children.length;e++)i.children[e].style.display=e===t?"block":"none";r=t}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(t){t.preventDefault(),n(++r%i.children.length)},!1);var o=(performance||Date).now(),a=o,s=0,u=e(new t.Panel("FPS","#0ff","#002")),l=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new t.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:e,showPanel:n,begin:function(){o=(performance||Date).now()},end:function(){s++;var t=(performance||Date).now();if(l.update(t-o,200),t>a+1e3&&(u.update(1e3*s/(t-a),100),a=t,s=0,c)){var e=performance.memory;c.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){o=this.end()},domElement:i,setMode:n}};return t.Panel=function(t,e,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,u=48*a,l=3*a,c=2*a,h=3*a,f=15*a,p=74*a,d=30*a,m=document.createElement("canvas");m.width=s,m.height=u,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*a+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,s,u),v.fillStyle=e,v.fillText(t,l,c),v.fillRect(h,f,p,d),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h,f,p,d),{dom:m,update:function(u,g){r=Math.min(r,u),i=Math.max(i,u),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,s,f),v.fillStyle=e,v.fillText(o(u)+" "+t+" ("+o(r)+"-"+o(i)+")",l,c),v.drawImage(m,h+a,f,p-a,d,h,f,p-a,d),v.fillRect(h+p-a,f,a,d),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h+p-a,f,a,o((1-u/g)*d))}}},t})},function(t,e,n){t.exports=n(408)},function(t,e,n){(function(t,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(409),s=i(a);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof t?t:r;var u=(0,s.default)(o);e.default=u}).call(e,function(){return this}(),n(110)(t))},function(t,e){"use strict";function n(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e){t.exports=function(t){function e(e,n){function r(){return 2*Math.PI/60/60*k.autoRotateSpeed}function i(){return Math.pow(.95,k.zoomSpeed)}function o(t){z.theta-=t}function a(t){z.phi-=t}function s(e){k.object instanceof t.PerspectiveCamera?G/=e:k.object instanceof t.OrthographicCamera?(k.object.zoom=Math.max(k.minZoom,Math.min(k.maxZoom,k.object.zoom*e)),k.object.updateProjectionMatrix(),W=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),k.enableZoom=!1)}function u(e){k.object instanceof t.PerspectiveCamera?G*=e:k.object instanceof t.OrthographicCamera?(k.object.zoom=Math.max(k.minZoom,Math.min(k.maxZoom,k.object.zoom/e)),k.object.updateProjectionMatrix(),W=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),k.enableZoom=!1)}function l(t){X.set(t.clientX,t.clientY)}function c(t){Q.set(t.clientX,t.clientY)}function h(t){K.set(t.clientX,t.clientY)}function f(t){q.set(t.clientX,t.clientY),Y.subVectors(q,X);var e=k.domElement===document?k.domElement.body:k.domElement;o(2*Math.PI*Y.x/e.clientWidth*k.rotateSpeed),a(2*Math.PI*Y.y/e.clientHeight*k.rotateSpeed),X.copy(q),k.update()}function p(t){$.set(t.clientX,t.clientY),tt.subVectors($,Q),tt.y>0?s(i()):tt.y<0&&u(i()),Q.copy($),k.update()}function d(t){Z.set(t.clientX,t.clientY),J.subVectors(Z,K),rt(J.x,J.y),K.copy(Z),k.update()}function m(t){}function v(t){t.deltaY<0?u(i()):t.deltaY>0&&s(i()),k.update()}function g(t){switch(t.keyCode){case k.keys.UP:rt(0,k.keyPanSpeed),k.update();break;case k.keys.BOTTOM:rt(0,-k.keyPanSpeed),k.update();break;case k.keys.LEFT:rt(k.keyPanSpeed,0),k.update();break;case k.keys.RIGHT:rt(-k.keyPanSpeed,0),k.update()}}function y(t){X.set(t.touches[0].pageX,t.touches[0].pageY)}function _(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);Q.set(0,r)}function b(t){K.set(t.touches[0].pageX,t.touches[0].pageY)}function w(t){q.set(t.touches[0].pageX,t.touches[0].pageY),Y.subVectors(q,X);var e=k.domElement===document?k.domElement.body:k.domElement;o(2*Math.PI*Y.x/e.clientWidth*k.rotateSpeed),a(2*Math.PI*Y.y/e.clientHeight*k.rotateSpeed),X.copy(q),k.update()}function x(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);$.set(0,r),tt.subVectors($,Q),tt.y>0?u(i()):tt.y<0&&s(i()),Q.copy($),k.update()}function E(t){Z.set(t.touches[0].pageX,t.touches[0].pageY),J.subVectors(Z,K),rt(J.x,J.y),K.copy(Z),k.update()}function C(t){}function S(t){if(k.enabled!==!1){if(t.preventDefault(),t.button===k.mouseButtons.ORBIT){if(k.enableRotate===!1)return;l(t),F=B.ROTATE}else if(t.button===k.mouseButtons.ZOOM){if(k.enableZoom===!1)return;c(t),F=B.DOLLY}else if(t.button===k.mouseButtons.PAN){if(k.enablePan===!1)return;h(t),F=B.PAN}F!==B.NONE&&(document.addEventListener("mousemove",M,!1),document.addEventListener("mouseup",P,!1),k.dispatchEvent(j))}}function M(t){if(k.enabled!==!1)if(t.preventDefault(),F===B.ROTATE){if(k.enableRotate===!1)return;f(t)}else if(F===B.DOLLY){if(k.enableZoom===!1)return;p(t)}else if(F===B.PAN){if(k.enablePan===!1)return;d(t)}}function P(t){k.enabled!==!1&&(m(t),document.removeEventListener("mousemove",M,!1),document.removeEventListener("mouseup",P,!1),k.dispatchEvent(N),F=B.NONE)}function T(t){k.enabled===!1||k.enableZoom===!1||F!==B.NONE&&F!==B.ROTATE||(t.preventDefault(),t.stopPropagation(),v(t),k.dispatchEvent(j),k.dispatchEvent(N))}function O(t){k.enabled!==!1&&k.enableKeys!==!1&&k.enablePan!==!1&&g(t)}function A(t){if(k.enabled!==!1){switch(t.touches.length){case 1:if(k.enableRotate===!1)return;y(t),F=B.TOUCH_ROTATE;break;case 2:if(k.enableZoom===!1)return;_(t),F=B.TOUCH_DOLLY;break;case 3:if(k.enablePan===!1)return;b(t),F=B.TOUCH_PAN;break;default:F=B.NONE}F!==B.NONE&&k.dispatchEvent(j)}}function R(t){if(k.enabled!==!1)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(k.enableRotate===!1)return;if(F!==B.TOUCH_ROTATE)return;w(t);break;case 2:if(k.enableZoom===!1)return;if(F!==B.TOUCH_DOLLY)return;x(t);break;case 3:if(k.enablePan===!1)return;if(F!==B.TOUCH_PAN)return;E(t);break;default:F=B.NONE}}function L(t){k.enabled!==!1&&(C(t),k.dispatchEvent(N),F=B.NONE)}function I(t){t.preventDefault()}this.object=e,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new t.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:t.MOUSE.LEFT,ZOOM:t.MOUSE.MIDDLE,PAN:t.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return V.phi},this.getAzimuthalAngle=function(){return V.theta},this.reset=function(){k.target.copy(k.target0),k.object.position.copy(k.position0),k.object.zoom=k.zoom0,k.object.updateProjectionMatrix(),k.dispatchEvent(D),k.update(),F=B.NONE},this.update=function(){var n=new t.Vector3,i=(new t.Quaternion).setFromUnitVectors(e.up,new t.Vector3(0,1,0)),a=i.clone().inverse(),s=new t.Vector3,u=new t.Quaternion;return function(){var t=k.object.position;return n.copy(t).sub(k.target),n.applyQuaternion(i),V.setFromVector3(n),k.autoRotate&&F===B.NONE&&o(r()),V.theta+=z.theta,V.phi+=z.phi,V.theta=Math.max(k.minAzimuthAngle,Math.min(k.maxAzimuthAngle,V.theta)),V.phi=Math.max(k.minPolarAngle,Math.min(k.maxPolarAngle,V.phi)),V.makeSafe(),V.radius*=G,V.radius=Math.max(k.minDistance,Math.min(k.maxDistance,V.radius)),k.target.add(H),n.setFromSpherical(V),n.applyQuaternion(a),t.copy(k.target).add(n),k.object.lookAt(k.target),k.enableDamping===!0?(z.theta*=1-k.dampingFactor,z.phi*=1-k.dampingFactor):z.set(0,0,0),G=1,H.set(0,0,0),!!(W||s.distanceToSquared(k.object.position)>U||8*(1-u.dot(k.object.quaternion))>U)&&(k.dispatchEvent(D),s.copy(k.object.position),u.copy(k.object.quaternion),W=!1,!0)}}(),this.dispose=function(){k.domElement.removeEventListener("contextmenu",I,!1),k.domElement.removeEventListener("mousedown",S,!1),k.domElement.removeEventListener("wheel",T,!1),k.domElement.removeEventListener("touchstart",A,!1),k.domElement.removeEventListener("touchend",L,!1),k.domElement.removeEventListener("touchmove",R,!1),document.removeEventListener("mousemove",M,!1),document.removeEventListener("mouseup",P,!1),window.removeEventListener("keydown",O,!1)};var k=this,D={type:"change"},j={type:"start"},N={type:"end"},B={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},F=B.NONE,U=1e-6,V=new t.Spherical,z=new t.Spherical,G=1,H=new t.Vector3,W=!1,X=new t.Vector2,q=new t.Vector2,Y=new t.Vector2,K=new t.Vector2,Z=new t.Vector2,J=new t.Vector2,Q=new t.Vector2,$=new t.Vector2,tt=new t.Vector2,et=function(){var e=new t.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),H.add(e)}}(),nt=function(){var e=new t.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),H.add(e)}}(),rt=function(){var e=new t.Vector3;return function(n,r){var i=k.domElement===document?k.domElement.body:k.domElement;if(k.object instanceof t.PerspectiveCamera){var o=k.object.position;e.copy(o).sub(k.target);var a=e.length();a*=Math.tan(k.object.fov/2*Math.PI/180),et(2*n*a/i.clientHeight,k.object.matrix),nt(2*r*a/i.clientHeight,k.object.matrix)}else k.object instanceof t.OrthographicCamera?(et(n*(k.object.right-k.object.left)/k.object.zoom/i.clientWidth,k.object.matrix),nt(r*(k.object.top-k.object.bottom)/k.object.zoom/i.clientHeight,k.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),k.enablePan=!1)}}();k.domElement.addEventListener("contextmenu",I,!1),k.domElement.addEventListener("mousedown",S,!1),k.domElement.addEventListener("wheel",T,!1),k.domElement.addEventListener("touchstart",A,!1),k.domElement.addEventListener("touchend",L,!1),k.domElement.addEventListener("touchmove",R,!1),window.addEventListener("keydown",O,!1),this.update()}return e.prototype=Object.create(t.EventDispatcher.prototype),e.prototype.constructor=e,Object.defineProperties(e.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(t){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!t}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(t){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!t}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(t){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!t}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(t){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!t}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(t){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=t}}}),e}},function(t,e,n){var r,i;(function(n){var o=o||function(){var t=[];return{getAll:function(){return t},removeAll:function(){t=[]},add:function(e){t.push(e)},remove:function(e){var n=t.indexOf(e);n!==-1&&t.splice(n,1)},update:function(e,n){if(0===t.length)return!1;var r=0;for(e=void 0!==e?e:o.now();r<t.length;)t[r].update(e)||n?r++:t.splice(r,1);return!0}}}();!function(){void 0===this.window&&void 0!==this.process?o.now=function(){var t=n.hrtime();return 1e3*t[0]+t[1]/1e3}:void 0!==this.window&&void 0!==window.performance&&void 0!==window.performance.now?o.now=window.performance.now.bind(window.performance):void 0!==Date.now?o.now=Date.now:o.now=function(){return(new Date).getTime()}}(),o.Tween=function(t){var e=t,n={},r={},i={},a=1e3,s=0,u=!1,l=!1,c=!1,h=0,f=null,p=o.Easing.Linear.None,d=o.Interpolation.Linear,m=[],v=null,g=!1,y=null,_=null,b=null;for(var w in t)n[w]=parseFloat(t[w],10);this.to=function(t,e){return void 0!==e&&(a=e),r=t,this},this.start=function(t){o.add(this),l=!0,g=!1,f=void 0!==t?t:o.now(),f+=h;for(var a in r){if(r[a]instanceof Array){if(0===r[a].length)continue;r[a]=[e[a]].concat(r[a])}void 0!==n[a]&&(n[a]=e[a],n[a]instanceof Array==!1&&(n[a]*=1),i[a]=n[a]||0)}return this},this.stop=function(){return l?(o.remove(this),l=!1,null!==b&&b.call(e),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var t=0,e=m.length;t<e;t++)m[t].stop()},this.delay=function(t){return h=t,this},this.repeat=function(t){return s=t,this},this.yoyo=function(t){return u=t,this},this.easing=function(t){return p=t,this},this.interpolation=function(t){return d=t,this},this.chain=function(){return m=arguments,this},this.onStart=function(t){return v=t,this},this.onUpdate=function(t){return y=t,this},this.onComplete=function(t){return _=t,this},this.onStop=function(t){return b=t,this},this.update=function(t){var o,l,b;if(t<f)return!0;g===!1&&(null!==v&&v.call(e),g=!0),l=(t-f)/a,l=l>1?1:l,b=p(l);for(o in r)if(void 0!==n[o]){var w=n[o]||0,x=r[o];x instanceof Array?e[o]=d(x,b):("string"==typeof x&&(x="+"===x.charAt(0)||"-"===x.charAt(0)?w+parseFloat(x,10):parseFloat(x,10)),"number"==typeof x&&(e[o]=w+(x-w)*b))}if(null!==y&&y.call(e,b),1===l){if(s>0){isFinite(s)&&s--;for(o in i){if("string"==typeof r[o]&&(i[o]=i[o]+parseFloat(r[o],10)),u){var E=i[o];i[o]=r[o],r[o]=E}n[o]=i[o]}return u&&(c=!c),f=t+h,!0}null!==_&&_.call(e);for(var C=0,S=m.length;C<S;C++)m[C].start(f+a);return!1}return!0}},o.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-o.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*o.Easing.Bounce.In(2*t):.5*o.Easing.Bounce.Out(2*t-1)+.5}}},o.Interpolation={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),a=o.Interpolation.Utils.Linear;return e<0?a(t[0],t[1],r):e>1?a(t[n],t[n-1],n-r):a(t[i],t[i+1>n?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,a=o.Interpolation.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-e,r-s)*i(e,s)*t[s]*a(r,s);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),a=o.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(r=n*(1+e))),a(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):a(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=o.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var r=e;r>1;r--)n*=r;return t[e]=n,n}}(),CatmullRom:function(t,e,n,r,i){var o=.5*(n-t),a=.5*(r-e),s=i*i,u=i*s;return(2*e-2*n+o+a)*u+(-3*e+3*n-2*o-a)*s+o*i+e}}},function(n){r=[],i=function(){return o}.apply(e,r),!(void 0!==i&&(t.exports=i))}(this)}).call(e,n(34))},249,function(t,e){},413,function(t,e,n,r){"use strict";var i=n(r),o=i;t.exports=o}]));
//# sourceMappingURL=main.6e55bd1b.js.map